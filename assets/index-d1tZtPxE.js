function ztt(L,n){for(var c=0;c<n.length;c++){const M=n[c];if(typeof M!="string"&&!Array.isArray(M)){for(const R in M)if(R!=="default"&&!(R in L)){const I=Object.getOwnPropertyDescriptor(M,R);I&&Object.defineProperty(L,R,I.get?I:{enumerable:!0,get:()=>M[R]})}}}return Object.freeze(Object.defineProperty(L,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const R of document.querySelectorAll('link[rel="modulepreload"]'))M(R);new MutationObserver(R=>{for(const I of R)if(I.type==="childList")for(const m of I.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&M(m)}).observe(document,{childList:!0,subtree:!0});function c(R){const I={};return R.integrity&&(I.integrity=R.integrity),R.referrerPolicy&&(I.referrerPolicy=R.referrerPolicy),R.crossOrigin==="use-credentials"?I.credentials="include":R.crossOrigin==="anonymous"?I.credentials="omit":I.credentials="same-origin",I}function M(R){if(R.ep)return;R.ep=!0;const I=c(R);fetch(R.href,I)}})();var gO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xO(L){return L&&L.__esModule&&Object.prototype.hasOwnProperty.call(L,"default")?L.default:L}var yO={exports:{}};(function(L,n){(function(M,R){L.exports=R()})(gO,()=>(()=>{var c={50792:m=>{var E=Object.prototype.hasOwnProperty,i="~";function d(){}Object.create&&(d.prototype=Object.create(null),new d().__proto__||(i=!1));function S(r,o,p){this.fn=r,this.context=o,this.once=p||!1}function u(r,o,p,a,v){if(typeof p!="function")throw new TypeError("The listener must be a function");var x=new S(p,a||r,v),g=i?i+o:o;return r._events[g]?r._events[g].fn?r._events[g]=[r._events[g],x]:r._events[g].push(x):(r._events[g]=x,r._eventsCount++),r}function l(r,o){--r._eventsCount===0?r._events=new d:delete r._events[o]}function h(){this._events=new d,this._eventsCount=0}h.prototype.eventNames=function(){var o=[],p,a;if(this._eventsCount===0)return o;for(a in p=this._events)E.call(p,a)&&o.push(i?a.slice(1):a);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(p)):o},h.prototype.listeners=function(o){var p=i?i+o:o,a=this._events[p];if(!a)return[];if(a.fn)return[a.fn];for(var v=0,x=a.length,g=new Array(x);v<x;v++)g[v]=a[v].fn;return g},h.prototype.listenerCount=function(o){var p=i?i+o:o,a=this._events[p];return a?a.fn?1:a.length:0},h.prototype.emit=function(o,p,a,v,x,g){var y=i?i+o:o;if(!this._events[y])return!1;var T=this._events[y],P=arguments.length,A,b;if(T.fn){switch(T.once&&this.removeListener(o,T.fn,void 0,!0),P){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,p),!0;case 3:return T.fn.call(T.context,p,a),!0;case 4:return T.fn.call(T.context,p,a,v),!0;case 5:return T.fn.call(T.context,p,a,v,x),!0;case 6:return T.fn.call(T.context,p,a,v,x,g),!0}for(b=1,A=new Array(P-1);b<P;b++)A[b-1]=arguments[b];T.fn.apply(T.context,A)}else{var O=T.length,D;for(b=0;b<O;b++)switch(T[b].once&&this.removeListener(o,T[b].fn,void 0,!0),P){case 1:T[b].fn.call(T[b].context);break;case 2:T[b].fn.call(T[b].context,p);break;case 3:T[b].fn.call(T[b].context,p,a);break;case 4:T[b].fn.call(T[b].context,p,a,v);break;default:if(!A)for(D=1,A=new Array(P-1);D<P;D++)A[D-1]=arguments[D];T[b].fn.apply(T[b].context,A)}}return!0},h.prototype.on=function(o,p,a){return u(this,o,p,a,!1)},h.prototype.once=function(o,p,a){return u(this,o,p,a,!0)},h.prototype.removeListener=function(o,p,a,v){var x=i?i+o:o;if(!this._events[x])return this;if(!p)return l(this,x),this;var g=this._events[x];if(g.fn)g.fn===p&&(!v||g.once)&&(!a||g.context===a)&&l(this,x);else{for(var y=0,T=[],P=g.length;y<P;y++)(g[y].fn!==p||v&&!g[y].once||a&&g[y].context!==a)&&T.push(g[y]);T.length?this._events[x]=T.length===1?T[0]:T:l(this,x)}return this},h.prototype.removeAllListeners=function(o){var p;return o?(p=i?i+o:o,this._events[p]&&l(this,p)):(this._events=new d,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=i,h.EventEmitter=h,m.exports=h},11517:(m,E,i)=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(38829),S=function(u,l,h,r){for(var o=u[0],p=1;p<u.length;p++){var a=u[p];d(a,o,l,h,r),o=a}return u};m.exports=S},80318:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66979),S=function(u,l,h,r,o){return d(u,"angle",l,h,r,o)};m.exports=S},60757:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){for(var u=0;u<i.length;u++){var l=i[u];d.call(S,l)}return i};m.exports=E},69927:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){S===void 0&&(S=0);for(var u=S;u<i.length;u++){var l=i[u],h=!0;for(var r in d)l[r]!==d[r]&&(h=!1);if(h)return l}return null};m.exports=E},32265:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){S===void 0&&(S=0);for(var u=i.length-1;u>=S;u--){var l=i[u],h=!0;for(var r in d)l[r]!==d[r]&&(h=!1);if(h)return l}return null};m.exports=E},94420:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(11879),S=i(60461),u=i(95540),l=i(29747),h=i(41481),r=new h({sys:{queueDepthSort:l,events:{once:l}}},0,0,1,1).setOrigin(0,0),o=function(p,a){a===void 0&&(a={});var v=a.hasOwnProperty("width"),x=a.hasOwnProperty("height"),g=u(a,"width",-1),y=u(a,"height",-1),T=u(a,"cellWidth",1),P=u(a,"cellHeight",T),A=u(a,"position",S.TOP_LEFT),b=u(a,"x",0),O=u(a,"y",0),D=0,B=0,G=g*T,V=y*P;r.setPosition(b,O),r.setSize(T,P);for(var k=0;k<p.length;k++)if(d(p[k],r,A),v&&g===-1)r.x+=T;else if(x&&y===-1)r.y+=P;else if(x&&!v){if(B+=P,r.y+=P,B===V&&(B=0,D+=T,r.y=O,r.x+=T,D===G))break}else if(D+=T,r.x+=T,D===G&&(D=0,B+=P,r.x=b,r.y+=P,B===V))break;return p};m.exports=o},41721:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66979),S=function(u,l,h,r,o){return d(u,"alpha",l,h,r,o)};m.exports=S},67285:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66979),S=function(u,l,h,r,o){return d(u,"x",l,h,r,o)};m.exports=S},9074:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66979),S=function(u,l,h,r,o,p,a){return h==null&&(h=l),d(u,"x",l,r,p,a),d(u,"y",h,o,p,a)};m.exports=S},75222:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66979),S=function(u,l,h,r,o){return d(u,"y",l,h,r,o)};m.exports=S},22983:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){S===void 0&&(S=0),u===void 0&&(u=6.28);for(var l=S,h=(u-S)/i.length,r=d.x,o=d.y,p=d.radius,a=0;a<i.length;a++)i[a].x=r+p*Math.cos(l),i[a].y=o+p*Math.sin(l),l+=h;return i};m.exports=E},95253:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){S===void 0&&(S=0),u===void 0&&(u=6.28);for(var l=S,h=(u-S)/i.length,r=d.width/2,o=d.height/2,p=0;p<i.length;p++)i[p].x=d.x+r*Math.cos(l),i[p].y=d.y+o*Math.sin(l),l+=h;return i};m.exports=E},88505:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(15258),S=i(26708),u=function(l,h,r){var o;r?o=S(h,r,l.length):o=d(h,l.length);for(var p=0;p<l.length;p++){var a=l[p],v=o[p];a.x=v.x,a.y=v.y}return l};m.exports=u},41346:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(14649),S=i(86003),u=i(49498),l=function(h,r,o){o===void 0&&(o=0);var p=d(r,!1,h.length);o>0?S(p,o):o<0&&u(p,Math.abs(o));for(var a=0;a<h.length;a++)h[a].x=p[a].x,h[a].y=p[a].y;return h};m.exports=l},11575:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(84993),S=function(u,l,h){var r=d({x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2},h),o=d({x1:l.x2,y1:l.y2,x2:l.x3,y2:l.y3},h),p=d({x1:l.x3,y1:l.y3,x2:l.x1,y2:l.y1},h);r.pop(),o.pop(),p.pop(),r=r.concat(o,p);for(var a=r.length/u.length,v=0,x=0;x<u.length;x++){var g=u[x],y=r[Math.floor(v)];g.x=y.x,g.y=y.y,v+=a}return u};m.exports=S},29953:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){for(var u=0;u<i.length;u++){var l=i[u];l.anims&&l.anims.play(d,S)}return i};m.exports=E},66979:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u,l,h){u===void 0&&(u=0),l===void 0&&(l=0),h===void 0&&(h=1);var r,o=0,p=i.length;if(h===1)for(r=l;r<p;r++)i[r][d]+=S+o*u,o++;else for(r=l;r>=0;r--)i[r][d]+=S+o*u,o++;return i};m.exports=E},43967:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u,l,h){u===void 0&&(u=0),l===void 0&&(l=0),h===void 0&&(h=1);var r,o=0,p=i.length;if(h===1)for(r=l;r<p;r++)i[r][d]=S+o*u,o++;else for(r=l;r>=0;r--)i[r][d]=S+o*u,o++;return i};m.exports=E},88926:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(28176),S=function(u,l){for(var h=0;h<u.length;h++)d(l,u[h]);return u};m.exports=S},33286:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(24820),S=function(u,l){for(var h=0;h<u.length;h++)d(l,u[h]);return u};m.exports=S},96e3:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(65822),S=function(u,l){for(var h=0;h<u.length;h++)d(l,u[h]);return u};m.exports=S},28789:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26597),S=function(u,l){for(var h=0;h<u.length;h++)d(l,u[h]);return u};m.exports=S},97154:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(90260),S=function(u,l){for(var h=0;h<u.length;h++)d(l,u[h]);return u};m.exports=S},20510:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66979),S=function(u,l,h,r,o){return d(u,"rotation",l,h,r,o)};m.exports=S},91051:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(1163),S=i(20339),u=function(l,h,r){for(var o=h.x,p=h.y,a=0;a<l.length;a++){var v=l[a];d(v,o,p,r,Math.max(1,S(v.x,v.y,o,p)))}return l};m.exports=u},76332:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(1163),S=function(u,l,h,r){var o=l.x,p=l.y;if(r===0)return u;for(var a=0;a<u.length;a++)d(u[a],o,p,h,r);return u};m.exports=S},61619:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66979),S=function(u,l,h,r,o){return d(u,"scaleX",l,h,r,o)};m.exports=S},94868:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66979),S=function(u,l,h,r,o,p,a){return h==null&&(h=l),d(u,"scaleX",l,r,p,a),d(u,"scaleY",h,o,p,a)};m.exports=S},95532:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66979),S=function(u,l,h,r,o){return d(u,"scaleY",l,h,r,o)};m.exports=S},8689:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),S=function(u,l,h,r,o){return d(u,"alpha",l,h,r,o)};m.exports=S},2645:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),S=function(u,l,h,r){return d(u,"blendMode",l,0,h,r)};m.exports=S},32372:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),S=function(u,l,h,r,o){return d(u,"depth",l,h,r,o)};m.exports=S},85373:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){for(var u=0;u<i.length;u++)i[u].setInteractive(d,S);return i};m.exports=E},81583:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),S=function(u,l,h,r,o,p,a){return h==null&&(h=l),d(u,"originX",l,r,p,a),d(u,"originY",h,o,p,a),u.forEach(function(v){v.updateDisplayOrigin()}),u};m.exports=S},79939:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),S=function(u,l,h,r,o){return d(u,"rotation",l,h,r,o)};m.exports=S},2699:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),S=function(u,l,h,r,o,p,a){return h==null&&(h=l),d(u,"scaleX",l,r,p,a),d(u,"scaleY",h,o,p,a)};m.exports=S},98739:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),S=function(u,l,h,r,o){return d(u,"scaleX",l,h,r,o)};m.exports=S},98476:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),S=function(u,l,h,r,o){return d(u,"scaleY",l,h,r,o)};m.exports=S},6207:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),S=function(u,l,h,r,o,p,a){return h==null&&(h=l),d(u,"scrollFactorX",l,r,p,a),d(u,"scrollFactorY",h,o,p,a)};m.exports=S},6607:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),S=function(u,l,h,r,o){return d(u,"scrollFactorX",l,h,r,o)};m.exports=S},72248:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),S=function(u,l,h,r,o){return d(u,"scrollFactorY",l,h,r,o)};m.exports=S},14036:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u,l){for(var h=0;h<i.length;h++)i[h].setTint(d,S,u,l);return i};m.exports=E},50159:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),S=function(u,l,h,r){return d(u,"visible",l,0,h,r)};m.exports=S},77597:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),S=function(u,l,h,r,o){return d(u,"x",l,h,r,o)};m.exports=S},83194:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),S=function(u,l,h,r,o,p,a){return h==null&&(h=l),d(u,"x",l,r,p,a),d(u,"y",h,o,p,a)};m.exports=S},67678:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43967),S=function(u,l,h,r,o){return d(u,"y",l,h,r,o)};m.exports=S},35850:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26099),S=function(u,l,h,r,o){r===void 0&&(r=0),o===void 0&&(o=new d);var p,a,v=u.length;if(v===1)p=u[0].x,a=u[0].y,u[0].x=l,u[0].y=h;else{var x=1,g=0;r===0&&(g=v-1,x=v-2),p=u[g].x,a=u[g].y,u[g].x=l,u[g].y=h;for(var y=0;y<v;y++)if(!(x>=v||x===-1)){var T=u[x],P=T.x,A=T.y;T.x=p,T.y=a,p=P,a=A,r===0?x--:x++}}return o.x=p,o.y=a,o};m.exports=S},8628:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(33680),S=function(u){return d(u)};m.exports=S},21837:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7602),S=function(u,l,h,r,o){o===void 0&&(o=!1);var p=Math.abs(r-h)/u.length,a;if(o)for(a=0;a<u.length;a++)u[a][l]+=d(a*p,h,r);else for(a=0;a<u.length;a++)u[a][l]=d(a*p,h,r);return u};m.exports=S},21910:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(54261),S=function(u,l,h,r,o){o===void 0&&(o=!1);var p=Math.abs(r-h)/u.length,a;if(o)for(a=0;a<u.length;a++)u[a][l]+=d(a*p,h,r);else for(a=0;a<u.length;a++)u[a][l]=d(a*p,h,r);return u};m.exports=S},62054:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u,l){if(l===void 0&&(l=!1),i.length===0)return i;if(i.length===1)return l?i[0][d]+=(u+S)/2:i[0][d]=(u+S)/2,i;var h=Math.abs(u-S)/(i.length-1),r;if(l)for(r=0;r<i.length;r++)i[r][d]+=r*h+S;else for(r=0;r<i.length;r++)i[r][d]=r*h+S;return i};m.exports=E},79815:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){for(var d=0;d<i.length;d++)i[d].visible=!i[d].visible;return i};m.exports=E},39665:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(15994),S=function(u,l,h){h===void 0&&(h=0);for(var r=0;r<u.length;r++){var o=u[r];o.x=d(o.x,l.left-h,l.right+h),o.y=d(o.y,l.top-h,l.bottom+h)}return u};m.exports=S},61061:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={AlignTo:i(11517),Angle:i(80318),Call:i(60757),GetFirst:i(69927),GetLast:i(32265),GridAlign:i(94420),IncAlpha:i(41721),IncX:i(67285),IncXY:i(9074),IncY:i(75222),PlaceOnCircle:i(22983),PlaceOnEllipse:i(95253),PlaceOnLine:i(88505),PlaceOnRectangle:i(41346),PlaceOnTriangle:i(11575),PlayAnimation:i(29953),PropertyValueInc:i(66979),PropertyValueSet:i(43967),RandomCircle:i(88926),RandomEllipse:i(33286),RandomLine:i(96e3),RandomRectangle:i(28789),RandomTriangle:i(97154),Rotate:i(20510),RotateAround:i(91051),RotateAroundDistance:i(76332),ScaleX:i(61619),ScaleXY:i(94868),ScaleY:i(95532),SetAlpha:i(8689),SetBlendMode:i(2645),SetDepth:i(32372),SetHitArea:i(85373),SetOrigin:i(81583),SetRotation:i(79939),SetScale:i(2699),SetScaleX:i(98739),SetScaleY:i(98476),SetScrollFactor:i(6207),SetScrollFactorX:i(6607),SetScrollFactorY:i(72248),SetTint:i(14036),SetVisible:i(50159),SetX:i(77597),SetXY:i(83194),SetY:i(67678),ShiftPosition:i(35850),Shuffle:i(8628),SmootherStep:i(21910),SmoothStep:i(21837),Spread:i(62054),ToggleVisible:i(79815),WrapInRectangle:i(39665)}},42099:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45319),S=i(83419),u=i(74943),l=i(81957),h=i(41138),r=i(35154),o=i(90126),p=new S({initialize:function(v,x,g){this.manager=v,this.key=x,this.type="frame",this.frames=this.getFrames(v.textureManager,r(g,"frames",[]),r(g,"defaultTextureKey",null),r(g,"sortFrames",!0)),this.frameRate=r(g,"frameRate",null),this.duration=r(g,"duration",null),this.msPerFrame,this.skipMissedFrames=r(g,"skipMissedFrames",!0),this.delay=r(g,"delay",0),this.repeat=r(g,"repeat",0),this.repeatDelay=r(g,"repeatDelay",0),this.yoyo=r(g,"yoyo",!1),this.showBeforeDelay=r(g,"showBeforeDelay",!1),this.showOnStart=r(g,"showOnStart",!1),this.hideOnComplete=r(g,"hideOnComplete",!1),this.randomFrame=r(g,"randomFrame",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(u.PAUSE_ALL,this.pause,this),this.manager.on(u.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(a,v,x,g){x===null&&g===null?(a.frameRate=24,a.duration=24/v*1e3):x&&g===null?(a.duration=x,a.frameRate=v/(x/1e3)):(a.frameRate=g,a.duration=v/g*1e3),a.msPerFrame=1e3/a.frameRate},addFrame:function(a){return this.addFrameAt(this.frames.length,a)},addFrameAt:function(a,v){var x=this.getFrames(this.manager.textureManager,v);if(x.length>0){if(a===0)this.frames=x.concat(this.frames);else if(a===this.frames.length)this.frames=this.frames.concat(x);else{var g=this.frames.slice(0,a),y=this.frames.slice(a);this.frames=g.concat(x,y)}this.updateFrameSequence()}return this},checkFrame:function(a){return a>=0&&a<this.frames.length},getFirstTick:function(a){a.accumulator=0,a.nextTick=a.frameRate===a.currentAnim.frameRate&&a.currentFrame.duration||a.msPerFrame},getFrameAt:function(a){return this.frames[a]},getFrames:function(a,v,x,g){g===void 0&&(g=!0);var y=[],T,P,A=1,b,O;if(typeof v=="string"){if(O=v,!a.exists(O))return console.warn('Texture "%s" not found',O),y;var D=a.get(O),B=D.getFrameNames();g&&o(B),v=[],B.forEach(function(X){v.push({key:O,frame:X})})}if(!Array.isArray(v)||v.length===0)return y;for(b=0;b<v.length;b++){var G=v[b],V=r(G,"key",x);if(V){var k=r(G,"frame",0),U=a.getFrame(V,k);if(!U){console.warn('Texture "%s" not found',V);continue}P=new h(V,k,A,U),P.duration=r(G,"duration",0),P.isFirst=!T,T&&(T.nextFrame=P,P.prevFrame=T),y.push(P),T=P,A++}}if(y.length>0){P.isLast=!0,P.nextFrame=y[0],y[0].prevFrame=P;var W=1/(y.length-1);for(b=0;b<y.length;b++)y[b].progress=b*W}return y},getNextTick:function(a){a.accumulator-=a.nextTick,a.nextTick=a.frameRate===a.currentAnim.frameRate&&a.currentFrame.duration||a.msPerFrame},getFrameByProgress:function(a){return a=d(a,0,1),l(a,this.frames,"progress")},nextFrame:function(a){var v=a.currentFrame;v.isLast?a.yoyo?this.handleYoyoFrame(a,!1):a.repeatCounter>0?a.inReverse&&a.forward?a.forward=!1:this.repeatAnimation(a):a.complete():this.updateAndGetNextTick(a,v.nextFrame)},handleYoyoFrame:function(a,v){if(v||(v=!1),a.inReverse===!v&&a.repeatCounter>0){(a.repeatDelay===0||a.pendingRepeat)&&(a.forward=v),this.repeatAnimation(a);return}if(a.inReverse!==v&&a.repeatCounter===0){a.complete();return}a.forward=v;var x=v?a.currentFrame.nextFrame:a.currentFrame.prevFrame;this.updateAndGetNextTick(a,x)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(a){var v=a.currentFrame;v.isFirst?a.yoyo?this.handleYoyoFrame(a,!0):a.repeatCounter>0?a.inReverse&&!a.forward?this.repeatAnimation(a):(a.forward=!0,this.repeatAnimation(a)):a.complete():this.updateAndGetNextTick(a,v.prevFrame)},updateAndGetNextTick:function(a,v){a.setCurrentFrame(v),this.getNextTick(a)},removeFrame:function(a){var v=this.frames.indexOf(a);return v!==-1&&this.removeFrameAt(v),this},removeFrameAt:function(a){return this.frames.splice(a,1),this.updateFrameSequence(),this},repeatAnimation:function(a){if(a._pendingStop===2){if(a._pendingStopValue===0)return a.stop();a._pendingStopValue--}a.repeatDelay>0&&!a.pendingRepeat?(a.pendingRepeat=!0,a.accumulator-=a.nextTick,a.nextTick+=a.repeatDelay):(a.repeatCounter--,a.forward?a.setCurrentFrame(a.currentFrame.nextFrame):a.setCurrentFrame(a.currentFrame.prevFrame),a.isPlaying&&(this.getNextTick(a),a.handleRepeat()))},toJSON:function(){var a={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,randomFrame:this.randomFrame,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(v){a.frames.push(v.toJSON())}),a},updateFrameSequence:function(){for(var a=this.frames.length,v=1/(a-1),x,g=0;g<a;g++)x=this.frames[g],x.index=g+1,x.isFirst=!1,x.isLast=!1,x.progress=g*v,g===0?(x.isFirst=!0,a===1?(x.isLast=!0,x.nextFrame=x,x.prevFrame=x):(x.isLast=!1,x.prevFrame=this.frames[a-1],x.nextFrame=this.frames[g+1])):g===a-1&&a>1?(x.isLast=!0,x.prevFrame=this.frames[a-2],x.nextFrame=this.frames[0]):a>1&&(x.prevFrame=this.frames[g-1],x.nextFrame=this.frames[g+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(u.PAUSE_ALL,this.pause,this),this.manager.off(u.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var a=0;a<this.frames.length;a++)this.frames[a].destroy();this.frames=[],this.manager=null}});m.exports=p},41138:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=new d({initialize:function(l,h,r,o,p){p===void 0&&(p=!1),this.textureKey=l,this.textureFrame=h,this.index=r,this.frame=o,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=p},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});m.exports=S},60848:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(42099),S=i(83419),u=i(90330),l=i(50792),h=i(74943),r=i(8443),o=i(95540),p=i(35154),a=i(36383),v=i(20283),x=i(41836),g=new S({Extends:l,initialize:function(T){l.call(this),this.game=T,this.textureManager=null,this.globalTimeScale=1,this.anims=new u,this.mixes=new u,this.paused=!1,this.name="AnimationManager",T.events.once(r.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(r.DESTROY,this.destroy,this)},addMix:function(y,T,P){var A=this.anims,b=this.mixes,O=typeof y=="string"?y:y.key,D=typeof T=="string"?T:T.key;if(A.has(O)&&A.has(D)){var B=b.get(O);B||(B={}),B[D]=P,b.set(O,B)}return this},removeMix:function(y,T){var P=this.mixes,A=typeof y=="string"?y:y.key,b=P.get(A);if(b)if(T){var O=typeof T=="string"?T:T.key;b.hasOwnProperty(O)&&delete b[O]}else T||P.delete(A);return this},getMix:function(y,T){var P=this.mixes,A=typeof y=="string"?y:y.key,b=typeof T=="string"?T:T.key,O=P.get(A);return O&&O.hasOwnProperty(b)?O[b]:0},add:function(y,T){return this.anims.has(y)?(console.warn("Animation key exists: "+y),this):(T.key=y,this.anims.set(y,T),this.emit(h.ADD_ANIMATION,y,T),this)},exists:function(y){return this.anims.has(y)},createFromAseprite:function(y,T,P){var A=[],b=this.game.cache.json.get(y);if(!b)return console.warn("No Aseprite data found for: "+y),A;var O=this,D=p(b,"meta",null),B=p(b,"frames",null);if(D&&B){var G=p(D,"frameTags",[]);G.forEach(function(V){var k=[],U=o(V,"name",null),W=o(V,"from",0),X=o(V,"to",0),_=o(V,"direction","forward");if(U&&(!T||T&&T.indexOf(U)>-1)){for(var Q=0,j=W;j<=X;j++){var it=j.toString(),K=B[it];if(K){var J=o(K,"duration",a.MAX_SAFE_INTEGER);k.push({key:y,frame:it,duration:J}),Q+=J}}_==="reverse"&&(k=k.reverse());var Y={key:U,frames:k,duration:Q,yoyo:_==="pingpong"},q;P?P.anims&&(q=P.anims.create(Y)):q=O.create(Y),q&&A.push(q)}})}return A},create:function(y){var T=y.key,P=!1;return T&&(P=this.get(T),P?console.warn("AnimationManager key already exists: "+T):(P=new d(this,T,y),this.anims.set(T,P),this.emit(h.ADD_ANIMATION,T,P))),P},fromJSON:function(y,T){T===void 0&&(T=!1),T&&this.anims.clear(),typeof y=="string"&&(y=JSON.parse(y));var P=[];if(y.hasOwnProperty("anims")&&Array.isArray(y.anims)){for(var A=0;A<y.anims.length;A++)P.push(this.create(y.anims[A]));y.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=y.globalTimeScale)}else y.hasOwnProperty("key")&&y.type==="frame"&&P.push(this.create(y));return P},generateFrameNames:function(y,T){var P=p(T,"prefix",""),A=p(T,"start",0),b=p(T,"end",0),O=p(T,"suffix",""),D=p(T,"zeroPad",0),B=p(T,"outputArray",[]),G=p(T,"frames",!1);if(!this.textureManager.exists(y))return console.warn('Texture "%s" not found',y),B;var V=this.textureManager.get(y);if(!V)return B;var k;if(T)for(G||(G=v(A,b)),k=0;k<G.length;k++){var U=P+x(G[k],D,"0",1)+O;V.has(U)?B.push({key:y,frame:U}):console.warn('Frame "%s" not found in texture "%s"',U,y)}else for(G=V.getFrameNames(),k=0;k<G.length;k++)B.push({key:y,frame:G[k]});return B},generateFrameNumbers:function(y,T){var P=p(T,"start",0),A=p(T,"end",-1),b=p(T,"first",!1),O=p(T,"outputArray",[]),D=p(T,"frames",!1);if(!this.textureManager.exists(y))return console.warn('Texture "%s" not found',y),O;var B=this.textureManager.get(y);if(!B)return O;b&&B.has(b)&&O.push({key:y,frame:b}),D||(A===-1&&(A=B.frameTotal-2),D=v(P,A));for(var G=0;G<D.length;G++){var V=D[G];B.has(V)?O.push({key:y,frame:V}):console.warn('Frame "%s" not found in texture "%s"',V,y)}return O},get:function(y){return this.anims.get(y)},getAnimsFromTexture:function(y){for(var T=this.textureManager.get(y),P=T.key,A=this.anims.getArray(),b=[],O=0;O<A.length;O++)for(var D=A[O],B=D.frames,G=0;G<B.length;G++)if(B[G].textureKey===P){b.push(D.key);break}return b},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(h.PAUSE_ALL)),this},play:function(y,T){Array.isArray(T)||(T=[T]);for(var P=0;P<T.length;P++)T[P].anims.play(y);return this},staggerPlay:function(y,T,P,A){P===void 0&&(P=0),A===void 0&&(A=!0),Array.isArray(T)||(T=[T]);var b=T.length;A||b--;for(var O=0;O<T.length;O++){var D=P<0?Math.abs(P)*(b-O):P*O;T[O].anims.playAfterDelay(y,D)}return this},remove:function(y){var T=this.get(y);return T&&(this.emit(h.REMOVE_ANIMATION,y,T),this.anims.delete(y),this.removeMix(y)),T},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(h.RESUME_ALL)),this},toJSON:function(y){var T={anims:[],globalTimeScale:this.globalTimeScale};return y!==void 0&&y!==""?T.anims.push(this.anims.get(y).toJSON()):this.anims.each(function(P,A){T.anims.push(A.toJSON())}),T},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});m.exports=g},9674:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(42099),S=i(30976),u=i(83419),l=i(90330),h=i(74943),r=i(95540),o=new u({initialize:function(a){this.parent=a,this.animationManager=a.scene.sys.anims,this.animationManager.on(h.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.randomFrame=!1,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(p){var a=this.parent;if(p===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,a;Array.isArray(p)||(p=[p]);for(var v=0;v<p.length;v++){var x=p[v];this.nextAnim?this.nextAnimsQueue.push(x):this.nextAnim=x}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(p){this.isPlaying&&this.stop();var a=this.animationManager,v=typeof p=="string"?p:r(p,"key",null),x=this.exists(v)?this.get(v):a.get(v);if(!x)console.warn("Missing animation: "+v);else{this.currentAnim=x;var g=x.getTotalFrames(),y=r(p,"frameRate",x.frameRate),T=r(p,"duration",x.duration);x.calculateDuration(this,g,T,y),this.delay=r(p,"delay",x.delay),this.repeat=r(p,"repeat",x.repeat),this.repeatDelay=r(p,"repeatDelay",x.repeatDelay),this.yoyo=r(p,"yoyo",x.yoyo),this.showBeforeDelay=r(p,"showBeforeDelay",x.showBeforeDelay),this.showOnStart=r(p,"showOnStart",x.showOnStart),this.hideOnComplete=r(p,"hideOnComplete",x.hideOnComplete),this.skipMissedFrames=r(p,"skipMissedFrames",x.skipMissedFrames),this.randomFrame=r(p,"randomFrame",x.randomFrame),this.timeScale=r(p,"timeScale",this.timeScale);var P=r(p,"startFrame",0);P>g&&(P=0),this.randomFrame&&(P=S(0,g-1));var A=x.frames[P];P===0&&!this.forward&&(A=x.getLastFrame()),this.currentFrame=A}return this.parent},pause:function(p){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),p!==void 0&&this.setCurrentFrame(p),this.parent},resume:function(p){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),p!==void 0&&this.setCurrentFrame(p),this.parent},playAfterDelay:function(p,a){if(!this.isPlaying)this.delayCounter=a,this.play(p,!0);else{var v=this.nextAnim,x=this.nextAnimsQueue;v&&x.unshift(v),this.nextAnim=p,this._pendingStop=1,this._pendingStopValue=a}return this.parent},playAfterRepeat:function(p,a){if(a===void 0&&(a=1),!this.isPlaying)this.play(p);else{var v=this.nextAnim,x=this.nextAnimsQueue;v&&x.unshift(v),this.repeatCounter!==-1&&a>this.repeatCounter&&(a=this.repeatCounter),this.nextAnim=p,this._pendingStop=2,this._pendingStopValue=a}return this.parent},play:function(p,a){a===void 0&&(a=!1);var v=this.currentAnim,x=this.parent,g=typeof p=="string"?p:p.key;if(a&&this.isPlaying&&v.key===g)return x;if(v&&this.isPlaying){var y=this.animationManager.getMix(v.key,p);if(y>0)return this.playAfterDelay(p,y)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(p)},playReverse:function(p,a){a===void 0&&(a=!1);var v=typeof p=="string"?p:p.key;return a&&this.isPlaying&&this.currentAnim.key===v?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(p))},startAnimation:function(p){this.load(p);var a=this.currentAnim,v=this.parent;return a&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,a.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),v},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(h.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(h.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(h.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(h.ANIMATION_COMPLETE,h.ANIMATION_COMPLETE_KEY)},emitEvents:function(p,a){var v=this.currentAnim;if(v){var x=this.currentFrame,g=this.parent,y=x.textureFrame;g.emit(p,v,x,g,y),a&&g.emit(a+v.key,v,x,g,y)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var p=this.currentFrame;if(!p)return 0;var a=p.progress;return this.inReverse&&(a*=-1),a},setProgress:function(p){return this.forward||(p=1-p),this.setCurrentFrame(this.currentAnim.getFrameByProgress(p)),this.parent},setRepeat:function(p){return this.repeatCounter=p===-1?Number.MAX_VALUE:p,this.parent},globalRemove:function(p,a){a===void 0&&(a=this.currentAnim),this.isPlaying&&a.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(p,a){p===void 0&&(p=!1),a===void 0&&(a=!1);var v=this.currentAnim,x=this.parent;return v?(a&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),v.getFirstTick(this),this.emitEvents(h.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!p,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(v.frames[0]),this.parent):x},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var p=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(p)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var p=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(p)}return this.parent},stopAfterDelay:function(p){return this._pendingStop=1,this._pendingStopValue=p,this.parent},stopAfterRepeat:function(p){return p===void 0&&(p=1),this.repeatCounter!==-1&&p>this.repeatCounter&&(p=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=p,this.parent},stopOnFrame:function(p){return this._pendingStop=3,this._pendingStopValue=p,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(p,a){var v=this.currentAnim;if(!(!this.isPlaying||!v||v.paused)){if(this.accumulator+=a*this.timeScale*this.animationManager.globalTimeScale,this._pendingStop===1&&(this._pendingStopValue-=a,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?v.nextFrame(this):v.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var x=0;do this.forward?v.nextFrame(this):v.previousFrame(this),x++;while(this.isPlaying&&this.accumulator>this.nextTick&&x<60)}}},setCurrentFrame:function(p){var a=this.parent;return this.currentFrame=p,a.texture=p.frame.texture,a.frame=p.frame,a.isCropped&&a.frame.updateCropUVs(a._crop,a.flipX,a.flipY),p.setAlpha&&(a.alpha=p.alpha),a.setSizeToFrame(),a._originComponent&&(p.frame.customPivot?a.setOrigin(p.frame.pivotX,p.frame.pivotY):a.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(h.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===p&&this.stop()),a},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(p){return this.anims?this.anims.get(p):null},exists:function(p){return this.anims?this.anims.has(p):!1},create:function(p){var a=p.key,v=!1;return a&&(v=this.get(a),v?console.warn("Animation key already exists: "+a):(v=new d(this,a,p),this.anims||(this.anims=new l),this.anims.set(a,v))),v},createFromAseprite:function(p,a){return this.animationManager.createFromAseprite(p,a,this.parent)},generateFrameNames:function(p,a){return this.animationManager.generateFrameNames(p,a)},generateFrameNumbers:function(p,a){return this.animationManager.generateFrameNumbers(p,a)},remove:function(p){var a=this.get(p);return a&&(this.currentAnim===a&&this.stop(),this.anims.delete(p)),a},destroy:function(){this.animationManager.off(h.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});m.exports=o},57090:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="add"},25312:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="animationcomplete"},89580:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="animationcomplete-"},52860:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="animationrepeat"},63850:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="animationrestart"},99085:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="animationstart"},28087:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="animationstop"},1794:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="animationupdate"},52562:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pauseall"},57953:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="remove"},68339:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="resumeall"},74943:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={ADD_ANIMATION:i(57090),ANIMATION_COMPLETE:i(25312),ANIMATION_COMPLETE_KEY:i(89580),ANIMATION_REPEAT:i(52860),ANIMATION_RESTART:i(63850),ANIMATION_START:i(99085),ANIMATION_STOP:i(28087),ANIMATION_UPDATE:i(1794),PAUSE_ALL:i(52562),REMOVE_ANIMATION:i(57953),RESUME_ALL:i(68339)}},60421:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Animation:i(42099),AnimationFrame:i(41138),AnimationManager:i(60848),AnimationState:i(9674),Events:i(74943)}},2161:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(90330),u=i(50792),l=i(24736),h=new d({initialize:function(){this.entries=new S,this.events=new u},add:function(r,o){return this.entries.set(r,o),this.events.emit(l.ADD,this,r,o),this},has:function(r){return this.entries.has(r)},exists:function(r){return this.entries.has(r)},get:function(r){return this.entries.get(r)},remove:function(r){var o=this.get(r);return o&&(this.entries.delete(r),this.events.emit(l.REMOVE,this,r,o.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});m.exports=h},24047:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2161),S=i(83419),u=i(8443),l=new S({initialize:function(r){this.game=r,this.binary=new d,this.bitmapFont=new d,this.json=new d,this.physics=new d,this.shader=new d,this.audio=new d,this.video=new d,this.text=new d,this.html=new d,this.obj=new d,this.tilemap=new d,this.xml=new d,this.custom={},this.game.events.once(u.DESTROY,this.destroy,this)},addCustom:function(h){return this.custom.hasOwnProperty(h)||(this.custom[h]=new d),this.custom[h]},destroy:function(){for(var h=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],r=0;r<h.length;r++)this[h[r]].destroy(),this[h[r]]=null;for(var o in this.custom)this.custom[o].destroy();this.custom=null,this.game=null}});m.exports=l},51464:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="add"},59261:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="remove"},24736:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={ADD:i(51464),REMOVE:i(59261)}},83388:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={BaseCache:i(2161),CacheManager:i(24047),Events:i(24736)}},71911:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(31401),u=i(39506),l=i(50792),h=i(19715),r=i(87841),o=i(61340),p=i(80333),a=i(26099),v=new d({Extends:l,Mixins:[S.AlphaSingle,S.Visible],initialize:function(g,y,T,P){g===void 0&&(g=0),y===void 0&&(y=0),T===void 0&&(T=0),P===void 0&&(P=0),l.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new r,this.dirty=!0,this._x=g,this._y=y,this._width=T,this._height=P,this._bounds=new r,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new o,this.transparent=!0,this.backgroundColor=p("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new a(T/2,P/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0,this.renderRoundPixels=!0},addToRenderList:function(x){this.renderList.push(x)},setOrigin:function(x,g){return x===void 0&&(x=.5),g===void 0&&(g=x),this.originX=x,this.originY=g,this},getScroll:function(x,g,y){y===void 0&&(y=new a);var T=this.width*.5,P=this.height*.5;return y.x=x-T,y.y=g-P,this.useBounds&&(y.x=this.clampX(y.x),y.y=this.clampY(y.y)),y},centerOnX:function(x){var g=this.width*.5;return this.midPoint.x=x,this.scrollX=x-g,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(x){var g=this.height*.5;return this.midPoint.y=x,this.scrollY=x-g,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(x,g){return this.centerOnX(x),this.centerOnY(g),this},centerToBounds:function(){if(this.useBounds){var x=this._bounds,g=this.width*.5,y=this.height*.5;this.midPoint.set(x.centerX,x.centerY),this.scrollX=x.centerX-g,this.scrollY=x.centerY-y}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(x){if(this.disableCull)return x;var g=this.matrix.matrix,y=g[0],T=g[1],P=g[2],A=g[3],b=y*A-T*P;if(!b)return x;var O=g[4],D=g[5],B=this.scrollX,G=this.scrollY,V=this.width,k=this.height,U=this.y,W=U+k,X=this.x,_=X+V,Q=this.culledObjects,j=x.length;b=1/b,Q.length=0;for(var it=0;it<j;++it){var K=x[it];if(!K.hasOwnProperty("width")||K.parentContainer){Q.push(K);continue}var J=K.width,Y=K.height,q=K.x-B*K.scrollFactorX-J*K.originX,$=K.y-G*K.scrollFactorY-Y*K.originY,et=q*y+$*P+O,rt=q*T+$*A+D,at=(q+J)*y+($+Y)*P+O,lt=(q+J)*T+($+Y)*A+D;at>X&&et<_&&lt>U&&rt<W&&Q.push(K)}return Q},getWorldPoint:function(x,g,y){y===void 0&&(y=new a);var T=this.matrix.matrix,P=T[0],A=T[1],b=T[2],O=T[3],D=T[4],B=T[5],G=P*O-A*b;if(!G)return y.x=x,y.y=g,y;G=1/G;var V=O*G,k=-A*G,U=-b*G,W=P*G,X=(b*B-O*D)*G,_=(A*D-P*B)*G,Q=Math.cos(this.rotation),j=Math.sin(this.rotation),it=this.zoomX,K=this.zoomY,J=this.scrollX,Y=this.scrollY,q=x+(J*Q-Y*j)*it,$=g+(J*j+Y*Q)*K;return y.x=q*V+$*U+X,y.y=q*k+$*W+_,y},ignore:function(x){var g=this.id;Array.isArray(x)||(x=[x]);for(var y=0;y<x.length;y++){var T=x[y];Array.isArray(T)?this.ignore(T):T.isParent?this.ignore(T.getChildren()):T.cameraFilter|=g}return this},clampX:function(x){var g=this._bounds,y=this.displayWidth,T=g.x+(y-this.width)/2,P=Math.max(T,T+g.width-y);return x<T?x=T:x>P&&(x=P),x},clampY:function(x){var g=this._bounds,y=this.displayHeight,T=g.y+(y-this.height)/2,P=Math.max(T,T+g.height-y);return x<T?x=T:x>P&&(x=P),x},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(x){return x===void 0&&(x=0),this.rotation=u(x),this},setBackgroundColor:function(x){return x===void 0&&(x="rgba(0,0,0,0)"),this.backgroundColor=p(x),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(x,g,y,T,P){return P===void 0&&(P=!1),this._bounds.setTo(x,g,y,T),this.dirty=!0,this.useBounds=!0,P?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(x){x===void 0&&(x=new r);var g=this._bounds;return x.setTo(g.x,g.y,g.width,g.height),x},setName:function(x){return x===void 0&&(x=""),this.name=x,this},setPosition:function(x,g){return g===void 0&&(g=x),this.x=x,this.y=g,this},setRotation:function(x){return x===void 0&&(x=0),this.rotation=x,this},setRoundPixels:function(x){return this.roundPixels=x,this},setScene:function(x,g){g===void 0&&(g=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=x,this.isSceneCamera=g;var y=x.sys;return this.sceneManager=y.game.scene,this.scaleManager=y.scale,this.cameraManager=y.cameras,this.updateSystem(),this},setScroll:function(x,g){return g===void 0&&(g=x),this.scrollX=x,this.scrollY=g,this},setSize:function(x,g){return g===void 0&&(g=x),this.width=x,this.height=g,this},setViewport:function(x,g,y,T){return this.x=x,this.y=g,this.width=y,this.height=T,this},setZoom:function(x,g){return x===void 0&&(x=1),g===void 0&&(g=x),x===0&&(x=.001),g===0&&(g=.001),this.zoomX=x,this.zoomY=g,this},setMask:function(x,g){return g===void 0&&(g=!0),this.mask=x,this._maskCamera=g?this.cameraManager.default:this,this},clearMask:function(x){return x===void 0&&(x=!1),x&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var x={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(x.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),x},update:function(){},setIsSceneCamera:function(x){return this.isSceneCamera=x,this},updateSystem:function(){if(!(!this.scaleManager||!this.isSceneCamera)){var x=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,g=this.sceneManager;x&&!this._customViewport?g.customViewports++:!x&&this._customViewport&&g.customViewports--,this.dirty=!0,this._customViewport=x}},destroy:function(){this.emit(h.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(x){this._x=x,this.updateSystem()}},y:{get:function(){return this._y},set:function(x){this._y=x,this.updateSystem()}},width:{get:function(){return this._width},set:function(x){this._width=x,this.updateSystem()}},height:{get:function(){return this._height},set:function(x){this._height=x,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(x){x!==this._scrollX&&(this._scrollX=x,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(x){x!==this._scrollY&&(this._scrollY=x,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(x){this._zoomX=x,this._zoomY=x,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(x){this._zoomX=x,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(x){this._zoomY=x,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(x){this._rotation=x,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});m.exports=v},38058:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(71911),S=i(67502),u=i(45319),l=i(83419),h=i(31401),r=i(20052),o=i(19715),p=i(28915),a=i(87841),v=i(26099),x=new l({Extends:d,Mixins:[h.PostPipeline],initialize:function(y,T,P,A){d.call(this,y,T,P,A),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new r.Fade(this),this.flashEffect=new r.Flash(this),this.shakeEffect=new r.Shake(this),this.panEffect=new r.Pan(this),this.rotateToEffect=new r.RotateTo(this),this.zoomEffect=new r.Zoom(this),this.lerp=new v(1,1),this.followOffset=new v,this.deadzone=null,this._follow=null},setDeadzone:function(g,y){if(g===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=g,this.deadzone.height=y):this.deadzone=new a(0,0,g,y),this._follow){var T=this.width/2,P=this.height/2,A=this._follow.x-this.followOffset.x,b=this._follow.y-this.followOffset.y;this.midPoint.set(A,b),this.scrollX=A-T,this.scrollY=b-P}S(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(g,y,T,P,A,b){return this.fadeEffect.start(!1,g,y,T,P,!0,A,b)},fadeOut:function(g,y,T,P,A,b){return this.fadeEffect.start(!0,g,y,T,P,!0,A,b)},fadeFrom:function(g,y,T,P,A,b,O){return this.fadeEffect.start(!1,g,y,T,P,A,b,O)},fade:function(g,y,T,P,A,b,O){return this.fadeEffect.start(!0,g,y,T,P,A,b,O)},flash:function(g,y,T,P,A,b,O){return this.flashEffect.start(g,y,T,P,A,b,O)},shake:function(g,y,T,P,A){return this.shakeEffect.start(g,y,T,P,A)},pan:function(g,y,T,P,A,b,O){return this.panEffect.start(g,y,T,P,A,b,O)},rotateTo:function(g,y,T,P,A,b,O){return this.rotateToEffect.start(g,y,T,P,A,b,O)},zoomTo:function(g,y,T,P,A,b){return this.zoomEffect.start(g,y,T,P,A,b)},preRender:function(){this.renderList.length=0;var g=this.width,y=this.height,T=g*.5,P=y*.5,A=this.zoomX,b=this.zoomY,O=this.matrix;this.renderRoundPixels=this.roundPixels&&Number.isInteger(A)&&Number.isInteger(b);var D=g*this.originX,B=y*this.originY,G=this._follow,V=this.deadzone,k=this.scrollX,U=this.scrollY;V&&S(V,this.midPoint.x,this.midPoint.y);var W=!1;if(G&&!this.panEffect.isRunning){var X=this.lerp,_=G.x-this.followOffset.x,Q=G.y-this.followOffset.y;V?(_<V.x?k=p(k,k-(V.x-_),X.x):_>V.right&&(k=p(k,k+(_-V.right),X.x)),Q<V.y?U=p(U,U-(V.y-Q),X.y):Q>V.bottom&&(U=p(U,U+(Q-V.bottom),X.y))):(k=p(k,_-D,X.x),U=p(U,Q-B,X.y)),W=!0}this.roundPixels&&(k=Math.floor(k),U=Math.floor(U)),this.useBounds&&(k=this.clampX(k),U=this.clampY(U)),this.scrollX=k,this.scrollY=U;var j=k+T,it=U+P;this.midPoint.set(j,it);var K=Math.floor(g/A+.5),J=Math.floor(y/b+.5),Y=Math.floor(j-K/2+.5),q=Math.floor(it-J/2+.5);this.worldView.setTo(Y,q,K,J),O.applyITRS(Math.floor(this.x+D+.5),Math.floor(this.y+B+.5),this.rotation,A,b),O.translate(-D,-B),this.shakeEffect.preRender(),W&&this.emit(o.FOLLOW_UPDATE,this,G)},setLerp:function(g,y){return g===void 0&&(g=1),y===void 0&&(y=g),this.lerp.set(g,y),this},setFollowOffset:function(g,y){return g===void 0&&(g=0),y===void 0&&(y=0),this.followOffset.set(g,y),this},startFollow:function(g,y,T,P,A,b){y===void 0&&(y=!1),T===void 0&&(T=1),P===void 0&&(P=T),A===void 0&&(A=0),b===void 0&&(b=A),this._follow=g,this.roundPixels=y,T=u(T,0,1),P=u(P,0,1),this.lerp.set(T,P),this.followOffset.set(A,b);var O=this.width/2,D=this.height/2,B=g.x-A,G=g.y-b;return this.midPoint.set(B,G),this.scrollX=B-O,this.scrollY=G-D,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(g,y){this.visible&&(this.rotateToEffect.update(g,y),this.panEffect.update(g,y),this.zoomEffect.update(g,y),this.shakeEffect.update(g,y),this.flashEffect.update(g,y),this.fadeEffect.update(g,y))},destroy:function(){this.resetFX(),d.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});m.exports=x},32743:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(38058),S=i(83419),u=i(95540),l=i(37277),h=i(37303),r=i(97480),o=i(44594),p=new S({initialize:function(v){this.scene=v,this.systems=v.sys,this.roundPixels=v.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,v.sys.events.once(o.BOOT,this.boot,this),v.sys.events.on(o.START,this.start,this)},boot:function(){var a=this.systems;a.settings.cameras?this.fromJSON(a.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new d(0,0,a.scale.width,a.scale.height).setScene(this.scene),a.game.scale.on(r.RESIZE,this.onResize,this),this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){if(!this.main){var a=this.systems;a.settings.cameras?this.fromJSON(a.settings.cameras):this.add(),this.main=this.cameras[0]}var v=this.systems.events;v.on(o.UPDATE,this.update,this),v.once(o.SHUTDOWN,this.shutdown,this)},add:function(a,v,x,g,y,T){a===void 0&&(a=0),v===void 0&&(v=0),x===void 0&&(x=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),y===void 0&&(y=!1),T===void 0&&(T="");var P=new d(a,v,x,g);return P.setName(T),P.setScene(this.scene),P.setRoundPixels(this.roundPixels),P.id=this.getNextID(),this.cameras.push(P),y&&(this.main=P),P},addExisting:function(a,v){v===void 0&&(v=!1);var x=this.cameras.indexOf(a);return x===-1?(a.id=this.getNextID(),a.setRoundPixels(this.roundPixels),this.cameras.push(a),v&&(this.main=a),a):null},getNextID:function(){for(var a=this.cameras,v=1,x=0;x<32;x++){for(var g=!1,y=0;y<a.length;y++){var T=a[y];if(T&&T.id===v){g=!0;continue}}if(g)v=v<<1;else return v}return 0},getTotal:function(a){a===void 0&&(a=!1);for(var v=0,x=this.cameras,g=0;g<x.length;g++){var y=x[g];(!a||a&&y.visible)&&v++}return v},fromJSON:function(a){Array.isArray(a)||(a=[a]);for(var v=this.scene.sys.scale.width,x=this.scene.sys.scale.height,g=0;g<a.length;g++){var y=a[g],T=u(y,"x",0),P=u(y,"y",0),A=u(y,"width",v),b=u(y,"height",x),O=this.add(T,P,A,b);O.name=u(y,"name",""),O.zoom=u(y,"zoom",1),O.rotation=u(y,"rotation",0),O.scrollX=u(y,"scrollX",0),O.scrollY=u(y,"scrollY",0),O.roundPixels=u(y,"roundPixels",!1),O.visible=u(y,"visible",!0);var D=u(y,"backgroundColor",!1);D&&O.setBackgroundColor(D);var B=u(y,"bounds",null);if(B){var G=u(B,"x",0),V=u(B,"y",0),k=u(B,"width",v),U=u(B,"height",x);O.setBounds(G,V,k,U)}}return this},getCamera:function(a){for(var v=this.cameras,x=0;x<v.length;x++)if(v[x].name===a)return v[x];return null},getCamerasBelowPointer:function(a){for(var v=this.cameras,x=a.x,g=a.y,y=[],T=0;T<v.length;T++){var P=v[T];P.visible&&P.inputEnabled&&h(P,x,g)&&y.unshift(P)}return y},remove:function(a,v){v===void 0&&(v=!0),Array.isArray(a)||(a=[a]);for(var x=0,g=this.cameras,y=0;y<a.length;y++){var T=g.indexOf(a[y]);T!==-1&&(v?g[T].destroy():g[T].renderList=[],g.splice(T,1),x++)}return!this.main&&g[0]&&(this.main=g[0]),x},render:function(a,v){for(var x=this.scene,g=this.cameras,y=0;y<g.length;y++){var T=g[y];if(T.visible&&T.alpha>0){T.preRender();var P=this.getVisibleChildren(v.getChildren(),T);a.render(x,P,T)}}},getVisibleChildren:function(a,v){return a.filter(function(x){return x.willRender(v)})},resetAll:function(){for(var a=0;a<this.cameras.length;a++)this.cameras[a].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(a,v){for(var x=0;x<this.cameras.length;x++)this.cameras[x].update(a,v)},onResize:function(a,v,x,g,y){for(var T=0;T<this.cameras.length;T++){var P=this.cameras[T];P._x===0&&P._y===0&&P._width===g&&P._height===y&&P.setSize(v.width,v.height)}},resize:function(a,v){for(var x=0;x<this.cameras.length;x++)this.cameras[x].setSize(a,v)},shutdown:function(){this.main=void 0;for(var a=0;a<this.cameras.length;a++)this.cameras[a].destroy();this.cameras=[];var v=this.systems.events;v.off(o.UPDATE,this.update,this),v.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(o.START,this.start,this),this.systems.events.off(o.DESTROY,this.destroy,this),this.systems.game.scale.off(r.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});l.register("CameraManager",p,"cameras"),m.exports=p},5020:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45319),S=i(83419),u=i(19715),l=new S({initialize:function(r){this.camera=r,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(h,r,o,p,a,v,x,g){if(h===void 0&&(h=!0),r===void 0&&(r=1e3),o===void 0&&(o=0),p===void 0&&(p=0),a===void 0&&(a=0),v===void 0&&(v=!1),x===void 0&&(x=null),g===void 0&&(g=this.camera.scene),!v&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=r,this.direction=h,this.progress=0,this.red=o,this.green=p,this.blue=a,this.alpha=h?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=x,this._onUpdateScope=g;var y=h?u.FADE_OUT_START:u.FADE_IN_START;return this.camera.emit(y,this.camera,this,r,o,p,a),this.camera},update:function(h,r){this.isRunning&&(this._elapsed+=r,this.progress=d(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(h){if(!this.isRunning&&!this.isComplete)return!1;var r=this.camera;return h.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",h.fillRect(r.x,r.y,r.width,r.height),!0},postRenderWebGL:function(h,r){if(!this.isRunning&&!this.isComplete)return!1;var o=this.camera,p=this.red/255,a=this.green/255,v=this.blue/255;return h.drawFillRect(o.x,o.y,o.width,o.height,r(v,a,p,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var h=this.direction?u.FADE_OUT_COMPLETE:u.FADE_IN_COMPLETE;this.camera.emit(h,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});m.exports=l},10662:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45319),S=i(83419),u=i(19715),l=new S({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(h,r,o,p,a,v,x){return h===void 0&&(h=250),r===void 0&&(r=255),o===void 0&&(o=255),p===void 0&&(p=255),a===void 0&&(a=!1),v===void 0&&(v=null),x===void 0&&(x=this.camera.scene),!a&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=h,this.progress=0,this.red=r,this.green=o,this.blue=p,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=v,this._onUpdateScope=x,this.camera.emit(u.FLASH_START,this.camera,this,h,r,o,p),this.camera)},update:function(h,r){this.isRunning&&(this._elapsed+=r,this.progress=d(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(h){if(!this.isRunning)return!1;var r=this.camera;return h.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",h.fillRect(r.x,r.y,r.width,r.height),!0},postRenderWebGL:function(h,r){if(!this.isRunning)return!1;var o=this.camera,p=this.red/255,a=this.green/255,v=this.blue/255;return h.drawFillRect(o.x,o.y,o.width,o.height,r(v,a,p,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});m.exports=l},20359:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45319),S=i(83419),u=i(62640),l=i(19715),h=i(26099),r=new S({initialize:function(p){this.camera=p,this.isRunning=!1,this.duration=0,this.source=new h,this.current=new h,this.destination=new h,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(o,p,a,v,x,g,y){a===void 0&&(a=1e3),v===void 0&&(v=u.Linear),x===void 0&&(x=!1),g===void 0&&(g=null),y===void 0&&(y=this.camera.scene);var T=this.camera;return!x&&this.isRunning||(this.isRunning=!0,this.duration=a,this.progress=0,this.source.set(T.scrollX,T.scrollY),this.destination.set(o,p),T.getScroll(o,p,this.current),typeof v=="string"&&u.hasOwnProperty(v)?this.ease=u[v]:typeof v=="function"&&(this.ease=v),this._elapsed=0,this._onUpdate=g,this._onUpdateScope=y,this.camera.emit(l.PAN_START,this.camera,this,a,o,p)),T},update:function(o,p){if(this.isRunning){this._elapsed+=p;var a=d(this._elapsed/this.duration,0,1);this.progress=a;var v=this.camera;if(this._elapsed<this.duration){var x=this.ease(a);v.getScroll(this.destination.x,this.destination.y,this.current);var g=this.source.x+(this.current.x-this.source.x)*x,y=this.source.y+(this.current.y-this.source.y)*x;v.setScroll(g,y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,v,a,g,y)}else v.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,v,a,v.scrollX,v.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(l.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});m.exports=r},34208:(m,E,i)=>{/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var d=i(45319),S=i(83419),u=i(19715),l=i(62640),h=new S({initialize:function(o){this.camera=o,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(r,o,p,a,v,x,g){p===void 0&&(p=1e3),a===void 0&&(a=l.Linear),v===void 0&&(v=!1),x===void 0&&(x=null),g===void 0&&(g=this.camera.scene),o===void 0&&(o=!1),this.shortestPath=o;var y=r;r<0?(y=-1*r,this.clockwise=!1):this.clockwise=!0;var T=360*Math.PI/180;y=y-Math.floor(y/T)*T;var P=this.camera;if(!v&&this.isRunning)return P;if(this.isRunning=!0,this.duration=p,this.progress=0,this.source=P.rotation,this.destination=y,typeof a=="string"&&l.hasOwnProperty(a)?this.ease=l[a]:typeof a=="function"&&(this.ease=a),this._elapsed=0,this._onUpdate=x,this._onUpdateScope=g,this.shortestPath){var A=0,b=0;this.destination>this.source?A=Math.abs(this.destination-this.source):A=Math.abs(this.destination+T)-this.source,this.source>this.destination?b=Math.abs(this.source-this.destination):b=Math.abs(this.source+T)-this.destination,A<b?this.clockwise=!0:A>b&&(this.clockwise=!1)}return this.camera.emit(u.ROTATE_START,this.camera,this,p,y),P},update:function(r,o){if(this.isRunning){this._elapsed+=o;var p=d(this._elapsed/this.duration,0,1);this.progress=p;var a=this.camera;if(this._elapsed<this.duration){var v=this.ease(p);this.current=a.rotation;var x=0,g=360*Math.PI/180,y=this.destination,T=this.current;this.clockwise===!1&&(y=this.current,T=this.destination),y>=T?x=Math.abs(y-T):x=Math.abs(y+g)-T;var P=0;this.clockwise?P=a.rotation+x*v:P=a.rotation-x*v,a.rotation=P,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,a,p,P)}else a.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,a,p,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});m.exports=h},30330:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45319),S=i(83419),u=i(19715),l=i(26099),h=new S({initialize:function(o){this.camera=o,this.isRunning=!1,this.duration=0,this.intensity=new l,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(r,o,p,a,v){return r===void 0&&(r=100),o===void 0&&(o=.05),p===void 0&&(p=!1),a===void 0&&(a=null),v===void 0&&(v=this.camera.scene),!p&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=r,this.progress=0,typeof o=="number"?this.intensity.set(o):this.intensity.set(o.x,o.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=a,this._onUpdateScope=v,this.camera.emit(u.SHAKE_START,this.camera,this,r,o),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(r,o){if(this.isRunning)if(this._elapsed+=o,this.progress=d(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var p=this.intensity,a=this.camera.width,v=this.camera.height,x=this.camera.zoom;this._offsetX=(Math.random()*p.x*a*2-p.x*a)*x,this._offsetY=(Math.random()*p.y*v*2-p.y*v)*x,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});m.exports=h},45641:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45319),S=i(83419),u=i(62640),l=i(19715),h=new S({initialize:function(o){this.camera=o,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(r,o,p,a,v,x){o===void 0&&(o=1e3),p===void 0&&(p=u.Linear),a===void 0&&(a=!1),v===void 0&&(v=null),x===void 0&&(x=this.camera.scene);var g=this.camera;return!a&&this.isRunning||(this.isRunning=!0,this.duration=o,this.progress=0,this.source=g.zoom,this.destination=r,typeof p=="string"&&u.hasOwnProperty(p)?this.ease=u[p]:typeof p=="function"&&(this.ease=p),this._elapsed=0,this._onUpdate=v,this._onUpdateScope=x,this.camera.emit(l.ZOOM_START,this.camera,this,o,r)),g},update:function(r,o){this.isRunning&&(this._elapsed+=o,this.progress=d(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(l.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});m.exports=h},20052:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Fade:i(5020),Flash:i(10662),Pan:i(20359),Shake:i(30330),RotateTo:i(34208),Zoom:i(45641)}},16438:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="cameradestroy"},32726:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="camerafadeincomplete"},87807:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="camerafadeinstart"},45917:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="camerafadeoutcomplete"},95666:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="camerafadeoutstart"},47056:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="cameraflashcomplete"},91261:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="cameraflashstart"},45047:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="followupdate"},81927:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="camerapancomplete"},74264:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="camerapanstart"},54419:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="postrender"},79330:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="prerender"},93183:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="camerarotatecomplete"},80112:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="camerarotatestart"},62252:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="camerashakecomplete"},86017:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="camerashakestart"},539:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="camerazoomcomplete"},51892:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="camerazoomstart"},19715:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={DESTROY:i(16438),FADE_IN_COMPLETE:i(32726),FADE_IN_START:i(87807),FADE_OUT_COMPLETE:i(45917),FADE_OUT_START:i(95666),FLASH_COMPLETE:i(47056),FLASH_START:i(91261),FOLLOW_UPDATE:i(45047),PAN_COMPLETE:i(81927),PAN_START:i(74264),POST_RENDER:i(54419),PRE_RENDER:i(79330),ROTATE_COMPLETE:i(93183),ROTATE_START:i(80112),SHAKE_COMPLETE:i(62252),SHAKE_START:i(86017),ZOOM_COMPLETE:i(539),ZOOM_START:i(51892)}},87969:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Camera:i(38058),BaseCamera:i(71911),CameraManager:i(32743),Effects:i(20052),Events:i(19715)}},63091:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(35154),u=new d({initialize:function(h){this.camera=S(h,"camera",null),this.left=S(h,"left",null),this.right=S(h,"right",null),this.up=S(h,"up",null),this.down=S(h,"down",null),this.zoomIn=S(h,"zoomIn",null),this.zoomOut=S(h,"zoomOut",null),this.zoomSpeed=S(h,"zoomSpeed",.01),this.minZoom=S(h,"minZoom",.001),this.maxZoom=S(h,"maxZoom",1e3),this.speedX=0,this.speedY=0;var r=S(h,"speed",null);typeof r=="number"?(this.speedX=r,this.speedY=r):(this.speedX=S(h,"speed.x",0),this.speedY=S(h,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(l){return this.camera=l,this},update:function(l){if(this.active){l===void 0&&(l=1);var h=this.camera;this.up&&this.up.isDown?h.scrollY-=this.speedY*l|0:this.down&&this.down.isDown&&(h.scrollY+=this.speedY*l|0),this.left&&this.left.isDown?h.scrollX-=this.speedX*l|0:this.right&&this.right.isDown&&(h.scrollX+=this.speedX*l|0),this.zoomIn&&this.zoomIn.isDown?(h.zoom-=this.zoomSpeed,h.zoom<this.minZoom&&(h.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(h.zoom+=this.zoomSpeed,h.zoom>this.maxZoom&&(h.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});m.exports=u},58818:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(35154),u=new d({initialize:function(h){this.camera=S(h,"camera",null),this.left=S(h,"left",null),this.right=S(h,"right",null),this.up=S(h,"up",null),this.down=S(h,"down",null),this.zoomIn=S(h,"zoomIn",null),this.zoomOut=S(h,"zoomOut",null),this.zoomSpeed=S(h,"zoomSpeed",.01),this.minZoom=S(h,"minZoom",.001),this.maxZoom=S(h,"maxZoom",1e3),this.accelX=0,this.accelY=0;var r=S(h,"acceleration",null);typeof r=="number"?(this.accelX=r,this.accelY=r):(this.accelX=S(h,"acceleration.x",0),this.accelY=S(h,"acceleration.y",0)),this.dragX=0,this.dragY=0;var o=S(h,"drag",null);typeof o=="number"?(this.dragX=o,this.dragY=o):(this.dragX=S(h,"drag.x",0),this.dragY=S(h,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var p=S(h,"maxSpeed",null);typeof p=="number"?(this.maxSpeedX=p,this.maxSpeedY=p):(this.maxSpeedX=S(h,"maxSpeed.x",0),this.maxSpeedY=S(h,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(l){return this.camera=l,this},update:function(l){if(this.active){l===void 0&&(l=1);var h=this.camera;this._speedX>0?(this._speedX-=this.dragX*l,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*l,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*l,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*l,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(h.scrollX-=this._speedX*l|0),this._speedY!==0&&(h.scrollY-=this._speedY*l|0),this._zoom!==0&&(h.zoom+=this._zoom,h.zoom<this.minZoom?h.zoom=this.minZoom:h.zoom>this.maxZoom&&(h.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});m.exports=u},38865:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={FixedKeyControl:i(63091),SmoothedKeyControl:i(58818)}},26638:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Controls:i(38865),Scene2D:i(87969)}},8054:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={VERSION:"3.90.0",LOG_VERSION:"v390",BlendModes:i(10312),ScaleModes:i(29795),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};m.exports=d},69547:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(8054),u=i(42363),l=i(82264),h=i(95540),r=i(35154),o=i(41212),p=i(29747),a=i(75508),v=i(36060),x=i(80333),g=new d({initialize:function(T){T===void 0&&(T={});var P=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],A="#ffffff",b=r(T,"scale",null);this.width=r(b,"width",1024,T),this.height=r(b,"height",768,T),this.zoom=r(b,"zoom",1,T),this.parent=r(b,"parent",void 0,T),this.scaleMode=r(b,b?"mode":"scaleMode",0,T),this.expandParent=r(b,"expandParent",!0,T),this.autoRound=r(b,"autoRound",!1,T),this.autoCenter=r(b,"autoCenter",0,T),this.resizeInterval=r(b,"resizeInterval",500,T),this.fullscreenTarget=r(b,"fullscreenTarget",null,T),this.minWidth=r(b,"min.width",0,T),this.maxWidth=r(b,"max.width",0,T),this.minHeight=r(b,"min.height",0,T),this.maxHeight=r(b,"max.height",0,T),this.snapWidth=r(b,"snap.width",0,T),this.snapHeight=r(b,"snap.height",0,T),this.renderType=r(T,"type",S.AUTO),this.canvas=r(T,"canvas",null),this.context=r(T,"context",null),this.canvasStyle=r(T,"canvasStyle",null),this.customEnvironment=r(T,"customEnvironment",!1),this.sceneConfig=r(T,"scene",null),this.seed=r(T,"seed",[(Date.now()*Math.random()).toString()]),a.RND=new a.RandomDataGenerator(this.seed),this.gameTitle=r(T,"title",""),this.gameURL=r(T,"url","https://phaser.io/"+S.LOG_VERSION),this.gameVersion=r(T,"version",""),this.autoFocus=r(T,"autoFocus",!0),this.stableSort=r(T,"stableSort",-1),this.stableSort===-1&&(this.stableSort=l.browser.es2019?1:0),l.features.stableSort=this.stableSort,this.domCreateContainer=r(T,"dom.createContainer",!1),this.domPointerEvents=r(T,"dom.pointerEvents","none"),this.inputKeyboard=r(T,"input.keyboard",!0),this.inputKeyboardEventTarget=r(T,"input.keyboard.target",window),this.inputKeyboardCapture=r(T,"input.keyboard.capture",[]),this.inputMouse=r(T,"input.mouse",!0),this.inputMouseEventTarget=r(T,"input.mouse.target",null),this.inputMousePreventDefaultDown=r(T,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=r(T,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=r(T,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=r(T,"input.mouse.preventDefaultWheel",!0),this.inputTouch=r(T,"input.touch",l.input.touch),this.inputTouchEventTarget=r(T,"input.touch.target",null),this.inputTouchCapture=r(T,"input.touch.capture",!0),this.inputActivePointers=r(T,"input.activePointers",1),this.inputSmoothFactor=r(T,"input.smoothFactor",0),this.inputWindowEvents=r(T,"input.windowEvents",!0),this.inputGamepad=r(T,"input.gamepad",!1),this.inputGamepadEventTarget=r(T,"input.gamepad.target",window),this.disableContextMenu=r(T,"disableContextMenu",!1),this.audio=r(T,"audio",{}),this.hideBanner=r(T,"banner",null)===!1,this.hidePhaser=r(T,"banner.hidePhaser",!1),this.bannerTextColor=r(T,"banner.text",A),this.bannerBackgroundColor=r(T,"banner.background",P),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=r(T,"fps",null),this.disablePreFX=r(T,"disablePreFX",!1),this.disablePostFX=r(T,"disablePostFX",!1);var O=r(T,"render",null);this.pipeline=r(O,"pipeline",null,T),this.autoMobilePipeline=r(O,"autoMobilePipeline",!0,T),this.defaultPipeline=r(O,"defaultPipeline",v.MULTI_PIPELINE,T),this.antialias=r(O,"antialias",!0,T),this.antialiasGL=r(O,"antialiasGL",!0,T),this.mipmapFilter=r(O,"mipmapFilter","",T),this.desynchronized=r(O,"desynchronized",!1,T),this.roundPixels=r(O,"roundPixels",!1,T),this.pixelArt=r(O,"pixelArt",this.zoom!==1,T),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=r(O,"transparent",!1,T),this.clearBeforeRender=r(O,"clearBeforeRender",!0,T),this.preserveDrawingBuffer=r(O,"preserveDrawingBuffer",!1,T),this.premultipliedAlpha=r(O,"premultipliedAlpha",!0,T),this.failIfMajorPerformanceCaveat=r(O,"failIfMajorPerformanceCaveat",!1,T),this.powerPreference=r(O,"powerPreference","default",T),this.batchSize=r(O,"batchSize",4096,T),this.maxTextures=r(O,"maxTextures",-1,T),this.maxLights=r(O,"maxLights",10,T);var D=r(T,"backgroundColor",0);this.backgroundColor=x(D),this.transparent&&(this.backgroundColor=x(0),this.backgroundColor.alpha=0),this.preBoot=r(T,"callbacks.preBoot",p),this.postBoot=r(T,"callbacks.postBoot",p),this.physics=r(T,"physics",{}),this.defaultPhysicsSystem=r(this.physics,"default",!1),this.loaderBaseURL=r(T,"loader.baseURL",""),this.loaderPath=r(T,"loader.path",""),this.loaderMaxParallelDownloads=r(T,"loader.maxParallelDownloads",l.os.android?6:32),this.loaderCrossOrigin=r(T,"loader.crossOrigin",void 0),this.loaderResponseType=r(T,"loader.responseType",""),this.loaderAsync=r(T,"loader.async",!0),this.loaderUser=r(T,"loader.user",""),this.loaderPassword=r(T,"loader.password",""),this.loaderTimeout=r(T,"loader.timeout",0),this.loaderMaxRetries=r(T,"loader.maxRetries",2),this.loaderWithCredentials=r(T,"loader.withCredentials",!1),this.loaderImageLoadType=r(T,"loader.imageLoadType","XHR"),this.loaderLocalScheme=r(T,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=r(T,"fx.glow.quality",.1),this.glowFXDistance=r(T,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var B=r(T,"plugins",null),G=u.DefaultScene;B&&(Array.isArray(B)?this.defaultPlugins=B:o(B)&&(this.installGlobalPlugins=h(B,"global",[]),this.installScenePlugins=h(B,"scene",[]),Array.isArray(B.default)?G=B.default:Array.isArray(B.defaultMerge)&&(G=G.concat(B.defaultMerge)))),this.defaultPlugins=G;var V="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=r(T,"images.default",V+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=r(T,"images.missing",V+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=r(T,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=S.WEBGL:window.FORCE_CANVAS&&(this.renderType=S.CANVAS))}});m.exports=g},86054:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(20623),S=i(27919),u=i(8054),l=i(89357),h=function(r){var o=r.config;if((o.customEnvironment||o.canvas)&&o.renderType===u.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!o.customEnvironment&&!o.canvas&&o.renderType!==u.HEADLESS)if(o.renderType===u.AUTO&&(o.renderType=l.webGL?u.WEBGL:u.CANVAS),o.renderType===u.WEBGL){if(!l.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(o.renderType===u.CANVAS){if(!l.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+o.renderType);o.antialias||S.disableSmoothing();var p=r.scale.baseSize,a=p.width,v=p.height;if(o.canvas?(r.canvas=o.canvas,r.canvas.width=a,r.canvas.height=v):r.canvas=S.create(r,a,v,o.renderType),o.canvasStyle&&(r.canvas.style=o.canvasStyle),o.antialias||d.setCrisp(r.canvas),o.renderType!==u.HEADLESS){var x,g;x=i(68627),g=i(74797),o.renderType===u.WEBGL?r.renderer=new g(r):(r.renderer=new x(r),r.context=r.renderer.gameContext)}};m.exports=h},96391:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(8054),S=function(u){var l=u.config;if(!l.hideBanner){var h="WebGL";l.renderType===d.CANVAS?h="Canvas":l.renderType===d.HEADLESS&&(h="Headless");var r=l.audio,o=u.device.audio,p;if(o.webAudio&&!r.disableWebAudio?p="Web Audio":r.noAudio||!o.webAudio&&!o.audioData?p="No Audio":p="HTML5 Audio",u.device.browser.ie)window.console&&console.log("Phaser v"+d.VERSION+" / https://phaser.io");else{var a="",v=[a];if(Array.isArray(l.bannerBackgroundColor)){var x;l.bannerBackgroundColor.forEach(function(y){a=a.concat("%c "),v.push("background: "+y),x=y}),v[v.length-1]="color: "+l.bannerTextColor+"; background: "+x}else a=a.concat("%c "),v.push("color: "+l.bannerTextColor+"; background: "+l.bannerBackgroundColor);v.push("background: transparent"),l.gameTitle&&(a=a.concat(l.gameTitle),l.gameVersion&&(a=a.concat(" v"+l.gameVersion)),l.hidePhaser||(a=a.concat(" / ")));var g="";l.hidePhaser||(a=a.concat("Phaser v"+d.VERSION+g+" ("+h+" | "+p+")")),a=a.concat(" %c "+l.gameURL),v[0]=a,console.log.apply(console,v)}}};m.exports=S},50127:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(40366),S=i(60848),u=i(24047),l=i(27919),h=i(83419),r=i(69547),o=i(83719),p=i(86054),a=i(45893),v=i(96391),x=i(82264),g=i(57264),y=i(50792),T=i(8443),P=i(7003),A=i(37277),b=i(77332),O=i(76531),D=i(60903),B=i(69442),G=i(17130),V=i(65898),k=i(51085),U=i(14747),W=new h({initialize:function(_){this.config=new r(_),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new y,this.anims=new S(this),this.textures=new G(this),this.cache=new u(this),this.registry=new a(this,new y),this.input=new P(this,this.config),this.scene=new D(this,this.config.sceneConfig),this.device=x,this.scale=new O(this,this.config),this.sound=null,this.sound=U.create(this),this.loop=new V(this,this.config.fps),this.plugins=new b(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,g(this.boot.bind(this))},boot:function(){if(!A.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),p(this),o(this),v(this),d(this.canvas,this.config.parent),this.textures.once(B.READY,this.texturesReady,this),this.events.emit(T.BOOT)},texturesReady:function(){this.events.emit(T.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),k(this);var X=this.events;X.on(T.HIDDEN,this.onHidden,this),X.on(T.VISIBLE,this.onVisible,this),X.on(T.BLUR,this.onBlur,this),X.on(T.FOCUS,this.onFocus,this)},step:function(X,_){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var Q=this.events;Q.emit(T.PRE_STEP,X,_),Q.emit(T.STEP,X,_),this.scene.update(X,_),Q.emit(T.POST_STEP,X,_);var j=this.renderer;j.preRender(),Q.emit(T.PRE_RENDER,j,X,_),this.scene.render(j),j.postRender(),Q.emit(T.POST_RENDER,j,X,_)}},headlessStep:function(X,_){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var Q=this.events;Q.emit(T.PRE_STEP,X,_),Q.emit(T.STEP,X,_),this.scene.update(X,_),Q.emit(T.POST_STEP,X,_),this.scene.isProcessing=!1,Q.emit(T.PRE_RENDER,null,X,_),Q.emit(T.POST_RENDER,null,X,_)}},onHidden:function(){this.loop.pause(),this.events.emit(T.PAUSE)},pause:function(){var X=this.isPaused;this.isPaused=!0,X||this.events.emit(T.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(T.RESUME,this.loop.pauseDuration)},resume:function(){var X=this.isPaused;this.isPaused=!1,X&&this.events.emit(T.RESUME,0)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(X,_){_===void 0&&(_=!1),this.pendingDestroy=!0,this.removeCanvas=X,this.noReturn=_},runDestroy:function(){this.scene.destroy(),this.events.emit(T.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(l.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});m.exports=W},65898:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(35154),u=i(29747),l=i(43092),h=new d({initialize:function(o,p){this.game=o,this.raf=new l,this.started=!1,this.running=!1,this.minFps=S(p,"min",5),this.targetFps=S(p,"target",60),this.fpsLimit=S(p,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=u,this.forceSetTimeOut=S(p,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this.pauseDuration=0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=S(p,"deltaHistory",10),this.panicMax=S(p,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=S(p,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.pauseDuration=this.time-this._pauseTime,this.startTime+=this.pauseDuration},resetDelta:function(){var r=window.performance.now();this.time=r,this.lastTime=r,this.nextFpsUpdate=r+1e3,this.framesThisSecond=0;for(var o=0;o<this.deltaSmoothingMax;o++)this.deltaHistory[o]=Math.min(this._target,this.deltaHistory[o]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(r){if(this.started)return this;this.started=!0,this.running=!0;for(var o=0;o<this.deltaSmoothingMax;o++)this.deltaHistory[o]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=r;var p=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(p,this.forceSetTimeOut,this._target)},smoothDelta:function(r){var o=this.deltaIndex,p=this.deltaHistory,a=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,r=Math.min(r,this._target)),r>this._min&&(r=p[o],r=Math.min(r,this._min)),p[o]=r,this.deltaIndex++,this.deltaIndex>=a&&(this.deltaIndex=0);for(var v=0,x=0;x<a;x++)v+=p[x];return v/=a,v},updateFPS:function(r){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=r+1e3,this.framesThisSecond=0},stepLimitFPS:function(r){this.now=r;var o=Math.max(0,r-this.lastTime);this.rawDelta=o,this.time+=this.rawDelta,this.smoothStep&&(o=this.smoothDelta(o)),this.delta+=o,r>=this.nextFpsUpdate&&this.updateFPS(r),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(r,this.delta),this.delta=0),this.lastTime=r,this.frame++},step:function(r){this.now=r;var o=Math.max(0,r-this.lastTime);this.rawDelta=o,this.time+=this.rawDelta,this.smoothStep&&(o=this.smoothDelta(o)),this.delta=o,r>=this.nextFpsUpdate&&this.updateFPS(r),this.framesThisSecond++,this.callback(r,o),this.lastTime=r,this.frame++},tick:function(){var r=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(r):this.step(r)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(r){r===void 0&&(r=!1);var o=window.performance.now();if(!this.running){r&&(this.startTime+=-this.lastTime+(this.lastTime+o));var p=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(p,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=o+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});m.exports=h},51085:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(8443),S=function(u){var l,h=u.events;if(document.hidden!==void 0)l="visibilitychange";else{var r=["webkit","moz","ms"];r.forEach(function(p){document[p+"Hidden"]!==void 0&&(document.hidden=function(){return document[p+"Hidden"]},l=p+"visibilitychange")})}var o=function(p){document.hidden||p.type==="pause"?h.emit(d.HIDDEN):h.emit(d.VISIBLE)};l&&document.addEventListener(l,o,!1),window.onblur=function(){h.emit(d.BLUR)},window.onfocus=function(){h.emit(d.FOCUS)},window.focus&&u.config.autoFocus&&window.focus()};m.exports=S},97217:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="blur"},47548:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="boot"},19814:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="contextlost"},68446:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="destroy"},41700:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="focus"},25432:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="hidden"},65942:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pause"},59211:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="postrender"},47789:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="poststep"},39066:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="prerender"},460:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="prestep"},16175:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="ready"},42331:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="resume"},11966:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="step"},32969:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="systemready"},94830:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="visible"},8443:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={BLUR:i(97217),BOOT:i(47548),CONTEXT_LOST:i(19814),DESTROY:i(68446),FOCUS:i(41700),HIDDEN:i(25432),PAUSE:i(65942),POST_RENDER:i(59211),POST_STEP:i(47789),PRE_RENDER:i(39066),PRE_STEP:i(460),READY:i(16175),RESUME:i(42331),STEP:i(11966),SYSTEM_READY:i(32969),VISIBLE:i(94830)}},42857:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Config:i(69547),CreateRenderer:i(86054),DebugHeader:i(96391),Events:i(8443),TimeStep:i(65898),VisibilityHandler:i(51085)}},99584:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(5290),S=i(27919),u=i(35154),l=function(h){var r=u(h,"data",[]),o=u(h,"canvas",null),p=u(h,"palette",d),a=u(h,"pixelWidth",1),v=u(h,"pixelHeight",a),x=u(h,"resizeCanvas",!0),g=u(h,"clearCanvas",!0),y=u(h,"preRender",null),T=u(h,"postRender",null),P=Math.floor(Math.abs(r[0].length*a)),A=Math.floor(Math.abs(r.length*v));o||(o=S.create2D(this,P,A),x=!1,g=!1),x&&(o.width=P,o.height=A);var b=o.getContext("2d",{willReadFrequently:!0});g&&b.clearRect(0,0,P,A),y&&y(o,b);for(var O=0;O<r.length;O++)for(var D=r[O],B=0;B<D.length;B++){var G=D[B];G!=="."&&G!==" "&&(b.fillStyle=p[G],b.fillRect(B*a,O*v,a,v))}return T&&T(o,b),o};m.exports=l},15822:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={GenerateTexture:i(99584),Palettes:i(57763)}},5290:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},23816:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},9866:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},77552:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},92259:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},57763:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={ARNE16:i(5290),C64:i(23816),CGA:i(9866),JMP:i(77552),MSX:i(92259)}},46728:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(36316),u=i(80021),l=i(26099),h=new d({Extends:u,initialize:function(o,p,a,v){u.call(this,"CubicBezierCurve"),Array.isArray(o)&&(v=new l(o[6],o[7]),a=new l(o[4],o[5]),p=new l(o[2],o[3]),o=new l(o[0],o[1])),this.p0=o,this.p1=p,this.p2=a,this.p3=v},getStartPoint:function(r){return r===void 0&&(r=new l),r.copy(this.p0)},getResolution:function(r){return r},getPoint:function(r,o){o===void 0&&(o=new l);var p=this.p0,a=this.p1,v=this.p2,x=this.p3;return o.set(S(r,p.x,a.x,v.x,x.x),S(r,p.y,a.y,v.y,x.y))},draw:function(r,o){o===void 0&&(o=32);var p=this.getPoints(o);r.beginPath(),r.moveTo(this.p0.x,this.p0.y);for(var a=1;a<p.length;a++)r.lineTo(p[a].x,p[a].y);return r.strokePath(),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});h.fromJSON=function(r){var o=r.points,p=new l(o[0],o[1]),a=new l(o[2],o[3]),v=new l(o[4],o[5]),x=new l(o[6],o[7]);return new h(p,a,v,x)},m.exports=h},80021:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(19217),u=i(87841),l=i(26099),h=new d({initialize:function(o){this.type=o,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new l,this._tmpVec2B=new l},draw:function(r,o){return o===void 0&&(o=32),r.strokePoints(this.getPoints(o))},getBounds:function(r,o){r||(r=new u),o===void 0&&(o=16);var p=this.getLength();o>p&&(o=p/2);var a=Math.max(1,Math.round(p/o));return S(this.getSpacedPoints(a),r)},getDistancePoints:function(r){var o=this.getLength(),p=Math.max(1,o/r);return this.getSpacedPoints(p)},getEndPoint:function(r){return r===void 0&&(r=new l),this.getPointAt(1,r)},getLength:function(){var r=this.getLengths();return r[r.length-1]},getLengths:function(r){if(r===void 0&&(r=this.arcLengthDivisions),this.cacheArcLengths.length===r+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var o=[],p,a=this.getPoint(0,this._tmpVec2A),v=0;o.push(0);for(var x=1;x<=r;x++)p=this.getPoint(x/r,this._tmpVec2B),v+=p.distance(a),o.push(v),a.copy(p);return this.cacheArcLengths=o,o},getPointAt:function(r,o){var p=this.getUtoTmapping(r);return this.getPoint(p,o)},getPoints:function(r,o,p){p===void 0&&(p=[]),r||(o?r=this.getLength()/o:r=this.defaultDivisions);for(var a=0;a<=r;a++)p.push(this.getPoint(a/r));return p},getRandomPoint:function(r){return r===void 0&&(r=new l),this.getPoint(Math.random(),r)},getSpacedPoints:function(r,o,p){p===void 0&&(p=[]),r||(o?r=this.getLength()/o:r=this.defaultDivisions);for(var a=0;a<=r;a++){var v=this.getUtoTmapping(a/r,null,r);p.push(this.getPoint(v))}return p},getStartPoint:function(r){return r===void 0&&(r=new l),this.getPointAt(0,r)},getTangent:function(r,o){o===void 0&&(o=new l);var p=1e-4,a=r-p,v=r+p;return a<0&&(a=0),v>1&&(v=1),this.getPoint(a,this._tmpVec2A),this.getPoint(v,o),o.subtract(this._tmpVec2A).normalize()},getTangentAt:function(r,o){var p=this.getUtoTmapping(r);return this.getTangent(p,o)},getTFromDistance:function(r,o){return r<=0?0:this.getUtoTmapping(0,r,o)},getUtoTmapping:function(r,o,p){var a=this.getLengths(p),v=0,x=a.length,g;o?g=Math.min(o,a[x-1]):g=r*a[x-1];for(var y=0,T=x-1,P;y<=T;)if(v=Math.floor(y+(T-y)/2),P=a[v]-g,P<0)y=v+1;else if(P>0)T=v-1;else{T=v;break}if(v=T,a[v]===g)return v/(x-1);var A=a[v],b=a[v+1],O=b-A,D=(g-A)/O;return(v+D)/(x-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});m.exports=h},73825:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(80021),u=i(39506),l=i(35154),h=i(43396),r=i(26099),o=new d({Extends:S,initialize:function(a,v,x,g,y,T,P,A){if(typeof a=="object"){var b=a;a=l(b,"x",0),v=l(b,"y",0),x=l(b,"xRadius",0),g=l(b,"yRadius",x),y=l(b,"startAngle",0),T=l(b,"endAngle",360),P=l(b,"clockwise",!1),A=l(b,"rotation",0)}else g===void 0&&(g=x),y===void 0&&(y=0),T===void 0&&(T=360),P===void 0&&(P=!1),A===void 0&&(A=0);S.call(this,"EllipseCurve"),this.p0=new r(a,v),this._xRadius=x,this._yRadius=g,this._startAngle=u(y),this._endAngle=u(T),this._clockwise=P,this._rotation=u(A)},getStartPoint:function(p){return p===void 0&&(p=new r),this.getPoint(0,p)},getResolution:function(p){return p*2},getPoint:function(p,a){a===void 0&&(a=new r);for(var v=Math.PI*2,x=this._endAngle-this._startAngle,g=Math.abs(x)<Number.EPSILON;x<0;)x+=v;for(;x>v;)x-=v;x<Number.EPSILON&&(g?x=0:x=v),this._clockwise&&!g&&(x===v?x=-v:x=x-v);var y=this._startAngle+p*x,T=this.p0.x+this._xRadius*Math.cos(y),P=this.p0.y+this._yRadius*Math.sin(y);if(this._rotation!==0){var A=Math.cos(this._rotation),b=Math.sin(this._rotation),O=T-this.p0.x,D=P-this.p0.y;T=O*A-D*b+this.p0.x,P=O*b+D*A+this.p0.y}return a.set(T,P)},setXRadius:function(p){return this.xRadius=p,this},setYRadius:function(p){return this.yRadius=p,this},setWidth:function(p){return this.xRadius=p/2,this},setHeight:function(p){return this.yRadius=p/2,this},setStartAngle:function(p){return this.startAngle=p,this},setEndAngle:function(p){return this.endAngle=p,this},setClockwise:function(p){return this.clockwise=p,this},setRotation:function(p){return this.rotation=p,this},x:{get:function(){return this.p0.x},set:function(p){this.p0.x=p}},y:{get:function(){return this.p0.y},set:function(p){this.p0.y=p}},xRadius:{get:function(){return this._xRadius},set:function(p){this._xRadius=p}},yRadius:{get:function(){return this._yRadius},set:function(p){this._yRadius=p}},startAngle:{get:function(){return h(this._startAngle)},set:function(p){this._startAngle=u(p)}},endAngle:{get:function(){return h(this._endAngle)},set:function(p){this._endAngle=u(p)}},clockwise:{get:function(){return this._clockwise},set:function(p){this._clockwise=p}},angle:{get:function(){return h(this._rotation)},set:function(p){this._rotation=u(p)}},rotation:{get:function(){return this._rotation},set:function(p){this._rotation=p}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:h(this._startAngle),endAngle:h(this._endAngle),clockwise:this._clockwise,rotation:h(this._rotation)}}});o.fromJSON=function(p){return new o(p)},m.exports=o},33951:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(80021),u=i(19217),l=i(87841),h=i(26099),r=new d({Extends:S,initialize:function(p,a){S.call(this,"LineCurve"),Array.isArray(p)&&(a=new h(p[2],p[3]),p=new h(p[0],p[1])),this.p0=p,this.p1=a,this.arcLengthDivisions=1},getBounds:function(o){return o===void 0&&(o=new l),u([this.p0,this.p1],o)},getStartPoint:function(o){return o===void 0&&(o=new h),o.copy(this.p0)},getResolution:function(o){return o===void 0&&(o=1),o},getPoint:function(o,p){return p===void 0&&(p=new h),o===1?p.copy(this.p1):(p.copy(this.p1).subtract(this.p0).scale(o).add(this.p0),p)},getPointAt:function(o,p){return this.getPoint(o,p)},getTangent:function(o,p){return p===void 0&&(p=new h),p.copy(this.p1).subtract(this.p0).normalize(),p},getUtoTmapping:function(o,p,a){var v;if(p){var x=this.getLengths(a),g=x[x.length-1],y=Math.min(p,g);v=y/g}else v=o;return v},draw:function(o){return o.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),o},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});r.fromJSON=function(o){var p=o.points,a=new h(p[0],p[1]),v=new h(p[2],p[3]);return new r(a,v)},m.exports=r},14744:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(80021),u=i(32112),l=i(26099),h=new d({Extends:S,initialize:function(o,p,a){S.call(this,"QuadraticBezierCurve"),Array.isArray(o)&&(a=new l(o[4],o[5]),p=new l(o[2],o[3]),o=new l(o[0],o[1])),this.p0=o,this.p1=p,this.p2=a},getStartPoint:function(r){return r===void 0&&(r=new l),r.copy(this.p0)},getResolution:function(r){return r},getPoint:function(r,o){o===void 0&&(o=new l);var p=this.p0,a=this.p1,v=this.p2;return o.set(u(r,p.x,a.x,v.x),u(r,p.y,a.y,v.y))},draw:function(r,o){o===void 0&&(o=32);var p=this.getPoints(o);r.beginPath(),r.moveTo(this.p0.x,this.p0.y);for(var a=1;a<p.length;a++)r.lineTo(p[a].x,p[a].y);return r.strokePath(),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});h.fromJSON=function(r){var o=r.points,p=new l(o[0],o[1]),a=new l(o[2],o[3]),v=new l(o[4],o[5]);return new h(p,a,v)},m.exports=h},42534:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87842),S=i(83419),u=i(80021),l=i(26099),h=new S({Extends:u,initialize:function(o){o===void 0&&(o=[]),u.call(this,"SplineCurve"),this.points=[],this.addPoints(o)},addPoints:function(r){for(var o=0;o<r.length;o++){var p=new l;typeof r[o]=="number"?(p.x=r[o],p.y=r[o+1],o++):Array.isArray(r[o])?(p.x=r[o][0],p.y=r[o][1]):(p.x=r[o].x,p.y=r[o].y),this.points.push(p)}return this},addPoint:function(r,o){var p=new l(r,o);return this.points.push(p),p},getStartPoint:function(r){return r===void 0&&(r=new l),r.copy(this.points[0])},getResolution:function(r){return r*this.points.length},getPoint:function(r,o){o===void 0&&(o=new l);var p=this.points,a=(p.length-1)*r,v=Math.floor(a),x=a-v,g=p[v===0?v:v-1],y=p[v],T=p[v>p.length-2?p.length-1:v+1],P=p[v>p.length-3?p.length-1:v+2];return o.set(d(x,g.x,y.x,T.x,P.x),d(x,g.y,y.y,T.y,P.y))},toJSON:function(){for(var r=[],o=0;o<this.points.length;o++)r.push(this.points[o].x),r.push(this.points[o].y);return{type:this.type,points:r}}});h.fromJSON=function(r){return new h(r.points)},m.exports=h},25410:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Path:i(46669),MoveTo:i(68618),CubicBezier:i(46728),Curve:i(80021),Ellipse:i(73825),Line:i(33951),QuadraticBezier:i(14744),Spline:i(42534)}},68618:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(26099),u=new d({initialize:function(h,r){this.active=!1,this.p0=new S(h,r)},getPoint:function(l,h){return h===void 0&&(h=new S),h.copy(this.p0)},getPointAt:function(l,h){return this.getPoint(l,h)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});m.exports=u},46669:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(46728),u=i(73825),l=i(39429),h=i(33951),r=i(68618),o=i(14744),p=i(87841),a=i(42534),v=i(26099),x=i(36383),g=new d({initialize:function(T,P){T===void 0&&(T=0),P===void 0&&(P=0),this.name="",this.defaultDivisions=12,this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new v,this._tmpVec2A=new v,this._tmpVec2B=new v,typeof T=="object"?this.fromJSON(T):this.startPoint.set(T,P)},add:function(y){return this.curves.push(y),this},circleTo:function(y,T,P){return T===void 0&&(T=!1),this.ellipseTo(y,y,0,360,T,P)},closePath:function(){var y=this.curves[0].getPoint(0),T=this.curves[this.curves.length-1].getPoint(1);return y.equals(T)||this.curves.push(new h(T,y)),this},cubicBezierTo:function(y,T,P,A,b,O){var D=this.getEndPoint(),B,G,V;return y instanceof v?(B=y,G=T,V=P):(B=new v(P,A),G=new v(b,O),V=new v(y,T)),this.add(new S(D,B,G,V))},quadraticBezierTo:function(y,T,P,A){var b=this.getEndPoint(),O,D;return y instanceof v?(O=y,D=T):(O=new v(P,A),D=new v(y,T)),this.add(new o(b,O,D))},draw:function(y,T){for(var P=0;P<this.curves.length;P++){var A=this.curves[P];A.active&&A.draw(y,T)}return y},ellipseTo:function(y,T,P,A,b,O){var D=new u(0,0,y,T,P,A,b,O),B=this.getEndPoint(this._tmpVec2A),G=D.getStartPoint(this._tmpVec2B);return B.subtract(G),D.x=B.x,D.y=B.y,this.add(D)},fromJSON:function(y){this.curves=[],this.cacheLengths=[],this.startPoint.set(y.x,y.y),this.autoClose=y.autoClose;for(var T=0;T<y.curves.length;T++){var P=y.curves[T];switch(P.type){case"LineCurve":this.add(h.fromJSON(P));break;case"EllipseCurve":this.add(u.fromJSON(P));break;case"SplineCurve":this.add(a.fromJSON(P));break;case"CubicBezierCurve":this.add(S.fromJSON(P));break;case"QuadraticBezierCurve":this.add(o.fromJSON(P));break}}return this},getBounds:function(y,T){y===void 0&&(y=new p),T===void 0&&(T=16),y.x=Number.MAX_VALUE,y.y=Number.MAX_VALUE;for(var P=new p,A=x.MIN_SAFE_INTEGER,b=x.MIN_SAFE_INTEGER,O=0;O<this.curves.length;O++){var D=this.curves[O];D.active&&(D.getBounds(P,T),y.x=Math.min(y.x,P.x),y.y=Math.min(y.y,P.y),A=Math.max(A,P.right),b=Math.max(b,P.bottom))}return y.right=A,y.bottom=b,y},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var y=[],T=0,P=0;P<this.curves.length;P++)T+=this.curves[P].getLength(),y.push(T);return this.cacheLengths=y,y},getCurveAt:function(y){for(var T=y*this.getLength(),P=this.getCurveLengths(),A=0;A<P.length;){if(P[A]>=T)return this.curves[A];A++}return null},getEndPoint:function(y){return y===void 0&&(y=new v),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,y):y.copy(this.startPoint),y},getLength:function(){var y=this.getCurveLengths();return y[y.length-1]},getPoint:function(y,T){T===void 0&&(T=new v);for(var P=y*this.getLength(),A=this.getCurveLengths(),b=0;b<A.length;){if(A[b]>=P){var O=A[b]-P,D=this.curves[b],B=D.getLength(),G=B===0?0:1-O/B;return D.getPointAt(G,T)}b++}return null},getPoints:function(y,T){!y&&!T&&(y=this.defaultDivisions);for(var P=[],A,b=0;b<this.curves.length;b++){var O=this.curves[b];if(O.active)for(var D=O.getResolution(y),B=O.getPoints(D,T),G=0;G<B.length;G++){var V=B[G];A&&A.equals(V)||(P.push(V),A=V)}}return this.autoClose&&P.length>1&&!P[P.length-1].equals(P[0])&&P.push(P[0]),P},getRandomPoint:function(y){return y===void 0&&(y=new v),this.getPoint(Math.random(),y)},getSpacedPoints:function(y){y===void 0&&(y=40);for(var T=[],P=0;P<=y;P++)T.push(this.getPoint(P/y));return this.autoClose&&T.push(T[0]),T},getStartPoint:function(y){return y===void 0&&(y=new v),y.copy(this.startPoint)},getTangent:function(y,T){T===void 0&&(T=new v);for(var P=y*this.getLength(),A=this.getCurveLengths(),b=0;b<A.length;){if(A[b]>=P){var O=A[b]-P,D=this.curves[b],B=D.getLength(),G=B===0?0:1-O/B;return D.getTangentAt(G,T)}b++}return null},lineTo:function(y,T){y instanceof v?this._tmpVec2B.copy(y):typeof y=="object"?this._tmpVec2B.setFromObject(y):this._tmpVec2B.set(y,T);var P=this.getEndPoint(this._tmpVec2A);return this.add(new h([P.x,P.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(y){return y.unshift(this.getEndPoint()),this.add(new a(y))},moveTo:function(y,T){return y instanceof v?this.add(new r(y.x,y.y)):this.add(new r(y,T))},toJSON:function(){for(var y=[],T=0;T<this.curves.length;T++)y.push(this.curves[T].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:y}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});l.register("path",function(y,T){return new g(y,T)}),m.exports=g},45893:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(24882),u=new d({initialize:function(h,r){this.parent=h,this.events=r,r||(this.events=h.events?h.events:h),this.list={},this.values={},this._frozen=!1,!h.hasOwnProperty("sys")&&this.events&&this.events.once(S.DESTROY,this.destroy,this)},get:function(l){var h=this.list;if(Array.isArray(l)){for(var r=[],o=0;o<l.length;o++)r.push(h[l[o]]);return r}else return h[l]},getAll:function(){var l={};for(var h in this.list)this.list.hasOwnProperty(h)&&(l[h]=this.list[h]);return l},query:function(l){var h={};for(var r in this.list)this.list.hasOwnProperty(r)&&r.match(l)&&(h[r]=this.list[r]);return h},set:function(l,h){if(this._frozen)return this;if(typeof l=="string")return this.setValue(l,h);for(var r in l)this.setValue(r,l[r]);return this},inc:function(l,h){if(this._frozen)return this;h===void 0&&(h=1);var r=this.get(l);return r===void 0&&(r=0),this.set(l,r+h),this},toggle:function(l){return this._frozen?this:(this.set(l,!this.get(l)),this)},setValue:function(l,h){if(this._frozen)return this;if(this.has(l))this.values[l]=h;else{var r=this,o=this.list,p=this.events,a=this.parent;Object.defineProperty(this.values,l,{enumerable:!0,configurable:!0,get:function(){return o[l]},set:function(v){if(!r._frozen){var x=o[l];o[l]=v,p.emit(S.CHANGE_DATA,a,l,v,x),p.emit(S.CHANGE_DATA_KEY+l,a,v,x)}}}),o[l]=h,p.emit(S.SET_DATA,a,l,h)}return this},each:function(l,h){for(var r=[this.parent,null,void 0],o=1;o<arguments.length;o++)r.push(arguments[o]);for(var p in this.list)r[1]=p,r[2]=this.list[p],l.apply(h,r);return this},merge:function(l,h){h===void 0&&(h=!0);for(var r in l)l.hasOwnProperty(r)&&(h||!h&&!this.has(r))&&this.setValue(r,l[r]);return this},remove:function(l){if(this._frozen)return this;if(Array.isArray(l))for(var h=0;h<l.length;h++)this.removeValue(l[h]);else return this.removeValue(l);return this},removeValue:function(l){if(this.has(l)){var h=this.list[l];delete this.list[l],delete this.values[l],this.events.emit(S.REMOVE_DATA,this.parent,l,h)}return this},pop:function(l){var h=void 0;return!this._frozen&&this.has(l)&&(h=this.list[l],delete this.list[l],delete this.values[l],this.events.emit(S.REMOVE_DATA,this.parent,l,h)),h},has:function(l){return this.list.hasOwnProperty(l)},setFreeze:function(l){return this._frozen=l,this},reset:function(){for(var l in this.list)delete this.list[l],delete this.values[l];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(S.CHANGE_DATA),this.events.off(S.SET_DATA),this.events.off(S.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(l){this._frozen=!!l}},count:{get:function(){var l=0;for(var h in this.list)this.list[h]!==void 0&&l++;return l}}});m.exports=u},63646:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(45893),u=i(37277),l=i(44594),h=new d({Extends:S,initialize:function(o){S.call(this,o,o.sys.events),this.scene=o,this.systems=o.sys,o.sys.events.once(l.BOOT,this.boot,this),o.sys.events.on(l.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(l.DESTROY,this.destroy,this)},start:function(){this.events.once(l.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){S.prototype.destroy.call(this),this.events.off(l.START,this.start,this),this.scene=null,this.systems=null}});u.register("DataManagerPlugin",h,"data"),m.exports=h},10700:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="changedata"},93608:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="changedata-"},60883:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="destroy"},69780:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="removedata"},22166:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="setdata"},24882:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={CHANGE_DATA:i(10700),CHANGE_DATA_KEY:i(93608),DESTROY:i(60883),REMOVE_DATA:i(69780),SET_DATA:i(22166)}},44965:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={DataManager:i(45893),DataManagerPlugin:i(63646),Events:i(24882)}},7098:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(84148),S={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function u(){if(typeof importScripts=="function")return S;S.audioData=!!window.Audio,S.webAudio=!!(window.AudioContext||window.webkitAudioContext);var l=document.createElement("audio"),h=!!l.canPlayType;try{if(h){var r=function(a,v){var x=l.canPlayType("audio/"+a).replace(/^no$/,"");return v?!!(x||l.canPlayType("audio/"+v).replace(/^no$/,"")):!!x};if(S.ogg=r('ogg; codecs="vorbis"'),S.opus=r('ogg; codecs="opus"',"opus"),S.mp3=r("mpeg"),S.wav=r("wav"),S.m4a=r("x-m4a"),S.aac=r("aac"),S.flac=r("flac","x-flac"),S.webm=r('webm; codecs="vorbis"'),l.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(d.edge)S.dolby=!0;else if(d.safari&&d.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var o=parseInt(RegExp.$1,10),p=parseInt(RegExp.$2,10);(o===10&&p>=11||o>10)&&(S.dolby=!0)}}}}catch{}return S}m.exports=u()},84148:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25892),S={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};function u(){var l=navigator.userAgent;return/Edg\/\d+/.test(l)?(S.edge=!0,S.es2019=!0):/OPR/.test(l)?(S.opera=!0,S.es2019=!0):/Chrome\/(\d+)/.test(l)&&!d.windowsPhone?(S.chrome=!0,S.chromeVersion=parseInt(RegExp.$1,10),S.es2019=S.chromeVersion>69):/Firefox\D+(\d+)/.test(l)?(S.firefox=!0,S.firefoxVersion=parseInt(RegExp.$1,10),S.es2019=S.firefoxVersion>10):/AppleWebKit\/(?!.*CriOS)/.test(l)&&d.iOS?(S.mobileSafari=!0,S.es2019=!0):/MSIE (\d+\.\d+);/.test(l)?(S.ie=!0,S.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+(\.\d+)?) Safari/.test(l)&&!d.windowsPhone?(S.safari=!0,S.safariVersion=parseInt(RegExp.$1,10),S.es2019=S.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(l)&&(S.ie=!0,S.trident=!0,S.tridentVersion=parseInt(RegExp.$1,10),S.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(l)&&(S.silk=!0),S}m.exports=u()},89289:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(27919),S={supportInverseAlpha:!1,supportNewBlendModes:!1};function u(){var r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",o="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",p=new Image;return p.onload=function(){var a=new Image;a.onload=function(){var v=d.create2D(a,6),x=v.getContext("2d",{willReadFrequently:!0});if(x.globalCompositeOperation="multiply",x.drawImage(p,0,0),x.drawImage(a,2,0),!x.getImageData(2,0,1,1))return!1;var g=x.getImageData(2,0,1,1).data;d.remove(a),S.supportNewBlendModes=g[0]===255&&g[1]===0&&g[2]===0},a.src=r+"/wCKxvRF"+o},p.src=r+"AP804Oa6"+o,!1}function l(){var r=d.create2D(this,2),o=r.getContext("2d",{willReadFrequently:!0});o.fillStyle="rgba(10, 20, 30, 0.5)",o.fillRect(0,0,1,1);var p=o.getImageData(0,0,1,1);if(p===null)return!1;o.putImageData(p,1,0);var a=o.getImageData(1,0,1,1),v=a.data[0]===p.data[0]&&a.data[1]===p.data[1]&&a.data[2]===p.data[2]&&a.data[3]===p.data[3];return d.remove(this),v}function h(){return typeof importScripts!="function"&&document!==void 0&&(S.supportNewBlendModes=u(),S.supportInverseAlpha=l()),S}m.exports=h()},89357:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25892),S=i(84148),u=i(27919),l={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function h(){var o=new ArrayBuffer(4),p=new Uint8Array(o),a=new Uint32Array(o);return p[0]=161,p[1]=178,p[2]=195,p[3]=212,a[0]===3569595041?!0:a[0]===2712847316?!1:null}function r(){if(typeof importScripts=="function")return l;l.canvas=!!window.CanvasRenderingContext2D;try{l.localStorage=!!localStorage.getItem}catch{l.localStorage=!1}l.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,l.fileSystem=!!window.requestFileSystem;var o=!1,p=function(){if(window.WebGLRenderingContext)try{var a=u.createWebGL(this),v=a.getContext("webgl")||a.getContext("experimental-webgl"),x=u.create2D(this),g=x.getContext("2d",{willReadFrequently:!0}),y=g.createImageData(1,1);return o=y.data instanceof Uint8ClampedArray,u.remove(a),u.remove(x),!!v}catch{return!1}return!1};return l.webGL=p(),l.worker=!!window.Worker,l.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,l.getUserMedia=l.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,S.firefox&&S.firefoxVersion<21&&(l.getUserMedia=!1),!d.iOS&&(S.ie||S.firefox||S.chrome)&&(l.canvasBitBltShift=!0),(S.safari||S.mobileSafari)&&(l.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(l.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(l.littleEndian=h()),l.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&l.littleEndian!==null&&o,l}m.exports=r()},91639:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={available:!1,cancel:"",keyboard:!1,request:""};function i(){if(typeof importScripts=="function")return E;var d,S="Fullscreen",u="FullScreen",l=["request"+S,"request"+u,"webkitRequest"+S,"webkitRequest"+u,"msRequest"+S,"msRequest"+u,"mozRequest"+u,"mozRequest"+S];for(d=0;d<l.length;d++)if(document.documentElement[l[d]]){E.available=!0,E.request=l[d];break}var h=["cancel"+u,"exit"+S,"webkitCancel"+u,"webkitExit"+S,"msCancel"+u,"msExit"+S,"mozCancel"+u,"mozExit"+S];if(E.available){for(d=0;d<h.length;d++)if(document[h[d]]){E.cancel=h[d];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(E.keyboard=!0),Object.defineProperty(E,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),E}m.exports=i()},31784:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(84148),S={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function u(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(S.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(S.mspointer=!0),navigator.getGamepads&&(S.gamepads=!0),"onwheel"in window||d.ie&&"WheelEvent"in window?S.wheelEvent="wheel":"onmousewheel"in window?S.wheelEvent="mousewheel":d.firefox&&"MouseScrollEvent"in window&&(S.wheelEvent="DOMMouseScroll")),S}m.exports=u()},25892:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function i(){if(typeof importScripts=="function")return E;var d=navigator.userAgent;/Windows/.test(d)?E.windows=!0:/Mac OS/.test(d)&&!/like Mac OS/.test(d)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(E.iOS=!0,E.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),E.iOSVersion=parseInt(RegExp.$1,10)):E.macOS=!0:/Android/.test(d)?E.android=!0:/Linux/.test(d)?E.linux=!0:/iP[ao]d|iPhone/i.test(d)?(E.iOS=!0,navigator.appVersion.match(/OS (\d+)/),E.iOSVersion=parseInt(RegExp.$1,10),E.iPhone=d.toLowerCase().indexOf("iphone")!==-1,E.iPad=d.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(d)||/\bKF[A-Z][A-Z]+/.test(d)||/Silk.*Mobile Safari/.test(d)?E.kindle=!0:/CrOS/.test(d)&&(E.chromeOS=!0),(/Windows Phone/i.test(d)||/IEMobile/i.test(d))&&(E.android=!1,E.iOS=!1,E.macOS=!1,E.windows=!0,E.windowsPhone=!0);var S=/Silk/.test(d);return(E.windows||E.macOS||E.linux&&!S||E.chromeOS)&&(E.desktop=!0),(E.windowsPhone||/Windows NT/i.test(d)&&/Touch/i.test(d))&&(E.desktop=!1),navigator.standalone&&(E.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(E.cordova=!0),window.ejecta!==void 0&&(E.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(E.node=!0),E.node&&typeof process.versions=="object"&&(E.nodeWebkit=!!process.versions["node-webkit"],E.electron=!!process.versions.electron),/Crosswalk/.test(d)&&(E.crosswalk=!0),E.pixelRatio=window.devicePixelRatio||1,E}m.exports=i()},43267:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(95540),S={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};function u(){if(typeof importScripts=="function")return S;var l=document.createElement("video"),h=!!l.canPlayType,r=/^no$/;try{h&&(l.canPlayType('video/ogg; codecs="theora"').replace(r,"")&&(S.ogg=!0),l.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(r,"")&&(S.h264=!0,S.mp4=!0),l.canPlayType("video/x-m4v").replace(r,"")&&(S.m4v=!0),l.canPlayType('video/webm; codecs="vp8, vorbis"').replace(r,"")&&(S.webm=!0),l.canPlayType('video/webm; codecs="vp9"').replace(r,"")&&(S.vp9=!0),l.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(r,"")&&(S.hls=!0))}catch{}return l.parentNode&&l.parentNode.removeChild(l),S.getVideoURL=function(o){Array.isArray(o)||(o=[o]);for(var p=0;p<o.length;p++){var a=d(o[p],"url",o[p]);if(a.indexOf("blob:")===0)return{url:a,type:""};var v;if(a.indexOf("data:")===0?v=a.split(",")[0].match(/\/(.*?);/):v=a.match(/\.([a-zA-Z0-9]+)($|\?)/),v=d(o[p],"type",v?v[1]:"").toLowerCase(),S[v])return{url:a,type:v}}return null},S}m.exports=u()},82264:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={os:i(25892),browser:i(84148),features:i(89357),input:i(31784),audio:i(7098),video:i(43267),fullscreen:i(91639),canvasFeatures:i(89289)}},89422:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=new Float32Array(20),u=new d({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(l){return this._matrix.set(l),this._dirty=!0,this},reset:function(){var l=this._matrix;return l.fill(0),l[0]=1,l[6]=1,l[12]=1,l[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var l=this._data;return this._dirty&&(l.set(this._matrix),l[4]/=255,l[9]/=255,l[14]/=255,l[19]/=255,this._dirty=!1),l},brightness:function(l,h){l===void 0&&(l=0),h===void 0&&(h=!1);var r=l;return this.multiply([r,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0],h)},saturate:function(l,h){l===void 0&&(l=0),h===void 0&&(h=!1);var r=l*2/3+1,o=(r-1)*-.5;return this.multiply([r,o,o,0,0,o,r,o,0,0,o,o,r,0,0,0,0,0,1,0],h)},desaturate:function(l){return l===void 0&&(l=!1),this.saturate(-1,l)},hue:function(l,h){l===void 0&&(l=0),h===void 0&&(h=!1),l=l/180*Math.PI;var r=Math.cos(l),o=Math.sin(l),p=.213,a=.715,v=.072;return this.multiply([p+r*(1-p)+o*-p,a+r*-a+o*-a,v+r*-v+o*(1-v),0,0,p+r*-p+o*.143,a+r*(1-a)+o*.14,v+r*-v+o*-.283,0,0,p+r*-p+o*-.787,a+r*-a+o*a,v+r*(1-v)+o*v,0,0,0,0,0,1,0],h)},grayscale:function(l,h){return l===void 0&&(l=1),h===void 0&&(h=!1),this.saturate(-l,h)},blackWhite:function(l){return l===void 0&&(l=!1),this.multiply(u.BLACK_WHITE,l)},contrast:function(l,h){l===void 0&&(l=0),h===void 0&&(h=!1);var r=l+1,o=-.5*(r-1);return this.multiply([r,0,0,0,o,0,r,0,0,o,0,0,r,0,o,0,0,0,1,0],h)},negative:function(l){return l===void 0&&(l=!1),this.multiply(u.NEGATIVE,l)},desaturateLuminance:function(l){return l===void 0&&(l=!1),this.multiply(u.DESATURATE_LUMINANCE,l)},sepia:function(l){return l===void 0&&(l=!1),this.multiply(u.SEPIA,l)},night:function(l,h){return l===void 0&&(l=.1),h===void 0&&(h=!1),this.multiply([l*-2,-l,0,0,0,-l,0,l,0,0,0,l,l*2,0,0,0,0,0,1,0],h)},lsd:function(l){return l===void 0&&(l=!1),this.multiply(u.LSD,l)},brown:function(l){return l===void 0&&(l=!1),this.multiply(u.BROWN,l)},vintagePinhole:function(l){return l===void 0&&(l=!1),this.multiply(u.VINTAGE,l)},kodachrome:function(l){return l===void 0&&(l=!1),this.multiply(u.KODACHROME,l)},technicolor:function(l){return l===void 0&&(l=!1),this.multiply(u.TECHNICOLOR,l)},polaroid:function(l){return l===void 0&&(l=!1),this.multiply(u.POLAROID,l)},shiftToBGR:function(l){return l===void 0&&(l=!1),this.multiply(u.SHIFT_BGR,l)},multiply:function(l,h){h===void 0&&(h=!1),h||this.reset();var r=this._matrix,o=S;return o.set(r),r.set([o[0]*l[0]+o[1]*l[5]+o[2]*l[10]+o[3]*l[15],o[0]*l[1]+o[1]*l[6]+o[2]*l[11]+o[3]*l[16],o[0]*l[2]+o[1]*l[7]+o[2]*l[12]+o[3]*l[17],o[0]*l[3]+o[1]*l[8]+o[2]*l[13]+o[3]*l[18],o[0]*l[4]+o[1]*l[9]+o[2]*l[14]+o[3]*l[19]+o[4],o[5]*l[0]+o[6]*l[5]+o[7]*l[10]+o[8]*l[15],o[5]*l[1]+o[6]*l[6]+o[7]*l[11]+o[8]*l[16],o[5]*l[2]+o[6]*l[7]+o[7]*l[12]+o[8]*l[17],o[5]*l[3]+o[6]*l[8]+o[7]*l[13]+o[8]*l[18],o[5]*l[4]+o[6]*l[9]+o[7]*l[14]+o[8]*l[19]+o[9],o[10]*l[0]+o[11]*l[5]+o[12]*l[10]+o[13]*l[15],o[10]*l[1]+o[11]*l[6]+o[12]*l[11]+o[13]*l[16],o[10]*l[2]+o[11]*l[7]+o[12]*l[12]+o[13]*l[17],o[10]*l[3]+o[11]*l[8]+o[12]*l[13]+o[13]*l[18],o[10]*l[4]+o[11]*l[9]+o[12]*l[14]+o[13]*l[19]+o[14],o[15]*l[0]+o[16]*l[5]+o[17]*l[10]+o[18]*l[15],o[15]*l[1]+o[16]*l[6]+o[17]*l[11]+o[18]*l[16],o[15]*l[2]+o[16]*l[7]+o[17]*l[12]+o[18]*l[17],o[15]*l[3]+o[16]*l[8]+o[17]*l[13]+o[18]*l[18],o[15]*l[4]+o[16]*l[9]+o[17]*l[14]+o[18]*l[19]+o[19]]),this._dirty=!0,this}});u.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],u.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],u.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],u.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],u.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],u.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],u.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],u.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],u.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],u.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],u.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],m.exports=u},51767:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(29747),u=new d({initialize:function(h,r,o){this._rgb=[0,0,0],this.onChangeCallback=S,this.dirty=!1,this.set(h,r,o)},set:function(l,h,r){return l===void 0&&(l=0),h===void 0&&(h=0),r===void 0&&(r=0),this._rgb=[l,h,r],this.onChange(),this},equals:function(l,h,r){var o=this._rgb;return o[0]===l&&o[1]===h&&o[2]===r},onChange:function(){this.dirty=!0;var l=this._rgb;this.onChangeCallback.call(this,l[0],l[1],l[2])},r:{get:function(){return this._rgb[0]},set:function(l){this._rgb[0]=l,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(l){this._rgb[1]=l,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(l){this._rgb[2]=l,this.onChange()}},destroy:function(){this.onChangeCallback=null}});m.exports=u},60461:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};m.exports=E},54312:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62235),S=i(35893),u=i(86327),l=i(88417),h=function(r,o,p,a){return p===void 0&&(p=0),a===void 0&&(a=0),l(r,S(o)+p),u(r,d(o)+a),r};m.exports=h},46768:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62235),S=i(26541),u=i(86327),l=i(385),h=function(r,o,p,a){return p===void 0&&(p=0),a===void 0&&(a=0),l(r,S(o)-p),u(r,d(o)+a),r};m.exports=h},35827:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62235),S=i(54380),u=i(86327),l=i(40136),h=function(r,o,p,a){return p===void 0&&(p=0),a===void 0&&(a=0),l(r,S(o)+p),u(r,d(o)+a),r};m.exports=h},46871:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66786),S=i(35893),u=i(7702),l=function(h,r,o,p){return o===void 0&&(o=0),p===void 0&&(p=0),d(h,S(r)+o,u(r)+p),h};m.exports=l},5198:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7702),S=i(26541),u=i(20786),l=i(385),h=function(r,o,p,a){return p===void 0&&(p=0),a===void 0&&(a=0),l(r,S(o)-p),u(r,d(o)+a),r};m.exports=h},11879:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(60461),S=[];S[d.BOTTOM_CENTER]=i(54312),S[d.BOTTOM_LEFT]=i(46768),S[d.BOTTOM_RIGHT]=i(35827),S[d.CENTER]=i(46871),S[d.LEFT_CENTER]=i(5198),S[d.RIGHT_CENTER]=i(80503),S[d.TOP_CENTER]=i(89698),S[d.TOP_LEFT]=i(922),S[d.TOP_RIGHT]=i(21373),S[d.LEFT_BOTTOM]=S[d.BOTTOM_LEFT],S[d.LEFT_TOP]=S[d.TOP_LEFT],S[d.RIGHT_BOTTOM]=S[d.BOTTOM_RIGHT],S[d.RIGHT_TOP]=S[d.TOP_RIGHT];var u=function(l,h,r,o,p){return S[r](l,h,o,p)};m.exports=u},80503:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7702),S=i(54380),u=i(20786),l=i(40136),h=function(r,o,p,a){return p===void 0&&(p=0),a===void 0&&(a=0),l(r,S(o)+p),u(r,d(o)+a),r};m.exports=h},89698:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(35893),S=i(17717),u=i(88417),l=i(66737),h=function(r,o,p,a){return p===void 0&&(p=0),a===void 0&&(a=0),u(r,d(o)+p),l(r,S(o)-a),r};m.exports=h},922:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26541),S=i(17717),u=i(385),l=i(66737),h=function(r,o,p,a){return p===void 0&&(p=0),a===void 0&&(a=0),u(r,d(o)-p),l(r,S(o)-a),r};m.exports=h},21373:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(54380),S=i(17717),u=i(40136),l=i(66737),h=function(r,o,p,a){return p===void 0&&(p=0),a===void 0&&(a=0),u(r,d(o)+p),l(r,S(o)-a),r};m.exports=h},91660:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={BottomCenter:i(54312),BottomLeft:i(46768),BottomRight:i(35827),Center:i(46871),LeftCenter:i(5198),QuickSet:i(11879),RightCenter:i(80503),TopCenter:i(89698),TopLeft:i(922),TopRight:i(21373)}},71926:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(60461),S=i(79291),u={In:i(91660),To:i(16694)};u=S(!1,u,d),m.exports=u},21578:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62235),S=i(35893),u=i(88417),l=i(66737),h=function(r,o,p,a){return p===void 0&&(p=0),a===void 0&&(a=0),u(r,S(o)+p),l(r,d(o)+a),r};m.exports=h},10210:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62235),S=i(26541),u=i(385),l=i(66737),h=function(r,o,p,a){return p===void 0&&(p=0),a===void 0&&(a=0),u(r,S(o)-p),l(r,d(o)+a),r};m.exports=h},82341:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62235),S=i(54380),u=i(40136),l=i(66737),h=function(r,o,p,a){return p===void 0&&(p=0),a===void 0&&(a=0),u(r,S(o)+p),l(r,d(o)+a),r};m.exports=h},87958:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62235),S=i(26541),u=i(86327),l=i(40136),h=function(r,o,p,a){return p===void 0&&(p=0),a===void 0&&(a=0),l(r,S(o)-p),u(r,d(o)+a),r};m.exports=h},40080:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7702),S=i(26541),u=i(20786),l=i(40136),h=function(r,o,p,a){return p===void 0&&(p=0),a===void 0&&(a=0),l(r,S(o)-p),u(r,d(o)+a),r};m.exports=h},88466:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26541),S=i(17717),u=i(40136),l=i(66737),h=function(r,o,p,a){return p===void 0&&(p=0),a===void 0&&(a=0),u(r,d(o)-p),l(r,S(o)-a),r};m.exports=h},38829:(m,E,i)=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(60461),S=[];S[d.BOTTOM_CENTER]=i(21578),S[d.BOTTOM_LEFT]=i(10210),S[d.BOTTOM_RIGHT]=i(82341),S[d.LEFT_BOTTOM]=i(87958),S[d.LEFT_CENTER]=i(40080),S[d.LEFT_TOP]=i(88466),S[d.RIGHT_BOTTOM]=i(19211),S[d.RIGHT_CENTER]=i(34609),S[d.RIGHT_TOP]=i(48741),S[d.TOP_CENTER]=i(49440),S[d.TOP_LEFT]=i(81288),S[d.TOP_RIGHT]=i(61323);var u=function(l,h,r,o,p){return S[r](l,h,o,p)};m.exports=u},19211:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62235),S=i(54380),u=i(86327),l=i(385),h=function(r,o,p,a){return p===void 0&&(p=0),a===void 0&&(a=0),l(r,S(o)+p),u(r,d(o)+a),r};m.exports=h},34609:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7702),S=i(54380),u=i(20786),l=i(385),h=function(r,o,p,a){return p===void 0&&(p=0),a===void 0&&(a=0),l(r,S(o)+p),u(r,d(o)+a),r};m.exports=h},48741:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(54380),S=i(17717),u=i(385),l=i(66737),h=function(r,o,p,a){return p===void 0&&(p=0),a===void 0&&(a=0),u(r,d(o)+p),l(r,S(o)-a),r};m.exports=h},49440:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(35893),S=i(17717),u=i(86327),l=i(88417),h=function(r,o,p,a){return p===void 0&&(p=0),a===void 0&&(a=0),l(r,d(o)+p),u(r,S(o)-a),r};m.exports=h},81288:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26541),S=i(17717),u=i(86327),l=i(385),h=function(r,o,p,a){return p===void 0&&(p=0),a===void 0&&(a=0),l(r,d(o)-p),u(r,S(o)-a),r};m.exports=h},61323:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(54380),S=i(17717),u=i(86327),l=i(40136),h=function(r,o,p,a){return p===void 0&&(p=0),a===void 0&&(a=0),l(r,d(o)+p),u(r,S(o)-a),r};m.exports=h},16694:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={BottomCenter:i(21578),BottomLeft:i(10210),BottomRight:i(82341),LeftBottom:i(87958),LeftCenter:i(40080),LeftTop:i(88466),QuickSet:i(38829),RightBottom:i(19211),RightCenter:i(34609),RightTop:i(48741),TopCenter:i(49440),TopLeft:i(81288),TopRight:i(61323)}},66786:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(88417),S=i(20786),u=function(l,h,r){return d(l,h),S(l,r)};m.exports=u},62235:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i.y+i.height-i.height*i.originY};m.exports=E},72873:(m,E,i)=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62235),S=i(26541),u=i(54380),l=i(17717),h=i(87841),r=function(o,p){p===void 0&&(p=new h);var a=S(o),v=l(o);return p.x=a,p.y=v,p.width=u(o)-a,p.height=d(o)-v,p};m.exports=r},35893:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i.x-i.width*i.originX+i.width*.5};m.exports=E},7702:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i.y-i.height*i.originY+i.height*.5};m.exports=E},26541:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i.x-i.width*i.originX};m.exports=E},87431:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i.width*i.originX};m.exports=E},46928:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i.height*i.originY};m.exports=E},54380:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i.x+i.width-i.width*i.originX};m.exports=E},17717:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i.y-i.height*i.originY};m.exports=E},86327:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return i.y=d-i.height+i.height*i.originY,i};m.exports=E},88417:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){var S=i.width*i.originX;return i.x=d+S-i.width*.5,i};m.exports=E},20786:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){var S=i.height*i.originY;return i.y=d+S-i.height*.5,i};m.exports=E},385:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return i.x=d+i.width*i.originX,i};m.exports=E},40136:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return i.x=d-i.width+i.width*i.originX,i};m.exports=E},66737:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return i.y=d+i.height*i.originY,i};m.exports=E},58724:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={CenterOn:i(66786),GetBottom:i(62235),GetBounds:i(72873),GetCenterX:i(35893),GetCenterY:i(7702),GetLeft:i(26541),GetOffsetX:i(87431),GetOffsetY:i(46928),GetRight:i(54380),GetTop:i(17717),SetBottom:i(86327),SetCenterX:i(88417),SetCenterY:i(20786),SetLeft:i(385),SetRight:i(40136),SetTop:i(66737)}},20623:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setCrisp:function(i){var d=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return d.forEach(function(S){i.style["image-rendering"]=S}),i.style.msInterpolationMode="nearest-neighbor",i},setBicubic:function(i){return i.style["image-rendering"]="auto",i.style.msInterpolationMode="bicubic",i}};m.exports=E},27919:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(8054),S=i(68703),u=[],l=!1,h=function(){var r=function(P,A,b,O,D){A===void 0&&(A=1),b===void 0&&(b=1),O===void 0&&(O=d.CANVAS),D===void 0&&(D=!1);var B,G=a(O);return G===null?(G={parent:P,canvas:document.createElement("canvas"),type:O},O===d.CANVAS&&u.push(G),B=G.canvas):(G.parent=P,B=G.canvas),D&&(G.parent=B),B.width=A,B.height=b,l&&O===d.CANVAS&&S.disable(B.getContext("2d",{willReadFrequently:!1})),B},o=function(P,A,b){return r(P,A,b,d.CANVAS)},p=function(P,A,b){return r(P,A,b,d.WEBGL)},a=function(P){if(P===void 0&&(P=d.CANVAS),P===d.WEBGL)return null;for(var A=0;A<u.length;A++){var b=u[A];if(!b.parent&&b.type===P)return b}return null},v=function(P){var A=P instanceof HTMLCanvasElement;u.forEach(function(b){(A&&b.canvas===P||!A&&b.parent===P)&&(b.parent=null,b.canvas.width=1,b.canvas.height=1)})},x=function(){var P=0;return u.forEach(function(A){A.parent&&P++}),P},g=function(){return u.length-x()},y=function(){l=!0},T=function(){l=!1};return{create2D:o,create:r,createWebGL:p,disableSmoothing:y,enableSmoothing:T,first:a,free:g,pool:u,remove:v,total:x}};m.exports=h()},68703:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E="",i=function(){var d=function(h){for(var r=["i","webkitI","msI","mozI","oI"],o=0;o<r.length;o++){var p=r[o]+"mageSmoothingEnabled";if(p in h)return p}return null},S=function(h){return E===""&&(E=d(h)),E&&(h[E]=!0),h},u=function(h){return E===""&&(E=d(h)),E&&(h[E]=!1),h},l=function(h){return E!==null?h[E]:null};return{disable:u,enable:S,getPrefix:d,isEnabled:l}};m.exports=i()},65208:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return d===void 0&&(d="none"),i.style.msTouchAction=d,i.style["ms-touch-action"]=d,i.style["touch-action"]=d,i};m.exports=E},91610:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){d===void 0&&(d="none");var S=["-webkit-","-khtml-","-moz-","-ms-",""];return S.forEach(function(u){i.style[u+"user-select"]=d}),i.style["-webkit-touch-callout"]=d,i.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",i};m.exports=E},26253:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={CanvasInterpolation:i(20623),CanvasPool:i(27919),Smoothing:i(68703),TouchAction:i(65208),UserSelect:i(91610)}},40987:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(37589),u=i(1e3),l=i(7537),h=i(87837),r=new d({initialize:function(p,a,v,x){p===void 0&&(p=0),a===void 0&&(a=0),v===void 0&&(v=0),x===void 0&&(x=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(p,a,v,x)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(o,p,a,v,x){return v===void 0&&(v=255),x===void 0&&(x=!0),this._locked=!0,this.red=o,this.green=p,this.blue=a,this.alpha=v,this._locked=!1,this.update(x)},setGLTo:function(o,p,a,v){return v===void 0&&(v=1),this._locked=!0,this.redGL=o,this.greenGL=p,this.blueGL=a,this.alphaGL=v,this._locked=!1,this.update(!0)},setFromRGB:function(o){return this._locked=!0,this.red=o.r,this.green=o.g,this.blue=o.b,o.hasOwnProperty("a")&&(this.alpha=o.a),this._locked=!1,this.update(!0)},setFromHSV:function(o,p,a){return l(o,p,a,this)},update:function(o){if(o===void 0&&(o=!1),this._locked)return this;var p=this.r,a=this.g,v=this.b,x=this.a;return this._color=S(p,a,v),this._color32=u(p,a,v,x),this._rgba="rgba("+p+","+a+","+v+","+x/255+")",o&&h(p,a,v,this),this},updateHSV:function(){var o=this.r,p=this.g,a=this.b;return h(o,p,a,this),this},clone:function(){return new r(this.r,this.g,this.b,this.a)},gray:function(o){return this.setTo(o,o,o)},random:function(o,p){o===void 0&&(o=0),p===void 0&&(p=255);var a=Math.floor(o+Math.random()*(p-o)),v=Math.floor(o+Math.random()*(p-o)),x=Math.floor(o+Math.random()*(p-o));return this.setTo(a,v,x)},randomGray:function(o,p){o===void 0&&(o=0),p===void 0&&(p=255);var a=Math.floor(o+Math.random()*(p-o));return this.setTo(a,a,a)},saturate:function(o){return this.s+=o/100,this},desaturate:function(o){return this.s-=o/100,this},lighten:function(o){return this.v+=o/100,this},darken:function(o){return this.v-=o/100,this},brighten:function(o){var p=this.r,a=this.g,v=this.b;return p=Math.max(0,Math.min(255,p-Math.round(255*-(o/100)))),a=Math.max(0,Math.min(255,a-Math.round(255*-(o/100)))),v=Math.max(0,Math.min(255,v-Math.round(255*-(o/100)))),this.setTo(p,a,v)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(o){this.gl[0]=Math.min(Math.abs(o),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(o){this.gl[1]=Math.min(Math.abs(o),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(o){this.gl[2]=Math.min(Math.abs(o),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(o){this.gl[3]=Math.min(Math.abs(o),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(o){o=Math.floor(Math.abs(o)),this.r=Math.min(o,255),this.gl[0]=o/255,this.update(!0)}},green:{get:function(){return this.g},set:function(o){o=Math.floor(Math.abs(o)),this.g=Math.min(o,255),this.gl[1]=o/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(o){o=Math.floor(Math.abs(o)),this.b=Math.min(o,255),this.gl[2]=o/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(o){o=Math.floor(Math.abs(o)),this.a=Math.min(o,255),this.gl[3]=o/255,this.update()}},h:{get:function(){return this._h},set:function(o){this._h=o,l(o,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(o){this._s=o,l(this._h,o,this._v,this)}},v:{get:function(){return this._v},set:function(o){this._v=o,l(this._h,this._s,o,this)}}});m.exports=r},92728:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(37589),S=function(u){u===void 0&&(u=1024);var l=[],h=255,r,o=255,p=0,a=0;for(r=0;r<=h;r++)l.push({r:o,g:r,b:a,color:d(o,r,a)});for(p=255,r=h;r>=0;r--)l.push({r,g:p,b:a,color:d(r,p,a)});for(o=0,r=0;r<=h;r++,p--)l.push({r:o,g:p,b:r,color:d(o,p,r)});for(p=0,a=255,r=0;r<=h;r++,a--,o++)l.push({r:o,g:p,b:a,color:d(o,p,a)});if(u===1024)return l;var v=[],x=0,g=1024/u;for(r=0;r<u;r++)v.push(l[Math.floor(x)]),x+=g;return v};m.exports=S},91588:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){var d={r:i>>16&255,g:i>>8&255,b:i&255,a:255};return i>16777215&&(d.a=i>>>24),d};m.exports=E},62957:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){var d=i.toString(16);return d.length===1?"0"+d:d};m.exports=E},37589:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){return i<<16|d<<8|S};m.exports=E},1e3:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){return u<<24|i<<16|d<<8|S};m.exports=E},62183:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(40987),S=i(89528),u=function(l,h,r){var o=r,p=r,a=r;if(h!==0){var v=r<.5?r*(1+h):r+h-r*h,x=2*r-v;o=S(x,v,l+1/3),p=S(x,v,l),a=S(x,v,l-1/3)}var g=new d;return g.setGLTo(o,p,a,1)};m.exports=u},27939:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7537),S=function(u,l){u===void 0&&(u=1),l===void 0&&(l=1);for(var h=[],r=0;r<=359;r++)h.push(d(r/359,u,l));return h};m.exports=S},7537:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(37589);function S(l,h,r,o){var p=(l+h*6)%6,a=Math.min(p,4-p,1);return Math.round(255*(o-o*r*Math.max(0,a)))}var u=function(l,h,r,o){h===void 0&&(h=1),r===void 0&&(r=1);var p=S(5,l,h,r),a=S(3,l,h,r),v=S(1,l,h,r);return o?o.setTo?o.setTo(p,a,v,o.alpha,!0):(o.r=p,o.g=a,o.b=v,o.color=d(p,a,v),o):{r:p,g:a,b:v,color:d(p,a,v)}};m.exports=u},70238:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(40987),S=function(u){var l=new d;u=u.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,v,x,g){return v+v+x+x+g+g});var h=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(u);if(h){var r=parseInt(h[1],16),o=parseInt(h[2],16),p=parseInt(h[3],16);l.setTo(r,o,p)}return l};m.exports=S},89528:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){return S<0&&(S+=1),S>1&&(S-=1),S<.16666666666666666?i+(d-i)*6*S:S<.5?d:S<.6666666666666666?i+(d-i)*(.6666666666666666-S)*6:i};m.exports=E},30100:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(40987),S=i(90664),u=function(l){var h=S(l);return new d(h.r,h.g,h.b,h.a)};m.exports=u},90664:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i>16777215?{a:i>>>24,r:i>>16&255,g:i>>8&255,b:i&255}:{a:255,r:i>>16&255,g:i>>8&255,b:i&255}};m.exports=E},13699:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(28915),S=i(37589),u=function(r,o,p,a,v,x,g,y){g===void 0&&(g=100),y===void 0&&(y=0);var T=y/g,P=d(r,a,T),A=d(o,v,T),b=d(p,x,T);return{r:P,g:A,b,a:255,color:S(P,A,b)}},l=function(r,o,p,a){return p===void 0&&(p=100),a===void 0&&(a=0),u(r.r,r.g,r.b,o.r,o.g,o.b,p,a)},h=function(r,o,p,a,v,x){return v===void 0&&(v=100),x===void 0&&(x=0),u(r.r,r.g,r.b,o,p,a,v,x)};m.exports={RGBWithRGB:u,ColorWithRGB:h,ColorWithColor:l}},68957:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(40987),S=function(u){return new d(u.r,u.g,u.b,u.a)};m.exports=S},87388:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(40987),S=function(u){var l=new d,h=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(u.toLowerCase());if(h){var r=parseInt(h[1],10),o=parseInt(h[2],10),p=parseInt(h[3],10),a=h[4]!==void 0?parseFloat(h[4]):1;l.setTo(r,o,p,a*255)}return l};m.exports=S},87837:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){u===void 0&&(u={h:0,s:0,v:0}),i/=255,d/=255,S/=255;var l=Math.min(i,d,S),h=Math.max(i,d,S),r=h-l,o=0,p=h===0?0:r/h,a=h;return h!==l&&(h===i?o=(d-S)/r+(d<S?6:0):h===d?o=(S-i)/r+2:h===S&&(o=(i-d)/r+4),o/=6),u.hasOwnProperty("_h")?(u._h=o,u._s=p,u._v=a):(u.h=o,u.s=p,u.v=a),u};m.exports=E},75723:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62957),S=function(u,l,h,r,o){return r===void 0&&(r=255),o===void 0&&(o="#"),o==="#"?"#"+((1<<24)+(u<<16)+(l<<8)+h).toString(16).slice(1,7):"0x"+d(r)+d(u)+d(l)+d(h)};m.exports=S},85386:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(30976),S=i(40987),u=function(l,h){return l===void 0&&(l=0),h===void 0&&(h=255),new S(d(l,h),d(l,h),d(l,h))};m.exports=u},80333:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(70238),S=i(30100),u=i(68957),l=i(87388),h=function(r){var o=typeof r;switch(o){case"string":return r.substr(0,3).toLowerCase()==="rgb"?l(r):d(r);case"number":return S(r);case"object":return u(r)}};m.exports=h},3956:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(40987);d.ColorSpectrum=i(92728),d.ColorToRGBA=i(91588),d.ComponentToHex=i(62957),d.GetColor=i(37589),d.GetColor32=i(1e3),d.HexStringToColor=i(70238),d.HSLToColor=i(62183),d.HSVColorWheel=i(27939),d.HSVToRGB=i(7537),d.HueToComponent=i(89528),d.IntegerToColor=i(30100),d.IntegerToRGB=i(90664),d.Interpolate=i(13699),d.ObjectToColor=i(68957),d.RandomRGB=i(85386),d.RGBStringToColor=i(87388),d.RGBToHSV=i(87837),d.RGBToString=i(75723),d.ValueToColor=i(80333),m.exports=d},27460:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Align:i(71926),BaseShader:i(73894),Bounds:i(58724),Canvas:i(26253),Color:i(3956),ColorMatrix:i(89422),Masks:i(69781),RGB:i(51767)}},6858:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(39429),u=new d({initialize:function(h,r,o,p,a,v){r||(r=h.sys.make.image({x:o,y:p,key:a,frame:v,add:!1})),this.bitmapMask=r,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(l){this.bitmapMask=l},preRenderWebGL:function(l,h,r){l.pipelines.BITMAPMASK_PIPELINE.beginMask(this,h,r)},postRenderWebGL:function(l,h,r){l.pipelines.BITMAPMASK_PIPELINE.endMask(this,h,r)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});S.register("bitmapMask",function(l,h,r,o,p){return new u(this.scene,l,h,r,o,p)}),m.exports=u},80661:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=new d({initialize:function(l,h){this.geometryMask=h,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(u){return this.geometryMask=u,this},setInvertAlpha:function(u){return u===void 0&&(u=!0),this.invertAlpha=u,this},preRenderWebGL:function(u,l,h){var r=u.gl;u.flush(),u.maskStack.length===0&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),u.maskCount=0),u.currentCameraMask.mask!==this&&(u.currentMask.mask=this),u.maskStack.push({mask:this,camera:h}),this.applyStencil(u,h,!0),u.maskCount++},applyStencil:function(u,l,h){var r=u.gl,o=this.geometryMask,p=u.maskCount,a=255;r.colorMask(!1,!1,!1,!1),h?(r.stencilFunc(r.EQUAL,p,a),r.stencilOp(r.KEEP,r.KEEP,r.INCR),p++):(r.stencilFunc(r.EQUAL,p+1,a),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),this.level=p,o.renderWebGL(u,o,l),u.flush(),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),this.invertAlpha?r.stencilFunc(r.NOTEQUAL,p,a):r.stencilFunc(r.EQUAL,p,a)},postRenderWebGL:function(u){var l=u.gl;u.maskStack.pop(),u.maskCount--,u.flush();var h=u.currentMask;if(u.maskStack.length===0)h.mask=null,l.disable(l.STENCIL_TEST);else{var r=u.maskStack[u.maskStack.length-1];r.mask.applyStencil(u,r.camera,!1),u.currentCameraMask.mask!==r.mask?(h.mask=r.mask,h.camera=r.camera):h.mask=null}},preRenderCanvas:function(u,l,h){var r=this.geometryMask;u.currentContext.save(),r.renderCanvas(u,r,h,null,null,!0),u.currentContext.clip()},postRenderCanvas:function(u){u.currentContext.restore()},destroy:function(){this.geometryMask=null}});m.exports=S},69781:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={BitmapMask:i(6858),GeometryMask:i(80661)}},73894:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=new d({initialize:function(l,h,r,o){(!h||h==="")&&(h=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!r||r==="")&&(r=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),o===void 0&&(o=null),this.key=l,this.fragmentSrc=h,this.vertexSrc=r,this.uniforms=o}});m.exports=S},40366:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){var S;if(d)typeof d=="string"?S=document.getElementById(d):typeof d=="object"&&d.nodeType===1&&(S=d);else if(i.parentElement||d===null)return i;return S||(S=document.body),S.appendChild(i),i};m.exports=E},83719:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(40366),S=function(u){var l=u.config;if(!(!l.parent||!l.domCreateContainer)){var h=document.createElement("div");h.style.cssText=["display: block;","width: "+u.scale.width+"px;","height: "+u.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+l.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),u.domContainer=h,d(h,l.parent)}};m.exports=S},57264:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25892),S=function(u){if(document.readyState==="complete"||document.readyState==="interactive"){u();return}var l=function(){document.removeEventListener("deviceready",l,!0),document.removeEventListener("DOMContentLoaded",l,!0),window.removeEventListener("load",l,!0),u()};document.body?d.cordova?document.addEventListener("deviceready",l,!1):(document.addEventListener("DOMContentLoaded",l,!0),window.addEventListener("load",l,!0)):window.setTimeout(l,20)};m.exports=S},57811:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){if(!i)return window.innerHeight;var d=Math.abs(window.orientation),S={w:0,h:0},u=document.createElement("div");return u.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(u),S.w=d===90?u.offsetHeight:window.innerWidth,S.h=d===90?window.innerWidth:u.offsetHeight,document.documentElement.removeChild(u),u=null,Math.abs(window.orientation)!==90?S.h:S.w};m.exports=E},45818:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(13560),S=function(u,l){var h=window.screen,r=h?h.orientation||h.mozOrientation||h.msOrientation:!1;if(r&&typeof r.type=="string")return r.type;if(typeof r=="string")return r;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?d.ORIENTATION.PORTRAIT:d.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return d.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return d.ORIENTATION.LANDSCAPE}else return l>u?d.ORIENTATION.PORTRAIT:d.ORIENTATION.LANDSCAPE};m.exports=S},74403:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){var d;return i!==""&&(typeof i=="string"?d=document.getElementById(i):i&&i.nodeType===1&&(d=i)),d||(d=document.body),d};m.exports=E},56836:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){var d="";try{if(window.DOMParser){var S=new DOMParser;d=S.parseFromString(i,"text/xml")}else d=new ActiveXObject("Microsoft.XMLDOM"),d.loadXML(i)}catch{d=null}return!d||!d.documentElement||d.getElementsByTagName("parsererror").length?null:d};m.exports=E},35846:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){i.parentNode&&i.parentNode.removeChild(i)};m.exports=E},43092:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(29747),u=new d({initialize:function(){this.isRunning=!1,this.callback=S,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var h=this;this.step=function r(o){h.callback(o),h.isRunning&&(h.timeOutID=window.requestAnimationFrame(r))},this.stepTimeout=function r(){h.isRunning&&(h.timeOutID=window.setTimeout(r,h.delay)),h.callback(window.performance.now())}},start:function(l,h,r){this.isRunning||(this.callback=l,this.isSetTimeOut=h,this.delay=r,this.isRunning=!0,this.timeOutID=h?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=S}});m.exports=u},84902:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={AddToDOM:i(40366),DOMContentLoaded:i(57264),GetInnerHeight:i(57811),GetScreenOrientation:i(45818),GetTarget:i(74403),ParseXML:i(56836),RemoveFromDOM:i(35846),RequestAnimationFrame:i(43092)};m.exports=d},47565:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(50792),u=i(37277),l=new d({Extends:S,initialize:function(){S.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});u.register("EventEmitter",l,"events"),m.exports=l},93055:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={EventEmitter:i(47565)}},20122:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(72898),u=i(14811),l=new d({Extends:S,initialize:function(r,o){o===void 0&&(o=1),S.call(this,u.BARREL,r),this.amount=o}});m.exports=l},32251:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(72898),u=i(14811),l=new d({Extends:S,initialize:function(r,o,p,a,v,x,g){p===void 0&&(p=1),a===void 0&&(a=1),v===void 0&&(v=1),x===void 0&&(x=1),g===void 0&&(g=4),S.call(this,u.BLOOM,r),this.steps=g,this.offsetX=p,this.offsetY=a,this.blurStrength=v,this.strength=x,this.glcolor=[1,1,1],o!=null&&(this.color=o)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var r=this.glcolor;r[0]=(h>>16&255)/255,r[1]=(h>>8&255)/255,r[2]=(h&255)/255}}});m.exports=l},9047:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(72898),u=i(14811),l=new d({Extends:S,initialize:function(r,o,p,a,v,x,g){o===void 0&&(o=0),p===void 0&&(p=2),a===void 0&&(a=2),v===void 0&&(v=1),g===void 0&&(g=4),S.call(this,u.BLUR,r),this.quality=o,this.x=p,this.y=a,this.steps=g,this.strength=v,this.glcolor=[1,1,1],x!=null&&(this.color=x)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var r=this.glcolor;r[0]=(h>>16&255)/255,r[1]=(h>>8&255)/255,r[2]=(h&255)/255}}});m.exports=l},27885:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(72898),u=i(14811),l=new d({Extends:S,initialize:function(r,o,p,a,v,x,g,y){o===void 0&&(o=.5),p===void 0&&(p=1),a===void 0&&(a=.2),v===void 0&&(v=!1),x===void 0&&(x=1),g===void 0&&(g=1),y===void 0&&(y=1),S.call(this,u.BOKEH,r),this.radius=o,this.amount=p,this.contrast=a,this.isTiltShift=v,this.strength=y,this.blurX=x,this.blurY=g}});m.exports=l},12578:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(72898),u=i(14811),l=new d({Extends:S,initialize:function(r,o,p,a,v,x){o===void 0&&(o=8),v===void 0&&(v=1),x===void 0&&(x=.005),S.call(this,u.CIRCLE,r),this.scale=v,this.feather=x,this.thickness=o,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],p!=null&&(this.color=p),a!=null&&(this.backgroundColor=a)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var r=this.glcolor;r[0]=(h>>16&255)/255,r[1]=(h>>8&255)/255,r[2]=(h&255)/255}},backgroundColor:{get:function(){var h=this.glcolor2;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var r=this.glcolor2;r[0]=(h>>16&255)/255,r[1]=(h>>8&255)/255,r[2]=(h&255)/255}},backgroundAlpha:{get:function(){return this.glcolor2[3]},set:function(h){this.glcolor2[3]=h}}});m.exports=l},15802:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(89422),u=i(14811),l=new d({Extends:S,initialize:function(r){S.call(this),this.type=u.COLOR_MATRIX,this.gameObject=r,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});m.exports=l},72898:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=new d({initialize:function(l,h){this.type=l,this.gameObject=h,this.active=!0},setActive:function(u){return this.active=u,this},destroy:function(){this.gameObject=null,this.active=!1}});m.exports=S},44553:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(72898),u=i(14811),l=new d({Extends:S,initialize:function(r,o,p,a){o===void 0&&(o="__WHITE"),p===void 0&&(p=.005),a===void 0&&(a=.005),S.call(this,u.DISPLACEMENT,r),this.x=p,this.y=a,this.glTexture,this.setTexture(o)},setTexture:function(h){var r=this.gameObject.scene.sys.textures.getFrame(h);return r&&(this.glTexture=r.glTexture),this}});m.exports=l},68531:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(72898),u=i(14811),l=new d({Extends:S,initialize:function(r,o,p,a,v){p===void 0&&(p=4),a===void 0&&(a=0),v===void 0&&(v=!1),S.call(this,u.GLOW,r),this.outerStrength=p,this.innerStrength=a,this.knockout=v,this.glcolor=[1,1,1,1],o!==void 0&&(this.color=o)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var r=this.glcolor;r[0]=(h>>16&255)/255,r[1]=(h>>8&255)/255,r[2]=(h&255)/255}}});m.exports=l},37102:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(72898),u=i(14811),l=new d({Extends:S,initialize:function(r,o,p,a,v,x,g,y,T){a===void 0&&(a=.2),v===void 0&&(v=0),x===void 0&&(x=0),g===void 0&&(g=0),y===void 0&&(y=1),T===void 0&&(T=0),S.call(this,u.GRADIENT,r),this.alpha=a,this.size=T,this.fromX=v,this.fromY=x,this.toX=g,this.toY=y,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],o!=null&&(this.color1=o),p!=null&&(this.color2=p)},color1:{get:function(){var h=this.glcolor1;return(h[0]<<16)+(h[1]<<8)+(h[2]|0)},set:function(h){var r=this.glcolor1;r[0]=h>>16&255,r[1]=h>>8&255,r[2]=h&255}},color2:{get:function(){var h=this.glcolor2;return(h[0]<<16)+(h[1]<<8)+(h[2]|0)},set:function(h){var r=this.glcolor2;r[0]=h>>16&255,r[1]=h>>8&255,r[2]=h&255}}});m.exports=l},86886:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(72898),u=i(14811),l=new d({Extends:S,initialize:function(r,o){o===void 0&&(o=1),S.call(this,u.PIXELATE,r),this.amount=o}});m.exports=l},92322:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(72898),u=i(14811),l=new d({Extends:S,initialize:function(r,o,p,a,v,x,g,y){o===void 0&&(o=0),p===void 0&&(p=0),a===void 0&&(a=.1),v===void 0&&(v=1),g===void 0&&(g=6),y===void 0&&(y=1),S.call(this,u.SHADOW,r),this.x=o,this.y=p,this.decay=a,this.power=v,this.glcolor=[0,0,0,1],this.samples=g,this.intensity=y,x!==void 0&&(this.color=x)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var r=this.glcolor;r[0]=(h>>16&255)/255,r[1]=(h>>8&255)/255,r[2]=(h&255)/255}}});m.exports=l},39563:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(72898),u=i(14811),l=new d({Extends:S,initialize:function(r,o,p,a,v){o===void 0&&(o=.5),p===void 0&&(p=.5),a===void 0&&(a=3),v===void 0&&(v=!1),S.call(this,u.SHINE,r),this.speed=o,this.lineWidth=p,this.gradient=a,this.reveal=v}});m.exports=l},56448:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(72898),u=i(14811),l=new d({Extends:S,initialize:function(r,o,p,a,v){o===void 0&&(o=.5),p===void 0&&(p=.5),a===void 0&&(a=.5),v===void 0&&(v=.5),S.call(this,u.VIGNETTE,r),this.x=o,this.y=p,this.radius=a,this.strength=v}});m.exports=l},38433:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(72898),u=i(14811),l=new d({Extends:S,initialize:function(r,o,p,a,v){o===void 0&&(o=.1),p===void 0&&(p=0),a===void 0&&(a=0),v===void 0&&(v=!1),S.call(this,u.WIPE,r),this.progress=0,this.wipeWidth=o,this.direction=p,this.axis=a,this.reveal=v}});m.exports=l},14811:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19};m.exports=E},66064:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(79291),S=i(14811),u={Barrel:i(20122),Controller:i(72898),Bloom:i(32251),Blur:i(9047),Bokeh:i(27885),Circle:i(12578),ColorMatrix:i(15802),Displacement:i(44553),Glow:i(68531),Gradient:i(37102),Pixelate:i(86886),Shadow:i(92322),Shine:i(39563),Vignette:i(56448),Wipe:i(38433)};u=d(!1,u,S),m.exports=u},25305:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(10312),S=i(23568),u=function(l,h,r){h.x=S(r,"x",0),h.y=S(r,"y",0),h.depth=S(r,"depth",0),h.flipX=S(r,"flipX",!1),h.flipY=S(r,"flipY",!1);var o=S(r,"scale",null);typeof o=="number"?h.setScale(o):o!==null&&(h.scaleX=S(o,"x",1),h.scaleY=S(o,"y",1));var p=S(r,"scrollFactor",null);typeof p=="number"?h.setScrollFactor(p):p!==null&&(h.scrollFactorX=S(p,"x",1),h.scrollFactorY=S(p,"y",1)),h.rotation=S(r,"rotation",0);var a=S(r,"angle",null);a!==null&&(h.angle=a),h.alpha=S(r,"alpha",1);var v=S(r,"origin",null);if(typeof v=="number")h.setOrigin(v);else if(v!==null){var x=S(v,"x",.5),g=S(v,"y",.5);h.setOrigin(x,g)}h.blendMode=S(r,"blendMode",d.NORMAL),h.visible=S(r,"visible",!0);var y=S(r,"add",!0);return y&&l.sys.displayList.add(h),h.preUpdate&&l.sys.updateList.add(h),h};m.exports=u},13059:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(23568),S=function(u,l){var h=d(l,"anims",null);if(h===null)return u;if(typeof h=="string")u.anims.play(h);else if(typeof h=="object"){var r=u.anims,o=d(h,"key",void 0);if(o){var p=d(h,"startFrame",void 0),a=d(h,"delay",0),v=d(h,"repeat",0),x=d(h,"repeatDelay",0),g=d(h,"yoyo",!1),y=d(h,"play",!1),T=d(h,"delayedPlay",0),P={key:o,delay:a,repeat:v,repeatDelay:x,yoyo:g,startFrame:p};y?r.play(P):T>0?r.playAfterDelay(P,T):r.load(P)}}return u};m.exports=S},8050:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(73162),u=i(37277),l=i(51708),h=i(44594),r=i(19186),o=new d({Extends:S,initialize:function(a){S.call(this,a),this.sortChildrenFlag=!1,this.scene=a,this.systems=a.sys,this.events=a.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(h.BOOT,this.boot,this),this.events.on(h.START,this.start,this)},boot:function(){this.events.once(h.DESTROY,this.destroy,this)},addChildCallback:function(p){p.displayList&&p.displayList!==this&&p.removeFromDisplayList(),p.parentContainer&&p.parentContainer.remove(p),p.displayList||(this.queueDepthSort(),p.displayList=this,p.emit(l.ADDED_TO_SCENE,p,this.scene),this.events.emit(h.ADDED_TO_SCENE,p,this.scene))},removeChildCallback:function(p){this.queueDepthSort(),p.displayList=null,p.emit(l.REMOVED_FROM_SCENE,p,this.scene),this.events.emit(h.REMOVED_FROM_SCENE,p,this.scene)},start:function(){this.events.once(h.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(r(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(p,a){return p._depth-a._depth},getChildren:function(){return this.list},shutdown:function(){for(var p=this.list,a=p.length;a--;)p[a]&&p[a].destroy(!0);p.length=0,this.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(h.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});u.register("DisplayList",o,"displayList"),m.exports=o},95643:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(53774),u=i(45893),l=i(50792),h=i(51708),r=i(44594),o=new d({Extends:l,initialize:function(a,v){l.call(this),this.scene=a,this.displayList=null,this.type=v,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(h.ADDED_TO_SCENE,this.addedToScene,this),this.on(h.REMOVED_FROM_SCENE,this.removedFromScene,this),a.sys.queueDepthSort()},setActive:function(p){return this.active=p,this},setName:function(p){return this.name=p,this},setState:function(p){return this.state=p,this},setDataEnabled:function(){return this.data||(this.data=new u(this)),this},setData:function(p,a){return this.data||(this.data=new u(this)),this.data.set(p,a),this},incData:function(p,a){return this.data||(this.data=new u(this)),this.data.inc(p,a),this},toggleData:function(p){return this.data||(this.data=new u(this)),this.data.toggle(p),this},getData:function(p){return this.data||(this.data=new u(this)),this.data.get(p)},setInteractive:function(p,a,v){return this.scene.sys.input.enable(this,p,a,v),this},disableInteractive:function(p){return p===void 0&&(p=!1),this.scene.sys.input.disable(this,p),this},removeInteractive:function(p){return p===void 0&&(p=!1),this.scene.sys.input.clear(this),p&&this.scene.sys.input.resetCursor(),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return S(this)},willRender:function(p){var a=this.displayList&&this.displayList.active?this.displayList.willRender(p):!0;return!(!a||o.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&p.id)},getIndexList:function(){for(var p=this,a=this.parentContainer,v=[];a&&(v.unshift(a.getIndex(p)),p=a,a.parentContainer);)a=a.parentContainer;return this.displayList?v.unshift(this.displayList.getIndex(p)):v.unshift(this.scene.sys.displayList.getIndex(p)),v},addToDisplayList:function(p){return p===void 0&&(p=this.scene.sys.displayList),this.displayList&&this.displayList!==p&&this.removeFromDisplayList(),p.exists(this)||(this.displayList=p,p.add(this,!0),p.queueDepthSort(),this.emit(h.ADDED_TO_SCENE,this,this.scene),p.events.emit(r.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var p=this.displayList||this.scene.sys.displayList;return p&&p.exists(this)&&(p.remove(this,!0),p.queueDepthSort(),this.displayList=null,this.emit(h.REMOVED_FROM_SCENE,this,this.scene),p.events.emit(r.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},getDisplayList:function(){var p=null;return this.parentContainer?p=this.parentContainer.list:this.displayList&&(p=this.displayList.list),p},destroy:function(p){!this.scene||this.ignoreDestroy||(p===void 0&&(p=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(h.DESTROY,this,p),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});o.RENDER_MASK=15,m.exports=o},44603:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(37277),u=i(44594),l=new d({initialize:function(r){this.scene=r,this.systems=r.sys,this.events=r.sys.events,this.displayList,this.updateList,this.events.once(u.BOOT,this.boot,this),this.events.on(u.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(u.DESTROY,this.destroy,this)},start:function(){this.events.once(u.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});l.register=function(h,r){l.prototype.hasOwnProperty(h)||(l.prototype[h]=r)},l.remove=function(h){l.prototype.hasOwnProperty(h)&&delete l.prototype[h]},S.register("GameObjectCreator",l,"make"),m.exports=l},39429:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(37277),u=i(44594),l=new d({initialize:function(r){this.scene=r,this.systems=r.sys,this.events=r.sys.events,this.displayList,this.updateList,this.events.once(u.BOOT,this.boot,this),this.events.on(u.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(u.DESTROY,this.destroy,this)},start:function(){this.events.once(u.SHUTDOWN,this.shutdown,this)},existing:function(h){return(h.renderCanvas||h.renderWebGL)&&this.displayList.add(h),h.preUpdate&&this.updateList.add(h),h},shutdown:function(){this.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});l.register=function(h,r){l.prototype.hasOwnProperty(h)||(l.prototype[h]=r)},l.remove=function(h){l.prototype.hasOwnProperty(h)&&delete l.prototype[h]},S.register("GameObjectFactory",l,"add"),m.exports=l},91296:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(61340),S=new d,u=new d,l=new d,h={camera:S,sprite:u,calc:l},r=function(o,p,a){var v=S,x=u,g=l;return x.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY),v.copyFrom(p.matrix),a?(v.multiplyWithOffset(a,-p.scrollX*o.scrollFactorX,-p.scrollY*o.scrollFactorY),x.e=o.x,x.f=o.y):(x.e-=p.scrollX*o.scrollFactorX,x.f-=p.scrollY*o.scrollFactorY),v.multiply(x,g),h};m.exports=r},45027:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(25774),u=i(37277),l=i(44594),h=new d({Extends:S,initialize:function(o){S.call(this),this.checkQueue=!0,this.scene=o,this.systems=o.sys,o.sys.events.once(l.BOOT,this.boot,this),o.sys.events.on(l.START,this.start,this)},boot:function(){this.systems.events.once(l.DESTROY,this.destroy,this)},start:function(){var r=this.systems.events;r.on(l.PRE_UPDATE,this.update,this),r.on(l.UPDATE,this.sceneUpdate,this),r.once(l.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(r,o){for(var p=this._active,a=p.length,v=0;v<a;v++){var x=p[v];x.active&&x.preUpdate.call(x,r,o)}},shutdown:function(){for(var r=this._active.length;r--;)this._active[r].destroy(!0);for(r=this._pending.length;r--;)this._pending[r].destroy(!0);for(r=this._destroy.length;r--;)this._destroy[r].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var o=this.systems.events;o.off(l.PRE_UPDATE,this.update,this),o.off(l.UPDATE,this.sceneUpdate,this),o.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(l.START,this.start,this),this.scene=null,this.systems=null}});u.register("UpdateList",h,"updateList"),m.exports=h},3217:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u,l,h,r,o,p,a,v,x,g,y,T){var P=S.x-d.displayOriginX+l,A=S.y-d.displayOriginY+h,b=P+S.w,O=A+S.h,D=r.a,B=r.b,G=r.c,V=r.d,k=r.e,U=r.f,W=P*D+A*G+k,X=P*B+A*V+U,_=P*D+O*G+k,Q=P*B+O*V+U,j=b*D+O*G+k,it=b*B+O*V+U,K=b*D+A*G+k,J=b*B+A*V+U;o&&(W=Math.round(W),X=Math.round(X),_=Math.round(_),Q=Math.round(Q),j=Math.round(j),it=Math.round(it),K=Math.round(K),J=Math.round(J)),i.batchQuad(d,W,X,_,Q,j,it,K,J,u.u0,u.v0,u.u1,u.v1,p,a,v,x,g,y,T)};m.exports=E},53048:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){if(S===void 0&&(S=!1),u===void 0)return u={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},u;var l=i.text,h=l.length,r=i.maxWidth,o=i.wordWrapCharCode,p=Number.MAX_VALUE,a=Number.MAX_VALUE,v=0,x=0,g=i.fontData.chars,y=i.fontData.lineHeight,T=i.letterSpacing,P=i.lineSpacing,A=0,b=0,O=0,D=null,B=i._align,G=0,V=0,k=i.fontSize/i.fontData.size,U=k*i.scaleX,W=k*i.scaleY,X=null,_=0,Q=[],j=Number.MAX_VALUE,it=0,K=0,J=0,Y,q,$,et=[],rt=[],at=null,lt=function(Yt,ee){for(var $t=0,kt=0;kt<Yt.length;kt++){var Vt=Yt.charCodeAt(kt),ne=ee.chars[Vt];ne&&($t+=ne.xAdvance)}return $t*U};if(r>0){$=l.split(`
`);var vt=[];for(Y=0;Y<$.length;Y++){var xt=$[Y],ut="",mt="",Tt="",bt="";for(q=0;q<xt.length;q++)if(O=xt.charCodeAt(q),ut+=xt[q],O===o||q===xt.length-1){bt=Tt+ut;var St=lt(bt,i.fontData);St<=r?Tt=bt:(mt=mt.slice(0,-1),mt+=(mt?`
`:"")+Tt,Tt=ut),ut=""}mt=mt.slice(0,-1),mt+=(mt?`
`:"")+Tt,vt.push(mt)}l=vt.join(`
`),u.wrappedText=l,h=l.length}var Gt=0;for(Y=0;Y<h;Y++){if(O=l.charCodeAt(Y),O===10){at!==null&&(et.push({word:at.word,i:at.i,x:at.x*U,y:at.y*W,w:at.w*U,h:at.h*W}),at=null),X=null,Q[K]=J,J>it&&(it=J),J<j&&(j=J),K++,J=0,A=0,b=(y+P)*K;continue}if(D=g[O],!!D){if(G=A,V=b,X!==null){var Nt=D.kerning[_];G+=Nt!==void 0?Nt:0}p>G&&(p=G),a>V&&(a=V);var zt=G+D.xAdvance,Lt=V+y;v<zt&&(v=zt),x<Lt&&(x=Lt);var ct=D.xOffset+D.xAdvance+(Nt!==void 0?Nt:0);O===o?at!==null&&(et.push({word:at.word,i:at.i,x:at.x*U,y:at.y*W,w:at.w*U,h:at.h*W}),at=null):(at===null&&(at={word:"",i:Gt,x:A,y:b,w:0,h:y}),at.word=at.word.concat(l[Y]),at.w+=ct),rt.push({i:Gt,idx:Y,char:l[Y],code:O,x:(D.xOffset+G)*k,y:(D.yOffset+b)*k,w:D.width*k,h:D.height*k,t:b*k,r:zt*k,b:y*k,line:K,glyph:D}),A+=D.xAdvance+T+(Nt!==void 0?Nt:0),X=D,_=O,J=zt*k,Gt++}}if(at!==null&&et.push({word:at.word,i:at.i,x:at.x*U,y:at.y*W,w:at.w*U,h:at.h*W}),Q[K]=J,J>it&&(it=J),J<j&&(j=J),B>0)for(var ot=0;ot<rt.length;ot++){var Mt=rt[ot];if(B===1){var Ot=(it-Q[Mt.line])/2;Mt.x+=Ot,Mt.r+=Ot}else if(B===2){var Ut=it-Q[Mt.line];Mt.x+=Ut,Mt.r+=Ut}}var Rt=u.local,_t=u.global;return $=u.lines,Rt.x=p*k,Rt.y=a*k,Rt.width=v*k,Rt.height=x*k,_t.x=i.x-i._displayOriginX+p*U,_t.y=i.y-i._displayOriginY+a*W,_t.width=v*U,_t.height=x*W,$.shortest=j,$.longest=it,$.lengths=Q,d&&(Rt.x=Math.ceil(Rt.x),Rt.y=Math.ceil(Rt.y),Rt.width=Math.ceil(Rt.width),Rt.height=Math.ceil(Rt.height),_t.x=Math.ceil(_t.x),_t.y=Math.ceil(_t.y),_t.width=Math.ceil(_t.width),_t.height=Math.ceil(_t.height),$.shortest=Math.ceil(j),$.longest=Math.ceil(it)),S&&(i._displayOriginX=i.originX*Rt.width,i._displayOriginY=i.originY*Rt.height,_t.x=i.x-i._displayOriginX*i.scaleX,_t.y=i.y-i._displayOriginY*i.scaleY,d&&(_t.x=Math.ceil(_t.x),_t.y=Math.ceil(_t.y))),u.words=et,u.characters=rt,u.lines.height=y,u.scale=k,u.scaleX=i.scaleX,u.scaleY=i.scaleY,u};m.exports=E},61327:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(21859),S=function(u,l,h,r,o,p,a){var v=u.sys.textures.get(h),x=v.get(r),g=u.sys.cache.xml.get(o);if(x&&g){var y=d(g,x,p,a,v);return u.sys.cache.bitmapFont.add(l,{data:y,texture:h,frame:r,fromAtlas:!0}),!0}else return!1};m.exports=S},6925:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(35154),S=function(u,l){var h=l.width,r=l.height,o=Math.floor(h/2),p=Math.floor(r/2),a=d(l,"chars","");if(a!==""){var v=d(l,"image",""),x=u.sys.textures.getFrame(v),g=x.cutX,y=x.cutY,T=x.source.width,P=x.source.height,A=d(l,"offset.x",0),b=d(l,"offset.y",0),O=d(l,"spacing.x",0),D=d(l,"spacing.y",0),B=d(l,"lineSpacing",0),G=d(l,"charsPerRow",null);G===null&&(G=T/h,G>a.length&&(G=a.length));for(var V=A,k=b,U={retroFont:!0,font:v,size:h,lineHeight:r+B,chars:{}},W=0,X=0;X<a.length;X++){var _=a.charCodeAt(X),Q=(g+V)/T,j=(y+k)/P,it=(g+V+h)/T,K=(y+k+r)/P;U.chars[_]={x:V,y:k,width:h,height:r,centerX:o,centerY:p,xOffset:0,yOffset:0,xAdvance:h,data:{},kerning:{},u0:Q,v0:j,u1:it,v1:K},W++,W===G?(W=0,V=A,k+=r+D):V+=h+O}var J={data:U,frame:null,texture:v};return J}};m.exports=S},21859:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function E(d,S){return parseInt(d.getAttribute(S),10)}var i=function(d,S,u,l,h){u===void 0&&(u=0),l===void 0&&(l=0);var r=S.cutX,o=S.cutY,p=S.source.width,a=S.source.height,v=S.sourceIndex,x={},g=d.getElementsByTagName("info")[0],y=d.getElementsByTagName("common")[0];x.font=g.getAttribute("face"),x.size=E(g,"size"),x.lineHeight=E(y,"lineHeight")+l,x.chars={};var T=d.getElementsByTagName("char"),P=S!==void 0&&S.trimmed;if(P)var A=S.height,b=S.width;for(var O=0;O<T.length;O++){var D=T[O],B=E(D,"id"),G=String.fromCharCode(B),V=E(D,"x"),k=E(D,"y"),U=E(D,"width"),W=E(D,"height");P&&(V<b&&(b=V),k<A&&(A=k)),P&&A!==0&&b!==0&&(V-=S.x,k-=S.y);var X=(r+V)/p,_=(o+k)/a,Q=(r+V+U)/p,j=(o+k+W)/a;if(x.chars[B]={x:V,y:k,width:U,height:W,centerX:Math.floor(U/2),centerY:Math.floor(W/2),xOffset:E(D,"xoffset"),yOffset:E(D,"yoffset"),xAdvance:E(D,"xadvance")+u,data:{},kerning:{},u0:X,v0:_,u1:Q,v1:j},h&&U!==0&&W!==0){var it=h.add(G,v,V,k,U,W);it&&it.setUVs(U,W,X,_,Q,j)}}var K=d.getElementsByTagName("kerning");for(O=0;O<K.length;O++){var J=K[O],Y=E(J,"first"),q=E(J,"second"),$=E(J,"amount");x.chars[q].kerning[Y]=$}return x};m.exports=i},196:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87662),S=i(79291),u={Parse:i(6925)};u=S(!1,u,d),m.exports=u},87662:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};m.exports=E},2638:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(22186),S=i(83419),u=i(12310),l=new S({Extends:d,Mixins:[u],initialize:function(r,o,p,a,v,x,g){d.call(this,r,o,p,a,v,x,g),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(h,r){return this.cropWidth=h,this.cropHeight=r,this},setDisplayCallback:function(h){return this.displayCallback=h,this},setScrollX:function(h){return this.scrollX=h,this},setScrollY:function(h){return this.scrollY=h,this}});m.exports=l},86741:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(20926),S=function(u,l,h,r){var o=l._text,p=o.length,a=u.currentContext;if(!(p===0||!d(u,a,l,h,r))){h.addToRenderList(l);var v=l.fromAtlas?l.frame:l.texture.frames.__BASE,x=l.displayCallback,g=l.callbackData,y=l.fontData.chars,T=l.fontData.lineHeight,P=l._letterSpacing,A=0,b=0,O=0,D=null,B=0,G=0,V=0,k=0,U=0,W=0,X=null,_=0,Q=l.frame.source.image,j=v.cutX,it=v.cutY,K=0,J=0,Y=l._fontSize/l.fontData.size,q=l._align,$=0,et=0;l.getTextBounds(!1);var rt=l._bounds.lines;q===1?et=(rt.longest-rt.lengths[0])/2:q===2&&(et=rt.longest-rt.lengths[0]),a.translate(-l.displayOriginX,-l.displayOriginY);var at=h.roundPixels;l.cropWidth>0&&l.cropHeight>0&&(a.beginPath(),a.rect(0,0,l.cropWidth,l.cropHeight),a.clip());for(var lt=0;lt<p;lt++){if(J=Y,K=0,O=o.charCodeAt(lt),O===10){$++,q===1?et=(rt.longest-rt.lengths[$])/2:q===2&&(et=rt.longest-rt.lengths[$]),A=0,b+=T,X=null;continue}if(D=y[O],!!D){if(B=j+D.x,G=it+D.y,V=D.width,k=D.height,U=D.xOffset+A-l.scrollX,W=D.yOffset+b-l.scrollY,X!==null){var vt=D.kerning[_];U+=vt!==void 0?vt:0}if(x){g.index=lt,g.charCode=O,g.x=U,g.y=W,g.scale=J,g.rotation=K,g.data=D.data;var xt=x(g);U=xt.x,W=xt.y,J=xt.scale,K=xt.rotation}U*=J,W*=J,U+=et,A+=D.xAdvance+P+(vt!==void 0?vt:0),X=D,_=O,!(V===0||k===0||O===32)&&(at&&(U=Math.round(U),W=Math.round(W)),a.save(),a.translate(U,W),a.rotate(K),a.scale(J,J),a.drawImage(Q,B,G,V,k,0,0,V,k),a.restore())}}a.restore()}};m.exports=S},11164:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2638),S=i(25305),u=i(44603),l=i(23568);u.register("dynamicBitmapText",function(h,r){h===void 0&&(h={});var o=l(h,"font",""),p=l(h,"text",""),a=l(h,"size",!1),v=new d(this.scene,0,0,o,p,a);return r!==void 0&&(h.add=r),S(this.scene,v,h),v})},72566:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2638),S=i(39429);S.register("dynamicBitmapText",function(u,l,h,r,o){return this.displayList.add(new d(this.scene,u,l,h,r,o))})},12310:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(73482),u=i(86741),m.exports={renderWebGL:S,renderCanvas:u}},73482:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),S=i(61340),u=i(70554),l=new S,h=function(r,o,p,a){var v=o.text,x=v.length;if(x!==0){p.addToRenderList(o);var g=r.pipelines.set(o.pipeline,o),y=d(o,p,a);r.pipelines.preBatch(o);var T=y.sprite,P=y.calc,A=l,b=o.cropWidth>0||o.cropHeight>0;b&&(g.flush(),r.pushScissor(P.tx,P.ty,o.cropWidth*P.scaleX,o.cropHeight*P.scaleY));var O=o.frame,D=O.glTexture,B=o.tintFill,G=u.getTintAppendFloatAlpha(o.tintTopLeft,p.alpha*o._alphaTL),V=u.getTintAppendFloatAlpha(o.tintTopRight,p.alpha*o._alphaTR),k=u.getTintAppendFloatAlpha(o.tintBottomLeft,p.alpha*o._alphaBL),U=u.getTintAppendFloatAlpha(o.tintBottomRight,p.alpha*o._alphaBR),W=g.setGameObject(o),X=0,_=0,Q=0,j=0,it=o.letterSpacing,K,J=0,Y=0,q,$=o.scrollX,et=o.scrollY,rt=o.fontData,at=rt.chars,lt=rt.lineHeight,vt=o.fontSize/rt.size,xt=0,ut=o._align,mt=0,Tt=0,bt=o.getTextBounds(!1);o.maxWidth>0&&(v=bt.wrappedText,x=v.length);var St=o._bounds.lines;ut===1?Tt=(St.longest-St.lengths[0])/2:ut===2&&(Tt=St.longest-St.lengths[0]);for(var Gt=p.roundPixels,Nt=o.displayCallback,zt=o.callbackData,Lt=0;Lt<x;Lt++){if(Q=v.charCodeAt(Lt),Q===10){mt++,ut===1?Tt=(St.longest-St.lengths[mt])/2:ut===2&&(Tt=St.longest-St.lengths[mt]),X=0,_+=lt,q=null;continue}if(K=at[Q],!!K){J=K.width,Y=K.height;var ct=K.xOffset+X-$,ot=K.yOffset+_-et;if(q!==null){var Mt=K.kerning[j]||0;ct+=Mt,X+=Mt}if(X+=K.xAdvance+it,q=K,j=Q,!(J===0||Y===0||Q===32)){if(vt=o.fontSize/o.fontData.size,xt=0,Nt){zt.color=0,zt.tint.topLeft=G,zt.tint.topRight=V,zt.tint.bottomLeft=k,zt.tint.bottomRight=U,zt.index=Lt,zt.charCode=Q,zt.x=ct,zt.y=ot,zt.scale=vt,zt.rotation=xt,zt.data=K.data;var Ot=Nt(zt);ct=Ot.x,ot=Ot.y,vt=Ot.scale,xt=Ot.rotation,Ot.color?(G=Ot.color,V=Ot.color,k=Ot.color,U=Ot.color):(G=Ot.tint.topLeft,V=Ot.tint.topRight,k=Ot.tint.bottomLeft,U=Ot.tint.bottomRight),G=u.getTintAppendFloatAlpha(G,p.alpha*o._alphaTL),V=u.getTintAppendFloatAlpha(V,p.alpha*o._alphaTR),k=u.getTintAppendFloatAlpha(k,p.alpha*o._alphaBL),U=u.getTintAppendFloatAlpha(U,p.alpha*o._alphaBR)}ct*=vt,ot*=vt,ct-=o.displayOriginX,ot-=o.displayOriginY,ct+=Tt,A.applyITRS(ct,ot,xt,vt,vt),P.multiply(A,T);var Ut=K.u0,Rt=K.v0,_t=K.u1,Yt=K.v1,ee=J,$t=Y,kt=T.e,Vt=T.f,ne=$t*T.c+T.e,le=$t*T.d+T.f,te=ee*T.a+$t*T.c+T.e,xe=ee*T.b+$t*T.d+T.f,Ct=ee*T.a+T.e,jt=ee*T.b+T.f;Gt&&(kt=Math.round(kt),Vt=Math.round(Vt),ne=Math.round(ne),le=Math.round(le),te=Math.round(te),xe=Math.round(xe),Ct=Math.round(Ct),jt=Math.round(jt)),g.shouldFlush(6)&&(g.flush(),W=g.setGameObject(o)),g.batchQuad(o,kt,Vt,ne,le,te,xe,Ct,jt,Ut,Rt,_t,Yt,G,V,k,U,B,D,W)}}}b&&(g.flush(),r.popScissor()),r.pipelines.postBatch(o)}};m.exports=h},22186:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(45319),u=i(31401),l=i(95643),h=i(53048),r=i(61327),o=i(21859),p=i(87841),a=i(18658),v=new d({Extends:l,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Texture,u.Tint,u.Transform,u.Visible,a],initialize:function(g,y,T,P,A,b,O){A===void 0&&(A=""),O===void 0&&(O=0),l.call(this,g,"BitmapText"),this.font=P;var D=this.scene.sys.cache.bitmapFont.get(P);if(!D)throw new Error("Invalid BitmapText key: "+P);this.fontData=D.data,this._text="",this._fontSize=b||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=O,this._bounds=h(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=D.fromAtlas,this.setTexture(D.texture,D.frame),this.setPosition(y,T),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(A)},setLeftAlign:function(){return this._align=v.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=v.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=v.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(x){return this._fontSize=x,this._dirty=!0,this},setLetterSpacing:function(x){return x===void 0&&(x=0),this._letterSpacing=x,this._dirty=!0,this},setLineSpacing:function(x){return x===void 0&&(x=0),this.lineSpacing=x,this},setText:function(x){return!x&&x!==0&&(x=""),Array.isArray(x)&&(x=x.join(`
`)),x!==this.text&&(this._text=x.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(x,g,y,T){return x===void 0&&(x=0),g===void 0&&(g=0),y===void 0&&(y=0),T===void 0&&(T=.5),this.dropShadowX=x,this.dropShadowY=g,this.dropShadowColor=y,this.dropShadowAlpha=T,this},setCharacterTint:function(x,g,y,T,P,A,b){x===void 0&&(x=0),g===void 0&&(g=1),y===void 0&&(y=!1),T===void 0&&(T=-1),P===void 0&&(P=T,A=T,b=T);var O=this.text.length;g===-1&&(g=O),x<0&&(x=O+x),x=S(x,0,O-1);for(var D=S(x+g,x,O),B=this.charColors,G=x;G<D;G++){var V=B[G];if(T===-1)B[G]=null;else{var k=y?1:0;V?(V.tintEffect=k,V.tintTL=T,V.tintTR=P,V.tintBL=A,V.tintBR=b):B[G]={tintEffect:k,tintTL:T,tintTR:P,tintBL:A,tintBR:b}}}return this},setWordTint:function(x,g,y,T,P,A,b){g===void 0&&(g=1);for(var O=this.getTextBounds(),D=O.words,B=typeof x=="number",G=0,V=0;V<D.length;V++){var k=D[V];if((B&&V===x||!B&&k.word===x)&&(this.setCharacterTint(k.i,k.word.length,y,T,P,A,b),G++,G===g))return this}return this},getTextBounds:function(x){var g=this._bounds;return(this._dirty||x||this.scaleX!==g.scaleX||this.scaleY!==g.scaleY)&&(h(this,x,!0,g),this._dirty=!1),g},getCharacterAt:function(x,g,y){for(var T=this.getLocalPoint(x,g,null,y),P=this.getTextBounds(),A=P.characters,b=new p,O=0;O<A.length;O++){var D=A[O];if(b.setTo(D.x,D.t,D.r-D.x,D.b),b.contains(T.x,T.y))return D}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(x,g,y){g===void 0&&(g=this._fontSize),y===void 0&&(y=this._align);var T=this.scene.sys.cache.bitmapFont.get(x);return T&&(this.font=x,this.fontData=T.data,this._fontSize=g,this._align=y,this.fromAtlas=T.fromAtlas===!0,this.setTexture(T.texture,T.frame),h(this,!1,!0,this._bounds)),this},setMaxWidth:function(x,g){return this._maxWidth=x,this._dirty=!0,g!==void 0&&(this.wordWrapCharCode=g),this},setDisplaySize:function(x,g){this.setScale(1,1),this.getTextBounds(!1);var y=x/this.width,T=g/this.height;return this.setScale(y,T),this},align:{set:function(x){this._align=x,this._dirty=!0},get:function(){return this._align}},text:{set:function(x){this.setText(x)},get:function(){return this._text}},fontSize:{set:function(x){this._fontSize=x,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(x){this._letterSpacing=x,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(x){this._lineSpacing=x,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(x){this._maxWidth=x,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{set:function(x){this.setScaleX(1),this.getTextBounds(!1);var g=x/this.width;this.setScaleX(g)},get:function(){return this.width}},displayHeight:{set:function(x){this.setScaleY(1),this.getTextBounds(!1);var g=x/this.height;this.setScaleY(g)},get:function(){return this.height}},toJSON:function(){var x=u.ToJSON(this),g={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return x.data=g,x},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});v.ALIGN_LEFT=0,v.ALIGN_CENTER=1,v.ALIGN_RIGHT=2,v.ParseFromAtlas=r,v.ParseXMLBitmapFont=o,m.exports=v},37289:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(20926),S=function(u,l,h,r){var o=l._text,p=o.length,a=u.currentContext;if(!(p===0||!d(u,a,l,h,r))){h.addToRenderList(l);var v=l.fromAtlas?l.frame:l.texture.frames.__BASE,x=l.fontData.chars,g=l.fontData.lineHeight,y=l._letterSpacing,T=l._lineSpacing,P=0,A=0,b=0,O=null,D=0,B=0,G=0,V=0,k=0,U=0,W=null,X=0,_=v.source.image,Q=v.cutX,j=v.cutY,it=l._fontSize/l.fontData.size,K=l._align,J=0,Y=0,q=l.getTextBounds(!1);l.maxWidth>0&&(o=q.wrappedText,p=o.length);var $=l._bounds.lines;K===1?Y=($.longest-$.lengths[0])/2:K===2&&(Y=$.longest-$.lengths[0]),a.translate(-l.displayOriginX,-l.displayOriginY);for(var et=h.roundPixels,rt=0;rt<p;rt++){if(b=o.charCodeAt(rt),b===10){J++,K===1?Y=($.longest-$.lengths[J])/2:K===2&&(Y=$.longest-$.lengths[J]),P=0,A+=g+T,W=null;continue}if(O=x[b],!!O){if(D=Q+O.x,B=j+O.y,G=O.width,V=O.height,k=O.xOffset+P,U=O.yOffset+A,W!==null){var at=O.kerning[X];k+=at!==void 0?at:0}k*=it,U*=it,k+=Y,P+=O.xAdvance+y+(at!==void 0?at:0),W=O,X=b,!(G===0||V===0||b===32)&&(et&&(k=Math.round(k),U=Math.round(U)),a.save(),a.translate(k,U),a.scale(it,it),a.drawImage(_,D,B,G,V,0,0,G,V),a.restore())}}a.restore()}};m.exports=S},57336:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(22186),S=i(25305),u=i(44603),l=i(23568),h=i(35154);u.register("bitmapText",function(r,o){r===void 0&&(r={});var p=h(r,"font",""),a=l(r,"text",""),v=l(r,"size",!1),x=h(r,"align",0),g=new d(this.scene,0,0,p,a,v,x);return o!==void 0&&(r.add=o),S(this.scene,g,r),g})},34914:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(22186),S=i(39429);S.register("bitmapText",function(u,l,h,r,o,p){return this.displayList.add(new d(this.scene,u,l,h,r,o,p))})},18658:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(33590),u=i(37289),m.exports={renderWebGL:S,renderCanvas:u}},33590:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(3217),S=i(91296),u=i(70554),l=function(h,r,o,p){var a=r._text,v=a.length;if(v!==0){o.addToRenderList(r);var x=h.pipelines.set(r.pipeline,r),g=S(r,o,p).calc;h.pipelines.preBatch(r);var y=o.roundPixels,T=o.alpha,P=r.charColors,A=r.tintFill,b=u.getTintAppendFloatAlpha,O=b(r.tintTopLeft,T*r._alphaTL),D=b(r.tintTopRight,T*r._alphaTR),B=b(r.tintBottomLeft,T*r._alphaBL),G=b(r.tintBottomRight,T*r._alphaBR),V=r.frame.glTexture,k=x.setGameObject(r),U=r.getTextBounds(!1),W,X,_,Q=U.characters,j=r.dropShadowX,it=r.dropShadowY,K=j!==0||it!==0;if(K){var J=r.dropShadowColor,Y=r.dropShadowAlpha,q=b(J,T*Y*r._alphaTL),$=b(J,T*Y*r._alphaTR),et=b(J,T*Y*r._alphaBL),rt=b(J,T*Y*r._alphaBR);for(W=0;W<Q.length;W++)X=Q[W],_=X.glyph,!(X.code===32||_.width===0||_.height===0)&&d(x,r,X,_,j,it,g,y,q,$,et,rt,1,V,k)}for(W=0;W<Q.length;W++)if(X=Q[W],_=X.glyph,!(X.code===32||_.width===0||_.height===0))if(x.shouldFlush(6)&&(x.flush(),k=x.setGameObject(r)),P[X.i]){var at=P[X.i],lt=at.tintEffect,vt=b(at.tintTL,T*r._alphaTL),xt=b(at.tintTR,T*r._alphaTR),ut=b(at.tintBL,T*r._alphaBL),mt=b(at.tintBR,T*r._alphaBR);d(x,r,X,_,0,0,g,y,vt,xt,ut,mt,lt,V,k)}else d(x,r,X,_,0,0,g,y,O,D,B,G,A,V,k);h.pipelines.postBatch(r)}};m.exports=l},6107:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(48011),S=i(46590),u=i(83419),l=i(31401),h=i(4327),r=i(95643),o=i(73162),p=new u({Extends:r,Mixins:[l.Alpha,l.BlendMode,l.Depth,l.Mask,l.Pipeline,l.PostPipeline,l.ScrollFactor,l.Size,l.Texture,l.Transform,l.Visible,d],initialize:function(v,x,g,y,T){r.call(this,v,"Blitter"),this.setTexture(y,T),this.setPosition(x,g),this.initPipeline(),this.initPostPipeline(),this.children=new o,this.renderList=[],this.dirty=!1},create:function(a,v,x,g,y){g===void 0&&(g=!0),y===void 0&&(y=this.children.length),x===void 0?x=this.frame:x instanceof h||(x=this.texture.get(x));var T=new S(this,a,v,x,g);return this.children.addAt(T,y,!1),this.dirty=!0,T},createFromCallback:function(a,v,x,g){for(var y=this.createMultiple(v,x,g),T=0;T<y.length;T++){var P=y[T];a.call(this,P,T)}return y},createMultiple:function(a,v,x){v===void 0&&(v=this.frame.name),x===void 0&&(x=!0),Array.isArray(v)||(v=[v]);var g=[],y=this;return v.forEach(function(T){for(var P=0;P<a;P++)g.push(y.create(0,0,T,x))}),g},childCanRender:function(a){return a.visible&&a.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});m.exports=p},72396:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){var l=d.getRenderList();if(l.length!==0){var h=i.currentContext,r=S.alpha*d.alpha;if(r!==0){S.addToRenderList(d),h.globalCompositeOperation=i.blendModes[d.blendMode],h.imageSmoothingEnabled=!d.frame.source.scaleMode;var o=d.x-S.scrollX*d.scrollFactorX,p=d.y-S.scrollY*d.scrollFactorY;h.save(),u&&u.copyToContext(h);for(var a=S.roundPixels,v=0;v<l.length;v++){var x=l[v],g=x.flipX||x.flipY,y=x.frame,T=y.canvasData,P=y.x,A=y.y,b=1,O=1,D=x.alpha*r;D!==0&&(h.globalAlpha=D,g?(x.flipX&&(b=-1,P-=T.width),x.flipY&&(O=-1,A-=T.height),T.width>0&&T.height>0&&(h.save(),h.translate(x.x+o,x.y+p),h.scale(b,O),h.drawImage(y.source.image,T.x,T.y,T.width,T.height,P,A,T.width,T.height),h.restore())):(a&&(P=Math.round(P),A=Math.round(A)),T.width>0&&T.height>0&&h.drawImage(y.source.image,T.x,T.y,T.width,T.height,P+x.x+o,A+x.y+p,T.width,T.height)))}h.restore()}}};m.exports=E},9403:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(6107),S=i(25305),u=i(44603),l=i(23568);u.register("blitter",function(h,r){h===void 0&&(h={});var o=l(h,"key",null),p=l(h,"frame",null),a=new d(this.scene,0,0,o,p);return r!==void 0&&(h.add=r),S(this.scene,a,h),a})},12709:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(6107),S=i(39429);S.register("blitter",function(u,l,h,r){return this.displayList.add(new d(this.scene,u,l,h,r))})},48011:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(99485),u=i(72396),m.exports={renderWebGL:S,renderCanvas:u}},99485:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(61340),S=i(70554),u=new d,l=function(h,r,o,p){var a=r.getRenderList(),v=o.alpha*r.alpha;if(!(a.length===0||v===0)){o.addToRenderList(r);var x=h.pipelines.set(this.pipeline,r),g=o.scrollX*r.scrollFactorX,y=o.scrollY*r.scrollFactorY,T=u.copyFrom(o.matrix);p&&(T.multiplyWithOffset(p,-g,-y),g=0,y=0);var P=r.x-g,A=r.y-y,b=-1,O=!1,D=o.roundPixels;h.pipelines.preBatch(r);for(var B=0;B<a.length;B++){var G=a[B],V=G.frame,k=G.alpha*v;if(k!==0){var U=V.width,W=V.height,X=P+G.x+V.x,_=A+G.y+V.y;G.flipX&&(U*=-1,X+=V.width),G.flipY&&(W*=-1,_+=V.height);var Q=T.setQuad(X,_,X+U,_+W,D),j=S.getTintAppendFloatAlpha(G.tint,k);if(V.sourceIndex!==b){var it=x.setGameObject(r,V);b=V.sourceIndex}x.batchQuad(r,Q[0],Q[1],Q[2],Q[3],Q[4],Q[5],Q[6],Q[7],V.u0,V.v0,V.u1,V.v1,j,j,j,j,O,V.glTexture,it)&&(b=-1)}}h.pipelines.postBatch(r)}};m.exports=l},46590:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(4327),u=new d({initialize:function(h,r,o,p,a){this.parent=h,this.x=r,this.y=o,this.frame=p,this.data={},this.tint=16777215,this._visible=a,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(l){return l===void 0?this.frame=this.parent.frame:l instanceof S&&l.texture===this.parent.texture?this.frame=l:this.frame=this.parent.texture.get(l),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(l,h,r){return this.x=l,this.y=h,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,r&&this.setFrame(r),this},setPosition:function(l,h){return this.x=l,this.y=h,this},setFlipX:function(l){return this.flipX=l,this},setFlipY:function(l){return this.flipY=l,this},setFlip:function(l,h){return this.flipX=l,this.flipY=h,this},setVisible:function(l){return this.visible=l,this},setAlpha:function(l){return this.alpha=l,this},setTint:function(l){return this.tint=l,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(l){this.parent.dirty|=this._visible!==l,this._visible=l}},alpha:{get:function(){return this._alpha},set:function(l){this.parent.dirty|=this._alpha>0!=l>0,this._alpha=l}}});m.exports=u},16005:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45319),S=2,u={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(l,h,r,o){return l===void 0&&(l=1),h===void 0?this.alpha=l:(this._alphaTL=d(l,0,1),this._alphaTR=d(h,0,1),this._alphaBL=d(r,0,1),this._alphaBR=d(o,0,1)),this},alpha:{get:function(){return this._alpha},set:function(l){var h=d(l,0,1);this._alpha=h,this._alphaTL=h,this._alphaTR=h,this._alphaBL=h,this._alphaBR=h,h===0?this.renderFlags&=~S:this.renderFlags|=S}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(l){var h=d(l,0,1);this._alphaTL=h,h!==0&&(this.renderFlags|=S)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(l){var h=d(l,0,1);this._alphaTR=h,h!==0&&(this.renderFlags|=S)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(l){var h=d(l,0,1);this._alphaBL=h,h!==0&&(this.renderFlags|=S)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(l){var h=d(l,0,1);this._alphaBR=h,h!==0&&(this.renderFlags|=S)}}};m.exports=u},88509:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45319),S=2,u={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(l){return l===void 0&&(l=1),this.alpha=l,this},alpha:{get:function(){return this._alpha},set:function(l){var h=d(l,0,1);this._alpha=h,h===0?this.renderFlags&=~S:this.renderFlags|=S}}};m.exports=u},90065:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(10312),S={_blendMode:d.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(u){typeof u=="string"&&(u=d[u]),u|=0,u>=-1&&(this._blendMode=u)}},setBlendMode:function(u){return this.blendMode=u,this}};m.exports=S},94215:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(i){this.scaleX=i/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(i){this.scaleY=i/this.height}},setSize:function(i,d){return this.width=i,this.height=d,this},setDisplaySize:function(i,d){return this.displayWidth=i,this.displayHeight=d,this}};m.exports=E},61683:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={texture:null,frame:null,isCropped:!1,setCrop:function(i,d,S,u){if(i===void 0)this.isCropped=!1;else if(this.frame){if(typeof i=="number")this.frame.setCropUVs(this._crop,i,d,S,u,this.flipX,this.flipY);else{var l=i;this.frame.setCropUVs(this._crop,l.x,l.y,l.width,l.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};m.exports=E},89272:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(37105),S={_depth:0,depth:{get:function(){return this._depth},set:function(u){this.displayList&&this.displayList.queueDepthSort(),this._depth=u}},setDepth:function(u){return u===void 0&&(u=0),this.depth=u,this},setToTop:function(){var u=this.getDisplayList();return u&&d.BringToTop(u,this),this},setToBack:function(){var u=this.getDisplayList();return u&&d.SendToBack(u,this),this},setAbove:function(u){var l=this.getDisplayList();return l&&u&&d.MoveAbove(l,this,u),this},setBelow:function(u){var l=this.getDisplayList();return l&&u&&d.MoveBelow(l,this,u),this}};m.exports=S},47059:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(66064),u=i(19133),l=new d({initialize:function(r,o){this.gameObject=r,this.isPost=o,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(h){return h===void 0&&(h=0),this.padding=h,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(h){if(!this.isPost){var r=this.gameObject.scene.sys.renderer;r&&r.pipelines?(this.gameObject.pipeline=r.pipelines.FX_PIPELINE,h!==void 0&&(this.padding=h),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var h=this.list,r=0;r<h.length;r++)h[r].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(h){var r;if(this.isPost){var o=this.gameObject.getPostPipeline(String(h.type));for(Array.isArray(o)||(o=[o]),r=0;r<o.length;r++){var p=o[r];if(p.controller===h){this.gameObject.removePostPipeline(p),h.destroy();break}}}else{var a=this.list;for(r=0;r<a.length;r++)a[r]===h&&(u(a,r),h.destroy())}return this.gameObject},disable:function(h){return h===void 0&&(h=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,h&&this.clear(),this.gameObject},add:function(h,r){if(this.isPost){var o=String(h.type);this.gameObject.setPostPipeline(o,r);var p=this.gameObject.getPostPipeline(o);if(p)return Array.isArray(p)&&(p=p.pop()),p&&(p.controller=h),h}else return this.enabled||this.enable(),this.list.push(h),h},addGlow:function(h,r,o,p,a,v){return this.add(new S.Glow(this.gameObject,h,r,o,p),{quality:a,distance:v})},addShadow:function(h,r,o,p,a,v,x){return this.add(new S.Shadow(this.gameObject,h,r,o,p,a,v,x))},addPixelate:function(h){return this.add(new S.Pixelate(this.gameObject,h))},addVignette:function(h,r,o,p){return this.add(new S.Vignette(this.gameObject,h,r,o,p))},addShine:function(h,r,o,p){return this.add(new S.Shine(this.gameObject,h,r,o,p))},addBlur:function(h,r,o,p,a,v){return this.add(new S.Blur(this.gameObject,h,r,o,p,a,v))},addGradient:function(h,r,o,p,a,v,x,g){return this.add(new S.Gradient(this.gameObject,h,r,o,p,a,v,x,g))},addBloom:function(h,r,o,p,a,v){return this.add(new S.Bloom(this.gameObject,h,r,o,p,a,v))},addColorMatrix:function(){return this.add(new S.ColorMatrix(this.gameObject))},addCircle:function(h,r,o,p,a){return this.add(new S.Circle(this.gameObject,h,r,o,p,a))},addBarrel:function(h){return this.add(new S.Barrel(this.gameObject,h))},addDisplacement:function(h,r,o){return this.add(new S.Displacement(this.gameObject,h,r,o))},addWipe:function(h,r,o){return this.add(new S.Wipe(this.gameObject,h,r,o))},addReveal:function(h,r,o){return this.add(new S.Wipe(this.gameObject,h,r,o,!0))},addBokeh:function(h,r,o){return this.add(new S.Bokeh(this.gameObject,h,r,o))},addTiltShift:function(h,r,o,p,a,v){return this.add(new S.Bokeh(this.gameObject,h,r,o,!0,p,a,v))},destroy:function(){this.clear(),this.gameObject=null}});m.exports=l},54434:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(i){return this.flipX=i,this},setFlipY:function(i){return this.flipY=i,this},setFlip:function(i,d){return this.flipX=i,this.flipY=d,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};m.exports=E},8004:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87841),S=i(11520),u=i(26099),l={prepareBoundsOutput:function(h,r){if(r===void 0&&(r=!1),this.rotation!==0&&S(h,this.x,this.y,this.rotation),r&&this.parentContainer){var o=this.parentContainer.getBoundsTransformMatrix();o.transformPoint(h.x,h.y,h)}return h},getCenter:function(h,r){return h===void 0&&(h=new u),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,r)},getTopLeft:function(h,r){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,r)},getTopCenter:function(h,r){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,r)},getTopRight:function(h,r){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,r)},getLeftCenter:function(h,r){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,r)},getRightCenter:function(h,r){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,r)},getBottomLeft:function(h,r){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,r)},getBottomCenter:function(h,r){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,r)},getBottomRight:function(h,r){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,r)},getBounds:function(h){h===void 0&&(h=new d);var r,o,p,a,v,x,g,y;if(this.parentContainer){var T=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(h),T.transformPoint(h.x,h.y,h),r=h.x,o=h.y,this.getTopRight(h),T.transformPoint(h.x,h.y,h),p=h.x,a=h.y,this.getBottomLeft(h),T.transformPoint(h.x,h.y,h),v=h.x,x=h.y,this.getBottomRight(h),T.transformPoint(h.x,h.y,h),g=h.x,y=h.y}else this.getTopLeft(h),r=h.x,o=h.y,this.getTopRight(h),p=h.x,a=h.y,this.getBottomLeft(h),v=h.x,x=h.y,this.getBottomRight(h),g=h.x,y=h.y;return h.x=Math.min(r,p,v,g),h.y=Math.min(o,a,x,y),h.width=Math.max(r,p,v,g)-h.x,h.height=Math.max(o,a,x,y)-h.y,h}};m.exports=l},8573:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(6858),S=i(80661),u={mask:null,setMask:function(l){return this.mask=l,this},clearMask:function(l){return l===void 0&&(l=!1),l&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(l,h,r,o,p){return l===void 0&&(this.texture||this.shader||this.geom)&&(l=this),new d(this.scene,l,h,r,o,p)},createGeometryMask:function(l){return l===void 0&&(this.type==="Graphics"||this.geom)&&(l=this),new S(this.scene,l)}};m.exports=u},27387:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(i){this._displayOriginX=i,this.originX=i/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(i){this._displayOriginY=i,this.originY=i/this.height}},setOrigin:function(i,d){return i===void 0&&(i=.5),d===void 0&&(d=i),this.originX=i,this.originY=d,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(i,d){return i===void 0&&(i=0),d===void 0&&(d=i),this.displayOriginX=i,this.displayOriginY=d,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};m.exports=E},37640:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39506),S=i(57355),u=i(35154),l=i(86353),h=i(26099),r={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:l.PLAYING_FORWARD,setPath:function(o,p){p===void 0&&(p=this.pathConfig);var a=this.pathTween;return a&&a.isPlaying()&&a.stop(),this.path=o,p&&this.startFollow(p),this},setRotateToPath:function(o,p){return p===void 0&&(p=0),this.rotateToPath=o,this.pathRotationOffset=p,this},isFollowing:function(){var o=this.pathTween;return o&&o.isPlaying()},startFollow:function(o,p){o===void 0&&(o={}),p===void 0&&(p=0);var a=this.pathTween;a&&a.isPlaying()&&a.stop(),typeof o=="number"&&(o={duration:o}),o.from=u(o,"from",0),o.to=u(o,"to",1);var v=S(o,"positionOnPath",!1);this.rotateToPath=S(o,"rotateToPath",!1),this.pathRotationOffset=u(o,"rotationOffset",0);var x=u(o,"startAt",p);if(x&&(o.onStart=function(y){var T=y.data[0];T.progress=x,T.elapsed=T.duration*x;var P=T.ease(T.progress);T.current=T.start+(T.end-T.start)*P,T.setTargetValue()}),this.pathOffset||(this.pathOffset=new h(this.x,this.y)),this.pathVector||(this.pathVector=new h),this.pathDelta||(this.pathDelta=new h),this.pathDelta.reset(),o.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(o),this.path.getStartPoint(this.pathOffset),v&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=l.PLAYING_FORWARD,this.rotateToPath){var g=this.path.getPoint(.1);this.rotation=Math.atan2(g.y-this.y,g.x-this.x)+d(this.pathRotationOffset)}return this.pathConfig=o,this},pauseFollow:function(){var o=this.pathTween;return o&&o.isPlaying()&&o.pause(),this},resumeFollow:function(){var o=this.pathTween;return o&&o.isPaused()&&o.resume(),this},stopFollow:function(){var o=this.pathTween;return o&&o.isPlaying()&&o.stop(),this},pathUpdate:function(){var o=this.pathTween;if(o&&o.data){var p=o.data[0],a=this.pathDelta,v=this.pathVector;if(a.copy(v).negate(),p.state===l.COMPLETE){this.path.getPoint(p.end,v),a.add(v),v.add(this.pathOffset),this.setPosition(v.x,v.y);return}else if(p.state!==l.PLAYING_FORWARD&&p.state!==l.PLAYING_BACKWARD)return;this.path.getPoint(o.getValue(),v),a.add(v),v.add(this.pathOffset);var x=this.x,g=this.y;this.setPosition(v.x,v.y);var y=this.x-x,T=this.y-g;if(y===0&&T===0)return;if(p.state!==this._prevDirection){this._prevDirection=p.state;return}this.rotateToPath&&(this.rotation=Math.atan2(T,y)+d(this.pathRotationOffset))}}};m.exports=r},72699:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62644),S={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(u){this.pipelineData={};var l=this.scene.sys.renderer;if(!l)return!1;var h=l.pipelines;if(h){u===void 0&&(u=h.default);var r=h.get(u);if(r)return this.defaultPipeline=r,this.pipeline=r,!0}return!1},setPipeline:function(u,l,h){var r=this.scene.sys.renderer;if(!r)return this;var o=r.pipelines;if(o){var p=o.get(u);p&&(this.pipeline=p),l&&(this.pipelineData=h?d(l):l)}return this},setPipelineData:function(u,l){var h=this.pipelineData;return l===void 0?delete h[u]:h[u]=l,this},resetPipeline:function(u){return u===void 0&&(u=!1),this.pipeline=this.defaultPipeline,u&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline===null?null:this.pipeline.name}};m.exports=S},17581:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62644),S=i(47059),u=i(19133),l={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(h){this.postPipelines=[],this.postPipelineData={},this.postFX=new S(this,!0),h&&(this.preFX=new S(this,!1))},setPostPipeline:function(h,r,o){var p=this.scene.sys.renderer;if(!p)return this;var a=p.pipelines;if(a){Array.isArray(h)||(h=[h]);for(var v=0;v<h.length;v++){var x=a.getPostPipeline(h[v],this,r);x&&this.postPipelines.push(x)}r&&(this.postPipelineData=o?d(r):r)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(h,r){var o=this.postPipelineData;return r===void 0?delete o[h]:o[h]=r,this},getPostPipeline:function(h){for(var r=typeof h=="string",o=this.postPipelines,p=[],a=0;a<o.length;a++){var v=o[a];(r&&v.name===h||!r&&v instanceof h)&&p.push(v)}return p.length===1?p[0]:p},resetPostPipeline:function(h){h===void 0&&(h=!1);for(var r=this.postPipelines,o=0;o<r.length;o++)r[o].destroy();this.postPipelines=[],this.hasPostPipeline=!1,h&&(this.postPipelineData={})},removePostPipeline:function(h){for(var r=typeof h=="string",o=this.postPipelines,p=o.length-1;p>=0;p--){var a=o[p];(r&&a.name===h||!r&&a===h)&&(a.destroy(),u(o,p))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};m.exports=l},80227:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(i,d){return d===void 0&&(d=i),this.scrollFactorX=i,this.scrollFactorY=d,this}};m.exports=E},16736:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(i){this.scaleX=i/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(i){this.scaleY=i/this.frame.realHeight}},setSizeToFrame:function(i){i||(i=this.frame),this.width=i.realWidth,this.height=i.realHeight;var d=this.input;return d&&!d.customHitArea&&(d.hitArea.width=this.width,d.hitArea.height=this.height),this},setSize:function(i,d){return this.width=i,this.height=d,this},setDisplaySize:function(i,d){return this.displayWidth=i,this.displayHeight=d,this}};m.exports=E},37726:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(4327),S=8,u={texture:null,frame:null,isCropped:!1,setTexture:function(l,h,r,o){return this.texture=this.scene.sys.textures.get(l),this.setFrame(h,r,o)},setFrame:function(l,h,r){return h===void 0&&(h=!0),r===void 0&&(r=!0),l instanceof d?(this.texture=this.scene.sys.textures.get(l.texture.key),this.frame=l):this.frame=this.texture.get(l),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~S:this.renderFlags|=S,this._sizeComponent&&h&&this.setSizeToFrame(),this._originComponent&&r&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};m.exports=u},79812:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(4327),S=8,u={texture:null,frame:null,isCropped:!1,setCrop:function(l,h,r,o){if(l===void 0)this.isCropped=!1;else if(this.frame){if(typeof l=="number")this.frame.setCropUVs(this._crop,l,h,r,o,this.flipX,this.flipY);else{var p=l;this.frame.setCropUVs(this._crop,p.x,p.y,p.width,p.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(l,h){return this.texture=this.scene.sys.textures.get(l),this.setFrame(h)},setFrame:function(l,h,r){return h===void 0&&(h=!0),r===void 0&&(r=!0),l instanceof d?(this.texture=this.scene.sys.textures.get(l.texture.key),this.frame=l):this.frame=this.texture.get(l),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~S:this.renderFlags|=S,this._sizeComponent&&h&&this.setSizeToFrame(),this._originComponent&&r&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};m.exports=u},27472:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(i,d,S,u){return i===void 0&&(i=16777215),d===void 0&&(d=i,S=i,u=i),this.tintTopLeft=i,this.tintTopRight=d,this.tintBottomLeft=S,this.tintBottomRight=u,this.tintFill=!1,this},setTintFill:function(i,d,S,u){return this.setTint(i,d,S,u),this.tintFill=!0,this},tint:{get:function(){return this.tintTopLeft},set:function(i){this.setTint(i,i,i,i)}},isTinted:{get:function(){var i=16777215;return this.tintFill||this.tintTopLeft!==i||this.tintTopRight!==i||this.tintBottomLeft!==i||this.tintBottomRight!==i}}};m.exports=E},53774:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){var d={name:i.name,type:i.type,x:i.x,y:i.y,depth:i.depth,scale:{x:i.scaleX,y:i.scaleY},origin:{x:i.originX,y:i.originY},flipX:i.flipX,flipY:i.flipY,rotation:i.rotation,alpha:i.alpha,visible:i.visible,blendMode:i.blendMode,textureKey:"",frameKey:"",data:{}};return i.texture&&(d.textureKey=i.texture.key,d.frameKey=i.frame.name),d};m.exports=E},16901:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(36383),S=i(61340),u=i(85955),l=i(86554),h=i(30954),r=i(26099),o=4,p={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(a){this._scaleX=a,this._scaleY=a,a===0?this.renderFlags&=~o:this.renderFlags|=o}},scaleX:{get:function(){return this._scaleX},set:function(a){this._scaleX=a,a===0?this.renderFlags&=~o:this._scaleY!==0&&(this.renderFlags|=o)}},scaleY:{get:function(){return this._scaleY},set:function(a){this._scaleY=a,a===0?this.renderFlags&=~o:this._scaleX!==0&&(this.renderFlags|=o)}},angle:{get:function(){return h(this._rotation*d.RAD_TO_DEG)},set:function(a){this.rotation=h(a)*d.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(a){this._rotation=l(a)}},setPosition:function(a,v,x,g){return a===void 0&&(a=0),v===void 0&&(v=a),x===void 0&&(x=0),g===void 0&&(g=0),this.x=a,this.y=v,this.z=x,this.w=g,this},copyPosition:function(a){return a.x!==void 0&&(this.x=a.x),a.y!==void 0&&(this.y=a.y),a.z!==void 0&&(this.z=a.z),a.w!==void 0&&(this.w=a.w),this},setRandomPosition:function(a,v,x,g){return a===void 0&&(a=0),v===void 0&&(v=0),x===void 0&&(x=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),this.x=a+Math.random()*x,this.y=v+Math.random()*g,this},setRotation:function(a){return a===void 0&&(a=0),this.rotation=a,this},setAngle:function(a){return a===void 0&&(a=0),this.angle=a,this},setScale:function(a,v){return a===void 0&&(a=1),v===void 0&&(v=a),this.scaleX=a,this.scaleY=v,this},setX:function(a){return a===void 0&&(a=0),this.x=a,this},setY:function(a){return a===void 0&&(a=0),this.y=a,this},setZ:function(a){return a===void 0&&(a=0),this.z=a,this},setW:function(a){return a===void 0&&(a=0),this.w=a,this},getLocalTransformMatrix:function(a){return a===void 0&&(a=new S),a.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(a,v){a===void 0&&(a=new S);var x=this.parentContainer;if(!x)return this.getLocalTransformMatrix(a);var g=!1;for(v||(v=new S,g=!0),a.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);x;)v.applyITRS(x.x,x.y,x._rotation,x._scaleX,x._scaleY),v.multiply(a,a),x=x.parentContainer;return g&&v.destroy(),a},getLocalPoint:function(a,v,x,g){x||(x=new r),g||(g=this.scene.sys.cameras.main);var y=g.scrollX,T=g.scrollY,P=a+y*this.scrollFactorX-y,A=v+T*this.scrollFactorY-T;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(P,A,x):u(P,A,this.x,this.y,this.rotation,this.scaleX,this.scaleY,x),this._originComponent&&(x.x+=this._displayOriginX,x.y+=this._displayOriginY),x},getWorldPoint:function(a,v,x){a===void 0&&(a=new r);var g=this.parentContainer;if(!g)return a.x=this.x,a.y=this.y,a;var y=this.getWorldTransformMatrix(v,x);return a.x=y.tx,a.y=y.ty,a},getParentRotation:function(){for(var a=0,v=this.parentContainer;v;)a+=v.rotation,v=v.parentContainer;return a}};m.exports=p},61340:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(36383),u=i(26099),l=new d({initialize:function(r,o,p,a,v,x){r===void 0&&(r=1),o===void 0&&(o=0),p===void 0&&(p=0),a===void 0&&(a=1),v===void 0&&(v=0),x===void 0&&(x=0),this.matrix=new Float32Array([r,o,p,a,v,x,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(h){this.matrix[0]=h}},b:{get:function(){return this.matrix[1]},set:function(h){this.matrix[1]=h}},c:{get:function(){return this.matrix[2]},set:function(h){this.matrix[2]=h}},d:{get:function(){return this.matrix[3]},set:function(h){this.matrix[3]=h}},e:{get:function(){return this.matrix[4]},set:function(h){this.matrix[4]=h}},f:{get:function(){return this.matrix[5]},set:function(h){this.matrix[5]=h}},tx:{get:function(){return this.matrix[4]},set:function(h){this.matrix[4]=h}},ty:{get:function(){return this.matrix[5]},set:function(h){this.matrix[5]=h}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var h=this.matrix,r=h[0],o=h[1],p=h[2],a=h[3];return r||o?o>0?Math.acos(r/this.scaleX):-Math.acos(r/this.scaleX):p||a?S.TAU-(a>0?Math.acos(-p/this.scaleY):-Math.acos(p/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var h=this.matrix;return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,this},translate:function(h,r){var o=this.matrix;return o[4]=o[0]*h+o[2]*r+o[4],o[5]=o[1]*h+o[3]*r+o[5],this},scale:function(h,r){var o=this.matrix;return o[0]*=h,o[1]*=h,o[2]*=r,o[3]*=r,this},rotate:function(h){var r=Math.sin(h),o=Math.cos(h),p=this.matrix,a=p[0],v=p[1],x=p[2],g=p[3];return p[0]=a*o+x*r,p[1]=v*o+g*r,p[2]=a*-r+x*o,p[3]=v*-r+g*o,this},multiply:function(h,r){var o=this.matrix,p=h.matrix,a=o[0],v=o[1],x=o[2],g=o[3],y=o[4],T=o[5],P=p[0],A=p[1],b=p[2],O=p[3],D=p[4],B=p[5],G=r===void 0?o:r.matrix;return G[0]=P*a+A*x,G[1]=P*v+A*g,G[2]=b*a+O*x,G[3]=b*v+O*g,G[4]=D*a+B*x+y,G[5]=D*v+B*g+T,G},multiplyWithOffset:function(h,r,o){var p=this.matrix,a=h.matrix,v=p[0],x=p[1],g=p[2],y=p[3],T=p[4],P=p[5],A=r*v+o*g+T,b=r*x+o*y+P,O=a[0],D=a[1],B=a[2],G=a[3],V=a[4],k=a[5];return p[0]=O*v+D*g,p[1]=O*x+D*y,p[2]=B*v+G*g,p[3]=B*x+G*y,p[4]=V*v+k*g+A,p[5]=V*x+k*y+b,this},transform:function(h,r,o,p,a,v){var x=this.matrix,g=x[0],y=x[1],T=x[2],P=x[3],A=x[4],b=x[5];return x[0]=h*g+r*T,x[1]=h*y+r*P,x[2]=o*g+p*T,x[3]=o*y+p*P,x[4]=a*g+v*T+A,x[5]=a*y+v*P+b,this},transformPoint:function(h,r,o){o===void 0&&(o={x:0,y:0});var p=this.matrix,a=p[0],v=p[1],x=p[2],g=p[3],y=p[4],T=p[5];return o.x=h*a+r*x+y,o.y=h*v+r*g+T,o},invert:function(){var h=this.matrix,r=h[0],o=h[1],p=h[2],a=h[3],v=h[4],x=h[5],g=r*a-o*p;return h[0]=a/g,h[1]=-o/g,h[2]=-p/g,h[3]=r/g,h[4]=(p*x-a*v)/g,h[5]=-(r*x-o*v)/g,this},copyFrom:function(h){var r=this.matrix;return r[0]=h.a,r[1]=h.b,r[2]=h.c,r[3]=h.d,r[4]=h.e,r[5]=h.f,this},copyFromArray:function(h){var r=this.matrix;return r[0]=h[0],r[1]=h[1],r[2]=h[2],r[3]=h[3],r[4]=h[4],r[5]=h[5],this},copyToContext:function(h){var r=this.matrix;return h.transform(r[0],r[1],r[2],r[3],r[4],r[5]),h},setToContext:function(h){return h.setTransform(this.a,this.b,this.c,this.d,this.e,this.f),h},copyToArray:function(h){var r=this.matrix;return h===void 0?h=[r[0],r[1],r[2],r[3],r[4],r[5]]:(h[0]=r[0],h[1]=r[1],h[2]=r[2],h[3]=r[3],h[4]=r[4],h[5]=r[5]),h},setTransform:function(h,r,o,p,a,v){var x=this.matrix;return x[0]=h,x[1]=r,x[2]=o,x[3]=p,x[4]=a,x[5]=v,this},decomposeMatrix:function(){var h=this.decomposedMatrix,r=this.matrix,o=r[0],p=r[1],a=r[2],v=r[3],x=o*v-p*a;if(h.translateX=r[4],h.translateY=r[5],o||p){var g=Math.sqrt(o*o+p*p);h.rotation=p>0?Math.acos(o/g):-Math.acos(o/g),h.scaleX=g,h.scaleY=x/g}else if(a||v){var y=Math.sqrt(a*a+v*v);h.rotation=Math.PI*.5-(v>0?Math.acos(-a/y):-Math.acos(a/y)),h.scaleX=x/y,h.scaleY=y}else h.rotation=0,h.scaleX=0,h.scaleY=0;return h},applyITRS:function(h,r,o,p,a){var v=this.matrix,x=Math.sin(o),g=Math.cos(o);return v[4]=h,v[5]=r,v[0]=g*p,v[1]=x*p,v[2]=-x*a,v[3]=g*a,this},applyInverse:function(h,r,o){o===void 0&&(o=new u);var p=this.matrix,a=p[0],v=p[1],x=p[2],g=p[3],y=p[4],T=p[5],P=1/(a*g+x*-v);return o.x=g*P*h+-x*P*r+(T*x-y*g)*P,o.y=a*P*r+-v*P*h+(-T*a+y*v)*P,o},setQuad:function(h,r,o,p,a,v){a===void 0&&(a=!1),v===void 0&&(v=this.quad);var x=this.matrix,g=x[0],y=x[1],T=x[2],P=x[3],A=x[4],b=x[5],O=h*g+r*T+A,D=h*y+r*P+b,B=h*g+p*T+A,G=h*y+p*P+b,V=o*g+p*T+A,k=o*y+p*P+b,U=o*g+r*T+A,W=o*y+r*P+b;if(a){var X=Math.floor(O+.5),_=Math.floor(D+.5),Q=X-O,j=_-D;v[0]=X,v[1]=_,v[2]=B+Q,v[3]=G+j,v[4]=V+Q,v[5]=k+j,v[6]=U+Q,v[7]=W+j}else v[0]=O,v[1]=D,v[2]=B,v[3]=G,v[4]=V,v[5]=k,v[6]=U,v[7]=W;return v},getX:function(h,r){return h*this.a+r*this.c+this.e},getY:function(h,r){return h*this.b+r*this.d+this.f},getXRound:function(h,r,o){var p=this.getX(h,r);return o&&(p=Math.floor(p+.5)),p},getYRound:function(h,r,o){var p=this.getY(h,r);return o&&(p=Math.floor(p+.5)),p},getCSSMatrix:function(){var h=this.matrix;return"matrix("+h[0]+","+h[1]+","+h[2]+","+h[3]+","+h[4]+","+h[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});m.exports=l},59715:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=1,i={_visible:!0,visible:{get:function(){return this._visible},set:function(d){d?(this._visible=!0,this.renderFlags|=E):(this._visible=!1,this.renderFlags&=~E)}},setVisible:function(d){return this.visible=d,this}};m.exports=i},31401:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Alpha:i(16005),AlphaSingle:i(88509),BlendMode:i(90065),ComputedSize:i(94215),Crop:i(61683),Depth:i(89272),Flip:i(54434),FX:i(47059),GetBounds:i(8004),Mask:i(8573),Origin:i(27387),PathFollower:i(37640),Pipeline:i(72699),PostPipeline:i(17581),ScrollFactor:i(80227),Size:i(16736),Texture:i(37726),TextureCrop:i(79812),Tint:i(27472),ToJSON:i(53774),Transform:i(16901),TransformMatrix:i(61340),Visible:i(59715)}},31559:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(37105),S=i(10312),u=i(83419),l=i(31401),h=i(51708),r=i(95643),o=i(87841),p=i(29959),a=i(36899),v=i(26099),x=new l.TransformMatrix,g=new u({Extends:r,Mixins:[l.AlphaSingle,l.BlendMode,l.ComputedSize,l.Depth,l.Mask,l.PostPipeline,l.Transform,l.Visible,p],initialize:function(T,P,A,b){r.call(this,T,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new l.TransformMatrix,this._sortKey="",this._sysEvents=T.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(P,A),this.setBlendMode(S.SKIP_CHECK),b&&this.add(b)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(y){return y===void 0&&(y=!0),this.exclusive=y,this},getBounds:function(y){if(y===void 0&&(y=new o),y.setTo(this.x,this.y,0,0),this.parentContainer){var T=this.parentContainer.getBoundsTransformMatrix(),P=T.transformPoint(this.x,this.y);y.setTo(P.x,P.y,0,0)}if(this.list.length>0){var A=this.list,b=new o,O=!1;y.setEmpty();for(var D=0;D<A.length;D++){var B=A[D];B.getBounds&&(B.getBounds(b),O?a(b,y,y):(y.setTo(b.x,b.y,b.width,b.height),O=!0))}}return y},addHandler:function(y){y.once(h.DESTROY,this.onChildDestroyed,this),this.exclusive&&(y.parentContainer&&y.parentContainer.remove(y),y.parentContainer=this,y.removeFromDisplayList(),y.addedToScene())},removeHandler:function(y){y.off(h.DESTROY,this.remove,this),this.exclusive&&(y.parentContainer=null,y.removedFromScene(),y.addToDisplayList())},pointToContainer:function(y,T){T===void 0&&(T=new v),this.parentContainer?this.parentContainer.pointToContainer(y,T):(T.x=y.x,T.y=y.y);var P=x;return P.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),P.invert(),P.transformPoint(y.x,y.y,T),T},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(x,this.localTransform)},add:function(y){return d.Add(this.list,y,this.maxSize,this.addHandler,this),this},addAt:function(y,T){return d.AddAt(this.list,y,T,this.maxSize,this.addHandler,this),this},getAt:function(y){return this.list[y]},getIndex:function(y){return this.list.indexOf(y)},sort:function(y,T){return y?(T===void 0&&(T=function(P,A){return P[y]-A[y]}),d.StableSort(this.list,T),this):this},getByName:function(y){return d.GetFirst(this.list,"name",y)},getRandom:function(y,T){return d.GetRandom(this.list,y,T)},getFirst:function(y,T,P,A){return d.GetFirst(this.list,y,T,P,A)},getAll:function(y,T,P,A){return d.GetAll(this.list,y,T,P,A)},count:function(y,T,P,A){return d.CountAllMatching(this.list,y,T,P,A)},swap:function(y,T){return d.Swap(this.list,y,T),this},moveTo:function(y,T){return d.MoveTo(this.list,y,T),this},moveAbove:function(y,T){return d.MoveAbove(this.list,y,T),this},moveBelow:function(y,T){return d.MoveBelow(this.list,y,T),this},remove:function(y,T){var P=d.Remove(this.list,y,this.removeHandler,this);if(T&&P){Array.isArray(P)||(P=[P]);for(var A=0;A<P.length;A++)P[A].destroy()}return this},removeAt:function(y,T){var P=d.RemoveAt(this.list,y,this.removeHandler,this);return T&&P&&P.destroy(),this},removeBetween:function(y,T,P){var A=d.RemoveBetween(this.list,y,T,this.removeHandler,this);if(P)for(var b=0;b<A.length;b++)A[b].destroy();return this},removeAll:function(y){var T=this.list;if(y){for(var P=0;P<T.length;P++)T[P]&&T[P].scene&&(T[P].off(h.DESTROY,this.onChildDestroyed,this),T[P].destroy());this.list=[]}else d.RemoveBetween(T,0,T.length,this.removeHandler,this);return this},bringToTop:function(y){return d.BringToTop(this.list,y),this},sendToBack:function(y){return d.SendToBack(this.list,y),this},moveUp:function(y){return d.MoveUp(this.list,y),this},moveDown:function(y){return d.MoveDown(this.list,y),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return d.Shuffle(this.list),this},replace:function(y,T,P){var A=d.Replace(this.list,y,T);return A&&(this.addHandler(T),this.removeHandler(y),P&&y.destroy()),this},exists:function(y){return this.list.indexOf(y)>-1},setAll:function(y,T,P,A){return d.SetAll(this.list,y,T,P,A),this},each:function(y,T){var P=[null],A,b=this.list.slice(),O=b.length;for(A=2;A<arguments.length;A++)P.push(arguments[A]);for(A=0;A<O;A++)P[0]=b[A],y.apply(T,P);return this},iterate:function(y,T){var P=[null],A;for(A=2;A<arguments.length;A++)P.push(arguments[A]);for(A=0;A<this.list.length;A++)P[0]=this.list[A],y.apply(T,P);return this},setScrollFactor:function(y,T,P){return T===void 0&&(T=y),P===void 0&&(P=!1),this.scrollFactorX=y,this.scrollFactorY=T,P&&(d.SetAll(this.list,"scrollFactorX",y),d.SetAll(this.list,"scrollFactorY",T)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.list=[]},onChildDestroyed:function(y){d.Remove(this.list,y),this.exclusive&&(y.parentContainer=null,y.removedFromScene())}});m.exports=g},53584:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){S.addToRenderList(d);var l=d.list;if(l.length!==0){var h=d.localTransform;u?(h.loadIdentity(),h.multiply(u),h.translate(d.x,d.y),h.rotate(d.rotation),h.scale(d.scaleX,d.scaleY)):h.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY);var r=d.blendMode!==-1;r||i.setBlendMode(0);var o=d._alpha,p=d.scrollFactorX,a=d.scrollFactorY;d.mask&&d.mask.preRenderCanvas(i,null,S);for(var v=0;v<l.length;v++){var x=l[v];if(x.willRender(S)){var g=x.alpha,y=x.scrollFactorX,T=x.scrollFactorY;!r&&x.blendMode!==i.currentBlendMode&&i.setBlendMode(x.blendMode),x.setScrollFactor(y*p,T*a),x.setAlpha(g*o),x.renderCanvas(i,x,S,h),x.setAlpha(g),x.setScrollFactor(y,T)}}d.mask&&d.mask.postRenderCanvas(i)}};m.exports=E},77143:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),S=i(31559),u=i(44603),l=i(23568),h=i(95540);u.register("container",function(r,o){r===void 0&&(r={});var p=l(r,"x",0),a=l(r,"y",0),v=h(r,"children",null),x=new S(this.scene,p,a,v);return o!==void 0&&(r.add=o),d(this.scene,x,r),x})},24961:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(31559),S=i(39429);S.register("container",function(u,l,h){return this.displayList.add(new d(this.scene,u,l,h))})},29959:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(72249),u=i(53584),m.exports={renderWebGL:S,renderCanvas:u}},72249:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){S.addToRenderList(d);var l=d.list,h=l.length;if(h!==0){var r=d.localTransform;u?(r.loadIdentity(),r.multiply(u),r.translate(d.x,d.y),r.rotate(d.rotation),r.scale(d.scaleX,d.scaleY)):r.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY),i.pipelines.preBatch(d);var o=d.blendMode!==-1;o||i.setBlendMode(0);for(var p=d.alpha,a=d.scrollFactorX,v=d.scrollFactorY,x=0;x<h;x++){var g=l[x];if(g.willRender(S)){var y,T,P,A;if(g.alphaTopLeft!==void 0)y=g.alphaTopLeft,T=g.alphaTopRight,P=g.alphaBottomLeft,A=g.alphaBottomRight;else{var b=g.alpha;y=b,T=b,P=b,A=b}var O=g.scrollFactorX,D=g.scrollFactorY;!o&&g.blendMode!==i.currentBlendMode&&i.setBlendMode(g.blendMode);var B=g.mask;B&&B.preRenderWebGL(i,g,S);var G=g.type;G!==i.currentType&&(i.newType=!0,i.currentType=G),i.nextTypeMatch=x<h-1?l[x+1].type===i.currentType:!1,g.setScrollFactor(O*a,D*v),g.setAlpha(y*p,T*p,P*p,A*p),g.renderWebGL(i,g,S,r,d),g.setAlpha(y,T,P,A),g.setScrollFactor(O,D),B&&B.postRenderWebGL(i,S),i.newType=!1}}i.pipelines.postBatch(d)}};m.exports=E},47407:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},3069:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(31401),u=i(441),l=i(95643),h=i(41212),r=i(35846),o=i(44594),p=i(61369),a=new d({Extends:l,Mixins:[S.AlphaSingle,S.BlendMode,S.Depth,S.Origin,S.ScrollFactor,S.Transform,S.Visible,u],initialize:function(x,g,y,T,P,A){if(l.call(this,x,"DOMElement"),this.parent=x.sys.game.domContainer,!this.parent)throw new Error("No DOM Container set in game config");this.cache=x.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new p,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(g,y),typeof T=="string"?T[0]==="#"?this.setElement(T.substr(1),P,A):this.createElement(T,P,A):T&&this.setElement(T,P,A),x.sys.events.on(o.SLEEP,this.handleSceneEvent,this),x.sys.events.on(o.WAKE,this.handleSceneEvent,this),x.sys.events.on(o.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(v){var x=this.node,g=x.style;x&&(g.display=v.settings.visible?"block":"none")},setSkew:function(v,x){return v===void 0&&(v=0),x===void 0&&(x=v),this.skewX=v,this.skewY=x,this},setPerspective:function(v){return this.parent.style.perspective=v+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(v){this.parent.style.perspective=v+"px"}},addListener:function(v){if(this.node){v=v.split(" ");for(var x=0;x<v.length;x++)this.node.addEventListener(v[x],this.handler,!1)}return this},removeListener:function(v){if(this.node){v=v.split(" ");for(var x=0;x<v.length;x++)this.node.removeEventListener(v[x],this.handler)}return this},dispatchNativeEvent:function(v){this.emit(v.type,v)},createElement:function(v,x,g){return this.setElement(document.createElement(v),x,g)},setElement:function(v,x,g){this.removeElement();var y;if(typeof v=="string"?(v[0]==="#"&&(v=v.substr(1)),y=document.getElementById(v)):typeof v=="object"&&v.nodeType===1&&(y=v),!y)return this;if(this.node=y,x&&h(x))for(var T in x)y.style[T]=x[T];else typeof x=="string"&&(y.style=x);return y.style.zIndex="0",y.style.display="inline",y.style.position="absolute",y.phaser=this,this.parent.appendChild(y),g&&(y.innerText=g),this.updateSize()},createFromCache:function(v,x){var g=this.cache.get(v);return g&&this.createFromHTML(g,x),this},createFromHTML:function(v,x){x===void 0&&(x="div"),this.removeElement();var g=document.createElement(x);return this.node=g,g.style.zIndex="0",g.style.display="inline",g.style.position="absolute",g.phaser=this,this.parent.appendChild(g),g.innerHTML=v,this.updateSize()},removeElement:function(){return this.node&&(r(this.node),this.node=null),this},updateSize:function(){var v=this.node;return this.width=v.clientWidth,this.height=v.clientHeight,this.displayWidth=this.width*this.scaleX,this.displayHeight=this.height*this.scaleY,this},getChildByProperty:function(v,x){if(this.node){for(var g=this.node.querySelectorAll("*"),y=0;y<g.length;y++)if(g[y][v]===x)return g[y]}return null},getChildByID:function(v){return this.getChildByProperty("id",v)},getChildByName:function(v){return this.getChildByProperty("name",v)},setClassName:function(v){return this.node&&(this.node.className=v,this.updateSize()),this},setText:function(v){return this.node&&(this.node.innerText=v,this.updateSize()),this},setHTML:function(v){return this.node&&(this.node.innerHTML=v,this.updateSize()),this},preRender:function(){var v=this.parentContainer,x=this.node;x&&v&&!v.willRender()&&(x.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(o.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(o.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(o.PRE_RENDER,this.preRender,this)}});m.exports=a},49381:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(47407),S=i(95643),u=i(61340),l=new u,h=new u,r=new u,o=function(p,a,v,x){if(a.node){var g=a.node.style,y=a.scene.sys.settings;if(!g||!y.visible||S.RENDER_MASK!==a.renderFlags||a.cameraFilter!==0&&a.cameraFilter&v.id||a.parentContainer&&!a.parentContainer.willRender()){g.display="none";return}var T=a.parentContainer,P=v.alpha*a.alpha;T&&(P*=T.alpha);var A=l,b=h,O=r,D=0,B=0,G="0%",V="0%";x?(D=a.width*a.scaleX*a.originX,B=a.height*a.scaleY*a.originY,b.applyITRS(a.x-D,a.y-B,a.rotation,a.scaleX,a.scaleY),A.copyFrom(v.matrix),A.multiplyWithOffset(x,-v.scrollX*a.scrollFactorX,-v.scrollY*a.scrollFactorY),b.e=a.x-D,b.f=a.y-B,A.multiply(b,O)):(D=a.width*a.originX,B=a.height*a.originY,b.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY),A.copyFrom(v.matrix),G=100*a.originX+"%",V=100*a.originY+"%",b.e-=v.scrollX*a.scrollFactorX,b.f-=v.scrollY*a.scrollFactorY,A.multiply(b,O),O.e-=D,O.f-=B),a.transformOnly||(g.display="block",g.opacity=P,g.zIndex=a._depth,g.pointerEvents=a.pointerEvents,g.mixBlendMode=d[a._blendMode]),g.transform=O.getCSSMatrix()+" skew("+a.skewX+"rad, "+a.skewY+"rad) rotate3d("+a.rotate3d.x+","+a.rotate3d.y+","+a.rotate3d.z+","+a.rotate3d.w+a.rotate3dAngle+")",g.transformOrigin=G+" "+V}};m.exports=o},2611:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(3069),S=i(39429);S.register("dom",function(u,l,h,r,o){var p=new d(this.scene,u,l,h,r,o);return this.displayList.add(p),p})},441:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(49381),u=i(49381),m.exports={renderWebGL:S,renderCanvas:u}},62980:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="addedtoscene"},41337:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="destroy"},44947:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="removedfromscene"},49358:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="complete"},35163:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="created"},97249:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="error"},19483:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="locked"},56059:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="loop"},26772:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="metadata"},64437:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="playing"},83411:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="play"},75780:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="seeked"},67799:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="seeking"},63500:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="stalled"},55541:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="stop"},53208:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="textureready"},4992:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="unlocked"},12:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="unsupported"},51708:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={ADDED_TO_SCENE:i(62980),DESTROY:i(41337),REMOVED_FROM_SCENE:i(44947),VIDEO_COMPLETE:i(49358),VIDEO_CREATED:i(35163),VIDEO_ERROR:i(97249),VIDEO_LOCKED:i(19483),VIDEO_LOOP:i(56059),VIDEO_METADATA:i(26772),VIDEO_PLAY:i(83411),VIDEO_PLAYING:i(64437),VIDEO_SEEKED:i(75780),VIDEO_SEEKING:i(67799),VIDEO_STALLED:i(63500),VIDEO_STOP:i(55541),VIDEO_TEXTURE:i(53208),VIDEO_UNLOCKED:i(4992),VIDEO_UNSUPPORTED:i(12)}},42421:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(31401),u=i(95643),l=i(64993),h=new d({Extends:u,Mixins:[S.Alpha,S.BlendMode,S.Depth,S.Flip,S.Origin,S.ScrollFactor,S.Size,S.Texture,S.Tint,S.Transform,S.Visible,l],initialize:function(o){u.call(this,o,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});m.exports=h},70217:()=>{},56315:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(42421),S=i(39429);S.register("extern",function(){var u=new d(this.scene);return this.displayList.add(u),u})},64993:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(80287),u=i(70217),m.exports={renderWebGL:S,renderCanvas:u}},80287:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),S=function(u,l,h,r){u.pipelines.clear();var o=d(l,h,r).calc;l.render.call(l,u,h,o),u.pipelines.rebind()};m.exports=S},85592:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},43831:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(71911),S=i(83419),u=i(85592),l=i(31401),h=i(8497),r=i(95643),o=i(95540),p=i(35154),a=i(36383),v=i(84503),x=new S({Extends:r,Mixins:[l.AlphaSingle,l.BlendMode,l.Depth,l.Mask,l.Pipeline,l.PostPipeline,l.Transform,l.Visible,l.ScrollFactor,v],initialize:function(y,T){var P=p(T,"x",0),A=p(T,"y",0);r.call(this,y,"Graphics"),this.setPosition(P,A),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.lineStyle(1,0,0),this.fillStyle(0,0),this.setDefaultStyles(T)},setDefaultStyles:function(g){return p(g,"lineStyle",null)&&(this.defaultStrokeWidth=p(g,"lineStyle.width",1),this.defaultStrokeColor=p(g,"lineStyle.color",16777215),this.defaultStrokeAlpha=p(g,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),p(g,"fillStyle",null)&&(this.defaultFillColor=p(g,"fillStyle.color",16777215),this.defaultFillAlpha=p(g,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(g,y,T){return T===void 0&&(T=1),this.commandBuffer.push(u.LINE_STYLE,g,y,T),this._lineWidth=g,this},fillStyle:function(g,y){return y===void 0&&(y=1),this.commandBuffer.push(u.FILL_STYLE,g,y),this},fillGradientStyle:function(g,y,T,P,A,b,O,D){return A===void 0&&(A=1),b===void 0&&(b=A),O===void 0&&(O=A),D===void 0&&(D=A),this.commandBuffer.push(u.GRADIENT_FILL_STYLE,A,b,O,D,g,y,T,P),this},lineGradientStyle:function(g,y,T,P,A,b){return b===void 0&&(b=1),this.commandBuffer.push(u.GRADIENT_LINE_STYLE,g,b,y,T,P,A),this},beginPath:function(){return this.commandBuffer.push(u.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(u.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(u.FILL_PATH),this},fill:function(){return this.commandBuffer.push(u.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(u.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(u.STROKE_PATH),this},fillCircleShape:function(g){return this.fillCircle(g.x,g.y,g.radius)},strokeCircleShape:function(g){return this.strokeCircle(g.x,g.y,g.radius)},fillCircle:function(g,y,T){return this.beginPath(),this.arc(g,y,T,0,a.PI2),this.fillPath(),this},strokeCircle:function(g,y,T){return this.beginPath(),this.arc(g,y,T,0,a.PI2),this.strokePath(),this},fillRectShape:function(g){return this.fillRect(g.x,g.y,g.width,g.height)},strokeRectShape:function(g){return this.strokeRect(g.x,g.y,g.width,g.height)},fillRect:function(g,y,T,P){return this.commandBuffer.push(u.FILL_RECT,g,y,T,P),this},strokeRect:function(g,y,T,P){var A=this._lineWidth/2,b=g-A,O=g+A;return this.beginPath(),this.moveTo(g,y),this.lineTo(g,y+P),this.strokePath(),this.beginPath(),this.moveTo(g+T,y),this.lineTo(g+T,y+P),this.strokePath(),this.beginPath(),this.moveTo(b,y),this.lineTo(O+T,y),this.strokePath(),this.beginPath(),this.moveTo(b,y+P),this.lineTo(O+T,y+P),this.strokePath(),this},fillRoundedRect:function(g,y,T,P,A){A===void 0&&(A=20);var b=A,O=A,D=A,B=A;typeof A!="number"&&(b=o(A,"tl",20),O=o(A,"tr",20),D=o(A,"bl",20),B=o(A,"br",20));var G=b>=0,V=O>=0,k=D>=0,U=B>=0;return b=Math.abs(b),O=Math.abs(O),D=Math.abs(D),B=Math.abs(B),this.beginPath(),this.moveTo(g+b,y),this.lineTo(g+T-O,y),V?this.arc(g+T-O,y+O,O,-a.TAU,0):this.arc(g+T,y,O,Math.PI,a.TAU,!0),this.lineTo(g+T,y+P-B),U?this.arc(g+T-B,y+P-B,B,0,a.TAU):this.arc(g+T,y+P,B,-a.TAU,Math.PI,!0),this.lineTo(g+D,y+P),k?this.arc(g+D,y+P-D,D,a.TAU,Math.PI):this.arc(g,y+P,D,0,-a.TAU,!0),this.lineTo(g,y+b),G?this.arc(g+b,y+b,b,-Math.PI,-a.TAU):this.arc(g,y,b,a.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(g,y,T,P,A){A===void 0&&(A=20);var b=A,O=A,D=A,B=A,G=Math.min(T,P)/2;typeof A!="number"&&(b=o(A,"tl",20),O=o(A,"tr",20),D=o(A,"bl",20),B=o(A,"br",20));var V=b>=0,k=O>=0,U=D>=0,W=B>=0;return b=Math.min(Math.abs(b),G),O=Math.min(Math.abs(O),G),D=Math.min(Math.abs(D),G),B=Math.min(Math.abs(B),G),this.beginPath(),this.moveTo(g+b,y),this.lineTo(g+T-O,y),this.moveTo(g+T-O,y),k?this.arc(g+T-O,y+O,O,-a.TAU,0):this.arc(g+T,y,O,Math.PI,a.TAU,!0),this.lineTo(g+T,y+P-B),this.moveTo(g+T,y+P-B),W?this.arc(g+T-B,y+P-B,B,0,a.TAU):this.arc(g+T,y+P,B,-a.TAU,Math.PI,!0),this.lineTo(g+D,y+P),this.moveTo(g+D,y+P),U?this.arc(g+D,y+P-D,D,a.TAU,Math.PI):this.arc(g,y+P,D,0,-a.TAU,!0),this.lineTo(g,y+b),this.moveTo(g,y+b),V?this.arc(g+b,y+b,b,-Math.PI,-a.TAU):this.arc(g,y,b,a.TAU,0,!0),this.strokePath(),this},fillPointShape:function(g,y){return this.fillPoint(g.x,g.y,y)},fillPoint:function(g,y,T){return!T||T<1?T=1:(g-=T/2,y-=T/2),this.commandBuffer.push(u.FILL_RECT,g,y,T,T),this},fillTriangleShape:function(g){return this.fillTriangle(g.x1,g.y1,g.x2,g.y2,g.x3,g.y3)},strokeTriangleShape:function(g){return this.strokeTriangle(g.x1,g.y1,g.x2,g.y2,g.x3,g.y3)},fillTriangle:function(g,y,T,P,A,b){return this.commandBuffer.push(u.FILL_TRIANGLE,g,y,T,P,A,b),this},strokeTriangle:function(g,y,T,P,A,b){return this.commandBuffer.push(u.STROKE_TRIANGLE,g,y,T,P,A,b),this},strokeLineShape:function(g){return this.lineBetween(g.x1,g.y1,g.x2,g.y2)},lineBetween:function(g,y,T,P){return this.beginPath(),this.moveTo(g,y),this.lineTo(T,P),this.strokePath(),this},lineTo:function(g,y){return this.commandBuffer.push(u.LINE_TO,g,y),this},moveTo:function(g,y){return this.commandBuffer.push(u.MOVE_TO,g,y),this},strokePoints:function(g,y,T,P){y===void 0&&(y=!1),T===void 0&&(T=!1),P===void 0&&(P=g.length),this.beginPath(),this.moveTo(g[0].x,g[0].y);for(var A=1;A<P;A++)this.lineTo(g[A].x,g[A].y);return y&&this.lineTo(g[0].x,g[0].y),T&&this.closePath(),this.strokePath(),this},fillPoints:function(g,y,T,P){y===void 0&&(y=!1),T===void 0&&(T=!1),P===void 0&&(P=g.length),this.beginPath(),this.moveTo(g[0].x,g[0].y);for(var A=1;A<P;A++)this.lineTo(g[A].x,g[A].y);return y&&this.lineTo(g[0].x,g[0].y),T&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(g,y){y===void 0&&(y=32);var T=g.getPoints(y);return this.strokePoints(T,!0)},strokeEllipse:function(g,y,T,P,A){A===void 0&&(A=32);var b=new h(g,y,T,P),O=b.getPoints(A);return this.strokePoints(O,!0)},fillEllipseShape:function(g,y){y===void 0&&(y=32);var T=g.getPoints(y);return this.fillPoints(T,!0)},fillEllipse:function(g,y,T,P,A){A===void 0&&(A=32);var b=new h(g,y,T,P),O=b.getPoints(A);return this.fillPoints(O,!0)},arc:function(g,y,T,P,A,b,O){return b===void 0&&(b=!1),O===void 0&&(O=0),this.commandBuffer.push(u.ARC,g,y,T,P,A,b,O),this},slice:function(g,y,T,P,A,b,O){return b===void 0&&(b=!1),O===void 0&&(O=0),this.commandBuffer.push(u.BEGIN_PATH),this.commandBuffer.push(u.MOVE_TO,g,y),this.commandBuffer.push(u.ARC,g,y,T,P,A,b,O),this.commandBuffer.push(u.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(u.SAVE),this},restore:function(){return this.commandBuffer.push(u.RESTORE),this},translateCanvas:function(g,y){return this.commandBuffer.push(u.TRANSLATE,g,y),this},scaleCanvas:function(g,y){return this.commandBuffer.push(u.SCALE,g,y),this},rotateCanvas:function(g){return this.commandBuffer.push(u.ROTATE,g),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(g,y,T){var P=this.scene.sys,A=P.game.renderer;y===void 0&&(y=P.scale.width),T===void 0&&(T=P.scale.height),x.TargetCamera.setScene(this.scene),x.TargetCamera.setViewport(0,0,y,T),x.TargetCamera.scrollX=this.x,x.TargetCamera.scrollY=this.y;var b,O,D={willReadFrequently:!0};if(typeof g=="string")if(P.textures.exists(g)){b=P.textures.get(g);var B=b.getSourceImage();B instanceof HTMLCanvasElement&&(O=B.getContext("2d",D))}else b=P.textures.createCanvas(g,y,T),O=b.getSourceImage().getContext("2d",D);else g instanceof HTMLCanvasElement&&(O=g.getContext("2d",D));return O&&(this.renderCanvas(A,this,x.TargetCamera,null,O,!1),b&&b.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});x.TargetCamera=new d,m.exports=x},32768:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(85592),S=i(20926),u=function(l,h,r,o,p,a){var v=h.commandBuffer,x=v.length,g=p||l.currentContext;if(!(x===0||!S(l,g,h,r,o))){r.addToRenderList(h);var y=1,T=1,P=0,A=0,b=1,O=0,D=0,B=0;g.beginPath();for(var G=0;G<x;++G){var V=v[G];switch(V){case d.ARC:g.arc(v[G+1],v[G+2],v[G+3],v[G+4],v[G+5],v[G+6]),G+=7;break;case d.LINE_STYLE:b=v[G+1],P=v[G+2],y=v[G+3],O=(P&16711680)>>>16,D=(P&65280)>>>8,B=P&255,g.strokeStyle="rgba("+O+","+D+","+B+","+y+")",g.lineWidth=b,G+=3;break;case d.FILL_STYLE:A=v[G+1],T=v[G+2],O=(A&16711680)>>>16,D=(A&65280)>>>8,B=A&255,g.fillStyle="rgba("+O+","+D+","+B+","+T+")",G+=2;break;case d.BEGIN_PATH:g.beginPath();break;case d.CLOSE_PATH:g.closePath();break;case d.FILL_PATH:a||g.fill();break;case d.STROKE_PATH:a||g.stroke();break;case d.FILL_RECT:a?g.rect(v[G+1],v[G+2],v[G+3],v[G+4]):g.fillRect(v[G+1],v[G+2],v[G+3],v[G+4]),G+=4;break;case d.FILL_TRIANGLE:g.beginPath(),g.moveTo(v[G+1],v[G+2]),g.lineTo(v[G+3],v[G+4]),g.lineTo(v[G+5],v[G+6]),g.closePath(),a||g.fill(),G+=6;break;case d.STROKE_TRIANGLE:g.beginPath(),g.moveTo(v[G+1],v[G+2]),g.lineTo(v[G+3],v[G+4]),g.lineTo(v[G+5],v[G+6]),g.closePath(),a||g.stroke(),G+=6;break;case d.LINE_TO:g.lineTo(v[G+1],v[G+2]),G+=2;break;case d.MOVE_TO:g.moveTo(v[G+1],v[G+2]),G+=2;break;case d.LINE_FX_TO:g.lineTo(v[G+1],v[G+2]),G+=5;break;case d.MOVE_FX_TO:g.moveTo(v[G+1],v[G+2]),G+=5;break;case d.SAVE:g.save();break;case d.RESTORE:g.restore();break;case d.TRANSLATE:g.translate(v[G+1],v[G+2]),G+=2;break;case d.SCALE:g.scale(v[G+1],v[G+2]),G+=2;break;case d.ROTATE:g.rotate(v[G+1]),G+=1;break;case d.GRADIENT_FILL_STYLE:G+=5;break;case d.GRADIENT_LINE_STYLE:G+=6;break}}g.restore()}};m.exports=u},87079:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(44603),S=i(43831);d.register("graphics",function(u,l){u===void 0&&(u={}),l!==void 0&&(u.add=l);var h=new S(this.scene,u);return u.add&&this.scene.sys.displayList.add(h),h})},1201:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43831),S=i(39429);S.register("graphics",function(u){return this.displayList.add(new d(this.scene,u))})},84503:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(77545),u=i(32768),u=i(32768),m.exports={renderWebGL:S,renderCanvas:u}},77545:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(85592),S=i(91296),u=i(61340),l=i(70554),h=function(v,x,g){this.x=v,this.y=x,this.width=g},r=function(v,x,g){this.points=[],this.pointsLength=1,this.points[0]=new h(v,x,g)},o=[],p=new u,a=function(v,x,g,y){if(x.commandBuffer.length!==0){g.addToRenderList(x);var T=v.pipelines.set(x.pipeline,x);v.pipelines.preBatch(x);for(var P=S(x,g,y).calc,A=p.loadIdentity(),b=x.commandBuffer,O=g.alpha*x.alpha,D=1,B=T.fillTint,G=T.strokeTint,V=0,k=0,U=0,W=.01,X=Math.PI*2,_,Q=[],j=0,it=!0,K=null,J=l.getTintAppendFloatAlpha,Y=0;Y<b.length;Y++)switch(_=b[Y],_){case d.BEGIN_PATH:{Q.length=0,K=null,it=!0;break}case d.CLOSE_PATH:{it=!1,K&&K.points.length&&K.points.push(K.points[0]);break}case d.FILL_PATH:{for(j=0;j<Q.length;j++)T.batchFillPath(Q[j].points,A,P);break}case d.STROKE_PATH:{for(j=0;j<Q.length;j++)T.batchStrokePath(Q[j].points,D,it,A,P);break}case d.LINE_STYLE:{D=b[++Y];var q=b[++Y],$=b[++Y]*O,et=J(q,$);G.TL=et,G.TR=et,G.BL=et,G.BR=et;break}case d.FILL_STYLE:{var rt=b[++Y],at=b[++Y]*O,lt=J(rt,at);B.TL=lt,B.TR=lt,B.BL=lt,B.BR=lt;break}case d.GRADIENT_FILL_STYLE:{var vt=b[++Y]*O,xt=b[++Y]*O,ut=b[++Y]*O,mt=b[++Y]*O;B.TL=J(b[++Y],vt),B.TR=J(b[++Y],xt),B.BL=J(b[++Y],ut),B.BR=J(b[++Y],mt);break}case d.GRADIENT_LINE_STYLE:{D=b[++Y];var Tt=b[++Y]*O;G.TL=J(b[++Y],Tt),G.TR=J(b[++Y],Tt),G.BL=J(b[++Y],Tt),G.BR=J(b[++Y],Tt);break}case d.ARC:{var bt=0,St=b[++Y],Gt=b[++Y],Nt=b[++Y],zt=b[++Y],Lt=b[++Y],ct=b[++Y],ot=b[++Y];for(Lt-=zt,ct?Lt<-X?Lt=-X:Lt>0&&(Lt=-X+Lt%X):Lt>X?Lt=X:Lt<0&&(Lt=X+Lt%X),K===null&&(K=new r(St+Math.cos(zt)*Nt,Gt+Math.sin(zt)*Nt,D),Q.push(K),bt+=W);bt<1+ot;)U=Lt*bt+zt,V=St+Math.cos(U)*Nt,k=Gt+Math.sin(U)*Nt,K.points.push(new h(V,k,D)),bt+=W;U=Lt+zt,V=St+Math.cos(U)*Nt,k=Gt+Math.sin(U)*Nt,K.points.push(new h(V,k,D));break}case d.FILL_RECT:{T.batchFillRect(b[++Y],b[++Y],b[++Y],b[++Y],A,P);break}case d.FILL_TRIANGLE:{T.batchFillTriangle(b[++Y],b[++Y],b[++Y],b[++Y],b[++Y],b[++Y],A,P);break}case d.STROKE_TRIANGLE:{T.batchStrokeTriangle(b[++Y],b[++Y],b[++Y],b[++Y],b[++Y],b[++Y],D,A,P);break}case d.LINE_TO:{K!==null?K.points.push(new h(b[++Y],b[++Y],D)):(K=new r(b[++Y],b[++Y],D),Q.push(K));break}case d.MOVE_TO:{K=new r(b[++Y],b[++Y],D),Q.push(K);break}case d.SAVE:{o.push(A.copyToArray());break}case d.RESTORE:{A.copyFromArray(o.pop());break}case d.TRANSLATE:{St=b[++Y],Gt=b[++Y],A.translate(St,Gt);break}case d.SCALE:{St=b[++Y],Gt=b[++Y],A.scale(St,Gt);break}case d.ROTATE:{A.rotate(b[++Y]);break}}v.pipelines.postBatch(x)}};m.exports=a},26479:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(61061),S=i(83419),u=i(51708),l=i(50792),h=i(46710),r=i(95540),o=i(35154),p=i(97022),a=i(41212),v=i(88492),x=i(35072),g=i(68287),y=new S({Extends:l,initialize:function(P,A,b){l.call(this),b?A&&!Array.isArray(A)&&(A=[A]):Array.isArray(A)?a(A[0])&&(b=A,A=null):a(A)&&(b=A,A=null),this.scene=P,this.children=new x,this.isParent=!0,this.type="Group",this.classType=r(b,"classType",g),this.name=r(b,"name",""),this.active=r(b,"active",!0),this.maxSize=r(b,"maxSize",-1),this.defaultKey=r(b,"defaultKey",null),this.defaultFrame=r(b,"defaultFrame",null),this.runChildUpdate=r(b,"runChildUpdate",!1),this.createCallback=r(b,"createCallback",null),this.removeCallback=r(b,"removeCallback",null),this.createMultipleCallback=r(b,"createMultipleCallback",null),this.internalCreateCallback=r(b,"internalCreateCallback",null),this.internalRemoveCallback=r(b,"internalRemoveCallback",null),A&&this.addMultiple(A),b&&this.createMultiple(b),this.on(u.ADDED_TO_SCENE,this.addedToScene,this),this.on(u.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(T,P,A,b,O,D){if(T===void 0&&(T=0),P===void 0&&(P=0),A===void 0&&(A=this.defaultKey),b===void 0&&(b=this.defaultFrame),O===void 0&&(O=!0),D===void 0&&(D=!0),this.isFull())return null;var B=new this.classType(this.scene,T,P,A,b);return B.addToDisplayList(this.scene.sys.displayList),B.addToUpdateList(),B.visible=O,B.setActive(D),this.add(B),B},createMultiple:function(T){if(this.isFull())return[];Array.isArray(T)||(T=[T]);var P=[];if(T[0].key)for(var A=0;A<T.length;A++){var b=this.createFromConfig(T[A]);P=P.concat(b)}return P},createFromConfig:function(T){if(this.isFull())return[];this.classType=r(T,"classType",this.classType);var P=r(T,"key",void 0),A=r(T,"frame",null),b=r(T,"visible",!0),O=r(T,"active",!0),D=[];if(P===void 0)return D;Array.isArray(P)||(P=[P]),Array.isArray(A)||(A=[A]);var B=r(T,"repeat",0),G=r(T,"randomKey",!1),V=r(T,"randomFrame",!1),k=r(T,"yoyo",!1),U=r(T,"quantity",!1),W=r(T,"frameQuantity",1),X=r(T,"max",0),_=v(P,A,{max:X,qty:U||W,random:G,randomB:V,repeat:B,yoyo:k});T.createCallback&&(this.createCallback=T.createCallback),T.removeCallback&&(this.removeCallback=T.removeCallback),T.internalCreateCallback&&(this.internalCreateCallback=T.internalCreateCallback),T.internalRemoveCallback&&(this.internalRemoveCallback=T.internalRemoveCallback);for(var Q=0;Q<_.length;Q++){var j=this.create(0,0,_[Q].a,_[Q].b,b,O);if(!j)break;D.push(j)}if(p(T,"setXY")){var it=o(T,"setXY.x",0),K=o(T,"setXY.y",0),J=o(T,"setXY.stepX",0),Y=o(T,"setXY.stepY",0);d.SetXY(D,it,K,J,Y)}if(p(T,"setRotation")){var q=o(T,"setRotation.value",0),$=o(T,"setRotation.step",0);d.SetRotation(D,q,$)}if(p(T,"setScale")){var et=o(T,"setScale.x",1),rt=o(T,"setScale.y",et),at=o(T,"setScale.stepX",0),lt=o(T,"setScale.stepY",0);d.SetScale(D,et,rt,at,lt)}if(p(T,"setOrigin")){var vt=o(T,"setOrigin.x",.5),xt=o(T,"setOrigin.y",vt),ut=o(T,"setOrigin.stepX",0),mt=o(T,"setOrigin.stepY",0);d.SetOrigin(D,vt,xt,ut,mt)}if(p(T,"setAlpha")){var Tt=o(T,"setAlpha.value",1),bt=o(T,"setAlpha.step",0);d.SetAlpha(D,Tt,bt)}if(p(T,"setDepth")){var St=o(T,"setDepth.value",0),Gt=o(T,"setDepth.step",0);d.SetDepth(D,St,Gt)}if(p(T,"setScrollFactor")){var Nt=o(T,"setScrollFactor.x",1),zt=o(T,"setScrollFactor.y",Nt),Lt=o(T,"setScrollFactor.stepX",0),ct=o(T,"setScrollFactor.stepY",0);d.SetScrollFactor(D,Nt,zt,Lt,ct)}var ot=r(T,"hitArea",null),Mt=r(T,"hitAreaCallback",null);ot&&d.SetHitArea(D,ot,Mt);var Ot=r(T,"gridAlign",!1);return Ot&&d.GridAlign(D,Ot),this.createMultipleCallback&&this.createMultipleCallback.call(this,D),D},preUpdate:function(T,P){if(!(!this.runChildUpdate||this.children.size===0))for(var A=this.children.entries.slice(),b=0;b<A.length;b++){var O=A[b];O.active&&O.update(T,P)}},add:function(T,P){return P===void 0&&(P=!1),this.isFull()?this:(this.children.set(T),this.internalCreateCallback&&this.internalCreateCallback.call(this,T),this.createCallback&&this.createCallback.call(this,T),P&&(T.addToDisplayList(this.scene.sys.displayList),T.addToUpdateList()),T.on(u.DESTROY,this.remove,this),this)},addMultiple:function(T,P){if(P===void 0&&(P=!1),Array.isArray(T))for(var A=0;A<T.length;A++)this.add(T[A],P);return this},remove:function(T,P,A){return P===void 0&&(P=!1),A===void 0&&(A=!1),this.children.contains(T)?(this.children.delete(T),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,T),this.removeCallback&&this.removeCallback.call(this,T),T.off(u.DESTROY,this.remove,this),A?T.destroy():P&&(T.removeFromDisplayList(),T.removeFromUpdateList()),this):this},clear:function(T,P){T===void 0&&(T=!1),P===void 0&&(P=!1);for(var A=this.children,b=0;b<A.size;b++){var O=A.entries[b];O.off(u.DESTROY,this.remove,this),P?O.destroy():T&&(O.removeFromDisplayList(),O.removeFromUpdateList())}return this.children.clear(),this},contains:function(T){return this.children.contains(T)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(T,P,A,b){return h(this.children.entries,T,P,A,b)},getFirst:function(T,P,A,b,O,D,B){return this.getHandler(!0,1,T,P,A,b,O,D,B)},getFirstNth:function(T,P,A,b,O,D,B,G){return this.getHandler(!0,T,P,A,b,O,D,B,G)},getLast:function(T,P,A,b,O,D,B){return this.getHandler(!1,1,T,P,A,b,O,D,B)},getLastNth:function(T,P,A,b,O,D,B,G){return this.getHandler(!1,T,P,A,b,O,D,B,G)},getHandler:function(T,P,A,b,O,D,B,G,V){A===void 0&&(A=!1),b===void 0&&(b=!1);var k,U,W=0,X=this.children.entries;if(T)for(U=0;U<X.length;U++)if(k=X[U],k.active===A){if(W++,W===P)break}else k=null;else for(U=X.length-1;U>=0;U--)if(k=X[U],k.active===A){if(W++,W===P)break}else k=null;return k?(typeof O=="number"&&(k.x=O),typeof D=="number"&&(k.y=D),k):b?this.create(O,D,B,G,V):null},get:function(T,P,A,b,O){return this.getFirst(!1,!0,T,P,A,b,O)},getFirstAlive:function(T,P,A,b,O,D){return this.getFirst(!0,T,P,A,b,O,D)},getFirstDead:function(T,P,A,b,O,D){return this.getFirst(!1,T,P,A,b,O,D)},playAnimation:function(T,P){return d.PlayAnimation(this.children.entries,T,P),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(T){T===void 0&&(T=!0);for(var P=0,A=0;A<this.children.size;A++)this.children.entries[A].active===T&&P++;return P},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var T=this.getTotalUsed(),P=this.maxSize===-1?999999999999:this.maxSize;return P-T},setActive:function(T){return this.active=T,this},setName:function(T){return this.name=T,this},propertyValueSet:function(T,P,A,b,O){return d.PropertyValueSet(this.children.entries,T,P,A,b,O),this},propertyValueInc:function(T,P,A,b,O){return d.PropertyValueInc(this.children.entries,T,P,A,b,O),this},setX:function(T,P){return d.SetX(this.children.entries,T,P),this},setY:function(T,P){return d.SetY(this.children.entries,T,P),this},setXY:function(T,P,A,b){return d.SetXY(this.children.entries,T,P,A,b),this},incX:function(T,P){return d.IncX(this.children.entries,T,P),this},incY:function(T,P){return d.IncY(this.children.entries,T,P),this},incXY:function(T,P,A,b){return d.IncXY(this.children.entries,T,P,A,b),this},shiftPosition:function(T,P,A){return d.ShiftPosition(this.children.entries,T,P,A),this},angle:function(T,P){return d.Angle(this.children.entries,T,P),this},rotate:function(T,P){return d.Rotate(this.children.entries,T,P),this},rotateAround:function(T,P){return d.RotateAround(this.children.entries,T,P),this},rotateAroundDistance:function(T,P,A){return d.RotateAroundDistance(this.children.entries,T,P,A),this},setAlpha:function(T,P){return d.SetAlpha(this.children.entries,T,P),this},setTint:function(T,P,A,b){return d.SetTint(this.children.entries,T,P,A,b),this},setOrigin:function(T,P,A,b){return d.SetOrigin(this.children.entries,T,P,A,b),this},scaleX:function(T,P){return d.ScaleX(this.children.entries,T,P),this},scaleY:function(T,P){return d.ScaleY(this.children.entries,T,P),this},scaleXY:function(T,P,A,b){return d.ScaleXY(this.children.entries,T,P,A,b),this},setDepth:function(T,P){return d.SetDepth(this.children.entries,T,P),this},setBlendMode:function(T){return d.SetBlendMode(this.children.entries,T),this},setHitArea:function(T,P){return d.SetHitArea(this.children.entries,T,P),this},shuffle:function(){return d.Shuffle(this.children.entries),this},kill:function(T){this.children.contains(T)&&T.setActive(!1)},killAndHide:function(T){this.children.contains(T)&&(T.setActive(!1),T.setVisible(!1))},setVisible:function(T,P,A){return d.SetVisible(this.children.entries,T,P,A),this},toggleVisible:function(){return d.ToggleVisible(this.children.entries),this},destroy:function(T,P){T===void 0&&(T=!1),P===void 0&&(P=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(u.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(P,T),this.scene=void 0,this.children=void 0)}});m.exports=y},94975:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(44603),S=i(26479);d.register("group",function(u){return new S(this.scene,null,u)})},3385:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26479),S=i(39429);S.register("group",function(u,l){return this.updateList.add(new d(this.scene,u,l))})},88571:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(31401),u=i(95643),l=i(59819),h=new d({Extends:u,Mixins:[S.Alpha,S.BlendMode,S.Depth,S.Flip,S.GetBounds,S.Mask,S.Origin,S.Pipeline,S.PostPipeline,S.ScrollFactor,S.Size,S.TextureCrop,S.Tint,S.Transform,S.Visible,l],initialize:function(o,p,a,v,x){u.call(this,o,"Image"),this._crop=this.resetCropObject(),this.setTexture(v,x),this.setPosition(p,a),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});m.exports=h},40652:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){S.addToRenderList(d),i.batchSprite(d,d.frame,S,u)};m.exports=E},82459:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),S=i(44603),u=i(23568),l=i(88571);S.register("image",function(h,r){h===void 0&&(h={});var o=u(h,"key",null),p=u(h,"frame",null),a=new l(this.scene,0,0,o,p);return r!==void 0&&(h.add=r),d(this.scene,a,h),a})},2117:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(88571),S=i(39429);S.register("image",function(u,l,h,r){return this.displayList.add(new d(this.scene,u,l,h,r))})},59819:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(99517),u=i(40652),m.exports={renderWebGL:S,renderCanvas:u}},99517:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){S.addToRenderList(d),this.pipeline.batchSprite(d,S,u)};m.exports=E},77856:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={Events:i(51708),DisplayList:i(8050),GameObjectCreator:i(44603),GameObjectFactory:i(39429),UpdateList:i(45027),Components:i(31401),GetCalcMatrix:i(91296),BuildGameObject:i(25305),BuildGameObjectAnimation:i(13059),GameObject:i(95643),BitmapText:i(22186),Blitter:i(6107),Bob:i(46590),Container:i(31559),DOMElement:i(3069),DynamicBitmapText:i(2638),Extern:i(42421),Graphics:i(43831),Group:i(26479),Image:i(88571),Layer:i(93595),Particles:i(18404),PathFollower:i(1159),RenderTexture:i(591),RetroFont:i(196),Rope:i(77757),Sprite:i(68287),Text:i(50171),GetTextSize:i(14220),MeasureText:i(79557),TextStyle:i(35762),TileSprite:i(20839),Zone:i(41481),Video:i(18471),Shape:i(17803),Arc:i(23629),Curve:i(89),Ellipse:i(19921),Grid:i(30479),IsoBox:i(61475),IsoTriangle:i(16933),Line:i(57847),Polygon:i(24949),Rectangle:i(74561),Star:i(55911),Triangle:i(36931),Factories:{Blitter:i(12709),Container:i(24961),DOMElement:i(2611),DynamicBitmapText:i(72566),Extern:i(56315),Graphics:i(1201),Group:i(3385),Image:i(2117),Layer:i(20005),Particles:i(676),PathFollower:i(90145),RenderTexture:i(60505),Rope:i(96819),Sprite:i(46409),StaticBitmapText:i(34914),Text:i(68005),TileSprite:i(91681),Zone:i(84175),Video:i(89025),Arc:i(42563),Curve:i(40511),Ellipse:i(1543),Grid:i(34137),IsoBox:i(3933),IsoTriangle:i(49803),Line:i(2481),Polygon:i(64827),Rectangle:i(87959),Star:i(93697),Triangle:i(45245)},Creators:{Blitter:i(9403),Container:i(77143),DynamicBitmapText:i(11164),Graphics:i(87079),Group:i(94975),Image:i(82459),Layer:i(25179),Particles:i(92730),RenderTexture:i(34495),Rope:i(26209),Sprite:i(15567),StaticBitmapText:i(57336),Text:i(71259),TileSprite:i(14167),Zone:i(95261),Video:i(11511)}};d.Shader=i(20071),d.Mesh=i(4703),d.NineSlice=i(28103),d.PointLight=i(80321),d.Plane=i(33663),d.Factories.Shader=i(74177),d.Factories.Mesh=i(9225),d.Factories.NineSlice=i(47521),d.Factories.PointLight=i(71255),d.Factories.Plane=i(30985),d.Creators.Shader=i(54935),d.Creators.Mesh=i(20527),d.Creators.NineSlice=i(28279),d.Creators.PointLight=i(39829),d.Creators.Plane=i(56015),d.Light=i(41432),d.LightsManager=i(61356),d.LightsPlugin=i(88992),m.exports=d},93595:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(10312),S=i(83419),u=i(31401),l=i(53774),h=i(45893),r=i(50792),o=i(51708),p=i(73162),a=i(33963),v=i(44594),x=i(19186),g=new S({Extends:p,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Mask,u.PostPipeline,u.Visible,r,a],initialize:function(T,P){p.call(this,T),r.call(this),this.scene=T,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=T.sys,this.events=T.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(d.SKIP_CHECK),P&&this.add(P),T.sys.queueDepthSort()},setActive:function(y){return this.active=y,this},setName:function(y){return this.name=y,this},setState:function(y){return this.state=y,this},setDataEnabled:function(){return this.data||(this.data=new h(this)),this},setData:function(y,T){return this.data||(this.data=new h(this)),this.data.set(y,T),this},incData:function(y,T){return this.data||(this.data=new h(this)),this.data.inc(y,T),this},toggleData:function(y){return this.data||(this.data=new h(this)),this.data.toggle(y),this},getData:function(y){return this.data||(this.data=new h(this)),this.data.get(y)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return l(this)},willRender:function(y){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&y.id)},getIndexList:function(){for(var y=this,T=this.parentContainer,P=[];T&&(P.unshift(T.getIndex(y)),y=T,T.parentContainer);)T=T.parentContainer;return P.unshift(this.displayList.getIndex(y)),P},addChildCallback:function(y){var T=y.displayList;T&&T!==this&&y.removeFromDisplayList(),y.displayList||(this.queueDepthSort(),y.displayList=this,y.emit(o.ADDED_TO_SCENE,y,this.scene),this.events.emit(v.ADDED_TO_SCENE,y,this.scene))},removeChildCallback:function(y){this.queueDepthSort(),y.displayList=null,y.emit(o.REMOVED_FROM_SCENE,y,this.scene),this.events.emit(v.REMOVED_FROM_SCENE,y,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(x(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(y,T){return y._depth-T._depth},getChildren:function(){return this.list},addToDisplayList:function(y){return y===void 0&&(y=this.scene.sys.displayList),this.displayList&&this.displayList!==y&&this.removeFromDisplayList(),y.exists(this)||(this.displayList=y,y.add(this,!0),y.queueDepthSort(),this.emit(o.ADDED_TO_SCENE,this,this.scene),y.events.emit(v.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var y=this.displayList||this.scene.sys.displayList;return y.exists(this)&&(y.remove(this,!0),y.queueDepthSort(),this.displayList=null,this.emit(o.REMOVED_FROM_SCENE,this,this.scene),y.events.emit(v.REMOVED_FROM_SCENE,this,this.scene)),this},getDisplayList:function(){var y=null;return this.parentContainer?y=this.parentContainer.list:this.displayList&&(y=this.displayList.list),y},destroy:function(y){if(!(!this.scene||this.ignoreDestroy)){this.emit(o.DESTROY,this);for(var T=this.list;T.length;)T[0].destroy(y);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0,!1),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});m.exports=g},2956:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){var u=d.list;if(u.length!==0){d.depthSort();var l=d.blendMode!==-1;l||i.setBlendMode(0);var h=d._alpha;d.mask&&d.mask.preRenderCanvas(i,null,S);for(var r=0;r<u.length;r++){var o=u[r];if(o.willRender(S)){var p=o.alpha;!l&&o.blendMode!==i.currentBlendMode&&i.setBlendMode(o.blendMode),o.setAlpha(p*h),o.renderCanvas(i,o,S),o.setAlpha(p)}}d.mask&&d.mask.postRenderCanvas(i)}};m.exports=E},25179:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),S=i(93595),u=i(44603),l=i(23568);u.register("layer",function(h,r){h===void 0&&(h={});var o=l(h,"children",null),p=new S(this.scene,o);return r!==void 0&&(h.add=r),d(this.scene,p,h),p})},20005:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(93595),S=i(39429);S.register("layer",function(u){return this.displayList.add(new d(this.scene,u))})},33963:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(15869),u=i(2956),m.exports={renderWebGL:S,renderCanvas:u}},15869:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){var u=d.list,l=u.length;if(l!==0){d.depthSort(),i.pipelines.preBatch(d);var h=d.blendMode!==-1;h||i.setBlendMode(0);for(var r=d.alpha,o=0;o<l;o++){var p=u[o];if(p.willRender(S)){var a,v,x,g;if(p.alphaTopLeft!==void 0)a=p.alphaTopLeft,v=p.alphaTopRight,x=p.alphaBottomLeft,g=p.alphaBottomRight;else{var y=p.alpha;a=y,v=y,x=y,g=y}!h&&p.blendMode!==i.currentBlendMode&&i.setBlendMode(p.blendMode);var T=p.mask;T&&T.preRenderWebGL(i,p,S);var P=p.type;P!==i.currentType&&(i.newType=!0,i.currentType=P),i.nextTypeMatch=o<l-1?u[o+1].type===i.currentType:!1,p.setAlpha(a*r,v*r,x*r,g*r),p.renderWebGL(i,p,S),p.setAlpha(a,v,x,g),T&&T.postRenderWebGL(i,S),i.newType=!1}}i.pipelines.postBatch(d)}};m.exports=E},41432:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(96503),S=i(83419),u=i(31401),l=i(51767),h=i(70554),r=new S({Extends:d,Mixins:[u.Origin,u.ScrollFactor,u.Visible],initialize:function(p,a,v,x,g,y,T){d.call(this,p,a,v),this.color=new l(x,g,y),this.intensity=T,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(v)},displayWidth:{get:function(){return this.diameter},set:function(o){this.diameter=o}},displayHeight:{get:function(){return this.diameter},set:function(o){this.diameter=o}},width:{get:function(){return this.diameter},set:function(o){this.diameter=o}},height:{get:function(){return this.diameter},set:function(o){this.diameter=o}},willRender:function(o){return!(r.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&o.id)},setColor:function(o){var p=h.getFloatsFromUintRGB(o);return this.color.set(p[0],p[1],p[2]),this},setIntensity:function(o){return this.intensity=o,this},setRadius:function(o){return this.radius=o,this}});r.RENDER_MASK=15,m.exports=r},61356:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(81491),S=i(83419),u=i(20339),l=i(41432),h=i(80321),r=i(51767),o=i(19133),p=i(19186),a=i(70554),v=new S({initialize:function(){this.lights=[],this.ambientColor=new r(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(x,g,y,T,P,A){return this.systems.displayList.add(new h(this.scene,x,g,y,T,P,A))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(x){for(var g=this.lights,y=x.worldView,T=[],P=0;P<g.length;P++){var A=g[P];A.willRender(x)&&d(A,y)&&T.push({light:A,distance:u(A.x,A.y,y.centerX,y.centerY)})}return T.length>this.maxLights&&(p(T,this.sortByDistance),T=T.slice(0,this.maxLights)),this.visibleLights=T.length,T},sortByDistance:function(x,g){return x.distance>=g.distance},setAmbientColor:function(x){var g=a.getFloatsFromUintRGB(x);return this.ambientColor.set(g[0],g[1],g[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(x,g,y,T,P){x===void 0&&(x=0),g===void 0&&(g=0),y===void 0&&(y=128),T===void 0&&(T=16777215),P===void 0&&(P=1);var A=a.getFloatsFromUintRGB(T),b=new l(x,g,y,A[0],A[1],A[2],P);return this.lights.push(b),b},removeLight:function(x){var g=this.lights.indexOf(x);return g>=0&&o(this.lights,g),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});m.exports=v},88992:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(61356),u=i(37277),l=i(44594),h=new d({Extends:S,initialize:function(o){this.scene=o,this.systems=o.sys,o.sys.settings.isBooted||o.sys.events.once(l.BOOT,this.boot,this),S.call(this)},boot:function(){var r=this.systems.events;r.on(l.SHUTDOWN,this.shutdown,this),r.on(l.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});u.register("LightsPlugin",h,"lights"),m.exports=h},4703:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(31401),u=i(39506),l=i(83997),h=i(95643),r=i(34684),o=i(92515),p=i(91296),a=i(37867),v=i(29807),x=i(43396),g=i(19186),y=i(25836),T=i(39318),P=new d({Extends:h,Mixins:[S.AlphaSingle,S.BlendMode,S.Depth,S.Mask,S.Pipeline,S.PostPipeline,S.ScrollFactor,S.Size,S.Texture,S.Transform,S.Visible,v],initialize:function(b,O,D,B,G,V,k,U,W,X,_,Q){O===void 0&&(O=0),D===void 0&&(D=0),B===void 0&&(B="__WHITE"),h.call(this,b,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new y,this.modelScale=new y(1,1,1),this.modelRotation=new y,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new a,this.viewPosition=new y,this.viewMatrix=new a,this.projectionMatrix=new a,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var j=b.sys.renderer;this.setPosition(O,D),this.setTexture(B,G),this.setSize(j.width,j.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(j.width,j.height),V&&this.addVertices(V,k,U,W,X,_,Q)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(A){return this.viewPosition.addScale(y.LEFT,A),this.dirtyCache[10]=1,this},panY:function(A){return this.viewPosition.y+=y.DOWN.y*A,this.dirtyCache[10]=1,this},panZ:function(A){return this.viewPosition.z+=A,this.dirtyCache[10]=1,this},setPerspective:function(A,b,O,D,B){return O===void 0&&(O=45),D===void 0&&(D=.01),B===void 0&&(B=1e3),this.fov=O,this.projectionMatrix.perspective(u(O),A/b,D,B),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(A,b,O,D){return A===void 0&&(A=this.scene.sys.renderer.getAspectRatio()),b===void 0&&(b=1),O===void 0&&(O=-1e3),D===void 0&&(D=1e3),this.fov=0,this.projectionMatrix.ortho(-A,A,-b,b,O,D),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(A){A.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(A,b,O,D,B,G,V,k,U){var W=this.scene.sys.cache.obj.get(A),X;return W&&(X=r(W,this,b,O,D,B,G,V,k,U)),(!X||X.verts.length===0)&&console.warn("Mesh.addVerticesFromObj data empty:",A),this},sortByDepth:function(A,b){return A.depth-b.depth},depthSort:function(){return g(this.faces,this.sortByDepth),this},addVertex:function(A,b,O,D,B,G,V){var k=new T(A,b,O,D,B,G,V);return this.vertices.push(k),k},addFace:function(A,b,O){var D=new l(A,b,O);return this.faces.push(D),this.dirtyCache[9]=-1,D},addVertices:function(A,b,O,D,B,G,V){var k=o(A,b,O,D,B,G,V);return k?(this.faces=this.faces.concat(k.faces),this.vertices=this.vertices.concat(k.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(A){return this.faces[A]},hasFaceAt:function(A,b,O){O===void 0&&(O=this.scene.sys.cameras.main);for(var D=p(this,O).calc,B=this.faces,G=0;G<B.length;G++){var V=B[G];if(V.contains(A,b,D))return!0}return!1},getFaceAt:function(A,b,O){O===void 0&&(O=this.scene.sys.cameras.main);for(var D=p(this,O).calc,B=this.faces,G=[],V=0;V<B.length;V++){var k=B[V];k.contains(A,b,D)&&G.push(k)}return g(G,this.sortByDepth)},setDebug:function(A,b){return this.debugGraphic=A,!A&&!b?this.debugCallback=null:b?this.debugCallback=b:this.debugCallback=this.renderDebug,this},isDirty:function(){var A=this.modelPosition,b=this.modelRotation,O=this.modelScale,D=this.dirtyCache,B=A.x,G=A.y,V=A.z,k=b.x,U=b.y,W=b.z,X=O.x,_=O.y,Q=O.z,j=this.getFaceCount(),it=D[0],K=D[1],J=D[2],Y=D[3],q=D[4],$=D[5],et=D[6],rt=D[7],at=D[8],lt=D[9];return D[0]=B,D[1]=G,D[2]=V,D[3]=k,D[4]=U,D[5]=W,D[6]=X,D[7]=_,D[8]=Q,D[9]=j,it!==B||K!==G||J!==V||Y!==k||q!==U||$!==W||et!==X||rt!==_||at!==Q||lt!==j},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var A=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!A[10]&&!this.isDirty())){var b=this.width,O=this.height,D=this.viewMatrix,B=this.viewPosition;A[10]&&(D.identity(),D.translate(B),D.invert(),A[10]=0);var G=this.transformMatrix;G.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var V=B.z,k=this.faces,U=0;U<k.length;U++)k[U].transformCoordinatesLocal(G,b,O,V);this.depthSort()}},renderDebug:function(A,b){for(var O=A.debugGraphic,D=0;D<b.length;D++){var B=b[D],G=B.vertex1.tx,V=B.vertex1.ty,k=B.vertex2.tx,U=B.vertex2.ty,W=B.vertex3.tx,X=B.vertex3.ty;O.strokeTriangle(G,V,k,U,W,X)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(A){A===void 0&&(A={});var b=(function(O,D,B){for(var G=this.faces,V=0;V<G.length;V++){var k=G[V];if(k.contains(D,B))return!0}return!1}).bind(this);return this.scene.sys.input.enable(this,A,b),this},setTint:function(A){A===void 0&&(A=16777215);for(var b=this.vertices,O=0;O<b.length;O++)b[O].color=A;return this},uvScroll:function(A,b){for(var O=this.faces,D=0;D<O.length;D++)O[D].scrollUV(A,b);return this},uvScale:function(A,b){for(var O=this.faces,D=0;D<O.length;D++)O[D].scaleUV(A,b);return this},tint:{set:function(A){this.setTint(A)}},rotateX:{get:function(){return x(this.modelRotation.x)},set:function(A){this.modelRotation.x=u(A)}},rotateY:{get:function(){return x(this.modelRotation.y)},set:function(A){this.modelRotation.y=u(A)}},rotateZ:{get:function(){return x(this.modelRotation.z)},set:function(A){this.modelRotation.z=u(A)}}});m.exports=P},36488:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(){};m.exports=E},20527:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),S=i(44603),u=i(23568),l=i(35154),h=i(4703);S.register("mesh",function(r,o){r===void 0&&(r={});var p=u(r,"key",null),a=u(r,"frame",null),v=l(r,"vertices",[]),x=l(r,"uvs",[]),g=l(r,"indicies",[]),y=l(r,"containsZ",!1),T=l(r,"normals",[]),P=l(r,"colors",16777215),A=l(r,"alphas",1),b=new h(this.scene,0,0,p,a,v,x,g,y,T,P,A);return o!==void 0&&(r.add=o),d(this.scene,b,r),b})},9225:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(4703),S=i(39429);S.register("mesh",function(u,l,h,r,o,p,a,v,x,g,y){return this.displayList.add(new d(this.scene,u,l,h,r,o,p,a,v,x,g,y))})},29807:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(48833),u=i(36488),m.exports={renderWebGL:S,renderCanvas:u}},48833:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),S=function(u,l,h,r){var o=l.faces,p=o.length;if(p!==0){h.addToRenderList(l);var a=u.pipelines.set(l.pipeline,l),v=d(l,h,r).calc;u.pipelines.preBatch(l);for(var x=a.setGameObject(l),g=a.vertexViewF32,y=a.vertexViewU32,T=a.vertexCount*a.currentShader.vertexComponentCount-1,P=l.tintFill,A=[],b=l.debugCallback,O=v.a,D=v.b,B=v.c,G=v.d,V=v.e,k=v.f,U=l.viewPosition.z,W=l.hideCCW,X=h.roundPixels,_=h.alpha*l.alpha,Q=0,j=0;j<p;j++){var it=o[j];it.isInView(h,W,U,_,O,D,B,G,V,k,X)&&(a.shouldFlush(3)&&(a.flush(),x=a.setGameObject(l),T=a.vertexCount*a.currentShader.vertexComponentCount-1),T=it.load(g,y,T,x,P),Q++,a.vertexCount+=3,a.currentBatch.count=a.vertexCount-a.currentBatch.start,b&&A.push(it))}l.totalFrame+=Q,b&&b.call(l,l,A),u.pipelines.postBatch(l)}};m.exports=S},28103:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(31401),u=i(95643),l=i(78023),h=i(39318),r=new d({Extends:u,Mixins:[S.AlphaSingle,S.BlendMode,S.Depth,S.GetBounds,S.Mask,S.Origin,S.Pipeline,S.PostPipeline,S.ScrollFactor,S.Texture,S.Transform,S.Visible,l],initialize:function(p,a,v,x,g,y,T,P,A,b,O){u.call(this,p,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1;var D=p.textures.getFrame(x,g);this.is3Slice=!b&&!O,D&&D.scale9&&(this.is3Slice=D.is3Slice);for(var B=this.is3Slice?18:54,G=0;G<B;G++)this.vertices.push(new h);this.setPosition(a,v),this.setTexture(x,g),this.setSlices(y,T,P,A,b,O,!1),this.updateDisplayOrigin(),this.initPipeline(),this.initPostPipeline()},setSlices:function(o,p,a,v,x,g,y){a===void 0&&(a=10),v===void 0&&(v=10),x===void 0&&(x=0),g===void 0&&(g=0),y===void 0&&(y=!1);var T=this.frame,P=!1;if(this.is3Slice&&y&&x!==0&&g!==0&&(P=!0),P)console.warn("Cannot change 9 slice to 3 slice");else{if(T&&T.scale9&&!y){var A=T.data.scale9Borders,b=A.x,O=A.y;a=b,v=T.width-A.w-b,x=O,g=T.height-A.h-O,o===void 0&&(o=T.width),p===void 0&&(p=T.height)}else o===void 0&&(o=256),p===void 0&&(p=256);this._width=o,this._height=p,this.leftWidth=a,this.rightWidth=v,this.topHeight=x,this.bottomHeight=g,this.is3Slice&&(p=T.height,this._height=p,this.topHeight=p,this.bottomHeight=0),this.updateVertices(),this.updateUVs()}return this},updateUVs:function(){var o=this.leftWidth,p=this.rightWidth,a=this.topHeight,v=this.bottomHeight,x=this.frame.width,g=this.frame.height;this.updateQuadUVs(0,0,0,o/x,a/g),this.updateQuadUVs(6,o/x,0,1-p/x,a/g),this.updateQuadUVs(12,1-p/x,0,1,a/g),this.is3Slice||(this.updateQuadUVs(18,0,a/g,o/x,1-v/g),this.updateQuadUVs(24,o/x,a/g,1-p/x,1-v/g),this.updateQuadUVs(30,1-p/x,a/g,1,1-v/g),this.updateQuadUVs(36,0,1-v/g,o/x,1),this.updateQuadUVs(42,o/x,1-v/g,1-p/x,1),this.updateQuadUVs(48,1-p/x,1-v/g,1,1))},updateVertices:function(){var o=this.leftWidth,p=this.rightWidth,a=this.topHeight,v=this.bottomHeight,x=this.width,g=this.height;this.updateQuad(0,-.5,.5,-.5+o/x,.5-a/g),this.updateQuad(6,-.5+o/x,.5,.5-p/x,.5-a/g),this.updateQuad(12,.5-p/x,.5,.5,.5-a/g),this.is3Slice||(this.updateQuad(18,-.5,.5-a/g,-.5+o/x,-.5+v/g),this.updateQuad(24,-.5+o/x,.5-a/g,.5-p/x,-.5+v/g),this.updateQuad(30,.5-p/x,.5-a/g,.5,-.5+v/g),this.updateQuad(36,-.5,-.5+v/g,-.5+o/x,-.5),this.updateQuad(42,-.5+o/x,-.5+v/g,.5-p/x,-.5),this.updateQuad(48,.5-p/x,-.5+v/g,.5,-.5))},updateQuad:function(o,p,a,v,x){var g=this.width,y=this.height,T=this.originX,P=this.originY,A=this.vertices;A[o+0].resize(p,a,g,y,T,P),A[o+1].resize(p,x,g,y,T,P),A[o+2].resize(v,a,g,y,T,P),A[o+3].resize(p,x,g,y,T,P),A[o+4].resize(v,x,g,y,T,P),A[o+5].resize(v,a,g,y,T,P)},updateQuadUVs:function(o,p,a,v,x){var g=this.vertices,y=this.frame,T=y.u0,P=y.v0,A=y.u1,b=y.v1;if(T!==0||A!==1){var O=A-T;p=T+p*O,v=T+v*O}if(P!==0||b!==1){var D=b-P;a=P+a*D,x=P+x*D}g[o+0].setUVs(p,a),g[o+1].setUVs(p,x),g[o+2].setUVs(v,a),g[o+3].setUVs(p,x),g[o+4].setUVs(v,x),g[o+5].setUVs(v,a)},clearTint:function(){return this.setTint(16777215),this},setTint:function(o){return o===void 0&&(o=16777215),this.tint=o,this.tintFill=!1,this},setTintFill:function(o){return this.setTint(o),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(o){this._width=Math.max(o,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(o){this.is3Slice||(this._height=Math.max(o,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(o){this.scaleX=o/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(o){this.scaleY=o/this.height}},setSize:function(o,p){this.width=o,this.height=p,this.updateDisplayOrigin();var a=this.input;return a&&!a.customHitArea&&(a.hitArea.width=this.width,a.hitArea.height=this.height),this},setDisplaySize:function(o,p){return this.displayWidth=o,this.displayHeight=p,this},originX:{get:function(){return this._originX},set:function(o){this._originX=o,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(o){this._originY=o,this.updateVertices()}},setOrigin:function(o,p){return o===void 0&&(o=.5),p===void 0&&(p=o),this._originX=o,this._originY=p,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var o=this.frame.height;this._height=o,this.topHeight=o,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});m.exports=r},28279:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),S=i(44603),u=i(23568),l=i(35154),h=i(28103);S.register("nineslice",function(r,o){r===void 0&&(r={});var p=u(r,"key",null),a=u(r,"frame",null),v=l(r,"width",256),x=l(r,"height",256),g=l(r,"leftWidth",10),y=l(r,"rightWidth",10),T=l(r,"topHeight",0),P=l(r,"bottomHeight",0),A=new h(this.scene,0,0,p,a,v,x,g,y,T,P);return o!==void 0&&(r.add=o),d(this.scene,A,r),A})},47521:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(28103),S=i(39429);S.register("nineslice",function(u,l,h,r,o,p,a,v,x,g){return this.displayList.add(new d(this.scene,u,l,h,r,o,p,a,v,x,g))})},78023:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(52230),m.exports={renderWebGL:S,renderCanvas:u}},52230:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),S=i(70554),u=function(l,h,r,o){var p=h.vertices,a=p.length;if(a!==0){r.addToRenderList(h);var v=l.pipelines.set(h.pipeline,h),x=d(h,r,o,!1).calc;l.pipelines.preBatch(h);var g=v.setGameObject(h),y=v.vertexViewF32,T=v.vertexViewU32,P=v.vertexCount*v.currentShader.vertexComponentCount-1,A=r.roundPixels,b=h.tintFill,O=r.alpha*h.alpha,D=S.getTintAppendFloatAlpha(h.tint,O),B=v.vertexAvailable(),G=-1;B<a&&(G=B);for(var V=0;V<a;V++){var k=p[V];V===G&&(v.flush(),g=v.setGameObject(h),P=0),y[++P]=x.getXRound(k.vx,k.vy,A),y[++P]=x.getYRound(k.vx,k.vy,A),y[++P]=k.u,y[++P]=k.v,y[++P]=g,y[++P]=b,T[++P]=D,v.vertexCount++,v.currentBatch.count=v.vertexCount-v.currentBatch.start}l.pipelines.postBatch(h)}};m.exports=u},76472:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(44777),u=i(37589),l=i(6113),h=i(91389),r=i(90664),o=new d({Extends:S,initialize:function(a){S.call(this,a,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var p=this.propertyValue,a=p,v=this.defaultEmit,x=this.defaultUpdate;if(this.method===9){this.start=p[0],this.ease=l("Linear"),this.interpolation=h("linear"),v=this.easedValueEmit,x=this.easeValueUpdate,a=p[0],this.active=!0,this.r.length=0,this.g.length=0,this.b.length=0;for(var g=0;g<p.length;g++){var y=r(p[g]);this.r.push(y.r),this.g.push(y.g),this.b.push(y.b)}}return this.onEmit=v,this.onUpdate=x,this.current=a,this},setEase:function(p){this.easeName=p,this.ease=l(p)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(p,a,v){var x=this.ease(v),g=this.interpolation(this.r,x),y=this.interpolation(this.g,x),T=this.interpolation(this.b,x),P=u(g,y,T);return this.current=P,P}});m.exports=o},44777:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(30976),S=i(45319),u=i(83419),l=i(99472),h=i(6113),r=i(95540),o=i(91389),p=i(77720),a=i(15994),v=new u({initialize:function(g,y,T){T===void 0&&(T=!1),this.propertyKey=g,this.propertyValue=y,this.defaultValue=y,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=T,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(x,g){x===void 0&&(x={}),g&&(this.propertyKey=g),this.propertyValue=r(x,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(x){var g;switch(this.method){case 1:case 3:case 8:g=x;break;case 2:this.propertyValue.indexOf(x)>=0&&(g=x);break;case 4:var y=(this.end-this.start)/this.steps;g=p(x,y),this.counter=g;break;case 5:case 6:case 7:g=S(x,this.start,this.end);break;case 9:g=this.start[0];break}return this.current=g,this},getMethod:function(){var x=this.propertyValue;if(x===null)return 0;var g=typeof x;if(g==="number")return 1;if(Array.isArray(x))return 2;if(g==="function")return 3;if(g==="object"){if(this.hasBoth(x,"start","end"))return this.has(x,"steps")?4:5;if(this.hasBoth(x,"min","max"))return 6;if(this.has(x,"random"))return 7;if(this.hasEither(x,"onEmit","onUpdate"))return 8;if(this.hasEither(x,"values","interpolation"))return 9}return 0},setMethods:function(){var x=this.propertyValue,g=x,y=this.defaultEmit,T=this.defaultUpdate;switch(this.method){case 1:y=this.staticValueEmit;break;case 2:y=this.randomStaticValueEmit,g=x[0];break;case 3:this._onEmit=x,y=this.proxyEmit,g=this.defaultValue;break;case 4:this.start=x.start,this.end=x.end,this.steps=x.steps,this.counter=this.start,this.yoyo=this.has(x,"yoyo")?x.yoyo:!1,this.direction=0,y=this.steppedEmit,g=this.start;break;case 5:this.start=x.start,this.end=x.end;var P=this.has(x,"ease")?x.ease:"Linear";this.ease=h(P,x.easeParams),y=this.has(x,"random")&&x.random?this.randomRangedValueEmit:this.easedValueEmit,T=this.easeValueUpdate,g=this.start;break;case 6:this.start=x.min,this.end=x.max,y=this.has(x,"int")&&x.int?this.randomRangedIntEmit:this.randomRangedValueEmit,g=this.start;break;case 7:var A=x.random;Array.isArray(A)&&(this.start=A[0],this.end=A[1]),y=this.randomRangedIntEmit,g=this.start;break;case 8:this._onEmit=this.has(x,"onEmit")?x.onEmit:this.defaultEmit,this._onUpdate=this.has(x,"onUpdate")?x.onUpdate:this.defaultUpdate,y=this.proxyEmit,T=this.proxyUpdate,g=this.defaultValue;break;case 9:this.start=x.values;var b=this.has(x,"ease")?x.ease:"Linear";this.ease=h(b,x.easeParams),this.interpolation=o(x.interpolation),y=this.easedValueEmit,T=this.easeValueUpdate,g=this.start[0];break}return this.onEmit=y,this.onUpdate=T,this.current=g,this},has:function(x,g){return x.hasOwnProperty(g)},hasBoth:function(x,g,y){return x.hasOwnProperty(g)&&x.hasOwnProperty(y)},hasEither:function(x,g,y){return x.hasOwnProperty(g)||x.hasOwnProperty(y)},defaultEmit:function(){return this.defaultValue},defaultUpdate:function(x,g,y,T){return T},proxyEmit:function(x,g,y){var T=this._onEmit(x,g,y);return this.current=T,T},proxyUpdate:function(x,g,y,T){var P=this._onUpdate(x,g,y,T);return this.current=P,P},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var x=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[x],this.current},randomRangedValueEmit:function(x,g){var y=l(this.start,this.end);return x&&x.data[g]&&(x.data[g].min=y,x.data[g].max=this.end),this.current=y,y},randomRangedIntEmit:function(x,g){var y=d(this.start,this.end);return x&&x.data[g]&&(x.data[g].min=y,x.data[g].max=this.end),this.current=y,y},steppedEmit:function(){var x=this.counter,g=x,y=(this.end-this.start)/this.steps;if(this.yoyo){var T;this.direction===0?(g+=y,g>=this.end&&(T=g-this.end,g=this.end-T,this.direction=1)):(g-=y,g<=this.start&&(T=this.start-g,g=this.start+T,this.direction=0)),this.counter=g}else this.counter=a(g+y,this.start,this.end);return this.current=x,x},easedValueEmit:function(x,g){if(x&&x.data[g]){var y=x.data[g];y.min=this.start,y.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(x,g,y){var T=x.data[g],P,A=this.ease(y);return this.interpolation?P=this.interpolation(this.start,A):P=(T.max-T.min)*A+T.min,this.current=P,P},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});m.exports=v},24502:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(95540),u=i(20286),l=new d({Extends:u,initialize:function(r,o,p,a,v){if(typeof r=="object"){var x=r;r=S(x,"x",0),o=S(x,"y",0),p=S(x,"power",0),a=S(x,"epsilon",100),v=S(x,"gravity",50)}else r===void 0&&(r=0),o===void 0&&(o=0),p===void 0&&(p=0),a===void 0&&(a=100),v===void 0&&(v=50);u.call(this,r,o,!0),this._gravity=v,this._power=p*v,this._epsilon=a*a},update:function(h,r){var o=this.x-h.x,p=this.y-h.y,a=o*o+p*p;if(a!==0){var v=Math.sqrt(a);a<this._epsilon&&(a=this._epsilon);var x=this._power*r/(a*v)*100;h.velocityX+=o*x,h.velocityY+=p*x}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(h){this._epsilon=h*h}},power:{get:function(){return this._power/this._gravity},set:function(h){this._power=h*this._gravity}},gravity:{get:function(){return this._gravity},set:function(h){var r=this.power;this._gravity=h,this.power=r}}});m.exports=l},56480:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(9674),S=i(45319),u=i(83419),l=i(39506),h=i(87841),r=i(11520),o=i(26099),p=new u({initialize:function(v){this.emitter=v,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new o,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=v.scene,this.anims=null,this.emitter.anims.length>0&&(this.anims=new d(this)),this.bounds=new h},emit:function(a,v,x,g,y,T){return this.emitter.emit(a,v,x,g,y,T)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(a,v){a===void 0&&(a=0),v===void 0&&(v=0),this.x=a,this.y=v},fire:function(a,v){var x=this.emitter,g=x.ops,y=x.getAnim();if(y?this.anims.play(y):(this.frame=x.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(x.getEmitZone(this),a===void 0?this.x+=g.x.onEmit(this,"x"):g.x.steps>0?this.x+=a+g.x.onEmit(this,"x"):this.x+=a,v===void 0?this.y+=g.y.onEmit(this,"y"):g.y.steps>0?this.y+=v+g.y.onEmit(this,"y"):this.y+=v,this.life=g.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=g.delay.onEmit(this,"delay"),this.holdCurrent=g.hold.onEmit(this,"hold"),this.scaleX=g.scaleX.onEmit(this,"scaleX"),this.scaleY=g.scaleY.active?g.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=g.rotate.onEmit(this,"rotate"),this.rotation=l(this.angle),x.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&x.getDeathZone(this))return this.lifeCurrent=0,!1;var T=g.speedX.onEmit(this,"speedX"),P=g.speedY.active?g.speedY.onEmit(this,"speedY"):T;if(x.radial){var A=l(g.angle.onEmit(this,"angle"));this.velocityX=Math.cos(A)*Math.abs(T),this.velocityY=Math.sin(A)*Math.abs(P)}else if(x.moveTo){var b=g.moveToX.onEmit(this,"moveToX"),O=g.moveToY.onEmit(this,"moveToY"),D=this.life/1e3;this.velocityX=(b-this.x)/D,this.velocityY=(O-this.y)/D}else this.velocityX=T,this.velocityY=P;return x.acceleration&&(this.accelerationX=g.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=g.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=g.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=g.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=g.bounce.onEmit(this,"bounce"),this.alpha=g.alpha.onEmit(this,"alpha"),g.color.active?this.tint=g.color.onEmit(this,"tint"):this.tint=g.tint.onEmit(this,"tint"),!0},update:function(a,v,x){if(this.lifeCurrent<=0)return this.holdCurrent>0?(this.holdCurrent-=a,this.holdCurrent<=0):!0;if(this.delayCurrent>0)return this.delayCurrent-=a,!1;this.anims&&this.anims.update(0,a);var g=this.emitter,y=g.ops,T=1-this.lifeCurrent/this.life;if(this.lifeT=T,this.x=y.x.onUpdate(this,"x",T,this.x),this.y=y.y.onUpdate(this,"y",T,this.y),g.moveTo){var P=y.moveToX.onUpdate(this,"moveToX",T,g.moveToX),A=y.moveToY.onUpdate(this,"moveToY",T,g.moveToY),b=this.lifeCurrent/1e3;this.velocityX=(P-this.x)/b,this.velocityY=(A-this.y)/b}return this.computeVelocity(g,a,v,x,T),this.scaleX=y.scaleX.onUpdate(this,"scaleX",T,this.scaleX),y.scaleY.active?this.scaleY=y.scaleY.onUpdate(this,"scaleY",T,this.scaleY):this.scaleY=this.scaleX,this.angle=y.rotate.onUpdate(this,"rotate",T,this.angle),this.rotation=l(this.angle),g.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=S(y.alpha.onUpdate(this,"alpha",T,this.alpha),0,1),y.color.active?this.tint=y.color.onUpdate(this,"color",T,this.tint):this.tint=y.tint.onUpdate(this,"tint",T,this.tint),this.lifeCurrent-=a,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(a,v,x,g,y){var T=a.ops,P=this.velocityX,A=this.velocityY,b=T.accelerationX.onUpdate(this,"accelerationX",y,this.accelerationX),O=T.accelerationY.onUpdate(this,"accelerationY",y,this.accelerationY),D=T.maxVelocityX.onUpdate(this,"maxVelocityX",y,this.maxVelocityX),B=T.maxVelocityY.onUpdate(this,"maxVelocityY",y,this.maxVelocityY);this.bounce=T.bounce.onUpdate(this,"bounce",y,this.bounce),P+=a.gravityX*x+b*x,A+=a.gravityY*x+O*x,P=S(P,-D,D),A=S(A,-B,B),this.velocityX=P,this.velocityY=A,this.x+=P*x,this.y+=A*x,a.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var G=0;G<g.length;G++){var V=g[G];V.active&&V.update(this,v,x,y)}},setSizeToFrame:function(){},getBounds:function(a){a===void 0&&(a=this.emitter.getWorldTransformMatrix());var v=Math.abs(a.scaleX)*this.scaleX,x=Math.abs(a.scaleY)*this.scaleY,g=this.x,y=this.y,T=this.rotation,P=this.frame.width*v/2,A=this.frame.height*x/2,b=this.bounds,O=new o(g-P,y-A),D=new o(g+P,y-A),B=new o(g-P,y+A),G=new o(g+P,y+A);return T!==0&&(r(O,g,y,T),r(D,g,y,T),r(B,g,y,T),r(G,g,y,T)),a.transformPoint(O.x,O.y,O),a.transformPoint(D.x,D.y,D),a.transformPoint(B.x,B.y,B),a.transformPoint(G.x,G.y,G),b.x=Math.min(O.x,D.x,B.x,G.x),b.y=Math.min(O.y,D.y,B.y,G.y),b.width=Math.max(O.x,D.x,B.x,G.x)-b.x,b.height=Math.max(O.y,D.y,B.y,G.y)-b.y,b},destroy:function(){this.anims&&this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});m.exports=p},69601:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(20286),u=i(87841),l=new d({Extends:S,initialize:function(r,o,p,a,v,x,g,y){v===void 0&&(v=!0),x===void 0&&(x=!0),g===void 0&&(g=!0),y===void 0&&(y=!0),S.call(this,r,o,!0),this.bounds=new u(r,o,p,a),this.collideLeft=v,this.collideRight=x,this.collideTop=g,this.collideBottom=y},update:function(h){var r=this.bounds,o=-h.bounce,p=h.worldPosition;p.x<r.x&&this.collideLeft?(h.x+=r.x-p.x,h.velocityX*=o):p.x>r.right&&this.collideRight&&(h.x-=p.x-r.right,h.velocityX*=o),p.y<r.y&&this.collideTop?(h.y+=r.y-p.y,h.velocityY*=o):p.y>r.bottom&&this.collideBottom&&(h.y-=p.y-r.bottom,h.velocityY*=o)}});m.exports=l},31600:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(31401),u=i(53774),l=i(43459),h=i(26388),r=i(19909),o=i(76472),p=i(44777),a=i(20696),v=i(95643),x=i(95540),g=i(26546),y=i(24502),T=i(69036),P=i(1985),A=i(97022),b=i(86091),O=i(73162),D=i(20074),B=i(269),G=i(56480),V=i(69601),k=i(68875),U=i(87841),W=i(59996),X=i(72905),_=i(90668),Q=i(19186),j=i(61340),it=i(26099),K=i(15994),J=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],Y=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],q=new d({Extends:v,Mixins:[S.AlphaSingle,S.BlendMode,S.Depth,S.Mask,S.Pipeline,S.PostPipeline,S.ScrollFactor,S.Texture,S.Transform,S.Visible,_],initialize:function(et,rt,at,lt,vt){v.call(this,et,"ParticleEmitter"),this.particleClass=G,this.config=null,this.ops={accelerationX:new p("accelerationX",0),accelerationY:new p("accelerationY",0),alpha:new p("alpha",1),angle:new p("angle",{min:0,max:360},!0),bounce:new p("bounce",0),color:new o("color"),delay:new p("delay",0,!0),hold:new p("hold",0,!0),lifespan:new p("lifespan",1e3,!0),maxVelocityX:new p("maxVelocityX",1e4),maxVelocityY:new p("maxVelocityY",1e4),moveToX:new p("moveToX",0),moveToY:new p("moveToY",0),quantity:new p("quantity",1,!0),rotate:new p("rotate",0),scaleX:new p("scaleX",1),scaleY:new p("scaleY",1),speedX:new p("speedX",0,!0),speedY:new p("speedY",0,!0),tint:new p("tint",16777215),x:new p("x",0),y:new p("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new it,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new j,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new O(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(rt,at),this.setTexture(lt),vt&&this.setConfig(vt)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function($){if(!$)return this;this.config=$;var et=0,rt="",at=this.ops;for(et=0;et<Y.length;et++)rt=Y[et],at[rt].loadConfig($);for(et=0;et<J.length;et++)rt=J[et],A($,rt)&&(this[rt]=x($,rt));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=T($,["moveToX","moveToY"]),A($,"speed")&&(at.speedX.loadConfig($,"speed"),at.speedY.active=!1),(P($,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),A($,"scale")&&(at.scaleX.loadConfig($,"scale"),at.scaleY.active=!1),A($,"callbackScope")){var lt=x($,"callbackScope",null);this.emitCallbackScope=lt,this.deathCallbackScope=lt}if(A($,"emitZone")&&this.addEmitZone($.emitZone),A($,"deathZone")&&this.addDeathZone($.deathZone),A($,"bounds")){var vt=this.addParticleBounds($.bounds);vt.collideLeft=x($,"collideLeft",!0),vt.collideRight=x($,"collideRight",!0),vt.collideTop=x($,"collideTop",!0),vt.collideBottom=x($,"collideBottom",!0)}return A($,"followOffset")&&this.followOffset.setFromObject(x($,"followOffset",0)),A($,"texture")&&this.setTexture($.texture),A($,"frame")?this.setEmitterFrame($.frame):A($,"anim")&&this.setAnim($.anim),A($,"reserve")&&this.reserve($.reserve),A($,"advance")&&this.fastForward($.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(a.START,this),this},updateConfig:function($){return $&&(this.config?this.setConfig(B(this.config,$)):this.setConfig($)),this},toJSON:function(){var $=u(this),et=0,rt="";for(et=0;et<J.length;et++)rt=J[et],$[rt]=this[rt];var at=this.ops;for(et=0;et<Y.length;et++)rt=Y[et],at[rt]&&($[rt]=at[rt].toJSON());return at.speedY.active||(delete $.speedX,$.speed=at.speedX.toJSON()),this.scaleX===this.scaleY&&(delete $.scaleX,delete $.scaleY,$.scale=at.scaleX.toJSON()),$},resetCounters:function($,et){var rt=this.counters;rt.fill(0),rt[0]=$,et&&(rt[5]=1)},startFollow:function($,et,rt,at){return et===void 0&&(et=0),rt===void 0&&(rt=0),at===void 0&&(at=!1),this.follow=$,this.followOffset.set(et,rt),this.trackVisible=at,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var $=this.frames,et=$.length,rt;return et===1?rt=$[0]:this.randomFrame?rt=g($):(rt=$[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===et&&(this.currentFrame=0))),this.texture.get(rt)},setEmitterFrame:function($,et,rt){et===void 0&&(et=!0),rt===void 0&&(rt=1),this.randomFrame=et,this.frameQuantity=rt,this.currentFrame=0;var at=typeof $;if(this.frames.length=0,Array.isArray($))this.frames=this.frames.concat($);else if(at==="string"||at==="number")this.frames.push($);else if(at==="object"){var lt=$;$=x(lt,"frames",null),$&&(this.frames=this.frames.concat($));var vt=x(lt,"cycle",!1);this.randomFrame=!vt,this.frameQuantity=x(lt,"quantity",rt)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var $=this.anims,et=$.length;if(et===0)return null;if(et===1)return $[0];if(this.randomAnim)return g($);var rt=$[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=K(this.currentAnim+1,0,et)),rt},setAnim:function($,et,rt){et===void 0&&(et=!0),rt===void 0&&(rt=1),this.randomAnim=et,this.animQuantity=rt,this.currentAnim=0;var at=typeof $;if(this.anims.length=0,Array.isArray($))this.anims=this.anims.concat($);else if(at==="string")this.anims.push($);else if(at==="object"){var lt=$;$=x(lt,"anims",null),$&&(this.anims=this.anims.concat($));var vt=x(lt,"cycle",!1);this.randomAnim=!vt,this.animQuantity=x(lt,"quantity",rt)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function($){return $===void 0&&($=!0),this.radial=$,this},addParticleBounds:function($,et,rt,at,lt,vt,xt,ut){if(typeof $=="object"){var mt=$;$=mt.x,et=mt.y,rt=A(mt,"w")?mt.w:mt.width,at=A(mt,"h")?mt.h:mt.height}return this.addParticleProcessor(new V($,et,rt,at,lt,vt,xt,ut))},setParticleSpeed:function($,et){return et===void 0&&(et=$),this.ops.speedX.onChange($),$===et?this.ops.speedY.active=!1:this.ops.speedY.onChange(et),this.radial=!0,this},setParticleScale:function($,et){return $===void 0&&($=1),et===void 0&&(et=$),this.ops.scaleX.onChange($),this.ops.scaleY.onChange(et),this},setParticleGravity:function($,et){return this.gravityX=$,this.gravityY=et,this},setParticleAlpha:function($){return this.ops.alpha.onChange($),this},setParticleTint:function($){return this.ops.tint.onChange($),this},setEmitterAngle:function($){return this.ops.angle.onChange($),this},setParticleLifespan:function($){return this.ops.lifespan.onChange($),this},setQuantity:function($){return this.quantity=$,this},setFrequency:function($,et){return this.frequency=$,this.flowCounter=$>0?$:0,et&&(this.quantity=et),this},addDeathZone:function($){Array.isArray($)||($=[$]);for(var et,rt=[],at=0;at<$.length;at++)if(et=$[at],et instanceof h)rt.push(et);else if(typeof et.contains=="function")et=new h(et,!0),rt.push(et);else{var lt=x(et,"type","onEnter"),vt=x(et,"source",null);if(vt&&typeof vt.contains=="function"){var xt=lt==="onEnter";et=new h(vt,xt),rt.push(et)}}return this.deathZones=this.deathZones.concat(rt),rt},removeDeathZone:function($){return X(this.deathZones,$),this},clearDeathZones:function(){return this.deathZones.length=0,this},addEmitZone:function($){Array.isArray($)||($=[$]);for(var et,rt=[],at=0;at<$.length;at++)if(et=$[at],et instanceof k||et instanceof r)rt.push(et);else{var lt=x(et,"source",null);if(lt){var vt=x(et,"type","random");if(vt==="random"&&typeof lt.getRandomPoint=="function")et=new k(lt),rt.push(et);else if(vt==="edge"&&typeof lt.getPoints=="function"){var xt=x(et,"quantity",1),ut=x(et,"stepRate",0),mt=x(et,"yoyo",!1),Tt=x(et,"seamless",!0),bt=x(et,"total",-1);et=new r(lt,xt,ut,mt,Tt,bt),rt.push(et)}}}return this.emitZones=this.emitZones.concat(rt),rt},removeEmitZone:function($){return X(this.emitZones,$),this.zoneIndex=0,this},clearEmitZones:function(){return this.emitZones.length=0,this.zoneIndex=0,this},getEmitZone:function($){var et=this.emitZones,rt=et.length;if(rt!==0){var at=et[this.zoneIndex];at.getPoint($),at.total>-1&&(this.zoneTotal++,this.zoneTotal===at.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===rt&&(this.zoneIndex=0)))}},getDeathZone:function($){for(var et=this.deathZones,rt=0;rt<et.length;rt++){var at=et[rt];if(at.willKill($))return this.emit(a.DEATH_ZONE,this,$,at),!0}return!1},setEmitZone:function($){var et;return isFinite($)?et=$:et=this.emitZones.indexOf($),et>=0&&(this.zoneIndex=et),this},addParticleProcessor:function($){return this.processors.exists($)||($.emitter&&$.emitter.removeParticleProcessor($),this.processors.add($),$.emitter=this),$},removeParticleProcessor:function($){return this.processors.exists($)&&(this.processors.remove($,!0),$.emitter=null),$},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function($){return this.addParticleProcessor(new y($))},reserve:function($){var et=this.dead;if(this.maxParticles>0){var rt=this.getParticleCount();rt+$>this.maxParticles&&($=this.maxParticles-(rt+$))}for(var at=0;at<$;at++)et.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function($,et){return $===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof $=="function"&&(this.emitCallback=$,et&&(this.emitCallbackScope=et)),this},onParticleDeath:function($,et){return $===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof $=="function"&&(this.deathCallback=$,et&&(this.deathCallbackScope=et)),this},killAll:function(){for(var $=this.dead,et=this.alive;et.length>0;)$.push(et.pop());return this},forEachAlive:function($,et){for(var rt=this.alive,at=rt.length,lt=0;lt<at;lt++)$.call(et,rt[lt],this);return this},forEachDead:function($,et){for(var rt=this.dead,at=rt.length,lt=0;lt<at;lt++)$.call(et,rt[lt],this);return this},start:function($,et){return $===void 0&&($=0),this.emitting||($>0&&this.fastForward($),this.emitting=!0,this.resetCounters(this.frequency,!0),et!==void 0&&(this.duration=Math.abs(et)),this.emit(a.START,this)),this},stop:function($){return $===void 0&&($=!1),this.emitting&&(this.emitting=!1,$&&this.killAll(),this.emit(a.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function($,et){return $===void 0&&($=""),et===void 0&&(et=this.true),this.sortProperty=$,this.sortOrderAsc=et,this.sortCallback=this.depthSortCallback,this},setSortCallback:function($){return this.sortProperty!==""?$=this.depthSortCallback:$=null,this.sortCallback=$,this},depthSort:function(){return Q(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function($,et){var rt=this.sortProperty;return this.sortOrderAsc?$[rt]-et[rt]:et[rt]-$[rt]},flow:function($,et,rt){return et===void 0&&(et=1),this.emitting=!1,this.frequency=$,this.quantity=et,rt!==void 0&&(this.stopAfter=rt),this.start()},explode:function($,et,rt){this.frequency=-1,this.resetCounters(-1,!0);var at=this.emitParticle($,et,rt);return this.emit(a.EXPLODE,this,at),at},emitParticleAt:function($,et,rt){return this.emitParticle(rt,$,et)},emitParticle:function($,et,rt){if(!this.atLimit()){$===void 0&&($=this.ops.quantity.onEmit());for(var at=this.dead,lt=this.stopAfter,vt=this.follow?this.follow.x+this.followOffset.x:et,xt=this.follow?this.follow.y+this.followOffset.y:rt,ut=0;ut<$;ut++){var mt=at.pop();if(mt||(mt=new this.particleClass(this)),mt.fire(vt,xt)?(this.particleBringToTop?this.alive.push(mt):this.alive.unshift(mt),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,mt,this)):this.dead.push(mt),lt>0&&(this.stopCounter++,this.stopCounter>=lt)||this.atLimit())break}return mt}},fastForward:function($,et){et===void 0&&(et=1e3/60);var rt=0;for(this.skipping=!0;rt<Math.abs($);)this.preUpdate(0,et),rt+=et;return this.skipping=!1,this},preUpdate:function($,et){et*=this.timeScale;var rt=et/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var at=this.getProcessors(),lt=this.alive,vt=this.dead,xt=0,ut=[],mt=lt.length;for(xt=0;xt<mt;xt++){var Tt=lt[xt];Tt.update(et,rt,at)&&ut.push({index:xt,particle:Tt})}if(mt=ut.length,mt>0){var bt=this.deathCallback,St=this.deathCallbackScope;for(xt=mt-1;xt>=0;xt--){var Gt=ut[xt];lt.splice(Gt.index,1),vt.push(Gt.particle),bt&&bt.call(St,Gt.particle),Gt.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&lt.length===0&&(this.completeFlag=0,this.emit(a.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=et;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=et,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function($){for(var et=this.getWorldTransformMatrix(),rt=this.alive,at=rt.length,lt=[],vt=0;vt<at;vt++){var xt=rt[vt];W($,xt.getBounds(et))&&lt.push(xt)}return lt},getBounds:function($,et,rt,at){$===void 0&&($=0),et===void 0&&(et=0),rt===void 0&&(rt=1e3/60),at===void 0&&(at=new U);var lt=this.getWorldTransformMatrix(),vt,xt,ut=this.alive,mt=!1;if(at.setTo(0,0,0,0),et>0){var Tt=0;for(this.skipping=!0;Tt<Math.abs(et);){for(this.preUpdate(0,rt),vt=0;vt<ut.length;vt++)xt=ut[vt].getBounds(lt),mt?D(at,xt):(mt=!0,l(xt,at));Tt+=rt}this.skipping=!1}else for(vt=0;vt<ut.length;vt++)xt=ut[vt].getBounds(lt),mt?D(at,xt):(mt=!0,l(xt,at));return $>0&&b(at,$,$),at},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function($){this.ops.x.onChange($)}},particleY:{get:function(){return this.ops.y.current},set:function($){this.ops.y.onChange($)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function($){this.ops.accelerationX.onChange($)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function($){this.ops.accelerationY.onChange($)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function($){this.ops.maxVelocityX.onChange($)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function($){this.ops.maxVelocityY.onChange($)}},speed:{get:function(){return this.ops.speedX.current},set:function($){this.ops.speedX.onChange($),this.ops.speedY.onChange($)}},speedX:{get:function(){return this.ops.speedX.current},set:function($){this.ops.speedX.onChange($)}},speedY:{get:function(){return this.ops.speedY.current},set:function($){this.ops.speedY.onChange($)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function($){this.ops.moveToX.onChange($)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function($){this.ops.moveToY.onChange($)}},bounce:{get:function(){return this.ops.bounce.current},set:function($){this.ops.bounce.onChange($)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function($){this.ops.scaleX.onChange($)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function($){this.ops.scaleY.onChange($)}},particleColor:{get:function(){return this.ops.color.current},set:function($){this.ops.color.onChange($)}},colorEase:{get:function(){return this.ops.color.easeName},set:function($){this.ops.color.setEase($)}},particleTint:{get:function(){return this.ops.tint.current},set:function($){this.ops.tint.onChange($)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function($){this.ops.alpha.onChange($)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function($){this.ops.lifespan.onChange($)}},particleAngle:{get:function(){return this.ops.angle.current},set:function($){this.ops.angle.onChange($)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function($){this.ops.rotate.onChange($)}},quantity:{get:function(){return this.ops.quantity.current},set:function($){this.ops.quantity.onChange($)}},delay:{get:function(){return this.ops.delay.current},set:function($){this.ops.delay.onChange($)}},hold:{get:function(){return this.ops.hold.current},set:function($){this.ops.hold.onChange($)}},flowCounter:{get:function(){return this.counters[0]},set:function($){this.counters[0]=$}},frameCounter:{get:function(){return this.counters[1]},set:function($){this.counters[1]=$}},animCounter:{get:function(){return this.counters[2]},set:function($){this.counters[2]=$}},elapsed:{get:function(){return this.counters[3]},set:function($){this.counters[3]=$}},stopCounter:{get:function(){return this.counters[4]},set:function($){this.counters[4]=$}},completeFlag:{get:function(){return this.counters[5]},set:function($){this.counters[5]=$}},zoneIndex:{get:function(){return this.counters[6]},set:function($){this.counters[6]=$}},zoneTotal:{get:function(){return this.counters[7]},set:function($){this.counters[7]=$}},currentFrame:{get:function(){return this.counters[8]},set:function($){this.counters[8]=$}},currentAnim:{get:function(){return this.counters[9]},set:function($){this.counters[9]=$}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var $,et=this.ops;for($=0;$<Y.length;$++){var rt=Y[$];et[rt].destroy()}for($=0;$<this.alive.length;$++)this.alive[$].destroy();for($=0;$<this.dead.length;$++)this.dead[$].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});m.exports=q},9871:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(59996),S=i(61340),u=new S,l=new S,h=new S,r=new S,o=function(p,a,v,x){var g=u,y=l,T=h,P=r;x?(P.loadIdentity(),P.multiply(x),P.translate(a.x,a.y),P.rotate(a.rotation),P.scale(a.scaleX,a.scaleY)):P.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY);var A=p.currentContext,b=v.roundPixels,O=v.alpha,D=a.alpha,B=a.alive,G=B.length,V=a.viewBounds;if(!(!a.visible||G===0||V&&!d(V,v.worldView))){a.sortCallback&&a.depthSort(),v.addToRenderList(a);var k=a.scrollFactorX,U=a.scrollFactorY;A.save(),A.globalCompositeOperation=p.blendModes[a.blendMode];for(var W=0;W<G;W++){var X=B[W],_=X.alpha*D*O;if(!(_<=0||X.scaleX===0||X.scaleY===0)){T.applyITRS(X.x,X.y,X.rotation,X.scaleX,X.scaleY),g.copyFrom(v.matrix),g.multiplyWithOffset(P,-v.scrollX*k,-v.scrollY*U),T.e=X.x,T.f=X.y,g.multiply(T,y);var Q=X.frame,j=Q.canvasData;if(j.width>0&&j.height>0){var it=-Q.halfWidth,K=-Q.halfHeight;A.globalAlpha=_,A.save(),y.setToContext(A),b&&(it=Math.round(it),K=Math.round(K)),A.imageSmoothingEnabled=!Q.source.scaleMode,A.drawImage(Q.source.image,j.x,j.y,j.width,j.height,it,K,j.width,j.height),A.restore()}}}A.restore()}};m.exports=o},92730:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),S=i(44603),u=i(23568),l=i(95540),h=i(31600);S.register("particles",function(r,o){r===void 0&&(r={});var p=u(r,"key",null),a=l(r,"config",null),v=new h(this.scene,0,0,p);return o!==void 0&&(r.add=o),d(this.scene,v,r),a&&v.setConfig(a),v})},676:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39429),S=i(31600);d.register("particles",function(u,l,h,r){return u!==void 0&&typeof u=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new S(this.scene,u,l,h,r))})},90668:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(21188),u=i(9871),m.exports={renderWebGL:S,renderCanvas:u}},21188:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(59996),S=i(61340),u=i(70554),l=new S,h=new S,r=new S,o=new S,p=function(a,v,x,g){var y=a.pipelines.set(v.pipeline),T=l,P=h,A=r,b=o;g?(b.loadIdentity(),b.multiply(g),b.translate(v.x,v.y),b.rotate(v.rotation),b.scale(v.scaleX,v.scaleY)):b.applyITRS(v.x,v.y,v.rotation,v.scaleX,v.scaleY);var O=u.getTintAppendFloatAlpha,D=x.alpha,B=v.alpha;a.pipelines.preBatch(v);var G=v.alive,V=G.length,k=v.viewBounds;if(!(V===0||k&&!d(k,x.worldView))){v.sortCallback&&v.depthSort(),x.addToRenderList(v),T.copyFrom(x.matrix),T.multiplyWithOffset(b,-x.scrollX*v.scrollFactorX,-x.scrollY*v.scrollFactorY),a.setBlendMode(v.blendMode),v.mask&&(v.mask.preRenderWebGL(a,v,x),a.pipelines.set(v.pipeline));for(var U=v.tintFill,W,X,_=0;_<V;_++){var Q=G[_],j=Q.alpha*B*D;if(!(j<=0||Q.scaleX===0||Q.scaleY===0)){A.applyITRS(Q.x,Q.y,Q.rotation,Q.scaleX,Q.scaleY),A.e=Q.x,A.f=Q.y,T.multiply(A,P);var it=Q.frame;it.glTexture!==X&&(X=it.glTexture,W=y.setGameObject(v,it));var K=-it.halfWidth,J=-it.halfHeight,Y=P.setQuad(K,J,K+it.width,J+it.height),q=O(Q.tint,j);y.shouldFlush(6)&&(y.flush(),W=y.setGameObject(v,it)),y.batchQuad(v,Y[0],Y[1],Y[2],Y[3],Y[4],Y[5],Y[6],Y[7],it.u0,it.v0,it.u1,it.v1,q,q,q,q,U,X,W)}}v.mask&&v.mask.postRenderWebGL(a,x),a.pipelines.postBatch(v)}};m.exports=p},20286:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=new d({initialize:function(l,h,r){l===void 0&&(l=0),h===void 0&&(h=0),r===void 0&&(r=!0),this.emitter,this.x=l,this.y=h,this.active=r},update:function(){},destroy:function(){this.emitter=null}});m.exports=S},9774:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="complete"},812:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="deathzone"},30522:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="explode"},96695:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="start"},18677:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="stop"},20696:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={COMPLETE:i(9774),DEATH_ZONE:i(812),EXPLODE:i(30522),START:i(96695),STOP:i(18677)}},18404:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={EmitterColorOp:i(76472),EmitterOp:i(44777),Events:i(20696),GravityWell:i(24502),Particle:i(56480),ParticleBounds:i(69601),ParticleEmitter:i(31600),ParticleProcessor:i(20286),Zones:i(21024)}},26388:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=new d({initialize:function(l,h){this.source=l,this.killOnEnter=h},willKill:function(u){var l=u.worldPosition,h=this.source.contains(l.x,l.y);return h&&this.killOnEnter||!h&&!this.killOnEnter}});m.exports=S},19909:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=new d({initialize:function(l,h,r,o,p,a){o===void 0&&(o=!1),p===void 0&&(p=!0),a===void 0&&(a=-1),this.source=l,this.points=[],this.quantity=h,this.stepRate=r,this.yoyo=o,this.counter=-1,this.seamless=p,this._length=0,this._direction=0,this.total=a,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var u=this.points[0],l=this.points[this.points.length-1];u.x===l.x&&u.y===l.y&&this.points.pop()}var h=this._length;return this._length=this.points.length,this._length<h&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(u){return this.source=u,this.updateSource()},getPoint:function(u){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var l=this.points[this.counter];l&&(u.x=l.x,u.y=l.y)}});m.exports=S},68875:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(26099),u=new d({initialize:function(h){this.source=h,this._tempVec=new S,this.total=-1},getPoint:function(l){var h=this._tempVec;this.source.getRandomPoint(h),l.x=h.x,l.y=h.y}});m.exports=u},21024:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={DeathZone:i(26388),EdgeZone:i(19909),RandomZone:i(68875)}},1159:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(31401),u=i(68287),l=new d({Extends:u,Mixins:[S.PathFollower],initialize:function(r,o,p,a,v,x){u.call(this,r,p,a,v,x),this.path=o},preUpdate:function(h,r){this.anims.update(h,r),this.pathUpdate(h)}});m.exports=l},90145:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39429),S=i(1159);d.register("follower",function(u,l,h,r,o){var p=new S(this.scene,u,l,h,r,o);return this.displayList.add(p),this.updateList.add(p),p})},33663:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(9674),S=i(83419),u=i(48803),l=i(90664),h=i(4703),r=i(45650),o=new S({Extends:h,initialize:function(a,v,x,g,y,T,P,A){g||(g="__DEFAULT"),h.call(this,a,v,x,g,y),this.type="Plane",this.anims=new d(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(T,P,A),this.setSizeToFrame(!1),this.setViewHeight()},originX:{get:function(){return .5}},originY:{get:function(){return .5}},setGridSize:function(p,a,v){p===void 0&&(p=8),a===void 0&&(a=8),v===void 0&&(v=!1);var x=!1;return v&&(x=!0),this.gridWidth=p,this.gridHeight=a,this.isTiled=v,this.clear(),u({mesh:this,widthSegments:p,heightSegments:a,isOrtho:!1,tile:v,flipY:x}),this},setSizeToFrame:function(p){p===void 0&&(p=!0);var a=this.frame;if(this.setPerspective(this.width/a.width,this.height/a.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!p)return this;var v=this.gridWidth,x=this.gridHeight,g=this.vertices,y=a.u0,T=a.u1,P=a.v0,A=a.v1,b,O,D=0;if(this.isTiled)for(P=a.v1,A=a.v0,O=0;O<x;O++)for(b=0;b<v;b++)g[D++].setUVs(y,A),g[D++].setUVs(y,P),g[D++].setUVs(T,A),g[D++].setUVs(y,P),g[D++].setUVs(T,P),g[D++].setUVs(T,A);else{var B=v+1,G=x+1,V=T-y,k=A-P,U=[];for(O=0;O<G;O++)for(b=0;b<B;b++){var W=y+V*(b/v),X=P+k*(O/x);U.push(W,X)}for(O=0;O<x;O++)for(b=0;b<v;b++){var _=(b+B*O)*2,Q=(b+B*(O+1))*2,j=(b+1+B*(O+1))*2,it=(b+1+B*O)*2;g[D++].setUVs(U[_],U[_+1]),g[D++].setUVs(U[Q],U[Q+1]),g[D++].setUVs(U[it],U[it+1]),g[D++].setUVs(U[Q],U[Q+1]),g[D++].setUVs(U[j],U[j+1]),g[D++].setUVs(U[it],U[it+1])}}return this},setViewHeight:function(p){p===void 0&&(p=this.frame.height);var a=this.fov*(Math.PI/180);this.viewPosition.z=this.height/p/Math.tan(a/2),this.dirtyCache[10]=1},createCheckerboard:function(p,a,v,x,g){p===void 0&&(p=16777215),a===void 0&&(a=255),v===void 0&&(v=255),x===void 0&&(x=255),g===void 0&&(g=128);for(var y=l(p),T=l(a),P=[],A=0;A<16;A++)for(var b=0;b<16;b++)A<8&&b<8||A>7&&b>7?P.push(y.r,y.g,y.b,v):P.push(T.r,T.g,T.b,x);var O=this.scene.sys.textures.addUint8Array(r(),new Uint8Array(P),16,16);return this.removeCheckerboard(),this.setTexture(O),this.setSizeToFrame(),this.setViewHeight(g),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(p,a){return this.anims.play(p,a)},playReverse:function(p,a){return this.anims.playReverse(p,a)},playAfterDelay:function(p,a){return this.anims.playAfterDelay(p,a)},playAfterRepeat:function(p,a){return this.anims.playAfterRepeat(p,a)},stop:function(){return this.anims.stop()},stopAfterDelay:function(p){return this.anims.stopAfterDelay(p)},stopAfterRepeat:function(p){return this.anims.stopAfterRepeat(p)},stopOnFrame:function(p){return this.anims.stopOnFrame(p)},preUpdate:function(p,a){h.prototype.preUpdate.call(this,p,a),this.anims.update(p,a)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});m.exports=o},56015:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),S=i(13059),u=i(44603),l=i(23568),h=i(35154),r=i(33663);u.register("plane",function(o,p){o===void 0&&(o={});var a=l(o,"key",null),v=l(o,"frame",null),x=h(o,"width",8),g=h(o,"height",8),y=h(o,"tile",!1),T=new r(this.scene,0,0,a,v,x,g,y);p!==void 0&&(o.add=p);var P=h(o,"checkerboard",null);if(P){var A=h(P,"color1",16777215),b=h(P,"color2",255),O=h(P,"alpha1",255),D=h(P,"alpha2",255),B=h(P,"height",128);T.createCheckerboard(A,b,O,D,B)}return d(this.scene,T,o),S(T,o),T})},30985:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(33663),S=i(39429);S.register("plane",function(u,l,h,r,o,p,a){return this.displayList.add(new d(this.scene,u,l,h,r,o,p,a))})},80321:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(31401),u=i(95643),l=i(30100),h=i(36060),r=i(67277),o=new d({Extends:u,Mixins:[S.AlphaSingle,S.BlendMode,S.Depth,S.Mask,S.Pipeline,S.PostPipeline,S.ScrollFactor,S.Transform,S.Visible,r],initialize:function(a,v,x,g,y,T,P){g===void 0&&(g=16777215),y===void 0&&(y=128),T===void 0&&(T=1),P===void 0&&(P=.1),u.call(this,a,"PointLight"),this.initPipeline(h.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(v,x),this.color=l(g),this.intensity=T,this.attenuation=P,this.width=y*2,this.height=y*2,this._radius=y},radius:{get:function(){return this._radius},set:function(p){this._radius=p,this.width=p*2,this.height=p*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});m.exports=o},39829:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),S=i(44603),u=i(23568),l=i(80321);S.register("pointlight",function(h,r){h===void 0&&(h={});var o=u(h,"color",16777215),p=u(h,"radius",128),a=u(h,"intensity",1),v=u(h,"attenuation",.1),x=new l(this.scene,0,0,o,p,a,v);return r!==void 0&&(h.add=r),d(this.scene,x,h),x})},71255:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39429),S=i(80321);d.register("pointlight",function(u,l,h,r,o,p){return this.displayList.add(new S(this.scene,u,l,h,r,o,p))})},67277:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(57787),m.exports={renderWebGL:S,renderCanvas:u}},57787:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),S=function(u,l,h,r){h.addToRenderList(l);var o=u.pipelines.set(l.pipeline),p=d(l,h,r).calc,a=l.width,v=l.height,x=-l._radius,g=-l._radius,y=x+a,T=g+v,P=p.getX(0,0),A=p.getY(0,0),b=p.getX(x,g),O=p.getY(x,g),D=p.getX(x,T),B=p.getY(x,T),G=p.getX(y,T),V=p.getY(y,T),k=p.getX(y,g),U=p.getY(y,g);u.pipelines.preBatch(l),o.batchPointLight(l,h,b,O,D,B,G,V,k,U,P,A),u.pipelines.postBatch(l)};m.exports=S},591:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(81320),u=i(88571),l=new d({Extends:u,initialize:function(r,o,p,a,v,x){o===void 0&&(o=0),p===void 0&&(p=0),a===void 0&&(a=32),v===void 0&&(v=32),x===void 0&&(x=!0);var g=new S(r.sys.textures,"",a,v,x);u.call(this,r,o,p,g),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(h,r){this.width=h,this.height=r,this.updateDisplayOrigin();var o=this.input;return o&&!o.customHitArea&&(o.hitArea.width=h,o.hitArea.height=r),this},resize:function(h,r,o){return this.texture.setSize(h,r,o),this.setSize(this.texture.width,this.texture.height),this},saveTexture:function(h){var r=this.texture;return r.key=h,r.manager.addDynamicTexture(r)&&(this._saved=!0),r},fill:function(h,r,o,p,a,v){return this.texture.fill(h,r,o,p,a,v),this},clear:function(){return this.texture.clear(),this},stamp:function(h,r,o,p,a){return this.texture.stamp(h,r,o,p,a),this},erase:function(h,r,o){return this.texture.erase(h,r,o),this},draw:function(h,r,o,p,a){return this.texture.draw(h,r,o,p,a),this},drawFrame:function(h,r,o,p,a,v){return this.texture.drawFrame(h,r,o,p,a,v),this},repeat:function(h,r,o,p,a,v,x,g,y){return this.texture.repeat(h,r,o,p,a,v,x,g,y),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(h,r,o,p,a){return this.texture.batchDraw(h,r,o,p,a),this},batchDrawFrame:function(h,r,o,p,a,v){return this.texture.batchDrawFrame(h,r,o,p,a,v),this},endDraw:function(h){return this.texture.endDraw(h),this},snapshotArea:function(h,r,o,p,a,v,x){return this.texture.snapshotArea(h,r,o,p,a,v,x),this},snapshot:function(h,r,o){return this.snapshotArea(0,0,this.width,this.height,h,r,o)},snapshotPixel:function(h,r,o){return this.snapshotArea(h,r,1,1,o,"pixel")},preDestroy:function(){this.camera=null,this._saved||this.texture.destroy()}});m.exports=l},34495:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),S=i(44603),u=i(23568),l=i(591);S.register("renderTexture",function(h,r){h===void 0&&(h={});var o=u(h,"x",0),p=u(h,"y",0),a=u(h,"width",32),v=u(h,"height",32),x=new l(this.scene,o,p,a,v);return r!==void 0&&(h.add=r),d(this.scene,x,h),x})},60505:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39429),S=i(591);d.register("renderTexture",function(u,l,h,r){return this.displayList.add(new S(this.scene,u,l,h,r))})},77757:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(9674),S=i(83419),u=i(31401),l=i(95643),h=i(36060),r=i(38745),o=i(26099),p=new S({Extends:l,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Flip,u.Mask,u.Pipeline,u.PostPipeline,u.Size,u.Texture,u.Transform,u.Visible,u.ScrollFactor,r],initialize:function(v,x,g,y,T,P,A,b,O){y===void 0&&(y="__DEFAULT"),P===void 0&&(P=2),A===void 0&&(A=!0),l.call(this,v,"Rope"),this.anims=new d(this),this.points=P,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=y==="__DEFAULT",this.dirty=!1,this.horizontal=A,this._flipX=!1,this._flipY=!1,this._perp=new o,this.debugCallback=null,this.debugGraphic=null,this.setTexture(y,T),this.setPosition(x,g),this.setSizeToFrame(),this.initPipeline(h.ROPE_PIPELINE),this.initPostPipeline(),Array.isArray(P)&&this.resizeArrays(P.length),this.setPoints(P,b,O),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(a,v){var x=this.anims.currentFrame;this.anims.update(a,v),this.anims.currentFrame!==x&&(this.updateUVs(),this.updateVertices())},play:function(a,v,x){return this.anims.play(a,v,x),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(a,v,x){return a===void 0&&(a=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(a,v,x))},setVertical:function(a,v,x){return a===void 0&&(a=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(a,v,x)):this},setTintFill:function(a){return a===void 0&&(a=!1),this.tintFill=a,this},setAlphas:function(a,v){var x=this.points.length;if(x<1)return this;var g=this.alphas;a===void 0?a=[1]:!Array.isArray(a)&&v===void 0&&(a=[a]);var y,T=0;if(v!==void 0)for(y=0;y<x;y++)T=y*2,g[T]=a,g[T+1]=v;else if(a.length===x)for(y=0;y<x;y++)T=y*2,g[T]=a[y],g[T+1]=a[y];else{var P=a[0];for(y=0;y<x;y++)T=y*2,a.length>T&&(P=a[T]),g[T]=P,a.length>T+1&&(P=a[T+1]),g[T+1]=P}return this},setColors:function(a){var v=this.points.length;if(v<1)return this;var x=this.colors;a===void 0?a=[16777215]:Array.isArray(a)||(a=[a]);var g,y=0;if(a.length===v)for(g=0;g<v;g++)y=g*2,x[y]=a[g],x[y+1]=a[g];else{var T=a[0];for(g=0;g<v;g++)y=g*2,a.length>y&&(T=a[y]),x[y]=T,a.length>y+1&&(T=a[y+1]),x[y+1]=T}return this},setPoints:function(a,v,x){if(a===void 0&&(a=2),typeof a=="number"){var g=a;g<2&&(g=2),a=[];var y,T,P;if(this.horizontal)for(P=-this.frame.halfWidth,T=this.frame.width/(g-1),y=0;y<g;y++)a.push({x:P+y*T,y:0});else for(P=-this.frame.halfHeight,T=this.frame.height/(g-1),y=0;y<g;y++)a.push({x:0,y:P+y*T})}var A=a.length,b=this.points.length;return A<1?(console.warn("Rope: Not enough points given"),this):(A===1&&(a.unshift({x:0,y:0}),A++),b!==A&&this.resizeArrays(A),this.dirty=!0,this.points=a,this.updateUVs(),v!=null&&this.setColors(v),x!=null&&this.setAlphas(x),this)},updateUVs:function(){for(var a=this.uv,v=this.points.length,x=this.frame.u0,g=this.frame.v0,y=this.frame.u1,T=this.frame.v1,P=(y-x)/(v-1),A=(T-g)/(v-1),b=0;b<v;b++){var O=b*4,D,B,G,V;this.horizontal?(this._flipX?(D=y-b*P,G=y-b*P):(D=x+b*P,G=x+b*P),this._flipY?(B=T,V=g):(B=g,V=T)):(this._flipX?(D=x,G=y):(D=y,G=x),this._flipY?(B=T-b*A,V=T-b*A):(B=g+b*A,V=g+b*A)),a[O+0]=D,a[O+1]=B,a[O+2]=G,a[O+3]=V}return this},resizeArrays:function(a){var v=this.colors,x=this.alphas;this.vertices=new Float32Array(a*4),this.uv=new Float32Array(a*4),v=new Uint32Array(a*2),x=new Float32Array(a*2);for(var g=0;g<a*2;g++)v[g]=16777215,x[g]=1;return this.colors=v,this.alphas=x,this.dirty=!0,this},updateVertices:function(){var a=this._perp,v=this.points,x=this.vertices,g=v.length;if(this.dirty=!1,!(g<1)){for(var y,T=v[0],P=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,A=0;A<g;A++){var b=v[A],O=A*4;A<g-1?y=v[A+1]:y=b,a.x=y.y-T.y,a.y=-(y.x-T.x);var D=a.length();a.x/=D,a.y/=D,a.x*=P,a.y*=P,x[O]=b.x+a.x,x[O+1]=b.y+a.y,x[O+2]=b.x-a.x,x[O+3]=b.y-a.y,T=b}return this}},setDebug:function(a,v){return this.debugGraphic=a,!a&&!v?this.debugCallback=null:v?this.debugCallback=v:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(a,v,x){var g=a.debugGraphic,y=x[0],T=x[1],P=x[2],A=x[3];g.lineBetween(y,T,P,A);for(var b=4;b<v;b+=4){var O=x[b+0],D=x[b+1],B=x[b+2],G=x[b+3];g.lineBetween(y,T,O,D),g.lineBetween(P,A,B,G),g.lineBetween(P,A,O,D),g.lineBetween(O,D,B,G),y=O,T=D,P=B,A=G}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(a){return this._flipX=a,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(a){return this._flipY=a,this.updateUVs()}}});m.exports=p},95262:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(){};m.exports=E},26209:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),S=i(44603),u=i(23568),l=i(35154),h=i(77757);S.register("rope",function(r,o){r===void 0&&(r={});var p=u(r,"key",null),a=u(r,"frame",null),v=u(r,"horizontal",!0),x=l(r,"points",void 0),g=l(r,"colors",void 0),y=l(r,"alphas",void 0),T=new h(this.scene,0,0,p,a,x,v,g,y);return o!==void 0&&(r.add=o),d(this.scene,T,r),T})},96819:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(77757),S=i(39429);S.register("rope",function(u,l,h,r,o,p,a,v){return this.displayList.add(new d(this.scene,u,l,h,r,o,p,a,v))})},38745:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(20439),u=i(95262),m.exports={renderWebGL:S,renderCanvas:u}},20439:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),S=i(70554),u=function(l,h,r,o){r.addToRenderList(h);var p=l.pipelines.set(h.pipeline,h),a=d(h,r,o).calc,v=h.vertices,x=h.uv,g=h.colors,y=h.alphas,T=h.alpha,P=S.getTintAppendFloatAlpha,A=r.roundPixels,b=v.length,O=Math.floor(b*.5);p.flush(),l.pipelines.preBatch(h);var D=p.setGameObject(h),B=p.vertexViewF32,G=p.vertexViewU32,V=p.vertexCount*p.currentShader.vertexComponentCount-1,k=0,U=h.tintFill;h.dirty&&h.updateVertices();for(var W=h.debugCallback,X=[],_=0;_<b;_+=2){var Q=v[_+0],j=v[_+1],it=Q*a.a+j*a.c+a.e,K=Q*a.b+j*a.d+a.f;A&&(it=Math.round(it),K=Math.round(K)),B[++V]=it,B[++V]=K,B[++V]=x[_+0],B[++V]=x[_+1],B[++V]=D,B[++V]=U,G[++V]=P(g[k],r.alpha*(y[k]*T)),k++,W&&(X[_+0]=it,X[_+1]=K)}W&&W.call(h,h,b,X),p.vertexCount+=O,p.currentBatch.count=p.vertexCount-p.currentBatch.start,l.pipelines.postBatch(h)};m.exports=u},20071:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(31401),u=i(95643),l=i(95540),h=i(79291),r=i(61622),o=i(25479),p=i(61340),a=i(95428),v=i(92503),x=new d({Extends:u,Mixins:[S.ComputedSize,S.Depth,S.GetBounds,S.Mask,S.Origin,S.ScrollFactor,S.Transform,S.Visible,o],initialize:function(y,T,P,A,b,O,D,B){P===void 0&&(P=0),A===void 0&&(A=0),b===void 0&&(b=128),O===void 0&&(O=128),u.call(this,y,"Shader"),this.blendMode=-1,this.shader;var G=y.sys.renderer;this.renderer=G,this.gl=G.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=G.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this._deferSetShader=null,this._deferProjOrtho=null,this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new p,this._tempMatrix2=new p,this._tempMatrix3=new p,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=G.width,this._rendererHeight=G.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(P,A),this.setSize(b,O),this.setOrigin(.5,.5),this.setShader(T,D,B),this.renderer.on(v.RESTORE_WEBGL,this.onContextRestored,this)},willRender:function(g){return this.renderToTexture?!0:!(u.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&g.id)},setRenderToTexture:function(g,y){if(!this.renderToTexture){var T=this.width,P=this.height,A=this.renderer;this.glTexture=A.createTextureFromSource(null,T,P,0),this.framebuffer=A.createFramebuffer(T,P,this.glTexture,!1),this._rendererWidth=T,this._rendererHeight=P,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),g&&(this.texture=this.scene.sys.textures.addGLTexture(g,this.glTexture))}return this.shader&&(A.pipelines.clear(),this.load(),this.flush(),A.pipelines.rebind()),this},setShader:function(g,y,T){if(this.renderer.contextLost)return this._deferSetShader={key:g,textures:y,textureData:T},this;if(y===void 0&&(y=[]),typeof g=="string"){var P=this.scene.sys.cache.shader;if(!P.has(g))return console.warn("Shader missing: "+g),this;this.shader=P.get(g)}else this.shader=g;var A=this.gl,b=this.renderer;this.program&&b.deleteProgram(this.program);var O=b.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);A.uniformMatrix4fv(A.getUniformLocation(O.webGLProgram,"uViewMatrix"),!1,this.viewMatrix),A.uniformMatrix4fv(A.getUniformLocation(O.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),A.uniform2f(A.getUniformLocation(O.webGLProgram,"uResolution"),this.width,this.height),this.program=O;var D=new Date,B={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[D.getFullYear(),D.getMonth(),D.getDate(),D.getHours()*60*60+D.getMinutes()*60+D.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=h(!0,{},this.shader.uniforms,B):this.uniforms=B;for(var G=0;G<4;G++)y[G]&&this.setSampler2D("iChannel"+G,y[G],G,T);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(g){return this.pointer=g,this},projOrtho:function(g,y,T,P){if(this.renderer.contextLost){this._deferProjOrtho={left:g,right:y,bottom:T,top:P};return}var A=-1e3,b=1e3,O=1/(g-y),D=1/(T-P),B=1/(A-b),G=this.projectionMatrix;G[0]=-2*O,G[5]=-2*D,G[10]=2*B,G[12]=(g+y)*O,G[13]=(P+T)*D,G[14]=(b+A)*B;var V=this.program,k=this.gl,U=this.renderer;U.setProgram(V),k.uniformMatrix4fv(k.getUniformLocation(V.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=y,this._rendererHeight=T},initUniforms:function(){var g=this.renderer.glFuncMap,y=this.program;this._textureCount=0;for(var T in this.uniforms){var P=this.uniforms[T],A=P.type,b=g[A];P.uniformLocation=this.renderer.createUniformLocation(y,T),A!=="sampler2D"&&(P.glMatrix=b.matrix,P.glValueLength=b.length,P.glFunc=b.func)}},setSampler2DBuffer:function(g,y,T,P,A,b){A===void 0&&(A=0),b===void 0&&(b={});var O=this.uniforms[g];return O.value=y,b.width=T,b.height=P,O.textureData=b,this._textureCount=A,this.initSampler2D(O),this},setSampler2D:function(g,y,T,P){T===void 0&&(T=0);var A=this.scene.sys.textures;if(A.exists(y)){var b=A.getFrame(y);if(b.glTexture&&b.glTexture.isRenderTexture)return this.setSampler2DBuffer(g,b.glTexture,b.width,b.height,T,P);var O=this.uniforms[g],D=b.source;O.textureKey=y,O.source=D.image,O.value=b.glTexture,D.isGLTexture&&(P||(P={}),P.width=D.width,P.height=D.height),P&&(O.textureData=P),this._textureCount=T,this.initSampler2D(O)}return this},setUniform:function(g,y){return r(this.uniforms,g,y),this},getUniform:function(g){return l(this.uniforms,g,null)},setChannel0:function(g,y){return this.setSampler2D("iChannel0",g,0,y)},setChannel1:function(g,y){return this.setSampler2D("iChannel1",g,1,y)},setChannel2:function(g,y){return this.setSampler2D("iChannel2",g,2,y)},setChannel3:function(g,y){return this.setSampler2D("iChannel3",g,3,y)},initSampler2D:function(g){if(g.value){var y=g.textureData;if(y&&!g.value.isRenderTexture){var T=this.gl,P=g.value,A=T[l(y,"magFilter","linear").toUpperCase()],b=T[l(y,"minFilter","linear").toUpperCase()],O=T[l(y,"wrapS","repeat").toUpperCase()],D=T[l(y,"wrapT","repeat").toUpperCase()],B=T[l(y,"format","rgba").toUpperCase()],G=l(y,"flipY",!1),V=l(y,"width",P.width),k=l(y,"height",P.height),U=l(y,"source",P.pixels);y.repeat&&(O=T.REPEAT,D=T.REPEAT),y.width&&(U=null),P.update(U,V,k,G,O,D,b,A,B)}this.renderer.setProgram(this.program),this._textureCount++}},syncUniforms:function(){var g=this.gl,y=this.uniforms,T,P,A,b,O,D=0;for(var B in y)T=y[B],A=T.glFunc,P=T.glValueLength,b=T.uniformLocation,O=T.value,O!==null&&(P===1?T.glMatrix?A.call(g,b.webGLUniformLocation,T.transpose,O):A.call(g,b.webGLUniformLocation,O):P===2?A.call(g,b.webGLUniformLocation,O.x,O.y):P===3?A.call(g,b.webGLUniformLocation,O.x,O.y,O.z):P===4?A.call(g,b.webGLUniformLocation,O.x,O.y,O.z,O.w):T.type==="sampler2D"&&(g.activeTexture(g.TEXTURE0+D),g.bindTexture(g.TEXTURE_2D,O.webGLTexture),g.uniform1i(b.webGLUniformLocation,D),D++))},load:function(g){var y=this.gl,T=this.width,P=this.height,A=this.renderer,b=this.program,O=this.viewMatrix;if(!this.renderToTexture){var D=-this._displayOriginX,B=-this._displayOriginY;O[0]=g[0],O[1]=g[1],O[4]=g[2],O[5]=g[3],O[8]=g[4],O[9]=g[5],O[12]=O[0]*D+O[4]*B,O[13]=O[1]*D+O[5]*B}y.useProgram(b.webGLProgram),y.uniformMatrix4fv(y.getUniformLocation(b.webGLProgram,"uViewMatrix"),!1,O),y.uniformMatrix4fv(y.getUniformLocation(b.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),y.uniform2f(y.getUniformLocation(b.webGLProgram,"uResolution"),this.width,this.height);var G=this.uniforms,V=G.resolution;V.value.x=T,V.value.y=P,G.time.value=A.game.loop.getDuration();var k=this.pointer;if(k){var U=G.mouse,W=k.x/T,X=1-k.y/P;U.value.x=W.toFixed(2),U.value.y=X.toFixed(2)}this.syncUniforms()},flush:function(){var g=this.width,y=this.height,T=this.program,P=this.gl,A=this.vertexBuffer,b=this.renderer,O=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(b.setFramebuffer(this.framebuffer),P.clearColor(0,0,0,0),P.clear(P.COLOR_BUFFER_BIT)),P.bindBuffer(P.ARRAY_BUFFER,A.webGLBuffer);var D=P.getAttribLocation(T.webGLProgram,"inPosition");D!==-1&&(P.enableVertexAttribArray(D),P.vertexAttribPointer(D,2,P.FLOAT,!1,O,0));var B=this.vertexViewF32;B[3]=y,B[4]=g,B[5]=y,B[8]=g,B[9]=y,B[10]=g;var G=6;P.bufferSubData(P.ARRAY_BUFFER,0,this.bytes.subarray(0,G*O)),P.drawArrays(P.TRIANGLES,0,G),this.renderToTexture&&b.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},onContextRestored:function(){if(this._deferSetShader!==null){var g=this._deferSetShader.key,y=this._deferSetShader.textures,T=this._deferSetShader.textureData;this._deferSetShader=null,this.setShader(g,y,T)}if(this._deferProjOrtho!==null){var P=this._deferProjOrtho.left,A=this._deferProjOrtho.right,b=this._deferProjOrtho.bottom,O=this._deferProjOrtho.top;this._deferProjOrtho=null,this.projOrtho(P,A,b,O)}},preDestroy:function(){var g=this.renderer;g.off(v.RESTORE_WEBGL,this.onContextRestored,this),g.deleteProgram(this.program),g.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(g.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null),a(this.uniforms,function(y){g.deleteUniformLocation(y.uniformLocation),y.uniformLocation=null})}});m.exports=x},80464:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(){};m.exports=E},54935:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),S=i(44603),u=i(23568),l=i(20071);S.register("shader",function(h,r){h===void 0&&(h={});var o=u(h,"key",null),p=u(h,"x",0),a=u(h,"y",0),v=u(h,"width",128),x=u(h,"height",128),g=new l(this.scene,o,p,a,v,x);return r!==void 0&&(h.add=r),d(this.scene,g,h),g})},74177:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(20071),S=i(39429);S.register("shader",function(u,l,h,r,o,p,a){return this.displayList.add(new d(this.scene,u,l,h,r,o,p,a))})},25479:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(19257),u=i(80464),m.exports={renderWebGL:S,renderCanvas:u}},19257:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),S=function(u,l,h,r){if(l.shader){if(h.addToRenderList(l),u.pipelines.clear(),l.renderToTexture)l.load(),l.flush();else{var o=d(l,h,r).calc;(u.width!==l._rendererWidth||u.height!==l._rendererHeight)&&l.projOrtho(0,u.width,u.height,0),l.load(o.matrix),l.flush()}u.pipelines.rebind()}};m.exports=S},10441:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(70554),S=function(u,l,h,r,o,p){for(var a=d.getTintAppendFloatAlpha(h.fillColor,h.fillAlpha*r),v=h.pathData,x=h.pathIndexes,g=0;g<x.length;g+=3){var y=x[g]*2,T=x[g+1]*2,P=x[g+2]*2,A=v[y+0]-o,b=v[y+1]-p,O=v[T+0]-o,D=v[T+1]-p,B=v[P+0]-o,G=v[P+1]-p,V=l.getX(A,b),k=l.getY(A,b),U=l.getX(O,D),W=l.getY(O,D),X=l.getX(B,G),_=l.getY(B,G);u.batchTri(h,V,k,U,W,X,_,0,0,1,1,a,a,a,2)}};m.exports=S},65960:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){var l=S||d.fillColor,h=u||d.fillAlpha,r=(l&16711680)>>>16,o=(l&65280)>>>8,p=l&255;i.fillStyle="rgba("+r+","+o+","+p+","+h+")"};m.exports=E},75177:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){var l=S||d.strokeColor,h=u||d.strokeAlpha,r=(l&16711680)>>>16,o=(l&65280)>>>8,p=l&255;i.strokeStyle="rgba("+r+","+o+","+p+","+h+")",i.lineWidth=d.lineWidth};m.exports=E},17803:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(31401),u=i(95643),l=i(23031),h=new d({Extends:u,Mixins:[S.AlphaSingle,S.BlendMode,S.Depth,S.GetBounds,S.Mask,S.Origin,S.Pipeline,S.PostPipeline,S.ScrollFactor,S.Transform,S.Visible],initialize:function(o,p,a){p===void 0&&(p="Shape"),u.call(this,o,p),this.geom=a,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new l,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(r,o){return o===void 0&&(o=1),r===void 0?this.isFilled=!1:(this.fillColor=r,this.fillAlpha=o,this.isFilled=!0),this},setStrokeStyle:function(r,o,p){return p===void 0&&(p=1),r===void 0?this.isStroked=!1:(this.lineWidth=r,this.strokeColor=o,this.strokeAlpha=p,this.isStroked=!0),this},setClosePath:function(r){return this.closePath=r,this},setSize:function(r,o){return this.width=r,this.height=o,this},setDisplaySize:function(r,o){return this.displayWidth=r,this.displayHeight=o,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(r){this.scaleX=r/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(r){this.scaleY=r/this.height}}});m.exports=h},34682:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(70554),S=function(u,l,h,r,o){var p=u.strokeTint,a=d.getTintAppendFloatAlpha(l.strokeColor,l.strokeAlpha*h);p.TL=a,p.TR=a,p.BL=a,p.BR=a;var v=l.pathData,x=v.length-1,g=l.lineWidth,y=g/2,T=v[0]-r,P=v[1]-o;l.closePath||(x-=2);for(var A=2;A<x;A+=2){var b=v[A]-r,O=v[A+1]-o;u.batchLine(T,P,b,O,y,y,g,A-2,l.closePath?A===x-1:!1),T=b,P=O}};m.exports=S},23629:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(13609),S=i(83419),u=i(39506),l=i(94811),h=i(96503),r=i(36383),o=i(17803),p=new S({Extends:o,Mixins:[d],initialize:function(v,x,g,y,T,P,A,b,O){x===void 0&&(x=0),g===void 0&&(g=0),y===void 0&&(y=128),T===void 0&&(T=0),P===void 0&&(P=360),A===void 0&&(A=!1),o.call(this,v,"Arc",new h(0,0,y)),this._startAngle=T,this._endAngle=P,this._anticlockwise=A,this._iterations=.01,this.setPosition(x,g);var D=this.geom.radius*2;this.setSize(D,D),b!==void 0&&this.setFillStyle(b,O),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(a){this._iterations=a,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(a){this.geom.radius=a;var v=a*2;this.setSize(v,v),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(a){this._startAngle=a,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(a){this._endAngle=a,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(a){this._anticlockwise=a,this.updateData()}},setRadius:function(a){return this.radius=a,this},setIterations:function(a){return a===void 0&&(a=.01),this.iterations=a,this},setStartAngle:function(a,v){return this._startAngle=a,v!==void 0&&(this._anticlockwise=v),this.updateData()},setEndAngle:function(a,v){return this._endAngle=a,v!==void 0&&(this._anticlockwise=v),this.updateData()},updateData:function(){var a=this._iterations,v=a,x=this.geom.radius,g=u(this._startAngle),y=u(this._endAngle),T=this._anticlockwise,P=x,A=x;y-=g,T?y<-r.PI2?y=-r.PI2:y>0&&(y=-r.PI2+y%r.PI2):y>r.PI2?y=r.PI2:y<0&&(y=r.PI2+y%r.PI2);for(var b=[P+Math.cos(g)*x,A+Math.sin(g)*x],O;v<1;)O=y*v+g,b.push(P+Math.cos(O)*x,A+Math.sin(O)*x),v+=a;return O=y+g,b.push(P+Math.cos(O)*x,A+Math.sin(O)*x),b.push(P+Math.cos(g)*x,A+Math.sin(g)*x),this.pathIndexes=l(b),this.pathData=b,this}});m.exports=p},42542:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39506),S=i(65960),u=i(75177),l=i(20926),h=function(r,o,p,a){p.addToRenderList(o);var v=r.currentContext;if(l(r,v,o,p,a)){var x=o.radius;v.beginPath(),v.arc(x-o.originX*(x*2),x-o.originY*(x*2),x,d(o._startAngle),d(o._endAngle),o.anticlockwise),o.closePath&&v.closePath(),o.isFilled&&(S(v,o),v.fill()),o.isStroked&&(u(v,o),v.stroke()),v.restore()}};m.exports=h},42563:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(23629),S=i(39429);S.register("arc",function(u,l,h,r,o,p,a,v){return this.displayList.add(new d(this.scene,u,l,h,r,o,p,a,v))}),S.register("circle",function(u,l,h,r,o){return this.displayList.add(new d(this.scene,u,l,h,0,360,!1,r,o))})},13609:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(41447),u=i(42542),m.exports={renderWebGL:S,renderCanvas:u}},41447:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),S=i(10441),u=i(34682),l=function(h,r,o,p){o.addToRenderList(r);var a=h.pipelines.set(r.pipeline),v=d(r,o,p),x=a.calcMatrix.copyFrom(v.calc),g=r._displayOriginX,y=r._displayOriginY,T=o.alpha*r.alpha;h.pipelines.preBatch(r),r.isFilled&&S(a,x,r,T,g,y),r.isStroked&&u(a,r,T,g,y),h.pipelines.postBatch(r)};m.exports=l},89:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(33141),u=i(94811),l=i(87841),h=i(17803),r=new d({Extends:h,Mixins:[S],initialize:function(p,a,v,x,g,y){a===void 0&&(a=0),v===void 0&&(v=0),h.call(this,p,"Curve",x),this._smoothness=32,this._curveBounds=new l,this.closePath=!1,this.setPosition(a,v),g!==void 0&&this.setFillStyle(g,y),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(o){this._smoothness=o,this.updateData()}},setSmoothness:function(o){return this._smoothness=o,this.updateData()},updateData:function(){var o=this._curveBounds,p=this._smoothness;this.geom.getBounds(o,p),this.setSize(o.width,o.height),this.updateDisplayOrigin();for(var a=[],v=this.geom.getPoints(p),x=0;x<v.length;x++)a.push(v[x].x,v[x].y);return a.push(v[0].x,v[0].y),this.pathIndexes=u(a),this.pathData=a,this}});m.exports=r},3170:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(65960),S=i(75177),u=i(20926),l=function(h,r,o,p){o.addToRenderList(r);var a=h.currentContext;if(u(h,a,r,o,p)){var v=r._displayOriginX+r._curveBounds.x,x=r._displayOriginY+r._curveBounds.y,g=r.pathData,y=g.length-1,T=g[0]-v,P=g[1]-x;a.beginPath(),a.moveTo(T,P),r.closePath||(y-=2);for(var A=2;A<y;A+=2){var b=g[A]-v,O=g[A+1]-x;a.lineTo(b,O)}r.closePath&&a.closePath(),r.isFilled&&(d(a,r),a.fill()),r.isStroked&&(S(a,r),a.stroke()),a.restore()}};m.exports=l},40511:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39429),S=i(89);d.register("curve",function(u,l,h,r,o){return this.displayList.add(new S(this.scene,u,l,h,r,o))})},33141:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(53987),u=i(3170),m.exports={renderWebGL:S,renderCanvas:u}},53987:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(10441),S=i(91296),u=i(34682),l=function(h,r,o,p){o.addToRenderList(r);var a=h.pipelines.set(r.pipeline),v=S(r,o,p),x=a.calcMatrix.copyFrom(v.calc),g=r._displayOriginX+r._curveBounds.x,y=r._displayOriginY+r._curveBounds.y,T=o.alpha*r.alpha;h.pipelines.preBatch(r),r.isFilled&&d(a,x,r,T,g,y),r.isStroked&&u(a,r,T,g,y),h.pipelines.postBatch(r)};m.exports=l},19921:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(94811),u=i(54205),l=i(8497),h=i(17803),r=new d({Extends:h,Mixins:[u],initialize:function(p,a,v,x,g,y,T){a===void 0&&(a=0),v===void 0&&(v=0),x===void 0&&(x=128),g===void 0&&(g=128),h.call(this,p,"Ellipse",new l(x/2,g/2,x,g)),this._smoothness=64,this.setPosition(a,v),this.width=x,this.height=g,y!==void 0&&this.setFillStyle(y,T),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(o){this._smoothness=o,this.updateData()}},setSize:function(o,p){return this.width=o,this.height=p,this.geom.setPosition(o/2,p/2),this.geom.setSize(o,p),this.updateDisplayOrigin(),this.updateData()},setSmoothness:function(o){return this._smoothness=o,this.updateData()},updateData:function(){for(var o=[],p=this.geom.getPoints(this._smoothness),a=0;a<p.length;a++)o.push(p[a].x,p[a].y);return o.push(p[0].x,p[0].y),this.pathIndexes=S(o),this.pathData=o,this}});m.exports=r},7930:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(65960),S=i(75177),u=i(20926),l=function(h,r,o,p){o.addToRenderList(r);var a=h.currentContext;if(u(h,a,r,o,p)){var v=r._displayOriginX,x=r._displayOriginY,g=r.pathData,y=g.length-1,T=g[0]-v,P=g[1]-x;a.beginPath(),a.moveTo(T,P),r.closePath||(y-=2);for(var A=2;A<y;A+=2){var b=g[A]-v,O=g[A+1]-x;a.lineTo(b,O)}a.closePath(),r.isFilled&&(d(a,r),a.fill()),r.isStroked&&(S(a,r),a.stroke()),a.restore()}};m.exports=l},1543:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(19921),S=i(39429);S.register("ellipse",function(u,l,h,r,o,p){return this.displayList.add(new d(this.scene,u,l,h,r,o,p))})},54205:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(19467),u=i(7930),m.exports={renderWebGL:S,renderCanvas:u}},19467:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(10441),S=i(91296),u=i(34682),l=function(h,r,o,p){o.addToRenderList(r);var a=h.pipelines.set(r.pipeline),v=S(r,o,p),x=a.calcMatrix.copyFrom(v.calc),g=r._displayOriginX,y=r._displayOriginY,T=o.alpha*r.alpha;h.pipelines.preBatch(r),r.isFilled&&d(a,x,r,T,g,y),r.isStroked&&u(a,r,T,g,y),h.pipelines.postBatch(r)};m.exports=l},30479:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(17803),u=i(26015),l=new d({Extends:S,Mixins:[u],initialize:function(r,o,p,a,v,x,g,y,T,P,A){o===void 0&&(o=0),p===void 0&&(p=0),a===void 0&&(a=128),v===void 0&&(v=128),x===void 0&&(x=32),g===void 0&&(g=32),S.call(this,r,"Grid",null),this.cellWidth=x,this.cellHeight=g,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(o,p),this.setSize(a,v),this.setFillStyle(y,T),P!==void 0&&this.setOutlineStyle(P,A),this.updateDisplayOrigin()},setFillStyle:function(h,r){return r===void 0&&(r=1),h===void 0?this.showCells=!1:(this.fillColor=h,this.fillAlpha=r,this.showCells=!0),this},setAltFillStyle:function(h,r){return r===void 0&&(r=1),h===void 0?this.showAltCells=!1:(this.altFillColor=h,this.altFillAlpha=r,this.showAltCells=!0),this},setOutlineStyle:function(h,r){return r===void 0&&(r=1),h===void 0?this.showOutline=!1:(this.outlineFillColor=h,this.outlineFillAlpha=r,this.showOutline=!0),this}});m.exports=l},49912:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(65960),S=i(75177),u=i(20926),l=function(h,r,o,p){o.addToRenderList(r);var a=h.currentContext;if(u(h,a,r,o,p)){var v=-r._displayOriginX,x=-r._displayOriginY,g=o.alpha*r.alpha,y=r.width,T=r.height,P=r.cellWidth,A=r.cellHeight,b=Math.ceil(y/P),O=Math.ceil(T/A),D=P,B=A,G=P-(b*P-y),V=A-(O*A-T),k=r.showCells,U=r.showAltCells,W=r.showOutline,X=0,_=0,Q=0,j=0,it=0;if(W&&(D--,B--,G===P&&G--,V===A&&V--),k&&r.fillAlpha>0)for(d(a,r),_=0;_<O;_++)for(U&&(Q=_%2),X=0;X<b;X++){if(U&&Q){Q=0;continue}Q++,j=X<b-1?D:G,it=_<O-1?B:V,a.fillRect(v+X*P,x+_*A,j,it)}if(U&&r.altFillAlpha>0)for(d(a,r,r.altFillColor,r.altFillAlpha*g),_=0;_<O;_++)for(U&&(Q=_%2),X=0;X<b;X++){if(U&&!Q){Q=1;continue}Q=0,j=X<b-1?D:G,it=_<O-1?B:V,a.fillRect(v+X*P,x+_*A,j,it)}if(W&&r.outlineFillAlpha>0){for(S(a,r,r.outlineFillColor,r.outlineFillAlpha*g),X=1;X<b;X++){var K=X*P;a.beginPath(),a.moveTo(K+v,x),a.lineTo(K+v,T+x),a.stroke()}for(_=1;_<O;_++){var J=_*A;a.beginPath(),a.moveTo(v,J+x),a.lineTo(v+y,J+x),a.stroke()}}a.restore()}};m.exports=l},34137:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39429),S=i(30479);d.register("grid",function(u,l,h,r,o,p,a,v,x,g){return this.displayList.add(new S(this.scene,u,l,h,r,o,p,a,v,x,g))})},26015:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(46161),u=i(49912),m.exports={renderWebGL:S,renderCanvas:u}},46161:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),S=i(70554),u=function(l,h,r,o){r.addToRenderList(h);var p=l.pipelines.set(h.pipeline),a=d(h,r,o),v=p.calcMatrix.copyFrom(a.calc);v.translate(-h._displayOriginX,-h._displayOriginY);var x=r.alpha*h.alpha,g=h.width,y=h.height,T=h.cellWidth,P=h.cellHeight,A=Math.ceil(g/T),b=Math.ceil(y/P),O=T,D=P,B=T-(A*T-g),G=P-(b*P-y),V,k,U=h.showCells,W=h.showAltCells,X=h.showOutline,_=0,Q=0,j=0,it=0,K=0;if(X&&(O--,D--,B===T&&B--,G===P&&G--),l.pipelines.preBatch(h),U&&h.fillAlpha>0)for(V=p.fillTint,k=S.getTintAppendFloatAlpha(h.fillColor,h.fillAlpha*x),V.TL=k,V.TR=k,V.BL=k,V.BR=k,Q=0;Q<b;Q++)for(W&&(j=Q%2),_=0;_<A;_++){if(W&&j){j=0;continue}j++,it=_<A-1?O:B,K=Q<b-1?D:G,p.batchFillRect(_*T,Q*P,it,K)}if(W&&h.altFillAlpha>0)for(V=p.fillTint,k=S.getTintAppendFloatAlpha(h.altFillColor,h.altFillAlpha*x),V.TL=k,V.TR=k,V.BL=k,V.BR=k,Q=0;Q<b;Q++)for(W&&(j=Q%2),_=0;_<A;_++){if(W&&!j){j=1;continue}j=0,it=_<A-1?O:B,K=Q<b-1?D:G,p.batchFillRect(_*T,Q*P,it,K)}if(X&&h.outlineFillAlpha>0){var J=p.strokeTint,Y=S.getTintAppendFloatAlpha(h.outlineFillColor,h.outlineFillAlpha*x);for(J.TL=Y,J.TR=Y,J.BL=Y,J.BR=Y,_=1;_<A;_++){var q=_*T;p.batchLine(q,0,q,y,h.lineWidth,h.lineWidth,1,0,!1)}for(Q=1;Q<b;Q++){var $=Q*P;p.batchLine(0,$,g,$,h.lineWidth,h.lineWidth,1,0,!1)}}l.pipelines.postBatch(h)};m.exports=u},61475:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(99651),S=i(83419),u=i(17803),l=new S({Extends:u,Mixins:[d],initialize:function(r,o,p,a,v,x,g,y){o===void 0&&(o=0),p===void 0&&(p=0),a===void 0&&(a=48),v===void 0&&(v=32),x===void 0&&(x=15658734),g===void 0&&(g=10066329),y===void 0&&(y=13421772),u.call(this,r,"IsoBox",null),this.projection=4,this.fillTop=x,this.fillLeft=g,this.fillRight=y,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(o,p),this.setSize(a,v),this.updateDisplayOrigin()},setProjection:function(h){return this.projection=h,this},setFaces:function(h,r,o){return h===void 0&&(h=!0),r===void 0&&(r=!0),o===void 0&&(o=!0),this.showTop=h,this.showLeft=r,this.showRight=o,this},setFillStyle:function(h,r,o){return this.fillTop=h,this.fillLeft=r,this.fillRight=o,this.isFilled=!0,this}});m.exports=l},11508:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(65960),S=i(20926),u=function(l,h,r,o){r.addToRenderList(h);var p=l.currentContext;if(S(l,p,h,r,o)&&h.isFilled){var a=h.width,v=h.height,x=a/2,g=a/h.projection;h.showTop&&(d(p,h,h.fillTop),p.beginPath(),p.moveTo(-x,-v),p.lineTo(0,-g-v),p.lineTo(x,-v),p.lineTo(x,-1),p.lineTo(0,g-1),p.lineTo(-x,-1),p.lineTo(-x,-v),p.fill()),h.showLeft&&(d(p,h,h.fillLeft),p.beginPath(),p.moveTo(-x,0),p.lineTo(0,g),p.lineTo(0,g-v),p.lineTo(-x,-v),p.lineTo(-x,0),p.fill()),h.showRight&&(d(p,h,h.fillRight),p.beginPath(),p.moveTo(x,0),p.lineTo(0,g),p.lineTo(0,g-v),p.lineTo(x,-v),p.lineTo(x,0),p.fill()),p.restore()}};m.exports=u},3933:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39429),S=i(61475);d.register("isobox",function(u,l,h,r,o,p,a){return this.displayList.add(new S(this.scene,u,l,h,r,o,p,a))})},99651:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(68149),u=i(11508),m.exports={renderWebGL:S,renderCanvas:u}},68149:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),S=i(70554),u=function(l,h,r,o){r.addToRenderList(h);var p=l.pipelines.set(h.pipeline),a=d(h,r,o),v=p.calcMatrix.copyFrom(a.calc),x=h.width,g=h.height,y=x/2,T=x/h.projection,P=r.alpha*h.alpha;if(h.isFilled){var A,b,O,D,B,G,V,k,U;l.pipelines.preBatch(h),h.showTop&&(A=S.getTintAppendFloatAlpha(h.fillTop,P),b=v.getX(-y,-g),O=v.getY(-y,-g),D=v.getX(0,-T-g),B=v.getY(0,-T-g),G=v.getX(y,-g),V=v.getY(y,-g),k=v.getX(0,T-g),U=v.getY(0,T-g),p.batchQuad(h,b,O,D,B,G,V,k,U,0,0,1,1,A,A,A,A,2)),h.showLeft&&(A=S.getTintAppendFloatAlpha(h.fillLeft,P),b=v.getX(-y,0),O=v.getY(-y,0),D=v.getX(0,T),B=v.getY(0,T),G=v.getX(0,T-g),V=v.getY(0,T-g),k=v.getX(-y,-g),U=v.getY(-y,-g),p.batchQuad(h,b,O,D,B,G,V,k,U,0,0,1,1,A,A,A,A,2)),h.showRight&&(A=S.getTintAppendFloatAlpha(h.fillRight,P),b=v.getX(y,0),O=v.getY(y,0),D=v.getX(0,T),B=v.getY(0,T),G=v.getX(0,T-g),V=v.getY(0,T-g),k=v.getX(y,-g),U=v.getY(y,-g),p.batchQuad(h,b,O,D,B,G,V,k,U,0,0,1,1,A,A,A,A,2)),l.pipelines.postBatch(h)}};m.exports=u},16933:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(60561),u=i(17803),l=new d({Extends:u,Mixins:[S],initialize:function(r,o,p,a,v,x,g,y,T){o===void 0&&(o=0),p===void 0&&(p=0),a===void 0&&(a=48),v===void 0&&(v=32),x===void 0&&(x=!1),g===void 0&&(g=15658734),y===void 0&&(y=10066329),T===void 0&&(T=13421772),u.call(this,r,"IsoTriangle",null),this.projection=4,this.fillTop=g,this.fillLeft=y,this.fillRight=T,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=x,this.isFilled=!0,this.setPosition(o,p),this.setSize(a,v),this.updateDisplayOrigin()},setProjection:function(h){return this.projection=h,this},setReversed:function(h){return this.isReversed=h,this},setFaces:function(h,r,o){return h===void 0&&(h=!0),r===void 0&&(r=!0),o===void 0&&(o=!0),this.showTop=h,this.showLeft=r,this.showRight=o,this},setFillStyle:function(h,r,o){return this.fillTop=h,this.fillLeft=r,this.fillRight=o,this.isFilled=!0,this}});m.exports=l},79590:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(65960),S=i(20926),u=function(l,h,r,o){r.addToRenderList(h);var p=l.currentContext;if(S(l,p,h,r,o)&&h.isFilled){var a=h.width,v=h.height,x=a/2,g=a/h.projection,y=h.isReversed;h.showTop&&y&&(d(p,h,h.fillTop),p.beginPath(),p.moveTo(-x,-v),p.lineTo(0,-g-v),p.lineTo(x,-v),p.lineTo(0,g-v),p.fill()),h.showLeft&&(d(p,h,h.fillLeft),p.beginPath(),y?(p.moveTo(-x,-v),p.lineTo(0,g),p.lineTo(0,g-v)):(p.moveTo(-x,0),p.lineTo(0,g),p.lineTo(0,g-v)),p.fill()),h.showRight&&(d(p,h,h.fillRight),p.beginPath(),y?(p.moveTo(x,-v),p.lineTo(0,g),p.lineTo(0,g-v)):(p.moveTo(x,0),p.lineTo(0,g),p.lineTo(0,g-v)),p.fill()),p.restore()}};m.exports=u},49803:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39429),S=i(16933);d.register("isotriangle",function(u,l,h,r,o,p,a,v){return this.displayList.add(new S(this.scene,u,l,h,r,o,p,a,v))})},60561:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(51503),u=i(79590),m.exports={renderWebGL:S,renderCanvas:u}},51503:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),S=i(70554),u=function(l,h,r,o){r.addToRenderList(h);var p=l.pipelines.set(h.pipeline),a=d(h,r,o),v=p.calcMatrix.copyFrom(a.calc),x=h.width,g=h.height,y=x/2,T=x/h.projection,P=h.isReversed,A=r.alpha*h.alpha;if(h.isFilled){l.pipelines.preBatch(h);var b,O,D,B,G,V,k;if(h.showTop&&P){b=S.getTintAppendFloatAlpha(h.fillTop,A),O=v.getX(-y,-g),D=v.getY(-y,-g),B=v.getX(0,-T-g),G=v.getY(0,-T-g),V=v.getX(y,-g),k=v.getY(y,-g);var U=v.getX(0,T-g),W=v.getY(0,T-g);p.batchQuad(h,O,D,B,G,V,k,U,W,0,0,1,1,b,b,b,b,2)}h.showLeft&&(b=S.getTintAppendFloatAlpha(h.fillLeft,A),P?(O=v.getX(-y,-g),D=v.getY(-y,-g),B=v.getX(0,T),G=v.getY(0,T),V=v.getX(0,T-g),k=v.getY(0,T-g)):(O=v.getX(-y,0),D=v.getY(-y,0),B=v.getX(0,T),G=v.getY(0,T),V=v.getX(0,T-g),k=v.getY(0,T-g)),p.batchTri(h,O,D,B,G,V,k,0,0,1,1,b,b,b,2)),h.showRight&&(b=S.getTintAppendFloatAlpha(h.fillRight,A),P?(O=v.getX(y,-g),D=v.getY(y,-g),B=v.getX(0,T),G=v.getY(0,T),V=v.getX(0,T-g),k=v.getY(0,T-g)):(O=v.getX(y,0),D=v.getY(y,0),B=v.getX(0,T),G=v.getY(0,T),V=v.getX(0,T-g),k=v.getY(0,T-g)),p.batchTri(h,O,D,B,G,V,k,0,0,1,1,b,b,b,2)),l.pipelines.postBatch(h)}};m.exports=u},57847:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(17803),u=i(23031),l=i(36823),h=new d({Extends:S,Mixins:[l],initialize:function(o,p,a,v,x,g,y,T,P){p===void 0&&(p=0),a===void 0&&(a=0),v===void 0&&(v=0),x===void 0&&(x=0),g===void 0&&(g=128),y===void 0&&(y=0),S.call(this,o,"Line",new u(v,x,g,y));var A=Math.max(1,this.geom.right-this.geom.left),b=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(p,a),this.setSize(A,b),T!==void 0&&this.setStrokeStyle(1,T,P),this.updateDisplayOrigin()},setLineWidth:function(r,o){return o===void 0&&(o=r),this._startWidth=r,this._endWidth=o,this.lineWidth=r,this},setTo:function(r,o,p,a){return this.geom.setTo(r,o,p,a),this}});m.exports=h},17440:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(75177),S=i(20926),u=function(l,h,r,o){r.addToRenderList(h);var p=l.currentContext;if(S(l,p,h,r,o)){var a=h._displayOriginX,v=h._displayOriginY;h.isStroked&&(d(p,h),p.beginPath(),p.moveTo(h.geom.x1-a,h.geom.y1-v),p.lineTo(h.geom.x2-a,h.geom.y2-v),p.stroke()),p.restore()}};m.exports=u},2481:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39429),S=i(57847);d.register("line",function(u,l,h,r,o,p,a,v){return this.displayList.add(new S(this.scene,u,l,h,r,o,p,a,v))})},36823:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(77385),u=i(17440),m.exports={renderWebGL:S,renderCanvas:u}},77385:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),S=i(70554),u=function(l,h,r,o){r.addToRenderList(h);var p=l.pipelines.set(h.pipeline),a=d(h,r,o);p.calcMatrix.copyFrom(a.calc);var v=h._displayOriginX,x=h._displayOriginY,g=r.alpha*h.alpha;if(l.pipelines.preBatch(h),h.isStroked){var y=p.strokeTint,T=S.getTintAppendFloatAlpha(h.strokeColor,h.strokeAlpha*g);y.TL=T,y.TR=T,y.BL=T,y.BR=T,p.batchLine(h.geom.x1-v,h.geom.y1-x,h.geom.x2-v,h.geom.y2-x,h._startWidth/2,h._endWidth/2,1,0,!1,a.sprite,a.camera)}l.pipelines.postBatch(h)};m.exports=u},24949:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(90273),S=i(83419),u=i(94811),l=i(13829),h=i(25717),r=i(17803),o=i(5469),p=new S({Extends:r,Mixins:[d],initialize:function(v,x,g,y,T,P){x===void 0&&(x=0),g===void 0&&(g=0),r.call(this,v,"Polygon",new h(y));var A=l(this.geom);this.setPosition(x,g),this.setSize(A.width,A.height),T!==void 0&&this.setFillStyle(T,P),this.updateDisplayOrigin(),this.updateData()},smooth:function(a){a===void 0&&(a=1);for(var v=0;v<a;v++)o(this.geom);return this.updateData()},setTo:function(a){this.geom.setTo(a);var v=l(this.geom);return this.setSize(v.width,v.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var a=[],v=this.geom.points,x=0;x<v.length;x++)a.push(v[x].x,v[x].y);return a.push(v[0].x,v[0].y),this.pathIndexes=u(a),this.pathData=a,this}});m.exports=p},38710:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(65960),S=i(75177),u=i(20926),l=function(h,r,o,p){o.addToRenderList(r);var a=h.currentContext;if(u(h,a,r,o,p)){var v=r._displayOriginX,x=r._displayOriginY,g=r.pathData,y=g.length-1,T=g[0]-v,P=g[1]-x;a.beginPath(),a.moveTo(T,P),r.closePath||(y-=2);for(var A=2;A<y;A+=2){var b=g[A]-v,O=g[A+1]-x;a.lineTo(b,O)}r.closePath&&a.closePath(),r.isFilled&&(d(a,r),a.fill()),r.isStroked&&(S(a,r),a.stroke()),a.restore()}};m.exports=l},64827:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39429),S=i(24949);d.register("polygon",function(u,l,h,r,o){return this.displayList.add(new S(this.scene,u,l,h,r,o))})},90273:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(73695),u=i(38710),m.exports={renderWebGL:S,renderCanvas:u}},73695:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(10441),S=i(91296),u=i(34682),l=function(h,r,o,p){o.addToRenderList(r);var a=h.pipelines.set(r.pipeline),v=S(r,o,p),x=a.calcMatrix.copyFrom(v.calc),g=r._displayOriginX,y=r._displayOriginY,T=o.alpha*r.alpha;h.pipelines.preBatch(r),r.isFilled&&d(a,x,r,T,g,y),r.isStroked&&u(a,r,T,g,y),h.pipelines.postBatch(r)};m.exports=l},74561:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(94811),u=i(87841),l=i(17803),h=i(95597),r=new d({Extends:l,Mixins:[h],initialize:function(p,a,v,x,g,y,T){a===void 0&&(a=0),v===void 0&&(v=0),x===void 0&&(x=128),g===void 0&&(g=128),l.call(this,p,"Rectangle",new u(0,0,x,g)),this.radius=20,this.isRounded=!1,this.setPosition(a,v),this.setSize(x,g),y!==void 0&&this.setFillStyle(y,T),this.updateDisplayOrigin(),this.updateData()},setRounded:function(o){return o===void 0&&(o=16),this.radius=o,this.isRounded=o>0,this.updateRoundedData()},setSize:function(o,p){this.width=o,this.height=p,this.geom.setSize(o,p),this.updateData(),this.updateDisplayOrigin();var a=this.input;return a&&!a.customHitArea&&(a.hitArea.width=o,a.hitArea.height=p),this},updateData:function(){if(this.isRounded)return this.updateRoundedData();var o=[],p=this.geom,a=this._tempLine;return p.getLineA(a),o.push(a.x1,a.y1,a.x2,a.y2),p.getLineB(a),o.push(a.x2,a.y2),p.getLineC(a),o.push(a.x2,a.y2),p.getLineD(a),o.push(a.x2,a.y2),this.pathData=o,this},updateRoundedData:function(){var o=[],p=this.width/2,a=this.height/2,v=Math.min(p,a),x=Math.min(this.radius,v),g=p,y=a,T=Math.max(1,Math.floor(x/5));return this.arcTo(o,g-p+x,y-a+x,x,Math.PI,Math.PI*1.5,T),o.push(g+p-x,y-a),this.arcTo(o,g+p-x,y-a+x,x,Math.PI*1.5,Math.PI*2,T),o.push(g+p,y+a-x),this.arcTo(o,g+p-x,y+a-x,x,0,Math.PI*.5,T),o.push(g-p+x,y+a),this.arcTo(o,g-p+x,y+a-x,x,Math.PI*.5,Math.PI,T),o.push(g-p,y-a+x),this.pathIndexes=S(o),this.pathData=o,this},arcTo:function(o,p,a,v,x,g,y){for(var T=(g-x)/y,P=0;P<=y;P++){var A=x+T*P;o.push(p+Math.cos(A)*v,a+Math.sin(A)*v)}}});m.exports=r},48682:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(65960),S=i(75177),u=i(20926),l=function(r,o,p,a,v,x){var g=Math.min(a/2,v/2),y=Math.min(x,g);if(y===0){r.rect(o,p,a,v);return}r.moveTo(o+y,p),r.lineTo(o+a-y,p),r.arcTo(o+a,p,o+a,p+y,y),r.lineTo(o+a,p+v-y),r.arcTo(o+a,p+v,o+a-y,p+v,y),r.lineTo(o+y,p+v),r.arcTo(o,p+v,o,p+v-y,y),r.lineTo(o,p+y),r.arcTo(o,p,o+y,p,y),r.closePath()},h=function(r,o,p,a){p.addToRenderList(o);var v=r.currentContext;if(u(r,v,o,p,a)){var x=o._displayOriginX,g=o._displayOriginY;o.isFilled&&(d(v,o),o.isRounded?(v.beginPath(),l(v,-x,-g,o.width,o.height,o.radius),v.fill()):v.fillRect(-x,-g,o.width,o.height)),o.isStroked&&(S(v,o),v.beginPath(),o.isRounded?l(v,-x,-g,o.width,o.height,o.radius):v.rect(-x,-g,o.width,o.height),v.stroke()),v.restore()}};m.exports=h},87959:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39429),S=i(74561);d.register("rectangle",function(u,l,h,r,o,p){return this.displayList.add(new S(this.scene,u,l,h,r,o,p))})},95597:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(52059),u=i(48682),m.exports={renderWebGL:S,renderCanvas:u}},52059:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(10441),S=i(91296),u=i(34682),l=i(70554),h=function(r,o,p,a){p.addToRenderList(o);var v=r.pipelines.set(o.pipeline),x=S(o,p,a);v.calcMatrix.copyFrom(x.calc);var g=o._displayOriginX,y=o._displayOriginY,T=p.alpha*o.alpha;if(r.pipelines.preBatch(o),o.isRounded&&o.isFilled)d(v,x.calc,o,T,g,y);else if(o.isFilled){var P=v.fillTint,A=l.getTintAppendFloatAlpha(o.fillColor,o.fillAlpha*T);P.TL=A,P.TR=A,P.BL=A,P.BR=A,v.batchFillRect(-g,-y,o.width,o.height)}o.isStroked&&u(v,o,T,g,y),r.pipelines.postBatch(o)};m.exports=h},55911:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(81991),S=i(83419),u=i(94811),l=i(17803),h=new S({Extends:l,Mixins:[d],initialize:function(o,p,a,v,x,g,y,T){p===void 0&&(p=0),a===void 0&&(a=0),v===void 0&&(v=5),x===void 0&&(x=32),g===void 0&&(g=64),l.call(this,o,"Star",null),this._points=v,this._innerRadius=x,this._outerRadius=g,this.setPosition(p,a),this.setSize(g*2,g*2),y!==void 0&&this.setFillStyle(y,T),this.updateDisplayOrigin(),this.updateData()},setPoints:function(r){return this._points=r,this.updateData()},setInnerRadius:function(r){return this._innerRadius=r,this.updateData()},setOuterRadius:function(r){return this._outerRadius=r,this.updateData()},points:{get:function(){return this._points},set:function(r){this._points=r,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(r){this._innerRadius=r,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(r){this._outerRadius=r,this.updateData()}},updateData:function(){var r=[],o=this._points,p=this._innerRadius,a=this._outerRadius,v=Math.PI/2*3,x=Math.PI/o,g=a,y=a;r.push(g,y+-a);for(var T=0;T<o;T++)r.push(g+Math.cos(v)*a,y+Math.sin(v)*a),v+=x,r.push(g+Math.cos(v)*p,y+Math.sin(v)*p),v+=x;return r.push(g,y+-a),this.pathIndexes=u(r),this.pathData=r,this}});m.exports=h},64272:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(65960),S=i(75177),u=i(20926),l=function(h,r,o,p){o.addToRenderList(r);var a=h.currentContext;if(u(h,a,r,o,p)){var v=r._displayOriginX,x=r._displayOriginY,g=r.pathData,y=g.length-1,T=g[0]-v,P=g[1]-x;a.beginPath(),a.moveTo(T,P),r.closePath||(y-=2);for(var A=2;A<y;A+=2){var b=g[A]-v,O=g[A+1]-x;a.lineTo(b,O)}a.closePath(),r.isFilled&&(d(a,r),a.fill()),r.isStroked&&(S(a,r),a.stroke()),a.restore()}};m.exports=l},93697:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(55911),S=i(39429);S.register("star",function(u,l,h,r,o,p,a){return this.displayList.add(new d(this.scene,u,l,h,r,o,p,a))})},81991:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(57017),u=i(64272),m.exports={renderWebGL:S,renderCanvas:u}},57017:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(10441),S=i(91296),u=i(34682),l=function(h,r,o,p){o.addToRenderList(r);var a=h.pipelines.set(r.pipeline),v=S(r,o,p),x=a.calcMatrix.copyFrom(v.calc),g=r._displayOriginX,y=r._displayOriginY,T=o.alpha*r.alpha;h.pipelines.preBatch(r),r.isFilled&&d(a,x,r,T,g,y),r.isStroked&&u(a,r,T,g,y),h.pipelines.postBatch(r)};m.exports=l},36931:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(17803),u=i(16483),l=i(96195),h=new d({Extends:S,Mixins:[l],initialize:function(o,p,a,v,x,g,y,T,P,A,b){p===void 0&&(p=0),a===void 0&&(a=0),v===void 0&&(v=0),x===void 0&&(x=128),g===void 0&&(g=64),y===void 0&&(y=0),T===void 0&&(T=128),P===void 0&&(P=128),S.call(this,o,"Triangle",new u(v,x,g,y,T,P));var O=this.geom.right-this.geom.left,D=this.geom.bottom-this.geom.top;this.setPosition(p,a),this.setSize(O,D),A!==void 0&&this.setFillStyle(A,b),this.updateDisplayOrigin(),this.updateData()},setTo:function(r,o,p,a,v,x){return this.geom.setTo(r,o,p,a,v,x),this.updateData()},updateData:function(){var r=[],o=this.geom,p=this._tempLine;return o.getLineA(p),r.push(p.x1,p.y1,p.x2,p.y2),o.getLineB(p),r.push(p.x2,p.y2),o.getLineC(p),r.push(p.x2,p.y2),this.pathData=r,this}});m.exports=h},85172:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(65960),S=i(75177),u=i(20926),l=function(h,r,o,p){o.addToRenderList(r);var a=h.currentContext;if(u(h,a,r,o,p)){var v=r._displayOriginX,x=r._displayOriginY,g=r.geom.x1-v,y=r.geom.y1-x,T=r.geom.x2-v,P=r.geom.y2-x,A=r.geom.x3-v,b=r.geom.y3-x;a.beginPath(),a.moveTo(g,y),a.lineTo(T,P),a.lineTo(A,b),a.closePath(),r.isFilled&&(d(a,r),a.fill()),r.isStroked&&(S(a,r),a.stroke()),a.restore()}};m.exports=l},45245:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39429),S=i(36931);d.register("triangle",function(u,l,h,r,o,p,a,v,x,g){return this.displayList.add(new S(this.scene,u,l,h,r,o,p,a,v,x,g))})},96195:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(83253),u=i(85172),m.exports={renderWebGL:S,renderCanvas:u}},83253:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),S=i(34682),u=i(70554),l=function(h,r,o,p){o.addToRenderList(r);var a=h.pipelines.set(r.pipeline),v=d(r,o,p);a.calcMatrix.copyFrom(v.calc);var x=r._displayOriginX,g=r._displayOriginY,y=o.alpha*r.alpha;if(h.pipelines.preBatch(r),r.isFilled){var T=a.fillTint,P=u.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*y);T.TL=P,T.TR=P,T.BL=P,T.BR=P;var A=r.geom.x1-x,b=r.geom.y1-g,O=r.geom.x2-x,D=r.geom.y2-g,B=r.geom.x3-x,G=r.geom.y3-g;a.batchFillTriangle(A,b,O,D,B,G,v.sprite,v.camera)}r.isStroked&&S(a,r,y,x,g),h.pipelines.postBatch(r)};m.exports=l},68287:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(9674),S=i(83419),u=i(31401),l=i(95643),h=i(92751),r=new S({Extends:l,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Size,u.TextureCrop,u.Tint,u.Transform,u.Visible,h],initialize:function(p,a,v,x,g){l.call(this,p,"Sprite"),this._crop=this.resetCropObject(),this.anims=new d(this),this.setTexture(x,g),this.setPosition(a,v),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(o,p){this.anims.update(o,p)},play:function(o,p){return this.anims.play(o,p)},playReverse:function(o,p){return this.anims.playReverse(o,p)},playAfterDelay:function(o,p){return this.anims.playAfterDelay(o,p)},playAfterRepeat:function(o,p){return this.anims.playAfterRepeat(o,p)},chain:function(o){return this.anims.chain(o)},stop:function(){return this.anims.stop()},stopAfterDelay:function(o){return this.anims.stopAfterDelay(o)},stopAfterRepeat:function(o){return this.anims.stopAfterRepeat(o)},stopOnFrame:function(o){return this.anims.stopOnFrame(o)},toJSON:function(){return u.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});m.exports=r},76552:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){S.addToRenderList(d),i.batchSprite(d,d.frame,S,u)};m.exports=E},15567:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),S=i(13059),u=i(44603),l=i(23568),h=i(68287);u.register("sprite",function(r,o){r===void 0&&(r={});var p=l(r,"key",null),a=l(r,"frame",null),v=new h(this.scene,0,0,p,a);return o!==void 0&&(r.add=o),d(this.scene,v,r),S(v,r),v})},46409:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39429),S=i(68287);d.register("sprite",function(u,l,h,r){return this.displayList.add(new S(this.scene,u,l,h,r))})},92751:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(9409),u=i(76552),m.exports={renderWebGL:S,renderCanvas:u}},9409:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){S.addToRenderList(d),d.pipeline.batchSprite(d,S,u)};m.exports=E},14220:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){var u=i.canvas,l=i.context,h=i.style,r=[],o=0,p=S.length;h.maxLines>0&&h.maxLines<S.length&&(p=h.maxLines),h.syncFont(u,l);for(var a=i.letterSpacing,v=0;v<p;v++){var x=h.strokeThickness;if(a===0)x+=l.measureText(S[v]).width;else{for(var g=S[v],y=0;y<g.length;y++)x+=l.measureText(g[y]).width;g.length>1&&(x+=a*(g.length-1))}h.wordWrap&&(x-=l.measureText(" ").width),r[v]=Math.ceil(x),o=Math.max(o,r[v])}var T=d.fontSize+h.strokeThickness,P=T*p,A=i.lineSpacing;return p>1&&(P+=A*(p-1)),{width:o,height:P,lines:p,lineWidths:r,lineSpacing:A,lineHeight:T}};m.exports=E},79557:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(27919),S=function(u){var l=d.create(this),h=l.getContext("2d",{willReadFrequently:!0});u.syncFont(l,h);var r=h.measureText(u.testString);if("actualBoundingBoxAscent"in r){var o=r.actualBoundingBoxAscent,p=r.actualBoundingBoxDescent;return d.remove(l),{ascent:o,descent:p,fontSize:o+p}}var a=Math.ceil(r.width*u.baselineX),v=a,x=2*v;v=v*u.baselineY|0,l.width=a,l.height=x,h.fillStyle="#f00",h.fillRect(0,0,a,x),h.font=u._font,h.textBaseline="alphabetic",h.fillStyle="#000",h.fillText(u.testString,0,v);var g={ascent:0,descent:0,fontSize:0},y=h.getImageData(0,0,a,x);if(!y)return g.ascent=v,g.descent=v+6,g.fontSize=g.ascent+g.descent,d.remove(l),g;var T=y.data,P=T.length,A=a*4,b,O,D=0,B=!1;for(b=0;b<v;b++){for(O=0;O<A;O+=4)if(T[D+O]!==255){B=!0;break}if(!B)D+=A;else break}for(g.ascent=v-b,D=P-A,B=!1,b=x;b>v;b--){for(O=0;O<A;O+=4)if(T[D+O]!==255){B=!0;break}if(!B)D-=A;else break}return g.descent=b-v,g.fontSize=g.ascent+g.descent,d.remove(l),g};m.exports=S},50171:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(40366),S=i(27919),u=i(83419),l=i(31401),h=i(95643),r=i(14220),o=i(35154),p=i(35846),a=i(61771),v=i(35762),x=i(45650),g=new u({Extends:h,Mixins:[l.Alpha,l.BlendMode,l.ComputedSize,l.Crop,l.Depth,l.Flip,l.GetBounds,l.Mask,l.Origin,l.Pipeline,l.PostPipeline,l.ScrollFactor,l.Tint,l.Transform,l.Visible,a],initialize:function(T,P,A,b,O){P===void 0&&(P=0),A===void 0&&(A=0),h.call(this,T,"Text"),this.renderer=T.sys.renderer,this.setPosition(P,A),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=S.create(this),this.context,this.style=new v(this,O),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.letterSpacing=0,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=x(),this.texture=T.sys.textures.addCanvas(this._textureKey,this.canvas),this.context=this.texture.context,this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(b),O&&O.padding&&this.setPadding(O.padding),O&&O.lineSpacing&&this.setLineSpacing(O.lineSpacing),O&&O.letterSpacing&&this.setLetterSpacing(O.letterSpacing)},initRTL:function(){if(!this.style.rtl){this.canvas.dir="ltr",this.context.direction="ltr";return}this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",d(this.canvas,this.scene.sys.canvas),this.originX=1},runWordWrap:function(y){var T=this.style;if(T.wordWrapCallback){var P=T.wordWrapCallback.call(T.wordWrapCallbackScope,y,this);return Array.isArray(P)&&(P=P.join(`
`)),P}else return T.wordWrapWidth?T.wordWrapUseAdvanced?this.advancedWordWrap(y,this.context,this.style.wordWrapWidth):this.basicWordWrap(y,this.context,this.style.wordWrapWidth):y},advancedWordWrap:function(y,T,P){for(var A="",b=y.replace(/ +/gi," ").split(this.splitRegExp),O=b.length,D=0;D<O;D++){var B=b[D],G="";B=B.replace(/^ *|\s*$/gi,"");var V=B.length*this.letterSpacing,k=T.measureText(B).width+V;if(k<P){A+=B+`
`;continue}for(var U=P,W=B.split(" "),X=0;X<W.length;X++){var _=W[X],Q=_+" ",j=Q.length*this.letterSpacing,it=T.measureText(Q).width+j;if(it>U){if(X===0){for(var K=Q;K.length;){K=K.slice(0,-1);var J=K.length*this.letterSpacing;if(it=T.measureText(K).width+J,it<=U)break}if(!K.length)throw new Error("wordWrapWidth < a single character");var Y=_.substr(K.length);W[X]=Y,G+=K}var q=W[X].length?X:X+1,$=W.slice(q).join(" ").replace(/[ \n]*$/gi,"");b.splice(D+1,0,$),O=b.length;break}else G+=Q,U-=it}A+=G.replace(/[ \n]*$/gi,"")+`
`}return A=A.replace(/[\s|\n]*$/gi,""),A},basicWordWrap:function(y,T,P){for(var A="",b=y.split(this.splitRegExp),O=b.length-1,D=T.measureText(" ").width,B=0;B<=O;B++){for(var G=P,V=b[B].split(" "),k=V.length-1,U=0;U<=k;U++){var W=V[U],X=W.length*this.letterSpacing,_=T.measureText(W).width+X,Q=_;U<k&&(Q+=D),Q>G&&U>0&&(A+=`
`,G=P),A+=W,U<k?(A+=" ",G-=Q):G-=_}B<O&&(A+=`
`)}return A},getWrappedText:function(y){y===void 0&&(y=this._text),this.style.syncFont(this.canvas,this.context);var T=this.runWordWrap(y);return T.split(this.splitRegExp)},setText:function(y){return!y&&y!==0&&(y=""),Array.isArray(y)&&(y=y.join(`
`)),y!==this._text&&(this._text=y.toString(),this.updateText()),this},appendText:function(y,T){T===void 0&&(T=!0),!y&&y!==0&&(y=""),Array.isArray(y)&&(y=y.join(`
`)),y=y.toString();var P=this._text.concat(T?`
`+y:y);return P!==this._text&&(this._text=P,this.updateText()),this},setStyle:function(y){return this.style.setStyle(y)},setFont:function(y){return this.style.setFont(y)},setFontFamily:function(y){return this.style.setFontFamily(y)},setFontSize:function(y){return this.style.setFontSize(y)},setFontStyle:function(y){return this.style.setFontStyle(y)},setFixedSize:function(y,T){return this.style.setFixedSize(y,T)},setBackgroundColor:function(y){return this.style.setBackgroundColor(y)},setFill:function(y){return this.style.setFill(y)},setColor:function(y){return this.style.setColor(y)},setStroke:function(y,T){return this.style.setStroke(y,T)},setShadow:function(y,T,P,A,b,O){return this.style.setShadow(y,T,P,A,b,O)},setShadowOffset:function(y,T){return this.style.setShadowOffset(y,T)},setShadowColor:function(y){return this.style.setShadowColor(y)},setShadowBlur:function(y){return this.style.setShadowBlur(y)},setShadowStroke:function(y){return this.style.setShadowStroke(y)},setShadowFill:function(y){return this.style.setShadowFill(y)},setWordWrapWidth:function(y,T){return this.style.setWordWrapWidth(y,T)},setWordWrapCallback:function(y,T){return this.style.setWordWrapCallback(y,T)},setAlign:function(y){return this.style.setAlign(y)},setResolution:function(y){return this.style.setResolution(y)},setLineSpacing:function(y){return this.lineSpacing=y,this.updateText()},setLetterSpacing:function(y){return this.letterSpacing=y,this.updateText()},setPadding:function(y,T,P,A){if(typeof y=="object"){var b=y,O=o(b,"x",null);O!==null?(y=O,P=O):(y=o(b,"left",0),P=o(b,"right",y));var D=o(b,"y",null);D!==null?(T=D,A=D):(T=o(b,"top",0),A=o(b,"bottom",T))}else y===void 0&&(y=0),T===void 0&&(T=y),P===void 0&&(P=y),A===void 0&&(A=T);return this.padding.left=y,this.padding.top=T,this.padding.right=P,this.padding.bottom=A,this.updateText()},setMaxLines:function(y){return this.style.setMaxLines(y)},setRTL:function(y){y===void 0&&(y=!0);var T=this.style;return T.rtl===y?this:(T.rtl=y,y?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",d(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),T.align==="left"?T.align="right":T.align==="right"&&(T.align="left"),this)},updateText:function(){var y=this.canvas,T=this.context,P=this.style,A=P.resolution,b=P.metrics;P.syncFont(y,T);var O=this._text;(P.wordWrapWidth||P.wordWrapCallback)&&(O=this.runWordWrap(this._text));var D=O.split(this.splitRegExp),B=r(this,b,D),G=this.padding,V;P.fixedWidth===0?(this.width=B.width+G.left+G.right,V=B.width):(this.width=P.fixedWidth,V=this.width-G.left-G.right,V<B.width&&(V=B.width)),P.fixedHeight===0?this.height=B.height+G.top+G.bottom:this.height=P.fixedHeight;var k=this.width,U=this.height;this.updateDisplayOrigin(),k*=A,U*=A,k=Math.max(k,1),U=Math.max(U,1),y.width!==k||y.height!==U?(y.width=k,y.height=U,this.frame.setSize(k,U),P.syncFont(y,T),P.rtl&&(T.direction="rtl")):T.clearRect(0,0,k,U),T.save(),T.scale(A,A),P.backgroundColor&&(T.fillStyle=P.backgroundColor,T.fillRect(0,0,k,U)),P.syncStyle(y,T),T.translate(G.left,G.top);for(var W,X,_=0;_<B.lines;_++){if(W=P.strokeThickness/2,X=P.strokeThickness/2+_*B.lineHeight+b.ascent,_>0&&(X+=B.lineSpacing*_),P.rtl)W=k-W-G.left-G.right;else if(P.align==="right")W+=V-B.lineWidths[_];else if(P.align==="center")W+=(V-B.lineWidths[_])/2;else if(P.align==="justify"){var Q=.85;if(B.lineWidths[_]/B.width>=Q){var j=B.width-B.lineWidths[_],it=T.measureText(" ").width,K=D[_].trim(),J=K.split(" ");j+=(D[_].length-K.length)*it;for(var Y=Math.floor(j/it),q=0;Y>0;)J[q]+=" ",q=(q+1)%(J.length-1||1),--Y;D[_]=J.join(" ")}}this.autoRound&&(W=Math.round(W),X=Math.round(X));var $=this.letterSpacing;if(P.strokeThickness&&$===0&&(P.syncShadow(T,P.shadowStroke),T.strokeText(D[_],W,X)),P.color)if(P.syncShadow(T,P.shadowFill),$!==0)for(var et=0,rt=D[_].split(""),at=0;at<rt.length;at++)P.strokeThickness&&(P.syncShadow(T,P.shadowStroke),T.strokeText(rt[at],W+et,X),P.syncShadow(T,P.shadowFill)),T.fillText(rt[at],W+et,X),et+=T.measureText(rt[at]).width+$;else T.fillText(D[_],W,X)}T.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(y,this.frame.source.glTexture,!0));var lt=this.input;return lt&&!lt.customHitArea&&(lt.hitArea.width=this.width,lt.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(y){this.setText(y)}},toJSON:function(){var y=l.ToJSON(this),T={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return y.data=T,y},preDestroy:function(){p(this.canvas),S.remove(this.canvas);var y=this.texture;y&&y.destroy()}});m.exports=g},79724:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){d.width===0||d.height===0||(S.addToRenderList(d),i.batchSprite(d,d.frame,S,u))};m.exports=E},71259:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),S=i(44603),u=i(23568),l=i(50171);S.register("text",function(h,r){h===void 0&&(h={});var o=u(h,"text",""),p=u(h,"style",null),a=u(h,"padding",null);a!==null&&(p.padding=a);var v=new l(this.scene,0,0,o,p);return r!==void 0&&(h.add=r),d(this.scene,v,h),v.autoRound=u(h,"autoRound",!0),v.resolution=u(h,"resolution",1),v})},68005:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(50171),S=i(39429);S.register("text",function(u,l,h,r){return this.displayList.add(new d(this.scene,u,l,h,r))})},61771:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(34397),u=i(79724),m.exports={renderWebGL:S,renderCanvas:u}},35762:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(23568),u=i(35154),l=i(79557),h={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|MÃ‰qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},r=new d({initialize:function(p,a){this.parent=p,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(a,!1,!0)},setStyle:function(o,p,a){p===void 0&&(p=!0),a===void 0&&(a=!1);for(var v in h){var x=a?h[v][1]:this[v];v==="wordWrapCallback"||v==="wordWrapCallbackScope"?this[v]=u(o,h[v][0],x):o&&v==="fontSize"&&typeof o.fontSize=="number"?this[v]=o.fontSize.toString()+"px":this[v]=S(o,h[v][0],x)}var g=u(o,"font",null);g!==null&&this.setFont(g,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var y=u(o,"fill",null);y!==null&&(this.color=y);var T=u(o,"metrics",!1);return T?this.metrics={ascent:u(T,"ascent",0),descent:u(T,"descent",0),fontSize:u(T,"fontSize",0)}:(p||!this.metrics)&&(this.metrics=l(this)),p?this.parent.updateText():this.parent},syncFont:function(o,p){p.font=this._font},syncStyle:function(o,p){p.textBaseline="alphabetic",p.fillStyle=this.color,p.strokeStyle=this.stroke,p.lineWidth=this.strokeThickness,p.lineCap="round",p.lineJoin="round"},syncShadow:function(o,p){p?(o.shadowOffsetX=this.shadowOffsetX,o.shadowOffsetY=this.shadowOffsetY,o.shadowColor=this.shadowColor,o.shadowBlur=this.shadowBlur):(o.shadowOffsetX=0,o.shadowOffsetY=0,o.shadowColor=0,o.shadowBlur=0)},update:function(o){return o&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=l(this)),this.parent.updateText()},setFont:function(o,p){p===void 0&&(p=!0);var a=o,v="",x="";if(typeof o!="string")a=u(o,"fontFamily","Courier"),v=u(o,"fontSize","16px"),x=u(o,"fontStyle","");else{var g=o.split(" "),y=0;x=g.length>2?g[y++]:"",v=g[y++]||"16px",a=g[y++]||"Courier"}return(a!==this.fontFamily||v!==this.fontSize||x!==this.fontStyle)&&(this.fontFamily=a,this.fontSize=v,this.fontStyle=x,p&&this.update(!0)),this.parent},setFontFamily:function(o){return this.fontFamily!==o&&(this.fontFamily=o,this.update(!0)),this.parent},setFontStyle:function(o){return this.fontStyle!==o&&(this.fontStyle=o,this.update(!0)),this.parent},setFontSize:function(o){return typeof o=="number"&&(o=o.toString()+"px"),this.fontSize!==o&&(this.fontSize=o,this.update(!0)),this.parent},setTestString:function(o){return this.testString=o,this.update(!0)},setFixedSize:function(o,p){return this.fixedWidth=o,this.fixedHeight=p,o&&(this.parent.width=o),p&&(this.parent.height=p),this.update(!1)},setBackgroundColor:function(o){return this.backgroundColor=o,this.update(!1)},setFill:function(o){return this.color=o,this.update(!1)},setColor:function(o){return this.color=o,this.update(!1)},setResolution:function(o){return this.resolution=o,this.update(!1)},setStroke:function(o,p){return p===void 0&&(p=this.strokeThickness),o===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==o||this.strokeThickness!==p)&&(this.stroke=o,this.strokeThickness=p,this.update(!0)),this.parent},setShadow:function(o,p,a,v,x,g){return o===void 0&&(o=0),p===void 0&&(p=0),a===void 0&&(a="#000"),v===void 0&&(v=0),x===void 0&&(x=!1),g===void 0&&(g=!0),this.shadowOffsetX=o,this.shadowOffsetY=p,this.shadowColor=a,this.shadowBlur=v,this.shadowStroke=x,this.shadowFill=g,this.update(!1)},setShadowOffset:function(o,p){return o===void 0&&(o=0),p===void 0&&(p=o),this.shadowOffsetX=o,this.shadowOffsetY=p,this.update(!1)},setShadowColor:function(o){return o===void 0&&(o="#000"),this.shadowColor=o,this.update(!1)},setShadowBlur:function(o){return o===void 0&&(o=0),this.shadowBlur=o,this.update(!1)},setShadowStroke:function(o){return this.shadowStroke=o,this.update(!1)},setShadowFill:function(o){return this.shadowFill=o,this.update(!1)},setWordWrapWidth:function(o,p){return p===void 0&&(p=!1),this.wordWrapWidth=o,this.wordWrapUseAdvanced=p,this.update(!1)},setWordWrapCallback:function(o,p){return p===void 0&&(p=null),this.wordWrapCallback=o,this.wordWrapCallbackScope=p,this.update(!1)},setAlign:function(o){return o===void 0&&(o="left"),this.align=o,this.update(!1)},setMaxLines:function(o){return o===void 0&&(o=0),this.maxLines=o,this.update(!1)},getTextMetrics:function(){var o=this.metrics;return{ascent:o.ascent,descent:o.descent,fontSize:o.fontSize}},toJSON:function(){var o={};for(var p in h)o[p]=this[p];return o.metrics=this.getTextMetrics(),o},destroy:function(){this.parent=void 0}});m.exports=r},34397:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(70554),S=function(u,l,h,r){if(!(l.width===0||l.height===0)){h.addToRenderList(l);var o=l.frame,p=o.width,a=o.height,v=d.getTintAppendFloatAlpha,x=u.pipelines.set(l.pipeline,l),g=x.setTexture2D(o.glTexture,l);x.batchTexture(l,o.glTexture,p,a,l.x,l.y,p/l.style.resolution,a/l.style.resolution,l.scaleX,l.scaleY,l.rotation,l.flipX,l.flipY,l.scrollFactorX,l.scrollFactorY,l.displayOriginX,l.displayOriginY,0,0,p,a,v(l.tintTopLeft,h.alpha*l._alphaTL),v(l.tintTopRight,h.alpha*l._alphaTR),v(l.tintBottomLeft,h.alpha*l._alphaBL),v(l.tintBottomRight,h.alpha*l._alphaBR),l.tintFill,0,0,h,r,!1,g)}};m.exports=S},20839:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(27919),S=i(83419),u=i(31401),l=i(95643),h=i(98439),r=i(68703),o=i(56295),p=i(45650),a=i(26099),v=8,x=new S({Extends:l,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Crop,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Tint,u.Transform,u.Visible,o],initialize:function(y,T,P,A,b,O,D){var B=y.sys.renderer;l.call(this,y,"TileSprite");var G=y.sys.textures.get(O),V=G.get(D);V.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),G=y.sys.textures.get("__MISSING"),V=G.get()),G.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),G=y.sys.textures.get("__MISSING"),V=G.get()),!A||!b?(A=A||V.width,b=b||V.height):(A=Math.floor(A),b=Math.floor(b)),this._tilePosition=new a,this._tileScale=new a(1,1),this.dirty=!1,this.renderer=B,this.canvas=d.create(this,A,b),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=G,this.displayFrame=V,this._crop=this.resetCropObject(),this._textureKey=p(),this.texture=y.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.potWidth=h(V.width),this.potHeight=h(V.height),this.fillCanvas=d.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(T,P),this.setSize(A,b),this.setFrame(D),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(g,y){return this.displayTexture=this.scene.sys.textures.get(g),this.setFrame(y)},setFrame:function(g){var y=this.displayTexture.get(g);return this.potWidth=h(y.width),this.potHeight=h(y.height),this.canvas.width=0,!y.cutWidth||!y.cutHeight?this.renderFlags&=~v:this.renderFlags|=v,this.displayFrame=y,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(g,y){return g!==void 0&&(this.tilePositionX=g),y!==void 0&&(this.tilePositionY=y),this},setTileScale:function(g,y){return g===void 0&&(g=this.tileScaleX),y===void 0&&(y=g),this.tileScaleX=g,this.tileScaleY=y,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var g=this.displayFrame;if(g.source.isRenderTexture||g.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var y=this.fillContext,T=this.fillCanvas,P=this.potWidth,A=this.potHeight;(!this.renderer||!this.renderer.gl)&&(P=g.cutWidth,A=g.cutHeight),y.clearRect(0,0,P,A),T.width=P,T.height=A,y.drawImage(g.source.image,g.cutX,g.cutY,g.cutWidth,g.cutHeight,0,0,P,A),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(T,this.fillPattern):this.fillPattern=y.createPattern(T,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var g=this.canvas;if((g.width!==this.width||g.height!==this.height)&&(g.width=this.width,g.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var y=this.context;this.scene.sys.game.config.antialias||r.disable(y);var T=this._tileScale.x,P=this._tileScale.y,A=this._tilePosition.x,b=this._tilePosition.y;y.clearRect(0,0,this.width,this.height),y.save(),y.scale(T,P),y.translate(-A,-b),y.fillStyle=this.fillPattern,y.fillRect(A,b,this.width/T,this.height/P),y.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),d.remove(this.canvas),d.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null;var g=this.texture;g&&g.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(g){this._tilePosition.x=g,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(g){this._tilePosition.y=g,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(g){this._tileScale.x=g,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(g){this._tileScale.y=g,this.dirty=!0}}});m.exports=x},46992:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){d.updateCanvas(),S.addToRenderList(d),i.batchSprite(d,d.frame,S,u)};m.exports=E},14167:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),S=i(44603),u=i(23568),l=i(20839);S.register("tileSprite",function(h,r){h===void 0&&(h={});var o=u(h,"x",0),p=u(h,"y",0),a=u(h,"width",512),v=u(h,"height",512),x=u(h,"key",""),g=u(h,"frame",""),y=new l(this.scene,o,p,a,v,x,g);return r!==void 0&&(h.add=r),d(this.scene,y,h),y})},91681:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(20839),S=i(39429);S.register("tileSprite",function(u,l,h,r,o,p){return this.displayList.add(new d(this.scene,u,l,h,r,o,p))})},56295:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(18553),u=i(46992),m.exports={renderWebGL:S,renderCanvas:u}},18553:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(70554),S=function(u,l,h,r){l.updateCanvas();var o=l.width,p=l.height;if(!(o===0||p===0)){h.addToRenderList(l);var a=d.getTintAppendFloatAlpha,v=u.pipelines.set(l.pipeline,l),x=v.setTexture2D(l.fillPattern,l);v.batchTexture(l,l.fillPattern,l.displayFrame.width*l.tileScaleX,l.displayFrame.height*l.tileScaleY,l.x,l.y,o,p,l.scaleX,l.scaleY,l.rotation,l.flipX,l.flipY,l.scrollFactorX,l.scrollFactorY,l.originX*o,l.originY*p,0,0,o,p,a(l.tintTopLeft,h.alpha*l._alphaTL),a(l.tintTopRight,h.alpha*l._alphaTR),a(l.tintBottomLeft,h.alpha*l._alphaBL),a(l.tintBottomRight,h.alpha*l._alphaBR),l.tintFill,l.tilePositionX%l.displayFrame.width/l.displayFrame.width,l.tilePositionY%l.displayFrame.height/l.displayFrame.height,h,r,!1,x)}};m.exports=S},18471:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45319),S=i(83419),u=i(31401),l=i(51708),h=i(8443),r=i(95643),o=i(36383),p=i(14463),a=i(45650),v=i(10247),x=new S({Extends:r,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.TextureCrop,u.Tint,u.Transform,u.Visible,v],initialize:function(y,T,P,A){r.call(this,y,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=a(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._metadataCallbackHandler=this.metadataHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._getFrame=!1,this._rfvCallbackId=0;var b=y.sys.game;this._device=b.device.video,this.setPosition(T,P),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),b.events.on(h.PAUSE,this.globalPause,this),b.events.on(h.RESUME,this.globalResume,this);var O=y.sys.sound;O&&O.on(p.GLOBAL_MUTE,this.globalMute,this),A&&this.load(A)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(g){var y=this.scene.sys.cache.video.get(g);return y?(this.cacheKey=g,this.loadHandler(y.url,y.noAudio,y.crossOrigin)):console.warn("No video in cache for key: "+g),this},changeSource:function(g,y,T,P,A){y===void 0&&(y=!0),T===void 0&&(T=!1),this.cacheKey!==g&&(this.load(g),y&&this.play(T,P,A))},getVideoKey:function(){return this.cacheKey},loadURL:function(g,y,T){y===void 0&&(y=!1);var P=this._device.getVideoURL(g);return P?(this.cacheKey="",this.loadHandler(P.url,y,T)):console.warn("No supported video format found for "+g),this},loadMediaStream:function(g,y,T){return this.loadHandler(null,y,T,g)},loadHandler:function(g,y,T,P){y||(y=!1);var A=this.video;if(A?(this.removeLoadEventHandlers(),this.stop()):(A=document.createElement("video"),A.controls=!1,A.setAttribute("playsinline","playsinline"),A.setAttribute("preload","auto"),A.setAttribute("disablePictureInPicture","true")),y?(A.muted=!0,A.defaultMuted=!0,A.setAttribute("autoplay","autoplay")):(A.muted=!1,A.defaultMuted=!1,A.removeAttribute("autoplay")),T?A.setAttribute("crossorigin",T):A.removeAttribute("crossorigin"),P)if("srcObject"in A)try{A.srcObject=P}catch(O){if(O.name!=="TypeError")throw O;A.src=URL.createObjectURL(P)}else A.src=URL.createObjectURL(P);else A.src=g;this.retry=0,this.video=A,this._playCalled=!1,A.load(),this.addLoadEventHandlers();var b=this.scene.sys.textures.get(this._key);return this.setTexture(b),this},requestVideoFrame:function(g,y){var T=this.video;if(T){var P=y.width,A=y.height,b=this.videoTexture,O=this.videoTextureSource,D=!b||O.source!==T;D?(this._codePaused=T.paused,this._codeMuted=T.muted,b?(O.source=T,O.width=P,O.height=A,b.get().setSize(P,A)):(b=this.scene.sys.textures.create(this._key,T,P,A),b.add("__BASE",0,0,0,P,A),this.setTexture(b),this.videoTexture=b,this.videoTextureSource=b.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(l.VIDEO_TEXTURE,this,b)),this.setSizeToFrame(),this.updateDisplayOrigin()):O.update(),this.isStalled=!1,this.metadata=y;var B=y.mediaTime;D&&(this._lastUpdate=B,this.emit(l.VIDEO_CREATED,this,P,A),this.frameReady||(this.frameReady=!0,this.emit(l.VIDEO_PLAY,this))),this._playingMarker?B>=this._markerOut&&(T.loop?(T.currentTime=this._markerIn,this.emit(l.VIDEO_LOOP,this)):(this.stop(!1),this.emit(l.VIDEO_COMPLETE,this))):B<this._lastUpdate&&this.emit(l.VIDEO_LOOP,this),this._lastUpdate=B,this._getFrame?(this.removeEventHandlers(),T.pause(),this._getFrame=!1):this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(g,y,T){y===void 0&&(y=-1),T===void 0&&(T=o.MAX_SAFE_INTEGER);var P=this.video;return!P||this.isPlaying()?(P||console.warn("Video not loaded"),this):(g===void 0&&(g=P.loop),P.loop=g,this._markerIn=y,this._markerOut=T,this._playingMarker=y>-1&&T>y&&T<o.MAX_SAFE_INTEGER,this._playCalled||(this._getFrame=!1,this._rfvCallbackId=P.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},getFirstFrame:function(){var g=this.video;return!g||this.isPlaying()?(g||console.warn("Video not loaded"),this):(this._playCalled||(this._getFrame=!0,this._rfvCallbackId=g.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this.createPlayPromise()),this)},addLoadEventHandlers:function(){var g=this.video;g&&(g.addEventListener("error",this._loadCallbackHandler),g.addEventListener("abort",this._loadCallbackHandler),g.addEventListener("loadedmetadata",this._metadataCallbackHandler))},removeLoadEventHandlers:function(){var g=this.video;g&&(g.removeEventListener("error",this._loadCallbackHandler),g.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var g=this.video;if(g){var y=this._callbacks;for(var T in y)g.addEventListener(T,y[T])}},removeEventHandlers:function(){var g=this.video;if(g){var y=this._callbacks;for(var T in y)g.removeEventListener(T,y[T])}},createPlayPromise:function(g){g===void 0&&(g=!0);var y=this.video,T=y.play();if(T!==void 0){var P=this.playSuccess.bind(this),A=this.playError.bind(this);if(!g){var b=this;A=function(){b.failedPlayAttempts++}}T.then(P).catch(A)}else y.addEventListener("playing",this._callbacks.legacy),g||this.failedPlayAttempts++},addMarker:function(g,y,T){return!isNaN(y)&&y>=0&&!isNaN(T)&&T>y&&(this.markers[g]=[y,T]),this},playMarker:function(g,y){var T=this.markers[g];return T&&this.play(y,T[0],T[1]),this},removeMarker:function(g){return delete this.markers[g],this},snapshot:function(g,y){return g===void 0&&(g=this.width),y===void 0&&(y=this.height),this.snapshotArea(0,0,this.width,this.height,g,y)},snapshotArea:function(g,y,T,P,A,b){g===void 0&&(g=0),y===void 0&&(y=0),T===void 0&&(T=this.width),P===void 0&&(P=this.height),A===void 0&&(A=T),b===void 0&&(b=P);var O=this.video,D=this.snapshotTexture;return D?(D.setSize(A,b),O&&D.context.drawImage(O,g,y,T,P,0,0,A,b)):(D=this.scene.sys.textures.createCanvas(a(),A,b),this.snapshotTexture=D,O&&D.context.drawImage(O,g,y,T,P,0,0,A,b)),D.update()},saveSnapshotTexture:function(g){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,g):this.snapshotTexture=this.scene.sys.textures.createCanvas(g,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(l.VIDEO_UNLOCKED,this));var g=this.scene.sys.sound;g&&g.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(g){var y=g.name;y==="NotAllowedError"?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(l.VIDEO_LOCKED,this)):y==="NotSupportedError"?(this.stop(!1),this.emit(l.VIDEO_UNSUPPORTED,this,g)):(this.stop(!1),this.emit(l.VIDEO_ERROR,this,g))},legacyPlayHandler:function(){var g=this.video;g&&(this.playSuccess(),g.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(l.VIDEO_PLAYING,this)},loadErrorHandler:function(g){this.stop(!1),this.emit(l.VIDEO_ERROR,this,g)},metadataHandler:function(g){this.emit(l.VIDEO_METADATA,this,g)},setSizeToFrame:function(g){g||(g=this.frame),this.width=g.realWidth,this.height=g.realHeight,this.scaleX!==1&&(this.scaleX=this.displayWidth/this.width),this.scaleY!==1&&(this.scaleY=this.displayHeight/this.height);var y=this.input;return y&&!y.customHitArea&&(y.hitArea.width=this.width,y.hitArea.height=this.height),this},stalledHandler:function(g){this.isStalled=!0,this.emit(l.VIDEO_STALLED,this,g)},completeHandler:function(){this._playCalled=!1,this.emit(l.VIDEO_COMPLETE,this)},preUpdate:function(g,y){var T=this.video;!T||!this._playCalled||this.touchLocked&&this.playWhenUnlocked&&(this.retry+=y,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(g){var y=this.video;if(y){var T=y.duration;if(T!==1/0&&!isNaN(T)){var P=T*g;this.setCurrentTime(P)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(g){var y=this.video;if(y){if(typeof g=="string"){var T=g[0],P=parseFloat(g.substr(1));T==="+"?g=y.currentTime+P:T==="-"&&(g=y.currentTime-P)}y.currentTime=g}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(l.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(l.VIDEO_SEEKED,this)},getProgress:function(){var g=this.video;if(g){var y=g.duration;if(y!==1/0&&!isNaN(y))return g.currentTime/y}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(g){g===void 0&&(g=!0),this._codeMuted=g;var y=this.video;return y&&(y.muted=this._systemMuted?!0:g),this},isMuted:function(){return this._codeMuted},globalMute:function(g,y){this._systemMuted=y;var T=this.video;T&&(T.muted=this._codeMuted?!0:y)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&!this.video.ended&&this.createPlayPromise()},setPaused:function(g){g===void 0&&(g=!0);var y=this.video;return this._codePaused=g,y&&!y.ended&&(g?y.paused||(this.removeEventHandlers(),y.pause()):g||(this._playCalled?y.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(g){return g===void 0&&(g=1),this.video&&(this.video.volume=d(g,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(g){return this.video&&(this.video.playbackRate=g),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(g){return g===void 0&&(g=!0),this.video&&(this.video.loop=g),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(g,y){return y===void 0&&(y=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,g),this.videoTextureSource.setFlipY(y)),this._key=g,this.flipY=y,!!this.videoTexture},stop:function(g){g===void 0&&(g=!0);var y=this.video;return y&&(this.removeEventHandlers(),y.cancelVideoFrameCallback(this._rfvCallbackId),y.pause()),this.retry=0,this._playCalled=!1,g&&this.emit(l.VIDEO_STOP,this),this},removeVideoElement:function(){var g=this.video;if(g){for(g.parentNode&&g.parentNode.removeChild(g);g.hasChildNodes();)g.removeChild(g.firstChild);g.removeAttribute("autoplay"),g.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var g=this.scene.sys.game.events;g.off(h.PAUSE,this.globalPause,this),g.off(h.RESUME,this.globalResume,this);var y=this.scene.sys.sound;y&&y.off(p.GLOBAL_MUTE,this.globalMute,this)}});m.exports=x},58352:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){d.videoTexture&&(S.addToRenderList(d),i.batchSprite(d,d.frame,S,u))};m.exports=E},11511:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25305),S=i(44603),u=i(23568),l=i(18471);S.register("video",function(h,r){h===void 0&&(h={});var o=u(h,"key",null),p=new l(this.scene,0,0,o);return r!==void 0&&(h.add=r),d(this.scene,p,h),p})},89025:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(18471),S=i(39429);S.register("video",function(u,l,h){return this.displayList.add(new d(this.scene,u,l,h))})},10247:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(29849),u=i(58352),m.exports={renderWebGL:S,renderCanvas:u}},29849:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){d.videoTexture&&(S.addToRenderList(d),d.pipeline.batchSprite(d,S,u))};m.exports=E},41481:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(10312),S=i(96503),u=i(87902),l=i(83419),h=i(31401),r=i(95643),o=i(87841),p=i(37303),a=new l({Extends:r,Mixins:[h.Depth,h.GetBounds,h.Origin,h.Transform,h.ScrollFactor,h.Visible],initialize:function(x,g,y,T,P){T===void 0&&(T=1),P===void 0&&(P=T),r.call(this,x,"Zone"),this.setPosition(g,y),this.width=T,this.height=P,this.blendMode=d.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(v){this.scaleX=v/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(v){this.scaleY=v/this.height}},setSize:function(v,x,g){g===void 0&&(g=!0),this.width=v,this.height=x,this.updateDisplayOrigin();var y=this.input;return g&&y&&!y.customHitArea&&(y.hitArea.width=v,y.hitArea.height=x),this},setDisplaySize:function(v,x){return this.displayWidth=v,this.displayHeight=x,this},setCircleDropZone:function(v){return this.setDropZone(new S(0,0,v),u)},setRectangleDropZone:function(v,x){return this.setDropZone(new o(0,0,v,x),p)},setDropZone:function(v,x){return this.input||this.setInteractive(v,x,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(v,x,g){g.addToRenderList(x)},renderWebGL:function(v,x,g){g.addToRenderList(x)}});m.exports=a},95261:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(44603),S=i(23568),u=i(41481);d.register("zone",function(l){var h=S(l,"x",0),r=S(l,"y",0),o=S(l,"width",1),p=S(l,"height",o);return new u(this.scene,h,r,o,p)})},84175:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(41481),S=i(39429);S.register("zone",function(u,l,h,r){return this.displayList.add(new d(this.scene,u,l,h,r))})},95166:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i.radius>0?Math.PI*i.radius*i.radius:0};m.exports=E},96503:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(87902),u=i(26241),l=i(79124),h=i(23777),r=i(28176),o=new d({initialize:function(a,v,x){a===void 0&&(a=0),v===void 0&&(v=0),x===void 0&&(x=0),this.type=h.CIRCLE,this.x=a,this.y=v,this._radius=x,this._diameter=x*2},contains:function(p,a){return S(this,p,a)},getPoint:function(p,a){return u(this,p,a)},getPoints:function(p,a,v){return l(this,p,a,v)},getRandomPoint:function(p){return r(this,p)},setTo:function(p,a,v){return this.x=p,this.y=a,this._radius=v,this._diameter=v*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(p,a){return a===void 0&&(a=p),this.x=p,this.y=a,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(p){this._radius=p,this._diameter=p*2}},diameter:{get:function(){return this._diameter},set:function(p){this._diameter=p,this._radius=p*.5}},left:{get:function(){return this.x-this._radius},set:function(p){this.x=p+this._radius}},right:{get:function(){return this.x+this._radius},set:function(p){this.x=p-this._radius}},top:{get:function(){return this.y-this._radius},set:function(p){this.y=p+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(p){this.y=p-this._radius}}});m.exports=o},71562:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return 2*(Math.PI*i.radius)};m.exports=E},92110:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),S=function(u,l,h){return h===void 0&&(h=new d),h.x=u.x+u.radius*Math.cos(l),h.y=u.y+u.radius*Math.sin(l),h};m.exports=S},42250:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(96503),S=function(u){return new d(u.x,u.y,u.radius)};m.exports=S},87902:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){if(i.radius>0&&d>=i.left&&d<=i.right&&S>=i.top&&S<=i.bottom){var u=(i.x-d)*(i.x-d),l=(i.y-S)*(i.y-S);return u+l<=i.radius*i.radius}else return!1};m.exports=E},5698:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87902),S=function(u,l){return d(u,l.x,l.y)};m.exports=S},70588:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87902),S=function(u,l){return d(u,l.x,l.y)&&d(u,l.right,l.y)&&d(u,l.x,l.bottom)&&d(u,l.right,l.bottom)};m.exports=S},26394:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return d.setTo(i.x,i.y,i.radius)};m.exports=E},76278:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return i.x===d.x&&i.y===d.y&&i.radius===d.radius};m.exports=E},2074:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87841),S=function(u,l){return l===void 0&&(l=new d),l.x=u.left,l.y=u.top,l.width=u.diameter,l.height=u.diameter,l};m.exports=S},26241:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(92110),S=i(62945),u=i(36383),l=i(2141),h=function(r,o,p){p===void 0&&(p=new l);var a=S(o,0,u.PI2);return d(r,a,p)};m.exports=h},79124:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(71562),S=i(92110),u=i(62945),l=i(36383),h=function(r,o,p,a){a===void 0&&(a=[]),!o&&p>0&&(o=d(r)/p);for(var v=0;v<o;v++){var x=u(v/o,0,l.PI2);a.push(S(r,x))}return a};m.exports=h},50884:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){return i.x+=d,i.y+=S,i};m.exports=E},39212:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return i.x+=d.x,i.y+=d.y,i};m.exports=E},28176:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),S=function(u,l){l===void 0&&(l=new d);var h=2*Math.PI*Math.random(),r=Math.random()+Math.random(),o=r>1?2-r:r,p=o*Math.cos(h),a=o*Math.sin(h);return l.x=u.x+p*u.radius,l.y=u.y+a*u.radius,l};m.exports=S},88911:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(96503);d.Area=i(95166),d.Circumference=i(71562),d.CircumferencePoint=i(92110),d.Clone=i(42250),d.Contains=i(87902),d.ContainsPoint=i(5698),d.ContainsRect=i(70588),d.CopyFrom=i(26394),d.Equals=i(76278),d.GetBounds=i(2074),d.GetPoint=i(26241),d.GetPoints=i(79124),d.Offset=i(50884),d.OffsetPoint=i(39212),d.Random=i(28176),m.exports=d},23777:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};m.exports=E},78874:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i.isEmpty()?0:i.getMajorRadius()*i.getMinorRadius()*Math.PI};m.exports=E},92990:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){var d=i.width/2,S=i.height/2,u=Math.pow(d-S,2)/Math.pow(d+S,2);return Math.PI*(d+S)*(1+3*u/(10+Math.sqrt(4-3*u)))};m.exports=E},79522:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),S=function(u,l,h){h===void 0&&(h=new d);var r=u.width/2,o=u.height/2;return h.x=u.x+r*Math.cos(l),h.y=u.y+o*Math.sin(l),h};m.exports=S},58102:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(8497),S=function(u){return new d(u.x,u.y,u.width,u.height)};m.exports=S},81154:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){if(i.width<=0||i.height<=0)return!1;var u=(d-i.x)/i.width,l=(S-i.y)/i.height;return u*=u,l*=l,u+l<.25};m.exports=E},46662:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(81154),S=function(u,l){return d(u,l.x,l.y)};m.exports=S},1632:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(81154),S=function(u,l){return d(u,l.x,l.y)&&d(u,l.right,l.y)&&d(u,l.x,l.bottom)&&d(u,l.right,l.bottom)};m.exports=S},65534:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return d.setTo(i.x,i.y,i.width,i.height)};m.exports=E},8497:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(81154),u=i(90549),l=i(48320),h=i(23777),r=i(24820),o=new d({initialize:function(a,v,x,g){a===void 0&&(a=0),v===void 0&&(v=0),x===void 0&&(x=0),g===void 0&&(g=0),this.type=h.ELLIPSE,this.x=a,this.y=v,this.width=x,this.height=g},contains:function(p,a){return S(this,p,a)},getPoint:function(p,a){return u(this,p,a)},getPoints:function(p,a,v){return l(this,p,a,v)},getRandomPoint:function(p){return r(this,p)},setTo:function(p,a,v,x){return this.x=p,this.y=a,this.width=v,this.height=x,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(p,a){return a===void 0&&(a=p),this.x=p,this.y=a,this},setSize:function(p,a){return a===void 0&&(a=p),this.width=p,this.height=a,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(p){this.x=p+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(p){this.x=p-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(p){this.y=p+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(p){this.y=p-this.height/2}}});m.exports=o},36146:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return i.x===d.x&&i.y===d.y&&i.width===d.width&&i.height===d.height};m.exports=E},23694:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87841),S=function(u,l){return l===void 0&&(l=new d),l.x=u.left,l.y=u.top,l.width=u.width,l.height=u.height,l};m.exports=S},90549:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(79522),S=i(62945),u=i(36383),l=i(2141),h=function(r,o,p){p===void 0&&(p=new l);var a=S(o,0,u.PI2);return d(r,a,p)};m.exports=h},48320:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(92990),S=i(79522),u=i(62945),l=i(36383),h=function(r,o,p,a){a===void 0&&(a=[]),!o&&p>0&&(o=d(r)/p);for(var v=0;v<o;v++){var x=u(v/o,0,l.PI2);a.push(S(r,x))}return a};m.exports=h},73424:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){return i.x+=d,i.y+=S,i};m.exports=E},44808:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return i.x+=d.x,i.y+=d.y,i};m.exports=E},24820:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),S=function(u,l){l===void 0&&(l=new d);var h=Math.random()*Math.PI*2,r=Math.sqrt(Math.random());return l.x=u.x+r*Math.cos(h)*u.width/2,l.y=u.y+r*Math.sin(h)*u.height/2,l};m.exports=S},49203:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(8497);d.Area=i(78874),d.Circumference=i(92990),d.CircumferencePoint=i(79522),d.Clone=i(58102),d.Contains=i(81154),d.ContainsPoint=i(46662),d.ContainsRect=i(1632),d.CopyFrom=i(65534),d.Equals=i(36146),d.GetBounds=i(23694),d.GetPoint=i(90549),d.GetPoints=i(48320),d.Offset=i(73424),d.OffsetPoint=i(44808),d.Random=i(24820),m.exports=d},55738:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(23777),S=i(79291),u={Circle:i(88911),Ellipse:i(49203),Intersects:i(91865),Line:i(2529),Mesh:i(73090),Point:i(43711),Polygon:i(58423),Rectangle:i(93232),Triangle:i(84435)};u=S(!1,u,d),m.exports=u},2044:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(20339),S=function(u,l){return d(u.x,u.y,l.x,l.y)<=u.radius+l.radius};m.exports=S},81491:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){var S=d.width/2,u=d.height/2,l=Math.abs(i.x-d.x-S),h=Math.abs(i.y-d.y-u),r=S+i.radius,o=u+i.radius;if(l>r||h>o)return!1;if(l<=S||h<=u)return!0;var p=l-S,a=h-u,v=p*p,x=a*a,g=i.radius*i.radius;return v+x<=g};m.exports=E},63376:(m,E,i)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),S=i(2044),u=function(l,h,r){if(r===void 0&&(r=[]),S(l,h)){var o=l.x,p=l.y,a=l.radius,v=h.x,x=h.y,g=h.radius,y,T,P,A,b;if(p===x)b=(g*g-a*a-v*v+o*o)/(2*(o-v)),y=1,T=-2*x,P=v*v+b*b-2*v*b+x*x-g*g,A=T*T-4*y*P,A===0?r.push(new d(b,-T/(2*y))):A>0&&(r.push(new d(b,(-T+Math.sqrt(A))/(2*y))),r.push(new d(b,(-T-Math.sqrt(A))/(2*y))));else{var O=(o-v)/(p-x),D=(g*g-a*a-v*v+o*o-x*x+p*p)/(2*(p-x));y=O*O+1,T=2*p*O-2*D*O-2*o,P=o*o+p*p+D*D-a*a-2*p*D,A=T*T-4*y*P,A===0?(b=-T/(2*y),r.push(new d(b,D-b*O))):A>0&&(b=(-T+Math.sqrt(A))/(2*y),r.push(new d(b,D-b*O)),b=(-T-Math.sqrt(A))/(2*y),r.push(new d(b,D-b*O)))}}return r};m.exports=u},97439:(m,E,i)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(4042),S=i(81491),u=function(l,h,r){if(r===void 0&&(r=[]),S(l,h)){var o=h.getLineA(),p=h.getLineB(),a=h.getLineC(),v=h.getLineD();d(o,l,r),d(p,l,r),d(a,l,r),d(v,l,r)}return r};m.exports=u},4042:(m,E,i)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),S=i(80462),u=function(l,h,r){if(r===void 0&&(r=[]),S(l,h)){var o=l.x1,p=l.y1,a=l.x2,v=l.y2,x=h.x,g=h.y,y=h.radius,T=a-o,P=v-p,A=o-x,b=p-g,O=T*T+P*P,D=2*(T*A+P*b),B=A*A+b*b-y*y,G=D*D-4*O*B,V,k;if(G===0){var U=-D/(2*O);V=o+U*T,k=p+U*P,U>=0&&U<=1&&r.push(new d(V,k))}else if(G>0){var W=(-D-Math.sqrt(G))/(2*O);V=o+W*T,k=p+W*P,W>=0&&W<=1&&r.push(new d(V,k));var X=(-D+Math.sqrt(G))/(2*O);V=o+X*T,k=p+X*P,X>=0&&X<=1&&r.push(new d(V,k))}}return r};m.exports=u},36100:(m,E,i)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25836),S=function(u,l,h,r){h===void 0&&(h=!1);var o=u.x1,p=u.y1,a=u.x2,v=u.y2,x=l.x1,g=l.y1,y=l.x2,T=l.y2,P=a-o,A=v-p,b=y-x,O=T-g,D=P*O-A*b;if(D===0)return null;var B,G,V;if(h){if(B=(P*(g-p)+A*(o-x))/(b*A-O*P),P!==0)G=(x+b*B-o)/P;else if(A!==0)G=(g+O*B-p)/A;else return null;if(G<0||B<0||B>1)return null;V=G}else{if(B=((x-o)*O-(g-p)*b)/D,G=((p-g)*P-(o-x)*A)/D,B<0||B>1||G<0||G>1)return null;V=B}return r===void 0&&(r=new d),r.set(o+P*V,p+A*V,V)};m.exports=S},3073:(m,E,i)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(36100),S=i(23031),u=i(25836),l=new S,h=new u,r=function(o,p,a,v){a===void 0&&(a=!1),v===void 0&&(v=new u);var x=!1;v.set(),h.set();for(var g=p[p.length-1],y=0;y<p.length;y++){var T=p[y];l.setTo(g.x,g.y,T.x,T.y),g=T,d(o,l,a,h)&&(!x||h.z<v.z)&&(v.copy(h),x=!0)}return x?v:null};m.exports=r},56362:(m,E,i)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25836),S=i(61369),u=i(3073),l=new d,h=function(r,o,p,a){a===void 0&&(a=new S),Array.isArray(o)||(o=[o]);var v=!1;a.set(),l.set();for(var x=0;x<o.length;x++)u(r,o[x].points,p,l)&&(!v||l.z<a.z)&&(a.set(l.x,l.y,l.z,x),v=!0);return v?a:null};m.exports=h},60646:(m,E,i)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),S=i(76112),u=i(92773),l=function(h,r,o){if(o===void 0&&(o=[]),u(h,r))for(var p=r.getLineA(),a=r.getLineB(),v=r.getLineC(),x=r.getLineD(),g=[new d,new d,new d,new d],y=[S(p,h,g[0]),S(a,h,g[1]),S(v,h,g[2]),S(x,h,g[3])],T=0;T<4;T++)y[T]&&o.push(g[T]);return o};m.exports=l},71147:(m,E,i)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(61369),S=i(56362),u=i(23031),l=new u;function h(p,a,v,x,g){var y=Math.cos(p),T=Math.sin(p);l.setTo(a,v,a+y,v+T);var P=S(l,x,!0);P&&g.push(new d(P.x,P.y,p,P.w))}function r(p,a){return p.z-a.z}var o=function(p,a,v){Array.isArray(v)||(v=[v]);for(var x=[],g=[],y=0;y<v.length;y++)for(var T=v[y].points,P=0;P<T.length;P++){var A=Math.atan2(T[P].y-a,T[P].x-p);g.indexOf(A)===-1&&(h(A,p,a,v,x),h(A-1e-5,p,a,v,x),h(A+1e-5,p,a,v,x),g.push(A))}return x.sort(r)};m.exports=o},68389:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87841),S=i(59996),u=function(l,h,r){return r===void 0&&(r=new d),S(l,h)&&(r.x=Math.max(l.x,h.x),r.y=Math.max(l.y,h.y),r.width=Math.min(l.right,h.right)-r.x,r.height=Math.min(l.bottom,h.bottom)-r.y),r};m.exports=u},52784:(m,E,i)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(60646),S=i(59996),u=function(l,h,r){if(r===void 0&&(r=[]),S(l,h)){var o=l.getLineA(),p=l.getLineB(),a=l.getLineC(),v=l.getLineD();d(o,h,r),d(p,h,r),d(a,h,r),d(v,h,r)}return r};m.exports=u},26341:(m,E,i)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(89265),S=i(60646),u=function(l,h,r){if(r===void 0&&(r=[]),d(l,h)){var o=h.getLineA(),p=h.getLineB(),a=h.getLineC();S(o,l,r),S(p,l,r),S(a,l,r)}return r};m.exports=u},38720:(m,E,i)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(4042),S=i(67636),u=function(l,h,r){if(r===void 0&&(r=[]),S(l,h)){var o=l.getLineA(),p=l.getLineB(),a=l.getLineC();d(o,h,r),d(p,h,r),d(a,h,r)}return r};m.exports=u},13882:(m,E,i)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),S=i(2822),u=i(76112),l=function(h,r,o){if(o===void 0&&(o=[]),S(h,r))for(var p=h.getLineA(),a=h.getLineB(),v=h.getLineC(),x=[new d,new d,new d],g=[u(p,r,x[0]),u(a,r,x[1]),u(v,r,x[2])],y=0;y<3;y++)g[y]&&o.push(x[y]);return o};m.exports=l},75636:(m,E,i)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(82944),S=i(13882),u=function(l,h,r){if(r===void 0&&(r=[]),d(l,h)){var o=h.getLineA(),p=h.getLineB(),a=h.getLineC();S(l,o,r),S(l,p,r),S(l,a,r)}return r};m.exports=u},80462:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87902),S=i(2141),u=new S,l=function(h,r,o){if(o===void 0&&(o=u),d(r,h.x1,h.y1))return o.x=h.x1,o.y=h.y1,!0;if(d(r,h.x2,h.y2))return o.x=h.x2,o.y=h.y2,!0;var p=h.x2-h.x1,a=h.y2-h.y1,v=r.x-h.x1,x=r.y-h.y1,g=p*p+a*a,y=p,T=a;if(g>0){var P=(v*p+x*a)/g;y*=P,T*=P}o.x=h.x1+y,o.y=h.y1+T;var A=y*y+T*T;return A<=g&&y*p+T*a>=0&&d(r,o.x,o.y)};m.exports=l},76112:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){var u=i.x1,l=i.y1,h=i.x2,r=i.y2,o=d.x1,p=d.y1,a=d.x2,v=d.y2;if(u===h&&l===r||o===a&&p===v)return!1;var x=(v-p)*(h-u)-(a-o)*(r-l);if(x===0)return!1;var g=((a-o)*(l-p)-(v-p)*(u-o))/x,y=((h-u)*(l-p)-(r-l)*(u-o))/x;return g<0||g>1||y<0||y>1?!1:(S&&(S.x=u+g*(h-u),S.y=l+g*(r-l)),!0)};m.exports=E},92773:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){var S=i.x1,u=i.y1,l=i.x2,h=i.y2,r=d.x,o=d.y,p=d.right,a=d.bottom,v=0;if(S>=r&&S<=p&&u>=o&&u<=a||l>=r&&l<=p&&h>=o&&h<=a)return!0;if(S<r&&l>=r){if(v=u+(h-u)*(r-S)/(l-S),v>o&&v<=a)return!0}else if(S>p&&l<=p&&(v=u+(h-u)*(p-S)/(l-S),v>=o&&v<=a))return!0;if(u<o&&h>=o){if(v=S+(l-S)*(o-u)/(h-u),v>=r&&v<=p)return!0}else if(u>a&&h<=a&&(v=S+(l-S)*(a-u)/(h-u),v>=r&&v<=p))return!0;return!1};m.exports=E},16204:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){S===void 0&&(S=1);var u=d.x1,l=d.y1,h=d.x2,r=d.y2,o=i.x,p=i.y,a=(h-u)*(h-u)+(r-l)*(r-l);if(a===0)return!1;var v=((o-u)*(h-u)+(p-l)*(r-l))/a;if(v<0)return Math.sqrt((u-o)*(u-o)+(l-p)*(l-p))<=S;if(v>=0&&v<=1){var x=((l-p)*(h-u)-(u-o)*(r-l))/a;return Math.abs(x)*Math.sqrt(a)<=S}else return Math.sqrt((h-o)*(h-o)+(r-p)*(r-p))<=S};m.exports=E},14199:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(16204),S=function(u,l){if(!d(u,l))return!1;var h=Math.min(l.x1,l.x2),r=Math.max(l.x1,l.x2),o=Math.min(l.y1,l.y2),p=Math.max(l.y1,l.y2);return u.x>=h&&u.x<=r&&u.y>=o&&u.y<=p};m.exports=S},59996:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return i.width<=0||i.height<=0||d.width<=0||d.height<=0?!1:!(i.right<d.x||i.bottom<d.y||i.x>d.right||i.y>d.bottom)};m.exports=E},89265:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(76112),S=i(37303),u=i(48653),l=i(77493),h=function(r,o){if(o.left>r.right||o.right<r.left||o.top>r.bottom||o.bottom<r.top)return!1;var p=o.getLineA(),a=o.getLineB(),v=o.getLineC();if(S(r,p.x1,p.y1)||S(r,p.x2,p.y2)||S(r,a.x1,a.y1)||S(r,a.x2,a.y2)||S(r,v.x1,v.y1)||S(r,v.x2,v.y2))return!0;var x=r.getLineA(),g=r.getLineB(),y=r.getLineC(),T=r.getLineD();if(d(p,x)||d(p,g)||d(p,y)||d(p,T)||d(a,x)||d(a,g)||d(a,y)||d(a,T)||d(v,x)||d(v,g)||d(v,y)||d(v,T))return!0;var P=l(r),A=u(o,P,!0);return A.length>0};m.exports=h},84411:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u,l,h){return h===void 0&&(h=0),!(d>i.right+h||S<i.left-h||u>i.bottom+h||l<i.top-h)};m.exports=E},67636:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(80462),S=i(10690),u=function(l,h){return l.left>h.right||l.right<h.left||l.top>h.bottom||l.bottom<h.top?!1:!!(S(l,h.x,h.y)||d(l.getLineA(),h)||d(l.getLineB(),h)||d(l.getLineC(),h))};m.exports=u},2822:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(76112),S=function(u,l){return!!(u.contains(l.x1,l.y1)||u.contains(l.x2,l.y2)||d(u.getLineA(),l)||d(u.getLineB(),l)||d(u.getLineC(),l))};m.exports=S},82944:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(48653),S=i(71694),u=i(76112),l=function(h,r){if(h.left>r.right||h.right<r.left||h.top>r.bottom||h.bottom<r.top)return!1;var o=h.getLineA(),p=h.getLineB(),a=h.getLineC(),v=r.getLineA(),x=r.getLineB(),g=r.getLineC();if(u(o,v)||u(o,x)||u(o,g)||u(p,v)||u(p,x)||u(p,g)||u(a,v)||u(a,x)||u(a,g))return!0;var y=S(h),T=d(r,y,!0);return T.length>0||(y=S(r),T=d(h,y,!0),T.length>0)};m.exports=l},91865:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={CircleToCircle:i(2044),CircleToRectangle:i(81491),GetCircleToCircle:i(63376),GetCircleToRectangle:i(97439),GetLineToCircle:i(4042),GetLineToLine:i(36100),GetLineToPoints:i(3073),GetLineToPolygon:i(56362),GetLineToRectangle:i(60646),GetRaysFromPointToPolygon:i(71147),GetRectangleIntersection:i(68389),GetRectangleToRectangle:i(52784),GetRectangleToTriangle:i(26341),GetTriangleToCircle:i(38720),GetTriangleToLine:i(13882),GetTriangleToTriangle:i(75636),LineToCircle:i(80462),LineToLine:i(76112),LineToRectangle:i(92773),PointToLine:i(16204),PointToLineSegment:i(14199),RectangleToRectangle:i(59996),RectangleToTriangle:i(89265),RectangleToValues:i(84411),TriangleToCircle:i(67636),TriangleToLine:i(2822),TriangleToTriangle:i(82944)}},91938:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return Math.atan2(i.y2-i.y1,i.x2-i.x1)};m.exports=E},84993:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){d===void 0&&(d=1),S===void 0&&(S=[]);var u=Math.round(i.x1),l=Math.round(i.y1),h=Math.round(i.x2),r=Math.round(i.y2),o=Math.abs(h-u),p=Math.abs(r-l),a=u<h?1:-1,v=l<r?1:-1,x=o-p;S.push({x:u,y:l});for(var g=1;!(u===h&&l===r);){var y=x<<1;y>-p&&(x-=p,u+=a),y<o&&(x+=o,l+=v),g%d===0&&S.push({x:u,y:l}),g++}return S};m.exports=E},36469:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){var u=d-(i.x1+i.x2)/2,l=S-(i.y1+i.y2)/2;return i.x1+=u,i.y1+=l,i.x2+=u,i.y2+=l,i};m.exports=E},31116:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(23031),S=function(u){return new d(u.x1,u.y1,u.x2,u.y2)};m.exports=S},59944:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return d.setTo(i.x1,i.y1,i.x2,i.y2)};m.exports=E},59220:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return i.x1===d.x1&&i.y1===d.y1&&i.x2===d.x2&&i.y2===d.y2};m.exports=E},78177:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(35001),S=function(u,l,h){h===void 0&&(h=l);var r=d(u),o=u.x2-u.x1,p=u.y2-u.y1;return l&&(u.x1=u.x1-o/r*l,u.y1=u.y1-p/r*l),h&&(u.x2=u.x2+o/r*h,u.y2=u.y2+p/r*h),u};m.exports=S},26708:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(52816),S=i(6113),u=i(2141),l=function(h,r,o,p,a){p===void 0&&(p=0),a===void 0&&(a=[]);var v=[],x=h.x1,g=h.y1,y=h.x2-x,T=h.y2-g,P=S(r,a),A,b,O=o-1;for(A=0;A<O;A++)b=P(A/O),v.push(new u(x+y*b,g+T*b));if(b=P(1),v.push(new u(x+y*b,g+T*b)),p>0){var D=v[0],B=[D];for(A=1;A<v.length-1;A++){var G=v[A];d(D,G)>=p&&(B.push(G),D=G)}var V=v[v.length-1];return d(D,V)<p&&B.pop(),B.push(V),B}else return v};m.exports=l},32125:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),S=function(u,l){return l===void 0&&(l=new d),l.x=(u.x1+u.x2)/2,l.y=(u.y1+u.y2)/2,l};m.exports=S},99569:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),S=function(u,l,h){h===void 0&&(h=new d);var r=u.x1,o=u.y1,p=u.x2,a=u.y2,v=(p-r)*(p-r)+(a-o)*(a-o);if(v===0)return h;var x=((l.x-r)*(p-r)+(l.y-o)*(a-o))/v;return h.x=r+x*(p-r),h.y=o+x*(a-o),h};m.exports=S},34638:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(36383),S=i(91938),u=i(2141),l=function(h,r){r===void 0&&(r=new u);var o=S(h)-d.TAU;return r.x=Math.cos(o),r.y=Math.sin(o),r};m.exports=l},13151:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),S=function(u,l,h){return h===void 0&&(h=new d),h.x=u.x1+(u.x2-u.x1)*l,h.y=u.y1+(u.y2-u.y1)*l,h};m.exports=S},15258:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(35001),S=i(2141),u=function(l,h,r,o){o===void 0&&(o=[]),!h&&r>0&&(h=d(l)/r);for(var p=l.x1,a=l.y1,v=l.x2,x=l.y2,g=0;g<h;g++){var y=g/h,T=p+(v-p)*y,P=a+(x-a)*y;o.push(new S(T,P))}return o};m.exports=u},26408:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){var S=i.x1,u=i.y1,l=i.x2,h=i.y2,r=(l-S)*(l-S)+(h-u)*(h-u);if(r===0)return!1;var o=((u-d.y)*(l-S)-(S-d.x)*(h-u))/r;return Math.abs(o)*Math.sqrt(r)};m.exports=E},98770:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return Math.abs(i.y1-i.y2)};m.exports=E},35001:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return Math.sqrt((i.x2-i.x1)*(i.x2-i.x1)+(i.y2-i.y1)*(i.y2-i.y1))};m.exports=E},23031:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(13151),u=i(15258),l=i(23777),h=i(65822),r=i(26099),o=new d({initialize:function(a,v,x,g){a===void 0&&(a=0),v===void 0&&(v=0),x===void 0&&(x=0),g===void 0&&(g=0),this.type=l.LINE,this.x1=a,this.y1=v,this.x2=x,this.y2=g},getPoint:function(p,a){return S(this,p,a)},getPoints:function(p,a,v){return u(this,p,a,v)},getRandomPoint:function(p){return h(this,p)},setTo:function(p,a,v,x){return p===void 0&&(p=0),a===void 0&&(a=0),v===void 0&&(v=0),x===void 0&&(x=0),this.x1=p,this.y1=a,this.x2=v,this.y2=x,this},setFromObjects:function(p,a){return this.x1=p.x,this.y1=p.y,this.x2=a.x,this.y2=a.y,this},getPointA:function(p){return p===void 0&&(p=new r),p.set(this.x1,this.y1),p},getPointB:function(p){return p===void 0&&(p=new r),p.set(this.x2,this.y2),p},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(p){this.x1<=this.x2?this.x1=p:this.x2=p}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(p){this.x1>this.x2?this.x1=p:this.x2=p}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(p){this.y1<=this.y2?this.y1=p:this.y2=p}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(p){this.y1>this.y2?this.y1=p:this.y2=p}}});m.exports=o},64795:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(36383),S=i(15994),u=i(91938),l=function(h){var r=u(h)-d.TAU;return S(r,-Math.PI,Math.PI)};m.exports=l},52616:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(36383),S=i(91938),u=function(l){return Math.cos(S(l)-d.TAU)};m.exports=u},87231:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(36383),S=i(91938),u=function(l){return Math.sin(S(l)-d.TAU)};m.exports=u},89662:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){return i.x1+=d,i.y1+=S,i.x2+=d,i.y2+=S,i};m.exports=E},71165:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return-((i.x2-i.x1)/(i.y2-i.y1))};m.exports=E},65822:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),S=function(u,l){l===void 0&&(l=new d);var h=Math.random();return l.x=u.x1+h*(u.x2-u.x1),l.y=u.y1+h*(u.y2-u.y1),l};m.exports=S},69777:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91938),S=i(64795),u=function(l,h){return 2*S(h)-Math.PI-d(l)};m.exports=u},39706:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(64400),S=function(u,l){var h=(u.x1+u.x2)/2,r=(u.y1+u.y2)/2;return d(u,h,r,l)};m.exports=S},82585:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(64400),S=function(u,l,h){return d(u,l.x,l.y,h)};m.exports=S},64400:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){var l=Math.cos(u),h=Math.sin(u),r=i.x1-d,o=i.y1-S;return i.x1=r*l-o*h+d,i.y1=r*h+o*l+S,r=i.x2-d,o=i.y2-S,i.x2=r*l-o*h+d,i.y2=r*h+o*l+S,i};m.exports=E},62377:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u,l){return i.x1=d,i.y1=S,i.x2=d+Math.cos(u)*l,i.y2=S+Math.sin(u)*l,i};m.exports=E},71366:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return(i.y2-i.y1)/(i.x2-i.x1)};m.exports=E},10809:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return Math.abs(i.x1-i.x2)};m.exports=E},2529:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(23031);d.Angle=i(91938),d.BresenhamPoints=i(84993),d.CenterOn=i(36469),d.Clone=i(31116),d.CopyFrom=i(59944),d.Equals=i(59220),d.Extend=i(78177),d.GetEasedPoints=i(26708),d.GetMidPoint=i(32125),d.GetNearestPoint=i(99569),d.GetNormal=i(34638),d.GetPoint=i(13151),d.GetPoints=i(15258),d.GetShortestDistance=i(26408),d.Height=i(98770),d.Length=i(35001),d.NormalAngle=i(64795),d.NormalX=i(52616),d.NormalY=i(87231),d.Offset=i(89662),d.PerpSlope=i(71165),d.Random=i(65822),d.ReflectAngle=i(69777),d.Rotate=i(39706),d.RotateAroundPoint=i(82585),d.RotateAroundXY=i(64400),d.SetToAngle=i(62377),d.Slope=i(71366),d.Width=i(10809),m.exports=d},83997:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(87841),u=i(26099);function l(r,o,p,a){var v=r-p,x=o-a,g=v*v+x*x;return Math.sqrt(g)}var h=new d({initialize:function(o,p,a){this.vertex1=o,this.vertex2=p,this.vertex3=a,this.bounds=new S,this._inCenter=new u},getInCenter:function(r){r===void 0&&(r=!0);var o=this.vertex1,p=this.vertex2,a=this.vertex3,v,x,g,y,T,P;r?(v=o.x,x=o.y,g=p.x,y=p.y,T=a.x,P=a.y):(v=o.vx,x=o.vy,g=p.vx,y=p.vy,T=a.vx,P=a.vy);var A=l(T,P,g,y),b=l(v,x,T,P),O=l(g,y,v,x),D=A+b+O;return this._inCenter.set((v*A+g*b+T*O)/D,(x*A+y*b+P*O)/D)},contains:function(r,o,p){var a=this.vertex1,v=this.vertex2,x=this.vertex3,g=a.vx,y=a.vy,T=v.vx,P=v.vy,A=x.vx,b=x.vy;if(p){var O=p.a,D=p.b,B=p.c,G=p.d,V=p.e,k=p.f;g=a.vx*O+a.vy*B+V,y=a.vx*D+a.vy*G+k,T=v.vx*O+v.vy*B+V,P=v.vx*D+v.vy*G+k,A=x.vx*O+x.vy*B+V,b=x.vx*D+x.vy*G+k}var U=A-g,W=b-y,X=T-g,_=P-y,Q=r-g,j=o-y,it=U*U+W*W,K=U*X+W*_,J=U*Q+W*j,Y=X*X+_*_,q=X*Q+_*j,$=it*Y-K*K,et=$===0?0:1/$,rt=(Y*J-K*q)*et,at=(it*q-K*J)*et;return rt>=0&&at>=0&&rt+at<1},isCounterClockwise:function(r){var o=this.vertex1,p=this.vertex2,a=this.vertex3,v=(p.vx-o.vx)*(a.vy-o.vy)-(p.vy-o.vy)*(a.vx-o.vx);return r<=0?v>=0:v<0},load:function(r,o,p,a,v){return p=this.vertex1.load(r,o,p,a,v),p=this.vertex2.load(r,o,p,a,v),p=this.vertex3.load(r,o,p,a,v),p},transformCoordinatesLocal:function(r,o,p,a){return this.vertex1.transformCoordinatesLocal(r,o,p,a),this.vertex2.transformCoordinatesLocal(r,o,p,a),this.vertex3.transformCoordinatesLocal(r,o,p,a),this},updateBounds:function(){var r=this.vertex1,o=this.vertex2,p=this.vertex3,a=this.bounds;return a.x=Math.min(r.vx,o.vx,p.vx),a.y=Math.min(r.vy,o.vy,p.vy),a.width=Math.max(r.vx,o.vx,p.vx)-a.x,a.height=Math.max(r.vy,o.vy,p.vy)-a.y,this},isInView:function(r,o,p,a,v,x,g,y,T,P,A){this.update(a,v,x,g,y,T,P,A);var b=this.vertex1,O=this.vertex2,D=this.vertex3;if(b.ta<=0&&O.ta<=0&&D.ta<=0||o&&!this.isCounterClockwise(p))return!1;var B=this.bounds;B.x=Math.min(b.tx,O.tx,D.tx),B.y=Math.min(b.ty,O.ty,D.ty),B.width=Math.max(b.tx,O.tx,D.tx)-B.x,B.height=Math.max(b.ty,O.ty,D.ty)-B.y;var G=r.x+r.width,V=r.y+r.height;return B.width<=0||B.height<=0||r.width<=0||r.height<=0?!1:!(B.right<r.x||B.bottom<r.y||B.x>G||B.y>V)},scrollUV:function(r,o){return this.vertex1.scrollUV(r,o),this.vertex2.scrollUV(r,o),this.vertex3.scrollUV(r,o),this},scaleUV:function(r,o){return this.vertex1.scaleUV(r,o),this.vertex2.scaleUV(r,o),this.vertex3.scaleUV(r,o),this},setColor:function(r){return this.vertex1.color=r,this.vertex2.color=r,this.vertex3.color=r,this},update:function(r,o,p,a,v,x,g,y){return this.vertex1.update(o,p,a,v,x,g,y,r),this.vertex2.update(o,p,a,v,x,g,y,r),this.vertex3.update(o,p,a,v,x,g,y,r),this},translate:function(r,o){o===void 0&&(o=0);var p=this.vertex1,a=this.vertex2,v=this.vertex3;return p.x+=r,p.y+=o,a.x+=r,a.y+=o,v.x+=r,v.y+=o,this},x:{get:function(){return this.getInCenter().x},set:function(r){var o=this.getInCenter();this.translate(r-o.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(r){var o=this.getInCenter();this.translate(0,r-o.y)}},alpha:{get:function(){var r=this.vertex1,o=this.vertex2,p=this.vertex3;return(r.alpha+o.alpha+p.alpha)/3},set:function(r){this.vertex1.alpha=r,this.vertex2.alpha=r,this.vertex3.alpha=r}},depth:{get:function(){var r=this.vertex1,o=this.vertex2,p=this.vertex3;return(r.vz+o.vz+p.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});m.exports=h},48803:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83997),S=i(95540),u=i(37867),l=i(25836),h=i(39318),r=new l,o=new l,p=new u,a=function(v){var x=S(v,"mesh"),g=S(v,"texture",null),y=S(v,"frame"),T=S(v,"width",1),P=S(v,"height",T),A=S(v,"widthSegments",1),b=S(v,"heightSegments",A),O=S(v,"x",0),D=S(v,"y",0),B=S(v,"z",0),G=S(v,"rotateX",0),V=S(v,"rotateY",0),k=S(v,"rotateZ",0),U=S(v,"zIsUp",!0),W=S(v,"isOrtho",x?x.dirtyCache[11]:!1),X=S(v,"colors",[16777215]),_=S(v,"alphas",[1]),Q=S(v,"tile",!1),j=S(v,"flipY",!1),it=S(v,"width",null),K={faces:[],verts:[]};r.set(O,D,B),o.set(G,V,k),p.fromRotationXYTranslation(o,r,U);var J;if(!g&&x)g=x.texture,y||(J=x.frame);else if(x&&typeof g=="string")g=x.scene.sys.textures.get(g);else if(!g)return K;J||(J=g.get(y)),!it&&W&&g&&x&&(T=J.width/x.height,P=J.height/x.height);var Y=T/2,q=P/2,$=Math.floor(A),et=Math.floor(b),rt=$+1,at=et+1,lt=T/$,vt=P/et,xt=[],ut=[],mt,Tt,bt=0,St=1,Gt=0,Nt=1;J&&(bt=J.u0,St=J.u1,j?(Gt=J.v1,Nt=J.v0):(Gt=J.v0,Nt=J.v1));var zt=St-bt,Lt=Nt-Gt;for(Tt=0;Tt<at;Tt++){var ct=Tt*vt-q;for(mt=0;mt<rt;mt++){var ot=mt*lt-Y;ut.push(ot,-ct);var Mt=bt+zt*(mt/$),Ot=Gt+Lt*(Tt/et);xt.push(Mt,Ot)}}Array.isArray(X)||(X=[X]),Array.isArray(_)||(_=[_]);var Ut=0,Rt=0;for(Tt=0;Tt<et;Tt++)for(mt=0;mt<$;mt++){var _t=(mt+rt*Tt)*2,Yt=(mt+rt*(Tt+1))*2,ee=(mt+1+rt*(Tt+1))*2,$t=(mt+1+rt*Tt)*2,kt=X[Rt],Vt=_[Ut],ne=new h(ut[_t],ut[_t+1],0,xt[_t],xt[_t+1],kt,Vt).transformMat4(p),le=new h(ut[Yt],ut[Yt+1],0,xt[Yt],xt[Yt+1],kt,Vt).transformMat4(p),te=new h(ut[$t],ut[$t+1],0,xt[$t],xt[$t+1],kt,Vt).transformMat4(p),xe=new h(ut[Yt],ut[Yt+1],0,xt[Yt],xt[Yt+1],kt,Vt).transformMat4(p),Ct=new h(ut[ee],ut[ee+1],0,xt[ee],xt[ee+1],kt,Vt).transformMat4(p),jt=new h(ut[$t],ut[$t+1],0,xt[$t],xt[$t+1],kt,Vt).transformMat4(p);Q&&(ne.setUVs(bt,Nt),le.setUVs(bt,Gt),te.setUVs(St,Nt),xe.setUVs(bt,Gt),Ct.setUVs(St,Gt),jt.setUVs(St,Nt)),Rt++,Rt===X.length&&(Rt=0),Ut++,Ut===_.length&&(Ut=0),K.verts.push(ne,le,te,xe,Ct,jt),K.faces.push(new d(ne,le,te),new d(xe,Ct,jt))}return x&&(x.faces=x.faces.concat(K.faces),x.vertices=x.vertices.concat(K.verts)),K};m.exports=a},34684:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83997),S=i(37867),u=i(25836),l=i(39318),h=new u,r=new u,o=new S,p=function(a,v,x,g,y,T,P,A,b,O){x===void 0&&(x=1),g===void 0&&(g=0),y===void 0&&(y=0),T===void 0&&(T=0),P===void 0&&(P=0),A===void 0&&(A=0),b===void 0&&(b=0),O===void 0&&(O=!0);var D={faces:[],verts:[]},B=a.materials;h.set(g,y,T),r.set(P,A,b),o.fromRotationXYTranslation(r,h,O);for(var G=0;G<a.models.length;G++)for(var V=a.models[G],k=V.vertices,U=V.textureCoords,W=V.faces,X=0;X<W.length;X++){var _=W[X],Q=_.vertices[0],j=_.vertices[1],it=_.vertices[2],K=k[Q.vertexIndex],J=k[j.vertexIndex],Y=k[it.vertexIndex],q=Q.textureCoordsIndex,$=j.textureCoordsIndex,et=it.textureCoordsIndex,rt=q===-1?{u:0,v:1}:U[q],at=$===-1?{u:0,v:0}:U[$],lt=et===-1?{u:1,v:1}:U[et],vt=16777215;_.material!==""&&B[_.material]&&(vt=B[_.material]);var xt=new l(K.x*x,K.y*x,K.z*x,rt.u,rt.v,vt).transformMat4(o),ut=new l(J.x*x,J.y*x,J.z*x,at.u,at.v,vt).transformMat4(o),mt=new l(Y.x*x,Y.y*x,Y.z*x,lt.u,lt.v,vt).transformMat4(o);D.verts.push(xt,ut,mt),D.faces.push(new d(xt,ut,mt))}return v&&(v.faces=v.faces.concat(D.faces),v.vertices=v.vertices.concat(D.verts)),D};m.exports=p},92515:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83997),S=i(39318),u=function(l,h,r,o,p,a,v,x){if(o===void 0&&(o=!1),a===void 0&&(a=16777215),v===void 0&&(v=1),x===void 0&&(x=!1),l.length!==h.length&&!o){console.warn("GenerateVerts: vertices and uvs count not equal");return}var g={faces:[],vertices:[]},y,T,P,A,b,O,D,B,G,V,k,U=o?3:2,W=Array.isArray(a),X=Array.isArray(v);if(Array.isArray(r)&&r.length>0)for(y=0;y<r.length;y++){var _=r[y],Q=r[y]*2,j=r[y]*U;T=l[j],P=l[j+1],A=o?l[j+2]:0,b=h[Q],O=h[Q+1],x&&(O=1-O),D=W?a[_]:a,B=X?v[_]:v,G=0,V=0,k=0,p&&(G=p[j],V=p[j+1],k=o?p[j+2]:0),g.vertices.push(new S(T,P,A,b,O,D,B,G,V,k))}else{var it=0,K=0;for(y=0;y<l.length;y+=U)T=l[y],P=l[y+1],A=o?l[y+2]:0,b=h[it],O=h[it+1],D=W?a[K]:a,B=X?v[K]:v,G=0,V=0,k=0,p&&(G=p[y],V=p[y+1],k=o?p[y+2]:0),g.vertices.push(new S(T,P,A,b,O,D,B,G,V,k)),it+=2,K++}for(y=0;y<g.vertices.length;y+=3){var J=g.vertices[y],Y=g.vertices[y+1],q=g.vertices[y+2];g.faces.push(new d(J,Y,q))}return g};m.exports=u},85048:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=!0,i="untitled",d="",S="";function u(T){var P=T.indexOf("#");return P>-1?T.substring(0,P):T}function l(T){return T.models.length===0&&T.models.push({faces:[],name:i,textureCoords:[],vertexNormals:[],vertices:[]}),d="",T.models[T.models.length-1]}function h(T,P){var A=T.length>=2?T[1]:i;P.models.push({faces:[],name:A,textureCoords:[],vertexNormals:[],vertices:[]}),d=""}function r(T){T.length===2&&(d=T[1])}function o(T,P){var A=T.length,b=A>=2?parseFloat(T[1]):0,O=A>=3?parseFloat(T[2]):0,D=A>=4?parseFloat(T[3]):0;l(P).vertices.push({x:b,y:O,z:D})}function p(T,P){var A=T.length,b=A>=2?parseFloat(T[1]):0,O=A>=3?parseFloat(T[2]):0,D=A>=4?parseFloat(T[3]):0;isNaN(b)&&(b=0),isNaN(O)&&(O=0),isNaN(D)&&(D=0),E&&(O=1-O),l(P).textureCoords.push({u:b,v:O,w:D})}function a(T,P){var A=T.length,b=A>=2?parseFloat(T[1]):0,O=A>=3?parseFloat(T[2]):0,D=A>=4?parseFloat(T[3]):0;l(P).vertexNormals.push({x:b,y:O,z:D})}function v(T,P){var A=T.length-1;if(!(A<3)){for(var b={group:d,material:S,vertices:[]},O=0;O<A;O++){var D=T[O+1],B=D.split("/"),G=B.length;if(!(G<1||G>3)){var V=0,k=0,U=0;V=parseInt(B[0],10),G>1&&B[1]!==""&&(k=parseInt(B[1],10)),G>2&&(U=parseInt(B[2],10)),V!==0&&(V<0&&(V=l(P).vertices.length+1+V),k-=1,V-=1,U-=1,b.vertices.push({textureCoordsIndex:k,vertexIndex:V,vertexNormalIndex:U}))}}l(P).faces.push(b)}}function x(T,P){T.length>=2&&P.materialLibraries.push(T[1])}function g(T){T.length>=2&&(S=T[1])}var y=function(T,P){P===void 0&&(P=!0),E=P;var A={materials:{},materialLibraries:[],models:[]};d="",S="";for(var b=T.split(`
`),O=0;O<b.length;O++){var D=u(b[O]),B=D.replace(/\s\s+/g," ").trim().split(" ");switch(B[0].toLowerCase()){case"o":h(B,A);break;case"g":r(B);break;case"v":o(B,A);break;case"vt":p(B,A);break;case"vn":a(B,A);break;case"f":v(B,A);break;case"mtllib":x(B,A);break;case"usemtl":g(B);break}}return A};m.exports=y},61485:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(37589),S=function(u){for(var l={},h=u.split(`
`),r="",o=0;o<h.length;o++){var p=h[o].trim();if(!(p.indexOf("#")===0||p==="")){var a=p.replace(/\s\s+/g," ").trim().split(" ");switch(a[0].toLowerCase()){case"newmtl":{r=a[1];break}case"kd":{var v=Math.floor(a[1]*255),x=a.length>=2?Math.floor(a[2]*255):v,g=a.length>=3?Math.floor(a[3]*255):v;l[r]=d(v,x,g);break}}}}return l};m.exports=S},92570:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){var l,h;if(S===void 0&&u===void 0){var r=i.getInCenter();l=r.x,h=r.y}var o=Math.cos(d),p=Math.sin(d),a=i.vertex1,v=i.vertex2,x=i.vertex3,g=a.x-l,y=a.y-h;a.set(g*o-y*p+l,g*p+y*o+h),g=v.x-l,y=v.y-h,v.set(g*o-y*p+l,g*p+y*o+h),g=x.x-l,y=x.y-h,x.set(g*o-y*p+l,g*p+y*o+h)};m.exports=E},39318:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(70554),u=i(25836),l=new d({Extends:u,initialize:function(r,o,p,a,v,x,g,y,T,P){x===void 0&&(x=16777215),g===void 0&&(g=1),y===void 0&&(y=0),T===void 0&&(T=0),P===void 0&&(P=0),u.call(this,r,o,p),this.vx=0,this.vy=0,this.vz=0,this.nx=y,this.ny=T,this.nz=P,this.u=a,this.v=v,this.color=x,this.alpha=g,this.tx=0,this.ty=0,this.ta=0,this.tu=a,this.tv=v},setUVs:function(h,r){return this.u=h,this.v=r,this.tu=h,this.tv=r,this},scrollUV:function(h,r){return this.tu+=h,this.tv+=r,this},scaleUV:function(h,r){return this.tu=this.u*h,this.tv=this.v*r,this},transformCoordinatesLocal:function(h,r,o,p){var a=this.x,v=this.y,x=this.z,g=h.val,y=a*g[0]+v*g[4]+x*g[8]+g[12],T=a*g[1]+v*g[5]+x*g[9]+g[13],P=a*g[2]+v*g[6]+x*g[10]+g[14],A=a*g[3]+v*g[7]+x*g[11]+g[15];this.vx=y/A*r,this.vy=-(T/A)*o,p<=0?this.vz=P/A:this.vz=-(P/A)},resize:function(h,r,o,p,a,v){return this.x=h,this.y=r,this.vx=this.x*o,this.vy=-this.y*p,this.vz=0,a<.5?this.vx+=o*(.5-a):a>.5&&(this.vx-=o*(a-.5)),v<.5?this.vy+=p*(.5-v):v>.5&&(this.vy-=p*(v-.5)),this},update:function(h,r,o,p,a,v,x,g){var y=this.vx*h+this.vy*o+a,T=this.vx*r+this.vy*p+v;return x&&(y=Math.round(y),T=Math.round(T)),this.tx=y,this.ty=T,this.ta=this.alpha*g,this},load:function(h,r,o,p,a){return h[++o]=this.tx,h[++o]=this.ty,h[++o]=this.tu,h[++o]=this.tv,h[++o]=p,h[++o]=a,r[++o]=S.getTintAppendFloatAlpha(this.color,this.ta),o}});m.exports=l},73090:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={Face:i(83997),GenerateGridVerts:i(48803),GenerateObjVerts:i(34684),GenerateVerts:i(92515),ParseObj:i(85048),ParseObjMaterial:i(61485),RotateFace:i(92570),Vertex:i(39318)};m.exports=d},96550:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i.setTo(Math.ceil(i.x),Math.ceil(i.y))};m.exports=E},99706:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),S=function(u){return new d(u.x,u.y)};m.exports=S},68010:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return d.setTo(i.x,i.y)};m.exports=E},27814:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return i.x===d.x&&i.y===d.y};m.exports=E},73565:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i.setTo(Math.floor(i.x),Math.floor(i.y))};m.exports=E},87555:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),S=function(u,l){if(l===void 0&&(l=new d),!Array.isArray(u))throw new Error("GetCentroid points argument must be an array");var h=u.length;if(h<1)throw new Error("GetCentroid points array must not be empty");if(h===1)l.x=u[0].x,l.y=u[0].y;else{for(var r=0;r<h;r++)l.x+=u[r].x,l.y+=u[r].y;l.x/=h,l.y/=h}return l};m.exports=S},28793:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return Math.sqrt(i.x*i.x+i.y*i.y)};m.exports=E},44405:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i.x*i.x+i.y*i.y};m.exports=E},20873:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87841),S=function(u,l){l===void 0&&(l=new d);for(var h=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,p=Number.POSITIVE_INFINITY,a=0;a<u.length;a++){var v=u[a];v.x>h&&(h=v.x),v.x<r&&(r=v.x),v.y>o&&(o=v.y),v.y<p&&(p=v.y)}return l.x=r,l.y=p,l.width=h-r,l.height=o-p,l};m.exports=S},26152:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),S=function(u,l,h,r){return h===void 0&&(h=0),r===void 0&&(r=new d),r.x=u.x+(l.x-u.x)*h,r.y=u.y+(l.y-u.y)*h,r};m.exports=S},55767:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i.setTo(i.y,i.x)};m.exports=E},79432:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),S=function(u,l){return l===void 0&&(l=new d),l.setTo(-u.x,-u.y)};m.exports=S},2141:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(23777),u=new d({initialize:function(h,r){h===void 0&&(h=0),r===void 0&&(r=h),this.type=S.POINT,this.x=h,this.y=r},setTo:function(l,h){return l===void 0&&(l=0),h===void 0&&(h=l),this.x=l,this.y=h,this}});m.exports=u},72930:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),S=i(44405),u=function(l,h,r){r===void 0&&(r=new d);var o=l.x*h.x+l.y*h.y,p=o/S(h);return p!==0&&(r.x=p*h.x,r.y=p*h.y),r};m.exports=u},62880:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),S=function(u,l,h){h===void 0&&(h=new d);var r=u.x*l.x+u.y*l.y;return r!==0&&(h.x=r*l.x,h.y=r*l.y),h};m.exports=S},15093:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(28793),S=function(u,l){if(u.x!==0||u.y!==0){var h=d(u);u.x/=h,u.y/=h}return u.x*=l,u.y*=l,u};m.exports=S},43711:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141);d.Ceil=i(96550),d.Clone=i(99706),d.CopyFrom=i(68010),d.Equals=i(27814),d.Floor=i(73565),d.GetCentroid=i(87555),d.GetMagnitude=i(28793),d.GetMagnitudeSq=i(44405),d.GetRectangleFromPoints=i(20873),d.Interpolate=i(26152),d.Invert=i(55767),d.Negative=i(79432),d.Project=i(72930),d.ProjectUnit=i(62880),d.SetMagnitude=i(15093),m.exports=d},12306:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25717),S=function(u){return new d(u.points)};m.exports=S},63814:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){for(var u=!1,l=-1,h=i.points.length-1;++l<i.points.length;h=l){var r=i.points[l].x,o=i.points[l].y,p=i.points[h].x,a=i.points[h].y;(o<=S&&S<a||a<=S&&S<o)&&d<(p-r)*(S-o)/(a-o)+r&&(u=!u)}return u};m.exports=E},99338:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(63814),S=function(u,l){return d(u,l.x,l.y)};m.exports=S},94811:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function E(K,J,Y){Y=Y||2;var q=J&&J.length,$=q?J[0]*Y:K.length,et=i(K,0,$,Y,!0),rt=[];if(!et||et.next===et.prev)return rt;var at,lt,vt,xt,ut,mt,Tt;if(q&&(et=o(K,J,et,Y)),K.length>80*Y){at=vt=K[0],lt=xt=K[1];for(var bt=Y;bt<$;bt+=Y)ut=K[bt],mt=K[bt+1],ut<at&&(at=ut),mt<lt&&(lt=mt),ut>vt&&(vt=ut),mt>xt&&(xt=mt);Tt=Math.max(vt-at,xt-lt),Tt=Tt!==0?32767/Tt:0}return S(et,rt,Y,at,lt,Tt,0),rt}function i(K,J,Y,q,$){var et,rt;if($===it(K,J,Y,q)>0)for(et=J;et<Y;et+=q)rt=_(et,K[et],K[et+1],rt);else for(et=Y-q;et>=J;et-=q)rt=_(et,K[et],K[et+1],rt);return rt&&D(rt,rt.next)&&(Q(rt),rt=rt.next),rt}function d(K,J){if(!K)return K;J||(J=K);var Y=K,q;do if(q=!1,!Y.steiner&&(D(Y,Y.next)||O(Y.prev,Y,Y.next)===0)){if(Q(Y),Y=J=Y.prev,Y===Y.next)break;q=!0}else Y=Y.next;while(q||Y!==J);return J}function S(K,J,Y,q,$,et,rt){if(K){!rt&&et&&g(K,q,$,et);for(var at=K,lt,vt;K.prev!==K.next;){if(lt=K.prev,vt=K.next,et?l(K,q,$,et):u(K)){J.push(lt.i/Y|0),J.push(K.i/Y|0),J.push(vt.i/Y|0),Q(K),K=vt.next,at=vt.next;continue}if(K=vt,K===at){rt?rt===1?(K=h(d(K),J,Y),S(K,J,Y,q,$,et,2)):rt===2&&r(K,J,Y,q,$,et):S(d(K),J,Y,q,$,et,1);break}}}}function u(K){var J=K.prev,Y=K,q=K.next;if(O(J,Y,q)>=0)return!1;for(var $=J.x,et=Y.x,rt=q.x,at=J.y,lt=Y.y,vt=q.y,xt=$<et?$<rt?$:rt:et<rt?et:rt,ut=at<lt?at<vt?at:vt:lt<vt?lt:vt,mt=$>et?$>rt?$:rt:et>rt?et:rt,Tt=at>lt?at>vt?at:vt:lt>vt?lt:vt,bt=q.next;bt!==J;){if(bt.x>=xt&&bt.x<=mt&&bt.y>=ut&&bt.y<=Tt&&A($,at,et,lt,rt,vt,bt.x,bt.y)&&O(bt.prev,bt,bt.next)>=0)return!1;bt=bt.next}return!0}function l(K,J,Y,q){var $=K.prev,et=K,rt=K.next;if(O($,et,rt)>=0)return!1;for(var at=$.x,lt=et.x,vt=rt.x,xt=$.y,ut=et.y,mt=rt.y,Tt=at<lt?at<vt?at:vt:lt<vt?lt:vt,bt=xt<ut?xt<mt?xt:mt:ut<mt?ut:mt,St=at>lt?at>vt?at:vt:lt>vt?lt:vt,Gt=xt>ut?xt>mt?xt:mt:ut>mt?ut:mt,Nt=T(Tt,bt,J,Y,q),zt=T(St,Gt,J,Y,q),Lt=K.prevZ,ct=K.nextZ;Lt&&Lt.z>=Nt&&ct&&ct.z<=zt;){if(Lt.x>=Tt&&Lt.x<=St&&Lt.y>=bt&&Lt.y<=Gt&&Lt!==$&&Lt!==rt&&A(at,xt,lt,ut,vt,mt,Lt.x,Lt.y)&&O(Lt.prev,Lt,Lt.next)>=0||(Lt=Lt.prevZ,ct.x>=Tt&&ct.x<=St&&ct.y>=bt&&ct.y<=Gt&&ct!==$&&ct!==rt&&A(at,xt,lt,ut,vt,mt,ct.x,ct.y)&&O(ct.prev,ct,ct.next)>=0))return!1;ct=ct.nextZ}for(;Lt&&Lt.z>=Nt;){if(Lt.x>=Tt&&Lt.x<=St&&Lt.y>=bt&&Lt.y<=Gt&&Lt!==$&&Lt!==rt&&A(at,xt,lt,ut,vt,mt,Lt.x,Lt.y)&&O(Lt.prev,Lt,Lt.next)>=0)return!1;Lt=Lt.prevZ}for(;ct&&ct.z<=zt;){if(ct.x>=Tt&&ct.x<=St&&ct.y>=bt&&ct.y<=Gt&&ct!==$&&ct!==rt&&A(at,xt,lt,ut,vt,mt,ct.x,ct.y)&&O(ct.prev,ct,ct.next)>=0)return!1;ct=ct.nextZ}return!0}function h(K,J,Y){var q=K;do{var $=q.prev,et=q.next.next;!D($,et)&&B($,q,q.next,et)&&U($,et)&&U(et,$)&&(J.push($.i/Y|0),J.push(q.i/Y|0),J.push(et.i/Y|0),Q(q),Q(q.next),q=K=et),q=q.next}while(q!==K);return d(q)}function r(K,J,Y,q,$,et){var rt=K;do{for(var at=rt.next.next;at!==rt.prev;){if(rt.i!==at.i&&b(rt,at)){var lt=X(rt,at);rt=d(rt,rt.next),lt=d(lt,lt.next),S(rt,J,Y,q,$,et,0),S(lt,J,Y,q,$,et,0);return}at=at.next}rt=rt.next}while(rt!==K)}function o(K,J,Y,q){var $=[],et,rt,at,lt,vt;for(et=0,rt=J.length;et<rt;et++)at=J[et]*q,lt=et<rt-1?J[et+1]*q:K.length,vt=i(K,at,lt,q,!1),vt===vt.next&&(vt.steiner=!0),$.push(P(vt));for($.sort(p),et=0;et<$.length;et++)Y=a($[et],Y);return Y}function p(K,J){return K.x-J.x}function a(K,J){var Y=v(K,J);if(!Y)return J;var q=X(Y,K);return d(q,q.next),d(Y,Y.next)}function v(K,J){var Y=J,q=K.x,$=K.y,et=-1/0,rt;do{if($<=Y.y&&$>=Y.next.y&&Y.next.y!==Y.y){var at=Y.x+($-Y.y)*(Y.next.x-Y.x)/(Y.next.y-Y.y);if(at<=q&&at>et&&(et=at,rt=Y.x<Y.next.x?Y:Y.next,at===q))return rt}Y=Y.next}while(Y!==J);if(!rt)return null;var lt=rt,vt=rt.x,xt=rt.y,ut=1/0,mt;Y=rt;do q>=Y.x&&Y.x>=vt&&q!==Y.x&&A($<xt?q:et,$,vt,xt,$<xt?et:q,$,Y.x,Y.y)&&(mt=Math.abs($-Y.y)/(q-Y.x),U(Y,K)&&(mt<ut||mt===ut&&(Y.x>rt.x||Y.x===rt.x&&x(rt,Y)))&&(rt=Y,ut=mt)),Y=Y.next;while(Y!==lt);return rt}function x(K,J){return O(K.prev,K,J.prev)<0&&O(J.next,K,K.next)<0}function g(K,J,Y,q){var $=K;do $.z===0&&($.z=T($.x,$.y,J,Y,q)),$.prevZ=$.prev,$.nextZ=$.next,$=$.next;while($!==K);$.prevZ.nextZ=null,$.prevZ=null,y($)}function y(K){var J,Y,q,$,et,rt,at,lt,vt=1;do{for(Y=K,K=null,et=null,rt=0;Y;){for(rt++,q=Y,at=0,J=0;J<vt&&(at++,q=q.nextZ,!!q);J++);for(lt=vt;at>0||lt>0&&q;)at!==0&&(lt===0||!q||Y.z<=q.z)?($=Y,Y=Y.nextZ,at--):($=q,q=q.nextZ,lt--),et?et.nextZ=$:K=$,$.prevZ=et,et=$;Y=q}et.nextZ=null,vt*=2}while(rt>1);return K}function T(K,J,Y,q,$){return K=(K-Y)*$|0,J=(J-q)*$|0,K=(K|K<<8)&16711935,K=(K|K<<4)&252645135,K=(K|K<<2)&858993459,K=(K|K<<1)&1431655765,J=(J|J<<8)&16711935,J=(J|J<<4)&252645135,J=(J|J<<2)&858993459,J=(J|J<<1)&1431655765,K|J<<1}function P(K){var J=K,Y=K;do(J.x<Y.x||J.x===Y.x&&J.y<Y.y)&&(Y=J),J=J.next;while(J!==K);return Y}function A(K,J,Y,q,$,et,rt,at){return($-rt)*(J-at)>=(K-rt)*(et-at)&&(K-rt)*(q-at)>=(Y-rt)*(J-at)&&(Y-rt)*(et-at)>=($-rt)*(q-at)}function b(K,J){return K.next.i!==J.i&&K.prev.i!==J.i&&!k(K,J)&&(U(K,J)&&U(J,K)&&W(K,J)&&(O(K.prev,K,J.prev)||O(K,J.prev,J))||D(K,J)&&O(K.prev,K,K.next)>0&&O(J.prev,J,J.next)>0)}function O(K,J,Y){return(J.y-K.y)*(Y.x-J.x)-(J.x-K.x)*(Y.y-J.y)}function D(K,J){return K.x===J.x&&K.y===J.y}function B(K,J,Y,q){var $=V(O(K,J,Y)),et=V(O(K,J,q)),rt=V(O(Y,q,K)),at=V(O(Y,q,J));return!!($!==et&&rt!==at||$===0&&G(K,Y,J)||et===0&&G(K,q,J)||rt===0&&G(Y,K,q)||at===0&&G(Y,J,q))}function G(K,J,Y){return J.x<=Math.max(K.x,Y.x)&&J.x>=Math.min(K.x,Y.x)&&J.y<=Math.max(K.y,Y.y)&&J.y>=Math.min(K.y,Y.y)}function V(K){return K>0?1:K<0?-1:0}function k(K,J){var Y=K;do{if(Y.i!==K.i&&Y.next.i!==K.i&&Y.i!==J.i&&Y.next.i!==J.i&&B(Y,Y.next,K,J))return!0;Y=Y.next}while(Y!==K);return!1}function U(K,J){return O(K.prev,K,K.next)<0?O(K,J,K.next)>=0&&O(K,K.prev,J)>=0:O(K,J,K.prev)<0||O(K,K.next,J)<0}function W(K,J){var Y=K,q=!1,$=(K.x+J.x)/2,et=(K.y+J.y)/2;do Y.y>et!=Y.next.y>et&&Y.next.y!==Y.y&&$<(Y.next.x-Y.x)*(et-Y.y)/(Y.next.y-Y.y)+Y.x&&(q=!q),Y=Y.next;while(Y!==K);return q}function X(K,J){var Y=new j(K.i,K.x,K.y),q=new j(J.i,J.x,J.y),$=K.next,et=J.prev;return K.next=J,J.prev=K,Y.next=$,$.prev=Y,q.next=Y,Y.prev=q,et.next=q,q.prev=et,q}function _(K,J,Y,q){var $=new j(K,J,Y);return q?($.next=q.next,$.prev=q,q.next.prev=$,q.next=$):($.prev=$,$.next=$),$}function Q(K){K.next.prev=K.prev,K.prev.next=K.next,K.prevZ&&(K.prevZ.nextZ=K.nextZ),K.nextZ&&(K.nextZ.prevZ=K.prevZ)}function j(K,J,Y){this.i=K,this.x=J,this.y=Y,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}E.deviation=function(K,J,Y,q){var $=J&&J.length,et=$?J[0]*Y:K.length,rt=Math.abs(it(K,0,et,Y));if($)for(var at=0,lt=J.length;at<lt;at++){var vt=J[at]*Y,xt=at<lt-1?J[at+1]*Y:K.length;rt-=Math.abs(it(K,vt,xt,Y))}var ut=0;for(at=0;at<q.length;at+=3){var mt=q[at]*Y,Tt=q[at+1]*Y,bt=q[at+2]*Y;ut+=Math.abs((K[mt]-K[bt])*(K[Tt+1]-K[mt+1])-(K[mt]-K[Tt])*(K[bt+1]-K[mt+1]))}return rt===0&&ut===0?0:Math.abs((ut-rt)/rt)};function it(K,J,Y,q){for(var $=0,et=J,rt=Y-q;et<Y;et+=q)$+=(K[rt]-K[et])*(K[et+1]+K[rt+1]),rt=et;return $}E.flatten=function(K){for(var J=K[0][0].length,Y={vertices:[],holes:[],dimensions:J},q=0,$=0;$<K.length;$++){for(var et=0;et<K[$].length;et++)for(var rt=0;rt<J;rt++)Y.vertices.push(K[$][et][rt]);$>0&&(q+=K[$-1].length,Y.holes.push(q))}return Y},m.exports=E},13829:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87841),S=function(u,l){l===void 0&&(l=new d);for(var h=1/0,r=1/0,o=-h,p=-r,a,v=0;v<u.points.length;v++)a=u.points[v],h=Math.min(h,a.x),r=Math.min(r,a.y),o=Math.max(o,a.x),p=Math.max(p,a.y);return l.x=h,l.y=r,l.width=o-h,l.height=p-r,l};m.exports=S},26173:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){d===void 0&&(d=[]);for(var S=0;S<i.points.length;S++)d.push(i.points[S].x),d.push(i.points[S].y);return d};m.exports=E},9564:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(35001),S=i(23031),u=i(30052),l=function(h,r,o,p){p===void 0&&(p=[]);var a=h.points,v=u(h);!r&&o>0&&(r=v/o);for(var x=0;x<r;x++)for(var g=v*(x/r),y=0,T=0;T<a.length;T++){var P=a[T],A=a[(T+1)%a.length],b=new S(P.x,P.y,A.x,A.y),O=d(b);if(g<y||g>y+O){y+=O;continue}var D=b.getPoint((g-y)/O);p.push(D);break}return p};m.exports=l},30052:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(35001),S=i(23031),u=function(l){for(var h=l.points,r=0,o=0;o<h.length;o++){var p=h[o],a=h[(o+1)%h.length],v=new S(p.x,p.y,a.x,a.y);r+=d(v)}return r};m.exports=u},25717:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(63814),u=i(9564),l=i(23777),h=new d({initialize:function(o){this.type=l.POLYGON,this.area=0,this.points=[],o&&this.setTo(o)},contains:function(r,o){return S(this,r,o)},setTo:function(r){if(this.area=0,this.points=[],typeof r=="string"&&(r=r.split(" ")),!Array.isArray(r))return this;for(var o,p=0;p<r.length;p++)o={x:0,y:0},typeof r[p]=="number"||typeof r[p]=="string"?(o.x=parseFloat(r[p]),o.y=parseFloat(r[p+1]),p++):Array.isArray(r[p])?(o.x=r[p][0],o.y=r[p][1]):(o.x=r[p].x,o.y=r[p].y),this.points.push(o);return this.calculateArea(),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var r=0,o,p,a=0;a<this.points.length-1;a++)o=this.points[a],p=this.points[a+1],r+=(p.x-o.x)*(o.y+p.y);return o=this.points[0],p=this.points[this.points.length-1],r+=(o.x-p.x)*(p.y+o.y),this.area=-r*.5,this.area},getPoints:function(r,o,p){return u(this,r,o,p)}});m.exports=h},8133:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i.points.reverse(),i};m.exports=E},29524:m=>{function E(h,r){var o=h.x-r.x,p=h.y-r.y;return o*o+p*p}function i(h,r,o){var p=r.x,a=r.y,v=o.x-p,x=o.y-a;if(v!==0||x!==0){var g=((h.x-p)*v+(h.y-a)*x)/(v*v+x*x);g>1?(p=o.x,a=o.y):g>0&&(p+=v*g,a+=x*g)}return v=h.x-p,x=h.y-a,v*v+x*x}function d(h,r){for(var o=h[0],p=[o],a,v=1,x=h.length;v<x;v++)a=h[v],E(a,o)>r&&(p.push(a),o=a);return o!==a&&p.push(a),p}function S(h,r,o,p,a){for(var v=p,x,g=r+1;g<o;g++){var y=i(h[g],h[r],h[o]);y>v&&(x=g,v=y)}v>p&&(x-r>1&&S(h,r,x,p,a),a.push(h[x]),o-x>1&&S(h,x,o,p,a))}function u(h,r){var o=h.length-1,p=[h[0]];return S(h,0,o,r,p),p.push(h[o]),p}var l=function(h,r,o){r===void 0&&(r=1),o===void 0&&(o=!1);var p=h.points;if(p.length>2){var a=r*r;o||(p=d(p,a)),h.setTo(u(p,a))}return h};m.exports=l},5469:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(d,S){return d[0]=S[0],d[1]=S[1],d},i=function(d){var S,u=[],l=d.points;for(S=0;S<l.length;S++)u.push([l[S].x,l[S].y]);var h=[];for(u.length>0&&h.push(E([0,0],u[0])),S=0;S<u.length-1;S++){var r=u[S],o=u[S+1],p=r[0],a=r[1],v=o[0],x=o[1];h.push([.85*p+.15*v,.85*a+.15*x]),h.push([.15*p+.85*v,.15*a+.85*x])}return u.length>1&&h.push(E([0,0],u[u.length-1])),d.setTo(h)};m.exports=i},24709:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){for(var u=i.points,l=0;l<u.length;l++)u[l].x+=d,u[l].y+=S;return i};m.exports=E},58423:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25717);d.Clone=i(12306),d.Contains=i(63814),d.ContainsPoint=i(99338),d.Earcut=i(94811),d.GetAABB=i(13829),d.GetNumberArray=i(26173),d.GetPoints=i(9564),d.Perimeter=i(30052),d.Reverse=i(8133),d.Simplify=i(29524),d.Smooth=i(5469),d.Translate=i(24709),m.exports=d},62224:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i.width*i.height};m.exports=E},98615:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i.x=Math.ceil(i.x),i.y=Math.ceil(i.y),i};m.exports=E},31688:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i.x=Math.ceil(i.x),i.y=Math.ceil(i.y),i.width=Math.ceil(i.width),i.height=Math.ceil(i.height),i};m.exports=E},67502:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){return i.x=d-i.width/2,i.y=S-i.height/2,i};m.exports=E},65085:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87841),S=function(u){return new d(u.x,u.y,u.width,u.height)};m.exports=S},37303:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){return i.width<=0||i.height<=0?!1:i.x<=d&&i.x+i.width>=d&&i.y<=S&&i.y+i.height>=S};m.exports=E},96553:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(37303),S=function(u,l){return d(u,l.x,l.y)};m.exports=S},70273:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return d.width*d.height>i.width*i.height?!1:d.x>i.x&&d.x<i.right&&d.right>i.x&&d.right<i.right&&d.y>i.y&&d.y<i.bottom&&d.bottom>i.y&&d.bottom<i.bottom};m.exports=E},43459:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return d.setTo(i.x,i.y,i.width,i.height)};m.exports=E},77493:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return d===void 0&&(d=[]),d.push({x:i.x,y:i.y}),d.push({x:i.right,y:i.y}),d.push({x:i.right,y:i.bottom}),d.push({x:i.x,y:i.bottom}),d};m.exports=E},9219:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return i.x===d.x&&i.y===d.y&&i.width===d.width&&i.height===d.height};m.exports=E},53751:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(8249),S=function(u,l){var h=d(u);return h<d(l)?u.setSize(l.height*h,l.height):u.setSize(l.width,l.width/h),u.setPosition(l.centerX-u.width/2,l.centerY-u.height/2)};m.exports=S},16088:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(8249),S=function(u,l){var h=d(u);return h>d(l)?u.setSize(l.height*h,l.height):u.setSize(l.width,l.width/h),u.setPosition(l.centerX-u.width/2,l.centerY-u.height/2)};m.exports=S},80774:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i.x=Math.floor(i.x),i.y=Math.floor(i.y),i};m.exports=E},83859:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i.x=Math.floor(i.x),i.y=Math.floor(i.y),i.width=Math.floor(i.width),i.height=Math.floor(i.height),i};m.exports=E},19217:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87841),S=i(36383),u=function(l,h){if(h===void 0&&(h=new d),l.length===0)return h;for(var r=Number.MAX_VALUE,o=Number.MAX_VALUE,p=S.MIN_SAFE_INTEGER,a=S.MIN_SAFE_INTEGER,v,x,g,y=0;y<l.length;y++)v=l[y],Array.isArray(v)?(x=v[0],g=v[1]):(x=v.x,g=v.y),r=Math.min(r,x),o=Math.min(o,g),p=Math.max(p,x),a=Math.max(a,g);return h.x=r,h.y=o,h.width=p-r,h.height=a-o,h};m.exports=u},9477:(m,E,i)=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87841),S=function(u,l,h,r,o){return o===void 0&&(o=new d),o.setTo(Math.min(u,h),Math.min(l,r),Math.abs(u-h),Math.abs(l-r))};m.exports=S},8249:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i.height===0?NaN:i.width/i.height};m.exports=E},27165:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),S=function(u,l){return l===void 0&&(l=new d),l.x=u.centerX,l.y=u.centerY,l};m.exports=S},20812:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(13019),S=i(2141),u=function(l,h,r){if(r===void 0&&(r=new S),h<=0||h>=1)return r.x=l.x,r.y=l.y,r;var o=d(l)*h;return h>.5?(o-=l.width+l.height,o<=l.width?(r.x=l.right-o,r.y=l.bottom):(r.x=l.x,r.y=l.bottom-(o-l.width))):o<=l.width?(r.x=l.x+o,r.y=l.y):(r.x=l.right,r.y=l.y+(o-l.width)),r};m.exports=u},34819:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(20812),S=i(13019),u=function(l,h,r,o){o===void 0&&(o=[]),!h&&r>0&&(h=S(l)/r);for(var p=0;p<h;p++){var a=p/h;o.push(d(l,a))}return o};m.exports=u},51313:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),S=function(u,l){return l===void 0&&(l=new d),l.x=u.width,l.y=u.height,l};m.exports=S},86091:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(67502),S=function(u,l,h){var r=u.centerX,o=u.centerY;return u.setSize(u.width+l*2,u.height+h*2),d(u,r,o)};m.exports=S},53951:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87841),S=i(59996),u=function(l,h,r){return r===void 0&&(r=new d),S(l,h)?(r.x=Math.max(l.x,h.x),r.y=Math.max(l.y,h.y),r.width=Math.min(l.right,h.right)-r.x,r.height=Math.min(l.bottom,h.bottom)-r.y):r.setEmpty(),r};m.exports=u},14649:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(13019),S=i(2141),u=function(l,h,r,o){if(o===void 0&&(o=[]),!h&&!r)return o;h?r=Math.round(d(l)/h):h=d(l)/r;for(var p=l.x,a=l.y,v=0,x=0;x<r;x++)switch(o.push(new S(p,a)),v){case 0:p+=h,p>=l.right&&(v=1,a+=p-l.right,p=l.right);break;case 1:a+=h,a>=l.bottom&&(v=2,p-=a-l.bottom,a=l.bottom);break;case 2:p-=h,p<=l.left&&(v=3,a-=l.left-p,p=l.left);break;case 3:a-=h,a<=l.top&&(v=0,a=l.top);break}return o};m.exports=u},33595:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){for(var S=i.x,u=i.right,l=i.y,h=i.bottom,r=0;r<d.length;r++)S=Math.min(S,d[r].x),u=Math.max(u,d[r].x),l=Math.min(l,d[r].y),h=Math.max(h,d[r].y);return i.x=S,i.y=l,i.width=u-S,i.height=h-l,i};m.exports=E},20074:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){var S=Math.min(i.x,d.x),u=Math.max(i.right,d.right);i.x=S,i.width=u-S;var l=Math.min(i.y,d.y),h=Math.max(i.bottom,d.bottom);return i.y=l,i.height=h-l,i};m.exports=E},92171:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){var u=Math.min(i.x,d),l=Math.max(i.right,d);i.x=u,i.width=l-u;var h=Math.min(i.y,S),r=Math.max(i.bottom,S);return i.y=h,i.height=r-h,i};m.exports=E},42981:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){return i.x+=d,i.y+=S,i};m.exports=E},46907:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return i.x+=d.x,i.y+=d.y,i};m.exports=E},60170:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return i.x<d.right&&i.right>d.x&&i.y<d.bottom&&i.bottom>d.y};m.exports=E},13019:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return 2*(i.width+i.height)};m.exports=E},85133:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),S=i(39506),u=function(l,h,r){r===void 0&&(r=new d),h=S(h);var o=Math.sin(h),p=Math.cos(h),a=p>0?l.width/2:l.width/-2,v=o>0?l.height/2:l.height/-2;return Math.abs(a*o)<Math.abs(v*p)?v=a*o/p:a=v*p/o,r.x=a+l.centerX,r.y=v+l.centerY,r};m.exports=u},26597:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),S=function(u,l){return l===void 0&&(l=new d),l.x=u.x+Math.random()*u.width,l.y=u.y+Math.random()*u.height,l};m.exports=S},86470:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(30976),S=i(70273),u=i(2141),l=function(h,r,o){if(o===void 0&&(o=new u),S(h,r))switch(d(0,3)){case 0:o.x=h.x+Math.random()*(r.right-h.x),o.y=h.y+Math.random()*(r.top-h.y);break;case 1:o.x=r.x+Math.random()*(h.right-r.x),o.y=r.bottom+Math.random()*(h.bottom-r.bottom);break;case 2:o.x=h.x+Math.random()*(r.x-h.x),o.y=r.y+Math.random()*(h.bottom-r.y);break;case 3:o.x=r.right+Math.random()*(h.right-r.right),o.y=h.y+Math.random()*(r.bottom-h.y);break}return o};m.exports=l},87841:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(37303),u=i(20812),l=i(34819),h=i(23777),r=i(23031),o=i(26597),p=new d({initialize:function(v,x,g,y){v===void 0&&(v=0),x===void 0&&(x=0),g===void 0&&(g=0),y===void 0&&(y=0),this.type=h.RECTANGLE,this.x=v,this.y=x,this.width=g,this.height=y},contains:function(a,v){return S(this,a,v)},getPoint:function(a,v){return u(this,a,v)},getPoints:function(a,v,x){return l(this,a,v,x)},getRandomPoint:function(a){return o(this,a)},setTo:function(a,v,x,g){return this.x=a,this.y=v,this.width=x,this.height=g,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(a,v){return v===void 0&&(v=a),this.x=a,this.y=v,this},setSize:function(a,v){return v===void 0&&(v=a),this.width=a,this.height=v,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(a){return a===void 0&&(a=new r),a.setTo(this.x,this.y,this.right,this.y),a},getLineB:function(a){return a===void 0&&(a=new r),a.setTo(this.right,this.y,this.right,this.bottom),a},getLineC:function(a){return a===void 0&&(a=new r),a.setTo(this.right,this.bottom,this.x,this.bottom),a},getLineD:function(a){return a===void 0&&(a=new r),a.setTo(this.x,this.bottom,this.x,this.y),a},left:{get:function(){return this.x},set:function(a){a>=this.right?this.width=0:this.width=this.right-a,this.x=a}},right:{get:function(){return this.x+this.width},set:function(a){a<=this.x?this.width=0:this.width=a-this.x}},top:{get:function(){return this.y},set:function(a){a>=this.bottom?this.height=0:this.height=this.bottom-a,this.y=a}},bottom:{get:function(){return this.y+this.height},set:function(a){a<=this.y?this.height=0:this.height=a-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(a){this.x=a-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(a){this.y=a-this.height/2}}});m.exports=p},94845:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return i.width===d.width&&i.height===d.height};m.exports=E},31730:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){return S===void 0&&(S=d),i.width*=d,i.height*=S,i};m.exports=E},36899:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87841),S=function(u,l,h){h===void 0&&(h=new d);var r=Math.min(u.x,l.x),o=Math.min(u.y,l.y),p=Math.max(u.right,l.right)-r,a=Math.max(u.bottom,l.bottom)-o;return h.setTo(r,o,p,a)};m.exports=S},93232:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87841);d.Area=i(62224),d.Ceil=i(98615),d.CeilAll=i(31688),d.CenterOn=i(67502),d.Clone=i(65085),d.Contains=i(37303),d.ContainsPoint=i(96553),d.ContainsRect=i(70273),d.CopyFrom=i(43459),d.Decompose=i(77493),d.Equals=i(9219),d.FitInside=i(53751),d.FitOutside=i(16088),d.Floor=i(80774),d.FloorAll=i(83859),d.FromPoints=i(19217),d.FromXY=i(9477),d.GetAspectRatio=i(8249),d.GetCenter=i(27165),d.GetPoint=i(20812),d.GetPoints=i(34819),d.GetSize=i(51313),d.Inflate=i(86091),d.Intersection=i(53951),d.MarchingAnts=i(14649),d.MergePoints=i(33595),d.MergeRect=i(20074),d.MergeXY=i(92171),d.Offset=i(42981),d.OffsetPoint=i(46907),d.Overlaps=i(60170),d.Perimeter=i(13019),d.PerimeterPoint=i(85133),d.Random=i(26597),d.RandomOutside=i(86470),d.SameDimensions=i(94845),d.Scale=i(31730),d.Union=i(36899),m.exports=d},41658:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){var d=i.x1,S=i.y1,u=i.x2,l=i.y2,h=i.x3,r=i.y3;return Math.abs(((h-d)*(l-S)-(u-d)*(r-S))/2)};m.exports=E},39208:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(16483),S=function(u,l,h){var r=h*(Math.sqrt(3)/2),o=u,p=l,a=u+h/2,v=l+r,x=u-h/2,g=l+r;return new d(o,p,a,v,x,g)};m.exports=S},39545:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(94811),S=i(16483),u=function(l,h,r,o,p){h===void 0&&(h=null),r===void 0&&(r=1),o===void 0&&(o=1),p===void 0&&(p=[]);for(var a=d(l,h),v,x,g,y,T,P,A,b,O,D=0;D<a.length;D+=3)v=a[D],x=a[D+1],g=a[D+2],y=l[v*2]*r,T=l[v*2+1]*o,P=l[x*2]*r,A=l[x*2+1]*o,b=l[g*2]*r,O=l[g*2+1]*o,p.push(new S(y,T,P,A,b,O));return p};m.exports=u},90301:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(16483),S=function(u,l,h,r){r===void 0&&(r=h);var o=u,p=l,a=u,v=l-r,x=u+h,g=l;return new d(o,p,a,v,x,g)};m.exports=S},23707:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(97523),S=i(13584),u=function(l,h,r,o){o===void 0&&(o=d);var p=o(l),a=h-p.x,v=r-p.y;return S(l,a,v)};m.exports=u},97523:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),S=function(u,l){return l===void 0&&(l=new d),l.x=(u.x1+u.x2+u.x3)/3,l.y=(u.y1+u.y2+u.y3)/3,l};m.exports=S},24951:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26099);function S(l,h,r,o){return l*o-h*r}var u=function(l,h){h===void 0&&(h=new d);var r=l.x3,o=l.y3,p=l.x1-r,a=l.y1-o,v=l.x2-r,x=l.y2-o,g=2*S(p,a,v,x),y=S(a,p*p+a*a,x,v*v+x*x),T=S(p,p*p+a*a,v,v*v+x*x);return h.x=r-y/g,h.y=o+T/g,h};m.exports=u},85614:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(96503),S=function(u,l){l===void 0&&(l=new d);var h=u.x1,r=u.y1,o=u.x2,p=u.y2,a=u.x3,v=u.y3,x=o-h,g=p-r,y=a-h,T=v-r,P=x*(h+o)+g*(r+p),A=y*(h+a)+T*(r+v),b=2*(x*(v-p)-g*(a-o)),O,D;if(Math.abs(b)<1e-6){var B=Math.min(h,o,a),G=Math.min(r,p,v);O=(Math.max(h,o,a)-B)*.5,D=(Math.max(r,p,v)-G)*.5,l.x=B+O,l.y=G+D,l.radius=Math.sqrt(O*O+D*D)}else l.x=(T*P-g*A)/b,l.y=(x*A-y*P)/b,O=l.x-h,D=l.y-r,l.radius=Math.sqrt(O*O+D*D);return l};m.exports=S},74422:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(16483),S=function(u){return new d(u.x1,u.y1,u.x2,u.y2,u.x3,u.y3)};m.exports=S},10690:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){var u=i.x3-i.x1,l=i.y3-i.y1,h=i.x2-i.x1,r=i.y2-i.y1,o=d-i.x1,p=S-i.y1,a=u*u+l*l,v=u*h+l*r,x=u*o+l*p,g=h*h+r*r,y=h*o+r*p,T=a*g-v*v,P=T===0?0:1/T,A=(g*x-v*y)*P,b=(a*y-v*x)*P;return A>=0&&b>=0&&A+b<1};m.exports=E},48653:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){S===void 0&&(S=!1),u===void 0&&(u=[]);for(var l=i.x3-i.x1,h=i.y3-i.y1,r=i.x2-i.x1,o=i.y2-i.y1,p=l*l+h*h,a=l*r+h*o,v=r*r+o*o,x=p*v-a*a,g=x===0?0:1/x,y,T,P,A,b,O,D=i.x1,B=i.y1,G=0;G<d.length&&(P=d[G].x-D,A=d[G].y-B,b=l*P+h*A,O=r*P+o*A,y=(v*b-a*O)*g,T=(p*O-a*b)*g,!(y>=0&&T>=0&&y+T<1&&(u.push({x:d[G].x,y:d[G].y}),S)));G++);return u};m.exports=E},96006:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(10690),S=function(u,l){return d(u,l.x,l.y)};m.exports=S},71326:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return d.setTo(i.x1,i.y1,i.x2,i.y2,i.x3,i.y3)};m.exports=E},71694:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return d===void 0&&(d=[]),d.push({x:i.x1,y:i.y1}),d.push({x:i.x2,y:i.y2}),d.push({x:i.x3,y:i.y3}),d};m.exports=E},33522:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return i.x1===d.x1&&i.y1===d.y1&&i.x2===d.x2&&i.y2===d.y2&&i.x3===d.x3&&i.y3===d.y3};m.exports=E},20437:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),S=i(35001),u=function(l,h,r){r===void 0&&(r=new d);var o=l.getLineA(),p=l.getLineB(),a=l.getLineC();if(h<=0||h>=1)return r.x=o.x1,r.y=o.y1,r;var v=S(o),x=S(p),g=S(a),y=v+x+g,T=y*h,P=0;return T<v?(P=T/v,r.x=o.x1+(o.x2-o.x1)*P,r.y=o.y1+(o.y2-o.y1)*P):T>v+x?(T-=v+x,P=T/g,r.x=a.x1+(a.x2-a.x1)*P,r.y=a.y1+(a.y2-a.y1)*P):(T-=v,P=T/x,r.x=p.x1+(p.x2-p.x1)*P,r.y=p.y1+(p.y2-p.y1)*P),r};m.exports=u},80672:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(35001),S=i(2141),u=function(l,h,r,o){o===void 0&&(o=[]);var p=l.getLineA(),a=l.getLineB(),v=l.getLineC(),x=d(p),g=d(a),y=d(v),T=x+g+y;!h&&r>0&&(h=T/r);for(var P=0;P<h;P++){var A=T*(P/h),b=0,O=new S;A<x?(b=A/x,O.x=p.x1+(p.x2-p.x1)*b,O.y=p.y1+(p.y2-p.y1)*b):A>x+g?(A-=x+g,b=A/y,O.x=v.x1+(v.x2-v.x1)*b,O.y=v.y1+(v.y2-v.y1)*b):(A-=x,b=A/g,O.x=a.x1+(a.x2-a.x1)*b,O.y=a.y1+(a.y2-a.y1)*b),o.push(O)}return o};m.exports=u},39757:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141);function S(l,h,r,o){var p=l-r,a=h-o,v=p*p+a*a;return Math.sqrt(v)}var u=function(l,h){h===void 0&&(h=new d);var r=l.x1,o=l.y1,p=l.x2,a=l.y2,v=l.x3,x=l.y3,g=S(v,x,p,a),y=S(r,o,v,x),T=S(p,a,r,o),P=g+y+T;return h.x=(r*g+p*y+v*T)/P,h.y=(o*g+a*y+x*T)/P,h};m.exports=u},13584:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){return i.x1+=d,i.y1+=S,i.x2+=d,i.y2+=S,i.x3+=d,i.y3+=S,i};m.exports=E},1376:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(35001),S=function(u){var l=u.getLineA(),h=u.getLineB(),r=u.getLineC();return d(l)+d(h)+d(r)};m.exports=S},90260:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2141),S=function(u,l){l===void 0&&(l=new d);var h=u.x2-u.x1,r=u.y2-u.y1,o=u.x3-u.x1,p=u.y3-u.y1,a=Math.random(),v=Math.random();return a+v>=1&&(a=1-a,v=1-v),l.x=u.x1+(h*a+o*v),l.y=u.y1+(r*a+p*v),l};m.exports=S},52172:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(99614),S=i(39757),u=function(l,h){var r=S(l);return d(l,r.x,r.y,h)};m.exports=u},49907:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(99614),S=function(u,l,h){return d(u,l.x,l.y,h)};m.exports=S},99614:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){var l=Math.cos(u),h=Math.sin(u),r=i.x1-d,o=i.y1-S;return i.x1=r*l-o*h+d,i.y1=r*h+o*l+S,r=i.x2-d,o=i.y2-S,i.x2=r*l-o*h+d,i.y2=r*h+o*l+S,r=i.x3-d,o=i.y3-S,i.x3=r*l-o*h+d,i.y3=r*h+o*l+S,i};m.exports=E},16483:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(10690),u=i(20437),l=i(80672),h=i(23777),r=i(23031),o=i(90260),p=new d({initialize:function(v,x,g,y,T,P){v===void 0&&(v=0),x===void 0&&(x=0),g===void 0&&(g=0),y===void 0&&(y=0),T===void 0&&(T=0),P===void 0&&(P=0),this.type=h.TRIANGLE,this.x1=v,this.y1=x,this.x2=g,this.y2=y,this.x3=T,this.y3=P},contains:function(a,v){return S(this,a,v)},getPoint:function(a,v){return u(this,a,v)},getPoints:function(a,v,x){return l(this,a,v,x)},getRandomPoint:function(a){return o(this,a)},setTo:function(a,v,x,g,y,T){return a===void 0&&(a=0),v===void 0&&(v=0),x===void 0&&(x=0),g===void 0&&(g=0),y===void 0&&(y=0),T===void 0&&(T=0),this.x1=a,this.y1=v,this.x2=x,this.y2=g,this.x3=y,this.y3=T,this},getLineA:function(a){return a===void 0&&(a=new r),a.setTo(this.x1,this.y1,this.x2,this.y2),a},getLineB:function(a){return a===void 0&&(a=new r),a.setTo(this.x2,this.y2,this.x3,this.y3),a},getLineC:function(a){return a===void 0&&(a=new r),a.setTo(this.x3,this.y3,this.x1,this.y1),a},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(a){var v=0;this.x1<=this.x2&&this.x1<=this.x3?v=this.x1-a:this.x2<=this.x1&&this.x2<=this.x3?v=this.x2-a:v=this.x3-a,this.x1-=v,this.x2-=v,this.x3-=v}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(a){var v=0;this.x1>=this.x2&&this.x1>=this.x3?v=this.x1-a:this.x2>=this.x1&&this.x2>=this.x3?v=this.x2-a:v=this.x3-a,this.x1-=v,this.x2-=v,this.x3-=v}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(a){var v=0;this.y1<=this.y2&&this.y1<=this.y3?v=this.y1-a:this.y2<=this.y1&&this.y2<=this.y3?v=this.y2-a:v=this.y3-a,this.y1-=v,this.y2-=v,this.y3-=v}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(a){var v=0;this.y1>=this.y2&&this.y1>=this.y3?v=this.y1-a:this.y2>=this.y1&&this.y2>=this.y3?v=this.y2-a:v=this.y3-a,this.y1-=v,this.y2-=v,this.y3-=v}}});m.exports=p},84435:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(16483);d.Area=i(41658),d.BuildEquilateral=i(39208),d.BuildFromPolygon=i(39545),d.BuildRight=i(90301),d.CenterOn=i(23707),d.Centroid=i(97523),d.CircumCenter=i(24951),d.CircumCircle=i(85614),d.Clone=i(74422),d.Contains=i(10690),d.ContainsArray=i(48653),d.ContainsPoint=i(96006),d.CopyFrom=i(71326),d.Decompose=i(71694),d.Equals=i(33522),d.GetPoint=i(20437),d.GetPoints=i(80672),d.InCenter=i(39757),d.Perimeter=i(1376),d.Offset=i(13584),d.Random=i(90260),d.Rotate=i(52172),d.RotateAroundPoint=i(49907),d.RotateAroundXY=i(99614),m.exports=d},74457:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){return{gameObject:i,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:d,hitAreaCallback:S,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragStartCamera:null,dragX:0,dragY:0}};m.exports=E},84409:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return function(S,u,l,h){var r=i.getPixelAlpha(u,l,h.texture.key,h.frame.name);return r&&r>=d}};m.exports=E},7003:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(93301),u=i(50792),l=i(8214),h=i(8443),r=i(78970),o=i(85098),p=i(42515),a=i(36210),v=i(61340),x=i(85955),g=new d({initialize:function(T,P){this.game=T,this.scaleManager,this.canvas,this.config=P,this.enabled=!0,this.events=new u,this.isOver=!0,this.defaultCursor="",this.keyboard=P.inputKeyboard?new r(this):null,this.mouse=P.inputMouse?new o(this):null,this.touch=P.inputTouch?new a(this):null,this.pointers=[],this.pointersTotal=P.inputActivePointers;for(var A=0;A<=this.pointersTotal;A++){var b=new p(this,A);b.smoothFactor=P.inputSmoothFactor,this.pointers.push(b)}this.mousePointer=P.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new v,this._tempMatrix2=new v,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],T.events.once(h.BOOT,this.boot,this)},boot:function(){var y=this.game,T=y.events;this.canvas=y.canvas,this.scaleManager=y.scale,this.events.emit(l.MANAGER_BOOT),T.on(h.PRE_RENDER,this.preRender,this),T.once(h.DESTROY,this.destroy,this)},setCanvasOver:function(y){this.isOver=!0,this.events.emit(l.GAME_OVER,y)},setCanvasOut:function(y){this.isOver=!1,this.events.emit(l.GAME_OUT,y)},preRender:function(){var y=this.game.loop.now,T=this.game.loop.delta,P=this.game.scene.getScenes(!0,!0);this.time=y,this.events.emit(l.MANAGER_UPDATE);for(var A=0;A<P.length;A++){var b=P[A];if(b.sys.input&&b.sys.input.updatePoll(y,T)&&this.globalTopOnly)return}},setDefaultCursor:function(y){this.defaultCursor=y,this.canvas.style.cursor!==y&&(this.canvas.style.cursor=y)},setCursor:function(y){y.cursor&&(this.canvas.style.cursor=y.cursor)},resetCursor:function(y,T){(T||y&&y.cursor)&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(y){y===void 0&&(y=1);var T=[];this.pointersTotal+y>10&&(y=10-this.pointersTotal);for(var P=0;P<y;P++){var A=this.pointers.length,b=new p(this,A);b.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(b),this.pointersTotal++,T.push(b)}return T},updateInputPlugins:function(y,T){var P=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var A=0;A<P.length;A++){var b=P[A];if(b.sys.input){var O=b.sys.input.update(y,T);if(O&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(y){for(var T=this.pointers,P=[],A=0;A<y.changedTouches.length;A++)for(var b=y.changedTouches[A],O=1;O<T.length;O++){var D=T[O];if(!D.active){D.touchstart(b,y),this.activePointer=D,P.push(D);break}}this.updateInputPlugins(S.TOUCH_START,P)},onTouchMove:function(y){for(var T=this.pointers,P=[],A=0;A<y.changedTouches.length;A++)for(var b=y.changedTouches[A],O=1;O<T.length;O++){var D=T[O];if(D.active&&D.identifier===b.identifier){var B=document.elementFromPoint(b.clientX,b.clientY),G=B===this.canvas;!this.isOver&&G?this.setCanvasOver(y):this.isOver&&!G&&this.setCanvasOut(y),this.isOver&&(D.touchmove(b,y),this.activePointer=D,P.push(D));break}}this.updateInputPlugins(S.TOUCH_MOVE,P)},onTouchEnd:function(y){for(var T=this.pointers,P=[],A=0;A<y.changedTouches.length;A++)for(var b=y.changedTouches[A],O=1;O<T.length;O++){var D=T[O];if(D.active&&D.identifier===b.identifier){D.touchend(b,y),P.push(D);break}}this.updateInputPlugins(S.TOUCH_END,P)},onTouchCancel:function(y){for(var T=this.pointers,P=[],A=0;A<y.changedTouches.length;A++)for(var b=y.changedTouches[A],O=1;O<T.length;O++){var D=T[O];if(D.active&&D.identifier===b.identifier){D.touchcancel(b,y),P.push(D);break}}this.updateInputPlugins(S.TOUCH_CANCEL,P)},onMouseDown:function(y){var T=this.mousePointer;T.down(y),T.updateMotion(),this.activePointer=T,this.updateInputPlugins(S.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(y){var T=this.mousePointer;T.move(y),T.updateMotion(),this.activePointer=T,this.updateInputPlugins(S.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(y){var T=this.mousePointer;T.up(y),T.updateMotion(),this.activePointer=T,this.updateInputPlugins(S.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(y){var T=this.mousePointer;T.wheel(y),this.activePointer=T,this.updateInputPlugins(S.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(y){var T=this.mouse.locked;this.mousePointer.locked=T,this.events.emit(l.POINTERLOCK_CHANGE,y,T)},inputCandidate:function(y,T){var P=y.input;if(!P||!P.enabled||!y.willRender(T))return!1;var A=!0,b=y.parentContainer;if(b)do{if(!b.willRender(T)){A=!1;break}b=b.parentContainer}while(b);return A},hitTest:function(y,T,P,A){A===void 0&&(A=this._tempHitTest);var b=this._tempPoint,O=P.scrollX,D=P.scrollY;A.length=0;var B=y.x,G=y.y;P.getWorldPoint(B,G,b),y.worldX=b.x,y.worldY=b.y;for(var V={x:0,y:0},k=this._tempMatrix,U=this._tempMatrix2,W=0;W<T.length;W++){var X=T[W];if(this.inputCandidate(X,P)){var _=b.x+O*X.scrollFactorX-O,Q=b.y+D*X.scrollFactorY-D;X.parentContainer?(X.getWorldTransformMatrix(k,U),k.applyInverse(_,Q,V)):x(_,Q,X.x,X.y,X.rotation,X.scaleX,X.scaleY,V),this.pointWithinHitArea(X,V.x,V.y)&&A.push(X)}}return A},pointWithinHitArea:function(y,T,P){T+=y.displayOriginX,P+=y.displayOriginY;var A=y.input;return A&&A.hitAreaCallback(A.hitArea,T,P,y)?(A.localX=T,A.localY=P,!0):!1},pointWithinInteractiveObject:function(y,T,P){return y.hitArea?(T+=y.gameObject.displayOriginX,P+=y.gameObject.displayOriginY,y.localX=T,y.localY=P,y.hitAreaCallback(y.hitArea,T,P,y)):!1},transformPointer:function(y,T,P,A){var b=y.position,O=y.prevPosition;O.x=b.x,O.y=b.y;var D=this.scaleManager.transformX(T),B=this.scaleManager.transformY(P),G=y.smoothFactor;!A||G===0?(b.x=D,b.y=B):(b.x=D*G+O.x*(1-G),b.y=B*G+O.y*(1-G))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(h.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var y=0;y<this.pointers.length;y++)this.pointers[y].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});m.exports=g},48205:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(96503),S=i(87902),u=i(83419),l=i(93301),h=i(74457),r=i(84409),o=i(20339),p=i(8497),a=i(81154),v=i(8214),x=i(50792),g=i(95540),y=i(23777),T=i(89639),P=i(41212),A=i(37277),b=i(87841),O=i(37303),D=i(44594),B=i(16483),G=i(10690),V=new u({Extends:x,initialize:function(U){x.call(this),this.scene=U,this.systems=U.sys,this.settings=U.sys.settings,this.manager=U.sys.game.input,this.pluginEvents=new x,this.enabled=!0,this.displayList,this.cameras,T.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var W={cancelled:!1};this._eventContainer={stopPropagation:function(){W.cancelled=!0}},this._eventData=W,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,U.sys.events.once(D.BOOT,this.boot,this),U.sys.events.on(D.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(D.DESTROY,this.destroy,this),this.pluginEvents.emit(v.BOOT)},start:function(){var k=this.systems.events;k.on(D.TRANSITION_START,this.transitionIn,this),k.on(D.TRANSITION_OUT,this.transitionOut,this),k.on(D.TRANSITION_COMPLETE,this.transitionComplete,this),k.on(D.PRE_UPDATE,this.preUpdate,this),k.once(D.SHUTDOWN,this.shutdown,this),this.manager.events.on(v.GAME_OUT,this.onGameOut,this),this.manager.events.on(v.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(v.START)},onGameOver:function(k){this.isActive()&&this.emit(v.GAME_OVER,k.timeStamp,k)},onGameOut:function(k){this.isActive()&&this.emit(v.GAME_OUT,k.timeStamp,k)},preUpdate:function(){this.pluginEvents.emit(v.PRE_UPDATE);var k=this._pendingRemoval,U=this._pendingInsertion,W=k.length,X=U.length;if(!(W===0&&X===0)){for(var _=this._list,Q=0;Q<W;Q++){var j=k[Q],it=_.indexOf(j);it>-1&&(_.splice(it,1),this.clear(j,!0))}this._pendingRemoval.length=0,this._list=_.concat(U.splice(0))}},isActive:function(){return this.manager&&this.manager.enabled&&this.enabled&&this.scene.sys.canInput()},setCursor:function(k){this.manager&&this.manager.setCursor(k)},resetCursor:function(){this.manager&&this.manager.resetCursor(null,!0)},updatePoll:function(k,U){if(!this.isActive())return!1;if(this.pluginEvents.emit(v.UPDATE,k,U),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var W,X=this.manager,_=X.pointers;for(W=0;W<_.length;W++)_[W].updateMotion();if(this._list.length===0)return!1;var Q=this.pollRate;if(Q===-1)return!1;if(Q>0)if(this._pollTimer-=U,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var j=!1;for(W=0;W<_.length;W++){var it=0,K=_[W];this._tempZones=[],this._temp=this.hitTestPointer(K),this.sortGameObjects(this._temp,K),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),it+=this.processOverOutEvents(K),this.getDragState(K)===2&&this.processDragThresholdEvent(K,k),it>0&&(j=!0)}return j},update:function(k,U){if(!this.isActive())return!1;for(var W=!1,X=0;X<U.length;X++){var _=0,Q=U[X];switch(this._tempZones=[],this._temp=this.hitTestPointer(Q),this.sortGameObjects(this._temp,Q),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),k){case l.MOUSE_DOWN:_+=this.processDragDownEvent(Q),_+=this.processDownEvents(Q),_+=this.processOverOutEvents(Q);break;case l.MOUSE_UP:_+=this.processDragUpEvent(Q),_+=this.processUpEvents(Q),_+=this.processOverOutEvents(Q);break;case l.TOUCH_START:_+=this.processDragDownEvent(Q),_+=this.processDownEvents(Q),_+=this.processOverEvents(Q);break;case l.TOUCH_END:case l.TOUCH_CANCEL:_+=this.processDragUpEvent(Q),_+=this.processUpEvents(Q),_+=this.processOutEvents(Q);break;case l.MOUSE_MOVE:case l.TOUCH_MOVE:_+=this.processDragMoveEvent(Q),_+=this.processMoveEvents(Q),_+=this.processOverOutEvents(Q);break;case l.MOUSE_WHEEL:_+=this.processWheelEvent(Q);break}_>0&&(W=!0)}return this._updatedThisFrame=!0,W},clear:function(k,U){U===void 0&&(U=!1),this.disable(k);var W=k.input;W&&(this.removeDebug(k),this.manager.resetCursor(W),W.gameObject=void 0,W.target=void 0,W.hitArea=void 0,W.hitAreaCallback=void 0,W.callbackContext=void 0,k.input=null),U||this.queueForRemoval(k);var X=this._draggable.indexOf(k);return X>-1&&this._draggable.splice(X,1),k},disable:function(k,U){U===void 0&&(U=!1);var W=k.input;W&&(W.enabled=!1,W.dragState=0);for(var X=this._drag,_=this._over,Q=this.manager,j=0,it;j<Q.pointers.length;j++)it=X[j].indexOf(k),it>-1&&X[j].splice(it,1),it=_[j].indexOf(k),it>-1&&_[j].splice(it,1);return U&&this.resetCursor(),this},enable:function(k,U,W,X){return X===void 0&&(X=!1),k.input?k.input.enabled=!0:this.setHitArea(k,U,W),k.input&&X&&!k.input.dropZone&&(k.input.dropZone=X),this},hitTestPointer:function(k){for(var U=this.cameras.getCamerasBelowPointer(k),W=0;W<U.length;W++){for(var X=U[W],_=this.manager.hitTest(k,this._list,X),Q=0;Q<_.length;Q++){var j=_[Q];j.input.dropZone&&this._tempZones.push(j)}if(_.length>0)return k.camera=X,_}return k.camera=U[0],[]},processDownEvents:function(k){var U=0,W=this._temp,X=this._eventData,_=this._eventContainer;X.cancelled=!1;for(var Q=0;Q<W.length;Q++){var j=W[Q];if(!(!j.input||!j.input.enabled)&&(U++,j.emit(v.GAMEOBJECT_POINTER_DOWN,k,j.input.localX,j.input.localY,_),X.cancelled||!this.isActive()||j.input&&j.input.enabled&&(this.emit(v.GAMEOBJECT_DOWN,k,j,_),X.cancelled||!this.isActive())))break}return!X.cancelled&&this.isActive()&&(k.downElement===this.manager.game.canvas?this.emit(v.POINTER_DOWN,k,W):this.emit(v.POINTER_DOWN_OUTSIDE,k)),U},getDragState:function(k){return this._dragState[k.id]},setDragState:function(k,U){this._dragState[k.id]=U},processDragThresholdEvent:function(k,U){var W=!1,X=this.dragTimeThreshold,_=this.dragDistanceThreshold;if((_>0&&o(k.x,k.y,k.downX,k.downY)>=_||X>0&&U>=k.downTime+X)&&(W=!0),W)return this.setDragState(k,3),this.processDragStartList(k)},processDragStartList:function(k){if(this.getDragState(k)!==3)return 0;var U=this._drag[k.id];U.length>1&&(U=U.slice(0));for(var W=0;W<U.length;W++){var X=U[W],_=X.input;_.dragState=2,_.dragStartX=X.x,_.dragStartY=X.y,_.dragStartXGlobal=k.worldX,_.dragStartYGlobal=k.worldY,_.dragStartCamera=k.camera,_.dragX=_.dragStartXGlobal-_.dragStartX,_.dragY=_.dragStartYGlobal-_.dragStartY,X.emit(v.GAMEOBJECT_DRAG_START,k,_.dragX,_.dragY),this.emit(v.DRAG_START,k,X)}return this.setDragState(k,4),U.length},processDragDownEvent:function(k){var U=this._temp;if(this._draggable.length===0||U.length===0||!k.primaryDown||this.getDragState(k)!==0)return 0;this.setDragState(k,1);for(var W=[],X=0;X<U.length;X++){var _=U[X];_.input.draggable&&_.input.dragState===0&&W.push(_)}return W.length===0?(this.setDragState(k,0),0):(W.length>1&&(this.sortGameObjects(W,k),this.topOnly&&W.splice(1)),this._drag[k.id]=W,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(k,3),this.processDragStartList(k)):(this.setDragState(k,2),0))},processDragMoveEvent:function(k){if(this.getDragState(k)===2&&this.processDragThresholdEvent(k,this.manager.game.loop.now),this.getDragState(k)!==4)return 0;var U=this._tempZones,W=this._drag[k.id];W.length>1&&(W=W.slice(0));for(var X=0;X<W.length;X++){var _=W[X],Q=_.input,j=Q.target;if(j){var it=U.indexOf(j);it===0?(_.emit(v.GAMEOBJECT_DRAG_OVER,k,j),this.emit(v.DRAG_OVER,k,_,j)):it>0?(_.emit(v.GAMEOBJECT_DRAG_LEAVE,k,j),this.emit(v.DRAG_LEAVE,k,_,j),Q.target=U[0],j=Q.target,_.emit(v.GAMEOBJECT_DRAG_ENTER,k,j),this.emit(v.DRAG_ENTER,k,_,j)):(_.emit(v.GAMEOBJECT_DRAG_LEAVE,k,j),this.emit(v.DRAG_LEAVE,k,_,j),U[0]?(Q.target=U[0],j=Q.target,_.emit(v.GAMEOBJECT_DRAG_ENTER,k,j),this.emit(v.DRAG_ENTER,k,_,j)):Q.target=null)}else!j&&U[0]&&(Q.target=U[0],j=Q.target,_.emit(v.GAMEOBJECT_DRAG_ENTER,k,j),this.emit(v.DRAG_ENTER,k,_,j));var K,J,Y=k.positionToCamera(Q.dragStartCamera);if(!_.parentContainer)K=Y.x-Q.dragX,J=Y.y-Q.dragY;else{var q=Y.x-Q.dragStartXGlobal,$=Y.y-Q.dragStartYGlobal,et=_.getParentRotation(),rt=q*Math.cos(et)+$*Math.sin(et),at=$*Math.cos(et)-q*Math.sin(et);rt*=1/_.parentContainer.scaleX,at*=1/_.parentContainer.scaleY,K=rt+Q.dragStartX,J=at+Q.dragStartY}_.emit(v.GAMEOBJECT_DRAG,k,K,J),this.emit(v.DRAG,k,_,K,J)}return W.length},processDragUpEvent:function(k){var U=this._drag[k.id];U.length>1&&(U=U.slice(0));for(var W=0;W<U.length;W++){var X=U[W],_=X.input;if(_&&_.dragState===2){_.dragState=0,_.dragX=_.localX-X.displayOriginX,_.dragY=_.localY-X.displayOriginY,_.dragStartCamera=null;var Q=!1,j=_.target;j&&(X.emit(v.GAMEOBJECT_DROP,k,j),this.emit(v.DROP,k,X,j),_.target=null,Q=!0),X.input&&X.input.enabled&&(X.emit(v.GAMEOBJECT_DRAG_END,k,_.dragX,_.dragY,Q),this.emit(v.DRAG_END,k,X,Q))}}return this.setDragState(k,0),U.splice(0),0},processMoveEvents:function(k){var U=0,W=this._temp,X=this._eventData,_=this._eventContainer;X.cancelled=!1;for(var Q=0;Q<W.length;Q++){var j=W[Q];if(!(!j.input||!j.input.enabled)&&(U++,j.emit(v.GAMEOBJECT_POINTER_MOVE,k,j.input.localX,j.input.localY,_),X.cancelled||!this.isActive()||j.input&&j.input.enabled&&(this.emit(v.GAMEOBJECT_MOVE,k,j,_),X.cancelled||!this.isActive()||this.topOnly)))break}return!X.cancelled&&this.isActive()&&this.emit(v.POINTER_MOVE,k,W),U},processWheelEvent:function(k){var U=0,W=this._temp,X=this._eventData,_=this._eventContainer;X.cancelled=!1;for(var Q=k.deltaX,j=k.deltaY,it=k.deltaZ,K=0;K<W.length;K++){var J=W[K];if(!(!J.input||!J.input.enabled)&&(U++,J.emit(v.GAMEOBJECT_POINTER_WHEEL,k,Q,j,it,_),X.cancelled||!this.isActive()||J.input&&J.input.enabled&&(this.emit(v.GAMEOBJECT_WHEEL,k,J,Q,j,it,_),X.cancelled||!this.isActive())))break}return!X.cancelled&&this.isActive()&&this.emit(v.POINTER_WHEEL,k,W,Q,j,it),U},processOverEvents:function(k){var U=this._temp,W=0,X=U.length,_=[];if(X>0){var Q=this.manager,j=this._eventData,it=this._eventContainer;j.cancelled=!1;for(var K=0;K<X;K++){var J=U[K];if(!(!J.input||!J.input.enabled)&&(_.push(J),Q.setCursor(J.input),J.emit(v.GAMEOBJECT_POINTER_OVER,k,J.input.localX,J.input.localY,it),W++,j.cancelled||!this.isActive()||J.input&&J.input.enabled&&(this.emit(v.GAMEOBJECT_OVER,k,J,it),j.cancelled||!this.isActive())))break}!j.cancelled&&this.isActive()&&this.emit(v.POINTER_OVER,k,_)}return this._over[k.id]=_,W},processOutEvents:function(k){var U=this._over[k.id],W=0,X=U.length;if(X>0){var _=this.manager,Q=this._eventData,j=this._eventContainer;Q.cancelled=!1,this.sortGameObjects(U,k);for(var it=0;it<X;it++){var K=U[it];if(K=U[it],!(!K.input||!K.input.enabled)&&(_.resetCursor(K.input),K.emit(v.GAMEOBJECT_POINTER_OUT,k,j),W++,Q.cancelled||!this.isActive()||K.input&&K.input.enabled&&(this.emit(v.GAMEOBJECT_OUT,k,K,j),Q.cancelled||!this.isActive())))break}!Q.cancelled&&this.isActive()&&this.emit(v.POINTER_OUT,k,U),this._over[k.id]=[]}return W},processOverOutEvents:function(k){var U=this._temp,W,X,_=[],Q=[],j=[],it=this._over[k.id],K=this._drag[k.id],J=this.manager;for(W=0;W<it.length;W++)X=it[W],U.indexOf(X)===-1&&K.indexOf(X)===-1?_.push(X):j.push(X);for(W=0;W<U.length;W++)X=U[W],it.indexOf(X)===-1&&Q.push(X);var Y=_.length,q=0,$=this._eventData,et=this._eventContainer;if($.cancelled=!1,Y>0){for(this.sortGameObjects(_,k),W=0;W<Y&&(X=_[W],!(!(!X.input||!X.input.enabled)&&(J.resetCursor(X.input),X.emit(v.GAMEOBJECT_POINTER_OUT,k,et),q++,$.cancelled||!this.isActive()||X.input&&X.input.enabled&&(this.emit(v.GAMEOBJECT_OUT,k,X,et),$.cancelled||!this.isActive()))));W++);(!$.cancelled||this.isActive())&&this.emit(v.POINTER_OUT,k,_)}if(Y=Q.length,$.cancelled=!1,Y>0){for(this.sortGameObjects(Q,k),W=0;W<Y&&(X=Q[W],!(!(!X.input||!X.input.enabled)&&(J.setCursor(X.input),X.emit(v.GAMEOBJECT_POINTER_OVER,k,X.input.localX,X.input.localY,et),q++,$.cancelled||!this.isActive()||X.input&&X.input.enabled&&(this.emit(v.GAMEOBJECT_OVER,k,X,et),$.cancelled||!this.isActive()))));W++);!$.cancelled&&this.isActive()&&this.emit(v.POINTER_OVER,k,Q)}return it=j.concat(Q),this._over[k.id]=this.sortGameObjects(it,k),q},processUpEvents:function(k){var U=this._temp,W=this._eventData,X=this._eventContainer;W.cancelled=!1;for(var _=0;_<U.length;_++){var Q=U[_];if(!(!Q.input||!Q.input.enabled)&&(Q.emit(v.GAMEOBJECT_POINTER_UP,k,Q.input.localX,Q.input.localY,X),W.cancelled||!this.isActive()||Q.input&&Q.input.enabled&&(this.emit(v.GAMEOBJECT_UP,k,Q,X),W.cancelled||!this.isActive())))break}return!W.cancelled&&this.isActive()&&(k.upElement===this.manager.game.canvas?this.emit(v.POINTER_UP,k,U):this.emit(v.POINTER_UP_OUTSIDE,k)),U.length},forceDownState:function(k,U){this.forceState(k,U,v.GAMEOBJECT_POINTER_DOWN,v.GAMEOBJECT_DOWN,!1)},forceUpState:function(k,U){this.forceState(k,U,v.GAMEOBJECT_POINTER_UP,v.GAMEOBJECT_UP,!1)},forceOverState:function(k,U){this.forceState(k,U,v.GAMEOBJECT_POINTER_OVER,v.GAMEOBJECT_OVER,!0)},forceOutState:function(k,U){this.forceState(k,U,v.GAMEOBJECT_POINTER_OUT,v.GAMEOBJECT_OUT,!1)},forceState:function(k,U,W,X,_){var Q=this._eventData,j=this._eventContainer;Q.cancelled=!1,U.input&&U.input.enabled&&(U.emit(W,k,U.input.localX,U.input.localY,j),_&&this.setCursor(U.input),!Q.cancelled&&this.isActive()&&U.input&&U.input.enabled&&this.emit(X,k,U,j))},queueForInsertion:function(k){return this._pendingInsertion.indexOf(k)===-1&&this._list.indexOf(k)===-1&&this._pendingInsertion.push(k),this},queueForRemoval:function(k){return this._pendingRemoval.push(k),this},setDraggable:function(k,U){U===void 0&&(U=!0),Array.isArray(k)||(k=[k]);for(var W=0;W<k.length;W++){var X=k[W];X.input.draggable=U;var _=this._draggable.indexOf(X);U&&_===-1?this._draggable.push(X):!U&&_>-1&&this._draggable.splice(_,1)}return this},makePixelPerfect:function(k){k===void 0&&(k=1);var U=this.systems.textures;return r(U,k)},setHitArea:function(k,U,W){if(U===void 0)return this.setHitAreaFromTexture(k);Array.isArray(k)||(k=[k]);var X=!1,_=!1,Q=!1,j=!1,it=!1,K=!0;if(P(U)&&Object.keys(U).length){var J=U,Y=k.some(function(at){return at.hasOwnProperty("faces")});if(!Y){U=g(J,"hitArea",null),W=g(J,"hitAreaCallback",null),it=g(J,"pixelPerfect",!1);var q=g(J,"alphaTolerance",1);it&&(U={},W=this.makePixelPerfect(q))}X=g(J,"draggable",!1),_=g(J,"dropZone",!1),Q=g(J,"cursor",!1),j=g(J,"useHandCursor",!1),(!U||!W)&&(this.setHitAreaFromTexture(k),K=!1)}else typeof U=="function"&&!W&&(W=U,U={});for(var $=0;$<k.length;$++){var et=k[$];if(it&&et.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var rt=et.input?et.input:h(et,U,W);rt.customHitArea=K,rt.dropZone=_,rt.cursor=j?"pointer":Q,et.input=rt,X&&this.setDraggable(et),this.queueForInsertion(et)}return this},setHitAreaCircle:function(k,U,W,X,_){_===void 0&&(_=S);var Q=new d(U,W,X);return this.setHitArea(k,Q,_)},setHitAreaEllipse:function(k,U,W,X,_,Q){Q===void 0&&(Q=a);var j=new p(U,W,X,_);return this.setHitArea(k,j,Q)},setHitAreaFromTexture:function(k,U){U===void 0&&(U=O),Array.isArray(k)||(k=[k]);for(var W=0;W<k.length;W++){var X=k[W],_=X.frame,Q=0,j=0;if(X.width?(Q=X.width,j=X.height):_&&(Q=_.realWidth,j=_.realHeight),X.type==="Container"&&(Q===0||j===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}Q!==0&&j!==0&&(X.input=h(X,new b(0,0,Q,j),U),this.queueForInsertion(X))}return this},setHitAreaRectangle:function(k,U,W,X,_,Q){Q===void 0&&(Q=O);var j=new b(U,W,X,_);return this.setHitArea(k,j,Q)},setHitAreaTriangle:function(k,U,W,X,_,Q,j,it){it===void 0&&(it=G);var K=new B(U,W,X,_,Q,j);return this.setHitArea(k,K,it)},enableDebug:function(k,U){U===void 0&&(U=65280);var W=k.input;if(!W||!W.hitArea)return this;var X=W.hitArea,_=X.type,Q=W.hitAreaDebug,j=this.systems.add,it=this.systems.updateList;Q&&(it.remove(Q),Q.destroy(),Q=null);var K=0,J=0;switch(_){case y.CIRCLE:Q=j.arc(0,0,X.radius),K=X.x-X.radius,J=X.y-X.radius;break;case y.ELLIPSE:Q=j.ellipse(0,0,X.width,X.height),K=X.x-X.width/2,J=X.y-X.height/2;break;case y.LINE:Q=j.line(0,0,X.x1,X.y1,X.x2,X.y2);break;case y.POLYGON:Q=j.polygon(0,0,X.points);break;case y.RECTANGLE:Q=j.rectangle(0,0,X.width,X.height),K=X.x,J=X.y;break;case y.TRIANGLE:Q=j.triangle(0,0,X.x1,X.y1,X.x2,X.y2,X.x3,X.y3);break}return Q&&(Q.isFilled=!1,Q.strokeColor=U,Q.preUpdate=function(){Q.setVisible(k.visible),Q.setStrokeStyle(1/k.scale,Q.strokeColor),Q.setDisplayOrigin(k.displayOriginX,k.displayOriginY);var Y=k.x,q=k.y,$=k.rotation,et=k.scaleX,rt=k.scaleY;if(k.parentContainer){var at=k.getWorldTransformMatrix();Y=at.tx,q=at.ty,$=at.rotation,et=at.scaleX,rt=at.scaleY}Q.setRotation($),Q.setScale(et,rt),Q.setPosition(Y+K*et,q+J*rt),Q.setScrollFactor(k.scrollFactorX,k.scrollFactorY),Q.setDepth(k.depth)},it.add(Q),W.hitAreaDebug=Q),this},removeDebug:function(k){var U=k.input;if(U&&U.hitAreaDebug){var W=U.hitAreaDebug;W.destroy(),U.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(k){return this.pollRate=k,this._pollTimer=0,this},setGlobalTopOnly:function(k){return this.manager.globalTopOnly=k,this},setTopOnly:function(k){return this.topOnly=k,this},sortGameObjects:function(k,U){if(k.length<2||!U.camera)return k;var W=U.camera.renderList;return k.sort(function(X,_){var Q=Math.max(W.indexOf(X),0),j=Math.max(W.indexOf(_),0);return j-Q})},sortDropZones:function(k){return k.length<2?k:(this.scene.sys.depthSort(),k.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(k,U){if(!k.parentContainer&&!U.parentContainer)return this.displayList.getIndex(U)-this.displayList.getIndex(k);if(k.parentContainer===U.parentContainer)return U.parentContainer.getIndex(U)-k.parentContainer.getIndex(k);if(k.parentContainer===U)return-1;if(U.parentContainer===k)return 1;for(var W=k.getIndexList(),X=U.getIndexList(),_=Math.min(W.length,X.length),Q=0;Q<_;Q++){var j=W[Q],it=X[Q];if(j!==it)return it-j}return X.length-W.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(k){return this.manager.addPointer(k)},setDefaultCursor:function(k){return this.manager.setDefaultCursor(k),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(v.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var k=0;k<10;k++)this._drag[k]=[],this._over[k]=[];this.removeAllListeners();var U=this.manager;U.canvas.style.cursor=U.defaultCursor;var W=this.systems.events;W.off(D.TRANSITION_START,this.transitionIn,this),W.off(D.TRANSITION_OUT,this.transitionOut,this),W.off(D.TRANSITION_COMPLETE,this.transitionComplete,this),W.off(D.PRE_UPDATE,this.preUpdate,this),U.events.off(v.GAME_OUT,this.onGameOut,this),U.events.off(v.GAME_OVER,this.onGameOver,this),W.off(D.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var k=this.manager.pointers,U=0;U<k.length;U++)k[U].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(v.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(D.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});A.register("InputPlugin",V,"input"),m.exports=V},89639:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(35154),S={},u={};u.register=function(l,h,r,o,p){S[l]={plugin:h,mapping:r,settingsKey:o,configKey:p}},u.getPlugin=function(l){return S[l]},u.install=function(l){var h=l.scene.sys,r=h.settings.input,o=h.game.config;for(var p in S){var a=S[p].plugin,v=S[p].mapping,x=S[p].settingsKey,g=S[p].configKey;d(r,x,o[g])&&(l[v]=new a(l))}},u.remove=function(l){S.hasOwnProperty(l)&&delete S[l]},m.exports=u},42515:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(31040),S=i(83419),u=i(20339),l=i(43855),h=i(47235),r=i(26099),o=i(25892),p=new S({initialize:function(v,x){this.manager=v,this.id=x,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new r,this.prevPosition=new r,this.midPoint=new r(-1,-1),this.velocity=new r,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=x===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(a){var v=a.getWorldPoint(this.x,this.y);return this.worldX=v.x,this.worldY=v.y,this},positionToCamera:function(a,v){return a.getWorldPoint(this.x,this.y,v)},updateMotion:function(){var a=this.position.x,v=this.position.y,x=this.midPoint.x,g=this.midPoint.y;if(!(a===x&&v===g)){var y=h(this.motionFactor,x,a),T=h(this.motionFactor,g,v);l(y,a,.1)&&(y=a),l(T,v,.1)&&(T=v),this.midPoint.set(y,T);var P=a-y,A=v-T;this.velocity.set(P,A),this.angle=d(y,T,a,v),this.distance=Math.sqrt(P*P+A*A)}},up:function(a){"buttons"in a&&(this.buttons=a.buttons),this.event=a,this.button=a.button,this.upElement=a.target,this.manager.transformPointer(this,a.pageX,a.pageY,!1),a.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=a.timeStamp,this.wasTouch=!1)},down:function(a){"buttons"in a&&(this.buttons=a.buttons),this.event=a,this.button=a.button,this.downElement=a.target,this.manager.transformPointer(this,a.pageX,a.pageY,!1),a.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),o.macOS&&a.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=a.timeStamp),this.wasTouch=!1},move:function(a){"buttons"in a&&(this.buttons=a.buttons),this.event=a,this.manager.transformPointer(this,a.pageX,a.pageY,!0),this.locked&&(this.movementX=a.movementX||a.mozMovementX||a.webkitMovementX||0,this.movementY=a.movementY||a.mozMovementY||a.webkitMovementY||0),this.moveTime=a.timeStamp,this.wasTouch=!1},wheel:function(a){"buttons"in a&&(this.buttons=a.buttons),this.event=a,this.manager.transformPointer(this,a.pageX,a.pageY,!1),this.deltaX=a.deltaX,this.deltaY=a.deltaY,this.deltaZ=a.deltaZ,this.wasTouch=!1},touchstart:function(a,v){a.pointerId&&(this.pointerId=a.pointerId),this.identifier=a.identifier,this.target=a.target,this.active=!0,this.buttons=1,this.event=v,this.downElement=a.target,this.manager.transformPointer(this,a.pageX,a.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=v.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(a,v){this.event=v,this.manager.transformPointer(this,a.pageX,a.pageY,!0),this.moveTime=v.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(a,v){this.buttons=0,this.event=v,this.upElement=a.target,this.manager.transformPointer(this,a.pageX,a.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=v.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(a,v){this.buttons=0,this.event=v,this.upElement=a.target,this.manager.transformPointer(this,a.pageX,a.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=v.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.buttons===0?this.button===0&&!this.isDown:this.button===0},rightButtonReleased:function(){return this.buttons===0?this.button===2&&!this.isDown:this.button===2},middleButtonReleased:function(){return this.buttons===0?this.button===1&&!this.isDown:this.button===1},backButtonReleased:function(){return this.buttons===0?this.button===3&&!this.isDown:this.button===3},forwardButtonReleased:function(){return this.buttons===0?this.button===4&&!this.isDown:this.button===4},getDistance:function(){return this.isDown?u(this.downX,this.downY,this.x,this.y):u(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?d(this.downX,this.downY,this.x,this.y):d(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(a,v){a===void 0&&(a=10),v===void 0&&(v=[]);for(var x=this.prevPosition.x,g=this.prevPosition.y,y=this.position.x,T=this.position.y,P=0;P<a;P++){var A=1/a*P;v[P]={x:h(A,x,y),y:h(A,g,T)}}return v},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(a){this.position.x=a}},y:{get:function(){return this.position.y},set:function(a){this.position.y=a}},time:{get:function(){return this.event?this.event.timeStamp:0}}});m.exports=p},93301:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};m.exports=E},7179:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="boot"},85375:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="destroy"},39843:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="dragend"},23388:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="dragenter"},16133:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="drag"},27829:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="dragleave"},53904:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="dragover"},56058:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="dragstart"},2642:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="drop"},88171:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="gameobjectdown"},36147:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="dragend"},71692:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="dragenter"},96149:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="drag"},81285:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="dragleave"},74048:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="dragover"},21322:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="dragstart"},49378:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="drop"},86754:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="gameobjectmove"},86433:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="gameobjectout"},60709:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="gameobjectover"},24081:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pointerdown"},11172:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pointermove"},18907:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pointerout"},95579:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pointerover"},35368:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pointerup"},26972:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="wheel"},47078:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="gameobjectup"},73802:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="gameobjectwheel"},56718:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="gameout"},25936:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="gameover"},27503:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="boot"},50852:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="process"},96438:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="update"},59152:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pointerlockchange"},47777:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pointerdown"},27957:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pointerdownoutside"},19444:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pointermove"},54251:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pointerout"},18667:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pointerover"},27192:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pointerup"},24652:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pointerupoutside"},45132:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="wheel"},44512:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="preupdate"},15757:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="shutdown"},41637:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="start"},93802:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="update"},8214:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={BOOT:i(7179),DESTROY:i(85375),DRAG_END:i(39843),DRAG_ENTER:i(23388),DRAG:i(16133),DRAG_LEAVE:i(27829),DRAG_OVER:i(53904),DRAG_START:i(56058),DROP:i(2642),GAME_OUT:i(56718),GAME_OVER:i(25936),GAMEOBJECT_DOWN:i(88171),GAMEOBJECT_DRAG_END:i(36147),GAMEOBJECT_DRAG_ENTER:i(71692),GAMEOBJECT_DRAG:i(96149),GAMEOBJECT_DRAG_LEAVE:i(81285),GAMEOBJECT_DRAG_OVER:i(74048),GAMEOBJECT_DRAG_START:i(21322),GAMEOBJECT_DROP:i(49378),GAMEOBJECT_MOVE:i(86754),GAMEOBJECT_OUT:i(86433),GAMEOBJECT_OVER:i(60709),GAMEOBJECT_POINTER_DOWN:i(24081),GAMEOBJECT_POINTER_MOVE:i(11172),GAMEOBJECT_POINTER_OUT:i(18907),GAMEOBJECT_POINTER_OVER:i(95579),GAMEOBJECT_POINTER_UP:i(35368),GAMEOBJECT_POINTER_WHEEL:i(26972),GAMEOBJECT_UP:i(47078),GAMEOBJECT_WHEEL:i(73802),MANAGER_BOOT:i(27503),MANAGER_PROCESS:i(50852),MANAGER_UPDATE:i(96438),POINTER_DOWN:i(47777),POINTER_DOWN_OUTSIDE:i(27957),POINTER_MOVE:i(19444),POINTER_OUT:i(54251),POINTER_OVER:i(18667),POINTER_UP:i(27192),POINTER_UP_OUTSIDE:i(24652),POINTER_WHEEL:i(45132),POINTERLOCK_CHANGE:i(59152),PRE_UPDATE:i(44512),SHUTDOWN:i(15757),START:i(41637),UPDATE:i(93802)}},97421:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=new d({initialize:function(l,h){this.pad=l,this.events=l.events,this.index=h,this.value=0,this.threshold=.1},update:function(u){this.value=u},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});m.exports=S},28884:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(92734),u=new d({initialize:function(h,r){this.pad=h,this.events=h.manager,this.index=r,this.value=0,this.threshold=1,this.pressed=!1},update:function(l){this.value=l;var h=this.pad,r=this.index;l>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(S.BUTTON_DOWN,h,this,l),this.pad.emit(S.GAMEPAD_BUTTON_DOWN,r,l,this)):this.pressed&&(this.pressed=!1,this.events.emit(S.BUTTON_UP,h,this,l),this.pad.emit(S.GAMEPAD_BUTTON_UP,r,l,this))},destroy:function(){this.pad=null,this.events=null}});m.exports=u},99125:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(97421),S=i(28884),u=i(83419),l=i(50792),h=i(26099),r=new u({Extends:l,initialize:function(p,a){l.call(this),this.manager=p,this.pad=a,this.id=a.id,this.index=a.index;for(var v=[],x=0;x<a.buttons.length;x++)v.push(new S(this,x));this.buttons=v;var g=[];for(x=0;x<a.axes.length;x++)g.push(new d(this,x));this.axes=g,this.vibration=a.vibrationActuator;var y={value:0,pressed:!1};this._LCLeft=v[14]?v[14]:y,this._LCRight=v[15]?v[15]:y,this._LCTop=v[12]?v[12]:y,this._LCBottom=v[13]?v[13]:y,this._RCLeft=v[2]?v[2]:y,this._RCRight=v[1]?v[1]:y,this._RCTop=v[3]?v[3]:y,this._RCBottom=v[0]?v[0]:y,this._FBLeftTop=v[4]?v[4]:y,this._FBLeftBottom=v[6]?v[6]:y,this._FBRightTop=v[5]?v[5]:y,this._FBRightBottom=v[7]?v[7]:y;var T={value:0};this._HAxisLeft=g[0]?g[0]:T,this._VAxisLeft=g[1]?g[1]:T,this._HAxisRight=g[2]?g[2]:T,this._VAxisRight=g[3]?g[3]:T,this.leftStick=new h,this.rightStick=new h,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(o){return this.axes[o].getValue()},setAxisThreshold:function(o){for(var p=0;p<this.axes.length;p++)this.axes[p].threshold=o},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(o){return this.buttons[o].value},isButtonDown:function(o){return this.buttons[o].pressed},update:function(o){if(!(o.timestamp<this._created)){var p,a=this.buttons,v=o.buttons,x=a.length;for(p=0;p<x;p++)a[p].update(v[p].value);var g=this.axes,y=o.axes;for(x=g.length,p=0;p<x;p++)g[p].update(y[p]);x>=2&&(this.leftStick.set(g[0].getValue(),g[1].getValue()),x>=4&&this.rightStick.set(g[2].getValue(),g[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var o;for(o=0;o<this.buttons.length;o++)this.buttons[o].destroy();for(o=0;o<this.axes.length;o++)this.axes[o].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});m.exports=r},56654:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(50792),u=i(92734),l=i(99125),h=i(35154),r=i(89639),o=i(8214),p=new d({Extends:S,initialize:function(v){S.call(this),this.scene=v.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=v,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,v.pluginEvents.once(o.BOOT,this.boot,this),v.pluginEvents.on(o.START,this.start,this)},boot:function(){var a=this.scene.sys.game,v=this.settings.input,x=a.config;this.enabled=h(v,"gamepad",x.inputGamepad)&&a.device.input.gamepads,this.target=h(v,"gamepad.target",x.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(o.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(o.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var a=this,v=this.target,x=function(g){g.defaultPrevented||!a.isActive()||(a.refreshPads(),a.queue.push(g))};this.onGamepadHandler=x,v.addEventListener("gamepadconnected",x,!1),v.addEventListener("gamepaddisconnected",x,!1),this.sceneInputPlugin.pluginEvents.on(o.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(o.UPDATE,this.update);for(var a=0;a<this.gamepads.length;a++)this.gamepads[a].removeAllListeners()},disconnectAll:function(){for(var a=0;a<this.gamepads.length;a++)this.gamepads[a].pad.connected=!1},refreshPads:function(){var a=navigator.getGamepads();if(!a)this.disconnectAll();else for(var v=this.gamepads,x=0;x<a.length;x++){var g=a[x];if(g){var y=g.id,T=g.index,P=v[T];if(P)P.id!==y?(P.destroy(),v[T]=new l(this,g)):P.update(g);else{var A=new l(this,g);v[T]=A,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=A):this._pad3=A:this._pad2=A:this._pad1=A}}}},getAll:function(){for(var a=[],v=this.gamepads,x=0;x<v.length;x++)v[x]&&a.push(v[x]);return a},getPad:function(a){for(var v=this.gamepads,x=0;x<v.length;x++)if(v[x]&&v[x].index===a)return v[x]},update:function(){if(this.enabled){this.refreshPads();var a=this.queue.length;if(a!==0)for(var v=this.queue.splice(0,a),x=0;x<a;x++){var g=v[x],y=this.getPad(g.gamepad.index);g.type==="gamepadconnected"?this.emit(u.CONNECTED,y,g):g.type==="gamepaddisconnected"&&this.emit(u.DISCONNECTED,y,g)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var a=0;a<this.gamepads.length;a++)this.gamepads[a]&&this.gamepads[a].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});r.register("GamepadPlugin",p,"gamepad","gamepad","inputGamepad"),m.exports=p},89651:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},65294:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},90089:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},64894:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={DUALSHOCK_4:i(65294),SNES_USB:i(89651),XBOX_360:i(90089)}},46008:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="down"},7629:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="up"},42206:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="connected"},86544:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="disconnected"},94784:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="down"},14325:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="up"},92734:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={BUTTON_DOWN:i(46008),BUTTON_UP:i(7629),CONNECTED:i(42206),DISCONNECTED:i(86544),GAMEPAD_BUTTON_DOWN:i(94784),GAMEPAD_BUTTON_UP:i(14325)}},48646:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Axis:i(97421),Button:i(28884),Events:i(92734),Gamepad:i(99125),GamepadPlugin:i(56654),Configs:i(64894)}},14350:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(93301),S=i(79291),u={CreatePixelPerfectHandler:i(84409),CreateInteractiveObject:i(74457),Events:i(8214),Gamepad:i(48646),InputManager:i(7003),InputPlugin:i(48205),InputPluginCache:i(89639),Keyboard:i(51442),Mouse:i(87078),Pointer:i(42515),Touch:i(95618)};u=S(!1,u,d),m.exports=u},78970:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(72905),S=i(83419),u=i(8443),l=i(8214),h=i(46032),r=i(29747),o=new S({initialize:function(a){this.manager=a,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=r,this.onKeyUp=r,a.events.once(l.MANAGER_BOOT,this.boot,this)},boot:function(){var p=this.manager.config;this.enabled=p.inputKeyboard,this.target=p.inputKeyboardEventTarget,this.addCapture(p.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(u.POST_STEP,this.postUpdate,this)},startListeners:function(){var p=this;this.onKeyDown=function(v){if(!(v.defaultPrevented||!p.enabled||!p.manager)){p.queue.push(v),p.manager.events.emit(l.MANAGER_PROCESS);var x=v.altKey||v.ctrlKey||v.shiftKey||v.metaKey;p.preventDefault&&!x&&p.captures.indexOf(v.keyCode)>-1&&v.preventDefault()}},this.onKeyUp=function(v){if(!(v.defaultPrevented||!p.enabled||!p.manager)){p.queue.push(v),p.manager.events.emit(l.MANAGER_PROCESS);var x=v.altKey||v.ctrlKey||v.shiftKey||v.metaKey;p.preventDefault&&!x&&p.captures.indexOf(v.keyCode)>-1&&v.preventDefault()}};var a=this.target;a&&(a.addEventListener("keydown",this.onKeyDown,!1),a.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var p=this.target;p.removeEventListener("keydown",this.onKeyDown,!1),p.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(p){typeof p=="string"&&(p=p.split(",")),Array.isArray(p)||(p=[p]);for(var a=this.captures,v=0;v<p.length;v++){var x=p[v];typeof x=="string"&&(x=h[x.trim().toUpperCase()]),a.indexOf(x)===-1&&a.push(x)}this.preventDefault=a.length>0},removeCapture:function(p){typeof p=="string"&&(p=p.split(",")),Array.isArray(p)||(p=[p]);for(var a=this.captures,v=0;v<p.length;v++){var x=p[v];typeof x=="string"&&(x=h[x.toUpperCase()]),d(a,x)}this.preventDefault=a.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(u.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});m.exports=o},28846:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(50792),u=i(95922),l=i(8443),h=i(35154),r=i(8214),o=i(89639),p=i(30472),a=i(46032),v=i(87960),x=i(74600),g=i(44594),y=i(56583),T=new d({Extends:S,initialize:function(A){S.call(this),this.game=A.systems.game,this.scene=A.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=A,this.manager=A.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,A.pluginEvents.once(r.BOOT,this.boot,this),A.pluginEvents.on(r.START,this.start,this)},boot:function(){var P=this.settings.input;this.enabled=h(P,"keyboard",!0);var A=h(P,"keyboard.capture",null);A&&this.addCaptures(A),this.sceneInputPlugin.pluginEvents.once(r.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(r.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(r.SHUTDOWN,this.shutdown,this),this.game.events.on(l.BLUR,this.resetKeys,this),this.scene.sys.events.on(g.PAUSE,this.resetKeys,this),this.scene.sys.events.on(g.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(P){return this.manager.addCapture(P),this},removeCapture:function(P){return this.manager.removeCapture(P),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:a.UP,down:a.DOWN,left:a.LEFT,right:a.RIGHT,space:a.SPACE,shift:a.SHIFT})},addKeys:function(P,A,b){A===void 0&&(A=!0),b===void 0&&(b=!1);var O={};if(typeof P=="string"){P=P.split(",");for(var D=0;D<P.length;D++){var B=P[D].trim();B&&(O[B]=this.addKey(B,A,b))}}else for(var G in P)O[G]=this.addKey(P[G],A,b);return O},addKey:function(P,A,b){A===void 0&&(A=!0),b===void 0&&(b=!1);var O=this.keys;if(P instanceof p){var D=O.indexOf(P);return D>-1?O[D]=P:O[P.keyCode]=P,A&&this.addCapture(P.keyCode),P.setEmitOnRepeat(b),P}return typeof P=="string"&&(P=a[P.toUpperCase()]),O[P]||(O[P]=new p(this,P),A&&this.addCapture(P),O[P].setEmitOnRepeat(b)),O[P]},removeKey:function(P,A,b){A===void 0&&(A=!1),b===void 0&&(b=!1);var O=this.keys,D;if(P instanceof p){var B=O.indexOf(P);B>-1&&(D=this.keys[B],this.keys[B]=void 0)}else typeof P=="string"&&(P=a[P.toUpperCase()]);return O[P]&&(D=O[P],O[P]=void 0),D&&(D.plugin=null,b&&this.removeCapture(D.keyCode),A&&D.destroy()),this},removeAllKeys:function(P,A){P===void 0&&(P=!1),A===void 0&&(A=!1);for(var b=this.keys,O=0;O<b.length;O++){var D=b[O];D&&(b[O]=void 0,A&&this.removeCapture(D.keyCode),P&&D.destroy())}return this},createCombo:function(P,A){return new v(this,P,A)},checkDown:function(P,A){if(A===void 0&&(A=0),this.enabled&&P.isDown){var b=y(this.time-P.timeDown,A);if(b>P._tick)return P._tick=b,!0}return!1},update:function(){var P=this.manager.queue,A=P.length;if(!(!this.isActive()||A===0))for(var b=this.keys,O=0;O<A;O++){var D=P[O],B=D.keyCode,G=b[B],V=!1;D.cancelled===void 0&&(D.cancelled=0,D.stopImmediatePropagation=function(){D.cancelled=1},D.stopPropagation=function(){D.cancelled=-1}),D.cancelled!==-1&&(B===this.prevCode&&D.timeStamp===this.prevTime&&D.type===this.prevType||(this.prevCode=B,this.prevTime=D.timeStamp,this.prevType=D.type,D.type==="keydown"?(G&&(V=G.isDown,G.onDown(D)),!D.cancelled&&(!G||!V)&&(x[B]&&this.emit(u.KEY_DOWN+x[B],D),D.cancelled||this.emit(u.ANY_KEY_DOWN,D))):(G&&G.onUp(D),D.cancelled||(x[B]&&this.emit(u.KEY_UP+x[B],D),D.cancelled||this.emit(u.ANY_KEY_UP,D))),D.cancelled===1&&(D.cancelled=0)))}},resetKeys:function(){for(var P=this.keys,A=0;A<P.length;A++)P[A]&&P[A].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(r.MANAGER_PROCESS,this.update,this),this.game.events.off(l.BLUR,this.resetKeys),this.scene.sys.events.off(g.PAUSE,this.resetKeys,this),this.scene.sys.events.off(g.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var P=this.keys,A=0;A<P.length;A++)P[A]&&P[A].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});o.register("KeyboardPlugin",T,"keyboard","keyboard","inputKeyboard"),m.exports=T},66970:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return d.timeLastMatched=i.timeStamp,d.index++,d.index===d.size?!0:(d.current=d.keyCodes[d.index],!1)};m.exports=E},87960:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(95922),u=i(95540),l=i(68769),h=i(92803),r=new d({initialize:function(p,a,v){if(v===void 0&&(v={}),a.length<2)return!1;this.manager=p,this.enabled=!0,this.keyCodes=[];for(var x=0;x<a.length;x++){var g=a[x];typeof g=="string"?this.keyCodes.push(g.toUpperCase().charCodeAt(0)):typeof g=="number"?this.keyCodes.push(g):g.hasOwnProperty("keyCode")&&this.keyCodes.push(g.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=u(v,"resetOnWrongKey",!0),this.maxKeyDelay=u(v,"maxKeyDelay",0),this.resetOnMatch=u(v,"resetOnMatch",!1),this.deleteOnMatch=u(v,"deleteOnMatch",!1);var y=this,T=function(P){if(!(y.matched||!y.enabled)){var A=l(P,y);A&&(y.manager.emit(S.COMBO_MATCH,y,P),y.resetOnMatch?h(y):y.deleteOnMatch&&y.destroy())}};this.onKeyDown=T,this.manager.on(S.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(S.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});m.exports=r},68769:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66970),S=function(u,l){if(l.matched)return!0;var h=!1,r=!1;if(u.keyCode===l.current)if(l.index>0&&l.maxKeyDelay>0){var o=l.timeLastMatched+l.maxKeyDelay;u.timeStamp<=o&&(r=!0,h=d(u,l))}else r=!0,h=d(u,l);return!r&&l.resetOnWrongKey&&(l.index=0,l.current=l.keyCodes[0]),h&&(l.timeLastMatched=u.timeStamp,l.matched=!0,l.timeMatched=u.timeStamp),h};m.exports=S},92803:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i.current=i.keyCodes[0],i.index=0,i.timeLastMatched=0,i.matched=!1,i.timeMatched=0,i};m.exports=E},92612:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="keydown"},23345:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="keyup"},21957:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="keycombomatch"},44743:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="down"},3771:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="keydown-"},46358:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="keyup-"},75674:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="up"},95922:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={ANY_KEY_DOWN:i(92612),ANY_KEY_UP:i(23345),COMBO_MATCH:i(21957),DOWN:i(44743),KEY_DOWN:i(3771),KEY_UP:i(46358),UP:i(75674)}},51442:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Events:i(95922),KeyboardManager:i(78970),KeyboardPlugin:i(28846),Key:i(30472),KeyCodes:i(46032),KeyCombo:i(87960),AdvanceKeyCombo:i(66970),ProcessKeyCombo:i(68769),ResetKeyCombo:i(92803),JustDown:i(90229),JustUp:i(38796),DownDuration:i(37015),UpDuration:i(41170)}},37015:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){d===void 0&&(d=50);var S=i.plugin.game.loop.time-i.timeDown;return i.isDown&&S<d};m.exports=E},90229:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i._justDown?(i._justDown=!1,!0):!1};m.exports=E},38796:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i._justUp?(i._justUp=!1,!0):!1};m.exports=E},30472:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(50792),u=i(95922),l=new d({Extends:S,initialize:function(r,o){S.call(this),this.plugin=r,this.keyCode=o,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(h){return this.emitOnRepeat=h,this},onDown:function(h){this.originalEvent=h,this.enabled&&(this.altKey=h.altKey,this.ctrlKey=h.ctrlKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.location=h.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(u.DOWN,this,h):(this.isDown=!0,this.isUp=!1,this.timeDown=h.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(u.DOWN,this,h)))},onUp:function(h){this.originalEvent=h,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=h.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(u.UP,this,h))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});m.exports=l},46032:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};m.exports=E},74600:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(46032),S={};for(var u in d)S[d[u]]=u;m.exports=S},41170:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){d===void 0&&(d=50);var S=i.plugin.game.loop.time-i.timeUp;return i.isUp&&S<d};m.exports=E},85098:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(89357),u=i(8214),l=i(29747),h=new d({initialize:function(o){this.manager=o,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=l,this.onMouseDown=l,this.onMouseUp=l,this.onMouseDownWindow=l,this.onMouseUpWindow=l,this.onMouseOver=l,this.onMouseOut=l,this.onMouseWheel=l,this.pointerLockChange=l,this.isTop=!0,o.events.once(u.MANAGER_BOOT,this.boot,this)},boot:function(){var r=this.manager.config;this.enabled=r.inputMouse,this.target=r.inputMouseEventTarget,this.passive=r.inputMousePassive,this.preventDefaultDown=r.inputMousePreventDefaultDown,this.preventDefaultUp=r.inputMousePreventDefaultUp,this.preventDefaultMove=r.inputMousePreventDefaultMove,this.preventDefaultWheel=r.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,r.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(r){return r.preventDefault(),!1}),this},requestPointerLock:function(){if(S.pointerLock){var r=this.target;r.requestPointerLock=r.requestPointerLock||r.mozRequestPointerLock||r.webkitRequestPointerLock,r.requestPointerLock()}},releasePointerLock:function(){S.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var r=this.target;if(r){var o=this,p=this.manager,a=p.canvas,v=window&&window.focus&&p.game.config.autoFocus;this.onMouseMove=function(g){!g.defaultPrevented&&o.enabled&&p&&p.enabled&&(p.onMouseMove(g),o.preventDefaultMove&&g.preventDefault())},this.onMouseDown=function(g){v&&window.focus(),!g.defaultPrevented&&o.enabled&&p&&p.enabled&&(p.onMouseDown(g),o.preventDefaultDown&&g.target===a&&g.preventDefault())},this.onMouseDownWindow=function(g){g.sourceCapabilities&&g.sourceCapabilities.firesTouchEvents||!g.defaultPrevented&&o.enabled&&p&&p.enabled&&g.target!==a&&p.onMouseDown(g)},this.onMouseUp=function(g){!g.defaultPrevented&&o.enabled&&p&&p.enabled&&(p.onMouseUp(g),o.preventDefaultUp&&g.target===a&&g.preventDefault())},this.onMouseUpWindow=function(g){g.sourceCapabilities&&g.sourceCapabilities.firesTouchEvents||!g.defaultPrevented&&o.enabled&&p&&p.enabled&&g.target!==a&&p.onMouseUp(g)},this.onMouseOver=function(g){!g.defaultPrevented&&o.enabled&&p&&p.enabled&&p.setCanvasOver(g)},this.onMouseOut=function(g){!g.defaultPrevented&&o.enabled&&p&&p.enabled&&p.setCanvasOut(g)},this.onMouseWheel=function(g){!g.defaultPrevented&&o.enabled&&p&&p.enabled&&p.onMouseWheel(g),o.preventDefaultWheel&&g.target===a&&g.preventDefault()};var x={passive:!0};if(r.addEventListener("mousemove",this.onMouseMove),r.addEventListener("mousedown",this.onMouseDown),r.addEventListener("mouseup",this.onMouseUp),r.addEventListener("mouseover",this.onMouseOver,x),r.addEventListener("mouseout",this.onMouseOut,x),this.preventDefaultWheel?r.addEventListener("wheel",this.onMouseWheel,{passive:!1}):r.addEventListener("wheel",this.onMouseWheel,x),window&&p.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,x),window.top.addEventListener("mouseup",this.onMouseUpWindow,x)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,x),window.addEventListener("mouseup",this.onMouseUpWindow,x),this.isTop=!1}S.pointerLock&&(this.pointerLockChange=function(g){var y=o.target;o.locked=document.pointerLockElement===y||document.mozPointerLockElement===y||document.webkitPointerLockElement===y,p.onPointerLockChange(g)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var r=this.target;r.removeEventListener("mousemove",this.onMouseMove),r.removeEventListener("mousedown",this.onMouseDown),r.removeEventListener("mouseup",this.onMouseUp),r.removeEventListener("mouseover",this.onMouseOver),r.removeEventListener("mouseout",this.onMouseOut),window&&(r=this.isTop?window.top:window,r.removeEventListener("mousedown",this.onMouseDownWindow),r.removeEventListener("mouseup",this.onMouseUpWindow)),S.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});m.exports=h},87078:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={MouseManager:i(85098)}},36210:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(8214),u=i(29747),l=new d({initialize:function(r){this.manager=r,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=u,this.onTouchStartWindow=u,this.onTouchMove=u,this.onTouchEnd=u,this.onTouchEndWindow=u,this.onTouchCancel=u,this.onTouchCancelWindow=u,this.isTop=!0,r.events.once(S.MANAGER_BOOT,this.boot,this)},boot:function(){var h=this.manager.config;this.enabled=h.inputTouch,this.target=h.inputTouchEventTarget,this.capture=h.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,h.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(h){return h.preventDefault(),!1}),this},startListeners:function(){var h=this.target;if(h){var r=this,o=this.manager,p=o.canvas,a=window&&window.focus&&o.game.config.autoFocus;this.onTouchMove=function(y){!y.defaultPrevented&&r.enabled&&o&&o.enabled&&(o.onTouchMove(y),r.capture&&y.cancelable&&y.preventDefault())},this.onTouchStart=function(y){a&&window.focus(),!y.defaultPrevented&&r.enabled&&o&&o.enabled&&(o.onTouchStart(y),r.capture&&y.cancelable&&y.target===p&&y.preventDefault())},this.onTouchStartWindow=function(y){!y.defaultPrevented&&r.enabled&&o&&o.enabled&&y.target!==p&&o.onTouchStart(y)},this.onTouchEnd=function(y){!y.defaultPrevented&&r.enabled&&o&&o.enabled&&(o.onTouchEnd(y),r.capture&&y.cancelable&&y.target===p&&y.preventDefault())},this.onTouchEndWindow=function(y){!y.defaultPrevented&&r.enabled&&o&&o.enabled&&y.target!==p&&o.onTouchEnd(y)},this.onTouchCancel=function(y){!y.defaultPrevented&&r.enabled&&o&&o.enabled&&(o.onTouchCancel(y),r.capture&&y.preventDefault())},this.onTouchCancelWindow=function(y){!y.defaultPrevented&&r.enabled&&o&&o.enabled&&o.onTouchCancel(y)};var v=this.capture,x={passive:!0},g={passive:!1};if(h.addEventListener("touchstart",this.onTouchStart,v?g:x),h.addEventListener("touchmove",this.onTouchMove,v?g:x),h.addEventListener("touchend",this.onTouchEnd,v?g:x),h.addEventListener("touchcancel",this.onTouchCancel,v?g:x),window&&o.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,g),window.top.addEventListener("touchend",this.onTouchEndWindow,g),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,g)}catch{window.addEventListener("touchstart",this.onTouchStartWindow,g),window.addEventListener("touchend",this.onTouchEndWindow,g),window.addEventListener("touchcancel",this.onTouchCancelWindow,g),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var h=this.target;h.removeEventListener("touchstart",this.onTouchStart),h.removeEventListener("touchmove",this.onTouchMove),h.removeEventListener("touchend",this.onTouchEnd),h.removeEventListener("touchcancel",this.onTouchCancel),window&&(h=this.isTop?window.top:window,h.removeEventListener("touchstart",this.onTouchStartWindow),h.removeEventListener("touchend",this.onTouchEndWindow),h.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});m.exports=l},95618:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={TouchManager:i(36210)}},41299:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(23906),u=i(54899),l=i(95540),h=i(98356),r=i(3374),o=i(84376),p=i(92638),a=new d({initialize:function(x,g){if(this.loader=x,this.cache=l(g,"cache",!1),this.type=l(g,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=l(g,"key",!1);var y=this.key;if(x.prefix&&x.prefix!==""&&(this.key=x.prefix+y),!this.key)throw new Error("Invalid File key: "+this.key);var T=l(g,"url");T===void 0?T=x.path+y+"."+l(g,"extension",""):typeof T=="string"&&!T.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(T=x.path+T),this.url=T,this.src="",this.xhrSettings=p(l(g,"responseType",void 0)),l(g,"xhrSettings",!1)&&(this.xhrSettings=r(this.xhrSettings,l(g,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?S.FILE_POPULATED:S.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=l(g,"config",{}),this.multiFile,this.linkFile,this.base64=typeof T=="string"&&T.indexOf("data:")===0,this.retryAttempts=l(g,"maxRetries",x.maxRetries)},setLink:function(v){this.linkFile=v,v.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){if(this.state===S.FILE_POPULATED)this.loader.nextFile(this,!0);else{if(this.state=S.FILE_LOADING,this.src=h(this,this.loader.baseURL),!this.src)throw new Error("URL Error in File: "+this.key+" from: "+this.url);this.src.indexOf("data:")===0&&(this.base64=!0),this.xhrLoader=o(this,this.loader.xhr)}},onLoad:function(v,x){var g=v.responseURL&&this.loader.localSchemes.some(function(P){return v.responseURL.indexOf(P)===0}),y=g&&x.target.status===0,T=!(x.target&&x.target.status!==200)||y;v.readyState===4&&v.status>=400&&v.status<=599&&(T=!1),this.state=S.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,T)},onBase64Load:function(v){this.xhrLoader=v,this.state=S.FILE_LOADED,this.percentComplete=1,this.loader.emit(u.FILE_PROGRESS,this,this.percentComplete),this.loader.nextFile(this,!0)},onError:function(){this.resetXHR(),this.retryAttempts>0?(this.retryAttempts--,this.load()):this.loader.nextFile(this,!1)},onProgress:function(v){v.lengthComputable&&(this.bytesLoaded=v.loaded,this.bytesTotal=v.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(u.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=S.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=S.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=S.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(v){if(this.state!==S.FILE_PENDING_DESTROY){v===void 0&&(v=this.data);var x=this.key,g=this.type;this.loader.emit(u.FILE_COMPLETE,x,g,v),this.loader.emit(u.FILE_KEY_COMPLETE+g+"-"+x,x,g,v),this.loader.flagForRemoval(this),this.state=S.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});a.createObjectURL=function(v,x,g){if(typeof URL=="function")v.src=URL.createObjectURL(x);else{var y=new FileReader;y.onload=function(){v.removeAttribute("crossOrigin"),v.src="data:"+(x.type||g)+";base64,"+y.result.split(",")[1]},y.onerror=v.onerror,y.readAsDataURL(x)}},a.revokeObjectURL=function(v){typeof URL=="function"&&URL.revokeObjectURL(v.src)},m.exports=a},74099:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={},i={install:function(d){for(var S in E)d[S]=E[S]},register:function(d,S){E[d]=S},destroy:function(){E={}}};m.exports=i},98356:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return i.url?i.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?i.url:d+i.url:!1};m.exports=E},74261:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(23906),u=i(35072),l=i(50792),h=i(54899),r=i(74099),o=i(95540),p=i(35154),a=i(41212),v=i(37277),x=i(44594),g=i(92638),y=new d({Extends:l,initialize:function(P){l.call(this);var A=P.sys.game.config,b=P.sys.settings.loader;this.scene=P,this.systems=P.sys,this.cacheManager=P.sys.cache,this.textureManager=P.sys.textures,this.sceneManager=P.sys.game.scene,r.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(o(b,"baseURL",A.loaderBaseURL)),this.setPath(o(b,"path",A.loaderPath)),this.setPrefix(o(b,"prefix",A.loaderPrefix)),this.maxParallelDownloads=o(b,"maxParallelDownloads",A.loaderMaxParallelDownloads),this.xhr=g(o(b,"responseType",A.loaderResponseType),o(b,"async",A.loaderAsync),o(b,"user",A.loaderUser),o(b,"password",A.loaderPassword),o(b,"timeout",A.loaderTimeout),o(b,"withCredentials",A.loaderWithCredentials)),this.crossOrigin=o(b,"crossOrigin",A.loaderCrossOrigin),this.imageLoadType=o(b,"imageLoadType",A.loaderImageLoadType),this.localSchemes=o(b,"localScheme",A.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new u,this.inflight=new u,this.queue=new u,this._deleteQueue=new u,this.totalFailed=0,this.totalComplete=0,this.state=S.LOADER_IDLE,this.multiKeyIndex=0,this.maxRetries=o(b,"maxRetries",A.loaderMaxRetries),P.sys.events.once(x.BOOT,this.boot,this),P.sys.events.on(x.START,this.pluginStart,this)},boot:function(){this.systems.events.once(x.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(x.SHUTDOWN,this.shutdown,this)},setBaseURL:function(T){return T===void 0&&(T=""),T!==""&&T.substr(-1)!=="/"&&(T=T.concat("/")),this.baseURL=T,this},setPath:function(T){return T===void 0&&(T=""),T!==""&&T.substr(-1)!=="/"&&(T=T.concat("/")),this.path=T,this},setPrefix:function(T){return T===void 0&&(T=""),this.prefix=T,this},setCORS:function(T){return this.crossOrigin=T,this},addFile:function(T){Array.isArray(T)||(T=[T]);for(var P=0;P<T.length;P++){var A=T[P];this.keyExists(A)||(this.list.set(A),this.emit(h.ADD,A.key,A.type,this,A),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(T){var P=T.hasCacheConflict();return P||this.list.iterate(function(A){if(A.type===T.type&&A.key===T.key)return P=!0,!1}),!P&&this.isLoading()&&(this.inflight.iterate(function(A){if(A.type===T.type&&A.key===T.key)return P=!0,!1}),this.queue.iterate(function(A){if(A.type===T.type&&A.key===T.key)return P=!0,!1})),P},addPack:function(T,P){if(typeof P=="string"){var A=p(T,P);A&&(T={packKey:A})}var b=0,O=this.baseURL,D=this.path,B=this.prefix;for(var G in T)if(Object.prototype.hasOwnProperty.call(T,G)){var V=T[G],k=o(V,"baseURL",O),U=o(V,"path",D),W=o(V,"prefix",B),X=o(V,"files",null),_=o(V,"defaultType","void");if(Array.isArray(X)){this.setBaseURL(k),this.setPath(U),this.setPrefix(W);for(var Q=0;Q<X.length;Q++){var j=X[Q],it=j.hasOwnProperty("type")?j.type:_;this[it]&&(this[it](j),b++)}}}return this.setBaseURL(O),this.setPath(D),this.setPrefix(B),b>0},removePack:function(T,P){var A=this.systems.anims,b=this.cacheManager,O=this.textureManager,D={animation:"json",aseprite:"json",audio:"audio",audioSprite:"audio",binary:"binary",bitmapFont:"bitmapFont",css:null,glsl:"shader",html:"html",json:"json",obj:"obj",plugin:null,scenePlugin:null,script:null,spine:"json",text:"text",tilemapCSV:"tilemap",tilemapImpact:"tilemap",tilemapTiledJSON:"tilemap",video:"video",xml:"xml"},B;if(a(T))B=T;else if(B=b.json.get(T),!B){console.warn("Asset Pack not found in JSON cache:",T);return}P&&(B={_:B[P]});for(var G in B){var V=B[G],k=o(V,"prefix",""),U=o(V,"files"),W=o(V,"defaultType");if(Array.isArray(U))for(var X=0;X<U.length;X++){var _=U[X],Q=_.hasOwnProperty("type")?_.type:W;if(!Q){console.warn("No type:",_);continue}var j=k+_.key;if(Q==="animation"&&A.remove(j),!((Q==="aseprite"||Q==="atlas"||Q==="atlasXML"||Q==="htmlTexture"||Q==="image"||Q==="multiatlas"||Q==="spritesheet"||Q==="svg"||Q==="texture"||Q==="unityAtlas")&&(O.remove(j),!D[Q]))){if(Q==="pack"){this.removePack(j,_.dataKey);continue}if(Q==="spine"){var it=b.custom.spine.get(j);if(!it)continue;var K=it.prefix===void 0?"":it.prefix;b.custom.spine.remove(j);var J=b.custom.spineTextures.get(j);if(!J)continue;b.custom.spineTextures.remove(j);for(var Y=0;Y<J.pages.length;Y++){var q=J.pages[Y],$=K+q.name,et=j+":"+$;O.exists(et)?O.remove(et):O.remove($)}}var rt=D[Q];if(rt!==null){if(!rt){console.warn("Unknown type:",Q);continue}var at=b[rt];at.remove(j)}}}}},isLoading:function(){return this.state===S.LOADER_LOADING||this.state===S.LOADER_PROCESSING},isReady:function(){return this.state===S.LOADER_IDLE||this.state===S.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(h.START,this),this.list.size===0?this.loadComplete():(this.state=S.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(x.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(h.PROGRESS,this.progress)},update:function(){this.state===S.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(T){if((T.state===S.FILE_POPULATED||T.state===S.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(T),this.list.delete(T),T.crossOrigin||(T.crossOrigin=this.crossOrigin),T.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(T,P){this.inflight&&(this.inflight.delete(T),this.updateProgress(),P?(this.totalComplete++,this.queue.set(T),this.emit(h.FILE_LOAD,T),T.onProcess()):(this.totalFailed++,this._deleteQueue.set(T),this.emit(h.FILE_LOAD_ERROR,T),this.fileProcessComplete(T)))},fileProcessComplete:function(T){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(T.state===S.FILE_ERRORED?T.multiFile&&T.multiFile.onFileFailed(T):T.state===S.FILE_COMPLETE&&(T.multiFile?T.multiFile.isReadyToProcess()&&(T.multiFile.addToCache(),T.multiFile.pendingDestroy()):(T.addToCache(),T.pendingDestroy())),this.queue.delete(T),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(h.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=S.LOADER_COMPLETE,this.systems.events.off(x.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(h.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(T){this._deleteQueue.set(T)},saveJSON:function(T,P){return this.save(JSON.stringify(T),P)},save:function(T,P,A){P===void 0&&(P="file.json"),A===void 0&&(A="application/json");var b=new Blob([T],{type:A}),O=URL.createObjectURL(b),D=document.createElement("a");return D.download=P,D.textContent="Download "+P,D.href=O,D.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var T=this.systems.game.config,P=this.systems.settings.loader;this.setBaseURL(o(P,"baseURL",T.loaderBaseURL)),this.setPath(o(P,"path",T.loaderPath)),this.setPrefix(o(P,"prefix",T.loaderPrefix)),this.state=S.LOADER_IDLE},shutdown:function(){this.reset(),this.state=S.LOADER_SHUTDOWN,this.removeAllListeners(),this.systems.events.off(x.UPDATE,this.update,this),this.systems.events.off(x.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=S.LOADER_DESTROYED,this.systems.events.off(x.UPDATE,this.update,this),this.systems.events.off(x.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});v.register("Loader",y,"load"),m.exports=y},3374:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(79291),S=i(92638),u=function(l,h){var r=l===void 0?S():d({},l);if(h)for(var o in h)h[o]!==void 0&&(r[o]=h[o]);return r};m.exports=u},26430:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(23906),u=i(54899),l=new d({initialize:function(r,o,p,a){var v=[];a.forEach(function(y){y&&v.push(y)}),this.loader=r,this.type=o,this.key=p;var x=this.key;r.prefix&&r.prefix!==""&&(this.key=r.prefix+x),this.multiKeyIndex=r.multiKeyIndex++,this.files=v,this.state=S.FILE_PENDING,this.complete=!1,this.pending=v.length,this.failed=0,this.config={},this.baseURL=r.baseURL,this.path=r.path,this.prefix=r.prefix;for(var g=0;g<v.length;g++)v[g].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(h){return this.files.push(h),h.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(h){var r=this.files.indexOf(h);r!==-1&&this.pending--},onFileFailed:function(h){var r=this.files.indexOf(h);r!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,h.type,h.key))},pendingDestroy:function(){if(this.state!==S.FILE_PENDING_DESTROY){var h=this.key,r=this.type;this.loader.emit(u.FILE_COMPLETE,h,r),this.loader.emit(u.FILE_KEY_COMPLETE+r+"-"+h,h,r),this.loader.flagForRemoval(this);for(var o=0;o<this.files.length;o++)this.files[o].pendingDestroy();this.state=S.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});m.exports=l},84376:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(3374),S=function(u,l){var h=d(l,u.xhrSettings);if(u.base64){var r=u.url.split(";base64,").pop()||u.url.split(",").pop(),o;u.xhrSettings.responseType==="arraybuffer"?o={response:Uint8Array.from(atob(r),function(v){return v.charCodeAt(0)}).buffer}:o={responseText:atob(r)},u.onBase64Load(o);return}var p=new XMLHttpRequest;if(p.open("GET",u.src,h.async,h.user,h.password),p.responseType=u.xhrSettings.responseType,p.timeout=h.timeout,h.headers)for(var a in h.headers)p.setRequestHeader(a,h.headers[a]);return h.header&&h.headerValue&&p.setRequestHeader(h.header,h.headerValue),h.requestedWith&&p.setRequestHeader("X-Requested-With",h.requestedWith),h.overrideMimeType&&p.overrideMimeType(h.overrideMimeType),h.withCredentials&&(p.withCredentials=!0),p.onload=u.onLoad.bind(u,p),p.onerror=u.onError.bind(u,p),p.onprogress=u.onProgress.bind(u),p.ontimeout=u.onError.bind(u,p),p.send(),p};m.exports=S},92638:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u,l,h){return i===void 0&&(i=""),d===void 0&&(d=!0),S===void 0&&(S=""),u===void 0&&(u=""),l===void 0&&(l=0),h===void 0&&(h=!1),{responseType:i,async:d,user:S,password:u,timeout:l,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:h}};m.exports=E},23906:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20};m.exports=E},42155:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="addfile"},38991:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="complete"},27540:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="filecomplete"},87464:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="filecomplete-"},94486:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="loaderror"},13035:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="load"},38144:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="fileprogress"},97520:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="postprocess"},85595:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="progress"},55680:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="start"},54899:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={ADD:i(42155),COMPLETE:i(38991),FILE_COMPLETE:i(27540),FILE_KEY_COMPLETE:i(87464),FILE_LOAD_ERROR:i(94486),FILE_LOAD:i(13035),FILE_PROGRESS:i(38144),POST_PROCESS:i(97520),PROGRESS:i(85595),START:i(55680)}},14135:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(74099),u=i(518),l=i(54899),h=new d({Extends:u,initialize:function(o,p,a,v,x){u.call(this,o,p,a,v,x),this.type="animationJSON"},onProcess:function(){this.loader.once(l.POST_PROCESS,this.onLoadComplete,this),u.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});S.register("animation",function(r,o,p,a){if(Array.isArray(r))for(var v=0;v<r.length;v++)this.addFile(new h(this,r[v]));else this.addFile(new h(this,r,o,a,p));return this}),m.exports=h},76272:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(74099),u=i(95540),l=i(19550),h=i(41212),r=i(518),o=i(26430),p=new d({Extends:o,initialize:function(v,x,g,y,T,P){var A,b;if(h(x)){var O=x;x=u(O,"key"),A=new l(v,{key:x,url:u(O,"textureURL"),extension:u(O,"textureExtension","png"),normalMap:u(O,"normalMap"),xhrSettings:u(O,"textureXhrSettings")}),b=new r(v,{key:x,url:u(O,"atlasURL"),extension:u(O,"atlasExtension","json"),xhrSettings:u(O,"atlasXhrSettings")})}else A=new l(v,x,g,T),b=new r(v,x,y,P);A.linkFile?o.call(this,v,"atlasjson",x,[A,b,A.linkFile]):o.call(this,v,"atlasjson",x,[A,b])},addToCache:function(){if(this.isReadyToProcess()){var a=this.files[0],v=this.files[1],x=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(a.key,a.data,v.data,x),v.addToCache(),this.complete=!0}}});S.register("aseprite",function(a,v,x,g,y){var T;if(Array.isArray(a))for(var P=0;P<a.length;P++)T=new p(this,a[P]),this.addFile(T.files);else T=new p(this,a,v,x,g,y),this.addFile(T.files);return this}),m.exports=p},38734:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(74099),u=i(95540),l=i(19550),h=i(41212),r=i(518),o=i(26430),p=new d({Extends:o,initialize:function(v,x,g,y,T,P){var A,b;if(h(x)){var O=x;x=u(O,"key"),A=new l(v,{key:x,url:u(O,"textureURL"),extension:u(O,"textureExtension","png"),normalMap:u(O,"normalMap"),xhrSettings:u(O,"textureXhrSettings")}),b=new r(v,{key:x,url:u(O,"atlasURL"),extension:u(O,"atlasExtension","json"),xhrSettings:u(O,"atlasXhrSettings")})}else A=new l(v,x,g,T),b=new r(v,x,y,P);A.linkFile?o.call(this,v,"atlasjson",x,[A,b,A.linkFile]):o.call(this,v,"atlasjson",x,[A,b])},addToCache:function(){if(this.isReadyToProcess()){var a=this.files[0],v=this.files[1],x=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(a.key,a.data,v.data,x),this.complete=!0}}});S.register("atlas",function(a,v,x,g,y){var T;if(Array.isArray(a))for(var P=0;P<a.length;P++)T=new p(this,a[P]),this.addFile(T.files);else T=new p(this,a,v,x,g,y),this.addFile(T.files);return this}),m.exports=p},74599:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(74099),u=i(95540),l=i(19550),h=i(41212),r=i(26430),o=i(57318),p=new d({Extends:r,initialize:function(v,x,g,y,T,P){var A,b;if(h(x)){var O=x;x=u(O,"key"),A=new l(v,{key:x,url:u(O,"textureURL"),extension:u(O,"textureExtension","png"),normalMap:u(O,"normalMap"),xhrSettings:u(O,"textureXhrSettings")}),b=new o(v,{key:x,url:u(O,"atlasURL"),extension:u(O,"atlasExtension","xml"),xhrSettings:u(O,"atlasXhrSettings")})}else A=new l(v,x,g,T),b=new o(v,x,y,P);A.linkFile?r.call(this,v,"atlasxml",x,[A,b,A.linkFile]):r.call(this,v,"atlasxml",x,[A,b])},addToCache:function(){if(this.isReadyToProcess()){var a=this.files[0],v=this.files[1],x=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(a.key,a.data,v.data,x),this.complete=!0}}});S.register("atlasXML",function(a,v,x,g,y){var T;if(Array.isArray(a))for(var P=0;P<a.length;P++)T=new p(this,a[P]),this.addFile(T.files);else T=new p(this,a,v,x,g,y),this.addFile(T.files);return this}),m.exports=p},21097:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(23906),u=i(41299),l=i(74099),h=i(95540),r=i(89749),o=i(41212),p=new d({Extends:u,initialize:function(v,x,g,y,T){if(o(x)){var P=x;x=h(P,"key"),y=h(P,"xhrSettings"),T=h(P,"context",T)}var A={type:"audio",cache:v.cacheManager.audio,extension:g.type,responseType:"arraybuffer",key:x,url:g.url,xhrSettings:y,config:{context:T}};u.call(this,v,A)},onProcess:function(){this.state=S.FILE_PROCESSING;var a=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(v){a.data=v,a.onProcessComplete()},function(v){console.error("Error decoding audio: "+a.key+" - ",v?v.message:null),a.onProcessError()}),this.config.context=null}});p.create=function(a,v,x,g,y){var T=a.systems.game,P=T.config.audio,A=T.device.audio;o(v)&&(x=h(v,"url",[]),g=h(v,"config",{}));var b=p.getAudioURL(T,x);return b?A.webAudio&&!P.disableWebAudio?new p(a,v,b,y,T.sound.context):new r(a,v,b,g):(console.warn('No audio URLs for "%s" can play on this device',v),null)},p.getAudioURL=function(a,v){Array.isArray(v)||(v=[v]);for(var x=0;x<v.length;x++){var g=h(v[x],"url",v[x]);if(g.indexOf("blob:")===0||g.indexOf("data:")===0)return{url:g,type:""};var y=g.match(/\.([a-zA-Z0-9]+)($|\?)/);if(y=h(v[x],"type",y?y[1]:"").toLowerCase(),a.device.audio[y])return{url:g,type:y}}return null},l.register("audio",function(a,v,x,g){var y=this.systems.game,T=y.config.audio,P=y.device.audio;if(T.noAudio||!P.webAudio&&!P.audioData)return this;var A;if(Array.isArray(a))for(var b=0;b<a.length;b++)A=p.create(this,a[b]),A&&this.addFile(A);else A=p.create(this,a,v,x,g),A&&this.addFile(A);return this}),m.exports=p},89524:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(21097),S=i(83419),u=i(74099),l=i(95540),h=i(41212),r=i(518),o=i(26430),p=new S({Extends:o,initialize:function(v,x,g,y,T,P,A){if(h(x)){var b=x;x=l(b,"key"),g=l(b,"jsonURL"),y=l(b,"audioURL"),T=l(b,"audioConfig"),P=l(b,"audioXhrSettings"),A=l(b,"jsonXhrSettings")}var O;if(!y)O=new r(v,x,g,A),o.call(this,v,"audiosprite",x,[O]),this.config.resourceLoad=!0,this.config.audioConfig=T,this.config.audioXhrSettings=P;else{var D=d.create(v,x,y,T,P);D&&(O=new r(v,x,g,A),o.call(this,v,"audiosprite",x,[D,O]),this.config.resourceLoad=!1)}},onFileComplete:function(a){var v=this.files.indexOf(a);if(v!==-1&&(this.pending--,this.config.resourceLoad&&a.type==="json"&&a.data.hasOwnProperty("resources"))){var x=a.data.resources,g=l(this.config,"audioConfig"),y=l(this.config,"audioXhrSettings"),T=d.create(this.loader,a.key,x,g,y);T&&(this.addToMultiFile(T),this.loader.addFile(T))}},addToCache:function(){if(this.isReadyToProcess()){var a=this.files[0],v=this.files[1];a.addToCache(),v.addToCache(),this.complete=!0}}});u.register("audioSprite",function(a,v,x,g,y,T){var P=this.systems.game,A=P.config.audio,b=P.device.audio;if(A&&A.noAudio||!b.webAudio&&!b.audioData)return this;var O;if(Array.isArray(a))for(var D=0;D<a.length;D++)O=new p(this,a[D]),O.files&&this.addFile(O.files);else O=new p(this,a,v,x,g,y,T),O.files&&this.addFile(O.files);return this})},85722:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(23906),u=i(41299),l=i(74099),h=i(95540),r=i(41212),o=new d({Extends:u,initialize:function(a,v,x,g,y){var T="bin";if(r(v)){var P=v;v=h(P,"key"),x=h(P,"url"),g=h(P,"xhrSettings"),T=h(P,"extension",T),y=h(P,"dataType",y)}var A={type:"binary",cache:a.cacheManager.binary,extension:T,responseType:"arraybuffer",key:v,url:x,xhrSettings:g,config:{dataType:y}};u.call(this,a,A)},onProcess:function(){this.state=S.FILE_PROCESSING;var p=this.config.dataType;this.data=p?new p(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});l.register("binary",function(p,a,v,x){if(Array.isArray(p))for(var g=0;g<p.length;g++)this.addFile(new o(this,p[g]));else this.addFile(new o(this,p,a,x,v));return this}),m.exports=o},97025:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(74099),u=i(95540),l=i(19550),h=i(41212),r=i(26430),o=i(21859),p=i(57318),a=new d({Extends:r,initialize:function(x,g,y,T,P,A){var b,O;if(h(g)){var D=g;g=u(D,"key"),b=new l(x,{key:g,url:u(D,"textureURL"),extension:u(D,"textureExtension","png"),normalMap:u(D,"normalMap"),xhrSettings:u(D,"textureXhrSettings")}),O=new p(x,{key:g,url:u(D,"fontDataURL"),extension:u(D,"fontDataExtension","xml"),xhrSettings:u(D,"fontDataXhrSettings")})}else b=new l(x,g,y,P),O=new p(x,g,T,A);b.linkFile?r.call(this,x,"bitmapfont",g,[b,O,b.linkFile]):r.call(this,x,"bitmapfont",g,[b,O])},addToCache:function(){if(this.isReadyToProcess()){var v=this.files[0],x=this.files[1];v.addToCache();var g=v.cache.get(v.key),y=o(x.data,v.cache.getFrame(v.key),0,0,g);this.loader.cacheManager.bitmapFont.add(v.key,{data:y,texture:v.key,frame:null}),this.complete=!0}}});S.register("bitmapFont",function(v,x,g,y,T){var P;if(Array.isArray(v))for(var A=0;A<v.length;A++)P=new a(this,v[A]),this.addFile(P.files);else P=new a(this,v,x,g,y,T),this.addFile(P.files);return this}),m.exports=a},16024:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(23906),u=i(41299),l=i(74099),h=i(95540),r=i(41212),o=new d({Extends:u,initialize:function(a,v,x,g){var y="css";if(r(v)){var T=v;v=h(T,"key"),x=h(T,"url"),g=h(T,"xhrSettings"),y=h(T,"extension",y)}var P={type:"script",cache:!1,extension:y,responseType:"text",key:v,url:x,xhrSettings:g};u.call(this,a,P)},onProcess:function(){this.state=S.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});l.register("css",function(p,a,v){if(Array.isArray(p))for(var x=0;x<p.length;x++)this.addFile(new o(this,p[x]));else this.addFile(new o(this,p,a,v));return this}),m.exports=o},69559:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(38734),S=i(85722),u=i(83419),l=i(74099),h=i(95540),r=i(19550),o=i(41212),p=i(518),a=i(31403),v=i(46975),x=i(59327),g=i(26430),y=i(82038),T=i(55222),P=new u({Extends:g,initialize:function(b,O,D,B){if(D.multiAtlasURL){var G=new p(b,{key:O,url:D.multiAtlasURL,xhrSettings:B,config:D});g.call(this,b,"texture",O,[G])}else{var V=D.textureURL.substr(D.textureURL.length-3);D.type||(D.type=V.toLowerCase()==="ktx"?"KTX":"PVR");var k=new S(b,{key:O,url:D.textureURL,extension:V,xhrSettings:B,config:D});if(D.atlasURL){var U=new p(b,{key:O,url:D.atlasURL,xhrSettings:B,config:D});g.call(this,b,"texture",O,[k,U])}else g.call(this,b,"texture",O,[k])}this.config=D},onFileComplete:function(A){var b=this.files.indexOf(A);if(b!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(A.type==="json"&&A.data.hasOwnProperty("textures")){var O=A.data.textures,D=this.config,B=this.loader,G=B.baseURL,V=B.path,k=B.prefix,U=h(D,"multiBaseURL",this.baseURL),W=h(D,"multiPath",this.path),X=h(D,"prefix",this.prefix),_=h(D,"textureXhrSettings");U&&B.setBaseURL(U),W&&B.setPath(W),X&&B.setPrefix(X);for(var Q=0;Q<O.length;Q++){var j=O[Q].image,it="CMA"+this.multiKeyIndex+"_"+j,K=new S(B,it,j,_);if(this.addToMultiFile(K),B.addFile(K),O[Q].normalMap){var J=new S(B,it,O[Q].normalMap,_);J.type="normalMap",K.setLink(J),this.addToMultiFile(J),B.addFile(J)}}B.setBaseURL(G),B.setPath(V),B.setPrefix(k)}}},addToCache:function(){function A(U){console.warn('Compressed Texture Invalid: "'+G.key+'". '+U)}if(this.isReadyToProcess()){var b=this.config;if(b.multiAtlasURL)this.addMultiToCache();else{var O=this.loader.systems.renderer,D=this.loader.textureManager,B,G=this.files[0],V=this.files[1];if(b.type==="PVR"?B=y(G.data):b.type==="KTX"&&(B=a(G.data),B||A("KTX file contains unsupported format.")),B&&!T(B)&&(A("Texture dimensions failed verification. Check the texture format specifications for "+b.format+" 0x"+B.internalFormat.toString(16)+"."),B=null),B&&!O.supportsCompressedTexture(b.format,B.internalFormat)&&(A("Texture format "+b.format+" with internal format "+B.internalFormat+" not supported by the GPU. Texture invalid. This is often due to the texture using sRGB instead of linear RGB."),B=null),B){B.format=O.getCompressedTextureName(b.format,B.internalFormat);var k=V&&V.data?V.data:null;D.addCompressedTexture(G.key,B,k)}}this.complete=!0}},addMultiToCache:function(){for(var A=this.config,b=this.files[0],O=[],D=[],B=[],G=this.loader.systems.renderer,V=this.loader.textureManager,k,U=1;U<this.files.length;U++){var W=this.files[U];if(W.type!=="normalMap")for(var X=W.key.indexOf("_"),_=W.key.substr(X+1),Q=W.data,j=0;j<b.data.textures.length;j++){var it=b.data.textures[j];if(it.image===_){A.type==="PVR"?k=y(Q):A.type==="KTX"&&(k=a(Q)),k&&G.supportsCompressedTexture(A.format,k.internalFormat)&&(k.format=G.getCompressedTextureName(A.format,k.internalFormat),D.push(k),O.push(it),W.linkFile&&B.push(W.linkFile.data));break}}}B.length===0&&(B=void 0),V.addAtlasJSONArray(this.key,D,O,B),this.complete=!0}});l.register("texture",function(A,b,O){var D=this.systems.renderer,B=function(V,k,U,W){var X={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(o(k)){var _=k;k=h(_,"key"),U=h(_,"url"),W=h(_,"xhrSettings")}var Q=!1;for(var j in U)if(D.supportsCompressedTexture(j)){var it=U[j];typeof it=="string"?X.textureURL=it:X=v(it,X),X.format=j.toUpperCase(),Q=!0;break}if(!Q)console.warn("No supported compressed texture format or IMG fallback",k);else if(X.format==="IMG"){var K,J;X.multiAtlasURL?(J=new x(V,k,X.multiAtlasURL,X.multiPath,X.multiBaseURL,W),K=J.files):X.atlasURL?(J=new d(V,k,X.textureURL,X.atlasURL,W),K=J.files):K=new r(V,k,X.textureURL,W),V.addFile(K)}else{var Y=new P(V,k,X,W);V.addFile(Y.files)}};if(Array.isArray(A))for(var G=0;G<A.length;G++)B(this,A[G]);else B(this,A,b,O);return this}),m.exports=P},87674:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(23906),u=i(41299),l=i(74099),h=i(95540),r=i(98356),o=i(41212),p=new d({Extends:u,initialize:function(v,x,g,y,T,P){var A="ttf";if(o(x)){var b=x;x=h(b,"key"),g=h(b,"url"),y=h(b,"format","truetype"),T=h(b,"descriptors",null),P=h(b,"xhrSettings"),A=h(b,"extension",A)}else y===void 0&&(y="truetype");var O={type:"font",cache:!1,extension:A,responseType:"text",key:x,url:g,xhrSettings:P};u.call(this,v,O),this.data={format:y,descriptors:T},this.state=S.FILE_POPULATED},onProcess:function(){this.state=S.FILE_PROCESSING,this.src=r(this,this.loader.baseURL);var a,v=this.key,x="url("+this.src+') format("'+this.data.format+'")';this.data.descriptors?a=new FontFace(v,x,this.data.descriptors):a=new FontFace(v,x);var g=this;a.load().then(function(){document.fonts.add(a),document.body.classList.add("fonts-loaded"),g.onProcessComplete()}).catch(function(){console.warn("Font failed to load",x),g.onProcessComplete()})}});l.register("font",function(a,v,x,g,y){if(Array.isArray(a))for(var T=0;T<a.length;T++)this.addFile(new p(this,a[T]));else this.addFile(new p(this,a,v,x,g,y));return this}),m.exports=p},47931:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(23906),u=i(41299),l=i(74099),h=i(95540),r=i(41212),o=i(73894),p=new d({Extends:u,initialize:function(v,x,g,y,T){var P="glsl";if(r(x)){var A=x;x=h(A,"key"),g=h(A,"url"),y=h(A,"shaderType","fragment"),T=h(A,"xhrSettings"),P=h(A,"extension",P)}else y===void 0&&(y="fragment");var b={type:"glsl",cache:v.cacheManager.shader,extension:P,responseType:"text",key:x,url:g,config:{shaderType:y},xhrSettings:T};u.call(this,v,b)},onProcess:function(){this.state=S.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var a=this.data.split(`
`),v=this.extractBlock(a,0);if(v)for(;v;){var x=this.getShaderName(v.header),g=this.getShaderType(v.header),y=this.getShaderUniforms(v.header),T=v.shader;if(this.cache.has(x)){var P=this.cache.get(x);g==="fragment"?P.fragmentSrc=T:P.vertexSrc=T,P.uniforms||(P.uniforms=y)}else g==="fragment"?this.cache.add(x,new o(x,T,"",y)):this.cache.add(x,new o(x,"",T,y));v=this.extractBlock(a,v.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new o(this.key,this.data)):this.cache.add(this.key,new o(this.key,"",this.data))},getShaderName:function(a){for(var v=0;v<a.length;v++){var x=a[v].trim();if(x.substring(0,5)==="name:")return x.substring(5).trim()}return this.key},getShaderType:function(a){for(var v=0;v<a.length;v++){var x=a[v].trim();if(x.substring(0,5)==="type:")return x.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(a){for(var v={},x=0;x<a.length;x++){var g=a[x].trim();if(g.substring(0,8)==="uniform."){var y=g.indexOf(":");if(y){var T=g.substring(8,y);try{v[T]=JSON.parse(g.substring(y+1))}catch{console.warn("Invalid uniform JSON: "+T)}}}}return v},extractBlock:function(a,v){for(var x=-1,g=-1,y=-1,T=!1,P=!1,A=[],b=[],O=v;O<a.length;O++){var D=a[O].trim();if(D==="---")if(x===-1)x=O,T=!0;else if(T)g=O,T=!1,P=!0;else{P=!1;break}else T?A.push(D):P&&(b.push(D),y=O)}return!T&&g!==-1?{header:A,shader:b.join(`
`),offset:y}:null}});l.register("glsl",function(a,v,x,g){if(Array.isArray(a))for(var y=0;y<a.length;y++)this.addFile(new p(this,a[y]));else this.addFile(new p(this,a,v,x,g));return this}),m.exports=p},89749:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(54899),u=i(41299),l=i(95540),h=i(98356),r=i(41212),o=new d({Extends:u,initialize:function(a,v,x,g){if(r(v)){var y=v;v=l(y,"key"),g=l(y,"config",g)}var T={type:"audio",cache:a.cacheManager.audio,extension:x.type,key:v,url:x.url,config:g};u.call(this,a,T),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var p=0;p<this.data.length;p++){var a=this.data[p];a.oncanplaythrough=null,a.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(p){var a=p.target;a.oncanplaythrough=null,a.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(S.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var p=this.config&&this.config.instances||1;this.filesTotal=p,this.filesLoaded=0,this.percentComplete=0;for(var a=0;a<p;a++){var v=new Audio;v.dataset||(v.dataset={}),v.dataset.name=this.key+("0"+a).slice(-2),v.dataset.used="false",this.locked?v.dataset.locked="true":(v.dataset.locked="false",v.preload="auto",v.oncanplaythrough=this.onProgress.bind(this),v.onerror=this.onError.bind(this)),this.data.push(v)}for(a=0;a<this.data.length;a++)v=this.data[a],v.src=h(this,this.loader.baseURL),this.locked||v.load();this.locked&&setTimeout(this.onLoad.bind(this))}});m.exports=o},88470:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(23906),u=i(41299),l=i(74099),h=i(95540),r=i(41212),o=new d({Extends:u,initialize:function(a,v,x,g){var y="html";if(r(v)){var T=v;v=h(T,"key"),x=h(T,"url"),g=h(T,"xhrSettings"),y=h(T,"extension",y)}var P={type:"text",cache:a.cacheManager.html,extension:y,responseType:"text",key:v,url:x,xhrSettings:g};u.call(this,a,P)},onProcess:function(){this.state=S.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});l.register("html",function(p,a,v){if(Array.isArray(p))for(var x=0;x<p.length;x++)this.addFile(new o(this,p[x]));else this.addFile(new o(this,p,a,v));return this}),m.exports=o},14643:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(23906),u=i(41299),l=i(74099),h=i(95540),r=i(41212),o=new d({Extends:u,initialize:function(a,v,x,g,y,T){g===void 0&&(g=512),y===void 0&&(y=512);var P="html";if(r(v)){var A=v;v=h(A,"key"),x=h(A,"url"),T=h(A,"xhrSettings"),P=h(A,"extension",P),g=h(A,"width",g),y=h(A,"height",y)}var b={type:"html",cache:a.textureManager,extension:P,responseType:"text",key:v,url:x,xhrSettings:T,config:{width:g,height:y}};u.call(this,a,b)},onProcess:function(){this.state=S.FILE_PROCESSING;var p=this.config.width,a=this.config.height,v=[];v.push('<svg width="'+p+'px" height="'+a+'px" viewBox="0 0 '+p+" "+a+'" xmlns="http://www.w3.org/2000/svg">'),v.push('<foreignObject width="100%" height="100%">'),v.push('<body xmlns="http://www.w3.org/1999/xhtml">'),v.push(this.xhrLoader.responseText),v.push("</body>"),v.push("</foreignObject>"),v.push("</svg>");var x=[v.join(`
`)],g=this;try{var y=new window.Blob(x,{type:"image/svg+xml;charset=utf-8"})}catch{g.state=S.FILE_ERRORED,g.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){u.revokeObjectURL(g.data),g.onProcessComplete()},this.data.onerror=function(){u.revokeObjectURL(g.data),g.onProcessError()},u.createObjectURL(this.data,y,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});l.register("htmlTexture",function(p,a,v,x,g){if(Array.isArray(p))for(var y=0;y<p.length;y++)this.addFile(new o(this,p[y]));else this.addFile(new o(this,p,a,v,x,g));return this}),m.exports=o},19550:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(23906),u=i(41299),l=i(74099),h=i(95540),r=i(41212),o=i(98356),p=new d({Extends:u,initialize:function a(v,x,g,y,T){var P="png",A;if(r(x)){var b=x;x=h(b,"key"),g=h(b,"url"),A=h(b,"normalMap"),y=h(b,"xhrSettings"),P=h(b,"extension",P),T=h(b,"frameConfig")}Array.isArray(g)&&(A=g[1],g=g[0]);var O={type:"image",cache:v.textureManager,extension:P,responseType:"blob",key:x,url:g,xhrSettings:y,config:T};if(u.call(this,v,O),A){var D=new a(v,this.key,A,y,T);D.type="normalMap",this.setLink(D),v.addFile(D)}this.useImageElementLoad=v.imageLoadType==="HTMLImageElement"||this.base64,this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=S.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var a=this;this.data.onload=function(){u.revokeObjectURL(a.data),a.onProcessComplete()},this.data.onerror=function(){u.revokeObjectURL(a.data),a.onProcessError()},u.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var a=this.state;this.state=S.FILE_PROCESSING,a===S.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){this.state=S.FILE_LOADING,this.src=o(this,this.loader.baseURL),this.data=new Image,this.data.crossOrigin=this.crossOrigin;var a=this;this.data.onload=function(){a.state=S.FILE_LOADED,a.loader.nextFile(a,!0)},this.data.onerror=function(){a.loader.nextFile(a,!1)},this.data.src=this.src},addToCache:function(){var a=this.linkFile;a?a.state>=S.FILE_COMPLETE&&(a.type==="spritesheet"?a.addToCache():this.type==="normalMap"?this.cache.addImage(this.key,a.data,this.data):this.cache.addImage(this.key,this.data,a.data)):this.cache.addImage(this.key,this.data)}});l.register("image",function(a,v,x){if(Array.isArray(a))for(var g=0;g<a.length;g++)this.addFile(new p(this,a[g]));else this.addFile(new p(this,a,v,x));return this}),m.exports=p},518:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(23906),u=i(41299),l=i(74099),h=i(95540),r=i(35154),o=i(41212),p=new d({Extends:u,initialize:function(v,x,g,y,T){var P="json";if(o(x)){var A=x;x=h(A,"key"),g=h(A,"url"),y=h(A,"xhrSettings"),P=h(A,"extension",P),T=h(A,"dataKey",T)}var b={type:"json",cache:v.cacheManager.json,extension:P,responseType:"text",key:x,url:g,xhrSettings:y,config:T};u.call(this,v,b),o(g)&&(T?this.data=r(g,T):this.data=g,this.state=S.FILE_POPULATED)},onProcess:function(){if(this.state!==S.FILE_POPULATED){this.state=S.FILE_PROCESSING;try{var a=JSON.parse(this.xhrLoader.responseText)}catch(x){throw this.onProcessError(),x}var v=this.config;typeof v=="string"?this.data=r(a,v,a):this.data=a}this.onProcessComplete()}});l.register("json",function(a,v,x,g){if(Array.isArray(a))for(var y=0;y<a.length;y++)this.addFile(new p(this,a[y]));else this.addFile(new p(this,a,v,g,x));return this}),m.exports=p},59327:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(74099),u=i(95540),l=i(19550),h=i(41212),r=i(518),o=i(26430),p=new d({Extends:o,initialize:function(v,x,g,y,T,P,A){if(h(x)){var b=x;x=u(b,"key"),u(b,"url",!1)?g=u(b,"url"):g=u(b,"atlasURL"),P=u(b,"xhrSettings"),y=u(b,"path"),T=u(b,"baseURL"),A=u(b,"textureXhrSettings")}var O=new r(v,x,g,P);o.call(this,v,"multiatlas",x,[O]),this.config.path=y,this.config.baseURL=T,this.config.textureXhrSettings=A},onFileComplete:function(a){var v=this.files.indexOf(a);if(v!==-1&&(this.pending--,a.type==="json"&&a.data.hasOwnProperty("textures"))){var x=a.data.textures,g=this.config,y=this.loader,T=y.baseURL,P=y.path,A=y.prefix,b=u(g,"baseURL",this.baseURL),O=u(g,"path",this.path),D=u(g,"prefix",this.prefix),B=u(g,"textureXhrSettings");y.setBaseURL(b),y.setPath(O),y.setPrefix(D);for(var G=0;G<x.length;G++){var V=x[G].image,k="MA"+this.multiKeyIndex+"_"+V,U=new l(y,k,V,B);if(this.addToMultiFile(U),y.addFile(U),x[G].normalMap){var W=new l(y,k,x[G].normalMap,B);W.type="normalMap",U.setLink(W),this.addToMultiFile(W),y.addFile(W)}}y.setBaseURL(T),y.setPath(P),y.setPrefix(A)}},addToCache:function(){if(this.isReadyToProcess()){for(var a=this.files[0],v=[],x=[],g=[],y=1;y<this.files.length;y++){var T=this.files[y];if(T.type!=="normalMap")for(var P=T.key.indexOf("_"),A=T.key.substr(P+1),b=T.data,O=0;O<a.data.textures.length;O++){var D=a.data.textures[O];if(D.image===A){x.push(b),v.push(D),T.linkFile&&g.push(T.linkFile.data);break}}}g.length===0&&(g=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,x,v,g),this.complete=!0}}});S.register("multiatlas",function(a,v,x,g,y){var T;if(Array.isArray(a))for(var P=0;P<a.length;P++)T=new p(this,a[P]),this.addFile(T.files);else T=new p(this,a,v,x,g,y),this.addFile(T.files);return this}),m.exports=p},99297:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(74099),u=i(95540),l=i(41212),h=i(26430),r=i(34328),o=new d({Extends:h,initialize:function(a,v,x,g){var y="js",T=[];if(l(v)){var P=v;v=u(P,"key"),x=u(P,"url"),g=u(P,"xhrSettings"),y=u(P,"extension",y)}Array.isArray(x)||(x=[x]);for(var A=0;A<x.length;A++){var b=new r(a,{key:v+"_"+A.toString(),url:x[A],extension:y,xhrSettings:g});b.onProcess=function(){this.onProcessComplete()},T.push(b)}h.call(this,a,"scripts",v,T)},addToCache:function(){if(this.isReadyToProcess()){for(var p=0;p<this.files.length;p++){var a=this.files[p];a.data=document.createElement("script"),a.data.language="javascript",a.data.type="text/javascript",a.data.defer=!1,a.data.text=a.xhrLoader.responseText,document.head.appendChild(a.data)}this.complete=!0}}});S.register("scripts",function(p,a,v){var x;if(Array.isArray(p))for(var g=0;g<p.length;g++)x=new o(this,p[g]),this.addFile(x.files);else x=new o(this,p,a,v),this.addFile(x.files);return this}),m.exports=o},41846:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(74099),u=i(95540),l=i(41212),h=i(26430),r=i(85048),o=i(61485),p=i(78776),a=new d({Extends:h,initialize:function(x,g,y,T,P,A){var b,O,D=x.cacheManager.obj;if(l(g)){var B=g;g=u(B,"key"),b=new p(x,{key:g,type:"obj",cache:D,url:u(B,"url"),extension:u(B,"extension","obj"),xhrSettings:u(B,"xhrSettings"),config:{flipUV:u(B,"flipUV",P)}}),T=u(B,"matURL"),T&&(O=new p(x,{key:g,type:"mat",cache:D,url:T,extension:u(B,"matExtension","mat"),xhrSettings:u(B,"xhrSettings")}))}else b=new p(x,{key:g,url:y,type:"obj",cache:D,extension:"obj",xhrSettings:A,config:{flipUV:P}}),T&&(O=new p(x,{key:g,url:T,type:"mat",cache:D,extension:"mat",xhrSettings:A}));h.call(this,x,"obj",g,[b,O])},addToCache:function(){if(this.isReadyToProcess()){var v=this.files[0],x=this.files[1],g=r(v.data,v.config.flipUV);x&&(g.materials=o(x.data)),v.cache.add(v.key,g),this.complete=!0}}});S.register("obj",function(v,x,g,y,T){var P;if(Array.isArray(v))for(var A=0;A<v.length;A++)P=new a(this,v[A]),this.addFile(P.files);else P=new a(this,v,x,g,y,T),this.addFile(P.files);return this}),m.exports=a},58610:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(23906),u=i(74099),l=i(518),h=new d({Extends:l,initialize:function(o,p,a,v,x){l.call(this,o,p,a,v,x),this.type="packfile"},onProcess:function(){if(this.state!==S.FILE_POPULATED&&(this.state=S.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var r={};r[this.config]=this.data,this.data=r}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});u.register("pack",function(r,o,p,a){if(Array.isArray(r))for(var v=0;v<r.length;v++)this.addFile(new h(this,r[v]));else this.addFile(new h(this,r,o,a,p));return this}),m.exports=h},48988:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(23906),u=i(41299),l=i(74099),h=i(95540),r=i(41212),o=new d({Extends:u,initialize:function(a,v,x,g,y,T){var P="js";if(r(v)){var A=v;v=h(A,"key"),x=h(A,"url"),T=h(A,"xhrSettings"),P=h(A,"extension",P),g=h(A,"start"),y=h(A,"mapping")}var b={type:"plugin",cache:!1,extension:P,responseType:"text",key:v,url:x,xhrSettings:T,config:{start:g,mapping:y}};u.call(this,a,b),typeof x=="function"&&(this.data=x,this.state=S.FILE_POPULATED)},onProcess:function(){var p=this.loader.systems.plugins,a=this.config,v=h(a,"start",!1),x=h(a,"mapping",null);if(this.state===S.FILE_POPULATED)p.install(this.key,this.data,v,x);else{this.state=S.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var g=p.install(this.key,window[this.key],v,x);(v||x)&&(this.loader.systems[x]=g,this.loader.scene[x]=g)}this.onProcessComplete()}});l.register("plugin",function(p,a,v,x,g){if(Array.isArray(p))for(var y=0;y<p.length;y++)this.addFile(new o(this,p[y]));else this.addFile(new o(this,p,a,v,x,g));return this}),m.exports=o},67397:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(23906),u=i(41299),l=i(74099),h=i(95540),r=i(41212),o=new d({Extends:u,initialize:function(a,v,x,g,y){var T="svg";if(r(v)){var P=v;v=h(P,"key"),x=h(P,"url"),g=h(P,"svgConfig",{}),y=h(P,"xhrSettings"),T=h(P,"extension",T)}var A={type:"svg",cache:a.textureManager,extension:T,responseType:"text",key:v,url:x,xhrSettings:y,config:{width:h(g,"width"),height:h(g,"height"),scale:h(g,"scale")}};u.call(this,a,A)},onProcess:function(){this.state=S.FILE_PROCESSING;var p=this.xhrLoader.responseText,a=[p],v=this.config.width,x=this.config.height,g=this.config.scale;t:if(v&&x||g){var y=null,T=new DOMParser;y=T.parseFromString(p,"text/xml");var P=y.getElementsByTagName("svg")[0],A=P.hasAttribute("viewBox"),b=parseFloat(P.getAttribute("width")),O=parseFloat(P.getAttribute("height"));if(!A&&b&&O)P.setAttribute("viewBox","0  0 "+b+" "+O);else if(A&&!b&&!O){var D=P.getAttribute("viewBox").split(/\s+|,/);b=D[2],O=D[3]}if(g)if(b&&O)v=b*g,x=O*g;else break t;P.setAttribute("width",v.toString()+"px"),P.setAttribute("height",x.toString()+"px"),a=[new XMLSerializer().serializeToString(P)]}try{var B=new window.Blob(a,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var G=this,V=!1;this.data.onload=function(){V||u.revokeObjectURL(G.data),G.onProcessComplete()},this.data.onerror=function(){V?G.onProcessError():(V=!0,u.revokeObjectURL(G.data),G.data.src="data:image/svg+xml,"+encodeURIComponent(a.join("")))},u.createObjectURL(this.data,B,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});l.register("svg",function(p,a,v,x){if(Array.isArray(p))for(var g=0;g<p.length;g++)this.addFile(new o(this,p[g]));else this.addFile(new o(this,p,a,v,x));return this}),m.exports=o},88423:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(23906),u=i(41299),l=i(74099),h=i(95540),r=i(41212),o=new d({Extends:u,initialize:function(a,v,x,g){var y="js";if(r(v)){var T=v;v=h(T,"key"),x=h(T,"url"),g=h(T,"xhrSettings"),y=h(T,"extension",y)}var P={type:"text",extension:y,responseType:"text",key:v,url:x,xhrSettings:g};u.call(this,a,P)},onProcess:function(){this.state=S.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var p=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),a=eval;this.loader.sceneManager.add(this.key,a(p)),this.complete=!0}});l.register("sceneFile",function(p,a,v){if(Array.isArray(p))for(var x=0;x<p.length;x++)this.addFile(new o(this,p[x]));else this.addFile(new o(this,p,a,v));return this}),m.exports=o},56812:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(23906),u=i(41299),l=i(74099),h=i(95540),r=i(41212),o=new d({Extends:u,initialize:function(a,v,x,g,y,T){var P="js";if(r(v)){var A=v;v=h(A,"key"),x=h(A,"url"),T=h(A,"xhrSettings"),P=h(A,"extension",P),g=h(A,"systemKey"),y=h(A,"sceneKey")}var b={type:"scenePlugin",cache:!1,extension:P,responseType:"text",key:v,url:x,xhrSettings:T,config:{systemKey:g,sceneKey:y}};u.call(this,a,b),typeof x=="function"&&(this.data=x,this.state=S.FILE_POPULATED)},onProcess:function(){var p=this.loader.systems.plugins,a=this.config,v=this.key,x=h(a,"systemKey",v),g=h(a,"sceneKey",v);this.state===S.FILE_POPULATED?p.installScenePlugin(x,this.data,g,this.loader.scene,!0):(this.state=S.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),p.installScenePlugin(x,window[this.key],g,this.loader.scene,!0)),this.onProcessComplete()}});l.register("scenePlugin",function(p,a,v,x,g){if(Array.isArray(p))for(var y=0;y<p.length;y++)this.addFile(new o(this,p[y]));else this.addFile(new o(this,p,a,v,x,g));return this}),m.exports=o},34328:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(23906),u=i(41299),l=i(74099),h=i(95540),r=i(41212),o=new d({Extends:u,initialize:function(a,v,x,g,y){var T="js";if(r(v)){var P=v;v=h(P,"key"),x=h(P,"url"),g=h(P,"type","script"),y=h(P,"xhrSettings"),T=h(P,"extension",T)}else g===void 0&&(g="script");var A={type:g,cache:!1,extension:T,responseType:"text",key:v,url:x,xhrSettings:y};u.call(this,a,A)},onProcess:function(){this.state=S.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});l.register("script",function(p,a,v,x){if(Array.isArray(p))for(var g=0;g<p.length;g++)this.addFile(new o(this,p[g]));else this.addFile(new o(this,p,a,v,x));return this}),m.exports=o},85035:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(23906),u=i(74099),l=i(19550),h=new d({Extends:l,initialize:function(o,p,a,v,x){l.call(this,o,p,a,x,v),this.type="spritesheet"},addToCache:function(){var r=this.linkFile;r?r.state>=S.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addSpriteSheet(this.key,r.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,r.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});u.register("spritesheet",function(r,o,p,a){if(Array.isArray(r))for(var v=0;v<r.length;v++)this.addFile(new h(this,r[v]));else this.addFile(new h(this,r,o,p,a));return this}),m.exports=h},78776:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(23906),u=i(41299),l=i(74099),h=i(95540),r=i(41212),o=new d({Extends:u,initialize:function(a,v,x,g){var y="text",T="txt",P=a.cacheManager.text;if(r(v)){var A=v;v=h(A,"key"),x=h(A,"url"),g=h(A,"xhrSettings"),T=h(A,"extension",T),y=h(A,"type",y),P=h(A,"cache",P)}var b={type:y,cache:P,extension:T,responseType:"text",key:v,url:x,xhrSettings:g};u.call(this,a,b)},onProcess:function(){this.state=S.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});l.register("text",function(p,a,v){if(Array.isArray(p))for(var x=0;x<p.length;x++)this.addFile(new o(this,p[x]));else this.addFile(new o(this,p,a,v));return this}),m.exports=o},49477:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(23906),u=i(41299),l=i(74099),h=i(95540),r=i(41212),o=i(80341),p=new d({Extends:u,initialize:function(v,x,g,y){var T="csv";if(r(x)){var P=x;x=h(P,"key"),g=h(P,"url"),y=h(P,"xhrSettings"),T=h(P,"extension",T)}var A={type:"tilemapCSV",cache:v.cacheManager.tilemap,extension:T,responseType:"text",key:x,url:g,xhrSettings:y};u.call(this,v,A),this.tilemapFormat=o.CSV},onProcess:function(){this.state=S.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var a={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,a)}});l.register("tilemapCSV",function(a,v,x){if(Array.isArray(a))for(var g=0;g<a.length;g++)this.addFile(new p(this,a[g]));else this.addFile(new p(this,a,v,x));return this}),m.exports=p},40807:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(74099),u=i(518),l=i(80341),h=new d({Extends:u,initialize:function(o,p,a,v){u.call(this,o,p,a,v),this.type="tilemapJSON",this.cache=o.cacheManager.tilemap},addToCache:function(){var r={format:l.WELTMEISTER,data:this.data};this.cache.add(this.key,r)}});S.register("tilemapImpact",function(r,o,p){if(Array.isArray(r))for(var a=0;a<r.length;a++)this.addFile(new h(this,r[a]));else this.addFile(new h(this,r,o,p));return this}),m.exports=h},56775:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(74099),u=i(518),l=i(80341),h=new d({Extends:u,initialize:function(o,p,a,v){u.call(this,o,p,a,v),this.type="tilemapJSON",this.cache=o.cacheManager.tilemap},addToCache:function(){var r={format:l.TILED_JSON,data:this.data};this.cache.add(this.key,r)}});S.register("tilemapTiledJSON",function(r,o,p){if(Array.isArray(r))for(var a=0;a<r.length;a++)this.addFile(new h(this,r[a]));else this.addFile(new h(this,r,o,p));return this}),m.exports=h},25771:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(74099),u=i(95540),l=i(19550),h=i(41212),r=i(26430),o=i(78776),p=new d({Extends:r,initialize:function(v,x,g,y,T,P){var A,b;if(h(x)){var O=x;x=u(O,"key"),A=new l(v,{key:x,url:u(O,"textureURL"),extension:u(O,"textureExtension","png"),normalMap:u(O,"normalMap"),xhrSettings:u(O,"textureXhrSettings")}),b=new o(v,{key:x,url:u(O,"atlasURL"),extension:u(O,"atlasExtension","txt"),xhrSettings:u(O,"atlasXhrSettings")})}else A=new l(v,x,g,T),b=new o(v,x,y,P);A.linkFile?r.call(this,v,"unityatlas",x,[A,b,A.linkFile]):r.call(this,v,"unityatlas",x,[A,b])},addToCache:function(){if(this.isReadyToProcess()){var a=this.files[0],v=this.files[1],x=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(a.key,a.data,v.data,x),this.complete=!0}}});S.register("unityAtlas",function(a,v,x,g,y){var T;if(Array.isArray(a))for(var P=0;P<a.length;P++)T=new p(this,a[P]),this.addFile(T.files);else T=new p(this,a,v,x,g,y),this.addFile(T.files);return this}),m.exports=p},33720:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(23906),u=i(41299),l=i(74099),h=i(98356),r=i(95540),o=i(41212),p=new d({Extends:u,initialize:function(v,x,g,y){if(y===void 0&&(y=!1),o(x)){var T=x;x=r(T,"key"),g=r(T,"url",[]),y=r(T,"noAudio",!1)}var P=v.systems.game.device.video.getVideoURL(g);P||console.warn("VideoFile: No supported format for "+x);var A={type:"video",cache:v.cacheManager.video,extension:P.type,key:x,url:P.url,config:{noAudio:y}};u.call(this,v,A)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=h(this,this.loader.baseURL),this.state=S.FILE_LOADED,this.loader.nextFile(this,!0)}});l.register("video",function(a,v,x){if(Array.isArray(a))for(var g=0;g<a.length;g++)this.addFile(new p(this,a[g]));else this.addFile(new p(this,a,v,x));return this}),m.exports=p},57318:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(23906),u=i(41299),l=i(74099),h=i(95540),r=i(41212),o=i(56836),p=new d({Extends:u,initialize:function(v,x,g,y){var T="xml";if(r(x)){var P=x;x=h(P,"key"),g=h(P,"url"),y=h(P,"xhrSettings"),T=h(P,"extension",T)}var A={type:"xml",cache:v.cacheManager.xml,extension:T,responseType:"text",key:x,url:g,xhrSettings:y};u.call(this,v,A)},onProcess:function(){this.state=S.FILE_PROCESSING,this.data=o(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});l.register("xml",function(a,v,x){if(Array.isArray(a))for(var g=0;g<a.length;g++)this.addFile(new p(this,a[g]));else this.addFile(new p(this,a,v,x));return this}),m.exports=p},64589:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={AnimationJSONFile:i(14135),AsepriteFile:i(76272),AtlasJSONFile:i(38734),AtlasXMLFile:i(74599),AudioFile:i(21097),AudioSpriteFile:i(89524),BinaryFile:i(85722),BitmapFontFile:i(97025),CompressedTextureFile:i(69559),CSSFile:i(16024),FontFile:i(87674),GLSLFile:i(47931),HTML5AudioFile:i(89749),HTMLFile:i(88470),HTMLTextureFile:i(14643),ImageFile:i(19550),JSONFile:i(518),MultiAtlasFile:i(59327),MultiScriptFile:i(99297),OBJFile:i(41846),PackFile:i(58610),PluginFile:i(48988),SceneFile:i(88423),ScenePluginFile:i(56812),ScriptFile:i(34328),SpriteSheetFile:i(85035),SVGFile:i(67397),TextFile:i(78776),TilemapCSVFile:i(49477),TilemapImpactFile:i(40807),TilemapJSONFile:i(56775),UnityAtlasFile:i(25771),VideoFile:i(33720),XMLFile:i(57318)}},57777:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(23906),S=i(79291),u={Events:i(54899),FileTypes:i(64589),File:i(41299),FileTypesManager:i(74099),GetURL:i(98356),LoaderPlugin:i(74261),MergeXHRSettings:i(3374),MultiFile:i(26430),XHRLoader:i(84376),XHRSettings:i(92638)};u=S(!1,u,d),m.exports=u},53307:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){for(var d=0,S=0;S<i.length;S++)d+=+i[S];return d/i.length};m.exports=E},85710:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(6411),S=function(u,l){return d(u)/d(l)/d(u-l)};m.exports=S},30976:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return Math.floor(Math.random()*(d-i+1)+i)};m.exports=E},87842:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u,l){var h=(u-d)*.5,r=(l-S)*.5,o=i*i,p=i*o;return(2*S-2*u+h+r)*p+(-3*S+3*u-2*h-r)*o+h*i+S};m.exports=E},26302:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){d===void 0&&(d=0),S===void 0&&(S=10);var u=Math.pow(S,-d);return Math.ceil(i*u)/u};m.exports=E},45319:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){return Math.max(d,Math.min(S,i))};m.exports=E},39506:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(36383),S=function(u){return u*d.DEG_TO_RAD};m.exports=S},61241:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return Math.abs(i-d)};m.exports=E},38857:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45319),S=i(83419),u=i(37867),l=i(29747),h=new u,r=new S({initialize:function o(p,a,v,x){p===void 0&&(p=0),a===void 0&&(a=0),v===void 0&&(v=0),x===void 0&&(x=o.DefaultOrder),this._x=p,this._y=a,this._z=v,this._order=x,this.onChangeCallback=l},x:{get:function(){return this._x},set:function(o){this._x=o,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(o){this._y=o,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(o){this._z=o,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(o){this._order=o,this.onChangeCallback(this)}},set:function(o,p,a,v){return v===void 0&&(v=this._order),this._x=o,this._y=p,this._z=a,this._order=v,this.onChangeCallback(this),this},copy:function(o){return this.set(o.x,o.y,o.z,o.order)},setFromQuaternion:function(o,p,a){return p===void 0&&(p=this._order),a===void 0&&(a=!1),h.fromQuat(o),this.setFromRotationMatrix(h,p,a)},setFromRotationMatrix:function(o,p,a){p===void 0&&(p=this._order),a===void 0&&(a=!1);var v=o.val,x=v[0],g=v[4],y=v[8],T=v[1],P=v[5],A=v[9],b=v[2],O=v[6],D=v[10],B=0,G=0,V=0,k=.99999;switch(p){case"XYZ":{G=Math.asin(d(y,-1,1)),Math.abs(y)<k?(B=Math.atan2(-A,D),V=Math.atan2(-g,x)):B=Math.atan2(O,P);break}case"YXZ":{B=Math.asin(-d(A,-1,1)),Math.abs(A)<k?(G=Math.atan2(y,D),V=Math.atan2(T,P)):G=Math.atan2(-b,x);break}case"ZXY":{B=Math.asin(d(O,-1,1)),Math.abs(O)<k?(G=Math.atan2(-b,D),V=Math.atan2(-g,P)):V=Math.atan2(T,x);break}case"ZYX":{G=Math.asin(-d(b,-1,1)),Math.abs(b)<k?(B=Math.atan2(O,D),V=Math.atan2(T,x)):V=Math.atan2(-g,P);break}case"YZX":{V=Math.asin(d(T,-1,1)),Math.abs(T)<k?(B=Math.atan2(-A,P),G=Math.atan2(-b,x)):G=Math.atan2(y,D);break}case"XZY":{V=Math.asin(-d(g,-1,1)),Math.abs(g)<k?(B=Math.atan2(O,P),G=Math.atan2(y,x)):B=Math.atan2(-A,D);break}}return this._x=B,this._y=G,this._z=V,this._order=p,a&&this.onChangeCallback(this),this}});r.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],r.DefaultOrder="XYZ",m.exports=r},6411:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){if(i===0)return 1;for(var d=i;--i;)d*=i;return d};m.exports=E},99472:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return Math.random()*(d-i)+i};m.exports=E},77623:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){d===void 0&&(d=0),S===void 0&&(S=10);var u=Math.pow(S,-d);return Math.floor(i*u)/u};m.exports=E},62945:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45319),S=function(u,l,h){return u=d(u,0,1),(h-l)*u+l};m.exports=S},38265:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return i/d/1e3};m.exports=E},78702:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i==parseFloat(i)?!(i%2):void 0};m.exports=E},94883:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i===parseFloat(i)?!(i%2):void 0};m.exports=E},28915:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){return(d-i)*S+i};m.exports=E},94908:m=>{/**
 * @author       Greg McLean <GregDevProjects>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){return S===void 0&&(S=0),i.clone().lerp(d,S)};m.exports=E},94434:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=new d({initialize:function(l){this.val=new Float32Array(9),l?this.copy(l):this.identity()},clone:function(){return new S(this)},set:function(u){return this.copy(u)},copy:function(u){var l=this.val,h=u.val;return l[0]=h[0],l[1]=h[1],l[2]=h[2],l[3]=h[3],l[4]=h[4],l[5]=h[5],l[6]=h[6],l[7]=h[7],l[8]=h[8],this},fromMat4:function(u){var l=u.val,h=this.val;return h[0]=l[0],h[1]=l[1],h[2]=l[2],h[3]=l[4],h[4]=l[5],h[5]=l[6],h[6]=l[8],h[7]=l[9],h[8]=l[10],this},fromArray:function(u){var l=this.val;return l[0]=u[0],l[1]=u[1],l[2]=u[2],l[3]=u[3],l[4]=u[4],l[5]=u[5],l[6]=u[6],l[7]=u[7],l[8]=u[8],this},identity:function(){var u=this.val;return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=1,u[5]=0,u[6]=0,u[7]=0,u[8]=1,this},transpose:function(){var u=this.val,l=u[1],h=u[2],r=u[5];return u[1]=u[3],u[2]=u[6],u[3]=l,u[5]=u[7],u[6]=h,u[7]=r,this},invert:function(){var u=this.val,l=u[0],h=u[1],r=u[2],o=u[3],p=u[4],a=u[5],v=u[6],x=u[7],g=u[8],y=g*p-a*x,T=-g*o+a*v,P=x*o-p*v,A=l*y+h*T+r*P;return A?(A=1/A,u[0]=y*A,u[1]=(-g*h+r*x)*A,u[2]=(a*h-r*p)*A,u[3]=T*A,u[4]=(g*l-r*v)*A,u[5]=(-a*l+r*o)*A,u[6]=P*A,u[7]=(-x*l+h*v)*A,u[8]=(p*l-h*o)*A,this):null},adjoint:function(){var u=this.val,l=u[0],h=u[1],r=u[2],o=u[3],p=u[4],a=u[5],v=u[6],x=u[7],g=u[8];return u[0]=p*g-a*x,u[1]=r*x-h*g,u[2]=h*a-r*p,u[3]=a*v-o*g,u[4]=l*g-r*v,u[5]=r*o-l*a,u[6]=o*x-p*v,u[7]=h*v-l*x,u[8]=l*p-h*o,this},determinant:function(){var u=this.val,l=u[0],h=u[1],r=u[2],o=u[3],p=u[4],a=u[5],v=u[6],x=u[7],g=u[8];return l*(g*p-a*x)+h*(-g*o+a*v)+r*(x*o-p*v)},multiply:function(u){var l=this.val,h=l[0],r=l[1],o=l[2],p=l[3],a=l[4],v=l[5],x=l[6],g=l[7],y=l[8],T=u.val,P=T[0],A=T[1],b=T[2],O=T[3],D=T[4],B=T[5],G=T[6],V=T[7],k=T[8];return l[0]=P*h+A*p+b*x,l[1]=P*r+A*a+b*g,l[2]=P*o+A*v+b*y,l[3]=O*h+D*p+B*x,l[4]=O*r+D*a+B*g,l[5]=O*o+D*v+B*y,l[6]=G*h+V*p+k*x,l[7]=G*r+V*a+k*g,l[8]=G*o+V*v+k*y,this},translate:function(u){var l=this.val,h=u.x,r=u.y;return l[6]=h*l[0]+r*l[3]+l[6],l[7]=h*l[1]+r*l[4]+l[7],l[8]=h*l[2]+r*l[5]+l[8],this},rotate:function(u){var l=this.val,h=l[0],r=l[1],o=l[2],p=l[3],a=l[4],v=l[5],x=Math.sin(u),g=Math.cos(u);return l[0]=g*h+x*p,l[1]=g*r+x*a,l[2]=g*o+x*v,l[3]=g*p-x*h,l[4]=g*a-x*r,l[5]=g*v-x*o,this},scale:function(u){var l=this.val,h=u.x,r=u.y;return l[0]=h*l[0],l[1]=h*l[1],l[2]=h*l[2],l[3]=r*l[3],l[4]=r*l[4],l[5]=r*l[5],this},fromQuat:function(u){var l=u.x,h=u.y,r=u.z,o=u.w,p=l+l,a=h+h,v=r+r,x=l*p,g=l*a,y=l*v,T=h*a,P=h*v,A=r*v,b=o*p,O=o*a,D=o*v,B=this.val;return B[0]=1-(T+A),B[3]=g+D,B[6]=y-O,B[1]=g-D,B[4]=1-(x+A),B[7]=P+b,B[2]=y+O,B[5]=P-b,B[8]=1-(x+T),this},normalFromMat4:function(u){var l=u.val,h=this.val,r=l[0],o=l[1],p=l[2],a=l[3],v=l[4],x=l[5],g=l[6],y=l[7],T=l[8],P=l[9],A=l[10],b=l[11],O=l[12],D=l[13],B=l[14],G=l[15],V=r*x-o*v,k=r*g-p*v,U=r*y-a*v,W=o*g-p*x,X=o*y-a*x,_=p*y-a*g,Q=T*D-P*O,j=T*B-A*O,it=T*G-b*O,K=P*B-A*D,J=P*G-b*D,Y=A*G-b*B,q=V*Y-k*J+U*K+W*it-X*j+_*Q;return q?(q=1/q,h[0]=(x*Y-g*J+y*K)*q,h[1]=(g*it-v*Y-y*j)*q,h[2]=(v*J-x*it+y*Q)*q,h[3]=(p*J-o*Y-a*K)*q,h[4]=(r*Y-p*it+a*j)*q,h[5]=(o*it-r*J-a*Q)*q,h[6]=(D*_-B*X+G*W)*q,h[7]=(B*U-O*_-G*k)*q,h[8]=(O*X-D*U+G*V)*q,this):null}});m.exports=S},37867:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(25836),u=1e-6,l=new d({initialize:function(x){this.val=new Float32Array(16),x?this.copy(x):this.identity()},clone:function(){return new l(this)},set:function(v){return this.copy(v)},setValues:function(v,x,g,y,T,P,A,b,O,D,B,G,V,k,U,W){var X=this.val;return X[0]=v,X[1]=x,X[2]=g,X[3]=y,X[4]=T,X[5]=P,X[6]=A,X[7]=b,X[8]=O,X[9]=D,X[10]=B,X[11]=G,X[12]=V,X[13]=k,X[14]=U,X[15]=W,this},copy:function(v){var x=v.val;return this.setValues(x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7],x[8],x[9],x[10],x[11],x[12],x[13],x[14],x[15])},fromArray:function(v){return this.setValues(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(v,x,g){var y=h.fromQuat(g),T=y.val,P=x.x,A=x.y,b=x.z;return this.setValues(T[0]*P,T[1]*P,T[2]*P,0,T[4]*A,T[5]*A,T[6]*A,0,T[8]*b,T[9]*b,T[10]*b,0,v.x,v.y,v.z,1)},xyz:function(v,x,g){this.identity();var y=this.val;return y[12]=v,y[13]=x,y[14]=g,this},scaling:function(v,x,g){this.zero();var y=this.val;return y[0]=v,y[5]=x,y[10]=g,y[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var v=this.val,x=v[1],g=v[2],y=v[3],T=v[6],P=v[7],A=v[11];return v[1]=v[4],v[2]=v[8],v[3]=v[12],v[4]=x,v[6]=v[9],v[7]=v[13],v[8]=g,v[9]=T,v[11]=v[14],v[12]=y,v[13]=P,v[14]=A,this},getInverse:function(v){return this.copy(v),this.invert()},invert:function(){var v=this.val,x=v[0],g=v[1],y=v[2],T=v[3],P=v[4],A=v[5],b=v[6],O=v[7],D=v[8],B=v[9],G=v[10],V=v[11],k=v[12],U=v[13],W=v[14],X=v[15],_=x*A-g*P,Q=x*b-y*P,j=x*O-T*P,it=g*b-y*A,K=g*O-T*A,J=y*O-T*b,Y=D*U-B*k,q=D*W-G*k,$=D*X-V*k,et=B*W-G*U,rt=B*X-V*U,at=G*X-V*W,lt=_*at-Q*rt+j*et+it*$-K*q+J*Y;return lt?(lt=1/lt,this.setValues((A*at-b*rt+O*et)*lt,(y*rt-g*at-T*et)*lt,(U*J-W*K+X*it)*lt,(G*K-B*J-V*it)*lt,(b*$-P*at-O*q)*lt,(x*at-y*$+T*q)*lt,(W*j-k*J-X*Q)*lt,(D*J-G*j+V*Q)*lt,(P*rt-A*$+O*Y)*lt,(g*$-x*rt-T*Y)*lt,(k*K-U*j+X*_)*lt,(B*j-D*K-V*_)*lt,(A*q-P*et-b*Y)*lt,(x*et-g*q+y*Y)*lt,(U*Q-k*it-W*_)*lt,(D*it-B*Q+G*_)*lt)):this},adjoint:function(){var v=this.val,x=v[0],g=v[1],y=v[2],T=v[3],P=v[4],A=v[5],b=v[6],O=v[7],D=v[8],B=v[9],G=v[10],V=v[11],k=v[12],U=v[13],W=v[14],X=v[15];return this.setValues(A*(G*X-V*W)-B*(b*X-O*W)+U*(b*V-O*G),-(g*(G*X-V*W)-B*(y*X-T*W)+U*(y*V-T*G)),g*(b*X-O*W)-A*(y*X-T*W)+U*(y*O-T*b),-(g*(b*V-O*G)-A*(y*V-T*G)+B*(y*O-T*b)),-(P*(G*X-V*W)-D*(b*X-O*W)+k*(b*V-O*G)),x*(G*X-V*W)-D*(y*X-T*W)+k*(y*V-T*G),-(x*(b*X-O*W)-P*(y*X-T*W)+k*(y*O-T*b)),x*(b*V-O*G)-P*(y*V-T*G)+D*(y*O-T*b),P*(B*X-V*U)-D*(A*X-O*U)+k*(A*V-O*B),-(x*(B*X-V*U)-D*(g*X-T*U)+k*(g*V-T*B)),x*(A*X-O*U)-P*(g*X-T*U)+k*(g*O-T*A),-(x*(A*V-O*B)-P*(g*V-T*B)+D*(g*O-T*A)),-(P*(B*W-G*U)-D*(A*W-b*U)+k*(A*G-b*B)),x*(B*W-G*U)-D*(g*W-y*U)+k*(g*G-y*B),-(x*(A*W-b*U)-P*(g*W-y*U)+k*(g*b-y*A)),x*(A*G-b*B)-P*(g*G-y*B)+D*(g*b-y*A))},determinant:function(){var v=this.val,x=v[0],g=v[1],y=v[2],T=v[3],P=v[4],A=v[5],b=v[6],O=v[7],D=v[8],B=v[9],G=v[10],V=v[11],k=v[12],U=v[13],W=v[14],X=v[15],_=x*A-g*P,Q=x*b-y*P,j=x*O-T*P,it=g*b-y*A,K=g*O-T*A,J=y*O-T*b,Y=D*U-B*k,q=D*W-G*k,$=D*X-V*k,et=B*W-G*U,rt=B*X-V*U,at=G*X-V*W;return _*at-Q*rt+j*et+it*$-K*q+J*Y},multiply:function(v){var x=this.val,g=x[0],y=x[1],T=x[2],P=x[3],A=x[4],b=x[5],O=x[6],D=x[7],B=x[8],G=x[9],V=x[10],k=x[11],U=x[12],W=x[13],X=x[14],_=x[15],Q=v.val,j=Q[0],it=Q[1],K=Q[2],J=Q[3];return x[0]=j*g+it*A+K*B+J*U,x[1]=j*y+it*b+K*G+J*W,x[2]=j*T+it*O+K*V+J*X,x[3]=j*P+it*D+K*k+J*_,j=Q[4],it=Q[5],K=Q[6],J=Q[7],x[4]=j*g+it*A+K*B+J*U,x[5]=j*y+it*b+K*G+J*W,x[6]=j*T+it*O+K*V+J*X,x[7]=j*P+it*D+K*k+J*_,j=Q[8],it=Q[9],K=Q[10],J=Q[11],x[8]=j*g+it*A+K*B+J*U,x[9]=j*y+it*b+K*G+J*W,x[10]=j*T+it*O+K*V+J*X,x[11]=j*P+it*D+K*k+J*_,j=Q[12],it=Q[13],K=Q[14],J=Q[15],x[12]=j*g+it*A+K*B+J*U,x[13]=j*y+it*b+K*G+J*W,x[14]=j*T+it*O+K*V+J*X,x[15]=j*P+it*D+K*k+J*_,this},multiplyLocal:function(v){var x=this.val,g=v.val;return this.setValues(x[0]*g[0]+x[1]*g[4]+x[2]*g[8]+x[3]*g[12],x[0]*g[1]+x[1]*g[5]+x[2]*g[9]+x[3]*g[13],x[0]*g[2]+x[1]*g[6]+x[2]*g[10]+x[3]*g[14],x[0]*g[3]+x[1]*g[7]+x[2]*g[11]+x[3]*g[15],x[4]*g[0]+x[5]*g[4]+x[6]*g[8]+x[7]*g[12],x[4]*g[1]+x[5]*g[5]+x[6]*g[9]+x[7]*g[13],x[4]*g[2]+x[5]*g[6]+x[6]*g[10]+x[7]*g[14],x[4]*g[3]+x[5]*g[7]+x[6]*g[11]+x[7]*g[15],x[8]*g[0]+x[9]*g[4]+x[10]*g[8]+x[11]*g[12],x[8]*g[1]+x[9]*g[5]+x[10]*g[9]+x[11]*g[13],x[8]*g[2]+x[9]*g[6]+x[10]*g[10]+x[11]*g[14],x[8]*g[3]+x[9]*g[7]+x[10]*g[11]+x[11]*g[15],x[12]*g[0]+x[13]*g[4]+x[14]*g[8]+x[15]*g[12],x[12]*g[1]+x[13]*g[5]+x[14]*g[9]+x[15]*g[13],x[12]*g[2]+x[13]*g[6]+x[14]*g[10]+x[15]*g[14],x[12]*g[3]+x[13]*g[7]+x[14]*g[11]+x[15]*g[15])},premultiply:function(v){return this.multiplyMatrices(v,this)},multiplyMatrices:function(v,x){var g=v.val,y=x.val,T=g[0],P=g[4],A=g[8],b=g[12],O=g[1],D=g[5],B=g[9],G=g[13],V=g[2],k=g[6],U=g[10],W=g[14],X=g[3],_=g[7],Q=g[11],j=g[15],it=y[0],K=y[4],J=y[8],Y=y[12],q=y[1],$=y[5],et=y[9],rt=y[13],at=y[2],lt=y[6],vt=y[10],xt=y[14],ut=y[3],mt=y[7],Tt=y[11],bt=y[15];return this.setValues(T*it+P*q+A*at+b*ut,O*it+D*q+B*at+G*ut,V*it+k*q+U*at+W*ut,X*it+_*q+Q*at+j*ut,T*K+P*$+A*lt+b*mt,O*K+D*$+B*lt+G*mt,V*K+k*$+U*lt+W*mt,X*K+_*$+Q*lt+j*mt,T*J+P*et+A*vt+b*Tt,O*J+D*et+B*vt+G*Tt,V*J+k*et+U*vt+W*Tt,X*J+_*et+Q*vt+j*Tt,T*Y+P*rt+A*xt+b*bt,O*Y+D*rt+B*xt+G*bt,V*Y+k*rt+U*xt+W*bt,X*Y+_*rt+Q*xt+j*bt)},translate:function(v){return this.translateXYZ(v.x,v.y,v.z)},translateXYZ:function(v,x,g){var y=this.val;return y[12]=y[0]*v+y[4]*x+y[8]*g+y[12],y[13]=y[1]*v+y[5]*x+y[9]*g+y[13],y[14]=y[2]*v+y[6]*x+y[10]*g+y[14],y[15]=y[3]*v+y[7]*x+y[11]*g+y[15],this},scale:function(v){return this.scaleXYZ(v.x,v.y,v.z)},scaleXYZ:function(v,x,g){var y=this.val;return y[0]=y[0]*v,y[1]=y[1]*v,y[2]=y[2]*v,y[3]=y[3]*v,y[4]=y[4]*x,y[5]=y[5]*x,y[6]=y[6]*x,y[7]=y[7]*x,y[8]=y[8]*g,y[9]=y[9]*g,y[10]=y[10]*g,y[11]=y[11]*g,this},makeRotationAxis:function(v,x){var g=Math.cos(x),y=Math.sin(x),T=1-g,P=v.x,A=v.y,b=v.z,O=T*P,D=T*A;return this.setValues(O*P+g,O*A-y*b,O*b+y*A,0,O*A+y*b,D*A+g,D*b-y*P,0,O*b-y*A,D*b+y*P,T*b*b+g,0,0,0,0,1)},rotate:function(v,x){var g=this.val,y=x.x,T=x.y,P=x.z,A=Math.sqrt(y*y+T*T+P*P);if(Math.abs(A)<u)return this;A=1/A,y*=A,T*=A,P*=A;var b=Math.sin(v),O=Math.cos(v),D=1-O,B=g[0],G=g[1],V=g[2],k=g[3],U=g[4],W=g[5],X=g[6],_=g[7],Q=g[8],j=g[9],it=g[10],K=g[11],J=g[12],Y=g[13],q=g[14],$=g[15],et=y*y*D+O,rt=T*y*D+P*b,at=P*y*D-T*b,lt=y*T*D-P*b,vt=T*T*D+O,xt=P*T*D+y*b,ut=y*P*D+T*b,mt=T*P*D-y*b,Tt=P*P*D+O;return this.setValues(B*et+U*rt+Q*at,G*et+W*rt+j*at,V*et+X*rt+it*at,k*et+_*rt+K*at,B*lt+U*vt+Q*xt,G*lt+W*vt+j*xt,V*lt+X*vt+it*xt,k*lt+_*vt+K*xt,B*ut+U*mt+Q*Tt,G*ut+W*mt+j*Tt,V*ut+X*mt+it*Tt,k*ut+_*mt+K*Tt,J,Y,q,$)},rotateX:function(v){var x=this.val,g=Math.sin(v),y=Math.cos(v),T=x[4],P=x[5],A=x[6],b=x[7],O=x[8],D=x[9],B=x[10],G=x[11];return x[4]=T*y+O*g,x[5]=P*y+D*g,x[6]=A*y+B*g,x[7]=b*y+G*g,x[8]=O*y-T*g,x[9]=D*y-P*g,x[10]=B*y-A*g,x[11]=G*y-b*g,this},rotateY:function(v){var x=this.val,g=Math.sin(v),y=Math.cos(v),T=x[0],P=x[1],A=x[2],b=x[3],O=x[8],D=x[9],B=x[10],G=x[11];return x[0]=T*y-O*g,x[1]=P*y-D*g,x[2]=A*y-B*g,x[3]=b*y-G*g,x[8]=T*g+O*y,x[9]=P*g+D*y,x[10]=A*g+B*y,x[11]=b*g+G*y,this},rotateZ:function(v){var x=this.val,g=Math.sin(v),y=Math.cos(v),T=x[0],P=x[1],A=x[2],b=x[3],O=x[4],D=x[5],B=x[6],G=x[7];return x[0]=T*y+O*g,x[1]=P*y+D*g,x[2]=A*y+B*g,x[3]=b*y+G*g,x[4]=O*y-T*g,x[5]=D*y-P*g,x[6]=B*y-A*g,x[7]=G*y-b*g,this},fromRotationTranslation:function(v,x){var g=v.x,y=v.y,T=v.z,P=v.w,A=g+g,b=y+y,O=T+T,D=g*A,B=g*b,G=g*O,V=y*b,k=y*O,U=T*O,W=P*A,X=P*b,_=P*O;return this.setValues(1-(V+U),B+_,G-X,0,B-_,1-(D+U),k+W,0,G+X,k-W,1-(D+V),0,x.x,x.y,x.z,1)},fromQuat:function(v){var x=v.x,g=v.y,y=v.z,T=v.w,P=x+x,A=g+g,b=y+y,O=x*P,D=x*A,B=x*b,G=g*A,V=g*b,k=y*b,U=T*P,W=T*A,X=T*b;return this.setValues(1-(G+k),D+X,B-W,0,D-X,1-(O+k),V+U,0,B+W,V-U,1-(O+G),0,0,0,0,1)},frustum:function(v,x,g,y,T,P){var A=1/(x-v),b=1/(y-g),O=1/(T-P);return this.setValues(T*2*A,0,0,0,0,T*2*b,0,0,(x+v)*A,(y+g)*b,(P+T)*O,-1,0,0,P*T*2*O,0)},perspective:function(v,x,g,y){var T=1/Math.tan(v/2),P=1/(g-y);return this.setValues(T/x,0,0,0,0,T,0,0,0,0,(y+g)*P,-1,0,0,2*y*g*P,0)},perspectiveLH:function(v,x,g,y){return this.setValues(2*g/v,0,0,0,0,2*g/x,0,0,0,0,-y/(g-y),1,0,0,g*y/(g-y),0)},ortho:function(v,x,g,y,T,P){var A=v-x,b=g-y,O=T-P;return A=A===0?A:1/A,b=b===0?b:1/b,O=O===0?O:1/O,this.setValues(-2*A,0,0,0,0,-2*b,0,0,0,0,2*O,0,(v+x)*A,(y+g)*b,(P+T)*O,1)},lookAtRH:function(v,x,g){var y=this.val;return a.subVectors(v,x),a.lengthSq()===0&&(a.z=1),a.normalize(),o.crossVectors(g,a),o.lengthSq()===0&&(Math.abs(g.z)===1?a.x+=1e-4:a.z+=1e-4,a.normalize(),o.crossVectors(g,a)),o.normalize(),p.crossVectors(a,o),y[0]=o.x,y[1]=o.y,y[2]=o.z,y[4]=p.x,y[5]=p.y,y[6]=p.z,y[8]=a.x,y[9]=a.y,y[10]=a.z,this},lookAt:function(v,x,g){var y=v.x,T=v.y,P=v.z,A=g.x,b=g.y,O=g.z,D=x.x,B=x.y,G=x.z;if(Math.abs(y-D)<u&&Math.abs(T-B)<u&&Math.abs(P-G)<u)return this.identity();var V=y-D,k=T-B,U=P-G,W=1/Math.sqrt(V*V+k*k+U*U);V*=W,k*=W,U*=W;var X=b*U-O*k,_=O*V-A*U,Q=A*k-b*V;W=Math.sqrt(X*X+_*_+Q*Q),W?(W=1/W,X*=W,_*=W,Q*=W):(X=0,_=0,Q=0);var j=k*Q-U*_,it=U*X-V*Q,K=V*_-k*X;return W=Math.sqrt(j*j+it*it+K*K),W?(W=1/W,j*=W,it*=W,K*=W):(j=0,it=0,K=0),this.setValues(X,j,V,0,_,it,k,0,Q,K,U,0,-(X*y+_*T+Q*P),-(j*y+it*T+K*P),-(V*y+k*T+U*P),1)},yawPitchRoll:function(v,x,g){this.zero(),h.zero(),r.zero();var y=this.val,T=h.val,P=r.val,A=Math.sin(g),b=Math.cos(g);return y[10]=1,y[15]=1,y[0]=b,y[1]=A,y[4]=-A,y[5]=b,A=Math.sin(x),b=Math.cos(x),T[0]=1,T[15]=1,T[5]=b,T[10]=b,T[9]=-A,T[6]=A,A=Math.sin(v),b=Math.cos(v),P[5]=1,P[15]=1,P[0]=b,P[2]=-A,P[8]=A,P[10]=b,this.multiplyLocal(h),this.multiplyLocal(r),this},setWorldMatrix:function(v,x,g,y,T){return this.yawPitchRoll(v.y,v.x,v.z),h.scaling(g.x,g.y,g.z),r.xyz(x.x,x.y,x.z),this.multiplyLocal(h),this.multiplyLocal(r),y&&this.multiplyLocal(y),T&&this.multiplyLocal(T),this},multiplyToMat4:function(v,x){var g=this.val,y=v.val,T=g[0],P=g[1],A=g[2],b=g[3],O=g[4],D=g[5],B=g[6],G=g[7],V=g[8],k=g[9],U=g[10],W=g[11],X=g[12],_=g[13],Q=g[14],j=g[15],it=y[0],K=y[1],J=y[2],Y=y[3],q=y[4],$=y[5],et=y[6],rt=y[7],at=y[8],lt=y[9],vt=y[10],xt=y[11],ut=y[12],mt=y[13],Tt=y[14],bt=y[15];return x.setValues(it*T+K*O+J*V+Y*X,K*P+K*D+J*k+Y*_,J*A+K*B+J*U+Y*Q,Y*b+K*G+J*W+Y*j,q*T+$*O+et*V+rt*X,q*P+$*D+et*k+rt*_,q*A+$*B+et*U+rt*Q,q*b+$*G+et*W+rt*j,at*T+lt*O+vt*V+xt*X,at*P+lt*D+vt*k+xt*_,at*A+lt*B+vt*U+xt*Q,at*b+lt*G+vt*W+xt*j,ut*T+mt*O+Tt*V+bt*X,ut*P+mt*D+Tt*k+bt*_,ut*A+mt*B+Tt*U+bt*Q,ut*b+mt*G+Tt*W+bt*j)},fromRotationXYTranslation:function(v,x,g){var y=x.x,T=x.y,P=x.z,A=Math.sin(v.x),b=Math.cos(v.x),O=Math.sin(v.y),D=Math.cos(v.y),B=y,G=T,V=P,k=-A,U=0-k*O,W=0-b*O,X=k*D,_=b*D;return g||(B=D*y+O*P,G=U*y+b*T+X*P,V=W*y+A*T+_*P),this.setValues(D,U,W,0,0,b,A,0,O,X,_,0,B,G,V,1)},getMaxScaleOnAxis:function(){var v=this.val,x=v[0]*v[0]+v[1]*v[1]+v[2]*v[2],g=v[4]*v[4]+v[5]*v[5]+v[6]*v[6],y=v[8]*v[8]+v[9]*v[9]+v[10]*v[10];return Math.sqrt(Math.max(x,g,y))}}),h=new l,r=new l,o=new S,p=new S,a=new S;m.exports=l},86883:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){return Math.min(i+d,S)};m.exports=E},50040:m=>{/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){var d=i.length;if(d===0)return 0;i.sort(function(u,l){return u-l});var S=Math.floor(d/2);return d%2===0?(i[S]+i[S-1])/2:i[S]};m.exports=E},37204:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){return Math.max(i-d,S)};m.exports=E},65201:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){S===void 0&&(S=d+1);var l=(i-d)/(S-d);return l>1?u!==void 0?(l=(u-i)/(u-S),l<0&&(l=0)):l=1:l<0&&(l=0),l};m.exports=E},15746:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(94434),u=i(29747),l=i(25836),h=1e-6,r=new Int8Array([1,2,0]),o=new Float32Array([0,0,0]),p=new l(1,0,0),a=new l(0,1,0),v=new l,x=new S,g=new d({initialize:function(T,P,A,b){this.onChangeCallback=u,this.set(T,P,A,b)},x:{get:function(){return this._x},set:function(y){this._x=y,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(y){this._y=y,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(y){this._z=y,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(y){this._w=y,this.onChangeCallback(this)}},copy:function(y){return this.set(y)},set:function(y,T,P,A,b){return b===void 0&&(b=!0),typeof y=="object"?(this._x=y.x||0,this._y=y.y||0,this._z=y.z||0,this._w=y.w||0):(this._x=y||0,this._y=T||0,this._z=P||0,this._w=A||0),b&&this.onChangeCallback(this),this},add:function(y){return this._x+=y.x,this._y+=y.y,this._z+=y.z,this._w+=y.w,this.onChangeCallback(this),this},subtract:function(y){return this._x-=y.x,this._y-=y.y,this._z-=y.z,this._w-=y.w,this.onChangeCallback(this),this},scale:function(y){return this._x*=y,this._y*=y,this._z*=y,this._w*=y,this.onChangeCallback(this),this},length:function(){var y=this.x,T=this.y,P=this.z,A=this.w;return Math.sqrt(y*y+T*T+P*P+A*A)},lengthSq:function(){var y=this.x,T=this.y,P=this.z,A=this.w;return y*y+T*T+P*P+A*A},normalize:function(){var y=this.x,T=this.y,P=this.z,A=this.w,b=y*y+T*T+P*P+A*A;return b>0&&(b=1/Math.sqrt(b),this._x=y*b,this._y=T*b,this._z=P*b,this._w=A*b),this.onChangeCallback(this),this},dot:function(y){return this.x*y.x+this.y*y.y+this.z*y.z+this.w*y.w},lerp:function(y,T){T===void 0&&(T=0);var P=this.x,A=this.y,b=this.z,O=this.w;return this.set(P+T*(y.x-P),A+T*(y.y-A),b+T*(y.z-b),O+T*(y.w-O))},rotationTo:function(y,T){var P=y.x*T.x+y.y*T.y+y.z*T.z;return P<-.999999?(v.copy(p).cross(y).length()<h&&v.copy(a).cross(y),v.normalize(),this.setAxisAngle(v,Math.PI)):P>.999999?this.set(0,0,0,1):(v.copy(y).cross(T),this._x=v.x,this._y=v.y,this._z=v.z,this._w=1+P,this.normalize())},setAxes:function(y,T,P){var A=x.val;return A[0]=T.x,A[3]=T.y,A[6]=T.z,A[1]=P.x,A[4]=P.y,A[7]=P.z,A[2]=-y.x,A[5]=-y.y,A[8]=-y.z,this.fromMat3(x).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(y,T){T=T*.5;var P=Math.sin(T);return this.set(P*y.x,P*y.y,P*y.z,Math.cos(T))},multiply:function(y){var T=this.x,P=this.y,A=this.z,b=this.w,O=y.x,D=y.y,B=y.z,G=y.w;return this.set(T*G+b*O+P*B-A*D,P*G+b*D+A*O-T*B,A*G+b*B+T*D-P*O,b*G-T*O-P*D-A*B)},slerp:function(y,T){var P=this.x,A=this.y,b=this.z,O=this.w,D=y.x,B=y.y,G=y.z,V=y.w,k=P*D+A*B+b*G+O*V;k<0&&(k=-k,D=-D,B=-B,G=-G,V=-V);var U=1-T,W=T;if(1-k>h){var X=Math.acos(k),_=Math.sin(X);U=Math.sin((1-T)*X)/_,W=Math.sin(T*X)/_}return this.set(U*P+W*D,U*A+W*B,U*b+W*G,U*O+W*V)},invert:function(){var y=this.x,T=this.y,P=this.z,A=this.w,b=y*y+T*T+P*P+A*A,O=b?1/b:0;return this.set(-y*O,-T*O,-P*O,A*O)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(y){y*=.5;var T=this.x,P=this.y,A=this.z,b=this.w,O=Math.sin(y),D=Math.cos(y);return this.set(T*D+b*O,P*D+A*O,A*D-P*O,b*D-T*O)},rotateY:function(y){y*=.5;var T=this.x,P=this.y,A=this.z,b=this.w,O=Math.sin(y),D=Math.cos(y);return this.set(T*D-A*O,P*D+b*O,A*D+T*O,b*D-P*O)},rotateZ:function(y){y*=.5;var T=this.x,P=this.y,A=this.z,b=this.w,O=Math.sin(y),D=Math.cos(y);return this.set(T*D+P*O,P*D-T*O,A*D+b*O,b*D-A*O)},calculateW:function(){var y=this.x,T=this.y,P=this.z;return this.w=-Math.sqrt(1-y*y-T*T-P*P),this},setFromEuler:function(y,T){var P=y.x/2,A=y.y/2,b=y.z/2,O=Math.cos(P),D=Math.cos(A),B=Math.cos(b),G=Math.sin(P),V=Math.sin(A),k=Math.sin(b);switch(y.order){case"XYZ":{this.set(G*D*B+O*V*k,O*V*B-G*D*k,O*D*k+G*V*B,O*D*B-G*V*k,T);break}case"YXZ":{this.set(G*D*B+O*V*k,O*V*B-G*D*k,O*D*k-G*V*B,O*D*B+G*V*k,T);break}case"ZXY":{this.set(G*D*B-O*V*k,O*V*B+G*D*k,O*D*k+G*V*B,O*D*B-G*V*k,T);break}case"ZYX":{this.set(G*D*B-O*V*k,O*V*B+G*D*k,O*D*k-G*V*B,O*D*B+G*V*k,T);break}case"YZX":{this.set(G*D*B+O*V*k,O*V*B+G*D*k,O*D*k-G*V*B,O*D*B-G*V*k,T);break}case"XZY":{this.set(G*D*B-O*V*k,O*V*B-G*D*k,O*D*k+G*V*B,O*D*B+G*V*k,T);break}}return this},setFromRotationMatrix:function(y){var T=y.val,P=T[0],A=T[4],b=T[8],O=T[1],D=T[5],B=T[9],G=T[2],V=T[6],k=T[10],U=P+D+k,W;return U>0?(W=.5/Math.sqrt(U+1),this.set((V-B)*W,(b-G)*W,(O-A)*W,.25/W)):P>D&&P>k?(W=2*Math.sqrt(1+P-D-k),this.set(.25*W,(A+O)/W,(b+G)/W,(V-B)/W)):D>k?(W=2*Math.sqrt(1+D-P-k),this.set((A+O)/W,.25*W,(B+V)/W,(b-G)/W)):(W=2*Math.sqrt(1+k-P-D),this.set((b+G)/W,(B+V)/W,.25*W,(O-A)/W)),this},fromMat3:function(y){var T=y.val,P=T[0]+T[4]+T[8],A;if(P>0)A=Math.sqrt(P+1),this.w=.5*A,A=.5/A,this._x=(T[7]-T[5])*A,this._y=(T[2]-T[6])*A,this._z=(T[3]-T[1])*A;else{var b=0;T[4]>T[0]&&(b=1),T[8]>T[b*3+b]&&(b=2);var O=r[b],D=r[O];A=Math.sqrt(T[b*3+b]-T[O*3+O]-T[D*3+D]+1),o[b]=.5*A,A=.5/A,o[O]=(T[O*3+b]+T[b*3+O])*A,o[D]=(T[D*3+b]+T[b*3+D])*A,this._x=o[0],this._y=o[1],this._z=o[2],this._w=(T[D*3+O]-T[O*3+D])*A}return this.onChangeCallback(this),this}});m.exports=g},43396:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(36383),S=function(u){return u*d.RAD_TO_DEG};m.exports=S},74362:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){d===void 0&&(d=1);var S=Math.random()*2*Math.PI;return i.x=Math.cos(S)*d,i.y=Math.sin(S)*d,i};m.exports=E},60706:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){d===void 0&&(d=1);var S=Math.random()*2*Math.PI,u=Math.random()*2-1,l=Math.sqrt(1-u*u)*d;return i.x=Math.cos(S)*l,i.y=Math.sin(S)*l,i.z=u*d,i};m.exports=E},67421:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return d===void 0&&(d=1),i.x=(Math.random()*2-1)*d,i.y=(Math.random()*2-1)*d,i.z=(Math.random()*2-1)*d,i.w=(Math.random()*2-1)*d,i};m.exports=E},36305:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){var S=i.x,u=i.y;return i.x=S*Math.cos(d)-u*Math.sin(d),i.y=S*Math.sin(d)+u*Math.cos(d),i};m.exports=E},11520:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){var l=Math.cos(u),h=Math.sin(u),r=i.x-d,o=i.y-S;return i.x=r*l-o*h+d,i.y=r*h+o*l+S,i};m.exports=E},1163:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u,l){var h=u+Math.atan2(i.y-S,i.x-d);return i.x=d+l*Math.cos(h),i.y=S+l*Math.sin(h),i};m.exports=E},70336:m=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u,l){return i.x=d+l*Math.cos(u),i.y=S+l*Math.sin(u),i};m.exports=E},72678:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(25836),S=i(37867),u=i(15746),l=new S,h=new u,r=new d,o=function(p,a,v){return h.setAxisAngle(a,v),l.fromRotationTranslation(h,r.set(0,0,0)),p.transformMat4(l)};m.exports=o},2284:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i>0?Math.ceil(i):Math.floor(i)};m.exports=E},41013:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){d===void 0&&(d=0),S===void 0&&(S=10);var u=Math.pow(S,-d);return Math.round(i*u)/u};m.exports=E},16922:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){d===void 0&&(d=1),S===void 0&&(S=1),u===void 0&&(u=1),u*=Math.PI/i;for(var l=[],h=[],r=0;r<i;r++)S-=d*u,d+=S*u,l[r]=S,h[r]=d;return{sin:h,cos:l,length:i}};m.exports=E},7602:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){return i<=d?0:i>=S?1:(i=(i-d)/(S-d),i*i*(3-2*i))};m.exports=E},54261:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){return i=Math.max(0,Math.min(1,(i-d)/(S-d))),i*i*i*(i*(i*6-15)+10)};m.exports=E},44408:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26099),S=function(u,l,h,r){r===void 0&&(r=new d);var o=0,p=0,a=l*h;return u>0&&u<=a&&(u>l-1?(p=Math.floor(u/l),o=u-p*l):o=u),r.set(o,p)};m.exports=S},85955:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26099),S=function(u,l,h,r,o,p,a,v){v===void 0&&(v=new d);var x=Math.sin(o),g=Math.cos(o),y=g*p,T=x*p,P=-x*a,A=g*a,b=1/(y*A+P*-T);return v.x=A*b*u+-P*b*l+(r*P-h*A)*b,v.y=y*b*l+-T*b*u+(-r*y+h*T)*b,v};m.exports=S},26099:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(43855),u=new d({initialize:function(h,r){this.x=0,this.y=0,typeof h=="object"?(this.x=h.x||0,this.y=h.y||0):(r===void 0&&(r=h),this.x=h||0,this.y=r||0)},clone:function(){return new u(this.x,this.y)},copy:function(l){return this.x=l.x||0,this.y=l.y||0,this},setFromObject:function(l){return this.x=l.x||0,this.y=l.y||0,this},set:function(l,h){return h===void 0&&(h=l),this.x=l,this.y=h,this},setTo:function(l,h){return this.set(l,h)},setToPolar:function(l,h){return h==null&&(h=1),this.x=Math.cos(l)*h,this.y=Math.sin(l)*h,this},equals:function(l){return this.x===l.x&&this.y===l.y},fuzzyEquals:function(l,h){return S(this.x,l.x,h)&&S(this.y,l.y,h)},angle:function(){var l=Math.atan2(this.y,this.x);return l<0&&(l+=2*Math.PI),l},setAngle:function(l){return this.setToPolar(l,this.length())},add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.x-=l.x,this.y-=l.y,this},multiply:function(l){return this.x*=l.x,this.y*=l.y,this},scale:function(l){return isFinite(l)?(this.x*=l,this.y*=l):(this.x=0,this.y=0),this},divide:function(l){return this.x/=l.x,this.y/=l.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(l){var h=l.x-this.x,r=l.y-this.y;return Math.sqrt(h*h+r*r)},distanceSq:function(l){var h=l.x-this.x,r=l.y-this.y;return h*h+r*r},length:function(){var l=this.x,h=this.y;return Math.sqrt(l*l+h*h)},setLength:function(l){return this.normalize().scale(l)},lengthSq:function(){var l=this.x,h=this.y;return l*l+h*h},normalize:function(){var l=this.x,h=this.y,r=l*l+h*h;return r>0&&(r=1/Math.sqrt(r),this.x=l*r,this.y=h*r),this},normalizeRightHand:function(){var l=this.x;return this.x=this.y*-1,this.y=l,this},normalizeLeftHand:function(){var l=this.x;return this.x=this.y,this.y=l*-1,this},dot:function(l){return this.x*l.x+this.y*l.y},cross:function(l){return this.x*l.y-this.y*l.x},lerp:function(l,h){h===void 0&&(h=0);var r=this.x,o=this.y;return this.x=r+h*(l.x-r),this.y=o+h*(l.y-o),this},transformMat3:function(l){var h=this.x,r=this.y,o=l.val;return this.x=o[0]*h+o[3]*r+o[6],this.y=o[1]*h+o[4]*r+o[7],this},transformMat4:function(l){var h=this.x,r=this.y,o=l.val;return this.x=o[0]*h+o[4]*r+o[12],this.y=o[1]*h+o[5]*r+o[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(l){var h=this.length();return h&&h>l&&this.scale(l/h),this},reflect:function(l){return l=l.clone().normalize(),this.subtract(l.scale(2*this.dot(l)))},mirror:function(l){return this.reflect(l).negate()},rotate:function(l){var h=Math.cos(l),r=Math.sin(l);return this.set(h*this.x-r*this.y,r*this.x+h*this.y)},project:function(l){var h=this.dot(l)/l.dot(l);return this.copy(l).scale(h)}});u.ZERO=new u,u.RIGHT=new u(1,0),u.LEFT=new u(-1,0),u.UP=new u(0,-1),u.DOWN=new u(0,1),u.ONE=new u(1,1),m.exports=u},25836:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=new d({initialize:function(l,h,r){this.x=0,this.y=0,this.z=0,typeof l=="object"?(this.x=l.x||0,this.y=l.y||0,this.z=l.z||0):(this.x=l||0,this.y=h||0,this.z=r||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(u){return this.x=Math.min(this.x,u.x),this.y=Math.min(this.y,u.y),this.z=Math.min(this.z,u.z),this},max:function(u){return this.x=Math.max(this.x,u.x),this.y=Math.max(this.y,u.y),this.z=Math.max(this.z,u.z),this},clone:function(){return new S(this.x,this.y,this.z)},addVectors:function(u,l){return this.x=u.x+l.x,this.y=u.y+l.y,this.z=u.z+l.z,this},subVectors:function(u,l){return this.x=u.x-l.x,this.y=u.y-l.y,this.z=u.z-l.z,this},crossVectors:function(u,l){var h=u.x,r=u.y,o=u.z,p=l.x,a=l.y,v=l.z;return this.x=r*v-o*a,this.y=o*p-h*v,this.z=h*a-r*p,this},equals:function(u){return this.x===u.x&&this.y===u.y&&this.z===u.z},copy:function(u){return this.x=u.x,this.y=u.y,this.z=u.z||0,this},set:function(u,l,h){return typeof u=="object"?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0):(this.x=u||0,this.y=l||0,this.z=h||0),this},setFromMatrixPosition:function(u){return this.fromArray(u.val,12)},setFromMatrixColumn:function(u,l){return this.fromArray(u.val,l*4)},fromArray:function(u,l){return l===void 0&&(l=0),this.x=u[l],this.y=u[l+1],this.z=u[l+2],this},add:function(u){return this.x+=u.x,this.y+=u.y,this.z+=u.z||0,this},addScalar:function(u){return this.x+=u,this.y+=u,this.z+=u,this},addScale:function(u,l){return this.x+=u.x*l,this.y+=u.y*l,this.z+=u.z*l||0,this},subtract:function(u){return this.x-=u.x,this.y-=u.y,this.z-=u.z||0,this},multiply:function(u){return this.x*=u.x,this.y*=u.y,this.z*=u.z||1,this},scale:function(u){return isFinite(u)?(this.x*=u,this.y*=u,this.z*=u):(this.x=0,this.y=0,this.z=0),this},divide:function(u){return this.x/=u.x,this.y/=u.y,this.z/=u.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(u){var l=u.x-this.x,h=u.y-this.y,r=u.z-this.z||0;return Math.sqrt(l*l+h*h+r*r)},distanceSq:function(u){var l=u.x-this.x,h=u.y-this.y,r=u.z-this.z||0;return l*l+h*h+r*r},length:function(){var u=this.x,l=this.y,h=this.z;return Math.sqrt(u*u+l*l+h*h)},lengthSq:function(){var u=this.x,l=this.y,h=this.z;return u*u+l*l+h*h},normalize:function(){var u=this.x,l=this.y,h=this.z,r=u*u+l*l+h*h;return r>0&&(r=1/Math.sqrt(r),this.x=u*r,this.y=l*r,this.z=h*r),this},dot:function(u){return this.x*u.x+this.y*u.y+this.z*u.z},cross:function(u){var l=this.x,h=this.y,r=this.z,o=u.x,p=u.y,a=u.z;return this.x=h*a-r*p,this.y=r*o-l*a,this.z=l*p-h*o,this},lerp:function(u,l){l===void 0&&(l=0);var h=this.x,r=this.y,o=this.z;return this.x=h+l*(u.x-h),this.y=r+l*(u.y-r),this.z=o+l*(u.z-o),this},applyMatrix3:function(u){var l=this.x,h=this.y,r=this.z,o=u.val;return this.x=o[0]*l+o[3]*h+o[6]*r,this.y=o[1]*l+o[4]*h+o[7]*r,this.z=o[2]*l+o[5]*h+o[8]*r,this},applyMatrix4:function(u){var l=this.x,h=this.y,r=this.z,o=u.val,p=1/(o[3]*l+o[7]*h+o[11]*r+o[15]);return this.x=(o[0]*l+o[4]*h+o[8]*r+o[12])*p,this.y=(o[1]*l+o[5]*h+o[9]*r+o[13])*p,this.z=(o[2]*l+o[6]*h+o[10]*r+o[14])*p,this},transformMat3:function(u){var l=this.x,h=this.y,r=this.z,o=u.val;return this.x=l*o[0]+h*o[3]+r*o[6],this.y=l*o[1]+h*o[4]+r*o[7],this.z=l*o[2]+h*o[5]+r*o[8],this},transformMat4:function(u){var l=this.x,h=this.y,r=this.z,o=u.val;return this.x=o[0]*l+o[4]*h+o[8]*r+o[12],this.y=o[1]*l+o[5]*h+o[9]*r+o[13],this.z=o[2]*l+o[6]*h+o[10]*r+o[14],this},transformCoordinates:function(u){var l=this.x,h=this.y,r=this.z,o=u.val,p=l*o[0]+h*o[4]+r*o[8]+o[12],a=l*o[1]+h*o[5]+r*o[9]+o[13],v=l*o[2]+h*o[6]+r*o[10]+o[14],x=l*o[3]+h*o[7]+r*o[11]+o[15];return this.x=p/x,this.y=a/x,this.z=v/x,this},transformQuat:function(u){var l=this.x,h=this.y,r=this.z,o=u.x,p=u.y,a=u.z,v=u.w,x=v*l+p*r-a*h,g=v*h+a*l-o*r,y=v*r+o*h-p*l,T=-o*l-p*h-a*r;return this.x=x*v+T*-o+g*-a-y*-p,this.y=g*v+T*-p+y*-o-x*-a,this.z=y*v+T*-a+x*-p-g*-o,this},project:function(u){var l=this.x,h=this.y,r=this.z,o=u.val,p=o[0],a=o[1],v=o[2],x=o[3],g=o[4],y=o[5],T=o[6],P=o[7],A=o[8],b=o[9],O=o[10],D=o[11],B=o[12],G=o[13],V=o[14],k=o[15],U=1/(l*x+h*P+r*D+k);return this.x=(l*p+h*g+r*A+B)*U,this.y=(l*a+h*y+r*b+G)*U,this.z=(l*v+h*T+r*O+V)*U,this},projectViewMatrix:function(u,l){return this.applyMatrix4(u).applyMatrix4(l)},unprojectViewMatrix:function(u,l){return this.applyMatrix4(u).applyMatrix4(l)},unproject:function(u,l){var h=u.x,r=u.y,o=u.z,p=u.w,a=this.x-h,v=p-this.y-1-r,x=this.z;return this.x=2*a/o-1,this.y=2*v/p-1,this.z=2*x-1,this.project(l)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});S.ZERO=new S,S.RIGHT=new S(1,0,0),S.LEFT=new S(-1,0,0),S.UP=new S(0,-1,0),S.DOWN=new S(0,1,0),S.FORWARD=new S(0,0,1),S.BACK=new S(0,0,-1),S.ONE=new S(1,1,1),m.exports=S},61369:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=new d({initialize:function(l,h,r,o){this.x=0,this.y=0,this.z=0,this.w=0,typeof l=="object"?(this.x=l.x||0,this.y=l.y||0,this.z=l.z||0,this.w=l.w||0):(this.x=l||0,this.y=h||0,this.z=r||0,this.w=o||0)},clone:function(){return new S(this.x,this.y,this.z,this.w)},copy:function(u){return this.x=u.x,this.y=u.y,this.z=u.z||0,this.w=u.w||0,this},equals:function(u){return this.x===u.x&&this.y===u.y&&this.z===u.z&&this.w===u.w},set:function(u,l,h,r){return typeof u=="object"?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0,this.w=u.w||0):(this.x=u||0,this.y=l||0,this.z=h||0,this.w=r||0),this},add:function(u){return this.x+=u.x,this.y+=u.y,this.z+=u.z||0,this.w+=u.w||0,this},subtract:function(u){return this.x-=u.x,this.y-=u.y,this.z-=u.z||0,this.w-=u.w||0,this},scale:function(u){return this.x*=u,this.y*=u,this.z*=u,this.w*=u,this},length:function(){var u=this.x,l=this.y,h=this.z,r=this.w;return Math.sqrt(u*u+l*l+h*h+r*r)},lengthSq:function(){var u=this.x,l=this.y,h=this.z,r=this.w;return u*u+l*l+h*h+r*r},normalize:function(){var u=this.x,l=this.y,h=this.z,r=this.w,o=u*u+l*l+h*h+r*r;return o>0&&(o=1/Math.sqrt(o),this.x=u*o,this.y=l*o,this.z=h*o,this.w=r*o),this},dot:function(u){return this.x*u.x+this.y*u.y+this.z*u.z+this.w*u.w},lerp:function(u,l){l===void 0&&(l=0);var h=this.x,r=this.y,o=this.z,p=this.w;return this.x=h+l*(u.x-h),this.y=r+l*(u.y-r),this.z=o+l*(u.z-o),this.w=p+l*(u.w-p),this},multiply:function(u){return this.x*=u.x,this.y*=u.y,this.z*=u.z||1,this.w*=u.w||1,this},divide:function(u){return this.x/=u.x,this.y/=u.y,this.z/=u.z||1,this.w/=u.w||1,this},distance:function(u){var l=u.x-this.x,h=u.y-this.y,r=u.z-this.z||0,o=u.w-this.w||0;return Math.sqrt(l*l+h*h+r*r+o*o)},distanceSq:function(u){var l=u.x-this.x,h=u.y-this.y,r=u.z-this.z||0,o=u.w-this.w||0;return l*l+h*h+r*r+o*o},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(u){var l=this.x,h=this.y,r=this.z,o=this.w,p=u.val;return this.x=p[0]*l+p[4]*h+p[8]*r+p[12]*o,this.y=p[1]*l+p[5]*h+p[9]*r+p[13]*o,this.z=p[2]*l+p[6]*h+p[10]*r+p[14]*o,this.w=p[3]*l+p[7]*h+p[11]*r+p[15]*o,this},transformQuat:function(u){var l=this.x,h=this.y,r=this.z,o=u.x,p=u.y,a=u.z,v=u.w,x=v*l+p*r-a*h,g=v*h+a*l-o*r,y=v*r+o*h-p*l,T=-o*l-p*h-a*r;return this.x=x*v+T*-o+g*-a-y*-p,this.y=g*v+T*-p+y*-o-x*-a,this.z=y*v+T*-a+x*-p-g*-o,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});S.prototype.sub=S.prototype.subtract,S.prototype.mul=S.prototype.multiply,S.prototype.div=S.prototype.divide,S.prototype.dist=S.prototype.distance,S.prototype.distSq=S.prototype.distanceSq,S.prototype.len=S.prototype.length,S.prototype.lenSq=S.prototype.lengthSq,m.exports=S},60417:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){return Math.abs(i-d)<=S};m.exports=E},15994:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){var u=S-d;return d+((i-d)%u+u)%u};m.exports=E},31040:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){return Math.atan2(u-d,S-i)};m.exports=E},55495:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return Math.atan2(d.y-i.y,d.x-i.x)};m.exports=E},128:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return Math.atan2(d.x-i.x,d.y-i.y)};m.exports=E},41273:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){return Math.atan2(S-i,u-d)};m.exports=E},1432:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(36383),S=function(u){return u>Math.PI&&(u-=d.PI2),Math.abs(((u+d.TAU)%d.PI2-d.PI2)%d.PI2)};m.exports=S},49127:(m,E,i)=>{/**
 * @author       samme
 * @copyright    2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(12407),S=function(u,l){return d(l-u)};m.exports=S},52285:(m,E,i)=>{/**
 * @author       samme
 * @copyright    2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(12407),S=2*Math.PI,u=function(l,h){var r=d(h-l);return r>0&&(r-=S),r};m.exports=u},67317:(m,E,i)=>{/**
 * @author       samme
 * @copyright    2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(86554),S=function(u,l){return d(l-u)};m.exports=S},12407:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i=i%(2*Math.PI),i>=0?i:i+2*Math.PI};m.exports=E},53993:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       @samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(99472),S=function(){return d(-Math.PI,Math.PI)};m.exports=S},86564:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       @samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(99472),S=function(){return d(-180,180)};m.exports=S},90154:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(12407),S=function(u){return d(u+Math.PI)};m.exports=S},48736:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(36383),S=function(u,l,h){return h===void 0&&(h=.05),u===l||(Math.abs(l-u)<=h||Math.abs(l-u)>=d.PI2-h?u=l:(Math.abs(l-u)>Math.PI&&(l<u?l+=d.PI2:l-=d.PI2),l>u?u+=h:l<u&&(u-=h))),u};m.exports=S},61430:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){var S=d-i;if(S===0)return 0;var u=Math.floor((S- -180)/360);return S-u*360};m.exports=E},86554:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(15994),S=function(u){return d(u,-Math.PI,Math.PI)};m.exports=S},30954:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(15994),S=function(u){return d(u,-180,180)};m.exports=S},25588:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Between:i(31040),BetweenPoints:i(55495),BetweenPointsY:i(128),BetweenY:i(41273),CounterClockwise:i(1432),GetClockwiseDistance:i(49127),GetCounterClockwiseDistance:i(52285),GetShortestDistance:i(67317),Normalize:i(12407),Random:i(53993),RandomDegrees:i(86564),Reverse:i(90154),RotateTo:i(48736),ShortestBetween:i(61430),Wrap:i(86554),WrapDegrees:i(30954)}},36383:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};m.exports=E},20339:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){var l=i-S,h=d-u;return Math.sqrt(l*l+h*h)};m.exports=E},52816:m=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){var S=i.x-d.x,u=i.y-d.y;return Math.sqrt(S*S+u*u)};m.exports=E},64559:m=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){var S=i.x-d.x,u=i.y-d.y;return S*S+u*u};m.exports=E},82340:m=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){return Math.max(Math.abs(i-S),Math.abs(d-u))};m.exports=E},14390:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u,l){return l===void 0&&(l=2),Math.sqrt(Math.pow(S-i,l)+Math.pow(u-d,l))};m.exports=E},2243:m=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){return Math.abs(i-S)+Math.abs(d-u)};m.exports=E},89774:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){var l=i-S,h=d-u;return l*l+h*h};m.exports=E},50994:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Between:i(20339),BetweenPoints:i(52816),BetweenPointsSquared:i(64559),Chebyshev:i(82340),Power:i(14390),Snake:i(2243),Squared:i(89774)}},62640:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(54178),S=i(41521),u=i(79980),l=i(85433),h=i(99140),r=i(48857),o=i(81596),p=i(59133),a=i(98516),v=i(35248),x=i(82500),g=i(49752);m.exports={Power0:o,Power1:p.Out,Power2:l.Out,Power3:a.Out,Power4:v.Out,Linear:o,Quad:p.Out,Cubic:l.Out,Quart:a.Out,Quint:v.Out,Sine:x.Out,Expo:r.Out,Circ:u.Out,Elastic:h.Out,Back:d.Out,Bounce:S.Out,Stepped:g,"Quad.easeIn":p.In,"Cubic.easeIn":l.In,"Quart.easeIn":a.In,"Quint.easeIn":v.In,"Sine.easeIn":x.In,"Expo.easeIn":r.In,"Circ.easeIn":u.In,"Elastic.easeIn":h.In,"Back.easeIn":d.In,"Bounce.easeIn":S.In,"Quad.easeOut":p.Out,"Cubic.easeOut":l.Out,"Quart.easeOut":a.Out,"Quint.easeOut":v.Out,"Sine.easeOut":x.Out,"Expo.easeOut":r.Out,"Circ.easeOut":u.Out,"Elastic.easeOut":h.Out,"Back.easeOut":d.Out,"Bounce.easeOut":S.Out,"Quad.easeInOut":p.InOut,"Cubic.easeInOut":l.InOut,"Quart.easeInOut":a.InOut,"Quint.easeInOut":v.InOut,"Sine.easeInOut":x.InOut,"Expo.easeInOut":r.InOut,"Circ.easeInOut":u.InOut,"Elastic.easeInOut":h.InOut,"Back.easeInOut":d.InOut,"Bounce.easeInOut":S.InOut}},1639:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return d===void 0&&(d=1.70158),i*i*((d+1)*i-d)};m.exports=E},50099:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){d===void 0&&(d=1.70158);var S=d*1.525;return(i*=2)<1?.5*(i*i*((S+1)*i-S)):.5*((i-=2)*i*((S+1)*i+S)+2)};m.exports=E},41286:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return d===void 0&&(d=1.70158),--i*i*((d+1)*i+d)+1};m.exports=E},54178:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={In:i(1639),Out:i(41286),InOut:i(50099)}},59590:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i=1-i,i<.36363636363636365?1-7.5625*i*i:i<.7272727272727273?1-(7.5625*(i-=.5454545454545454)*i+.75):i<.9090909090909091?1-(7.5625*(i-=.8181818181818182)*i+.9375):1-(7.5625*(i-=.9545454545454546)*i+.984375)};m.exports=E},41788:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){var d=!1;return i<.5?(i=1-i*2,d=!0):i=i*2-1,i<.36363636363636365?i=7.5625*i*i:i<.7272727272727273?i=7.5625*(i-=.5454545454545454)*i+.75:i<.9090909090909091?i=7.5625*(i-=.8181818181818182)*i+.9375:i=7.5625*(i-=.9545454545454546)*i+.984375,d?(1-i)*.5:i*.5+.5};m.exports=E},69905:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i<.36363636363636365?7.5625*i*i:i<.7272727272727273?7.5625*(i-=.5454545454545454)*i+.75:i<.9090909090909091?7.5625*(i-=.8181818181818182)*i+.9375:7.5625*(i-=.9545454545454546)*i+.984375};m.exports=E},41521:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={In:i(59590),Out:i(69905),InOut:i(41788)}},91861:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return 1-Math.sqrt(1-i*i)};m.exports=E},4177:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return(i*=2)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1)};m.exports=E},57512:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return Math.sqrt(1- --i*i)};m.exports=E},79980:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={In:i(91861),Out:i(57512),InOut:i(4177)}},51150:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i*i*i};m.exports=E},82820:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return(i*=2)<1?.5*i*i*i:.5*((i-=2)*i*i+2)};m.exports=E},35033:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return--i*i*i+1};m.exports=E},85433:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={In:i(51150),Out:i(35033),InOut:i(82820)}},69965:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){if(d===void 0&&(d=.1),S===void 0&&(S=.1),i===0)return 0;if(i===1)return 1;var u=S/4;return d<1?d=1:u=S*Math.asin(1/d)/(2*Math.PI),-(d*Math.pow(2,10*(i-=1))*Math.sin((i-u)*(2*Math.PI)/S))};m.exports=E},50665:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){if(d===void 0&&(d=.1),S===void 0&&(S=.1),i===0)return 0;if(i===1)return 1;var u=S/4;return d<1?d=1:u=S*Math.asin(1/d)/(2*Math.PI),(i*=2)<1?-.5*(d*Math.pow(2,10*(i-=1))*Math.sin((i-u)*(2*Math.PI)/S)):d*Math.pow(2,-10*(i-=1))*Math.sin((i-u)*(2*Math.PI)/S)*.5+1};m.exports=E},7744:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){if(d===void 0&&(d=.1),S===void 0&&(S=.1),i===0)return 0;if(i===1)return 1;var u=S/4;return d<1?d=1:u=S*Math.asin(1/d)/(2*Math.PI),d*Math.pow(2,-10*i)*Math.sin((i-u)*(2*Math.PI)/S)+1};m.exports=E},99140:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={In:i(69965),Out:i(7744),InOut:i(50665)}},24590:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return Math.pow(2,10*(i-1))-.001};m.exports=E},87844:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return(i*=2)<1?.5*Math.pow(2,10*(i-1)):.5*(2-Math.pow(2,-10*(i-1)))};m.exports=E},89433:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return 1-Math.pow(2,-10*i)};m.exports=E},48857:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={In:i(24590),Out:i(89433),InOut:i(87844)}},48820:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Back:i(54178),Bounce:i(41521),Circular:i(79980),Cubic:i(85433),Elastic:i(99140),Expo:i(48857),Linear:i(81596),Quadratic:i(59133),Quartic:i(98516),Quintic:i(35248),Sine:i(82500),Stepped:i(49752)}},7147:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i};m.exports=E},81596:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports=i(7147)},34826:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i*i};m.exports=E},20544:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return(i*=2)<1?.5*i*i:-.5*(--i*(i-2)-1)};m.exports=E},92029:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i*(2-i)};m.exports=E},59133:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={In:i(34826),Out:i(92029),InOut:i(20544)}},64413:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i*i*i*i};m.exports=E},78137:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return(i*=2)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2)};m.exports=E},45840:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return 1- --i*i*i*i};m.exports=E},98516:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={In:i(64413),Out:i(45840),InOut:i(78137)}},87745:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i*i*i*i*i};m.exports=E},16509:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return(i*=2)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2)};m.exports=E},17868:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return--i*i*i*i*i+1};m.exports=E},35248:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={In:i(87745),Out:i(17868),InOut:i(16509)}},80461:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i===0?0:i===1?1:1-Math.cos(i*Math.PI/2)};m.exports=E},34025:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i===0?0:i===1?1:.5*(1-Math.cos(Math.PI*i))};m.exports=E},52768:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i===0?0:i===1?1:Math.sin(i*Math.PI/2)};m.exports=E},82500:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={In:i(80461),Out:i(52768),InOut:i(34025)}},72251:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return d===void 0&&(d=1),i<=0?0:i>=1?1:((d*i|0)+1)*(1/d)};m.exports=E},49752:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports=i(72251)},75698:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return d===void 0&&(d=1e-4),Math.ceil(i-d)};m.exports=E},43855:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){return S===void 0&&(S=1e-4),Math.abs(i-d)<S};m.exports=E},25777:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return d===void 0&&(d=1e-4),Math.floor(i+d)};m.exports=E},5470:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){return S===void 0&&(S=1e-4),i>d-S};m.exports=E},94977:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){return S===void 0&&(S=1e-4),i<d+S};m.exports=E},48379:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Ceil:i(75698),Equal:i(43855),Floor:i(25777),GreaterThan:i(5470),LessThan:i(94977)}},75508:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(36383),S=i(79291),u={Angle:i(25588),Distance:i(50994),Easing:i(48820),Fuzzy:i(48379),Interpolation:i(38289),Pow2:i(49001),Snap:i(73697),RandomDataGenerator:i(28453),Average:i(53307),Bernstein:i(85710),Between:i(30976),CatmullRom:i(87842),CeilTo:i(26302),Clamp:i(45319),DegToRad:i(39506),Difference:i(61241),Euler:i(38857),Factorial:i(6411),FloatBetween:i(99472),FloorTo:i(77623),FromPercent:i(62945),GetSpeed:i(38265),IsEven:i(78702),IsEvenStrict:i(94883),Linear:i(28915),LinearXY:i(94908),MaxAdd:i(86883),Median:i(50040),MinSub:i(37204),Percent:i(65201),RadToDeg:i(43396),RandomXY:i(74362),RandomXYZ:i(60706),RandomXYZW:i(67421),Rotate:i(36305),RotateAround:i(11520),RotateAroundDistance:i(1163),RotateTo:i(70336),RoundAwayFromZero:i(2284),RoundTo:i(41013),SinCosTableGenerator:i(16922),SmootherStep:i(54261),SmoothStep:i(7602),ToXY:i(44408),TransformXY:i(85955),Within:i(60417),Wrap:i(15994),Vector2:i(26099),Vector3:i(25836),Vector4:i(61369),Matrix3:i(94434),Matrix4:i(37867),Quaternion:i(15746),RotateVec3:i(72678)};u=S(!1,u,d),m.exports=u},89318:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(85710),S=function(u,l){for(var h=0,r=u.length-1,o=0;o<=r;o++)h+=Math.pow(1-l,r-o)*Math.pow(l,o)*u[o]*d(r,o);return h};m.exports=S},77259:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87842),S=function(u,l){var h=u.length-1,r=h*l,o=Math.floor(r);return u[0]===u[h]?(l<0&&(o=Math.floor(r=h*(1+l))),d(r-o,u[(o-1+h)%h],u[o],u[(o+1)%h],u[(o+2)%h])):l<0?u[0]-(d(-r,u[0],u[0],u[1],u[1])-u[0]):l>1?u[h]-(d(r-h,u[h],u[h],u[h-1],u[h-1])-u[h]):d(r-o,u[o?o-1:0],u[o],u[h<o+1?h:o+1],u[h<o+2?h:o+2])};m.exports=S},36316:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function E(l,h){var r=1-l;return r*r*r*h}function i(l,h){var r=1-l;return 3*r*r*l*h}function d(l,h){return 3*(1-l)*l*l*h}function S(l,h){return l*l*l*h}var u=function(l,h,r,o,p){return E(l,h)+i(l,r)+d(l,o)+S(l,p)};m.exports=u},28392:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(28915),S=function(u,l){var h=u.length-1,r=h*l,o=Math.floor(r);return l<0?d(u[0],u[1],r):l>1?d(u[h],u[h-1],h-r):d(u[o],u[o+1>h?h:o+1],r-o)};m.exports=S},32112:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function E(u,l){var h=1-u;return h*h*l}function i(u,l){return 2*(1-u)*u*l}function d(u,l){return u*u*l}var S=function(u,l,h,r){return E(u,l)+i(u,h)+d(u,r)};m.exports=S},47235:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7602),S=function(u,l,h){return l+(h-l)*d(u,0,1)};m.exports=S},50178:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(54261),S=function(u,l,h){return l+(h-l)*d(u,0,1)};m.exports=S},38289:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Bezier:i(89318),CatmullRom:i(77259),CubicBezier:i(36316),Linear:i(28392),QuadraticBezier:i(32112),SmoothStep:i(47235),SmootherStep:i(50178)}},98439:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){var d=Math.log(i)/.6931471805599453;return 1<<Math.ceil(d)};m.exports=E},50030:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return i>0&&(i&i-1)===0&&d>0&&(d&d-1)===0};m.exports=E},81230:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i>0&&(i&i-1)===0};m.exports=E},49001:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={GetNext:i(98439),IsSize:i(50030),IsValue:i(81230)}},28453:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=new d({initialize:function(l){l===void 0&&(l=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],l&&this.init(l)},rnd:function(){var u=2091639*this.s0+this.c*23283064365386963e-26;return this.c=u|0,this.s0=this.s1,this.s1=this.s2,this.s2=u-this.c,this.s2},hash:function(u){var l,h=this.n;u=u.toString();for(var r=0;r<u.length;r++)h+=u.charCodeAt(r),l=.02519603282416938*h,h=l>>>0,l-=h,l*=h,h=l>>>0,l-=h,h+=l*4294967296;return this.n=h,(h>>>0)*23283064365386963e-26},init:function(u){typeof u=="string"?this.state(u):this.sow(u)},sow:function(u){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!u)for(var l=0;l<u.length&&u[l]!=null;l++){var h=u[l];this.s0-=this.hash(h),this.s0+=~~(this.s0<0),this.s1-=this.hash(h),this.s1+=~~(this.s1<0),this.s2-=this.hash(h),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(u,l){return Math.floor(this.realInRange(0,l-u+1)+u)},between:function(u,l){return Math.floor(this.realInRange(0,l-u+1)+u)},realInRange:function(u,l){return this.frac()*(l-u)+u},normal:function(){return 1-2*this.frac()},uuid:function(){var u="",l="";for(l=u="";u++<36;l+=~u%5|u*3&4?(u^15?8^this.frac()*(u^20?16:4):4).toString(16):"-");return l},pick:function(u){return u[this.integerInRange(0,u.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(u){return u[~~(Math.pow(this.frac(),2)*(u.length-.5)+.5)]},timestamp:function(u,l){return this.realInRange(u||9466848e5,l||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(u){return typeof u=="string"&&u.match(/^!rnd/)&&(u=u.split(","),this.c=parseFloat(u[1]),this.s0=parseFloat(u[2]),this.s1=parseFloat(u[3]),this.s2=parseFloat(u[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(u){for(var l=u.length-1,h=l;h>0;h--){var r=Math.floor(this.frac()*(h+1)),o=u[r];u[r]=u[h],u[h]=o}return u}});m.exports=S},63448:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){return S===void 0&&(S=0),d===0?i:(i-=S,i=d*Math.ceil(i/d),u?(S+i)/d:S+i)};m.exports=E},56583:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){return S===void 0&&(S=0),d===0?i:(i-=S,i=d*Math.floor(i/d),u?(S+i)/d:S+i)};m.exports=E},77720:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){return S===void 0&&(S=0),d===0?i:(i-=S,i=d*Math.round(i/d),u?(S+i)/d:S+i)};m.exports=E},73697:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Ceil:i(63448),Floor:i(56583),To:i(77720)}},85454:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */i(63595);var d=i(8054),S=i(79291),u={Actions:i(61061),Animations:i(60421),BlendModes:i(10312),Cache:i(83388),Cameras:i(26638),Core:i(42857),Class:i(83419),Create:i(15822),Curves:i(25410),Data:i(44965),Display:i(27460),DOM:i(84902),Events:i(93055),FX:i(66064),Game:i(50127),GameObjects:i(77856),Geom:i(55738),Input:i(14350),Loader:i(57777),Math:i(75508),Physics:i(44563),Plugins:i(18922),Renderer:i(36909),Scale:i(93364),ScaleModes:i(29795),Scene:i(97482),Scenes:i(62194),Structs:i(41392),Textures:i(27458),Tilemaps:i(62501),Time:i(90291),Tweens:i(43066),Utils:i(91799)};u.Sound=i(23717),u=S(!1,u,d),m.exports=u,i.g.Phaser=u},71289:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(92209),u=i(88571),l=new d({Extends:u,Mixins:[S.Acceleration,S.Angular,S.Bounce,S.Collision,S.Debug,S.Drag,S.Enable,S.Friction,S.Gravity,S.Immovable,S.Mass,S.Pushable,S.Size,S.Velocity],initialize:function(r,o,p,a,v){u.call(this,r,o,p,a,v),this.body=null}});m.exports=l},86689:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(39506),u=i(20339),l=i(89774),h=i(66022),r=i(95540),o=i(46975),p=i(72441),a=i(47956),v=i(37277),x=i(44594),g=i(26099),y=i(82248),T=new d({initialize:function(A){this.scene=A,this.systems=A.sys,this.config=this.getConfig(),this.world,this.add,this._category=1,A.sys.events.once(x.BOOT,this.boot,this),A.sys.events.on(x.START,this.start,this)},boot:function(){this.world=new y(this.scene,this.config),this.add=new h(this.world),this.systems.events.once(x.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new y(this.scene,this.config),this.add=new h(this.world));var P=this.systems.events;r(this.config,"customUpdate",!1)||P.on(x.UPDATE,this.world.update,this.world),P.on(x.POST_UPDATE,this.world.postUpdate,this.world),P.once(x.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(x.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(x.UPDATE,this.world.update,this.world)},getConfig:function(){var P=this.systems.game.config.physics,A=this.systems.settings.physics,b=o(r(A,"arcade",{}),r(P,"arcade",{}));return b},nextCategory:function(){return this._category=this._category<<1,this._category},overlap:function(P,A,b,O,D){return b===void 0&&(b=null),O===void 0&&(O=null),D===void 0&&(D=b),this.world.collideObjects(P,A,b,O,D,!0)},collide:function(P,A,b,O,D){return b===void 0&&(b=null),O===void 0&&(O=null),D===void 0&&(D=b),this.world.collideObjects(P,A,b,O,D,!1)},collideTiles:function(P,A,b,O,D){return this.world.collideTiles(P,A,b,O,D)},overlapTiles:function(P,A,b,O,D){return this.world.overlapTiles(P,A,b,O,D)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(P,A,b,O,D,B){O===void 0&&(O=60);var G=Math.atan2(b-P.y,A-P.x);return P.body.acceleration.setToPolar(G,O),D!==void 0&&B!==void 0&&P.body.maxVelocity.set(D,B),G},accelerateToObject:function(P,A,b,O,D){return this.accelerateTo(P,A.x,A.y,b,O,D)},closest:function(P,A){A||(A=this.world.bodies.entries);for(var b=Number.MAX_VALUE,O=null,D=P.x,B=P.y,G=A.length,V=0;V<G;V++){var k=A[V],U=k.body||k;if(!(P===k||P===U||P===U.gameObject||P===U.center)){var W=l(D,B,U.center.x,U.center.y);W<b&&(O=k,b=W)}}return O},furthest:function(P,A){A||(A=this.world.bodies.entries);for(var b=-1,O=null,D=P.x,B=P.y,G=A.length,V=0;V<G;V++){var k=A[V],U=k.body||k;if(!(P===k||P===U||P===U.gameObject||P===U.center)){var W=l(D,B,U.center.x,U.center.y);W>b&&(O=k,b=W)}}return O},moveTo:function(P,A,b,O,D){O===void 0&&(O=60),D===void 0&&(D=0);var B=Math.atan2(b-P.y,A-P.x);return D>0&&(O=u(P.x,P.y,A,b)/(D/1e3)),P.body.velocity.setToPolar(B,O),B},moveToObject:function(P,A,b,O){return this.moveTo(P,A.x,A.y,b,O)},velocityFromAngle:function(P,A,b){return A===void 0&&(A=60),b===void 0&&(b=new g),b.setToPolar(S(P),A)},velocityFromRotation:function(P,A,b){return A===void 0&&(A=60),b===void 0&&(b=new g),b.setToPolar(P,A)},overlapRect:function(P,A,b,O,D,B){return a(this.world,P,A,b,O,D,B)},overlapCirc:function(P,A,b,O,D){return p(this.world,P,A,b,O,D)},shutdown:function(){if(this.world){var P=this.systems.events;P.off(x.UPDATE,this.world.update,this.world),P.off(x.POST_UPDATE,this.world.postUpdate,this.world),P.off(x.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null,this._category=1}},destroy:function(){this.shutdown(),this.scene.sys.events.off(x.START,this.start,this),this.scene=null,this.systems=null}});v.register("ArcadePhysics",T,"arcadePhysics"),m.exports=T},13759:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(92209),u=i(68287),l=new d({Extends:u,Mixins:[S.Acceleration,S.Angular,S.Bounce,S.Collision,S.Debug,S.Drag,S.Enable,S.Friction,S.Gravity,S.Immovable,S.Mass,S.Pushable,S.Size,S.Velocity],initialize:function(r,o,p,a,v){u.call(this,r,o,p,a,v),this.body=null}});m.exports=l},37742:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(78389),u=i(37747),l=i(63012),h=i(43396),r=i(87841),o=i(37303),p=i(95829),a=i(26099),v=new d({Mixins:[S],initialize:function(g,y){var T=64,P=64,A={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},b=y!==void 0;b&&y.displayWidth&&(T=y.displayWidth,P=y.displayHeight),b||(y=A),this.world=g,this.gameObject=b?y:void 0,this.isBody=!0,this.transform={x:y.x,y:y.y,rotation:y.angle,scaleX:y.scaleX,scaleY:y.scaleY,displayOriginX:y.displayOriginX,displayOriginY:y.displayOriginY},this.debugShowBody=g.defaults.debugShowBody,this.debugShowVelocity=g.defaults.debugShowVelocity,this.debugBodyColor=g.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new a,this.position=new a(y.x-y.scaleX*y.displayOriginX,y.y-y.scaleY*y.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=y.angle,this.preRotation=y.angle,this.width=T,this.height=P,this.sourceWidth=T,this.sourceHeight=P,y.frame&&(this.sourceWidth=y.frame.realWidth,this.sourceHeight=y.frame.realHeight),this.halfWidth=Math.abs(T/2),this.halfHeight=Math.abs(P/2),this.center=new a(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new a,this.newVelocity=new a,this.deltaMax=new a,this.acceleration=new a,this.allowDrag=!0,this.drag=new a,this.allowGravity=!0,this.gravity=new a,this.bounce=new a,this.worldBounce=null,this.customBoundsRectangle=g.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new a(1e4,1e4),this.maxSpeed=-1,this.friction=new a(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=u.FACING_NONE,this.immovable=!1,this.pushable=!0,this.slideFactor=new a(1,1),this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=p(!1),this.touching=p(!0),this.wasTouching=p(!0),this.blocked=p(!0),this.syncBounds=!1,this.physicsType=u.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._sx=y.scaleX,this._sy=y.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new r,this.directControl=!1,this.autoFrame=this.position.clone()},updateBounds:function(){var x=this.gameObject,g=this.transform;if(x.parentContainer){var y=x.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);g.x=y.tx,g.y=y.ty,g.rotation=h(y.rotation),g.scaleX=y.scaleX,g.scaleY=y.scaleY,g.displayOriginX=x.displayOriginX,g.displayOriginY=x.displayOriginY}else g.x=x.x,g.y=x.y,g.rotation=x.angle,g.scaleX=x.scaleX,g.scaleY=x.scaleY,g.displayOriginX=x.displayOriginX,g.displayOriginY=x.displayOriginY;var T=!1;if(this.syncBounds){var P=x.getBounds(this._bounds);this.width=P.width,this.height=P.height,T=!0}else{var A=Math.abs(g.scaleX),b=Math.abs(g.scaleY);(this._sx!==A||this._sy!==b)&&(this.width=this.sourceWidth*A,this.height=this.sourceHeight*b,this._sx=A,this._sy=b,T=!0)}T&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var x=this.transform;this.position.x=x.x+x.scaleX*(this.offset.x-x.displayOriginX),this.position.y=x.y+x.scaleY*(this.offset.y-x.displayOriginY),this.updateCenter()},resetFlags:function(x){x===void 0&&(x=!1);var g=this.wasTouching,y=this.touching,T=this.blocked;x?p(!0,g):(g.none=y.none,g.up=y.up,g.down=y.down,g.left=y.left,g.right=y.right),p(!0,y),p(!0,T),this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(x,g){if(x&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves){var y=this.position;this.prev.x=y.x,this.prev.y=y.y,this.prevFrame.x=y.x,this.prevFrame.y=y.y}x&&this.update(g)},update:function(x){var g=this.prev,y=this.position,T=this.velocity;if(g.set(y.x,y.y),!this.moves){this._dx=y.x-g.x,this._dy=y.y-g.y;return}if(this.directControl){var P=this.autoFrame;T.set((y.x-P.x)/x,(y.y-P.y)/x),this.world.updateMotion(this,x),this._dx=y.x-P.x,this._dy=y.y-P.y}else this.world.updateMotion(this,x),this.newVelocity.set(T.x*x,T.y*x),y.add(this.newVelocity),this._dx=y.x-g.x,this._dy=y.y-g.y;var A=T.x,b=T.y;if(this.updateCenter(),this.angle=Math.atan2(b,A),this.speed=Math.sqrt(A*A+b*b),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds){var O=this.blocked;this.world.emit(l.WORLD_BOUNDS,this,O.up,O.down,O.left,O.right)}},postUpdate:function(){var x=this.position,g=x.x-this.prevFrame.x,y=x.y-this.prevFrame.y,T=this.gameObject;if(this.moves){var P=this.deltaMax.x,A=this.deltaMax.y;P!==0&&g!==0&&(g<0&&g<-P?g=-P:g>0&&g>P&&(g=P)),A!==0&&y!==0&&(y<0&&y<-A?y=-A:y>0&&y>A&&(y=A)),T&&(T.x+=g,T.y+=y)}g<0?this.facing=u.FACING_LEFT:g>0&&(this.facing=u.FACING_RIGHT),y<0?this.facing=u.FACING_UP:y>0&&(this.facing=u.FACING_DOWN),this.allowRotation&&T&&(T.angle+=this.deltaZ()),this._tx=g,this._ty=y,this.autoFrame.set(x.x,x.y)},setBoundsRectangle:function(x){return this.customBoundsRectangle=x||this.world.bounds,this},checkWorldBounds:function(){var x=this.position,g=this.velocity,y=this.blocked,T=this.customBoundsRectangle,P=this.world.checkCollision,A=this.worldBounce?-this.worldBounce.x:-this.bounce.x,b=this.worldBounce?-this.worldBounce.y:-this.bounce.y,O=!1;return x.x<T.x&&P.left?(x.x=T.x,g.x*=A,y.left=!0,O=!0):this.right>T.right&&P.right&&(x.x=T.right-this.width,g.x*=A,y.right=!0,O=!0),x.y<T.y&&P.up?(x.y=T.y,g.y*=b,y.up=!0,O=!0):this.bottom>T.bottom&&P.down&&(x.y=T.bottom-this.height,g.y*=b,y.down=!0,O=!0),O&&(this.blocked.none=!1,this.updateCenter()),O},setOffset:function(x,g){return g===void 0&&(g=x),this.offset.set(x,g),this},setGameObject:function(x,g){if(g===void 0&&(g=!0),!x||!x.hasTransformComponent)return this;var y=this.world;return this.gameObject&&this.gameObject.body&&(y.disable(this.gameObject),this.gameObject.body=null),x.body&&y.disable(x),this.gameObject=x,x.body=this,this.setSize(),this.enable=g,this},setSize:function(x,g,y){y===void 0&&(y=!0);var T=this.gameObject;if(T&&(!x&&T.frame&&(x=T.frame.realWidth),!g&&T.frame&&(g=T.frame.realHeight)),this.sourceWidth=x,this.sourceHeight=g,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),y&&T&&T.getCenter){var P=(T.width-x)/2,A=(T.height-g)/2;this.offset.set(P,A)}return this.isCircle=!1,this.radius=0,this},setCircle:function(x,g,y){return g===void 0&&(g=this.offset.x),y===void 0&&(y=this.offset.y),x>0?(this.isCircle=!0,this.radius=x,this.sourceWidth=x*2,this.sourceHeight=x*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(g,y),this.updateCenter()):this.isCircle=!1,this},reset:function(x,g){this.stop();var y=this.gameObject;y&&(y.setPosition(x,g),this.rotation=y.angle,this.preRotation=y.angle);var T=this.position;y&&y.getTopLeft?y.getTopLeft(T):T.set(x,g),this.prev.copy(T),this.prevFrame.copy(T),this.autoFrame.copy(T),y&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(x){return x.x=this.x,x.y=this.y,x.right=this.right,x.bottom=this.bottom,x},hitTest:function(x,g){if(!this.isCircle)return o(this,x,g);if(this.radius>0&&x>=this.left&&x<=this.right&&g>=this.top&&g<=this.bottom){var y=(this.center.x-x)*(this.center.x-x),T=(this.center.y-g)*(this.center.y-g);return y+T<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(x){var g=this.position,y=g.x+this.halfWidth,T=g.y+this.halfHeight;this.debugShowBody&&(x.lineStyle(x.defaultStrokeWidth,this.debugBodyColor),this.isCircle?x.strokeCircle(y,T,this.width/2):(this.checkCollision.up&&x.lineBetween(g.x,g.y,g.x+this.width,g.y),this.checkCollision.right&&x.lineBetween(g.x+this.width,g.y,g.x+this.width,g.y+this.height),this.checkCollision.down&&x.lineBetween(g.x,g.y+this.height,g.x+this.width,g.y+this.height),this.checkCollision.left&&x.lineBetween(g.x,g.y,g.x,g.y+this.height))),this.debugShowVelocity&&(x.lineStyle(x.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),x.lineBetween(y,T,y+this.velocity.x/2,T+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setDirectControl:function(x){return x===void 0&&(x=!0),this.directControl=x,this},setCollideWorldBounds:function(x,g,y,T){x===void 0&&(x=!0),this.collideWorldBounds=x;var P=g!==void 0,A=y!==void 0;return(P||A)&&(this.worldBounce||(this.worldBounce=new a),P&&(this.worldBounce.x=g),A&&(this.worldBounce.y=y)),T!==void 0&&(this.onWorldBounds=T),this},setVelocity:function(x,g){return this.velocity.set(x,g),x=this.velocity.x,g=this.velocity.y,this.speed=Math.sqrt(x*x+g*g),this},setVelocityX:function(x){return this.setVelocity(x,this.velocity.y)},setVelocityY:function(x){return this.setVelocity(this.velocity.x,x)},setMaxVelocity:function(x,g){return this.maxVelocity.set(x,g),this},setMaxVelocityX:function(x){return this.maxVelocity.x=x,this},setMaxVelocityY:function(x){return this.maxVelocity.y=x,this},setMaxSpeed:function(x){return this.maxSpeed=x,this},setSlideFactor:function(x,g){return this.slideFactor.set(x,g),this},setBounce:function(x,g){return this.bounce.set(x,g),this},setBounceX:function(x){return this.bounce.x=x,this},setBounceY:function(x){return this.bounce.y=x,this},setAcceleration:function(x,g){return this.acceleration.set(x,g),this},setAccelerationX:function(x){return this.acceleration.x=x,this},setAccelerationY:function(x){return this.acceleration.y=x,this},setAllowDrag:function(x){return x===void 0&&(x=!0),this.allowDrag=x,this},setAllowGravity:function(x){return x===void 0&&(x=!0),this.allowGravity=x,this},setAllowRotation:function(x){return x===void 0&&(x=!0),this.allowRotation=x,this},setDrag:function(x,g){return this.drag.set(x,g),this},setDamping:function(x){return this.useDamping=x,this},setDragX:function(x){return this.drag.x=x,this},setDragY:function(x){return this.drag.y=x,this},setGravity:function(x,g){return this.gravity.set(x,g),this},setGravityX:function(x){return this.gravity.x=x,this},setGravityY:function(x){return this.gravity.y=x,this},setFriction:function(x,g){return this.friction.set(x,g),this},setFrictionX:function(x){return this.friction.x=x,this},setFrictionY:function(x){return this.friction.y=x,this},setAngularVelocity:function(x){return this.angularVelocity=x,this},setAngularAcceleration:function(x){return this.angularAcceleration=x,this},setAngularDrag:function(x){return this.angularDrag=x,this},setMass:function(x){return this.mass=x,this},setImmovable:function(x){return x===void 0&&(x=!0),this.immovable=x,this},setEnable:function(x){return x===void 0&&(x=!0),this.enable=x,this},processX:function(x,g,y,T){this.x+=x,this.updateCenter(),g!==null&&(this.velocity.x=g*this.slideFactor.x);var P=this.blocked;y&&(P.left=!0,P.none=!1),T&&(P.right=!0,P.none=!1)},processY:function(x,g,y,T){this.y+=x,this.updateCenter(),g!==null&&(this.velocity.y=g*this.slideFactor.y);var P=this.blocked;y&&(P.up=!0,P.none=!1),T&&(P.down=!0,P.none=!1)},x:{get:function(){return this.position.x},set:function(x){this.position.x=x}},y:{get:function(){return this.position.y},set:function(x){this.position.y=x}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});m.exports=v},79342:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=new d({initialize:function(l,h,r,o,p,a,v){this.world=l,this.name="",this.active=!0,this.overlapOnly=h,this.object1=r,this.object2=o,this.collideCallback=p,this.processCallback=a,this.callbackContext=v},setName:function(u){return this.name=u,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});m.exports=S},66022:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(71289),S=i(13759),u=i(37742),l=i(83419),h=i(37747),r=i(60758),o=i(72624),p=i(71464),a=new l({initialize:function(x){this.world=x,this.scene=x.scene,this.sys=x.scene.sys},collider:function(v,x,g,y,T){return this.world.addCollider(v,x,g,y,T)},overlap:function(v,x,g,y,T){return this.world.addOverlap(v,x,g,y,T)},existing:function(v,x){var g=x?h.STATIC_BODY:h.DYNAMIC_BODY;return this.world.enableBody(v,g),v},staticImage:function(v,x,g,y){var T=new d(this.scene,v,x,g,y);return this.sys.displayList.add(T),this.world.enableBody(T,h.STATIC_BODY),T},image:function(v,x,g,y){var T=new d(this.scene,v,x,g,y);return this.sys.displayList.add(T),this.world.enableBody(T,h.DYNAMIC_BODY),T},staticSprite:function(v,x,g,y){var T=new S(this.scene,v,x,g,y);return this.sys.displayList.add(T),this.sys.updateList.add(T),this.world.enableBody(T,h.STATIC_BODY),T},sprite:function(v,x,g,y){var T=new S(this.scene,v,x,g,y);return this.sys.displayList.add(T),this.sys.updateList.add(T),this.world.enableBody(T,h.DYNAMIC_BODY),T},staticGroup:function(v,x){return this.sys.updateList.add(new p(this.world,this.world.scene,v,x))},group:function(v,x){return this.sys.updateList.add(new r(this.world,this.world.scene,v,x))},body:function(v,x,g,y){var T=new u(this.world);return T.position.set(v,x),g&&y&&T.setSize(g,y),this.world.add(T,h.DYNAMIC_BODY),T},staticBody:function(v,x,g,y){var T=new o(this.world);return T.position.set(v,x),g&&y&&T.setSize(g,y),this.world.add(T,h.STATIC_BODY),T},destroy:function(){this.world=null,this.scene=null,this.sys=null}});m.exports=a},79599:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){var d=0;if(!Array.isArray(i))d=i;else for(var S=0;S<i.length;S++)d|=i[S];return d};m.exports=E},64897:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(37747),S=function(u,l,h,r){var o=0,p=u.deltaAbsX()+l.deltaAbsX()+r;return u._dx===0&&l._dx===0?(u.embedded=!0,l.embedded=!0):u._dx>l._dx?(o=u.right-l.x,o>p&&!h||u.checkCollision.right===!1||l.checkCollision.left===!1?o=0:(u.touching.none=!1,u.touching.right=!0,l.touching.none=!1,l.touching.left=!0,l.physicsType===d.STATIC_BODY&&!h&&(u.blocked.none=!1,u.blocked.right=!0),u.physicsType===d.STATIC_BODY&&!h&&(l.blocked.none=!1,l.blocked.left=!0))):u._dx<l._dx&&(o=u.x-l.width-l.x,-o>p&&!h||u.checkCollision.left===!1||l.checkCollision.right===!1?o=0:(u.touching.none=!1,u.touching.left=!0,l.touching.none=!1,l.touching.right=!0,l.physicsType===d.STATIC_BODY&&!h&&(u.blocked.none=!1,u.blocked.left=!0),u.physicsType===d.STATIC_BODY&&!h&&(l.blocked.none=!1,l.blocked.right=!0))),u.overlapX=o,l.overlapX=o,o};m.exports=S},45170:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(37747),S=function(u,l,h,r){var o=0,p=u.deltaAbsY()+l.deltaAbsY()+r;return u._dy===0&&l._dy===0?(u.embedded=!0,l.embedded=!0):u._dy>l._dy?(o=u.bottom-l.y,o>p&&!h||u.checkCollision.down===!1||l.checkCollision.up===!1?o=0:(u.touching.none=!1,u.touching.down=!0,l.touching.none=!1,l.touching.up=!0,l.physicsType===d.STATIC_BODY&&!h&&(u.blocked.none=!1,u.blocked.down=!0),u.physicsType===d.STATIC_BODY&&!h&&(l.blocked.none=!1,l.blocked.up=!0))):u._dy<l._dy&&(o=u.y-l.bottom,-o>p&&!h||u.checkCollision.up===!1||l.checkCollision.down===!1?o=0:(u.touching.none=!1,u.touching.up=!0,l.touching.none=!1,l.touching.down=!0,l.physicsType===d.STATIC_BODY&&!h&&(u.blocked.none=!1,u.blocked.up=!0),u.physicsType===d.STATIC_BODY&&!h&&(l.blocked.none=!1,l.blocked.down=!0))),u.overlapY=o,l.overlapY=o,o};m.exports=S},60758:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(13759),S=i(83419),u=i(78389),l=i(37747),h=i(95540),r=i(26479),o=i(41212),p=new S({Extends:r,Mixins:[u],initialize:function(v,x,g,y){if(!g&&!y)y={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(o(g))y=g,g=null,y.internalCreateCallback=this.createCallbackHandler,y.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(g)&&o(g[0])){var T=this;g.forEach(function(P){P.internalCreateCallback=T.createCallbackHandler,P.internalRemoveCallback=T.removeCallbackHandler,P.classType=h(P,"classType",d)}),y=null}else y={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=v,y&&(y.classType=h(y,"classType",d)),this.physicsType=l.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=2147483647,this.defaults={setCollideWorldBounds:h(y,"collideWorldBounds",!1),setBoundsRectangle:h(y,"customBoundsRectangle",null),setAccelerationX:h(y,"accelerationX",0),setAccelerationY:h(y,"accelerationY",0),setAllowDrag:h(y,"allowDrag",!0),setAllowGravity:h(y,"allowGravity",!0),setAllowRotation:h(y,"allowRotation",!0),setDamping:h(y,"useDamping",!1),setBounceX:h(y,"bounceX",0),setBounceY:h(y,"bounceY",0),setDragX:h(y,"dragX",0),setDragY:h(y,"dragY",0),setEnable:h(y,"enable",!0),setGravityX:h(y,"gravityX",0),setGravityY:h(y,"gravityY",0),setFrictionX:h(y,"frictionX",0),setFrictionY:h(y,"frictionY",0),setMaxSpeed:h(y,"maxSpeed",-1),setMaxVelocityX:h(y,"maxVelocityX",1e4),setMaxVelocityY:h(y,"maxVelocityY",1e4),setVelocityX:h(y,"velocityX",0),setVelocityY:h(y,"velocityY",0),setAngularVelocity:h(y,"angularVelocity",0),setAngularAcceleration:h(y,"angularAcceleration",0),setAngularDrag:h(y,"angularDrag",0),setMass:h(y,"mass",1),setImmovable:h(y,"immovable",!1)},r.call(this,x,g,y),this.type="PhysicsGroup"},createCallbackHandler:function(a){a.body||this.world.enableBody(a,l.DYNAMIC_BODY);var v=a.body;for(var x in this.defaults)v[x](this.defaults[x])},removeCallbackHandler:function(a){a.body&&this.world.disableBody(a)},setVelocity:function(a,v,x){x===void 0&&(x=0);for(var g=this.getChildren(),y=0;y<g.length;y++)g[y].body.velocity.set(a+y*x,v+y*x);return this},setVelocityX:function(a,v){v===void 0&&(v=0);for(var x=this.getChildren(),g=0;g<x.length;g++)x[g].body.velocity.x=a+g*v;return this},setVelocityY:function(a,v){v===void 0&&(v=0);for(var x=this.getChildren(),g=0;g<x.length;g++)x[g].body.velocity.y=a+g*v;return this}});m.exports=p},3017:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E,i,d,S,u,l,h,r,o,p,a,v,x,g,y,T,P,A=function(V,k,U){E=V,i=k;var W=E.velocity.x,X=i.velocity.x;return d=E.pushable,o=E._dx<0,p=E._dx>0,a=E._dx===0,y=Math.abs(E.right-i.x)<=Math.abs(i.right-E.x),h=X-W*E.bounce.x,S=i.pushable,v=i._dx<0,x=i._dx>0,g=i._dx===0,T=!y,r=W-X*i.bounce.x,P=Math.abs(U),b()},b=function(){return p&&y&&i.blocked.right?(E.processX(-P,h,!1,!0),1):o&&T&&i.blocked.left?(E.processX(P,h,!0),1):x&&T&&E.blocked.right?(i.processX(-P,r,!1,!0),2):v&&y&&E.blocked.left?(i.processX(P,r,!0),2):0},O=function(){var V=E.velocity.x,k=i.velocity.x,U=Math.sqrt(k*k*i.mass/E.mass)*(k>0?1:-1),W=Math.sqrt(V*V*E.mass/i.mass)*(V>0?1:-1),X=(U+W)*.5;return U-=X,W-=X,u=X+U*E.bounce.x,l=X+W*i.bounce.x,o&&T?D(0):v&&y?D(1):p&&y?D(2):x&&T?D(3):!1},D=function(V){if(d&&S)P*=.5,V===0||V===3?(E.processX(P,u),i.processX(-P,l)):(E.processX(-P,u),i.processX(P,l));else if(d&&!S)V===0||V===3?E.processX(P,h,!0):E.processX(-P,h,!1,!0);else if(!d&&S)V===0||V===3?i.processX(-P,r,!1,!0):i.processX(P,r,!0);else{var k=P*.5;V===0?g?(E.processX(P,0,!0),i.processX(0,null,!1,!0)):x?(E.processX(k,0,!0),i.processX(-k,0,!1,!0)):(E.processX(k,i.velocity.x,!0),i.processX(-k,null,!1,!0)):V===1?a?(E.processX(0,null,!1,!0),i.processX(P,0,!0)):p?(E.processX(-k,0,!1,!0),i.processX(k,0,!0)):(E.processX(-k,null,!1,!0),i.processX(k,E.velocity.x,!0)):V===2?g?(E.processX(-P,0,!1,!0),i.processX(0,null,!0)):v?(E.processX(-k,0,!1,!0),i.processX(k,0,!0)):(E.processX(-k,i.velocity.x,!1,!0),i.processX(k,null,!0)):V===3&&(a?(E.processX(0,null,!0),i.processX(-P,0,!1,!0)):o?(E.processX(k,0,!0),i.processX(-k,0,!1,!0)):(E.processX(k,i.velocity.y,!0),i.processX(-k,null,!1,!0)))}return!0},B=function(V){if(V===1?i.velocity.x=0:y?i.processX(P,r,!0):i.processX(-P,r,!1,!0),E.moves){var k=E.directControl?E.y-E.autoFrame.y:E.y-E.prev.y;i.y+=k*E.friction.y,i._dy=i.y-i.prev.y}},G=function(V){if(V===2?E.velocity.x=0:T?E.processX(P,h,!0):E.processX(-P,h,!1,!0),i.moves){var k=i.directControl?i.y-i.autoFrame.y:i.y-i.prev.y;E.y+=k*i.friction.y,E._dy=E.y-E.prev.y}};m.exports={BlockCheck:b,Check:O,Set:A,Run:D,RunImmovableBody1:B,RunImmovableBody2:G}},47962:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E,i,d,S,u,l,h,r,o,p,a,v,x,g,y,T,P,A=function(V,k,U){E=V,i=k;var W=E.velocity.y,X=i.velocity.y;return d=E.pushable,o=E._dy<0,p=E._dy>0,a=E._dy===0,y=Math.abs(E.bottom-i.y)<=Math.abs(i.bottom-E.y),h=X-W*E.bounce.y,S=i.pushable,v=i._dy<0,x=i._dy>0,g=i._dy===0,T=!y,r=W-X*i.bounce.y,P=Math.abs(U),b()},b=function(){return p&&y&&i.blocked.down?(E.processY(-P,h,!1,!0),1):o&&T&&i.blocked.up?(E.processY(P,h,!0),1):x&&T&&E.blocked.down?(i.processY(-P,r,!1,!0),2):v&&y&&E.blocked.up?(i.processY(P,r,!0),2):0},O=function(){var V=E.velocity.y,k=i.velocity.y,U=Math.sqrt(k*k*i.mass/E.mass)*(k>0?1:-1),W=Math.sqrt(V*V*E.mass/i.mass)*(V>0?1:-1),X=(U+W)*.5;return U-=X,W-=X,u=X+U*E.bounce.y,l=X+W*i.bounce.y,o&&T?D(0):v&&y?D(1):p&&y?D(2):x&&T?D(3):!1},D=function(V){if(d&&S)P*=.5,V===0||V===3?(E.processY(P,u),i.processY(-P,l)):(E.processY(-P,u),i.processY(P,l));else if(d&&!S)V===0||V===3?E.processY(P,h,!0):E.processY(-P,h,!1,!0);else if(!d&&S)V===0||V===3?i.processY(-P,r,!1,!0):i.processY(P,r,!0);else{var k=P*.5;V===0?g?(E.processY(P,0,!0),i.processY(0,null,!1,!0)):x?(E.processY(k,0,!0),i.processY(-k,0,!1,!0)):(E.processY(k,i.velocity.y,!0),i.processY(-k,null,!1,!0)):V===1?a?(E.processY(0,null,!1,!0),i.processY(P,0,!0)):p?(E.processY(-k,0,!1,!0),i.processY(k,0,!0)):(E.processY(-k,null,!1,!0),i.processY(k,E.velocity.y,!0)):V===2?g?(E.processY(-P,0,!1,!0),i.processY(0,null,!0)):v?(E.processY(-k,0,!1,!0),i.processY(k,0,!0)):(E.processY(-k,i.velocity.y,!1,!0),i.processY(k,null,!0)):V===3&&(a?(E.processY(0,null,!0),i.processY(-P,0,!1,!0)):o?(E.processY(k,0,!0),i.processY(-k,0,!1,!0)):(E.processY(k,i.velocity.y,!0),i.processY(-k,null,!1,!0)))}return!0},B=function(V){if(V===1?i.velocity.y=0:y?i.processY(P,r,!0):i.processY(-P,r,!1,!0),E.moves){var k=E.directControl?E.x-E.autoFrame.x:E.x-E.prev.x;i.x+=k*E.friction.x,i._dx=i.x-i.prev.x}},G=function(V){if(V===2?E.velocity.y=0:T?E.processY(P,h,!0):E.processY(-P,h,!1,!0),i.moves){var k=i.directControl?i.x-i.autoFrame.x:i.x-i.prev.x;E.x+=k*i.friction.x,E._dx=E.x-E.prev.x}};m.exports={BlockCheck:b,Check:O,Set:A,Run:D,RunImmovableBody1:B,RunImmovableBody2:G}},14087:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(64897),S=i(3017),u=function(l,h,r,o,p){p===void 0&&(p=d(l,h,r,o));var a=l.immovable,v=h.immovable;if(r||p===0||a&&v||l.customSeparateX||h.customSeparateX)return p!==0||l.embedded&&h.embedded;var x=S.Set(l,h,p);return!a&&!v?x>0?!0:S.Check():(a?S.RunImmovableBody1(x):v&&S.RunImmovableBody2(x),!0)};m.exports=u},89936:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45170),S=i(47962),u=function(l,h,r,o,p){p===void 0&&(p=d(l,h,r,o));var a=l.immovable,v=h.immovable;if(r||p===0||a&&v||l.customSeparateY||h.customSeparateY)return p!==0||l.embedded&&h.embedded;var x=S.Set(l,h,p);return!a&&!v?x>0?!0:S.Check():(a?S.RunImmovableBody1(x):v&&S.RunImmovableBody2(x),!0)};m.exports=u},95829:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return d===void 0&&(d={}),d.none=i,d.up=!1,d.down=!1,d.left=!1,d.right=!1,i||(d.up=!0,d.down=!0,d.left=!0,d.right=!0),d};m.exports=E},72624:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87902),S=i(83419),u=i(78389),l=i(37747),h=i(37303),r=i(95829),o=i(26099),p=new S({Mixins:[u],initialize:function(v,x){var g=64,y=64,T={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},P=x!==void 0;P&&x.displayWidth&&(g=x.displayWidth,y=x.displayHeight),P||(x=T),this.world=v,this.gameObject=P?x:void 0,this.isBody=!0,this.debugShowBody=v.defaults.debugShowStaticBody,this.debugBodyColor=v.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new o,this.position=new o(x.x-g*x.originX,x.y-y*x.originY),this.width=g,this.height=y,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new o(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=o.ZERO,this.allowGravity=!1,this.gravity=o.ZERO,this.bounce=o.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=r(!1),this.touching=r(!0),this.wasTouching=r(!0),this.blocked=r(!0),this.physicsType=l.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._dx=0,this._dy=0},setGameObject:function(a,v,x){if(v===void 0&&(v=!0),x===void 0&&(x=!0),!a||!a.hasTransformComponent)return this;var g=this.world;return this.gameObject&&this.gameObject.body&&(g.disable(this.gameObject),this.gameObject.body=null),a.body&&g.disable(a),this.gameObject=a,a.body=this,this.setSize(),v&&this.updateFromGameObject(),this.enable=x,this},updateFromGameObject:function(){this.world.staticTree.remove(this);var a=this.gameObject;return a.getTopLeft(this.position),this.width=a.displayWidth,this.height=a.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(a,v){return v===void 0&&(v=a),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(a,v),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(a,v,x){x===void 0&&(x=!0);var g=this.gameObject;if(g&&g.frame&&(a||(a=g.frame.realWidth),v||(v=g.frame.realHeight)),this.world.staticTree.remove(this),this.width=a,this.height=v,this.halfWidth=Math.floor(a/2),this.halfHeight=Math.floor(v/2),x&&g&&g.getCenter){var y=g.displayWidth/2,T=g.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(y-this.halfWidth,T-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(a,v,x){return v===void 0&&(v=this.offset.x),x===void 0&&(x=this.offset.y),a>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=a,this.width=a*2,this.height=a*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(v,x),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(a,v){var x=this.gameObject;a===void 0&&(a=x.x),v===void 0&&(v=x.y),this.world.staticTree.remove(this),x.setPosition(a,v),x.getTopLeft(this.position),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(a){return a.x=this.x,a.y=this.y,a.right=this.right,a.bottom=this.bottom,a},hitTest:function(a,v){return this.isCircle?d(this,a,v):h(this,a,v)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(a){var v=this.position,x=v.x+this.halfWidth,g=v.y+this.halfHeight;this.debugShowBody&&(a.lineStyle(a.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?a.strokeCircle(x,g,this.width/2):a.strokeRect(v.x,v.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(a){return a<=0&&(a=.1),this.mass=a,this},x:{get:function(){return this.position.x},set:function(a){this.world.staticTree.remove(this),this.position.x=a,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(a){this.world.staticTree.remove(this),this.position.y=a,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});m.exports=p},71464:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(13759),S=i(83419),u=i(78389),l=i(37747),h=i(95540),r=i(26479),o=i(41212),p=new S({Extends:r,Mixins:[u],initialize:function(v,x,g,y){!g&&!y?y={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:d}:o(g)?(y=g,g=null,y.internalCreateCallback=this.createCallbackHandler,y.internalRemoveCallback=this.removeCallbackHandler,y.createMultipleCallback=this.createMultipleCallbackHandler,y.classType=h(y,"classType",d)):Array.isArray(g)&&o(g[0])?(y=g,g=null,y.forEach(function(T){T.internalCreateCallback=this.createCallbackHandler,T.internalRemoveCallback=this.removeCallbackHandler,T.createMultipleCallback=this.createMultipleCallbackHandler,T.classType=h(T,"classType",d)})):y={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=v,this.physicsType=l.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,r.call(this,x,g,y),this.type="StaticPhysicsGroup"},createCallbackHandler:function(a){a.body||this.world.enableBody(a,l.STATIC_BODY)},removeCallbackHandler:function(a){a.body&&this.world.disableBody(a)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var a=this.children.entries,v=0;v<a.length;v++)a[v].body.reset();return this}});m.exports=p},82248:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(55495),S=i(37742),u=i(45319),l=i(83419),h=i(79342),r=i(37747),o=i(20339),p=i(52816),a=i(50792),v=i(63012),x=i(43855),g=i(5470),y=i(94977),T=i(64897),P=i(45170),A=i(96523),b=i(35154),O=i(36383),D=i(25774),B=i(96602),G=i(87841),V=i(59542),k=i(40012),U=i(14087),W=i(89936),X=i(35072),_=i(72624),Q=i(2483),j=i(61340),it=i(26099),K=i(15994),J=new l({Extends:a,initialize:function(q,$){a.call(this),this.scene=q,this.bodies=new X,this.staticBodies=new X,this.pendingDestroy=new X,this.colliders=new D,this.gravity=new it(b($,"gravity.x",0),b($,"gravity.y",0)),this.bounds=new G(b($,"x",0),b($,"y",0),b($,"width",q.sys.scale.width),b($,"height",q.sys.scale.height)),this.checkCollision={up:b($,"checkCollision.up",!0),down:b($,"checkCollision.down",!0),left:b($,"checkCollision.left",!0),right:b($,"checkCollision.right",!0)},this.fps=b($,"fps",60),this.fixedStep=b($,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=b($,"timeScale",1),this.OVERLAP_BIAS=b($,"overlapBias",4),this.TILE_BIAS=b($,"tileBias",16),this.forceX=b($,"forceX",!1),this.isPaused=b($,"isPaused",!1),this._total=0,this.drawDebug=b($,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:b($,"debugShowBody",!0),debugShowStaticBody:b($,"debugShowStaticBody",!0),debugShowVelocity:b($,"debugShowVelocity",!0),bodyDebugColor:b($,"debugBodyColor",16711935),staticBodyDebugColor:b($,"debugStaticBodyColor",255),velocityDebugColor:b($,"debugVelocityColor",65280)},this.maxEntries=b($,"maxEntries",16),this.useTree=b($,"useTree",!0),this.tree=new V(this.maxEntries),this.staticTree=new V(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new j,this._tempMatrix2=new j,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(Y,q){q===void 0&&(q=r.DYNAMIC_BODY),Array.isArray(Y)||(Y=[Y]);for(var $=0;$<Y.length;$++){var et=Y[$];if(et.isParent)for(var rt=et.getChildren(),at=0;at<rt.length;at++){var lt=rt[at];lt.isParent?this.enable(lt,q):this.enableBody(lt,q)}else this.enableBody(et,q)}},enableBody:function(Y,q){return q===void 0&&(q=r.DYNAMIC_BODY),Y.hasTransformComponent&&(Y.body||(q===r.DYNAMIC_BODY?Y.body=new S(this,Y):q===r.STATIC_BODY&&(Y.body=new _(this,Y))),this.add(Y.body)),Y},add:function(Y){return Y.physicsType===r.DYNAMIC_BODY?this.bodies.set(Y):Y.physicsType===r.STATIC_BODY&&(this.staticBodies.set(Y),this.staticTree.insert(Y)),Y.enable=!0,Y},disable:function(Y){Array.isArray(Y)||(Y=[Y]);for(var q=0;q<Y.length;q++){var $=Y[q];if($.isParent)for(var et=$.getChildren(),rt=0;rt<et.length;rt++){var at=et[rt];at.isParent?this.disable(at):this.disableBody(at.body)}else this.disableBody($.body)}},disableBody:function(Y){this.remove(Y),Y.enable=!1},remove:function(Y){Y.physicsType===r.DYNAMIC_BODY?(this.tree.remove(Y),this.bodies.delete(Y)):Y.physicsType===r.STATIC_BODY&&(this.staticBodies.delete(Y),this.staticTree.remove(Y))},createDebugGraphic:function(){var Y=this.scene.sys.add.graphics({x:0,y:0});return Y.setDepth(Number.MAX_VALUE),this.debugGraphic=Y,this.drawDebug=!0,Y},setBounds:function(Y,q,$,et,rt,at,lt,vt){return this.bounds.setTo(Y,q,$,et),rt!==void 0&&this.setBoundsCollision(rt,at,lt,vt),this},setBoundsCollision:function(Y,q,$,et){return Y===void 0&&(Y=!0),q===void 0&&(q=!0),$===void 0&&($=!0),et===void 0&&(et=!0),this.checkCollision.left=Y,this.checkCollision.right=q,this.checkCollision.up=$,this.checkCollision.down=et,this},pause:function(){return this.isPaused=!0,this.emit(v.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(v.RESUME),this},addCollider:function(Y,q,$,et,rt){$===void 0&&($=null),et===void 0&&(et=null),rt===void 0&&(rt=$);var at=new h(this,!1,Y,q,$,et,rt);return this.colliders.add(at),at},addOverlap:function(Y,q,$,et,rt){$===void 0&&($=null),et===void 0&&(et=null),rt===void 0&&(rt=$);var at=new h(this,!0,Y,q,$,et,rt);return this.colliders.add(at),at},removeCollider:function(Y){return this.colliders.remove(Y),this},setFPS:function(Y){return this.fps=Y,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(Y,q){if(!(this.isPaused||this.bodies.size===0)){var $,et=this._frameTime,rt=this._frameTimeMS*this.timeScale;this._elapsed+=q;var at,lt=this.bodies.entries,vt=this._elapsed>=rt;for(this.fixedStep||(et=q*.001,vt=!0,this._elapsed=0),$=0;$<lt.length;$++)at=lt[$],at.enable&&at.preUpdate(vt,et);if(vt){this._elapsed-=rt,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(lt));var xt=this.colliders.update();for($=0;$<xt.length;$++){var ut=xt[$];ut.active&&ut.update()}this.emit(v.WORLD_STEP,et)}for(;this._elapsed>=rt;)this._elapsed-=rt,this.step(et)}},step:function(Y){var q,$,et=this.bodies.entries,rt=et.length;for(q=0;q<rt;q++)$=et[q],$.enable&&$.update(Y);this.useTree&&(this.tree.clear(),this.tree.load(et));var at=this.colliders.update();for(q=0;q<at.length;q++){var lt=at[q];lt.active&&lt.update()}this.emit(v.WORLD_STEP,Y),this.stepsLastFrame++},singleStep:function(){this.update(0,this._frameTimeMS),this.postUpdate()},postUpdate:function(){var Y,q,$=this.bodies.entries,et=$.length,rt=this.bodies,at=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,Y=0;Y<et;Y++)q=$[Y],q.enable&&q.postUpdate();if(this.drawDebug){var lt=this.debugGraphic;for(lt.clear(),Y=0;Y<et;Y++)q=$[Y],q.willDrawDebug()&&q.drawDebug(lt);for($=at.entries,et=$.length,Y=0;Y<et;Y++)q=$[Y],q.willDrawDebug()&&q.drawDebug(lt)}var vt=this.pendingDestroy;if(vt.size>0){var xt=this.tree,ut=this.staticTree;for($=vt.entries,et=$.length,Y=0;Y<et;Y++)q=$[Y],q.physicsType===r.DYNAMIC_BODY?(xt.remove(q),rt.delete(q)):q.physicsType===r.STATIC_BODY&&(ut.remove(q),at.delete(q)),q.world=void 0,q.gameObject=void 0;vt.clear()}},updateMotion:function(Y,q){Y.allowRotation&&this.computeAngularVelocity(Y,q),this.computeVelocity(Y,q)},computeAngularVelocity:function(Y,q){var $=Y.angularVelocity,et=Y.angularAcceleration,rt=Y.angularDrag,at=Y.maxAngular;et?$+=et*q:Y.allowDrag&&rt&&(rt*=q,g($-rt,0,.1)?$-=rt:y($+rt,0,.1)?$+=rt:$=0),$=u($,-at,at);var lt=$-Y.angularVelocity;Y.angularVelocity+=lt,Y.rotation+=Y.angularVelocity*q},computeVelocity:function(Y,q){var $=Y.velocity.x,et=Y.acceleration.x,rt=Y.drag.x,at=Y.maxVelocity.x,lt=Y.velocity.y,vt=Y.acceleration.y,xt=Y.drag.y,ut=Y.maxVelocity.y,mt=Y.speed,Tt=Y.maxSpeed,bt=Y.allowDrag,St=Y.useDamping;Y.allowGravity&&($+=(this.gravity.x+Y.gravity.x)*q,lt+=(this.gravity.y+Y.gravity.y)*q),et?$+=et*q:bt&&rt&&(St?(rt=Math.pow(rt,q),$*=rt,mt=Math.sqrt($*$+lt*lt),x(mt,0,.001)&&($=0)):(rt*=q,g($-rt,0,.01)?$-=rt:y($+rt,0,.01)?$+=rt:$=0)),vt?lt+=vt*q:bt&&xt&&(St?(xt=Math.pow(xt,q),lt*=xt,mt=Math.sqrt($*$+lt*lt),x(mt,0,.001)&&(lt=0)):(xt*=q,g(lt-xt,0,.01)?lt-=xt:y(lt+xt,0,.01)?lt+=xt:lt=0)),$=u($,-at,at),lt=u(lt,-ut,ut),Y.velocity.set($,lt),Tt>-1&&Y.velocity.length()>Tt&&(Y.velocity.normalize().scale(Tt),mt=Tt),Y.speed=mt},separate:function(Y,q,$,et,rt){var at,lt,vt=!1,xt=!0;if(!Y.enable||!q.enable||Y.checkCollision.none||q.checkCollision.none||!this.intersects(Y,q)||!(Y.collisionMask&q.collisionCategory)||!(q.collisionMask&Y.collisionCategory)||$&&$.call(et,Y.gameObject||Y,q.gameObject||q)===!1)return vt;if(Y.isCircle||q.isCircle){var ut=this.separateCircle(Y,q,rt);ut.result?(vt=!0,xt=!1):(at=ut.x,lt=ut.y,xt=!0)}if(xt){var mt=!1,Tt=!1,bt=this.OVERLAP_BIAS;rt?(mt=U(Y,q,rt,bt,at),Tt=W(Y,q,rt,bt,lt)):this.forceX||Math.abs(this.gravity.y+Y.gravity.y)<Math.abs(this.gravity.x+Y.gravity.x)?(mt=U(Y,q,rt,bt,at),this.intersects(Y,q)&&(Tt=W(Y,q,rt,bt,lt))):(Tt=W(Y,q,rt,bt,lt),this.intersects(Y,q)&&(mt=U(Y,q,rt,bt,at))),vt=mt||Tt}return vt&&(rt?(Y.onOverlap||q.onOverlap)&&this.emit(v.OVERLAP,Y.gameObject,q.gameObject,Y,q):(Y.onCollide||q.onCollide)&&this.emit(v.COLLIDE,Y.gameObject,q.gameObject,Y,q)),vt},separateCircle:function(Y,q,$){T(Y,q,!1,0),P(Y,q,!1,0);var et=Y.isCircle,rt=q.isCircle,at=Y.center,lt=q.center,vt=Y.immovable,xt=q.immovable,ut=Y.velocity,mt=q.velocity,Tt=0,bt=!0;if(et!==rt){bt=!1;var St=at.x,Gt=at.y,Nt=Y.halfWidth,zt=q.position.x,Lt=q.position.y,ct=q.right,ot=q.bottom;rt&&(St=lt.x,Gt=lt.y,Nt=q.halfWidth,zt=Y.position.x,Lt=Y.position.y,ct=Y.right,ot=Y.bottom),Gt<Lt?St<zt?Tt=o(St,Gt,zt,Lt)-Nt:St>ct&&(Tt=o(St,Gt,ct,Lt)-Nt):Gt>ot&&(St<zt?Tt=o(St,Gt,zt,ot)-Nt:St>ct&&(Tt=o(St,Gt,ct,ot)-Nt)),Tt*=-1}else Tt=Y.halfWidth+q.halfWidth-p(at,lt);Y.overlapR=Tt,q.overlapR=Tt;var Mt=d(at,lt),Ot=(Tt+O.EPSILON)*Math.cos(Mt),Ut=(Tt+O.EPSILON)*Math.sin(Mt),Rt={overlap:Tt,result:!1,x:Ot,y:Ut};if($&&(!bt||bt&&Tt!==0))return Rt.result=!0,Rt;if(!bt&&Tt===0||vt&&xt||Y.customSeparateX||q.customSeparateX)return Rt.x=void 0,Rt.y=void 0,Rt;var _t=!Y.pushable&&!q.pushable;if(bt){var Yt=at.x-lt.x,ee=at.y-lt.y,$t=Math.sqrt(Math.pow(Yt,2)+Math.pow(ee,2)),kt=(lt.x-at.x)/$t||0,Vt=(lt.y-at.y)/$t||0,ne=2*(ut.x*kt+ut.y*Vt-mt.x*kt-mt.y*Vt)/(Y.mass+q.mass);(vt||xt||!Y.pushable||!q.pushable)&&(ne*=2),!vt&&Y.pushable&&(ut.x=ut.x-ne/Y.mass*kt,ut.y=ut.y-ne/Y.mass*Vt,ut.multiply(Y.bounce)),!xt&&q.pushable&&(mt.x=mt.x+ne/q.mass*kt,mt.y=mt.y+ne/q.mass*Vt,mt.multiply(q.bounce)),!vt&&!xt&&(Ot*=.5,Ut*=.5),(!vt||Y.pushable||_t)&&(Y.x-=Ot,Y.y-=Ut,Y.updateCenter()),(!xt||q.pushable||_t)&&(q.x+=Ot,q.y+=Ut,q.updateCenter()),Rt.result=!0}else!vt&&(Y.pushable||_t)&&(Y.x-=Ot,Y.y-=Ut,Y.updateCenter()),!xt&&(q.pushable||_t)&&(q.x+=Ot,q.y+=Ut,q.updateCenter()),Rt.x=void 0,Rt.y=void 0;return Rt},intersects:function(Y,q){return Y===q?!1:!Y.isCircle&&!q.isCircle?!(Y.right<=q.left||Y.bottom<=q.top||Y.left>=q.right||Y.top>=q.bottom):Y.isCircle?q.isCircle?p(Y.center,q.center)<=Y.halfWidth+q.halfWidth:this.circleBodyIntersects(Y,q):this.circleBodyIntersects(q,Y)},circleBodyIntersects:function(Y,q){var $=u(Y.center.x,q.left,q.right),et=u(Y.center.y,q.top,q.bottom),rt=(Y.center.x-$)*(Y.center.x-$),at=(Y.center.y-et)*(Y.center.y-et);return rt+at<=Y.halfWidth*Y.halfWidth},overlap:function(Y,q,$,et,rt){return $===void 0&&($=null),et===void 0&&(et=null),rt===void 0&&(rt=$),this.collideObjects(Y,q,$,et,rt,!0)},collide:function(Y,q,$,et,rt){return $===void 0&&($=null),et===void 0&&(et=null),rt===void 0&&(rt=$),this.collideObjects(Y,q,$,et,rt,!1)},collideObjects:function(Y,q,$,et,rt,at){var lt,vt;Y.isParent&&(Y.physicsType===void 0||q===void 0||Y===q)&&(Y=Y.children.entries),q&&q.isParent&&q.physicsType===void 0&&(q=q.children.entries);var xt=Array.isArray(Y),ut=Array.isArray(q);if(this._total=0,!xt&&!ut)this.collideHandler(Y,q,$,et,rt,at);else if(!xt&&ut)for(lt=0;lt<q.length;lt++)this.collideHandler(Y,q[lt],$,et,rt,at);else if(xt&&!ut)if(q)for(lt=0;lt<Y.length;lt++)this.collideHandler(Y[lt],q,$,et,rt,at);else for(lt=0;lt<Y.length;lt++){var mt=Y[lt];for(vt=lt+1;vt<Y.length;vt++)lt!==vt&&this.collideHandler(mt,Y[vt],$,et,rt,at)}else for(lt=0;lt<Y.length;lt++)for(vt=0;vt<q.length;vt++)this.collideHandler(Y[lt],q[vt],$,et,rt,at);return this._total>0},collideHandler:function(Y,q,$,et,rt,at){if(q===void 0&&Y.isParent)return this.collideGroupVsGroup(Y,Y,$,et,rt,at);if(!Y||!q)return!1;if(Y.body||Y.isBody){if(q.body||q.isBody)return this.collideSpriteVsSprite(Y,q,$,et,rt,at);if(q.isParent)return this.collideSpriteVsGroup(Y,q,$,et,rt,at);if(q.isTilemap)return this.collideSpriteVsTilemapLayer(Y,q,$,et,rt,at)}else if(Y.isParent){if(q.body||q.isBody)return this.collideSpriteVsGroup(q,Y,$,et,rt,at);if(q.isParent)return this.collideGroupVsGroup(Y,q,$,et,rt,at);if(q.isTilemap)return this.collideGroupVsTilemapLayer(Y,q,$,et,rt,at)}else if(Y.isTilemap){if(q.body||q.isBody)return this.collideSpriteVsTilemapLayer(q,Y,$,et,rt,at);if(q.isParent)return this.collideGroupVsTilemapLayer(q,Y,$,et,rt,at)}},canCollide:function(Y,q){return Y&&q&&(Y.collisionMask&q.collisionCategory)!==0&&(q.collisionMask&Y.collisionCategory)!==0},collideSpriteVsSprite:function(Y,q,$,et,rt,at){var lt=Y.isBody?Y:Y.body,vt=q.isBody?q:q.body;return this.canCollide(lt,vt)?(this.separate(lt,vt,et,rt,at)&&($&&$.call(rt,Y,q),this._total++),!0):!1},collideSpriteVsGroup:function(Y,q,$,et,rt,at){var lt=Y.isBody?Y:Y.body;if(!(q.getLength()===0||!lt||!lt.enable||lt.checkCollision.none||!this.canCollide(lt,q))){var vt,xt,ut;if(this.useTree||q.physicsType===r.STATIC_BODY){var mt=this.treeMinMax;mt.minX=lt.left,mt.minY=lt.top,mt.maxX=lt.right,mt.maxY=lt.bottom;var Tt=q.physicsType===r.DYNAMIC_BODY?this.tree.search(mt):this.staticTree.search(mt);for(xt=Tt.length,vt=0;vt<xt;vt++)ut=Tt[vt],!(lt===ut||!ut.enable||ut.checkCollision.none||!q.contains(ut.gameObject))&&this.separate(lt,ut,et,rt,at)&&($&&$.call(rt,lt.gameObject,ut.gameObject),this._total++)}else{var bt=q.getChildren(),St=q.children.entries.indexOf(Y);for(xt=bt.length,vt=0;vt<xt;vt++)ut=bt[vt].body,!(!ut||vt===St||!ut.enable)&&this.separate(lt,ut,et,rt,at)&&($&&$.call(rt,lt.gameObject,ut.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(Y,q,$,et,rt,at){if(!this.canCollide(Y,q))return!1;var lt=Y.getChildren();if(lt.length===0)return!1;for(var vt=!1,xt=0;xt<lt.length;xt++)(lt[xt].body||lt[xt].isBody)&&this.collideSpriteVsTilemapLayer(lt[xt],q,$,et,rt,at)&&(vt=!0);return vt},collideTiles:function(Y,q,$,et,rt){return q.length===0||Y.body&&!Y.body.enable||Y.isBody&&!Y.enable?!1:this.collideSpriteVsTilesHandler(Y,q,$,et,rt,!1,!1)},overlapTiles:function(Y,q,$,et,rt){return q.length===0||Y.body&&!Y.body.enable||Y.isBody&&!Y.enable?!1:this.collideSpriteVsTilesHandler(Y,q,$,et,rt,!0,!1)},collideSpriteVsTilemapLayer:function(Y,q,$,et,rt,at){var lt=Y.isBody?Y:Y.body;if(!lt.enable||lt.checkCollision.none||!this.canCollide(lt,q))return!1;var vt=q.layer,xt=lt.x-vt.tileWidth*q.scaleX,ut=lt.y-vt.tileHeight*q.scaleY,mt=lt.width+vt.tileWidth*q.scaleX,Tt=lt.height+vt.tileHeight*q.scaleY,bt=at?null:this.tileFilterOptions,St=A(xt,ut,mt,Tt,bt,q.scene.cameras.main,q.layer);return St.length===0?!1:this.collideSpriteVsTilesHandler(Y,St,$,et,rt,at,!0)},collideSpriteVsTilesHandler:function(Y,q,$,et,rt,at,lt){for(var vt=Y.isBody?Y:Y.body,xt,ut={left:0,right:0,top:0,bottom:0},mt,Tt=!1,bt=0;bt<q.length;bt++){xt=q[bt],mt=xt.tilemapLayer;var St=mt.tileToWorldXY(xt.x,xt.y);ut.left=St.x,ut.top=St.y,ut.right=ut.left+xt.width*mt.scaleX,ut.bottom=ut.top+xt.height*mt.scaleY,Q(ut,vt)&&(!et||et.call(rt,Y,xt))&&B(xt,Y)&&(at||k(bt,vt,xt,ut,mt,this.TILE_BIAS,lt))&&(this._total++,Tt=!0,$&&$.call(rt,Y,xt),at&&vt.onOverlap?this.emit(v.TILE_OVERLAP,Y,xt,vt):vt.onCollide&&this.emit(v.TILE_COLLIDE,Y,xt,vt))}return Tt},collideGroupVsGroup:function(Y,q,$,et,rt,at){if(!(Y.getLength()===0||q.getLength()===0||!this.canCollide(Y,q)))for(var lt=Y.getChildren(),vt=0;vt<lt.length;vt++)this.collideSpriteVsGroup(lt[vt],q,$,et,rt,at)},wrap:function(Y,q){Y.body?this.wrapObject(Y,q):Y.getChildren?this.wrapArray(Y.getChildren(),q):Array.isArray(Y)?this.wrapArray(Y,q):this.wrapObject(Y,q)},wrapArray:function(Y,q){for(var $=0;$<Y.length;$++)this.wrapObject(Y[$],q)},wrapObject:function(Y,q){q===void 0&&(q=0),Y.x=K(Y.x,this.bounds.left-q,this.bounds.right+q),Y.y=K(Y.y,this.bounds.top-q,this.bounds.bottom+q)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});m.exports=J},1093:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setAcceleration:function(i,d){return this.body.acceleration.set(i,d),this},setAccelerationX:function(i){return this.body.acceleration.x=i,this},setAccelerationY:function(i){return this.body.acceleration.y=i,this}};m.exports=E},59023:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setAngularVelocity:function(i){return this.body.angularVelocity=i,this},setAngularAcceleration:function(i){return this.body.angularAcceleration=i,this},setAngularDrag:function(i){return this.body.angularDrag=i,this}};m.exports=E},62069:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setBounce:function(i,d){return this.body.bounce.set(i,d),this},setBounceX:function(i){return this.body.bounce.x=i,this},setBounceY:function(i){return this.body.bounce.y=i,this},setCollideWorldBounds:function(i,d,S,u){return this.body.setCollideWorldBounds(i,d,S,u),this}};m.exports=E},78389:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(79599),S={setCollisionCategory:function(u){var l=this.body?this.body:this;return l.collisionCategory=u,this},willCollideWith:function(u){var l=this.body?this.body:this;return(l.collisionMask&u)!==0},addCollidesWith:function(u){var l=this.body?this.body:this;return l.collisionMask=l.collisionMask|u,this},removeCollidesWith:function(u){var l=this.body?this.body:this;return l.collisionMask=l.collisionMask&~u,this},setCollidesWith:function(u){var l=this.body?this.body:this;return l.collisionMask=d(u),this},resetCollisionCategory:function(){var u=this.body?this.body:this;return u.collisionCategory=1,u.collisionMask=2147483647,this}};m.exports=S},87118:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setDebug:function(i,d,S){return this.debugShowBody=i,this.debugShowVelocity=d,this.debugBodyColor=S,this},setDebugBodyColor:function(i){return this.body.debugBodyColor=i,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(i){this.body.debugShowBody=i}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(i){this.body.debugShowVelocity=i}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(i){this.body.debugBodyColor=i}}};m.exports=E},52819:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setDrag:function(i,d){return this.body.drag.set(i,d),this},setDragX:function(i){return this.body.drag.x=i,this},setDragY:function(i){return this.body.drag.y=i,this},setDamping:function(i){return this.body.useDamping=i,this}};m.exports=E},4074:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setDirectControl:function(i){return this.body.setDirectControl(i),this},enableBody:function(i,d,S,u,l){return i&&this.body.reset(d,S),u&&(this.body.gameObject.active=!0),l&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(i,d){return i===void 0&&(i=!1),d===void 0&&(d=!1),this.body.stop(),this.body.enable=!1,i&&(this.body.gameObject.active=!1),d&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};m.exports=E},40831:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setFriction:function(i,d){return this.body.friction.set(i,d),this},setFrictionX:function(i){return this.body.friction.x=i,this},setFrictionY:function(i){return this.body.friction.y=i,this}};m.exports=E},26775:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setGravity:function(i,d){return this.body.gravity.set(i,d),this},setGravityX:function(i){return this.body.gravity.x=i,this},setGravityY:function(i){return this.body.gravity.y=i,this}};m.exports=E},9437:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setImmovable:function(i){return i===void 0&&(i=!0),this.body.immovable=i,this}};m.exports=E},30621:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setMass:function(i){return this.body.mass=i,this}};m.exports=E},72441:(m,E,i)=>{var d=i(47956),S=i(96503),u=i(2044),l=i(81491),h=function(r,o,p,a,v,x){var g=d(r,o-a,p-a,2*a,2*a,v,x);if(g.length===0)return g;for(var y=new S(o,p,a),T=new S,P=[],A=0;A<g.length;A++){var b=g[A];b.isCircle?(T.setTo(b.center.x,b.center.y,b.halfWidth),u(y,T)&&P.push(b)):l(y,b)&&P.push(b)}return P};m.exports=h},47956:m=>{var E=function(i,d,S,u,l,h,r){h===void 0&&(h=!0),r===void 0&&(r=!1);var o=[],p=[],a=i.treeMinMax;if(a.minX=d,a.minY=S,a.maxX=d+u,a.maxY=S+l,r&&(p=i.staticTree.search(a)),h&&i.useTree)o=i.tree.search(a);else if(h){var v=i.bodies,x={position:{x:d,y:S},left:d,top:S,right:d+u,bottom:S+l,isCircle:!1},g=i.intersects;v.iterate(function(y){g(y,x)&&o.push(y)})}return p.concat(o)};m.exports=E},62121:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setPushable:function(i){return i===void 0&&(i=!0),this.body.pushable=i,this}};m.exports=E},29384:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setOffset:function(i,d){return this.body.setOffset(i,d),this},setSize:function(i,d,S){return this.body.setSize(i,d,S),this},setBodySize:function(i,d,S){return this.body.setSize(i,d,S),this},setCircle:function(i,d,S){return this.body.setCircle(i,d,S),this}};m.exports=E},15098:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setVelocity:function(i,d){return this.body.setVelocity(i,d),this},setVelocityX:function(i){return this.body.setVelocityX(i),this},setVelocityY:function(i){return this.body.setVelocityY(i),this},setMaxVelocity:function(i,d){return this.body.maxVelocity.set(i,d),this}};m.exports=E},92209:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Acceleration:i(1093),Angular:i(59023),Bounce:i(62069),Collision:i(78389),Debug:i(87118),Drag:i(52819),Enable:i(4074),Friction:i(40831),Gravity:i(26775),Immovable:i(9437),Mass:i(30621),OverlapCirc:i(72441),OverlapRect:i(47956),Pushable:i(62121),Size:i(29384),Velocity:i(15098)}},37747:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};m.exports=E},20009:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="collide"},36768:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="overlap"},60473:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pause"},89954:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="resume"},61804:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="tilecollide"},7161:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="tileoverlap"},34689:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="worldbounds"},16006:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="worldstep"},63012:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={COLLIDE:i(20009),OVERLAP:i(36768),PAUSE:i(60473),RESUME:i(89954),TILE_COLLIDE:i(61804),TILE_OVERLAP:i(7161),WORLD_BOUNDS:i(34689),WORLD_STEP:i(16006)}},27064:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(37747),S=i(79291),u={ArcadePhysics:i(86689),Body:i(37742),Collider:i(79342),Components:i(92209),Events:i(63012),Factory:i(66022),GetCollidesWith:i(79599),GetOverlapX:i(64897),GetOverlapY:i(45170),SeparateX:i(14087),SeparateY:i(89936),Group:i(60758),Image:i(71289),Sprite:i(13759),StaticBody:i(72624),StaticGroup:i(71464),Tilemap:i(55173),World:i(82248)};u=S(!1,u,d),m.exports=u},96602:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return i.collisionCallback?!i.collisionCallback.call(i.collisionCallbackContext,d,i):i.layer.callbacks[i.index]?!i.layer.callbacks[i.index].callback.call(i.layer.callbacks[i.index].callbackContext,d,i):!0};m.exports=E},36294:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){d<0?(i.blocked.none=!1,i.blocked.left=!0):d>0&&(i.blocked.none=!1,i.blocked.right=!0),i.position.x-=d,i.updateCenter(),i.bounce.x===0?i.velocity.x=0:i.velocity.x=-i.velocity.x*i.bounce.x};m.exports=E},67013:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){d<0?(i.blocked.none=!1,i.blocked.up=!0):d>0&&(i.blocked.none=!1,i.blocked.down=!0),i.position.y-=d,i.updateCenter(),i.bounce.y===0?i.velocity.y=0:i.velocity.y=-i.velocity.y*i.bounce.y};m.exports=E},40012:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(21329),S=i(53442),u=i(2483),l=function(h,r,o,p,a,v,x){var g=p.left,y=p.top,T=p.right,P=p.bottom,A=o.faceLeft||o.faceRight,b=o.faceTop||o.faceBottom;if(x||(A=!0,b=!0),!A&&!b)return!1;var O=0,D=0,B=0,G=1;if(r.deltaAbsX()>r.deltaAbsY()?B=-1:r.deltaAbsX()<r.deltaAbsY()&&(G=-1),r.deltaX()!==0&&r.deltaY()!==0&&A&&b&&(B=Math.min(Math.abs(r.position.x-T),Math.abs(r.right-g)),G=Math.min(Math.abs(r.position.y-P),Math.abs(r.bottom-y))),B<G){if(A&&(O=d(r,o,g,T,v,x),O!==0&&!u(p,r)))return!0;b&&(D=S(r,o,y,P,v,x))}else{if(b&&(D=S(r,o,y,P,v,x),D!==0&&!u(p,r)))return!0;A&&(O=d(r,o,g,T,v,x))}return O!==0||D!==0};m.exports=l},21329:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(36294),S=function(u,l,h,r,o,p){var a=0,v=l.faceLeft,x=l.faceRight,g=l.collideLeft,y=l.collideRight;return p||(v=!0,x=!0,g=!0,y=!0),u.deltaX()<0&&y&&u.checkCollision.left?x&&u.x<r&&(a=u.x-r,a<-o&&(a=0)):u.deltaX()>0&&g&&u.checkCollision.right&&v&&u.right>h&&(a=u.right-h,a>o&&(a=0)),a!==0&&(u.customSeparateX?u.overlapX=a:d(u,a)),a};m.exports=S},53442:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(67013),S=function(u,l,h,r,o,p){var a=0,v=l.faceTop,x=l.faceBottom,g=l.collideUp,y=l.collideDown;return p||(v=!0,x=!0,g=!0,y=!0),u.deltaY()<0&&y&&u.checkCollision.up?x&&u.y<r&&(a=u.y-r,a<-o&&(a=0)):u.deltaY()>0&&g&&u.checkCollision.down&&v&&u.bottom>h&&(a=u.bottom-h,a>o&&(a=0)),a!==0&&(u.customSeparateY?u.overlapY=a:d(u,a)),a};m.exports=S},2483:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return!(d.right<=i.left||d.bottom<=i.top||d.position.x>=i.right||d.position.y>=i.bottom)};m.exports=E},55173:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={ProcessTileCallbacks:i(96602),ProcessTileSeparationX:i(36294),ProcessTileSeparationY:i(67013),SeparateTile:i(40012),TileCheckX:i(21329),TileCheckY:i(53442),TileIntersectsBody:i(2483)};m.exports=d},44563:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Arcade:i(27064),Matter:i(3875)}},68174:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(26099),u=new d({initialize:function(){this.boundsCenter=new S,this.centerDiff=new S},parseBody:function(l){if(l=l.hasOwnProperty("body")?l.body:l,!l.hasOwnProperty("bounds")||!l.hasOwnProperty("centerOfMass"))return!1;var h=this.boundsCenter,r=this.centerDiff,o=l.bounds.max.x-l.bounds.min.x,p=l.bounds.max.y-l.bounds.min.y,a=o*l.centerOfMass.x,v=p*l.centerOfMass.y;return h.set(o/2,p/2),r.set(a-h.x,v-h.y),!0},getTopLeft:function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(l)){var o=this.boundsCenter,p=this.centerDiff;return new S(h+o.x+p.x,r+o.y+p.y)}return!1},getTopCenter:function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(l)){var o=this.boundsCenter,p=this.centerDiff;return new S(h+p.x,r+o.y+p.y)}return!1},getTopRight:function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(l)){var o=this.boundsCenter,p=this.centerDiff;return new S(h-(o.x-p.x),r+o.y+p.y)}return!1},getLeftCenter:function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(l)){var o=this.boundsCenter,p=this.centerDiff;return new S(h+o.x+p.x,r+p.y)}return!1},getCenter:function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(l)){var o=this.centerDiff;return new S(h+o.x,r+o.y)}return!1},getRightCenter:function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(l)){var o=this.boundsCenter,p=this.centerDiff;return new S(h-(o.x-p.x),r+p.y)}return!1},getBottomLeft:function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(l)){var o=this.boundsCenter,p=this.centerDiff;return new S(h+o.x+p.x,r-(o.y-p.y))}return!1},getBottomCenter:function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(l)){var o=this.boundsCenter,p=this.centerDiff;return new S(h+p.x,r-(o.y-p.y))}return!1},getBottomRight:function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),this.parseBody(l)){var o=this.boundsCenter,p=this.centerDiff;return new S(h-(o.x-p.x),r-(o.y-p.y))}return!1}});m.exports=u},19933:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(6790);d.Body=i(22562),d.Composite=i(69351),d.World=i(4372),d.Collision=i(52284),d.Detector=i(81388),d.Pairs=i(99561),d.Pair=i(4506),d.Query=i(73296),d.Resolver=i(66272),d.Constraint=i(48140),d.Common=i(53402),d.Engine=i(48413),d.Events=i(35810),d.Sleeping=i(53614),d.Plugin=i(73832),d.Bodies=i(66280),d.Composites=i(74116),d.Axes=i(66615),d.Bounds=i(15647),d.Svg=i(74058),d.Vector=i(31725),d.Vertices=i(41598),d.World.add=d.Composite.add,d.World.remove=d.Composite.remove,d.World.addComposite=d.Composite.addComposite,d.World.addBody=d.Composite.addBody,d.World.addConstraint=d.Composite.addConstraint,d.World.clear=d.Composite.clear,m.exports=d},28137:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66280),S=i(83419),u=i(74116),l=i(48140),h=i(74058),r=i(75803),o=i(23181),p=i(34803),a=i(73834),v=i(19496),x=i(85791),g=i(98713),y=i(41598),T=new S({initialize:function(A){this.world=A,this.scene=A.scene,this.sys=A.scene.sys},rectangle:function(P,A,b,O,D){var B=d.rectangle(P,A,b,O,D);return this.world.add(B),B},trapezoid:function(P,A,b,O,D,B){var G=d.trapezoid(P,A,b,O,D,B);return this.world.add(G),G},circle:function(P,A,b,O,D){var B=d.circle(P,A,b,O,D);return this.world.add(B),B},polygon:function(P,A,b,O,D){var B=d.polygon(P,A,b,O,D);return this.world.add(B),B},fromVertices:function(P,A,b,O,D,B,G){typeof b=="string"&&(b=y.fromPath(b));var V=d.fromVertices(P,A,b,O,D,B,G);return this.world.add(V),V},fromPhysicsEditor:function(P,A,b,O,D){D===void 0&&(D=!0);var B=v.parseBody(P,A,b,O);return D&&!this.world.has(B)&&this.world.add(B),B},fromSVG:function(P,A,b,O,D,B){O===void 0&&(O=1),D===void 0&&(D={}),B===void 0&&(B=!0);for(var G=b.getElementsByTagName("path"),V=[],k=0;k<G.length;k++){var U=h.pathToVertices(G[k],30);O!==1&&y.scale(U,O,O),V.push(U)}var W=d.fromVertices(P,A,V,D);return B&&this.world.add(W),W},fromJSON:function(P,A,b,O,D){O===void 0&&(O={}),D===void 0&&(D=!0);var B=x.parseBody(P,A,b,O);return B&&D&&this.world.add(B),B},imageStack:function(P,A,b,O,D,B,G,V,k){G===void 0&&(G=0),V===void 0&&(V=0),k===void 0&&(k={});var U=this.world,W=this.sys.displayList;k.addToWorld=!1;var X=u.stack(b,O,D,B,G,V,function(_,Q){var j=new o(U,_,Q,P,A,k);return W.add(j),j.body});return U.add(X),X},stack:function(P,A,b,O,D,B,G){var V=u.stack(P,A,b,O,D,B,G);return this.world.add(V),V},pyramid:function(P,A,b,O,D,B,G){var V=u.pyramid(P,A,b,O,D,B,G);return this.world.add(V),V},chain:function(P,A,b,O,D,B){return u.chain(P,A,b,O,D,B)},mesh:function(P,A,b,O,D){return u.mesh(P,A,b,O,D)},newtonsCradle:function(P,A,b,O,D){var B=u.newtonsCradle(P,A,b,O,D);return this.world.add(B),B},car:function(P,A,b,O,D){var B=u.car(P,A,b,O,D);return this.world.add(B),B},softBody:function(P,A,b,O,D,B,G,V,k,U){var W=u.softBody(P,A,b,O,D,B,G,V,k,U);return this.world.add(W),W},joint:function(P,A,b,O,D){return this.constraint(P,A,b,O,D)},spring:function(P,A,b,O,D){return this.constraint(P,A,b,O,D)},constraint:function(P,A,b,O,D){O===void 0&&(O=1),D===void 0&&(D={}),D.bodyA=P.type==="body"?P:P.body,D.bodyB=A.type==="body"?A:A.body,isNaN(b)||(D.length=b),D.stiffness=O;var B=l.create(D);return this.world.add(B),B},worldConstraint:function(P,A,b,O){b===void 0&&(b=1),O===void 0&&(O={}),O.bodyB=P.type==="body"?P:P.body,isNaN(A)||(O.length=A),O.stiffness=b;var D=l.create(O);return this.world.add(D),D},mouseSpring:function(P){return this.pointerConstraint(P)},pointerConstraint:function(P){P===void 0&&(P={}),P.hasOwnProperty("render")||(P.render={visible:!1});var A=new g(this.scene,this.world,P);return this.world.add(A.constraint),A},image:function(P,A,b,O,D){var B=new o(this.world,P,A,b,O,D);return this.sys.displayList.add(B),B},tileBody:function(P,A){return new a(this.world,P,A)},sprite:function(P,A,b,O,D){var B=new p(this.world,P,A,b,O,D);return this.sys.displayList.add(B),this.sys.updateList.add(B),B},gameObject:function(P,A,b){return r(this.world,P,A,b)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});m.exports=T},75803:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(31884),S=i(95540),u=i(26099);function l(r){return!!r.get&&typeof r.get=="function"||!!r.set&&typeof r.set=="function"}var h=function(r,o,p,a){p===void 0&&(p={}),a===void 0&&(a=!0);var v=o.x,x=o.y;o.body={temp:!0,position:{x:v,y:x}};var g=[d.Bounce,d.Collision,d.Force,d.Friction,d.Gravity,d.Mass,d.Sensor,d.SetBody,d.Sleep,d.Static,d.Transform,d.Velocity];if(g.forEach(function(T){for(var P in T)l(T[P])?Object.defineProperty(o,P,{get:T[P].get,set:T[P].set}):Object.defineProperty(o,P,{value:T[P]})}),o.world=r,o._tempVec2=new u(v,x),p.hasOwnProperty("type")&&p.type==="body")o.setExistingBody(p,a);else{var y=S(p,"shape",null);y||(y="rectangle"),p.addToWorld=a,o.setBody(y,p)}return o};m.exports=h},23181:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(31884),u=i(95643),l=i(95540),h=i(88571),r=i(72699),o=i(26099),p=new d({Extends:h,Mixins:[S.Bounce,S.Collision,S.Force,S.Friction,S.Gravity,S.Mass,S.Sensor,S.SetBody,S.Sleep,S.Static,S.Transform,S.Velocity,r],initialize:function(v,x,g,y,T,P){u.call(this,v.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(y,T),this.setSizeToFrame(),this.setOrigin(),this.world=v,this._tempVec2=new o(x,g);var A=l(P,"shape",null);A?this.setBody(A,P):this.setRectangle(this.width,this.height,P),this.setPosition(x,g),this.initPipeline(),this.initPostPipeline(!0)}});m.exports=p},42045:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(60461),S=i(66615),u=i(66280),l=i(22562),h=i(68174),r=i(15647),o=i(83419),p=i(52284),a=i(53402),v=i(69351),x=i(74116),g=i(48140),y=i(81388),T=i(20339),P=i(28137),A=i(95540),b=i(35154),O=i(46975),D=i(4506),B=i(99561),G=i(37277),V=i(73296),k=i(66272),U=i(44594),W=i(74058),X=i(31725),_=i(41598),Q=i(68243);a.setDecomp(i(55973));var j=new o({initialize:function(K){this.scene=K,this.systems=K.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=l,this.composite=v,this.collision=p,this.detector=y,this.pair=D,this.pairs=B,this.query=V,this.resolver=k,this.constraint=g,this.bodies=u,this.composites=x,this.axes=S,this.bounds=r,this.svg=W,this.vector=X,this.vertices=_,this.verts=_,this._tempVec2=X.create(),k._restingThresh=b(this.config,"restingThresh",4),k._restingThreshTangent=b(this.config,"restingThreshTangent",6),k._positionDampen=b(this.config,"positionDampen",.9),k._positionWarming=b(this.config,"positionWarming",.8),k._frictionNormalMultiplier=b(this.config,"frictionNormalMultiplier",5),K.sys.events.once(U.BOOT,this.boot,this),K.sys.events.on(U.START,this.start,this)},boot:function(){this.world=new Q(this.scene,this.config),this.add=new P(this.world),this.bodyBounds=new h,this.systems.events.once(U.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new Q(this.scene,this.config),this.add=new P(this.world));var it=this.systems.events;it.on(U.UPDATE,this.world.update,this.world),it.on(U.POST_UPDATE,this.world.postUpdate,this.world),it.once(U.SHUTDOWN,this.shutdown,this)},getConfig:function(){var it=this.systems.game.config.physics,K=this.systems.settings.physics,J=O(A(K,"matter",{}),A(it,"matter",{}));return J},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(it,K){this.world.step(it,K)},containsPoint:function(it,K,J){it=this.getMatterBodies(it);var Y=X.create(K,J),q=V.point(it,Y);return q.length>0},intersectPoint:function(it,K,J){J=this.getMatterBodies(J);var Y=X.create(it,K),q=[],$=V.point(J,Y);return $.forEach(function(et){q.indexOf(et)===-1&&q.push(et)}),q},intersectRect:function(it,K,J,Y,q,$){q===void 0&&(q=!1),$=this.getMatterBodies($);var et={min:{x:it,y:K},max:{x:it+J,y:K+Y}},rt=[],at=V.region($,et,q);return at.forEach(function(lt){rt.indexOf(lt)===-1&&rt.push(lt)}),rt},intersectRay:function(it,K,J,Y,q,$){q===void 0&&(q=1),$=this.getMatterBodies($);for(var et=[],rt=V.ray($,X.create(it,K),X.create(J,Y),q),at=0;at<rt.length;at++)et.push(rt[at].body);return et},intersectBody:function(it,K){K=this.getMatterBodies(K);for(var J=[],Y=V.collides(it,K),q=0;q<Y.length;q++){var $=Y[q];$.bodyA===it?J.push($.bodyB):J.push($.bodyA)}return J},overlap:function(it,K,J,Y,q){J===void 0&&(J=null),Y===void 0&&(Y=null),q===void 0&&(q=J),Array.isArray(it)||(it=[it]),it=this.getMatterBodies(it),K=this.getMatterBodies(K);for(var $=!1,et=0;et<it.length;et++)for(var rt=it[et],at=V.collides(rt,K),lt=0;lt<at.length;lt++){var vt=at[lt],xt=vt.bodyA.id===rt.id?vt.bodyB:vt.bodyA;if(!Y||Y.call(q,rt,xt,vt)){if($=!0,J)J.call(q,rt,xt,vt);else if(!Y)return!0}}return $},setCollisionCategory:function(it,K){return it=this.getMatterBodies(it),it.forEach(function(J){J.collisionFilter.category=K}),this},setCollisionGroup:function(it,K){return it=this.getMatterBodies(it),it.forEach(function(J){J.collisionFilter.group=K}),this},setCollidesWith:function(it,K){it=this.getMatterBodies(it);var J=0;if(!Array.isArray(K))J=K;else for(var Y=0;Y<K.length;Y++)J|=K[Y];return it.forEach(function(q){q.collisionFilter.mask=J}),this},getMatterBodies:function(it){if(!it)return this.world.getAllBodies();Array.isArray(it)||(it=[it]);for(var K=[],J=0;J<it.length;J++){var Y=it[J].hasOwnProperty("body")?it[J].body:it[J];K.push(Y)}return K},setVelocity:function(it,K,J){it=this.getMatterBodies(it);var Y=this._tempVec2;return Y.x=K,Y.y=J,it.forEach(function(q){l.setVelocity(q,Y)}),this},setVelocityX:function(it,K){it=this.getMatterBodies(it);var J=this._tempVec2;return J.x=K,it.forEach(function(Y){J.y=Y.velocity.y,l.setVelocity(Y,J)}),this},setVelocityY:function(it,K){it=this.getMatterBodies(it);var J=this._tempVec2;return J.y=K,it.forEach(function(Y){J.x=Y.velocity.x,l.setVelocity(Y,J)}),this},setAngularVelocity:function(it,K){return it=this.getMatterBodies(it),it.forEach(function(J){l.setAngularVelocity(J,K)}),this},applyForce:function(it,K){it=this.getMatterBodies(it);var J=this._tempVec2;return it.forEach(function(Y){J.x=Y.position.x,J.y=Y.position.y,l.applyForce(Y,J,K)}),this},applyForceFromPosition:function(it,K,J,Y){it=this.getMatterBodies(it);var q=this._tempVec2;return it.forEach(function($){Y===void 0&&(Y=$.angle),q.x=J*Math.cos(Y),q.y=J*Math.sin(Y),l.applyForce($,K,q)}),this},applyForceFromAngle:function(it,K,J){it=this.getMatterBodies(it);var Y=this._tempVec2;return it.forEach(function(q){J===void 0&&(J=q.angle),Y.x=K*Math.cos(J),Y.y=K*Math.sin(J),l.applyForce(q,{x:q.position.x,y:q.position.y},Y)}),this},getConstraintLength:function(it){var K=it.pointA.x,J=it.pointA.y,Y=it.pointB.x,q=it.pointB.y;return it.bodyA&&(K+=it.bodyA.position.x,J+=it.bodyA.position.y),it.bodyB&&(Y+=it.bodyB.position.x,q+=it.bodyB.position.y),T(K,J,Y,q)},alignBody:function(it,K,J,Y){it=it.hasOwnProperty("body")?it.body:it;var q;switch(Y){case d.TOP_LEFT:case d.LEFT_TOP:q=this.bodyBounds.getTopLeft(it,K,J);break;case d.TOP_CENTER:q=this.bodyBounds.getTopCenter(it,K,J);break;case d.TOP_RIGHT:case d.RIGHT_TOP:q=this.bodyBounds.getTopRight(it,K,J);break;case d.LEFT_CENTER:q=this.bodyBounds.getLeftCenter(it,K,J);break;case d.CENTER:q=this.bodyBounds.getCenter(it,K,J);break;case d.RIGHT_CENTER:q=this.bodyBounds.getRightCenter(it,K,J);break;case d.LEFT_BOTTOM:case d.BOTTOM_LEFT:q=this.bodyBounds.getBottomLeft(it,K,J);break;case d.BOTTOM_CENTER:q=this.bodyBounds.getBottomCenter(it,K,J);break;case d.BOTTOM_RIGHT:case d.RIGHT_BOTTOM:q=this.bodyBounds.getBottomRight(it,K,J);break}return q&&l.setPosition(it,q),this},shutdown:function(){var it=this.systems.events;this.world&&(it.off(U.UPDATE,this.world.update,this.world),it.off(U.POST_UPDATE,this.world.postUpdate,this.world)),it.off(U.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(U.START,this.start,this),this.scene=null,this.systems=null}});G.register("MatterPhysics",j,"matterPhysics"),m.exports=j},34803:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(9674),S=i(83419),u=i(31884),l=i(95643),h=i(95540),r=i(72699),o=i(68287),p=i(26099),a=new S({Extends:o,Mixins:[u.Bounce,u.Collision,u.Force,u.Friction,u.Gravity,u.Mass,u.Sensor,u.SetBody,u.Sleep,u.Static,u.Transform,u.Velocity,r],initialize:function(x,g,y,T,P,A){l.call(this,x.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new d(this),this.setTexture(T,P),this.setSizeToFrame(),this.setOrigin(),this.world=x,this._tempVec2=new p(g,y);var b=h(A,"shape",null);b?this.setBody(b,A):this.setRectangle(this.width,this.height,A),this.setPosition(g,y),this.initPipeline(),this.initPostPipeline(!0)}});m.exports=a},73834:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66280),S=i(22562),u=i(83419),l=i(31884),h=i(62644),r=i(50792),o=i(95540),p=i(97022),a=i(41598),v=new u({Extends:r,Mixins:[l.Bounce,l.Collision,l.Friction,l.Gravity,l.Mass,l.Sensor,l.Sleep,l.Static],initialize:function(g,y,T){r.call(this),this.tile=y,this.world=g,y.physics.matterBody&&y.physics.matterBody.destroy(),y.physics.matterBody=this;var P=o(T,"body",null),A=o(T,"addToWorld",!0);if(P)this.setBody(P,A);else{var b=y.getCollisionGroup(),O=o(b,"objects",[]);O.length>0?this.setFromTileCollision(T):this.setFromTileRectangle(T)}if(y.flipX||y.flipY){var D={x:y.getCenterX(),y:y.getCenterY()},B=y.flipX?-1:1,G=y.flipY?-1:1;S.scale(P,B,G,D)}},setFromTileRectangle:function(x){x===void 0&&(x={}),p(x,"isStatic")||(x.isStatic=!0),p(x,"addToWorld")||(x.addToWorld=!0);var g=this.tile.getBounds(),y=g.x+g.width/2,T=g.y+g.height/2,P=d.rectangle(y,T,g.width,g.height,x);return this.setBody(P,x.addToWorld),this},setFromTileCollision:function(x){x===void 0&&(x={}),p(x,"isStatic")||(x.isStatic=!0),p(x,"addToWorld")||(x.addToWorld=!0);for(var g=this.tile.tilemapLayer.scaleX,y=this.tile.tilemapLayer.scaleY,T=this.tile.getLeft(),P=this.tile.getTop(),A=this.tile.getCollisionGroup(),b=o(A,"objects",[]),O=[],D=0;D<b.length;D++){var B=b[D],G=T+B.x*g,V=P+B.y*y,k=B.width*g,U=B.height*y,W=null;if(B.rectangle)W=d.rectangle(G+k/2,V+U/2,k,U,x);else if(B.ellipse)W=d.circle(G+k/2,V+U/2,k/2,x);else if(B.polygon||B.polyline){var X=B.polygon?B.polygon:B.polyline,_=X.map(function(K){return{x:K.x*g,y:K.y*y}}),Q=a.create(_),j=a.centre(Q);G+=j.x,V+=j.y,W=d.fromVertices(G,V,Q,x)}W&&O.push(W)}if(O.length===1)this.setBody(O[0],x.addToWorld);else if(O.length>1){var it=h(x);it.parts=O,this.setBody(S.create(it),it.addToWorld)}return this},setBody:function(x,g){return g===void 0&&(g=!0),this.body&&this.removeBody(),this.body=x,this.body.gameObject=this,g&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});m.exports=v},19496:(m,E,i)=>{/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66280),S=i(22562),u=i(53402),l=i(95540),h=i(41598),r={parseBody:function(o,p,a,v){v===void 0&&(v={});for(var x=l(a,"fixtures",[]),g=[],y=0;y<x.length;y++)for(var T=this.parseFixture(x[y]),P=0;P<T.length;P++)g.push(T[P]);var A=u.clone(a,!0);u.extend(A,v,!0),delete A.fixtures,delete A.type;var b=S.create(A);return S.setParts(b,g),S.setPosition(b,{x:o,y:p}),b},parseFixture:function(o){var p=u.extend({},!1,o);delete p.circle,delete p.vertices;var a;if(o.circle){var v=l(o.circle,"x"),x=l(o.circle,"y"),g=l(o.circle,"radius");a=[d.circle(v,x,g,p)]}else o.vertices&&(a=this.parseVertices(o.vertices,p));return a},parseVertices:function(o,p){p===void 0&&(p={});for(var a=[],v=0;v<o.length;v++)h.clockwiseSort(o[v]),a.push(S.create(u.extend({position:h.centre(o[v]),vertices:o[v]},p)));return d.flagCoincidentParts(a)}};m.exports=r},85791:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66280),S=i(22562),u={parseBody:function(l,h,r,o){o===void 0&&(o={});var p,a=r.vertices;if(a.length===1)o.vertices=a[0],p=S.create(o),d.flagCoincidentParts(p.parts);else{for(var v=[],x=0;x<a.length;x++){var g=S.create({vertices:a[x]});v.push(g)}d.flagCoincidentParts(v),o.parts=v,p=S.create(o)}return p.label=r.label,S.setPosition(p,{x:l,y:h}),p}};m.exports=u},98713:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(15647),S=i(83419),u=i(69351),l=i(48140),h=i(81388),r=i(1121),o=i(8214),p=i(46975),a=i(53614),v=i(26099),x=i(41598),g=new S({initialize:function(T,P,A){A===void 0&&(A={});var b={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=T,this.world=P,this.camera=null,this.pointer=null,this.active=!0,this.position=new v,this.body=null,this.part=null,this.constraint=l.create(p(A,b)),this.world.on(r.BEFORE_UPDATE,this.update,this),T.sys.input.on(o.POINTER_DOWN,this.onDown,this),T.sys.input.on(o.POINTER_UP,this.onUp,this)},onDown:function(y){this.pointer||(this.pointer=y,this.camera=y.camera)},onUp:function(y){y===this.pointer&&(this.pointer=null)},getBody:function(y){var T=this.position,P=this.constraint;this.camera.getWorldPoint(y.x,y.y,T);for(var A=u.allBodies(this.world.localWorld),b=0;b<A.length;b++){var O=A[b];if(!O.ignorePointer&&d.contains(O.bounds,T)&&h.canCollide(O.collisionFilter,P.collisionFilter)&&this.hitTestBody(O,T))return this.world.emit(r.DRAG_START,O,this.part,this),!0}return!1},hitTestBody:function(y,T){for(var P=this.constraint,A=y.parts.length,b=A>1?1:0,O=b;O<A;O++){var D=y.parts[O];if(x.contains(D.vertices,T))return P.pointA=T,P.pointB={x:T.x-y.position.x,y:T.y-y.position.y},P.bodyB=y,P.angleB=y.angle,a.set(y,!1),this.part=D,this.body=y,!0}return!1},update:function(){var y=this.pointer,T=this.body;if(!this.active||!y){T&&this.stopDrag();return}if(!y.isDown&&T){this.stopDrag();return}else if(y.isDown){if(!this.camera||!T&&!this.getBody(y))return;T=this.body;var P=this.position,A=this.constraint;this.camera.getWorldPoint(y.x,y.y,P),A.pointA.x=P.x,A.pointA.y=P.y,a.set(T,!1),this.world.emit(r.DRAG,T,this)}},stopDrag:function(){var y=this.body,T=this.constraint;T.bodyB=null,T.pointB=null,this.pointer=null,this.body=null,this.part=null,y&&this.world.emit(r.DRAG_END,y,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(r.BEFORE_UPDATE,this.update),this.scene.sys.input.off(o.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(o.POINTER_UP,this.onUp,this)}});m.exports=g},68243:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66280),S=i(22562),u=i(83419),l=i(53402),h=i(69351),r=i(48413),o=i(50792),p=i(1121),a=i(95540),v=i(35154),x=i(22562),g=i(35810),y=i(73834),T=i(4372),P=i(13037),A=i(31725),b=new u({Extends:o,initialize:function(D,B){o.call(this),this.scene=D,this.engine=r.create(B),this.localWorld=this.engine.world;var G=v(B,"gravity",null);G?this.setGravity(G.x,G.y,G.scale):G===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=v(B,"enabled",!0),this.getDelta=v(B,"getDelta",this.update60Hz);var V=a(B,"runner",{}),k=a(V,"fps",!1);k&&(V.delta=1e3/a(V,"fps",60)),this.runner=P.create(V),this.autoUpdate=v(B,"autoUpdate",!0);var U=v(B,"debug",!1);if(this.drawDebug=typeof U=="object"?!0:U,this.debugGraphic,this.debugConfig={showAxes:a(U,"showAxes",!1),showAngleIndicator:a(U,"showAngleIndicator",!1),angleColor:a(U,"angleColor",15208787),showBroadphase:a(U,"showBroadphase",!1),broadphaseColor:a(U,"broadphaseColor",16757760),showBounds:a(U,"showBounds",!1),boundsColor:a(U,"boundsColor",16777215),showVelocity:a(U,"showVelocity",!1),velocityColor:a(U,"velocityColor",44783),showCollisions:a(U,"showCollisions",!1),collisionColor:a(U,"collisionColor",16094476),showSeparations:a(U,"showSeparations",!1),separationColor:a(U,"separationColor",16753920),showBody:a(U,"showBody",!0),showStaticBody:a(U,"showStaticBody",!0),showInternalEdges:a(U,"showInternalEdges",!1),renderFill:a(U,"renderFill",!1),renderLine:a(U,"renderLine",!0),fillColor:a(U,"fillColor",1075465),fillOpacity:a(U,"fillOpacity",1),lineColor:a(U,"lineColor",2678297),lineOpacity:a(U,"lineOpacity",1),lineThickness:a(U,"lineThickness",1),staticFillColor:a(U,"staticFillColor",857979),staticLineColor:a(U,"staticLineColor",1255396),showSleeping:a(U,"showSleeping",!1),staticBodySleepOpacity:a(U,"staticBodySleepOpacity",.7),sleepFillColor:a(U,"sleepFillColor",4605510),sleepLineColor:a(U,"sleepLineColor",10066585),showSensors:a(U,"showSensors",!0),sensorFillColor:a(U,"sensorFillColor",857979),sensorLineColor:a(U,"sensorLineColor",1255396),showPositions:a(U,"showPositions",!0),positionSize:a(U,"positionSize",4),positionColor:a(U,"positionColor",14697178),showJoint:a(U,"showJoint",!0),jointColor:a(U,"jointColor",14737474),jointLineOpacity:a(U,"jointLineOpacity",1),jointLineThickness:a(U,"jointLineThickness",2),pinSize:a(U,"pinSize",4),pinColor:a(U,"pinColor",4382944),springColor:a(U,"springColor",14697184),anchorColor:a(U,"anchorColor",15724527),anchorSize:a(U,"anchorSize",4),showConvexHulls:a(U,"showConvexHulls",!1),hullColor:a(U,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),a(B,"setBounds",!1)){var W=B.setBounds;if(typeof W=="boolean")this.setBounds();else{var X=a(W,"x",0),_=a(W,"y",0),Q=a(W,"width",D.sys.scale.width),j=a(W,"height",D.sys.scale.height),it=a(W,"thickness",64),K=a(W,"left",!0),J=a(W,"right",!0),Y=a(W,"top",!0),q=a(W,"bottom",!0);this.setBounds(X,_,Q,j,it,K,J,Y,q)}}},setCompositeRenderStyle:function(O){var D=O.bodies,B=O.constraints,G=O.composites,V,k,U;for(V=0;V<D.length;V++)k=D[V],U=k.render,this.setBodyRenderStyle(k,U.lineColor,U.lineOpacity,U.lineThickness,U.fillColor,U.fillOpacity);for(V=0;V<B.length;V++)k=B[V],U=k.render,this.setConstraintRenderStyle(k,U.lineColor,U.lineOpacity,U.lineThickness,U.pinSize,U.anchorColor,U.anchorSize);for(V=0;V<G.length;V++)k=G[V],this.setCompositeRenderStyle(k);return this},setBodyRenderStyle:function(O,D,B,G,V,k){var U=O.render,W=this.debugConfig;return U?(D==null&&(D=O.isStatic?W.staticLineColor:W.lineColor),B==null&&(B=W.lineOpacity),G==null&&(G=W.lineThickness),V==null&&(V=O.isStatic?W.staticFillColor:W.fillColor),k==null&&(k=W.fillOpacity),D!==!1&&(U.lineColor=D),B!==!1&&(U.lineOpacity=B),G!==!1&&(U.lineThickness=G),V!==!1&&(U.fillColor=V),k!==!1&&(U.fillOpacity=k),this):this},setConstraintRenderStyle:function(O,D,B,G,V,k,U){var W=O.render,X=this.debugConfig;if(!W)return this;if(D==null){var _=W.type;_==="line"?D=X.jointColor:_==="pin"?D=X.pinColor:_==="spring"&&(D=X.springColor)}return B==null&&(B=X.jointLineOpacity),G==null&&(G=X.jointLineThickness),V==null&&(V=X.pinSize),k==null&&(k=X.anchorColor),U==null&&(U=X.anchorSize),D!==!1&&(W.lineColor=D),B!==!1&&(W.lineOpacity=B),G!==!1&&(W.lineThickness=G),V!==!1&&(W.pinSize=V),k!==!1&&(W.anchorColor=k),U!==!1&&(W.anchorSize=U),this},setEventsProxy:function(){var O=this,D=this.engine,B=this.localWorld;this.drawDebug&&(g.on(B,"compositeModified",function(G){O.setCompositeRenderStyle(G)}),g.on(B,"beforeAdd",function(G){for(var V=[].concat(G.object),k=0;k<V.length;k++){var U=V[k],W=U.render;U.type==="body"?O.setBodyRenderStyle(U,W.lineColor,W.lineOpacity,W.lineThickness,W.fillColor,W.fillOpacity):U.type==="composite"?O.setCompositeRenderStyle(U):U.type==="constraint"&&O.setConstraintRenderStyle(U,W.lineColor,W.lineOpacity,W.lineThickness,W.pinSize,W.anchorColor,W.anchorSize)}})),g.on(B,"beforeAdd",function(G){O.emit(p.BEFORE_ADD,G)}),g.on(B,"afterAdd",function(G){O.emit(p.AFTER_ADD,G)}),g.on(B,"beforeRemove",function(G){O.emit(p.BEFORE_REMOVE,G)}),g.on(B,"afterRemove",function(G){O.emit(p.AFTER_REMOVE,G)}),g.on(D,"beforeUpdate",function(G){O.emit(p.BEFORE_UPDATE,G)}),g.on(D,"afterUpdate",function(G){O.emit(p.AFTER_UPDATE,G)}),g.on(D,"collisionStart",function(G){var V=G.pairs,k,U;V.length>0&&V.map(function(W){k=W.bodyA,U=W.bodyB,k.gameObject&&k.gameObject.emit("collide",k,U,W),U.gameObject&&U.gameObject.emit("collide",U,k,W),g.trigger(k,"onCollide",{pair:W}),g.trigger(U,"onCollide",{pair:W}),k.onCollideCallback&&k.onCollideCallback(W),U.onCollideCallback&&U.onCollideCallback(W),k.onCollideWith[U.id]&&k.onCollideWith[U.id](U,W),U.onCollideWith[k.id]&&U.onCollideWith[k.id](k,W)}),O.emit(p.COLLISION_START,G,k,U)}),g.on(D,"collisionActive",function(G){var V=G.pairs,k,U;V.length>0&&V.map(function(W){k=W.bodyA,U=W.bodyB,k.gameObject&&k.gameObject.emit("collideActive",k,U,W),U.gameObject&&U.gameObject.emit("collideActive",U,k,W),g.trigger(k,"onCollideActive",{pair:W}),g.trigger(U,"onCollideActive",{pair:W}),k.onCollideActiveCallback&&k.onCollideActiveCallback(W),U.onCollideActiveCallback&&U.onCollideActiveCallback(W)}),O.emit(p.COLLISION_ACTIVE,G,k,U)}),g.on(D,"collisionEnd",function(G){var V=G.pairs,k,U;V.length>0&&V.map(function(W){k=W.bodyA,U=W.bodyB,k.gameObject&&k.gameObject.emit("collideEnd",k,U,W),U.gameObject&&U.gameObject.emit("collideEnd",U,k,W),g.trigger(k,"onCollideEnd",{pair:W}),g.trigger(U,"onCollideEnd",{pair:W}),k.onCollideEndCallback&&k.onCollideEndCallback(W),U.onCollideEndCallback&&U.onCollideEndCallback(W)}),O.emit(p.COLLISION_END,G,k,U)})},setBounds:function(O,D,B,G,V,k,U,W,X){return O===void 0&&(O=0),D===void 0&&(D=0),B===void 0&&(B=this.scene.sys.scale.width),G===void 0&&(G=this.scene.sys.scale.height),V===void 0&&(V=64),k===void 0&&(k=!0),U===void 0&&(U=!0),W===void 0&&(W=!0),X===void 0&&(X=!0),this.updateWall(k,"left",O-V,D-V,V,G+V*2),this.updateWall(U,"right",O+B,D-V,V,G+V*2),this.updateWall(W,"top",O,D-V,B,V),this.updateWall(X,"bottom",O,D+G,B,V),this},updateWall:function(O,D,B,G,V,k){var U=this.walls[D];O?(U&&T.remove(this.localWorld,U),B+=V/2,G+=k/2,this.walls[D]=this.create(B,G,V,k,{isStatic:!0,friction:0,frictionStatic:0})):(U&&T.remove(this.localWorld,U),this.walls[D]=null)},createDebugGraphic:function(){var O=this.scene.sys.add.graphics({x:0,y:0});return O.setDepth(Number.MAX_VALUE),this.debugGraphic=O,this.drawDebug=!0,O},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(O,D,B){return O===void 0&&(O=0),D===void 0&&(D=1),B===void 0&&(B=.001),this.localWorld.gravity.x=O,this.localWorld.gravity.y=D,this.localWorld.gravity.scale=B,this},create:function(O,D,B,G,V){var k=d.rectangle(O,D,B,G,V);return T.add(this.localWorld,k),k},add:function(O){return T.add(this.localWorld,O),this},remove:function(O,D){Array.isArray(O)||(O=[O]);for(var B=0;B<O.length;B++){var G=O[B],V=G.body?G.body:G;h.remove(this.localWorld,V,D)}return this},removeConstraint:function(O,D){return h.remove(this.localWorld,O,D),this},convertTilemapLayer:function(O,D){var B=O.layer,G=O.getTilesWithin(0,0,B.width,B.height,{isColliding:!0});return this.convertTiles(G,D),this},convertTiles:function(O,D){if(O.length===0)return this;for(var B=0;B<O.length;B++)new y(this,O[B],D);return this},nextGroup:function(O){return x.nextGroup(O)},nextCategory:function(){return x.nextCategory()},pause:function(){return this.enabled=!1,this.emit(p.PAUSE),this},resume:function(){return this.enabled=!0,this.runner.timeLastTick=l.now(),this.emit(p.RESUME),this},update:function(O){if(!(!this.enabled||!this.autoUpdate)){var D=this.engine,B=this.runner,G=l.now(),V=B.delta,k=0,U=O-B.timeLastTick;if((!U||!B.timeLastTick||U>Math.max(P._maxFrameDelta,B.maxFrameTime))&&(U=B.frameDelta||P._frameDeltaFallback),B.frameDeltaSmoothing){B.frameDeltaHistory.push(U),B.frameDeltaHistory=B.frameDeltaHistory.slice(-B.frameDeltaHistorySize);var W=B.frameDeltaHistory.slice(0).sort(),X=B.frameDeltaHistory.slice(W.length*P._smoothingLowerBound,W.length*P._smoothingUpperBound),_=P._mean(X);U=_||U}B.frameDeltaSnapping&&(U=1e3/Math.round(1e3/U)),B.frameDelta=U,B.timeLastTick=O,B.timeBuffer+=B.frameDelta,B.timeBuffer=l.clamp(B.timeBuffer,0,B.frameDelta+V*P._timeBufferMargin),B.lastUpdatesDeferred=0;for(var Q=B.maxUpdates||Math.ceil(B.maxFrameTime/V),j=l.now();V>0&&B.timeBuffer>=V*P._timeBufferMargin;){r.update(D,V),B.timeBuffer-=V,k+=1;var it=l.now()-G,K=l.now()-j,J=it+P._elapsedNextEstimate*K/k;if(k>=Q||J>B.maxFrameTime){B.lastUpdatesDeferred=Math.round(Math.max(0,B.timeBuffer/V-P._timeBufferMargin));break}}}},step:function(O){r.update(this.engine,O)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(O){var D=O.hasOwnProperty("body")?O.body:O;return h.get(this.localWorld,D.id,D.type)!==null},getAllBodies:function(){return h.allBodies(this.localWorld)},getAllConstraints:function(){return h.allConstraints(this.localWorld)},getAllComposites:function(){return h.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var O=this.debugConfig,D=this.engine,B=this.debugGraphic,G=h.allBodies(this.localWorld);this.debugGraphic.clear(),O.showBroadphase&&D.broadphase.controller&&this.renderGrid(D.broadphase,B,O.broadphaseColor,.5),O.showBounds&&this.renderBodyBounds(G,B,O.boundsColor,.5),(O.showBody||O.showStaticBody)&&this.renderBodies(G),O.showJoint&&this.renderJoints(),(O.showAxes||O.showAngleIndicator)&&this.renderBodyAxes(G,B,O.showAxes,O.angleColor,.5),O.showVelocity&&this.renderBodyVelocity(G,B,O.velocityColor,1,2),O.showSeparations&&this.renderSeparations(D.pairs.list,B,O.separationColor),O.showCollisions&&this.renderCollisions(D.pairs.list,B,O.collisionColor)}},renderGrid:function(O,D,B,G){D.lineStyle(1,B,G);for(var V=l.keys(O.buckets),k=0;k<V.length;k++){var U=V[k];if(!(O.buckets[U].length<2)){var W=U.split(/C|R/);D.strokeRect(parseInt(W[1],10)*O.bucketWidth,parseInt(W[2],10)*O.bucketHeight,O.bucketWidth,O.bucketHeight)}}return this},renderSeparations:function(O,D,B){D.lineStyle(1,B,1);for(var G=0;G<O.length;G++){var V=O[G];if(V.isActive){var k=V.collision,U=k.bodyA,W=k.bodyB,X=U.position,_=W.position,Q=k.penetration,j=!U.isStatic&&!W.isStatic?4:1;W.isStatic&&(j=0),D.lineBetween(_.x,_.y,_.x-Q.x*j,_.y-Q.y*j),j=!U.isStatic&&!W.isStatic?4:1,U.isStatic&&(j=0),D.lineBetween(X.x,X.y,X.x-Q.x*j,X.y-Q.y*j)}}return this},renderCollisions:function(O,D,B){D.lineStyle(1,B,.5),D.fillStyle(B,1);var G,V;for(G=0;G<O.length;G++)if(V=O[G],!!V.isActive)for(var k=0;k<V.contactCount;k++){var U=V.contacts[k],W=U.vertex;W&&D.fillRect(W.x-2,W.y-2,5,5)}for(G=0;G<O.length;G++)if(V=O[G],!!V.isActive){var X=V.collision,_=V.contacts;if(V.contactCount>0){var Q=_[0].vertex.x,j=_[0].vertex.y;V.contactCount===2&&(Q=(_[0].vertex.x+_[1].vertex.x)/2,j=(_[0].vertex.y+_[1].vertex.y)/2),X.bodyB===X.supports[0].body||X.bodyA.isStatic?D.lineBetween(Q-X.normal.x*8,j-X.normal.y*8,Q,j):D.lineBetween(Q+X.normal.x*8,j+X.normal.y*8,Q,j)}}return this},renderBodyBounds:function(O,D,B,G){D.lineStyle(1,B,G);for(var V=0;V<O.length;V++){var k=O[V];if(k.render.visible){var U=k.bounds;if(U)D.strokeRect(U.min.x,U.min.y,U.max.x-U.min.x,U.max.y-U.min.y);else for(var W=k.parts,X=W.length>1?1:0;X<W.length;X++){var _=W[X];D.strokeRect(_.bounds.min.x,_.bounds.min.y,_.bounds.max.x-_.bounds.min.x,_.bounds.max.y-_.bounds.min.y)}}}return this},renderBodyAxes:function(O,D,B,G,V){D.lineStyle(1,G,V);for(var k=0;k<O.length;k++){var U=O[k],W=U.parts;if(U.render.visible){var X,_,Q;if(B)for(_=W.length>1?1:0;_<W.length;_++)for(X=W[_],Q=0;Q<X.axes.length;Q++){var j=X.axes[Q];D.lineBetween(X.position.x,X.position.y,X.position.x+j.x*20,X.position.y+j.y*20)}else for(_=W.length>1?1:0;_<W.length;_++)for(X=W[_],Q=0;Q<X.axes.length;Q++)D.lineBetween(X.position.x,X.position.y,(X.vertices[0].x+X.vertices[X.vertices.length-1].x)/2,(X.vertices[0].y+X.vertices[X.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(O,D,B,G,V){D.lineStyle(V,B,G);for(var k=0;k<O.length;k++){var U=O[k];U.render.visible&&D.lineBetween(U.position.x,U.position.y,U.position.x+(U.position.x-U.positionPrev.x)*2,U.position.y+(U.position.y-U.positionPrev.y)*2)}return this},renderBodies:function(O){for(var D=this.debugGraphic,B=this.debugConfig,G=B.showBody,V=B.showStaticBody,k=B.showSleeping,U=B.showInternalEdges,W=B.showConvexHulls,X=B.renderFill,_=B.renderLine,Q=B.staticBodySleepOpacity,j=B.sleepFillColor,it=B.sleepLineColor,K=B.hullColor,J=0;J<O.length;J++){var Y=O[J];if(Y.render.visible&&!(!V&&Y.isStatic||!G&&!Y.isStatic)){var q=Y.render.lineColor,$=Y.render.lineOpacity,et=Y.render.lineThickness,rt=Y.render.fillColor,at=Y.render.fillOpacity;k&&Y.isSleeping&&(Y.isStatic?($*=Q,at*=Q):(q=it,rt=j)),X||(rt=null),_||(q=null),this.renderBody(Y,D,U,q,$,et,rt,at);var lt=Y.parts.length;W&&lt>1&&this.renderConvexHull(Y,D,K,et)}}},renderBody:function(O,D,B,G,V,k,U,W){G===void 0&&(G=null),V===void 0&&(V=null),k===void 0&&(k=1),U===void 0&&(U=null),W===void 0&&(W=null);for(var X=this.debugConfig,_=X.sensorFillColor,Q=X.sensorLineColor,j=O.parts,it=j.length,K=it>1?1:0;K<it;K++){var J=j[K],Y=J.render,q=Y.opacity;if(!(!Y.visible||q===0||J.isSensor&&!X.showSensors)){var $=J.circleRadius;if(D.beginPath(),J.isSensor?(U!==null&&D.fillStyle(_,W*q),G!==null&&D.lineStyle(k,Q,V*q)):(U!==null&&D.fillStyle(U,W*q),G!==null&&D.lineStyle(k,G,V*q)),$)D.arc(J.position.x,J.position.y,$,0,2*Math.PI);else{var et=J.vertices,rt=et.length;D.moveTo(et[0].x,et[0].y);for(var at=1;at<rt;at++){var lt=et[at];if(!et[at-1].isInternal||B?D.lineTo(lt.x,lt.y):D.moveTo(lt.x,lt.y),at<rt&&lt.isInternal&&!B){var vt=(at+1)%rt;D.moveTo(et[vt].x,et[vt].y)}}D.closePath()}U!==null&&D.fillPath(),G!==null&&D.strokePath()}}if(X.showPositions&&!O.isStatic){var xt=O.position.x,ut=O.position.y,mt=Math.ceil(X.positionSize/2);D.fillStyle(X.positionColor,1),D.fillRect(xt-mt,ut-mt,X.positionSize,X.positionSize)}return this},renderConvexHull:function(O,D,B,G){G===void 0&&(G=1);var V=O.parts,k=V.length;if(k>1){var U=O.vertices;D.lineStyle(G,B),D.beginPath(),D.moveTo(U[0].x,U[0].y);for(var W=1;W<U.length;W++)D.lineTo(U[W].x,U[W].y);D.lineTo(U[0].x,U[0].y),D.strokePath()}return this},renderJoints:function(){for(var O=this.debugGraphic,D=h.allConstraints(this.localWorld),B=0;B<D.length;B++){var G=D[B].render,V=G.lineColor,k=G.lineOpacity,U=G.lineThickness,W=G.pinSize,X=G.anchorColor,_=G.anchorSize;this.renderConstraint(D[B],O,V,k,U,W,X,_)}},renderConstraint:function(O,D,B,G,V,k,U,W){var X=O.render;if(!X.visible||!O.pointA||!O.pointB)return this;D.lineStyle(V,B,G);var _=O.bodyA,Q=O.bodyB,j,it;if(_?j=A.add(_.position,O.pointA):j=O.pointA,X.type==="pin")D.strokeCircle(j.x,j.y,k);else{if(Q?it=A.add(Q.position,O.pointB):it=O.pointB,D.beginPath(),D.moveTo(j.x,j.y),X.type==="spring")for(var K=A.sub(it,j),J=A.perp(A.normalise(K)),Y=Math.ceil(l.clamp(O.length/5,12,20)),q,$=1;$<Y;$+=1)q=$%2===0?1:-1,D.lineTo(j.x+K.x*($/Y)+J.x*q*4,j.y+K.y*($/Y)+J.y*q*4);D.lineTo(it.x,it.y)}return D.strokePath(),X.anchors&&W>0&&(D.fillStyle(U),D.fillCircle(j.x,j.y,W),D.fillCircle(it.x,it.y,W)),this},resetCollisionIDs:function(){return S._nextCollidingGroupId=1,S._nextNonCollidingGroupId=-1,S._nextCategory=1,this},shutdown:function(){g.off(this.engine),this.removeAllListeners(),T.clear(this.localWorld,!1),r.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});m.exports=b},70410:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setBounce:function(i){return this.body.restitution=i,this}};m.exports=E},66968:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setCollisionCategory:function(i){return this.body.collisionFilter.category=i,this},setCollisionGroup:function(i){return this.body.collisionFilter.group=i,this},setCollidesWith:function(i){var d=0;if(!Array.isArray(i))d=i;else for(var S=0;S<i.length;S++)d|=i[S];return this.body.collisionFilter.mask=d,this},setOnCollide:function(i){return this.body.onCollideCallback=i,this},setOnCollideEnd:function(i){return this.body.onCollideEndCallback=i,this},setOnCollideActive:function(i){return this.body.onCollideActiveCallback=i,this},setOnCollideWith:function(i,d){Array.isArray(i)||(i=[i]);for(var S=0;S<i.length;S++){var u=i[S].hasOwnProperty("body")?i[S].body:i[S];this.body.setOnCollideWith(u,d)}return this}};m.exports=E},51607:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(22562),S={applyForce:function(u){return this._tempVec2.set(this.body.position.x,this.body.position.y),d.applyForce(this.body,this._tempVec2,u),this},applyForceFrom:function(u,l){return d.applyForce(this.body,u,l),this},thrust:function(u){var l=this.body.angle;return this._tempVec2.set(u*Math.cos(l),u*Math.sin(l)),d.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(u){var l=this.body.angle-Math.PI/2;return this._tempVec2.set(u*Math.cos(l),u*Math.sin(l)),d.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(u){var l=this.body.angle+Math.PI/2;return this._tempVec2.set(u*Math.cos(l),u*Math.sin(l)),d.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(u){var l=this.body.angle-Math.PI;return this._tempVec2.set(u*Math.cos(l),u*Math.sin(l)),d.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};m.exports=S},5436:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setFriction:function(i,d,S){return this.body.friction=i,d!==void 0&&(this.body.frictionAir=d),S!==void 0&&(this.body.frictionStatic=S),this},setFrictionAir:function(i){return this.body.frictionAir=i,this},setFrictionStatic:function(i){return this.body.frictionStatic=i,this}};m.exports=E},39858:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setIgnoreGravity:function(i){return this.body.ignoreGravity=i,this}};m.exports=E},37302:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(22562),S=i(26099),u={setMass:function(l){return d.setMass(this.body,l),this},setDensity:function(l){return d.setDensity(this.body,l),this},centerOfMass:{get:function(){return new S(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};m.exports=u},39132:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setSensor:function(i){return this.body.isSensor=i,this},isSensor:function(){return this.body.isSensor}};m.exports=E},57772:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(66280),S=i(22562),u=i(43855),l=i(95540),h=i(19496),r=i(85791),o=i(41598),p={setRectangle:function(a,v,x){return this.setBody({type:"rectangle",width:a,height:v},x)},setCircle:function(a,v){return this.setBody({type:"circle",radius:a},v)},setPolygon:function(a,v,x){return this.setBody({type:"polygon",sides:v,radius:a},x)},setTrapezoid:function(a,v,x,g){return this.setBody({type:"trapezoid",width:a,height:v,slope:x},g)},setExistingBody:function(a,v){v===void 0&&(v=!0),this.body&&this.world.remove(this.body,!0),this.body=a;for(var x=0;x<a.parts.length;x++)a.parts[x].gameObject=this;var g=this;if(a.destroy=function(){g.world.remove(g.body,!0),g.body.gameObject=null},v&&(this.world.has(a)&&this.world.remove(a,!0),this.world.add(a)),this._originComponent){var y=a.render.sprite.xOffset,T=a.render.sprite.yOffset,P=a.centerOfMass.x,A=a.centerOfMass.y;if(u(P,.5)&&u(A,.5))this.setOrigin(y+.5,T+.5);else{var b=a.centerOffset.x,O=a.centerOffset.y;this.setOrigin(y+b/this.displayWidth,T+O/this.displayHeight)}}return this},setBody:function(a,v){if(!a)return this;var x;typeof a=="string"&&(a={type:a});var g=l(a,"type","rectangle"),y=l(a,"x",this._tempVec2.x),T=l(a,"y",this._tempVec2.y),P=l(a,"width",this.width),A=l(a,"height",this.height);switch(g){case"rectangle":x=d.rectangle(y,T,P,A,v);break;case"circle":var b=l(a,"radius",Math.max(P,A)/2),O=l(a,"maxSides",25);x=d.circle(y,T,b,v,O);break;case"trapezoid":var D=l(a,"slope",.5);x=d.trapezoid(y,T,P,A,D,v);break;case"polygon":var B=l(a,"sides",5),G=l(a,"radius",Math.max(P,A)/2);x=d.polygon(y,T,B,G,v);break;case"fromVertices":case"fromVerts":var V=l(a,"verts",null);if(V)if(typeof V=="string"&&(V=o.fromPath(V)),this.body&&!this.body.hasOwnProperty("temp"))S.setVertices(this.body,V),x=this.body;else{var k=l(a,"flagInternal",!1),U=l(a,"removeCollinear",.01),W=l(a,"minimumArea",10);x=d.fromVertices(y,T,V,v,k,U,W)}break;case"fromPhysicsEditor":x=h.parseBody(y,T,a,v);break;case"fromPhysicsTracer":x=r.parseBody(y,T,a,v);break}return x&&this.setExistingBody(x,a.addToWorld),this}};m.exports=p},38083:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(1121),S=i(53614),u=i(35810),l={setToSleep:function(){return S.set(this.body,!0),this},setAwake:function(){return S.set(this.body,!1),this},setSleepThreshold:function(h){return h===void 0&&(h=60),this.body.sleepThreshold=h,this},setSleepEvents:function(h,r){return this.setSleepStartEvent(h),this.setSleepEndEvent(r),this},setSleepStartEvent:function(h){if(h){var r=this.world;u.on(this.body,"sleepStart",function(o){r.emit(d.SLEEP_START,o,this)})}else u.off(this.body,"sleepStart");return this},setSleepEndEvent:function(h){if(h){var r=this.world;u.on(this.body,"sleepEnd",function(o){r.emit(d.SLEEP_END,o,this)})}else u.off(this.body,"sleepEnd");return this}};m.exports=l},90556:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(22562),S={setStatic:function(u){return d.setStatic(this.body,u),this},isStatic:function(){return this.body.isStatic}};m.exports=S},85436:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(22562),S=i(36383),u=i(86554),l=i(30954),h=4,r={x:{get:function(){return this.body.position.x},set:function(o){this._tempVec2.set(o,this.y),d.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(o){this._tempVec2.set(this.x,o),d.setPosition(this.body,this._tempVec2)}},scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(o){this.setScale(o,o)}},scaleX:{get:function(){return this._scaleX},set:function(o){var p=1/this._scaleX,a=1/this._scaleY;this._scaleX=o,this._scaleX===0?this.renderFlags&=~h:this.renderFlags|=h,d.scale(this.body,p,a),d.scale(this.body,o,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(o){var p=1/this._scaleX,a=1/this._scaleY;this._scaleY=o,this._scaleY===0?this.renderFlags&=~h:this.renderFlags|=h,d.scale(this.body,p,a),d.scale(this.body,this._scaleX,o)}},angle:{get:function(){return l(this.body.angle*S.RAD_TO_DEG)},set:function(o){this.rotation=l(o)*S.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(o){this._rotation=u(o),d.setAngle(this.body,this._rotation)}},setPosition:function(o,p){return o===void 0&&(o=0),p===void 0&&(p=o),this._tempVec2.set(o,p),d.setPosition(this.body,this._tempVec2),this},setRotation:function(o){return o===void 0&&(o=0),this._rotation=u(o),d.setAngle(this.body,o),this},setFixedRotation:function(){return d.setInertia(this.body,1/0),this},setAngle:function(o){return o===void 0&&(o=0),this.angle=o,d.setAngle(this.body,this.rotation),this},setScale:function(o,p,a){o===void 0&&(o=1),p===void 0&&(p=o);var v=1/this._scaleX,x=1/this._scaleY;return this._scaleX=o,this._scaleY=p,d.scale(this.body,v,x,a),d.scale(this.body,o,p,a),this}};m.exports=r},42081:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(22562),S={setVelocityX:function(u){return this._tempVec2.set(u,this.body.velocity.y),d.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(u){return this._tempVec2.set(this.body.velocity.x,u),d.setVelocity(this.body,this._tempVec2),this},setVelocity:function(u,l){return this._tempVec2.set(u,l),d.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return d.getVelocity(this.body)},setAngularVelocity:function(u){return d.setAngularVelocity(this.body,u),this},getAngularVelocity:function(){return d.getAngularVelocity(this.body)},setAngularSpeed:function(u){return d.setAngularSpeed(this.body,u),this},getAngularSpeed:function(){return d.getAngularSpeed(this.body)}};m.exports=S},31884:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Bounce:i(70410),Collision:i(66968),Force:i(51607),Friction:i(5436),Gravity:i(39858),Mass:i(37302),Sensor:i(39132),SetBody:i(57772),Sleep:i(38083),Static:i(90556),Transform:i(85436),Velocity:i(42081)}},85608:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="afteradd"},1213:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="afterremove"},25968:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="afterupdate"},67205:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="beforeadd"},39438:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="beforeremove"},44823:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="beforeupdate"},92593:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="collisionactive"},60128:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="collisionend"},76861:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="collisionstart"},92362:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="dragend"},76408:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="drag"},93971:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="dragstart"},5656:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pause"},47861:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="resume"},79099:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="sleepend"},35906:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="sleepstart"},1121:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={AFTER_ADD:i(85608),AFTER_REMOVE:i(1213),AFTER_UPDATE:i(25968),BEFORE_ADD:i(67205),BEFORE_REMOVE:i(39438),BEFORE_UPDATE:i(44823),COLLISION_ACTIVE:i(92593),COLLISION_END:i(60128),COLLISION_START:i(76861),DRAG_END:i(92362),DRAG:i(76408),DRAG_START:i(93971),PAUSE:i(5656),RESUME:i(47861),SLEEP_END:i(79099),SLEEP_START:i(35906)}},3875:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={BodyBounds:i(68174),Components:i(31884),Events:i(1121),Factory:i(28137),MatterGameObject:i(75803),Image:i(23181),Matter:i(19933),MatterPhysics:i(42045),PolyDecomp:i(55973),Sprite:i(34803),TileBody:i(73834),PhysicsEditorParser:i(19496),PhysicsJSONParser:i(85791),PointerConstraint:i(98713),World:i(68243)}},22562:(m,E,i)=>{var d={};m.exports=d;var S=i(41598),u=i(31725),l=i(53614),h=i(53402),r=i(15647),o=i(66615);(function(){d._timeCorrection=!0,d._inertiaScale=4,d._nextCollidingGroupId=1,d._nextNonCollidingGroupId=-1,d._nextCategory=1,d._baseDelta=16.666666666666668,d.create=function(a){var v={id:h.nextId(),type:"body",label:"Body",parts:[],plugin:{},attractors:a.attractors||[],wrapBounds:null,angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!a.hasOwnProperty("position")&&a.hasOwnProperty("vertices")?a.position=S.centre(a.vertices):a.hasOwnProperty("vertices")||(v.vertices=S.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var x=h.extend(v,a);return p(x,a),x.setOnCollideWith=function(g,y){return y?this.onCollideWith[g.id]=y:delete this.onCollideWith[g.id],this},x},d.nextGroup=function(a){return a?d._nextNonCollidingGroupId--:d._nextCollidingGroupId++},d.nextCategory=function(){return d._nextCategory=d._nextCategory<<1,d._nextCategory};var p=function(a,v){if(v=v||{},d.set(a,{bounds:a.bounds||r.create(a.vertices),positionPrev:a.positionPrev||u.clone(a.position),anglePrev:a.anglePrev||a.angle,vertices:a.vertices,parts:a.parts||[a],isStatic:a.isStatic,isSleeping:a.isSleeping,parent:a.parent||a}),S.rotate(a.vertices,a.angle,a.position),o.rotate(a.axes,a.angle),r.update(a.bounds,a.vertices,a.velocity),d.set(a,{axes:v.axes||a.axes,area:v.area||a.area,mass:v.mass||a.mass,inertia:v.inertia||a.inertia}),a.parts.length===1){var x=a.bounds,g=a.centerOfMass,y=a.centerOffset,T=x.max.x-x.min.x,P=x.max.y-x.min.y;g.x=-(x.min.x-a.position.x)/T,g.y=-(x.min.y-a.position.y)/P,y.x=T*g.x,y.y=P*g.y}};d.set=function(a,v,x){var g;typeof v=="string"&&(g=v,v={},v[g]=x);for(g in v)if(Object.prototype.hasOwnProperty.call(v,g))switch(x=v[g],g){case"isStatic":d.setStatic(a,x);break;case"isSleeping":l.set(a,x);break;case"mass":d.setMass(a,x);break;case"density":d.setDensity(a,x);break;case"inertia":d.setInertia(a,x);break;case"vertices":d.setVertices(a,x);break;case"position":d.setPosition(a,x);break;case"angle":d.setAngle(a,x);break;case"velocity":d.setVelocity(a,x);break;case"angularVelocity":d.setAngularVelocity(a,x);break;case"speed":d.setSpeed(a,x);break;case"angularSpeed":d.setAngularSpeed(a,x);break;case"parts":d.setParts(a,x);break;case"centre":d.setCentre(a,x);break;default:a[g]=x}},d.setStatic=function(a,v){for(var x=0;x<a.parts.length;x++){var g=a.parts[x];v?(g.isStatic||(g._original={restitution:g.restitution,friction:g.friction,mass:g.mass,inertia:g.inertia,density:g.density,inverseMass:g.inverseMass,inverseInertia:g.inverseInertia}),g.restitution=0,g.friction=1,g.mass=g.inertia=g.density=1/0,g.inverseMass=g.inverseInertia=0,g.positionPrev.x=g.position.x,g.positionPrev.y=g.position.y,g.anglePrev=g.angle,g.angularVelocity=0,g.speed=0,g.angularSpeed=0,g.motion=0):g._original&&(g.restitution=g._original.restitution,g.friction=g._original.friction,g.mass=g._original.mass,g.inertia=g._original.inertia,g.density=g._original.density,g.inverseMass=g._original.inverseMass,g.inverseInertia=g._original.inverseInertia,g._original=null),g.isStatic=v}},d.setMass=function(a,v){var x=a.inertia/(a.mass/6);a.inertia=x*(v/6),a.inverseInertia=1/a.inertia,a.mass=v,a.inverseMass=1/a.mass,a.density=a.mass/a.area},d.setDensity=function(a,v){d.setMass(a,v*a.area),a.density=v},d.setInertia=function(a,v){a.inertia=v,a.inverseInertia=1/a.inertia},d.setVertices=function(a,v){v[0].body===a?a.vertices=v:a.vertices=S.create(v,a),a.axes=o.fromVertices(a.vertices),a.area=S.area(a.vertices),d.setMass(a,a.density*a.area);var x=S.centre(a.vertices);S.translate(a.vertices,x,-1),d.setInertia(a,d._inertiaScale*S.inertia(a.vertices,a.mass)),S.translate(a.vertices,a.position),r.update(a.bounds,a.vertices,a.velocity)},d.setParts=function(a,v,x){var g;for(v=v.slice(0),a.parts.length=0,a.parts.push(a),a.parent=a,g=0;g<v.length;g++){var y=v[g];y!==a&&(y.parent=a,a.parts.push(y))}if(a.parts.length!==1){if(x=typeof x<"u"?x:!0,x){var T=[];for(g=0;g<v.length;g++)T=T.concat(v[g].vertices);S.clockwiseSort(T);var P=S.hull(T),A=S.centre(P);d.setVertices(a,P),S.translate(a.vertices,A)}var b=d._totalProperties(a),O=b.centre.x,D=b.centre.y,B=a.bounds,G=a.centerOfMass,V=a.centerOffset;r.update(B,a.vertices,a.velocity),G.x=-(B.min.x-O)/(B.max.x-B.min.x),G.y=-(B.min.y-D)/(B.max.y-B.min.y),V.x=O,V.y=D,a.area=b.area,a.parent=a,a.position.x=O,a.position.y=D,a.positionPrev.x=O,a.positionPrev.y=D,d.setMass(a,b.mass),d.setInertia(a,b.inertia),d.setPosition(a,b.centre)}},d.setCentre=function(a,v,x){x?(a.positionPrev.x+=v.x,a.positionPrev.y+=v.y,a.position.x+=v.x,a.position.y+=v.y):(a.positionPrev.x=v.x-(a.position.x-a.positionPrev.x),a.positionPrev.y=v.y-(a.position.y-a.positionPrev.y),a.position.x=v.x,a.position.y=v.y)},d.setPosition=function(a,v,x){var g=u.sub(v,a.position);x?(a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,a.velocity.x=g.x,a.velocity.y=g.y,a.speed=u.magnitude(g)):(a.positionPrev.x+=g.x,a.positionPrev.y+=g.y);for(var y=0;y<a.parts.length;y++){var T=a.parts[y];T.position.x+=g.x,T.position.y+=g.y,S.translate(T.vertices,g),r.update(T.bounds,T.vertices,a.velocity)}},d.setAngle=function(a,v,x){var g=v-a.angle;x?(a.anglePrev=a.angle,a.angularVelocity=g,a.angularSpeed=Math.abs(g)):a.anglePrev+=g;for(var y=0;y<a.parts.length;y++){var T=a.parts[y];T.angle+=g,S.rotate(T.vertices,g,a.position),o.rotate(T.axes,g),r.update(T.bounds,T.vertices,a.velocity),y>0&&u.rotateAbout(T.position,g,a.position,T.position)}},d.setVelocity=function(a,v){var x=a.deltaTime/d._baseDelta;a.positionPrev.x=a.position.x-v.x*x,a.positionPrev.y=a.position.y-v.y*x,a.velocity.x=(a.position.x-a.positionPrev.x)/x,a.velocity.y=(a.position.y-a.positionPrev.y)/x,a.speed=u.magnitude(a.velocity)},d.getVelocity=function(a){var v=d._baseDelta/a.deltaTime;return{x:(a.position.x-a.positionPrev.x)*v,y:(a.position.y-a.positionPrev.y)*v}},d.getSpeed=function(a){return u.magnitude(d.getVelocity(a))},d.setSpeed=function(a,v){d.setVelocity(a,u.mult(u.normalise(d.getVelocity(a)),v))},d.setAngularVelocity=function(a,v){var x=a.deltaTime/d._baseDelta;a.anglePrev=a.angle-v*x,a.angularVelocity=(a.angle-a.anglePrev)/x,a.angularSpeed=Math.abs(a.angularVelocity)},d.getAngularVelocity=function(a){return(a.angle-a.anglePrev)*d._baseDelta/a.deltaTime},d.getAngularSpeed=function(a){return Math.abs(d.getAngularVelocity(a))},d.setAngularSpeed=function(a,v){d.setAngularVelocity(a,h.sign(d.getAngularVelocity(a))*v)},d.translate=function(a,v,x){d.setPosition(a,u.add(a.position,v),x)},d.rotate=function(a,v,x,g){if(!x)d.setAngle(a,a.angle+v,g);else{var y=Math.cos(v),T=Math.sin(v),P=a.position.x-x.x,A=a.position.y-x.y;d.setPosition(a,{x:x.x+(P*y-A*T),y:x.y+(P*T+A*y)},g),d.setAngle(a,a.angle+v,g)}},d.scale=function(a,v,x,g){var y=0,T=0;g=g||a.position;for(var P=a.inertia===1/0,A=0;A<a.parts.length;A++){var b=a.parts[A];b.scale.x=v,b.scale.y=x,S.scale(b.vertices,v,x,g),b.axes=o.fromVertices(b.vertices),b.area=S.area(b.vertices),d.setMass(b,a.density*b.area),S.translate(b.vertices,{x:-b.position.x,y:-b.position.y}),d.setInertia(b,d._inertiaScale*S.inertia(b.vertices,b.mass)),S.translate(b.vertices,{x:b.position.x,y:b.position.y}),A>0&&(y+=b.area,T+=b.inertia),b.position.x=g.x+(b.position.x-g.x)*v,b.position.y=g.y+(b.position.y-g.y)*x,r.update(b.bounds,b.vertices,a.velocity)}a.parts.length>1&&(a.area=y,a.isStatic||(d.setMass(a,a.density*y),d.setInertia(a,T))),a.circleRadius&&(v===x?a.circleRadius*=v:a.circleRadius=null),P&&d.setInertia(a,1/0)},d.update=function(a,v){v=(typeof v<"u"?v:16.666666666666668)*a.timeScale;var x=v*v,g=d._timeCorrection?v/(a.deltaTime||v):1,y=1-a.frictionAir*(v/h._baseDelta),T=(a.position.x-a.positionPrev.x)*g,P=(a.position.y-a.positionPrev.y)*g;a.velocity.x=T*y+a.force.x/a.mass*x,a.velocity.y=P*y+a.force.y/a.mass*x,a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,a.position.x+=a.velocity.x,a.position.y+=a.velocity.y,a.deltaTime=v,a.angularVelocity=(a.angle-a.anglePrev)*y*g+a.torque/a.inertia*x,a.anglePrev=a.angle,a.angle+=a.angularVelocity,a.speed=u.magnitude(a.velocity),a.angularSpeed=Math.abs(a.angularVelocity);for(var A=0;A<a.parts.length;A++){var b=a.parts[A];S.translate(b.vertices,a.velocity),A>0&&(b.position.x+=a.velocity.x,b.position.y+=a.velocity.y),a.angularVelocity!==0&&(S.rotate(b.vertices,a.angularVelocity,a.position),o.rotate(b.axes,a.angularVelocity),A>0&&u.rotateAbout(b.position,a.angularVelocity,a.position,b.position)),r.update(b.bounds,b.vertices,a.velocity)}},d.updateVelocities=function(a){var v=d._baseDelta/a.deltaTime,x=a.velocity;x.x=(a.position.x-a.positionPrev.x)*v,x.y=(a.position.y-a.positionPrev.y)*v,a.speed=Math.sqrt(x.x*x.x+x.y*x.y),a.angularVelocity=(a.angle-a.anglePrev)*v,a.angularSpeed=Math.abs(a.angularVelocity)},d.applyForce=function(a,v,x){var g={x:v.x-a.position.x,y:v.y-a.position.y};a.force.x+=x.x,a.force.y+=x.y,a.torque+=g.x*x.y-g.y*x.x},d._totalProperties=function(a){for(var v={mass:0,area:0,inertia:0,centre:{x:0,y:0}},x=a.parts.length===1?0:1;x<a.parts.length;x++){var g=a.parts[x],y=g.mass!==1/0?g.mass:1;v.mass+=y,v.area+=g.area,v.inertia+=g.inertia,v.centre=u.add(v.centre,u.mult(g.position,y))}return v.centre=u.div(v.centre,v.mass),v},d.wrap=function(a,v){var x=r.wrap(a.bounds,v);return x&&d.translate(a,x),x}})()},69351:(m,E,i)=>{var d={};m.exports=d;var S=i(35810),u=i(53402),l=i(15647),h=i(22562);(function(){d.create=function(r){return u.extend({id:u.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},wrapBounds:null,cache:{allBodies:null,allConstraints:null,allComposites:null}},r)},d.setModified=function(r,o,p,a){if(S.trigger(r,"compositeModified",r),r.isModified=o,o&&r.cache&&(r.cache.allBodies=null,r.cache.allConstraints=null,r.cache.allComposites=null),p&&r.parent&&d.setModified(r.parent,o,p,a),a)for(var v=0;v<r.composites.length;v++){var x=r.composites[v];d.setModified(x,o,p,a)}},d.add=function(r,o){var p=[].concat(o);S.trigger(r,"beforeAdd",{object:o});for(var a=0;a<p.length;a++){var v=p[a];switch(v.type){case"body":if(v.parent!==v){u.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}d.addBody(r,v);break;case"constraint":d.addConstraint(r,v);break;case"composite":d.addComposite(r,v);break;case"mouseConstraint":d.addConstraint(r,v.constraint);break}}return S.trigger(r,"afterAdd",{object:o}),r},d.remove=function(r,o,p){var a=[].concat(o);S.trigger(r,"beforeRemove",{object:o});for(var v=0;v<a.length;v++){var x=a[v];switch(x.type){case"body":d.removeBody(r,x,p);break;case"constraint":d.removeConstraint(r,x,p);break;case"composite":d.removeComposite(r,x,p);break;case"mouseConstraint":d.removeConstraint(r,x.constraint);break}}return S.trigger(r,"afterRemove",{object:o}),r},d.addComposite=function(r,o){return r.composites.push(o),o.parent=r,d.setModified(r,!0,!0,!1),r},d.removeComposite=function(r,o,p){var a=u.indexOf(r.composites,o);if(a!==-1){var v=d.allBodies(o);d.removeCompositeAt(r,a);for(var x=0;x<v.length;x++)v[x].sleepCounter=0}if(p)for(var x=0;x<r.composites.length;x++)d.removeComposite(r.composites[x],o,!0);return r},d.removeCompositeAt=function(r,o){return r.composites.splice(o,1),d.setModified(r,!0,!0,!1),r},d.addBody=function(r,o){return r.bodies.push(o),d.setModified(r,!0,!0,!1),r},d.removeBody=function(r,o,p){var a=u.indexOf(r.bodies,o);if(a!==-1&&(d.removeBodyAt(r,a),o.sleepCounter=0),p)for(var v=0;v<r.composites.length;v++)d.removeBody(r.composites[v],o,!0);return r},d.removeBodyAt=function(r,o){return r.bodies.splice(o,1),d.setModified(r,!0,!0,!1),r},d.addConstraint=function(r,o){return r.constraints.push(o),d.setModified(r,!0,!0,!1),r},d.removeConstraint=function(r,o,p){var a=u.indexOf(r.constraints,o);if(a!==-1&&d.removeConstraintAt(r,a),p)for(var v=0;v<r.composites.length;v++)d.removeConstraint(r.composites[v],o,!0);return r},d.removeConstraintAt=function(r,o){return r.constraints.splice(o,1),d.setModified(r,!0,!0,!1),r},d.clear=function(r,o,p){if(p)for(var a=0;a<r.composites.length;a++)d.clear(r.composites[a],o,!0);return o?r.bodies=r.bodies.filter(function(v){return v.isStatic}):r.bodies.length=0,r.constraints.length=0,r.composites.length=0,d.setModified(r,!0,!0,!1),r},d.allBodies=function(r){if(r.cache&&r.cache.allBodies)return r.cache.allBodies;for(var o=[].concat(r.bodies),p=0;p<r.composites.length;p++)o=o.concat(d.allBodies(r.composites[p]));return r.cache&&(r.cache.allBodies=o),o},d.allConstraints=function(r){if(r.cache&&r.cache.allConstraints)return r.cache.allConstraints;for(var o=[].concat(r.constraints),p=0;p<r.composites.length;p++)o=o.concat(d.allConstraints(r.composites[p]));return r.cache&&(r.cache.allConstraints=o),o},d.allComposites=function(r){if(r.cache&&r.cache.allComposites)return r.cache.allComposites;for(var o=[].concat(r.composites),p=0;p<r.composites.length;p++)o=o.concat(d.allComposites(r.composites[p]));return r.cache&&(r.cache.allComposites=o),o},d.get=function(r,o,p){var a,v;switch(p){case"body":a=d.allBodies(r);break;case"constraint":a=d.allConstraints(r);break;case"composite":a=d.allComposites(r).concat(r);break}return a?(v=a.filter(function(x){return x.id.toString()===o.toString()}),v.length===0?null:v[0]):null},d.move=function(r,o,p){return d.remove(r,o),d.add(p,o),r},d.rebase=function(r){for(var o=d.allBodies(r).concat(d.allConstraints(r)).concat(d.allComposites(r)),p=0;p<o.length;p++)o[p].id=u.nextId();return r},d.translate=function(r,o,p){for(var a=p?d.allBodies(r):r.bodies,v=0;v<a.length;v++)h.translate(a[v],o);return r},d.rotate=function(r,o,p,a){for(var v=Math.cos(o),x=Math.sin(o),g=a?d.allBodies(r):r.bodies,y=0;y<g.length;y++){var T=g[y],P=T.position.x-p.x,A=T.position.y-p.y;h.setPosition(T,{x:p.x+(P*v-A*x),y:p.y+(P*x+A*v)}),h.rotate(T,o)}return r},d.scale=function(r,o,p,a,v){for(var x=v?d.allBodies(r):r.bodies,g=0;g<x.length;g++){var y=x[g],T=y.position.x-a.x,P=y.position.y-a.y;h.setPosition(y,{x:a.x+T*o,y:a.y+P*p}),h.scale(y,o,p)}return r},d.bounds=function(r){for(var o=d.allBodies(r),p=[],a=0;a<o.length;a+=1){var v=o[a];p.push(v.bounds.min,v.bounds.max)}return l.create(p)},d.wrap=function(r,o){var p=l.wrap(d.bounds(r),o);return p&&d.translate(r,p),p}})()},4372:(m,E,i)=>{var d={};m.exports=d;var S=i(69351);(function(){d.create=S.create,d.add=S.add,d.remove=S.remove,d.clear=S.clear,d.addComposite=S.addComposite,d.addBody=S.addBody,d.addConstraint=S.addConstraint})()},52284:(m,E,i)=>{var d={};m.exports=d;var S=i(41598),u=i(4506);(function(){var l=[],h={overlap:0,axis:null},r={overlap:0,axis:null};d.create=function(o,p){return{pair:null,collided:!1,bodyA:o,bodyB:p,parentA:o.parent,parentB:p.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},d.collides=function(o,p,a){if(d._overlapAxes(h,o.vertices,p.vertices,o.axes),h.overlap<=0||(d._overlapAxes(r,p.vertices,o.vertices,p.axes),r.overlap<=0))return null;var v=a&&a.table[u.id(o,p)],x;v?x=v.collision:(x=d.create(o,p),x.collided=!0,x.bodyA=o.id<p.id?o:p,x.bodyB=o.id<p.id?p:o,x.parentA=x.bodyA.parent,x.parentB=x.bodyB.parent),o=x.bodyA,p=x.bodyB;var g;h.overlap<r.overlap?g=h:g=r;var y=x.normal,T=x.tangent,P=x.penetration,A=x.supports,b=g.overlap,O=g.axis,D=O.x,B=O.y,G=p.position.x-o.position.x,V=p.position.y-o.position.y;D*G+B*V>=0&&(D=-D,B=-B),y.x=D,y.y=B,T.x=-B,T.y=D,P.x=D*b,P.y=B*b,x.depth=b;var k=d._findSupports(o,p,y,1),U=0;if(S.contains(o.vertices,k[0])&&(A[U++]=k[0]),S.contains(o.vertices,k[1])&&(A[U++]=k[1]),U<2){var W=d._findSupports(p,o,y,-1);S.contains(p.vertices,W[0])&&(A[U++]=W[0]),U<2&&S.contains(p.vertices,W[1])&&(A[U++]=W[1])}return U===0&&(A[U++]=k[0]),x.supportCount=U,x},d._overlapAxes=function(o,p,a,v){var x=p.length,g=a.length,y=p[0].x,T=p[0].y,P=a[0].x,A=a[0].y,b=v.length,O=Number.MAX_VALUE,D=0,B,G,V,k,U,W;for(U=0;U<b;U++){var X=v[U],_=X.x,Q=X.y,j=y*_+T*Q,it=P*_+A*Q,K=j,J=it;for(W=1;W<x;W+=1)k=p[W].x*_+p[W].y*Q,k>K?K=k:k<j&&(j=k);for(W=1;W<g;W+=1)k=a[W].x*_+a[W].y*Q,k>J?J=k:k<it&&(it=k);if(G=K-it,V=J-j,B=G<V?G:V,B<O&&(O=B,D=U,B<=0))break}o.axis=v[D],o.overlap=O},d._findSupports=function(o,p,a,v){var x=p.vertices,g=x.length,y=o.position.x,T=o.position.y,P=a.x*v,A=a.y*v,b=x[0],O=b,D=P*(y-O.x)+A*(T-O.y),B,G,V;for(V=1;V<g;V+=1)O=x[V],G=P*(y-O.x)+A*(T-O.y),G<D&&(D=G,b=O);return B=x[(g+b.index-1)%g],D=P*(y-B.x)+A*(T-B.y),O=x[(b.index+1)%g],P*(y-O.x)+A*(T-O.y)<D?(l[0]=b,l[1]=O,l):(l[0]=b,l[1]=B,l)}})()},43424:m=>{var E={};m.exports=E,function(){E.create=function(i){return{vertex:i,normalImpulse:0,tangentImpulse:0}}}()},81388:(m,E,i)=>{var d={};m.exports=d;var S=i(53402),u=i(52284);(function(){d.create=function(l){var h={bodies:[],collisions:[],pairs:null};return S.extend(h,l)},d.setBodies=function(l,h){l.bodies=h.slice(0)},d.clear=function(l){l.bodies=[],l.collisions=[]},d.collisions=function(l){var h=l.pairs,r=l.bodies,o=r.length,p=d.canCollide,a=u.collides,v=l.collisions,x=0,g,y;for(r.sort(d._compareBoundsX),g=0;g<o;g++){var T=r[g],P=T.bounds,A=T.bounds.max.x,b=T.bounds.max.y,O=T.bounds.min.y,D=T.isStatic||T.isSleeping,B=T.parts.length,G=B===1;for(y=g+1;y<o;y++){var V=r[y],k=V.bounds;if(k.min.x>A)break;if(!(b<k.min.y||O>k.max.y)&&!(D&&(V.isStatic||V.isSleeping))&&p(T.collisionFilter,V.collisionFilter)){var U=V.parts.length;if(G&&U===1){var W=a(T,V,h);W&&(v[x++]=W)}else for(var X=B>1?1:0,_=U>1?1:0,Q=X;Q<B;Q++)for(var j=T.parts[Q],P=j.bounds,it=_;it<U;it++){var K=V.parts[it],k=K.bounds;if(!(P.min.x>k.max.x||P.max.x<k.min.x||P.max.y<k.min.y||P.min.y>k.max.y)){var W=a(j,K,h);W&&(v[x++]=W)}}}}}return v.length!==x&&(v.length=x),v},d.canCollide=function(l,h){return l.group===h.group&&l.group!==0?l.group>0:(l.mask&h.category)!==0&&(h.mask&l.category)!==0},d._compareBoundsX=function(l,h){return l.bounds.min.x-h.bounds.min.x}})()},4506:(m,E,i)=>{var d={};m.exports=d;var S=i(43424);(function(){d.create=function(u,l){var h=u.bodyA,r=u.bodyB,o={id:d.id(h,r),bodyA:h,bodyB:r,collision:u,contacts:[S.create(),S.create()],contactCount:0,separation:0,isActive:!0,isSensor:h.isSensor||r.isSensor,timeCreated:l,timeUpdated:l,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return d.update(o,u,l),o},d.update=function(u,l,h){var r=l.supports,o=l.supportCount,p=u.contacts,a=l.parentA,v=l.parentB;u.isActive=!0,u.timeUpdated=h,u.collision=l,u.separation=l.depth,u.inverseMass=a.inverseMass+v.inverseMass,u.friction=a.friction<v.friction?a.friction:v.friction,u.frictionStatic=a.frictionStatic>v.frictionStatic?a.frictionStatic:v.frictionStatic,u.restitution=a.restitution>v.restitution?a.restitution:v.restitution,u.slop=a.slop>v.slop?a.slop:v.slop,u.contactCount=o,l.pair=u;var x=r[0],g=p[0],y=r[1],T=p[1];(T.vertex===x||g.vertex===y)&&(p[1]=g,p[0]=g=T,T=p[1]),g.vertex=x,T.vertex=y},d.setActive=function(u,l,h){l?(u.isActive=!0,u.timeUpdated=h):(u.isActive=!1,u.contactCount=0)},d.id=function(u,l){return u.id<l.id?u.id.toString(36)+":"+l.id.toString(36):l.id.toString(36)+":"+u.id.toString(36)}})()},99561:(m,E,i)=>{var d={};m.exports=d;var S=i(4506),u=i(53402);(function(){d.create=function(l){return u.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},l)},d.update=function(l,h,r){var o=S.update,p=S.create,a=S.setActive,v=l.table,x=l.list,g=x.length,y=g,T=l.collisionStart,P=l.collisionEnd,A=l.collisionActive,b=h.length,O=0,D=0,B=0,G,V,k;for(k=0;k<b;k++)G=h[k],V=G.pair,V?(V.isActive&&(A[B++]=V),o(V,G,r)):(V=p(G,r),v[V.id]=V,T[O++]=V,x[y++]=V);for(y=0,g=x.length,k=0;k<g;k++)V=x[k],V.timeUpdated>=r?x[y++]=V:(a(V,!1,r),V.collision.bodyA.sleepCounter>0&&V.collision.bodyB.sleepCounter>0?x[y++]=V:(P[D++]=V,delete v[V.id]));x.length!==y&&(x.length=y),T.length!==O&&(T.length=O),P.length!==D&&(P.length=D),A.length!==B&&(A.length=B)},d.clear=function(l){return l.table={},l.list.length=0,l.collisionStart.length=0,l.collisionActive.length=0,l.collisionEnd.length=0,l}})()},73296:(m,E,i)=>{var d={};m.exports=d;var S=i(31725),u=i(52284),l=i(15647),h=i(66280),r=i(41598);(function(){d.collides=function(o,p){for(var a=[],v=p.length,x=o.bounds,g=u.collides,y=l.overlaps,T=0;T<v;T++){var P=p[T],A=P.parts.length,b=A===1?0:1;if(o!==P&&y(P.bounds,x))for(var O=b;O<A;O++){var D=P.parts[O];if(y(D.bounds,x)){var B=g(D,o);if(B){a.push(B);break}}}}return a},d.ray=function(o,p,a,v){v=v||1e-100;for(var x=S.angle(p,a),g=S.magnitude(S.sub(p,a)),y=(a.x+p.x)*.5,T=(a.y+p.y)*.5,P=h.rectangle(y,T,g,v,{angle:x}),A=d.collides(P,o),b=0;b<A.length;b+=1){var O=A[b];O.body=O.bodyB=O.bodyA}return A},d.region=function(o,p,a){for(var v=[],x=0;x<o.length;x++){var g=o[x],y=l.overlaps(g.bounds,p);(y&&!a||!y&&a)&&v.push(g)}return v},d.point=function(o,p){for(var a=[],v=0;v<o.length;v++){var x=o[v];if(l.contains(x.bounds,p))for(var g=x.parts.length===1?0:1;g<x.parts.length;g++){var y=x.parts[g];if(l.contains(y.bounds,p)&&r.contains(y.vertices,p)){a.push(x);break}}}return a}})()},66272:(m,E,i)=>{var d={};m.exports=d;var S=i(41598),u=i(53402),l=i(15647);(function(){d._restingThresh=2,d._restingThreshTangent=Math.sqrt(6),d._positionDampen=.9,d._positionWarming=.8,d._frictionNormalMultiplier=5,d._frictionMaxStatic=Number.MAX_VALUE,d.preSolvePosition=function(h){var r,o,p,a=h.length;for(r=0;r<a;r++)o=h[r],o.isActive&&(p=o.contactCount,o.collision.parentA.totalContacts+=p,o.collision.parentB.totalContacts+=p)},d.solvePosition=function(h,r,o){var p,a,v,x,g,y,T,P,A=d._positionDampen*(o||1),b=u.clamp(r/u._baseDelta,0,1),O=h.length;for(p=0;p<O;p++)a=h[p],!(!a.isActive||a.isSensor)&&(v=a.collision,x=v.parentA,g=v.parentB,y=v.normal,a.separation=v.depth+y.x*(g.positionImpulse.x-x.positionImpulse.x)+y.y*(g.positionImpulse.y-x.positionImpulse.y));for(p=0;p<O;p++)a=h[p],!(!a.isActive||a.isSensor)&&(v=a.collision,x=v.parentA,g=v.parentB,y=v.normal,P=a.separation-a.slop*b,(x.isStatic||g.isStatic)&&(P*=2),x.isStatic||x.isSleeping||(T=A/x.totalContacts,x.positionImpulse.x+=y.x*P*T,x.positionImpulse.y+=y.y*P*T),g.isStatic||g.isSleeping||(T=A/g.totalContacts,g.positionImpulse.x-=y.x*P*T,g.positionImpulse.y-=y.y*P*T))},d.postSolvePosition=function(h){for(var r=d._positionWarming,o=h.length,p=S.translate,a=l.update,v=0;v<o;v++){var x=h[v],g=x.positionImpulse,y=g.x,T=g.y,P=x.velocity;if(x.totalContacts=0,y!==0||T!==0){for(var A=0;A<x.parts.length;A++){var b=x.parts[A];p(b.vertices,g),a(b.bounds,b.vertices,P),b.position.x+=y,b.position.y+=T}x.positionPrev.x+=y,x.positionPrev.y+=T,y*P.x+T*P.y<0?(g.x=0,g.y=0):(g.x*=r,g.y*=r)}}},d.preSolveVelocity=function(h){var r=h.length,o,p;for(o=0;o<r;o++){var a=h[o];if(!(!a.isActive||a.isSensor)){var v=a.contacts,x=a.contactCount,g=a.collision,y=g.parentA,T=g.parentB,P=g.normal,A=g.tangent;for(p=0;p<x;p++){var b=v[p],O=b.vertex,D=b.normalImpulse,B=b.tangentImpulse;if(D!==0||B!==0){var G=P.x*D+A.x*B,V=P.y*D+A.y*B;y.isStatic||y.isSleeping||(y.positionPrev.x+=G*y.inverseMass,y.positionPrev.y+=V*y.inverseMass,y.anglePrev+=y.inverseInertia*((O.x-y.position.x)*V-(O.y-y.position.y)*G)),T.isStatic||T.isSleeping||(T.positionPrev.x-=G*T.inverseMass,T.positionPrev.y-=V*T.inverseMass,T.anglePrev-=T.inverseInertia*((O.x-T.position.x)*V-(O.y-T.position.y)*G))}}}}},d.solveVelocity=function(h,r){var o=r/u._baseDelta,p=o*o,a=p*o,v=-d._restingThresh*o,x=d._restingThreshTangent,g=d._frictionNormalMultiplier*o,y=d._frictionMaxStatic,T=h.length,P,A,b,O;for(b=0;b<T;b++){var D=h[b];if(!(!D.isActive||D.isSensor)){var B=D.collision,G=B.parentA,V=B.parentB,k=B.normal.x,U=B.normal.y,W=B.tangent.x,X=B.tangent.y,_=D.inverseMass,Q=D.friction*D.frictionStatic*g,j=D.contacts,it=D.contactCount,K=1/it,J=G.position.x-G.positionPrev.x,Y=G.position.y-G.positionPrev.y,q=G.angle-G.anglePrev,$=V.position.x-V.positionPrev.x,et=V.position.y-V.positionPrev.y,rt=V.angle-V.anglePrev;for(O=0;O<it;O++){var at=j[O],lt=at.vertex,vt=lt.x-G.position.x,xt=lt.y-G.position.y,ut=lt.x-V.position.x,mt=lt.y-V.position.y,Tt=J-xt*q,bt=Y+vt*q,St=$-mt*rt,Gt=et+ut*rt,Nt=Tt-St,zt=bt-Gt,Lt=k*Nt+U*zt,ct=W*Nt+X*zt,ot=D.separation+Lt,Mt=Math.min(ot,1);Mt=ot<0?0:Mt;var Ot=Mt*Q;ct<-Ot||ct>Ot?(A=ct>0?ct:-ct,P=D.friction*(ct>0?1:-1)*a,P<-A?P=-A:P>A&&(P=A)):(P=ct,A=y);var Ut=vt*U-xt*k,Rt=ut*U-mt*k,_t=K/(_+G.inverseInertia*Ut*Ut+V.inverseInertia*Rt*Rt),Yt=(1+D.restitution)*Lt*_t;if(P*=_t,Lt<v)at.normalImpulse=0;else{var ee=at.normalImpulse;at.normalImpulse+=Yt,at.normalImpulse>0&&(at.normalImpulse=0),Yt=at.normalImpulse-ee}if(ct<-x||ct>x)at.tangentImpulse=0;else{var $t=at.tangentImpulse;at.tangentImpulse+=P,at.tangentImpulse<-A&&(at.tangentImpulse=-A),at.tangentImpulse>A&&(at.tangentImpulse=A),P=at.tangentImpulse-$t}var kt=k*Yt+W*P,Vt=U*Yt+X*P;G.isStatic||G.isSleeping||(G.positionPrev.x+=kt*G.inverseMass,G.positionPrev.y+=Vt*G.inverseMass,G.anglePrev+=(vt*Vt-xt*kt)*G.inverseInertia),V.isStatic||V.isSleeping||(V.positionPrev.x-=kt*V.inverseMass,V.positionPrev.y-=Vt*V.inverseMass,V.anglePrev-=(ut*Vt-mt*kt)*V.inverseInertia)}}}}})()},48140:(m,E,i)=>{var d={};m.exports=d;var S=i(41598),u=i(31725),l=i(53614),h=i(15647),r=i(66615),o=i(53402);(function(){d._warming=.4,d._torqueDampen=1,d._minLength=1e-6,d.create=function(p){var a=p;a.bodyA&&!a.pointA&&(a.pointA={x:0,y:0}),a.bodyB&&!a.pointB&&(a.pointB={x:0,y:0});var v=a.bodyA?u.add(a.bodyA.position,a.pointA):a.pointA,x=a.bodyB?u.add(a.bodyB.position,a.pointB):a.pointB,g=u.magnitude(u.sub(v,x));a.length=typeof a.length<"u"?a.length:g,a.id=a.id||o.nextId(),a.label=a.label||"Constraint",a.type="constraint",a.stiffness=a.stiffness||(a.length>0?1:.7),a.damping=a.damping||0,a.angularStiffness=a.angularStiffness||0,a.angleA=a.bodyA?a.bodyA.angle:a.angleA,a.angleB=a.bodyB?a.bodyB.angle:a.angleB,a.plugin={};var y={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return a.length===0&&a.stiffness>.1?(y.type="pin",y.anchors=!1):a.stiffness<.9&&(y.type="spring"),a.render=o.extend(y,a.render),a},d.preSolveAll=function(p){for(var a=0;a<p.length;a+=1){var v=p[a],x=v.constraintImpulse;v.isStatic||x.x===0&&x.y===0&&x.angle===0||(v.position.x+=x.x,v.position.y+=x.y,v.angle+=x.angle)}},d.solveAll=function(p,a){for(var v=o.clamp(a/o._baseDelta,0,1),x=0;x<p.length;x+=1){var g=p[x],y=!g.bodyA||g.bodyA&&g.bodyA.isStatic,T=!g.bodyB||g.bodyB&&g.bodyB.isStatic;(y||T)&&d.solve(p[x],v)}for(x=0;x<p.length;x+=1)g=p[x],y=!g.bodyA||g.bodyA&&g.bodyA.isStatic,T=!g.bodyB||g.bodyB&&g.bodyB.isStatic,!y&&!T&&d.solve(p[x],v)},d.solve=function(p,a){var v=p.bodyA,x=p.bodyB,g=p.pointA,y=p.pointB;if(!(!v&&!x)){v&&!v.isStatic&&(u.rotate(g,v.angle-p.angleA,g),p.angleA=v.angle),x&&!x.isStatic&&(u.rotate(y,x.angle-p.angleB,y),p.angleB=x.angle);var T=g,P=y;if(v&&(T=u.add(v.position,g)),x&&(P=u.add(x.position,y)),!(!T||!P)){var A=u.sub(T,P),b=u.magnitude(A);b<d._minLength&&(b=d._minLength);var O=(b-p.length)/b,D=p.stiffness>=1||p.length===0,B=D?p.stiffness*a:p.stiffness*a*a,G=p.damping*a,V=u.mult(A,O*B),k=(v?v.inverseMass:0)+(x?x.inverseMass:0),U=(v?v.inverseInertia:0)+(x?x.inverseInertia:0),W=k+U,X,_,Q,j,it;if(G>0){var K=u.create();Q=u.div(A,b),it=u.sub(x&&u.sub(x.position,x.positionPrev)||K,v&&u.sub(v.position,v.positionPrev)||K),j=u.dot(Q,it)}v&&!v.isStatic&&(_=v.inverseMass/k,v.constraintImpulse.x-=V.x*_,v.constraintImpulse.y-=V.y*_,v.position.x-=V.x*_,v.position.y-=V.y*_,G>0&&(v.positionPrev.x-=G*Q.x*j*_,v.positionPrev.y-=G*Q.y*j*_),X=u.cross(g,V)/W*d._torqueDampen*v.inverseInertia*(1-p.angularStiffness),v.constraintImpulse.angle-=X,v.angle-=X),x&&!x.isStatic&&(_=x.inverseMass/k,x.constraintImpulse.x+=V.x*_,x.constraintImpulse.y+=V.y*_,x.position.x+=V.x*_,x.position.y+=V.y*_,G>0&&(x.positionPrev.x+=G*Q.x*j*_,x.positionPrev.y+=G*Q.y*j*_),X=u.cross(y,V)/W*d._torqueDampen*x.inverseInertia*(1-p.angularStiffness),x.constraintImpulse.angle+=X,x.angle+=X)}}},d.postSolveAll=function(p){for(var a=0;a<p.length;a++){var v=p[a],x=v.constraintImpulse;if(!(v.isStatic||x.x===0&&x.y===0&&x.angle===0)){l.set(v,!1);for(var g=0;g<v.parts.length;g++){var y=v.parts[g];S.translate(y.vertices,x),g>0&&(y.position.x+=x.x,y.position.y+=x.y),x.angle!==0&&(S.rotate(y.vertices,x.angle,v.position),r.rotate(y.axes,x.angle),g>0&&u.rotateAbout(y.position,x.angle,v.position,y.position)),h.update(y.bounds,y.vertices,v.velocity)}x.angle*=d._warming,x.x*=d._warming,x.y*=d._warming}}},d.pointAWorld=function(p){return{x:(p.bodyA?p.bodyA.position.x:0)+(p.pointA?p.pointA.x:0),y:(p.bodyA?p.bodyA.position.y:0)+(p.pointA?p.pointA.y:0)}},d.pointBWorld=function(p){return{x:(p.bodyB?p.bodyB.position.x:0)+(p.pointB?p.pointB.x:0),y:(p.bodyB?p.bodyB.position.y:0)+(p.pointB?p.pointB.y:0)}},d.currentLength=function(p){var a=(p.bodyA?p.bodyA.position.x:0)+(p.pointA?p.pointA.x:0),v=(p.bodyA?p.bodyA.position.y:0)+(p.pointA?p.pointA.y:0),x=(p.bodyB?p.bodyB.position.x:0)+(p.pointB?p.pointB.x:0),g=(p.bodyB?p.bodyB.position.y:0)+(p.pointB?p.pointB.y:0),y=a-x,T=v-g;return Math.sqrt(y*y+T*T)}})()},53402:(m,E,i)=>{var d={};m.exports=d,function(){d._baseDelta=16.666666666666668,d._nextId=0,d._seed=0,d._nowStartTime=+new Date,d._warnedOnce={},d._decomp=null,d.extend=function(u,l){var h,r;typeof l=="boolean"?(h=2,r=l):(h=1,r=!0);for(var o=h;o<arguments.length;o++){var p=arguments[o];if(p)for(var a in p)r&&p[a]&&p[a].constructor===Object&&(!u[a]||u[a].constructor===Object)?(u[a]=u[a]||{},d.extend(u[a],r,p[a])):u[a]=p[a]}return u},d.clone=function(u,l){return d.extend({},l,u)},d.keys=function(u){if(Object.keys)return Object.keys(u);var l=[];for(var h in u)l.push(h);return l},d.values=function(u){var l=[];if(Object.keys){for(var h=Object.keys(u),r=0;r<h.length;r++)l.push(u[h[r]]);return l}for(var o in u)l.push(u[o]);return l},d.get=function(u,l,h,r){l=l.split(".").slice(h,r);for(var o=0;o<l.length;o+=1)u=u[l[o]];return u},d.set=function(u,l,h,r,o){var p=l.split(".").slice(r,o);return d.get(u,l,0,-1)[p[p.length-1]]=h,h},d.shuffle=function(u){for(var l=u.length-1;l>0;l--){var h=Math.floor(d.random()*(l+1)),r=u[l];u[l]=u[h],u[h]=r}return u},d.choose=function(u){return u[Math.floor(d.random()*u.length)]},d.isElement=function(u){return typeof HTMLElement<"u"?u instanceof HTMLElement:!!(u&&u.nodeType&&u.nodeName)},d.isArray=function(u){return Object.prototype.toString.call(u)==="[object Array]"},d.isFunction=function(u){return typeof u=="function"},d.isPlainObject=function(u){return typeof u=="object"&&u.constructor===Object},d.isString=function(u){return toString.call(u)==="[object String]"},d.clamp=function(u,l,h){return u<l?l:u>h?h:u},d.sign=function(u){return u<0?-1:1},d.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-d._nowStartTime},d.random=function(u,l){return u=typeof u<"u"?u:0,l=typeof l<"u"?l:1,u+S()*(l-u)};var S=function(){return d._seed=(d._seed*9301+49297)%233280,d._seed/233280};d.colorToNumber=function(u){return u=u.replace("#",""),u.length==3&&(u=u.charAt(0)+u.charAt(0)+u.charAt(1)+u.charAt(1)+u.charAt(2)+u.charAt(2)),parseInt(u,16)},d.logLevel=1,d.log=function(){console&&d.logLevel>0&&d.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.info=function(){console&&d.logLevel>0&&d.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.warn=function(){console&&d.logLevel>0&&d.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.warnOnce=function(){var u=Array.prototype.slice.call(arguments).join(" ");d._warnedOnce[u]||(d.warn(u),d._warnedOnce[u]=!0)},d.deprecated=function(u,l,h){u[l]=d.chain(function(){d.warnOnce("🔅 deprecated 🔅",h)},u[l])},d.nextId=function(){return d._nextId++},d.indexOf=function(u,l){if(u.indexOf)return u.indexOf(l);for(var h=0;h<u.length;h++)if(u[h]===l)return h;return-1},d.map=function(u,l){if(u.map)return u.map(l);for(var h=[],r=0;r<u.length;r+=1)h.push(l(u[r]));return h},d.topologicalSort=function(u){var l=[],h=[],r=[];for(var o in u)!h[o]&&!r[o]&&d._topologicalSort(o,h,r,u,l);return l},d._topologicalSort=function(u,l,h,r,o){var p=r[u]||[];h[u]=!0;for(var a=0;a<p.length;a+=1){var v=p[a];h[v]||l[v]||d._topologicalSort(v,l,h,r,o)}h[u]=!1,l[u]=!0,o.push(u)},d.chain=function(){for(var u=[],l=0;l<arguments.length;l+=1){var h=arguments[l];h._chained?u.push.apply(u,h._chained):u.push(h)}var r=function(){for(var o,p=new Array(arguments.length),a=0,v=arguments.length;a<v;a++)p[a]=arguments[a];for(a=0;a<u.length;a+=1){var x=u[a].apply(o,p);typeof x<"u"&&(o=x)}return o};return r._chained=u,r},d.chainPathBefore=function(u,l,h){return d.set(u,l,d.chain(h,d.get(u,l)))},d.chainPathAfter=function(u,l,h){return d.set(u,l,d.chain(d.get(u,l),h))},d.setDecomp=function(u){d._decomp=u},d.getDecomp=function(){var u=d._decomp;try{!u&&typeof window<"u"&&(u=window.decomp),!u&&typeof i.g<"u"&&(u=i.g.decomp)}catch{u=null}return u}}()},48413:(m,E,i)=>{var d={};m.exports=d;var S=i(53614),u=i(66272),l=i(81388),h=i(99561),r=i(35810),o=i(69351),p=i(48140),a=i(53402),v=i(22562);(function(){d._deltaMax=16.666666666666668,d.create=function(x){x=x||{};var g={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},y=a.extend(g,x);return y.world=x.world||o.create({label:"World"}),y.pairs=x.pairs||h.create(),y.detector=x.detector||l.create(),y.detector.pairs=y.pairs,y.grid={buckets:[]},y.world.gravity=y.gravity,y.broadphase=y.grid,y.metrics={},y},d.update=function(x,g){var y=a.now(),T=x.world,P=x.detector,A=x.pairs,b=x.timing,O=b.timestamp,D;g>d._deltaMax&&a.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",d._deltaMax.toFixed(3),"ms."),g=typeof g<"u"?g:a._baseDelta,g*=b.timeScale,b.timestamp+=g,b.lastDelta=g;var B={timestamp:b.timestamp,delta:g};r.trigger(x,"beforeUpdate",B);var G=o.allBodies(T),V=o.allConstraints(T),k=o.allComposites(T);for(T.isModified&&(l.setBodies(P,G),o.setModified(T,!1,!1,!0)),x.enableSleeping&&S.update(G,g),d._bodiesApplyGravity(G,x.gravity),d.wrap(G,k),d.attractors(G),g>0&&d._bodiesUpdate(G,g),r.trigger(x,"beforeSolve",B),p.preSolveAll(G),D=0;D<x.constraintIterations;D++)p.solveAll(V,g);p.postSolveAll(G);var U=l.collisions(P);h.update(A,U,O),x.enableSleeping&&S.afterCollisions(A.list),A.collisionStart.length>0&&r.trigger(x,"collisionStart",{pairs:A.collisionStart,timestamp:b.timestamp,delta:g});var W=a.clamp(20/x.positionIterations,0,1);for(u.preSolvePosition(A.list),D=0;D<x.positionIterations;D++)u.solvePosition(A.list,g,W);for(u.postSolvePosition(G),p.preSolveAll(G),D=0;D<x.constraintIterations;D++)p.solveAll(V,g);for(p.postSolveAll(G),u.preSolveVelocity(A.list),D=0;D<x.velocityIterations;D++)u.solveVelocity(A.list,g);return d._bodiesUpdateVelocities(G),A.collisionActive.length>0&&r.trigger(x,"collisionActive",{pairs:A.collisionActive,timestamp:b.timestamp,delta:g}),A.collisionEnd.length>0&&r.trigger(x,"collisionEnd",{pairs:A.collisionEnd,timestamp:b.timestamp,delta:g}),d._bodiesClearForces(G),r.trigger(x,"afterUpdate",B),x.timing.lastElapsed=a.now()-y,x},d.merge=function(x,g){if(a.extend(x,g),g.world){x.world=g.world,d.clear(x);for(var y=o.allBodies(x.world),T=0;T<y.length;T++){var P=y[T];S.set(P,!1),P.id=a.nextId()}}},d.clear=function(x){h.clear(x.pairs),l.clear(x.detector)},d._bodiesClearForces=function(x){for(var g=x.length,y=0;y<g;y++){var T=x[y];T.force.x=0,T.force.y=0,T.torque=0}},d._bodiesApplyGravity=function(x,g){var y=typeof g.scale<"u"?g.scale:.001,T=x.length;if(!(g.x===0&&g.y===0||y===0))for(var P=0;P<T;P++){var A=x[P];A.ignoreGravity||A.isStatic||A.isSleeping||(A.force.y+=A.mass*g.y*y,A.force.x+=A.mass*g.x*y)}},d._bodiesUpdate=function(x,g){for(var y=x.length,T=0;T<y;T++){var P=x[T];P.isStatic||P.isSleeping||v.update(P,g)}},d._bodiesUpdateVelocities=function(x){for(var g=x.length,y=0;y<g;y++)v.updateVelocities(x[y])},d.wrap=function(x,g){for(var y=0;y<x.length;y+=1){var T=x[y];T.wrapBounds!==null&&v.wrap(T,T.wrapBounds)}for(y=0;y<g.length;y+=1){var P=g[y];P.wrapBounds!==null&&o.wrap(P,P.wrapBounds)}},d.attractors=function(x){for(var g=0;g<x.length;g++){var y=x[g],T=y.attractors;if(T&&T.length>0)for(var P=0;P<x.length;P++){var A=x[P];if(g!==P)for(var b=0;b<T.length;b++){var O=T[b],D=O;a.isFunction(O)&&(D=O(y,A)),D&&v.applyForce(A,A.position,D)}}}}})()},35810:(m,E,i)=>{var d={};m.exports=d;var S=i(53402);(function(){d.on=function(u,l,h){for(var r=l.split(" "),o,p=0;p<r.length;p++)o=r[p],u.events=u.events||{},u.events[o]=u.events[o]||[],u.events[o].push(h);return h},d.off=function(u,l,h){if(!l){u.events={};return}typeof l=="function"&&(h=l,l=S.keys(u.events).join(" "));for(var r=l.split(" "),o=0;o<r.length;o++){var p=u.events[r[o]],a=[];if(h&&p)for(var v=0;v<p.length;v++)p[v]!==h&&a.push(p[v]);u.events[r[o]]=a}},d.trigger=function(u,l,h){var r,o,p,a,v=u.events;if(v&&S.keys(v).length>0){h||(h={}),r=l.split(" ");for(var x=0;x<r.length;x++)if(o=r[x],p=v[o],p){a=S.clone(h,!1),a.name=o,a.source=u;for(var g=0;g<p.length;g++)p[g].apply(u,[a])}}}})()},6790:(m,E,i)=>{var d={};m.exports=d;var S=i(73832),u=i(53402);(function(){d.name="matter-js",d.version="0.20.0",d.uses=[],d.used=[],d.use=function(){S.use(d,Array.prototype.slice.call(arguments))},d.before=function(l,h){return l=l.replace(/^Matter./,""),u.chainPathBefore(d,l,h)},d.after=function(l,h){return l=l.replace(/^Matter./,""),u.chainPathAfter(d,l,h)}})()},73832:(m,E,i)=>{var d={};m.exports=d;var S=i(53402);(function(){d._registry={},d.register=function(u){if(d.isPlugin(u)||S.warn("Plugin.register:",d.toString(u),"does not implement all required fields."),u.name in d._registry){var l=d._registry[u.name],h=d.versionParse(u.version).number,r=d.versionParse(l.version).number;h>r?(S.warn("Plugin.register:",d.toString(l),"was upgraded to",d.toString(u)),d._registry[u.name]=u):h<r?S.warn("Plugin.register:",d.toString(l),"can not be downgraded to",d.toString(u)):u!==l&&S.warn("Plugin.register:",d.toString(u),"is already registered to different plugin object")}else d._registry[u.name]=u;return u},d.resolve=function(u){return d._registry[d.dependencyParse(u).name]},d.toString=function(u){return typeof u=="string"?u:(u.name||"anonymous")+"@"+(u.version||u.range||"0.0.0")},d.isPlugin=function(u){return u&&u.name&&u.version&&u.install},d.isUsed=function(u,l){return u.used.indexOf(l)>-1},d.isFor=function(u,l){var h=u.for&&d.dependencyParse(u.for);return!u.for||l.name===h.name&&d.versionSatisfies(l.version,h.range)},d.use=function(u,l){if(u.uses=(u.uses||[]).concat(l||[]),u.uses.length===0){S.warn("Plugin.use:",d.toString(u),"does not specify any dependencies to install.");return}for(var h=d.dependencies(u),r=S.topologicalSort(h),o=[],p=0;p<r.length;p+=1)if(r[p]!==u.name){var a=d.resolve(r[p]);if(!a){o.push("❌ "+r[p]);continue}d.isUsed(u,a.name)||(d.isFor(a,u)||(S.warn("Plugin.use:",d.toString(a),"is for",a.for,"but installed on",d.toString(u)+"."),a._warned=!0),a.install?a.install(u):(S.warn("Plugin.use:",d.toString(a),"does not specify an install function."),a._warned=!0),a._warned?(o.push("🔶 "+d.toString(a)),delete a._warned):o.push("✅ "+d.toString(a)),u.used.push(a.name))}o.length>0&&!a.silent&&S.info(o.join("  "))},d.dependencies=function(u,l){var h=d.dependencyParse(u),r=h.name;if(l=l||{},!(r in l)){u=d.resolve(u)||u,l[r]=S.map(u.uses||[],function(p){d.isPlugin(p)&&d.register(p);var a=d.dependencyParse(p),v=d.resolve(p);return v&&!d.versionSatisfies(v.version,a.range)?(S.warn("Plugin.dependencies:",d.toString(v),"does not satisfy",d.toString(a),"used by",d.toString(h)+"."),v._warned=!0,u._warned=!0):v||(S.warn("Plugin.dependencies:",d.toString(p),"used by",d.toString(h),"could not be resolved."),u._warned=!0),a.name});for(var o=0;o<l[r].length;o+=1)d.dependencies(l[r][o],l);return l}},d.dependencyParse=function(u){if(S.isString(u)){var l=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return l.test(u)||S.warn("Plugin.dependencyParse:",u,"is not a valid dependency string."),{name:u.split("@")[0],range:u.split("@")[1]||"*"}}return{name:u.name,range:u.range||u.version}},d.versionParse=function(u){var l=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;l.test(u)||S.warn("Plugin.versionParse:",u,"is not a valid version or range.");var h=l.exec(u),r=Number(h[4]),o=Number(h[5]),p=Number(h[6]);return{isRange:!!(h[1]||h[2]),version:h[3],range:u,operator:h[1]||h[2]||"",major:r,minor:o,patch:p,parts:[r,o,p],prerelease:h[7],number:r*1e8+o*1e4+p}},d.versionSatisfies=function(u,l){l=l||"*";var h=d.versionParse(l),r=d.versionParse(u);if(h.isRange){if(h.operator==="*"||u==="*")return!0;if(h.operator===">")return r.number>h.number;if(h.operator===">=")return r.number>=h.number;if(h.operator==="~")return r.major===h.major&&r.minor===h.minor&&r.patch>=h.patch;if(h.operator==="^")return h.major>0?r.major===h.major&&r.number>=h.number:h.minor>0?r.minor===h.minor&&r.patch>=h.patch:r.patch===h.patch}return u===l||u==="*"}})()},13037:(m,E,i)=>{var d={};m.exports=d;var S=i(35810),u=i(48413),l=i(53402);(function(){d._maxFrameDelta=66.66666666666667,d._frameDeltaFallback=16.666666666666668,d._timeBufferMargin=1.5,d._elapsedNextEstimate=1,d._smoothingLowerBound=.1,d._smoothingUpperBound=.9,d.create=function(r){var o={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},p=l.extend(o,r);return p.fps=0,p},d.run=function(r,o){return r.timeBuffer=d._frameDeltaFallback,function p(a){r.frameRequestId=d._onNextFrame(r,p),a&&r.enabled&&d.tick(r,o,a)}(),r},d.tick=function(r,o,p){var a=l.now(),v=r.delta,x=0,g=p-r.timeLastTick;if((!g||!r.timeLastTick||g>Math.max(d._maxFrameDelta,r.maxFrameTime))&&(g=r.frameDelta||d._frameDeltaFallback),r.frameDeltaSmoothing){r.frameDeltaHistory.push(g),r.frameDeltaHistory=r.frameDeltaHistory.slice(-r.frameDeltaHistorySize);var y=r.frameDeltaHistory.slice(0).sort(),T=r.frameDeltaHistory.slice(y.length*d._smoothingLowerBound,y.length*d._smoothingUpperBound),P=h(T);g=P||g}r.frameDeltaSnapping&&(g=1e3/Math.round(1e3/g)),r.frameDelta=g,r.timeLastTick=p,r.timeBuffer+=r.frameDelta,r.timeBuffer=l.clamp(r.timeBuffer,0,r.frameDelta+v*d._timeBufferMargin),r.lastUpdatesDeferred=0;var A=r.maxUpdates||Math.ceil(r.maxFrameTime/v),b={timestamp:o.timing.timestamp};S.trigger(r,"beforeTick",b),S.trigger(r,"tick",b);for(var O=l.now();v>0&&r.timeBuffer>=v*d._timeBufferMargin;){S.trigger(r,"beforeUpdate",b),u.update(o,v),S.trigger(r,"afterUpdate",b),r.timeBuffer-=v,x+=1;var D=l.now()-a,B=l.now()-O,G=D+d._elapsedNextEstimate*B/x;if(x>=A||G>r.maxFrameTime){r.lastUpdatesDeferred=Math.round(Math.max(0,r.timeBuffer/v-d._timeBufferMargin));break}}o.timing.lastUpdatesPerFrame=x,S.trigger(r,"afterTick",b),r.frameDeltaHistory.length>=100&&(r.lastUpdatesDeferred&&Math.round(r.frameDelta/v)>A?l.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):r.lastUpdatesDeferred&&l.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof r.isFixed<"u"&&l.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(r.deltaMin||r.deltaMax)&&l.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),r.fps!==0&&l.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},d.stop=function(r){d._cancelNextFrame(r)},d._onNextFrame=function(r,o){if(typeof window<"u"&&window.requestAnimationFrame)r.frameRequestId=window.requestAnimationFrame(o);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return r.frameRequestId},d._cancelNextFrame=function(r){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(r.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var h=function(r){for(var o=0,p=r.length,a=0;a<p;a+=1)o+=r[a];return o/p||0};d._mean=h})()},53614:(m,E,i)=>{var d={};m.exports=d;var S=i(22562),u=i(35810),l=i(53402);(function(){d._motionWakeThreshold=.18,d._motionSleepThreshold=.08,d._minBias=.9,d.update=function(h,r){for(var o=r/l._baseDelta,p=d._motionSleepThreshold,a=0;a<h.length;a++){var v=h[a],x=S.getSpeed(v),g=S.getAngularSpeed(v),y=x*x+g*g;if(v.force.x!==0||v.force.y!==0){d.set(v,!1);continue}var T=Math.min(v.motion,y),P=Math.max(v.motion,y);v.motion=d._minBias*T+(1-d._minBias)*P,v.sleepThreshold>0&&v.motion<p?(v.sleepCounter+=1,v.sleepCounter>=v.sleepThreshold/o&&d.set(v,!0)):v.sleepCounter>0&&(v.sleepCounter-=1)}},d.afterCollisions=function(h){for(var r=d._motionSleepThreshold,o=0;o<h.length;o++){var p=h[o];if(p.isActive){var a=p.collision,v=a.bodyA.parent,x=a.bodyB.parent;if(!(v.isSleeping&&x.isSleeping||v.isStatic||x.isStatic)&&(v.isSleeping||x.isSleeping)){var g=v.isSleeping&&!v.isStatic?v:x,y=g===v?x:v;!g.isStatic&&y.motion>r&&d.set(g,!1)}}}},d.set=function(h,r){var o=h.isSleeping;r?(h.isSleeping=!0,h.sleepCounter=h.sleepThreshold,h.positionImpulse.x=0,h.positionImpulse.y=0,h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.anglePrev=h.angle,h.speed=0,h.angularSpeed=0,h.motion=0,o||u.trigger(h,"sleepStart")):(h.isSleeping=!1,h.sleepCounter=0,o&&u.trigger(h,"sleepEnd"))}})()},66280:(m,E,i)=>{var d={};m.exports=d;var S=i(41598),u=i(53402),l=i(22562),h=i(15647),r=i(31725);(function(){d.rectangle=function(o,p,a,v,x){x=x||{};var g={label:"Rectangle Body",position:{x:o,y:p},vertices:S.fromPath("L 0 0 L "+a+" 0 L "+a+" "+v+" L 0 "+v)};if(x.chamfer){var y=x.chamfer;g.vertices=S.chamfer(g.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete x.chamfer}return l.create(u.extend({},g,x))},d.trapezoid=function(o,p,a,v,x,g){g=g||{},x>=1&&u.warn("Bodies.trapezoid: slope parameter must be < 1."),x*=.5;var y=(1-x*2)*a,T=a*x,P=T+y,A=P+T,b;x<.5?b="L 0 0 L "+T+" "+-v+" L "+P+" "+-v+" L "+A+" 0":b="L 0 0 L "+P+" "+-v+" L "+A+" 0";var O={label:"Trapezoid Body",position:{x:o,y:p},vertices:S.fromPath(b)};if(g.chamfer){var D=g.chamfer;O.vertices=S.chamfer(O.vertices,D.radius,D.quality,D.qualityMin,D.qualityMax),delete g.chamfer}return l.create(u.extend({},O,g))},d.circle=function(o,p,a,v,x){v=v||{};var g={label:"Circle Body",circleRadius:a};x=x||25;var y=Math.ceil(Math.max(10,Math.min(x,a)));return y%2===1&&(y+=1),d.polygon(o,p,y,a,u.extend({},g,v))},d.polygon=function(o,p,a,v,x){if(x=x||{},a<3)return d.circle(o,p,v,x);for(var g=2*Math.PI/a,y="",T=g*.5,P=0;P<a;P+=1){var A=T+P*g,b=Math.cos(A)*v,O=Math.sin(A)*v;y+="L "+b.toFixed(3)+" "+O.toFixed(3)+" "}var D={label:"Polygon Body",position:{x:o,y:p},vertices:S.fromPath(y)};if(x.chamfer){var B=x.chamfer;D.vertices=S.chamfer(D.vertices,B.radius,B.quality,B.qualityMin,B.qualityMax),delete x.chamfer}return l.create(u.extend({},D,x))},d.fromVertices=function(o,p,a,v,x,g,y,T){var P=u.getDecomp(),A,b,O,D,B,G,V,k,U,W,X;for(A=!!(P&&P.quickDecomp),v=v||{},O=[],x=typeof x<"u"?x:!1,g=typeof g<"u"?g:.01,y=typeof y<"u"?y:10,T=typeof T<"u"?T:.01,u.isArray(a[0])||(a=[a]),W=0;W<a.length;W+=1)if(G=a[W],D=S.isConvex(G),B=!D,B&&!A&&u.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),D||!A)D?G=S.clockwiseSort(G):G=S.hull(G),O.push({position:{x:o,y:p},vertices:G});else{var _=G.map(function(at){return[at.x,at.y]});P.makeCCW(_),g!==!1&&P.removeCollinearPoints(_,g),T!==!1&&P.removeDuplicatePoints&&P.removeDuplicatePoints(_,T);var Q=P.quickDecomp(_);for(V=0;V<Q.length;V++){var j=Q[V],it=j.map(function(at){return{x:at[0],y:at[1]}});y>0&&S.area(it)<y||O.push({position:S.centre(it),vertices:it})}}for(V=0;V<O.length;V++)O[V]=l.create(u.extend(O[V],v));if(x){var K=5;for(V=0;V<O.length;V++){var J=O[V];for(k=V+1;k<O.length;k++){var Y=O[k];if(h.overlaps(J.bounds,Y.bounds)){var q=J.vertices,$=Y.vertices;for(U=0;U<J.vertices.length;U++)for(X=0;X<Y.vertices.length;X++){var et=r.magnitudeSquared(r.sub(q[(U+1)%q.length],$[X])),rt=r.magnitudeSquared(r.sub(q[U],$[(X+1)%$.length]));et<K&&rt<K&&(q[U].isInternal=!0,$[X].isInternal=!0)}}}}}return O.length>1?(b=l.create(u.extend({parts:O.slice(0)},v)),l.setPosition(b,{x:o,y:p}),b):O[0]},d.flagCoincidentParts=function(o,p){p===void 0&&(p=5);for(var a=0;a<o.length;a++)for(var v=o[a],x=a+1;x<o.length;x++){var g=o[x];if(h.overlaps(v.bounds,g.bounds))for(var y=v.vertices,T=g.vertices,P=0;P<v.vertices.length;P++)for(var A=0;A<g.vertices.length;A++){var b=r.magnitudeSquared(r.sub(y[(P+1)%y.length],T[A])),O=r.magnitudeSquared(r.sub(y[P],T[(A+1)%T.length]));b<p&&O<p&&(y[P].isInternal=!0,T[A].isInternal=!0)}}return o}})()},74116:(m,E,i)=>{var d={};m.exports=d;var S=i(69351),u=i(48140),l=i(53402),h=i(22562),r=i(66280);(function(){d.stack=function(o,p,a,v,x,g,y){for(var T=S.create({label:"Stack"}),P=o,A=p,b,O=0,D=0;D<v;D++){for(var B=0,G=0;G<a;G++){var V=y(P,A,G,D,b,O);if(V){var k=V.bounds.max.y-V.bounds.min.y,U=V.bounds.max.x-V.bounds.min.x;k>B&&(B=k),h.translate(V,{x:U*.5,y:k*.5}),P=V.bounds.max.x+x,S.addBody(T,V),b=V,O+=1}else P+=x}A+=B+g,P=o}return T},d.chain=function(o,p,a,v,x,g){for(var y=o.bodies,T=1;T<y.length;T++){var P=y[T-1],A=y[T],b=P.bounds.max.y-P.bounds.min.y,O=P.bounds.max.x-P.bounds.min.x,D=A.bounds.max.y-A.bounds.min.y,B=A.bounds.max.x-A.bounds.min.x,G={bodyA:P,pointA:{x:O*p,y:b*a},bodyB:A,pointB:{x:B*v,y:D*x}},V=l.extend(G,g);S.addConstraint(o,u.create(V))}return o.label+=" Chain",o},d.mesh=function(o,p,a,v,x){var g=o.bodies,y,T,P,A,b;for(y=0;y<a;y++){for(T=1;T<p;T++)P=g[T-1+y*p],A=g[T+y*p],S.addConstraint(o,u.create(l.extend({bodyA:P,bodyB:A},x)));if(y>0)for(T=0;T<p;T++)P=g[T+(y-1)*p],A=g[T+y*p],S.addConstraint(o,u.create(l.extend({bodyA:P,bodyB:A},x))),v&&T>0&&(b=g[T-1+(y-1)*p],S.addConstraint(o,u.create(l.extend({bodyA:b,bodyB:A},x)))),v&&T<p-1&&(b=g[T+1+(y-1)*p],S.addConstraint(o,u.create(l.extend({bodyA:b,bodyB:A},x))))}return o.label+=" Mesh",o},d.pyramid=function(o,p,a,v,x,g,y){return d.stack(o,p,a,v,x,g,function(T,P,A,b,O,D){var B=Math.min(v,Math.ceil(a/2)),G=O?O.bounds.max.x-O.bounds.min.x:0;if(!(b>B)){b=B-b;var V=b,k=a-1-b;if(!(A<V||A>k)){D===1&&h.translate(O,{x:(A+(a%2===1?1:-1))*G,y:0});var U=O?A*G:0;return y(o+U+A*x,P,A,b,O,D)}}})},d.newtonsCradle=function(o,p,a,v,x){for(var g=S.create({label:"Newtons Cradle"}),y=0;y<a;y++){var T=1.9,P=r.circle(o+y*(v*T),p+x,v,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),A=u.create({pointA:{x:o+y*(v*T),y:p},bodyB:P});S.addBody(g,P),S.addConstraint(g,A)}return g},d.car=function(o,p,a,v,x){var g=h.nextGroup(!0),y=20,T=-a*.5+y,P=a*.5-y,A=0,b=S.create({label:"Car"}),O=r.rectangle(o,p,a,v,{collisionFilter:{group:g},chamfer:{radius:v*.5},density:2e-4}),D=r.circle(o+T,p+A,x,{collisionFilter:{group:g},friction:.8}),B=r.circle(o+P,p+A,x,{collisionFilter:{group:g},friction:.8}),G=u.create({bodyB:O,pointB:{x:T,y:A},bodyA:D,stiffness:1,length:0}),V=u.create({bodyB:O,pointB:{x:P,y:A},bodyA:B,stiffness:1,length:0});return S.addBody(b,O),S.addBody(b,D),S.addBody(b,B),S.addConstraint(b,G),S.addConstraint(b,V),b},d.softBody=function(o,p,a,v,x,g,y,T,P,A){P=l.extend({inertia:1/0},P),A=l.extend({stiffness:.2,render:{type:"line",anchors:!1}},A);var b=d.stack(o,p,a,v,x,g,function(O,D){return r.circle(O,D,T,P)});return d.mesh(b,a,v,y,A),b.label="Soft Body",b}})()},66615:(m,E,i)=>{var d={};m.exports=d;var S=i(31725),u=i(53402);(function(){d.fromVertices=function(l){for(var h={},r=0;r<l.length;r++){var o=(r+1)%l.length,p=S.normalise({x:l[o].y-l[r].y,y:l[r].x-l[o].x}),a=p.y===0?1/0:p.x/p.y;a=a.toFixed(3).toString(),h[a]=p}return u.values(h)},d.rotate=function(l,h){if(h!==0)for(var r=Math.cos(h),o=Math.sin(h),p=0;p<l.length;p++){var a=l[p],v;v=a.x*r-a.y*o,a.y=a.x*o+a.y*r,a.x=v}}})()},15647:m=>{var E={};m.exports=E,function(){E.create=function(i){var d={min:{x:0,y:0},max:{x:0,y:0}};return i&&E.update(d,i),d},E.update=function(i,d,S){i.min.x=1/0,i.max.x=-1/0,i.min.y=1/0,i.max.y=-1/0;for(var u=0;u<d.length;u++){var l=d[u];l.x>i.max.x&&(i.max.x=l.x),l.x<i.min.x&&(i.min.x=l.x),l.y>i.max.y&&(i.max.y=l.y),l.y<i.min.y&&(i.min.y=l.y)}S&&(S.x>0?i.max.x+=S.x:i.min.x+=S.x,S.y>0?i.max.y+=S.y:i.min.y+=S.y)},E.contains=function(i,d){return d.x>=i.min.x&&d.x<=i.max.x&&d.y>=i.min.y&&d.y<=i.max.y},E.overlaps=function(i,d){return i.min.x<=d.max.x&&i.max.x>=d.min.x&&i.max.y>=d.min.y&&i.min.y<=d.max.y},E.translate=function(i,d){i.min.x+=d.x,i.max.x+=d.x,i.min.y+=d.y,i.max.y+=d.y},E.shift=function(i,d){var S=i.max.x-i.min.x,u=i.max.y-i.min.y;i.min.x=d.x,i.max.x=d.x+S,i.min.y=d.y,i.max.y=d.y+u},E.wrap=function(i,d,S){var u=null,l=null;if(typeof d.min.x<"u"&&typeof d.max.x<"u"&&(i.min.x>d.max.x?u=d.min.x-i.max.x:i.max.x<d.min.x&&(u=d.max.x-i.min.x)),typeof d.min.y<"u"&&typeof d.max.y<"u"&&(i.min.y>d.max.y?l=d.min.y-i.max.y:i.max.y<d.min.y&&(l=d.max.y-i.min.y)),u!==null||l!==null)return{x:u||0,y:l||0}}}()},74058:(m,E,i)=>{var d={};m.exports=d,i(15647);var S=i(53402);(function(){d.pathToVertices=function(u,l){typeof window<"u"&&!("SVGPathSeg"in window)&&S.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var h,r,o,p,a,v,x,g,y,T,P=[],A,b,O=0,D=0,B=0;l=l||15;var G=function(k,U,W){var X=W%2===1&&W>1;if(!y||k!=y.x||U!=y.y){y&&X?(A=y.x,b=y.y):(A=0,b=0);var _={x:A+k,y:b+U};(X||!y)&&(y=_),P.push(_),D=A+k,B=b+U}},V=function(k){var U=k.pathSegTypeAsLetter.toUpperCase();if(U!=="Z"){switch(U){case"M":case"L":case"T":case"C":case"S":case"Q":D=k.x,B=k.y;break;case"H":D=k.x;break;case"V":B=k.y;break}G(D,B,k.pathSegType)}};for(d._svgPathToAbsolute(u),o=u.getTotalLength(),v=[],h=0;h<u.pathSegList.numberOfItems;h+=1)v.push(u.pathSegList.getItem(h));for(x=v.concat();O<o;){if(T=u.getPathSegAtLength(O),a=v[T],a!=g){for(;x.length&&x[0]!=a;)V(x.shift());g=a}switch(a.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":p=u.getPointAtLength(O),G(p.x,p.y,0);break}O+=l}for(h=0,r=x.length;h<r;++h)V(x[h]);return P},d._svgPathToAbsolute=function(u){for(var l,h,r,o,p,a,v=u.pathSegList,x=0,g=0,y=v.numberOfItems,T=0;T<y;++T){var P=v.getItem(T),A=P.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(A))"x"in P&&(x=P.x),"y"in P&&(g=P.y);else switch("x1"in P&&(r=x+P.x1),"x2"in P&&(p=x+P.x2),"y1"in P&&(o=g+P.y1),"y2"in P&&(a=g+P.y2),"x"in P&&(x+=P.x),"y"in P&&(g+=P.y),A){case"m":v.replaceItem(u.createSVGPathSegMovetoAbs(x,g),T);break;case"l":v.replaceItem(u.createSVGPathSegLinetoAbs(x,g),T);break;case"h":v.replaceItem(u.createSVGPathSegLinetoHorizontalAbs(x),T);break;case"v":v.replaceItem(u.createSVGPathSegLinetoVerticalAbs(g),T);break;case"c":v.replaceItem(u.createSVGPathSegCurvetoCubicAbs(x,g,r,o,p,a),T);break;case"s":v.replaceItem(u.createSVGPathSegCurvetoCubicSmoothAbs(x,g,p,a),T);break;case"q":v.replaceItem(u.createSVGPathSegCurvetoQuadraticAbs(x,g,r,o),T);break;case"t":v.replaceItem(u.createSVGPathSegCurvetoQuadraticSmoothAbs(x,g),T);break;case"a":v.replaceItem(u.createSVGPathSegArcAbs(x,g,P.r1,P.r2,P.angle,P.largeArcFlag,P.sweepFlag),T);break;case"z":case"Z":x=l,g=h;break}(A=="M"||A=="m")&&(l=x,h=g)}}})()},31725:m=>{var E={};m.exports=E,function(){E.create=function(i,d){return{x:i||0,y:d||0}},E.clone=function(i){return{x:i.x,y:i.y}},E.magnitude=function(i){return Math.sqrt(i.x*i.x+i.y*i.y)},E.magnitudeSquared=function(i){return i.x*i.x+i.y*i.y},E.rotate=function(i,d,S){var u=Math.cos(d),l=Math.sin(d);S||(S={});var h=i.x*u-i.y*l;return S.y=i.x*l+i.y*u,S.x=h,S},E.rotateAbout=function(i,d,S,u){var l=Math.cos(d),h=Math.sin(d);u||(u={});var r=S.x+((i.x-S.x)*l-(i.y-S.y)*h);return u.y=S.y+((i.x-S.x)*h+(i.y-S.y)*l),u.x=r,u},E.normalise=function(i){var d=E.magnitude(i);return d===0?{x:0,y:0}:{x:i.x/d,y:i.y/d}},E.dot=function(i,d){return i.x*d.x+i.y*d.y},E.cross=function(i,d){return i.x*d.y-i.y*d.x},E.cross3=function(i,d,S){return(d.x-i.x)*(S.y-i.y)-(d.y-i.y)*(S.x-i.x)},E.add=function(i,d,S){return S||(S={}),S.x=i.x+d.x,S.y=i.y+d.y,S},E.sub=function(i,d,S){return S||(S={}),S.x=i.x-d.x,S.y=i.y-d.y,S},E.mult=function(i,d){return{x:i.x*d,y:i.y*d}},E.div=function(i,d){return{x:i.x/d,y:i.y/d}},E.perp=function(i,d){return d=d===!0?-1:1,{x:d*-i.y,y:d*i.x}},E.neg=function(i){return{x:-i.x,y:-i.y}},E.angle=function(i,d){return Math.atan2(d.y-i.y,d.x-i.x)},E._temp=[E.create(),E.create(),E.create(),E.create(),E.create(),E.create()]}()},41598:(m,E,i)=>{var d={};m.exports=d;var S=i(31725),u=i(53402);(function(){d.create=function(l,h){for(var r=[],o=0;o<l.length;o++){var p=l[o],a={x:p.x,y:p.y,index:o,body:h,isInternal:!1};r.push(a)}return r},d.fromPath=function(l,h){var r=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,o=[];return l.replace(r,function(p,a,v){o.push({x:parseFloat(a),y:parseFloat(v)})}),d.create(o,h)},d.centre=function(l){for(var h=d.area(l,!0),r={x:0,y:0},o,p,a,v=0;v<l.length;v++)a=(v+1)%l.length,o=S.cross(l[v],l[a]),p=S.mult(S.add(l[v],l[a]),o),r=S.add(r,p);return S.div(r,6*h)},d.mean=function(l){for(var h={x:0,y:0},r=0;r<l.length;r++)h.x+=l[r].x,h.y+=l[r].y;return S.div(h,l.length)},d.area=function(l,h){for(var r=0,o=l.length-1,p=0;p<l.length;p++)r+=(l[o].x-l[p].x)*(l[o].y+l[p].y),o=p;return h?r/2:Math.abs(r)/2},d.inertia=function(l,h){for(var r=0,o=0,p=l,a,v,x=0;x<p.length;x++)v=(x+1)%p.length,a=Math.abs(S.cross(p[v],p[x])),r+=a*(S.dot(p[v],p[v])+S.dot(p[v],p[x])+S.dot(p[x],p[x])),o+=a;return h/6*(r/o)},d.translate=function(l,h,r){r=typeof r<"u"?r:1;var o=l.length,p=h.x*r,a=h.y*r,v;for(v=0;v<o;v++)l[v].x+=p,l[v].y+=a;return l},d.rotate=function(l,h,r){if(h!==0){var o=Math.cos(h),p=Math.sin(h),a=r.x,v=r.y,x=l.length,g,y,T,P;for(P=0;P<x;P++)g=l[P],y=g.x-a,T=g.y-v,g.x=a+(y*o-T*p),g.y=v+(y*p+T*o);return l}},d.contains=function(l,h){for(var r=h.x,o=h.y,p=l.length,a=l[p-1],v,x=0;x<p;x++){if(v=l[x],(r-a.x)*(v.y-a.y)+(o-a.y)*(a.x-v.x)>0)return!1;a=v}return!0},d.scale=function(l,h,r,o){if(h===1&&r===1)return l;o=o||d.centre(l);for(var p,a,v=0;v<l.length;v++)p=l[v],a=S.sub(p,o),l[v].x=o.x+a.x*h,l[v].y=o.y+a.y*r;return l},d.chamfer=function(l,h,r,o,p){typeof h=="number"?h=[h]:h=h||[8],r=typeof r<"u"?r:-1,o=o||2,p=p||14;for(var a=[],v=0;v<l.length;v++){var x=l[v-1>=0?v-1:l.length-1],g=l[v],y=l[(v+1)%l.length],T=h[v<h.length?v:h.length-1];if(T===0){a.push(g);continue}var P=S.normalise({x:g.y-x.y,y:x.x-g.x}),A=S.normalise({x:y.y-g.y,y:g.x-y.x}),b=Math.sqrt(2*Math.pow(T,2)),O=S.mult(u.clone(P),T),D=S.normalise(S.mult(S.add(P,A),.5)),B=S.sub(g,S.mult(D,b)),G=r;r===-1&&(G=Math.pow(T,.32)*1.75),G=u.clamp(G,o,p),G%2===1&&(G+=1);for(var V=Math.acos(S.dot(P,A)),k=V/G,U=0;U<G;U++)a.push(S.add(S.rotate(O,k*U),B))}return a},d.clockwiseSort=function(l){var h=d.mean(l);return l.sort(function(r,o){return S.angle(h,r)-S.angle(h,o)}),l},d.isConvex=function(l){var h=0,r=l.length,o,p,a,v;if(r<3)return null;for(o=0;o<r;o++)if(p=(o+1)%r,a=(o+2)%r,v=(l[p].x-l[o].x)*(l[a].y-l[p].y),v-=(l[p].y-l[o].y)*(l[a].x-l[p].x),v<0?h|=1:v>0&&(h|=2),h===3)return!1;return h!==0?!0:null},d.hull=function(l){var h=[],r=[],o,p;for(l=l.slice(0),l.sort(function(a,v){var x=a.x-v.x;return x!==0?x:a.y-v.y}),p=0;p<l.length;p+=1){for(o=l[p];r.length>=2&&S.cross3(r[r.length-2],r[r.length-1],o)<=0;)r.pop();r.push(o)}for(p=l.length-1;p>=0;p-=1){for(o=l[p];h.length>=2&&S.cross3(h[h.length-2],h[h.length-1],o)<=0;)h.pop();h.push(o)}return h.pop(),r.pop(),h.concat(r)}})()},55973:m=>{/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={decomp:V,quickDecomp:X,isSimple:U,removeCollinearPoints:_,removeDuplicatePoints:Q,makeCCW:y};function E(K,J,Y){Y=Y||0;var q=[0,0],$,et,rt,at,lt,vt,xt;return $=K[1][1]-K[0][1],et=K[0][0]-K[1][0],rt=$*K[0][0]+et*K[0][1],at=J[1][1]-J[0][1],lt=J[0][0]-J[1][0],vt=at*J[0][0]+lt*J[0][1],xt=$*lt-at*et,j(xt,0,Y)||(q[0]=(lt*rt-et*vt)/xt,q[1]=($*vt-at*rt)/xt),q}function i(K,J,Y,q){var $=J[0]-K[0],et=J[1]-K[1],rt=q[0]-Y[0],at=q[1]-Y[1];if(rt*et-at*$===0)return!1;var lt=($*(Y[1]-K[1])+et*(K[0]-Y[0]))/(rt*et-at*$),vt=(rt*(K[1]-Y[1])+at*(Y[0]-K[0]))/(at*$-rt*et);return lt>=0&&lt<=1&&vt>=0&&vt<=1}function d(K,J,Y){return(J[0]-K[0])*(Y[1]-K[1])-(Y[0]-K[0])*(J[1]-K[1])}function S(K,J,Y){return d(K,J,Y)>0}function u(K,J,Y){return d(K,J,Y)>=0}function l(K,J,Y){return d(K,J,Y)<0}function h(K,J,Y){return d(K,J,Y)<=0}var r=[],o=[];function p(K,J,Y,q){if(q){var $=r,et=o;$[0]=J[0]-K[0],$[1]=J[1]-K[1],et[0]=Y[0]-J[0],et[1]=Y[1]-J[1];var rt=$[0]*et[0]+$[1]*et[1],at=Math.sqrt($[0]*$[0]+$[1]*$[1]),lt=Math.sqrt(et[0]*et[0]+et[1]*et[1]),vt=Math.acos(rt/(at*lt));return vt<q}else return d(K,J,Y)===0}function a(K,J){var Y=J[0]-K[0],q=J[1]-K[1];return Y*Y+q*q}function v(K,J){var Y=K.length;return K[J<0?J%Y+Y:J%Y]}function x(K){K.length=0}function g(K,J,Y,q){for(var $=Y;$<q;$++)K.push(J[$])}function y(K){for(var J=0,Y=K,q=1;q<K.length;++q)(Y[q][1]<Y[J][1]||Y[q][1]===Y[J][1]&&Y[q][0]>Y[J][0])&&(J=q);return S(v(K,J-1),v(K,J),v(K,J+1))?!1:(T(K),!0)}function T(K){for(var J=[],Y=K.length,q=0;q!==Y;q++)J.push(K.pop());for(var q=0;q!==Y;q++)K[q]=J[q]}function P(K,J){return l(v(K,J-1),v(K,J),v(K,J+1))}var A=[],b=[];function O(K,J,Y){var q,$,et=A,rt=b;if(u(v(K,J+1),v(K,J),v(K,Y))&&h(v(K,J-1),v(K,J),v(K,Y)))return!1;$=a(v(K,J),v(K,Y));for(var at=0;at!==K.length;++at)if(!((at+1)%K.length===J||at===J)&&u(v(K,J),v(K,Y),v(K,at+1))&&h(v(K,J),v(K,Y),v(K,at))&&(et[0]=v(K,J),et[1]=v(K,Y),rt[0]=v(K,at),rt[1]=v(K,at+1),q=E(et,rt),a(v(K,J),q)<$))return!1;return!0}function D(K,J,Y){for(var q=0;q!==K.length;++q)if(!(q===J||q===Y||(q+1)%K.length===J||(q+1)%K.length===Y)&&i(v(K,J),v(K,Y),v(K,q),v(K,q+1)))return!1;return!0}function B(K,J,Y,q){var $=q||[];if(x($),J<Y)for(var et=J;et<=Y;et++)$.push(K[et]);else{for(var et=0;et<=Y;et++)$.push(K[et]);for(var et=J;et<K.length;et++)$.push(K[et])}return $}function G(K){for(var J=[],Y=[],q=[],$=[],et=Number.MAX_VALUE,rt=0;rt<K.length;++rt)if(P(K,rt)){for(var at=0;at<K.length;++at)if(O(K,rt,at)){Y=G(B(K,rt,at,$)),q=G(B(K,at,rt,$));for(var lt=0;lt<q.length;lt++)Y.push(q[lt]);Y.length<et&&(J=Y,et=Y.length,J.push([v(K,rt),v(K,at)]))}}return J}function V(K){var J=G(K);return J.length>0?k(K,J):[K]}function k(K,J){if(J.length===0)return[K];if(J instanceof Array&&J.length&&J[0]instanceof Array&&J[0].length===2&&J[0][0]instanceof Array){for(var Y=[K],q=0;q<J.length;q++)for(var $=J[q],et=0;et<Y.length;et++){var rt=Y[et],at=k(rt,$);if(at){Y.splice(et,1),Y.push(at[0],at[1]);break}}return Y}else{var $=J,q=K.indexOf($[0]),et=K.indexOf($[1]);return q!==-1&&et!==-1?[B(K,q,et),B(K,et,q)]:!1}}function U(K){var J=K,Y;for(Y=0;Y<J.length-1;Y++)for(var q=0;q<Y-1;q++)if(i(J[Y],J[Y+1],J[q],J[q+1]))return!1;for(Y=1;Y<J.length-2;Y++)if(i(J[0],J[J.length-1],J[Y],J[Y+1]))return!1;return!0}function W(K,J,Y,q,$){$=$||0;var et=J[1]-K[1],rt=K[0]-J[0],at=et*K[0]+rt*K[1],lt=q[1]-Y[1],vt=Y[0]-q[0],xt=lt*Y[0]+vt*Y[1],ut=et*vt-lt*rt;return j(ut,0,$)?[0,0]:[(vt*at-rt*xt)/ut,(et*xt-lt*at)/ut]}function X(K,J,Y,q,$,et,rt){et=et||100,rt=rt||0,$=$||25,J=typeof J<"u"?J:[],Y=Y||[],q=q||[];var at=[0,0],lt=[0,0],vt=[0,0],xt=0,ut=0,mt=0,Tt=0,bt=0,St=0,Gt=0,Nt=[],zt=[],Lt=K,ct=K;if(ct.length<3)return J;if(rt++,rt>et)return console.warn("quickDecomp: max level ("+et+") reached."),J;for(var ot=0;ot<K.length;++ot)if(P(Lt,ot)){Y.push(Lt[ot]),xt=ut=Number.MAX_VALUE;for(var Mt=0;Mt<K.length;++Mt)S(v(Lt,ot-1),v(Lt,ot),v(Lt,Mt))&&h(v(Lt,ot-1),v(Lt,ot),v(Lt,Mt-1))&&(vt=W(v(Lt,ot-1),v(Lt,ot),v(Lt,Mt),v(Lt,Mt-1)),l(v(Lt,ot+1),v(Lt,ot),vt)&&(mt=a(Lt[ot],vt),mt<ut&&(ut=mt,lt=vt,St=Mt))),S(v(Lt,ot+1),v(Lt,ot),v(Lt,Mt+1))&&h(v(Lt,ot+1),v(Lt,ot),v(Lt,Mt))&&(vt=W(v(Lt,ot+1),v(Lt,ot),v(Lt,Mt),v(Lt,Mt+1)),S(v(Lt,ot-1),v(Lt,ot),vt)&&(mt=a(Lt[ot],vt),mt<xt&&(xt=mt,at=vt,bt=Mt)));if(St===(bt+1)%K.length)vt[0]=(lt[0]+at[0])/2,vt[1]=(lt[1]+at[1])/2,q.push(vt),ot<bt?(g(Nt,Lt,ot,bt+1),Nt.push(vt),zt.push(vt),St!==0&&g(zt,Lt,St,Lt.length),g(zt,Lt,0,ot+1)):(ot!==0&&g(Nt,Lt,ot,Lt.length),g(Nt,Lt,0,bt+1),Nt.push(vt),zt.push(vt),g(zt,Lt,St,ot+1));else{if(St>bt&&(bt+=K.length),Tt=Number.MAX_VALUE,bt<St)return J;for(var Mt=St;Mt<=bt;++Mt)u(v(Lt,ot-1),v(Lt,ot),v(Lt,Mt))&&h(v(Lt,ot+1),v(Lt,ot),v(Lt,Mt))&&(mt=a(v(Lt,ot),v(Lt,Mt)),mt<Tt&&D(Lt,ot,Mt)&&(Tt=mt,Gt=Mt%K.length));ot<Gt?(g(Nt,Lt,ot,Gt+1),Gt!==0&&g(zt,Lt,Gt,ct.length),g(zt,Lt,0,ot+1)):(ot!==0&&g(Nt,Lt,ot,ct.length),g(Nt,Lt,0,Gt+1),g(zt,Lt,Gt,ot+1))}return Nt.length<zt.length?(X(Nt,J,Y,q,$,et,rt),X(zt,J,Y,q,$,et,rt)):(X(zt,J,Y,q,$,et,rt),X(Nt,J,Y,q,$,et,rt)),J}return J.push(K),J}function _(K,J){for(var Y=0,q=K.length-1;K.length>3&&q>=0;--q)p(v(K,q-1),v(K,q),v(K,q+1),J)&&(K.splice(q%K.length,1),Y++);return Y}function Q(K,J){for(var Y=K.length-1;Y>=1;--Y)for(var q=K[Y],$=Y-1;$>=0;--$)if(it(q,K[$],J)){K.splice(Y,1);continue}}function j(K,J,Y){return Y=Y||0,Math.abs(K-J)<=Y}function it(K,J,Y){return j(K[0],J[0],Y)&&j(K[1],J[1],Y)}},52018:(m,E,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var d=i(83419),S=new d({initialize:function(l){this.pluginManager=l,this.game=l.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});m.exports=S},42363:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};m.exports=E},37277:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={},i={},d={};d.register=function(S,u,l,h){h===void 0&&(h=!1),E[S]={plugin:u,mapping:l,custom:h}},d.registerCustom=function(S,u,l,h){i[S]={plugin:u,mapping:l,data:h}},d.hasCore=function(S){return E.hasOwnProperty(S)},d.hasCustom=function(S){return i.hasOwnProperty(S)},d.getCore=function(S){return E[S]},d.getCustom=function(S){return i[S]},d.getCustomClass=function(S){return i.hasOwnProperty(S)?i[S].plugin:null},d.remove=function(S){E.hasOwnProperty(S)&&delete E[S]},d.removeCustom=function(S){i.hasOwnProperty(S)&&delete i[S]},d.destroyCorePlugins=function(){for(var S in E)E.hasOwnProperty(S)&&delete E[S]},d.destroyCustomPlugins=function(){for(var S in i)i.hasOwnProperty(S)&&delete i[S]},m.exports=d},77332:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(8443),u=i(50792),l=i(74099),h=i(44603),r=i(39429),o=i(95540),p=i(37277),a=i(72905),v=i(8054),x=new d({Extends:u,initialize:function(y){u.call(this),this.game=y,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],y.isBooted||y.config.renderType===v.HEADLESS?this.boot():y.events.once(S.BOOT,this.boot,this)},boot:function(){var g,y,T,P,A,b,O,D=this.game.config,B=D.installGlobalPlugins;for(B=B.concat(this._pendingGlobal),g=0;g<B.length;g++)y=B[g],T=o(y,"key",null),P=o(y,"plugin",null),A=o(y,"start",!1),b=o(y,"mapping",null),O=o(y,"data",null),T&&(P?this.install(T,P,A,b,O):console.warn("Missing `plugin` for key: "+T));for(B=D.installScenePlugins,B=B.concat(this._pendingScene),g=0;g<B.length;g++)y=B[g],T=o(y,"key",null),P=o(y,"plugin",null),b=o(y,"mapping",null),T&&(P?this.installScenePlugin(T,P,b):console.warn("Missing `plugin` for key: "+T));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(S.DESTROY,this.destroy,this)},addToScene:function(g,y,T){var P,A,b,O=this.game,D=g.scene,B=g.settings.map,G=g.settings.isBooted;for(P=0;P<y.length;P++)A=y[P],O[A]?(g[A]=O[A],B.hasOwnProperty(A)&&(D[B[A]]=g[A])):A==="game"&&B.hasOwnProperty(A)&&(D[B[A]]=O);for(var V=0;V<T.length;V++)for(b=T[V],P=0;P<b.length;P++)if(A=b[P],!!p.hasCore(A)){var k=p.getCore(A),U=k.mapping,W=new k.plugin(D,this,U);g[U]=W,k.custom?D[U]=W:B.hasOwnProperty(U)&&(D[B[U]]=W),G&&W.boot()}for(b=this.plugins,P=0;P<b.length;P++){var X=b[P];X.mapping&&(D[X.mapping]=X.plugin)}},getDefaultScenePlugins:function(){var g=this.game.config.defaultPlugins;return g=g.concat(this.scenePlugins),g},installScenePlugin:function(g,y,T,P,A){if(A===void 0&&(A=!1),typeof y!="function"){console.warn("Invalid Scene Plugin: "+g);return}if(p.hasCore(g)||p.register(g,y,T,!0),this.scenePlugins.indexOf(g)===-1)this.scenePlugins.push(g);else if(!A&&p.hasCore(g)){console.warn("Scene Plugin key in use: "+g);return}if(P){var b=new y(P,this,g);P.sys[g]=b,T&&T!==""&&(P[T]=b),b.boot()}},install:function(g,y,T,P,A){if(T===void 0&&(T=!1),P===void 0&&(P=null),A===void 0&&(A=null),typeof y!="function")return console.warn("Invalid Plugin: "+g),null;if(p.hasCustom(g))return console.warn("Plugin key in use: "+g),null;if(P!==null&&(T=!0),!this.game.isBooted)this._pendingGlobal.push({key:g,plugin:y,start:T,mapping:P,data:A});else if(p.registerCustom(g,y,P,A),T)return this.start(g);return null},getIndex:function(g){for(var y=this.plugins,T=0;T<y.length;T++){var P=y[T];if(P.key===g)return T}return-1},getEntry:function(g){var y=this.getIndex(g);if(y!==-1)return this.plugins[y]},isActive:function(g){var y=this.getEntry(g);return y&&y.active},start:function(g,y){y===void 0&&(y=g);var T=this.getEntry(y);return T&&!T.active?(T.active=!0,T.plugin.start()):T||(T=this.createEntry(g,y)),T?T.plugin:null},createEntry:function(g,y){var T=p.getCustom(g);if(T){var P=new T.plugin(this);T={key:y,plugin:P,active:!0,mapping:T.mapping,data:T.data},this.plugins.push(T),P.init(T.data),P.start()}return T},stop:function(g){var y=this.getEntry(g);return y&&y.active&&(y.active=!1,y.plugin.stop()),this},get:function(g,y){y===void 0&&(y=!0);var T=this.getEntry(g);if(T)return T.plugin;var P=this.getClass(g);return P&&y?(T=this.createEntry(g,g),T?T.plugin:null):P||null},getClass:function(g){return p.getCustomClass(g)},removeGlobalPlugin:function(g){var y=this.getEntry(g);y&&a(this.plugins,y),p.removeCustom(g)},removeScenePlugin:function(g){a(this.scenePlugins,g),p.remove(g)},registerGameObject:function(g,y,T){return y&&r.register(g,y),T&&h.register(g,T),this},removeGameObject:function(g,y,T){return y===void 0&&(y=!0),T===void 0&&(T=!0),y&&r.remove(g),T&&h.remove(g),this},registerFileType:function(g,y,T){l.register(g,y),T&&T.sys.load&&(T.sys.load[g]=y)},destroy:function(){for(var g=0;g<this.plugins.length;g++)this.plugins[g].plugin.destroy();p.destroyCustomPlugins(),this.game.noReturn&&p.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});m.exports=x},45145:(m,E,i)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2025 Phaser Studio Inc.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var d=i(52018),S=i(83419),u=i(44594),l=new S({Extends:d,initialize:function(r,o,p){d.call(this,o),this.scene=r,this.systems=r.sys,this.pluginKey=p,r.sys.events.once(u.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});m.exports=l},18922:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={BasePlugin:i(52018),DefaultPlugins:i(42363),PluginCache:i(37277),PluginManager:i(77332),ScenePlugin:i(45145)}},63595:()=>{typeof HTMLVideoElement<"u"&&!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(m){const E=performance.now(),i=this.getVideoPlaybackQuality(),d=this.mozPresentedFrames||this.mozPaintedFrames||i.totalVideoFrames-i.droppedVideoFrames,S=(u,l)=>{const h=this.getVideoPlaybackQuality(),r=this.mozPresentedFrames||this.mozPaintedFrames||h.totalVideoFrames-h.droppedVideoFrames;if(r>d){const o=this.mozFrameDelay||h.totalFrameDelay-i.totalFrameDelay||0,p=l-u;m(l,{presentationTime:l+o*1e3,expectedDisplayTime:l+p,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+p/1e3,presentedFrames:r,processingDuration:o}),delete this._rvfcpolyfillmap[E]}else this._rvfcpolyfillmap[E]=requestAnimationFrame(o=>S(l,o))};return this._rvfcpolyfillmap[E]=requestAnimationFrame(u=>S(E,u)),E},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(m){cancelAnimationFrame(this._rvfcpolyfillmap[m]),delete this._rvfcpolyfillmap[m]})},10312:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},29795:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={DEFAULT:0,LINEAR:0,NEAREST:1};m.exports=E},68627:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(19715),S=i(32880),u=i(83419),l=i(8054),h=i(50792),r=i(92503),o=i(56373),p=i(97480),a=i(69442),v=i(8443),x=i(61340),g=new u({Extends:h,initialize:function(T){h.call(this);var P=T.config;this.config={clearBeforeRender:P.clearBeforeRender,backgroundColor:P.backgroundColor,antialias:P.antialias,roundPixels:P.roundPixels,transparent:P.transparent},this.game=T,this.type=l.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=T.canvas;var A={alpha:P.transparent,desynchronized:P.desynchronized,willReadFrequently:!1};this.gameContext=P.context?P.context:this.gameCanvas.getContext("2d",A),this.currentContext=this.gameContext,this.antialias=P.antialias,this.blendModes=o(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new x,this._tempMatrix2=new x,this._tempMatrix3=new x,this.isBooted=!1,this.init()},init:function(){var y=this.game;y.events.once(v.BOOT,function(){var T=this.config;if(!T.transparent){var P=this.gameContext,A=this.gameCanvas;P.fillStyle=T.backgroundColor.rgba,P.fillRect(0,0,A.width,A.height)}},this),y.textures.once(a.READY,this.boot,this)},boot:function(){var y=this.game,T=y.scale.baseSize;this.width=T.width,this.height=T.height,this.isBooted=!0,y.scale.on(p.RESIZE,this.onResize,this),this.resize(T.width,T.height)},onResize:function(y,T){(T.width!==this.width||T.height!==this.height)&&this.resize(T.width,T.height)},resize:function(y,T){this.width=y,this.height=T,this.emit(r.RESIZE,y,T)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(y){return this.currentContext.globalCompositeOperation=y,this},setContext:function(y){return this.currentContext=y||this.gameContext,this},setAlpha:function(y){return this.currentContext.globalAlpha=y,this},preRender:function(){var y=this.gameContext,T=this.config,P=this.width,A=this.height;y.globalAlpha=1,y.globalCompositeOperation="source-over",y.setTransform(1,0,0,1,0,0),this.emit(r.PRE_RENDER_CLEAR),T.clearBeforeRender&&(y.clearRect(0,0,P,A),T.transparent||(y.fillStyle=T.backgroundColor.rgba,y.fillRect(0,0,P,A))),y.save(),this.drawCount=0,this.emit(r.PRE_RENDER)},render:function(y,T,P){var A=T.length;this.emit(r.RENDER,y,P);var b=P.x,O=P.y,D=P.width,B=P.height,G=P.renderToTexture?P.context:y.sys.context;G.save(),this.game.scene.customViewports&&(G.beginPath(),G.rect(b,O,D,B),G.clip()),P.emit(d.PRE_RENDER,P),this.currentContext=G;var V=P.mask;V&&V.preRenderCanvas(this,null,P._maskCamera),P.transparent||(G.fillStyle=P.backgroundColor.rgba,G.fillRect(b,O,D,B)),G.globalAlpha=P.alpha,G.globalCompositeOperation="source-over",this.drawCount+=A,P.renderToTexture&&P.emit(d.PRE_RENDER,P),P.matrix.copyToContext(G);for(var k=0;k<A;k++){var U=T[k];U.mask&&U.mask.preRenderCanvas(this,U,P),U.renderCanvas(this,U,P),U.mask&&U.mask.postRenderCanvas(this,U,P)}G.setTransform(1,0,0,1,0,0),G.globalCompositeOperation="source-over",G.globalAlpha=1,P.flashEffect.postRenderCanvas(G),P.fadeEffect.postRenderCanvas(G),P.dirty=!1,V&&V.postRenderCanvas(this),G.restore(),P.renderToTexture&&(P.emit(d.POST_RENDER,P),P.renderToGame&&y.sys.context.drawImage(P.canvas,b,O)),P.emit(d.POST_RENDER,P)},postRender:function(){var y=this.gameContext;y.restore(),this.emit(r.POST_RENDER);var T=this.snapshotState;T.callback&&(S(this.gameCanvas,T),T.callback=null)},snapshotCanvas:function(y,T,P,A,b,O,D,B,G){P===void 0&&(P=!1),this.snapshotArea(A,b,O,D,T,B,G);var V=this.snapshotState;return V.getPixel=P,S(y,V),V.callback=null,this},snapshot:function(y,T,P){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,y,T,P)},snapshotArea:function(y,T,P,A,b,O,D){var B=this.snapshotState;return B.callback=b,B.type=O,B.encoder=D,B.getPixel=!1,B.x=y,B.y=T,B.width=Math.min(P,this.gameCanvas.width),B.height=Math.min(A,this.gameCanvas.height),this},snapshotPixel:function(y,T,P){return this.snapshotArea(y,T,1,1,P),this.snapshotState.getPixel=!0,this},batchSprite:function(y,T,P,A){var b=P.alpha*y.alpha;if(b!==0){var O=this.currentContext,D=this._tempMatrix1,B=this._tempMatrix2,G=T.canvasData,V=G.x,k=G.y,U=T.cutWidth,W=T.cutHeight,X=T.customPivot,_=T.source.resolution,Q=y.displayOriginX,j=y.displayOriginY,it=-Q+T.x,K=-j+T.y;if(y.isCropped){var J=y._crop;(J.flipX!==y.flipX||J.flipY!==y.flipY)&&T.updateCropUVs(J,y.flipX,y.flipY),U=J.cw,W=J.ch,V=J.cx,k=J.cy,it=-Q+J.x,K=-j+J.y,y.flipX&&(it>=0?it=-(it+U):it<0&&(it=Math.abs(it)-U)),y.flipY&&(K>=0?K=-(K+W):K<0&&(K=Math.abs(K)-W))}var Y=1,q=1;y.flipX&&(X||(it+=-T.realWidth+Q*2),Y=-1),y.flipY&&(X||(K+=-T.realHeight+j*2),q=-1);var $=y.x,et=y.y;if(P.roundPixels&&($=Math.floor($),et=Math.floor(et)),B.applyITRS($,et,y.rotation,y.scaleX*Y,y.scaleY*q),D.copyFrom(P.matrix),A?(D.multiplyWithOffset(A,-P.scrollX*y.scrollFactorX,-P.scrollY*y.scrollFactorY),B.e=$,B.f=et):(B.e-=P.scrollX*y.scrollFactorX,B.f-=P.scrollY*y.scrollFactorY),D.multiply(B),P.renderRoundPixels&&(D.e=Math.floor(D.e+.5),D.f=Math.floor(D.f+.5)),O.save(),D.setToContext(O),O.globalCompositeOperation=this.blendModes[y.blendMode],O.globalAlpha=b,O.imageSmoothingEnabled=!T.source.scaleMode,y.mask&&y.mask.preRenderCanvas(this,y,P),U>0&&W>0){var rt=U/_,at=W/_;P.roundPixels&&(it=Math.floor(it+.5),K=Math.floor(K+.5),rt+=.5,at+=.5),O.drawImage(T.source.image,V,k,U,W,it,K,rt,at)}y.mask&&y.mask.postRenderCanvas(this,y,P),O.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});m.exports=g},55830:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={CanvasRenderer:i(68627),GetBlendModes:i(56373),SetTransform:i(20926)}},56373:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(10312),S=i(89289),u=function(){var l=[],h=S.supportNewBlendModes,r="source-over";return l[d.NORMAL]=r,l[d.ADD]="lighter",l[d.MULTIPLY]=h?"multiply":r,l[d.SCREEN]=h?"screen":r,l[d.OVERLAY]=h?"overlay":r,l[d.DARKEN]=h?"darken":r,l[d.LIGHTEN]=h?"lighten":r,l[d.COLOR_DODGE]=h?"color-dodge":r,l[d.COLOR_BURN]=h?"color-burn":r,l[d.HARD_LIGHT]=h?"hard-light":r,l[d.SOFT_LIGHT]=h?"soft-light":r,l[d.DIFFERENCE]=h?"difference":r,l[d.EXCLUSION]=h?"exclusion":r,l[d.HUE]=h?"hue":r,l[d.SATURATION]=h?"saturation":r,l[d.COLOR]=h?"color":r,l[d.LUMINOSITY]=h?"luminosity":r,l[d.ERASE]="destination-out",l[d.SOURCE_IN]="source-in",l[d.SOURCE_OUT]="source-out",l[d.SOURCE_ATOP]="source-atop",l[d.DESTINATION_OVER]="destination-over",l[d.DESTINATION_IN]="destination-in",l[d.DESTINATION_OUT]="destination-out",l[d.DESTINATION_ATOP]="destination-atop",l[d.LIGHTER]="lighter",l[d.COPY]="copy",l[d.XOR]="xor",l};m.exports=u},20926:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91296),S=function(u,l,h,r,o){var p=r.alpha*h.alpha;if(p<=0)return!1;var a=d(h,r,o).calc;return l.globalCompositeOperation=u.blendModes[h.blendMode],l.globalAlpha=p,l.save(),a.setToContext(l),l.imageSmoothingEnabled=h.frame?!h.frame.source.scaleMode:u.antialias,!0};m.exports=S},63899:m=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="losewebgl"},6119:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="postrender"},48070:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="prerender"},15640:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="render"},8912:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="resize"},87124:m=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="restorewebgl"},92503:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={LOSE_WEBGL:i(63899),POST_RENDER:i(6119),PRE_RENDER:i(48070),RENDER:i(15640),RESIZE:i(8912),RESTORE_WEBGL:i(87124)}},36909:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Events:i(92503),Snapshot:i(89966)},m.exports.Canvas=i(55830),m.exports.WebGL=i(4159)},32880:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(27919),S=i(40987),u=i(95540),l=function(h,r){var o=u(r,"callback"),p=u(r,"type","image/png"),a=u(r,"encoder",.92),v=Math.abs(Math.round(u(r,"x",0))),x=Math.abs(Math.round(u(r,"y",0))),g=Math.floor(u(r,"width",h.width)),y=Math.floor(u(r,"height",h.height)),T=u(r,"getPixel",!1);if(T){var P=h.getContext("2d",{willReadFrequently:!1}),A=P.getImageData(v,x,1,1),b=A.data;o.call(null,new S(b[0],b[1],b[2],b[3]))}else if(v!==0||x!==0||g!==h.width||y!==h.height){var O=d.createWebGL(this,g,y),D=O.getContext("2d",{willReadFrequently:!0});g>0&&y>0&&D.drawImage(h,v,x,g,y,0,0,g,y);var B=new Image;B.onerror=function(){o.call(null),d.remove(O)},B.onload=function(){o.call(null,B),d.remove(O)},B.src=O.toDataURL(p,a)}else{var G=new Image;G.onerror=function(){o.call(null)},G.onload=function(){o.call(null,G)},G.src=h.toDataURL(p,a)}};m.exports=l},88815:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(27919),S=i(40987),u=i(95540),l=function(h,r){var o=h,p=u(r,"callback"),a=u(r,"type","image/png"),v=u(r,"encoder",.92),x=Math.abs(Math.round(u(r,"x",0))),g=Math.abs(Math.round(u(r,"y",0))),y=u(r,"getPixel",!1),T=u(r,"isFramebuffer",!1),P=T?u(r,"bufferWidth",1):o.drawingBufferWidth,A=T?u(r,"bufferHeight",1):o.drawingBufferHeight;if(y){var b=new Uint8Array(4),O=T?g:A-g;o.readPixels(x,O,1,1,o.RGBA,o.UNSIGNED_BYTE,b),p.call(null,new S(b[0],b[1],b[2],b[3]))}else{var D=Math.floor(u(r,"width",P)),B=Math.floor(u(r,"height",A)),G=D*B*4,V=new Uint8Array(G);o.readPixels(x,A-g-B,D,B,o.RGBA,o.UNSIGNED_BYTE,V);for(var k=d.createWebGL(this,D,B),U=k.getContext("2d",{willReadFrequently:!0}),W=U.getImageData(0,0,D,B),X=W.data,_=0;_<B;_++)for(var Q=0;Q<D;Q++){var j=((B-_-1)*D+Q)*4,it=T?G-(_*D+(D-Q))*4:(_*D+Q)*4;X[it+0]=V[j+0],X[it+1]=V[j+1],X[it+2]=V[j+2],X[it+3]=V[j+3]}U.putImageData(W,0,0);var K=new Image;K.onerror=function(){p.call(null),d.remove(k)},K.onload=function(){p.call(null,K),d.remove(k)},K.src=k.toDataURL(a,v)}};m.exports=l},89966:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Canvas:i(32880),WebGL:i(88815)}},7530:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(36060),u=i(90330),l=i(82264),h=i(95540),r=i(32302),o=i(63448),p=i(31302),a=i(58918),v=i(14811),x=i(92651),g=i(96569),y=i(56527),T=i(57516),P=i(43439),A=i(81041),b=i(12385),O=i(7589),D=i(95428),B=i(72905),G=new d({initialize:function(k){this.game=k.game,this.renderer=k,this.classes=new u([[S.UTILITY_PIPELINE,O],[S.MULTI_PIPELINE,T],[S.BITMAPMASK_PIPELINE,p],[S.SINGLE_PIPELINE,b],[S.ROPE_PIPELINE,A],[S.LIGHT_PIPELINE,g],[S.POINTLIGHT_PIPELINE,P],[S.MOBILE_PIPELINE,y]]),this.postPipelineClasses=new u,this.pipelines=new u,this.postPipelineInstances=[],this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(V,k,U){var W=this.renderer,X=this.renderTargets;this.frameInc=Math.floor(h(V,"frameInc",32));var _=W.width,Q=W.height,j=this.game.config.disablePreFX,it=this.game.config.disablePostFX;if(it||this.postPipelineClasses.setAll([[String(v.BARREL),a.Barrel],[String(v.BLOOM),a.Bloom],[String(v.BLUR),a.Blur],[String(v.BOKEH),a.Bokeh],[String(v.CIRCLE),a.Circle],[String(v.COLOR_MATRIX),a.ColorMatrix],[String(v.DISPLACEMENT),a.Displacement],[String(v.GLOW),a.Glow],[String(v.GRADIENT),a.Gradient],[String(v.PIXELATE),a.Pixelate],[String(v.SHADOW),a.Shadow],[String(v.SHINE),a.Shine],[String(v.VIGNETTE),a.Vignette],[String(v.WIPE),a.Wipe]]),!j){this.classes.set(S.FX_PIPELINE,x);for(var K=Math.min(_,Q),J=Math.ceil(K/this.frameInc),Y=1;Y<J;Y++){var q=Y*this.frameInc;X.push(new r(W,q,q)),X.push(new r(W,q,q)),X.push(new r(W,q,q)),this.maxDimension=q}X.push(new r(W,_,Q,1,0,!0,!0)),X.push(new r(W,_,Q,1,0,!0,!0)),X.push(new r(W,_,Q,1,0,!0,!0))}var $,et,rt=this,at=this.game;if(this.classes.each(function(vt,xt){$=rt.add(vt,new xt({game:at})),vt===S.UTILITY_PIPELINE&&(rt.UTILITY_PIPELINE=$,rt.fullFrame1=$.fullFrame1,rt.fullFrame2=$.fullFrame2,rt.halfFrame1=$.halfFrame1,rt.halfFrame2=$.halfFrame2)}),this.MULTI_PIPELINE=this.get(S.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(S.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(S.MOBILE_PIPELINE),j||(this.FX_PIPELINE=this.get(S.FX_PIPELINE)),V)for(et in V){var lt=V[et];$=new lt(at),$.name=et,$.isPostFX?this.postPipelineClasses.set(et,lt):this.has(et)||(this.classes.set(et,lt),this.add(et,$))}this.default=this.get(k),U&&!l.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(V){var k=this.get(V);return k&&(this.default=k),k},add:function(V,k){if(k.isPostFX){console.warn(V+" is a Post Pipeline. Use `addPostPipeline` instead");return}var U=this.pipelines,W=this.renderer;return U.has(V)?console.warn("Pipeline exists: "+V):(k.name=V,k.manager=this,U.set(V,k)),k.hasBooted||k.boot(),W.width!==0&&W.height!==0&&!k.isPreFX&&k.resize(W.width,W.height),k},addPostPipeline:function(V,k){this.postPipelineClasses.has(V)||this.postPipelineClasses.set(V,k)},flush:function(){this.current&&this.current.flush()},has:function(V){var k=this.pipelines;return typeof V=="string"?k.has(V):!!k.contains(V)},get:function(V){var k=this.pipelines;if(typeof V=="string")return k.get(V);if(k.contains(V))return V},getPostPipeline:function(V,k,U){var W=this.postPipelineClasses,X,_="",Q=typeof V;if(Q==="string"||Q==="number"?(X=W.get(V),_=V):Q==="function"?(W.contains(V)&&(X=V),_=V.name):Q==="object"&&(X=W.get(V.name),_=V.name),X){var j=new X(this.game,U);return j.name=_,k&&(j.gameObject=k),this.postPipelineInstances.push(j),j}},removePostPipeline:function(V){B(this.postPipelineInstances,V)},remove:function(V,k,U){k===void 0&&(k=!0),U===void 0&&(U=!0),this.pipelines.delete(V),k&&this.classes.delete(V),U&&this.postPipelineClasses.delete(V)},set:function(V,k,U){if(!V.isPostFX)return this.isCurrent(V,U)||(this.flush(),this.current&&this.current.unbind(),this.current=V,V.bind(U)),V.updateProjectionMatrix(),V.onBind(k),V},preBatch:function(V){if(V.hasPostPipeline){this.flush();for(var k=V.postPipelines,U=k.length-1;U>=0;U--){var W=k[U];W.active&&W.preBatch(V)}}},postBatch:function(V){if(V.hasPostPipeline){this.flush();for(var k=V.postPipelines,U=0;U<k.length;U++){var W=k[U];W.active&&W.postBatch(V)}}},preBatchCamera:function(V){if(V.hasPostPipeline){this.flush();for(var k=V.postPipelines,U=k.length-1;U>=0;U--){var W=k[U];W.active&&W.preBatch(V)}}},postBatchCamera:function(V){if(V.hasPostPipeline){this.flush();for(var k=V.postPipelines,U=0;U<k.length;U++){var W=k[U];W.active&&W.postBatch(V)}}},isCurrent:function(V,k){var U=this.renderer,W=this.current;return W&&!k&&(k=W.currentShader),!(W!==V||k.program!==U.currentProgram)},copyFrame:function(V,k,U,W,X){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(V,k,U,W,X),this},copyToGame:function(V){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(V),this},drawFrame:function(V,k,U,W){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(V,k,U,W),this},blendFrames:function(V,k,U,W,X){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(V,k,U,W,X),this},blendFramesAdditive:function(V,k,U,W,X){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(V,k,U,W,X),this},clearFrame:function(V,k){return this.UTILITY_PIPELINE.clearFrame(V,k),this},blitFrame:function(V,k,U,W,X,_){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(V,k,U,W,X,_),this},copyFrameRect:function(V,k,U,W,X,_,Q,j){return this.UTILITY_PIPELINE.copyFrameRect(V,k,U,W,X,_,Q,j),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(V){return this.UTILITY_PIPELINE.bind(V)},setFX:function(){return this.set(this.FX_PIPELINE)},restoreContext:function(){this.rebind(),this.pipelines.each(function(V,k){k.restoreContext()}),D(this.postPipelineInstances,function(V){V.restoreContext()})},rebind:function(V){V===void 0&&this.previous&&(V=this.previous);var k=this.renderer,U=k.gl;U.disable(U.DEPTH_TEST),U.disable(U.CULL_FACE),k.hasActiveStencilMask()?U.clear(U.DEPTH_BUFFER_BIT):(U.disable(U.STENCIL_TEST),U.clear(U.DEPTH_BUFFER_BIT|U.STENCIL_BUFFER_BIT)),U.viewport(0,0,k.width,k.height),k.currentProgram=null,k.setBlendMode(0,!0);var W=k.vaoExtension;W&&W.bindVertexArrayOES(null);var X=this.pipelines.entries;for(var _ in X)X[_].glReset=!0;V&&(this.current=V,V.rebind())},clear:function(){var V=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,V.currentProgram=null,V.setBlendMode(0,!0);var k=V.vaoExtension;k&&k.bindVertexArrayOES(null)},getRenderTarget:function(V){var k=this.renderTargets,U=3;if(V>this.maxDimension)return this.targetIndex=k.length-U,k[this.targetIndex];var W=(o(V,this.frameInc,0,!0)-1)*U;return this.targetIndex=W,k[W]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});m.exports=G},32302:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(92503),u=new d({initialize:function(h,r,o,p,a,v,x,g,y){p===void 0&&(p=1),a===void 0&&(a=0),v===void 0&&(v=!0),x===void 0&&(x=!1),g===void 0&&(g=!0),y===void 0&&(y=!0),this.renderer=h,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=p,this.minFilter=a,this.autoClear=v,this.autoResize=!0,this.hasDepthBuffer=g,this.forceClamp=y,this.init(r,o),x?this.renderer.on(S.RESIZE,this.resize,this):this.autoResize=!1},init:function(l,h){var r=this.renderer;this.texture=r.createTextureFromSource(null,l,h,this.minFilter,this.forceClamp),this.framebuffer=r.createFramebuffer(l,h,this.texture,this.hasDepthBuffer),this.width=l,this.height=h},setAutoResize:function(l){return l&&!this.autoResize?(this.renderer.on(S.RESIZE,this.resize,this),this.autoResize=!0):!l&&this.autoResize&&(this.renderer.off(S.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(l,h){if(this.autoResize&&this.willResize(l,h)){var r=this.renderer;r.deleteFramebuffer(this.framebuffer),r.deleteTexture(this.texture),this.texture=r.createTextureFromSource(null,l,h,this.minFilter,this.forceClamp),this.framebuffer=r.createFramebuffer(l,h,this.texture,this.hasDepthBuffer),this.width=l,this.height=h}return this},willResize:function(l,h){return typeof l!="number"||typeof h!="number"?!1:(l=Math.round(l*this.scale),h=Math.round(h*this.scale),l=Math.max(l,1),h=Math.max(h,1),l!==this.width||h!==this.height)},bind:function(l,h,r){l===void 0&&(l=!1);var o=this.renderer;if(l&&o.flush(),h&&r&&this.resize(h,r),o.pushFramebuffer(this.framebuffer,!1,!1),l&&this.adjustViewport(),this.autoClear){var p=this.renderer.gl;p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT)}o.clearStencilMask()},adjustViewport:function(){var l=this.renderer.gl;l.viewport(0,0,this.width,this.height),l.disable(l.SCISSOR_TEST)},clear:function(l,h,r,o){var p=this.renderer,a=p.gl;p.pushFramebuffer(this.framebuffer),l!==void 0&&h!==void 0&&r!==void 0&&o!==void 0?(a.enable(a.SCISSOR_TEST),a.scissor(l,h,r,o)):a.disable(a.SCISSOR_TEST),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT),p.popFramebuffer(),p.resetScissor()},unbind:function(l){l===void 0&&(l=!1);var h=this.renderer;return l&&h.flush(),h.popFramebuffer()},destroy:function(){var l=this.renderer;l.off(S.RESIZE,this.resize,this),l.deleteFramebuffer(this.framebuffer),l.deleteTexture(this.texture),this.renderer=null,this.framebuffer=null,this.texture=null}});m.exports=u},70554:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={getTintFromFloats:function(E,i,d,S){var u=(E*255|0)&255,l=(i*255|0)&255,h=(d*255|0)&255,r=(S*255|0)&255;return(r<<24|u<<16|l<<8|h)>>>0},getTintAppendFloatAlpha:function(E,i){var d=(i*255|0)&255;return(d<<24|E)>>>0},getTintAppendFloatAlphaAndSwap:function(E,i){var d=(E>>16|0)&255,S=(E>>8|0)&255,u=(E|0)&255,l=(i*255|0)&255;return(l<<24|u<<16|S<<8|d)>>>0},getFloatsFromUintRGB:function(E){var i=(E>>16|0)&255,d=(E>>8|0)&255,S=(E|0)&255;return[i/255,d/255,S/255]},checkShaderMax:function(E,i){var d=Math.min(16,E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS));return!i||i===-1?d:Math.min(d,i)},parseFragmentShaderMaxTextures:function(E,i){if(!E)return"";for(var d="",S=0;S<i;S++)S>0&&(d+=`
	else `),S<i-1&&(d+="if (outTexId < "+S+".5)"),d+=`
	{`,d+=`
		texture = texture2D(uMainSampler[`+S+"], outTexCoord);",d+=`
	}`;return E=E.replace(/%count%/gi,i.toString()),E.replace(/%forloop%/gi,d)},setGlowQuality:function(E,i,d,S){return d===void 0&&(d=i.config.glowFXQuality),S===void 0&&(S=i.config.glowFXDistance),E=E.replace(/__SIZE__/gi,(1/d/S).toFixed(7)),E=E.replace(/__DIST__/gi,S.toFixed(0)+".0"),E}}},29100:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(62644),u=i(50792),l=i(77085),h=i(95540),r=i(37867),o=i(92503),p=i(32302),a=i(70554),v=i(38683),x=new d({Extends:u,initialize:function(y){u.call(this);var T=y.game,P=T.renderer,A=P.gl;this.name=h(y,"name","WebGLPipeline"),this.game=T,this.renderer=P,this.manager,this.gl=A,this.view=T.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=h(y,"topology",A.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=h(y,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=y,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[],this.resizeUniform=h(y,"resizeUniform","")},boot:function(){var g,y=this.gl,T=this.config,P=this.renderer;this.isPostFX||(this.projectionMatrix=new r().identity());var A=this.renderTargets,b=h(T,"renderTarget",!1);typeof b=="boolean"&&b&&(b=1);var O=P.width,D=P.height;if(typeof b=="number")for(g=0;g<b;g++)A.push(new p(P,O,D,1,0,!0));else if(Array.isArray(b))for(g=0;g<b.length;g++){var B=h(b[g],"scale",1),G=h(b[g],"minFilter",0),V=h(b[g],"autoClear",1),k=h(b[g],"autoResize",!1),U=h(b[g],"width",null),W=h(b[g],"height",U);U?A.push(new p(P,U,W,1,G,V,k)):A.push(new p(P,O,D,B,G,V,k))}A.length&&(this.currentRenderTarget=A[0]),this.setShadersFromConfig(T);var X=this.shaders,_=0;for(g=0;g<X.length;g++)X[g].vertexSize>_&&(_=X[g].vertexSize);var Q=h(T,"batchSize",P.config.batchSize);this.vertexCapacity=Q*6;var j=new ArrayBuffer(this.vertexCapacity*_);this.vertexData=j,this.bytes=new Uint8Array(j),this.vertexViewF32=new Float32Array(j),this.vertexViewU32=new Uint32Array(j);var it=h(T,"vertices",null);for(it?(this.vertexViewF32.set(it),this.vertexBuffer=P.createVertexBuffer(j,y.STATIC_DRAW)):this.vertexBuffer=P.createVertexBuffer(j.byteLength,y.DYNAMIC_DRAW),this.setVertexBuffer(),g=X.length-1;g>=0;g--)X[g].rebind();this.hasBooted=!0,P.on(o.RESIZE,this.resize,this),P.on(o.PRE_RENDER,this.onPreRender,this),P.on(o.RENDER,this.onRender,this),P.on(o.POST_RENDER,this.onPostRender,this),this.emit(l.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(g,y,T){var P=this.renderer;if(g!==this.currentShader||P.currentProgram!==this.currentShader.program){this.flush();var A=this.setVertexBuffer(T);A&&!y&&(y=!0),g.bind(y,!1),this.currentShader=g}return this},getShaderByName:function(g){for(var y=this.shaders,T=0;T<y.length;T++)if(y[T].name===g)return y[T]},setShadersFromConfig:function(g){var y,T=this.shaders,P=this.renderer;for(y=0;y<T.length;y++)T[y].destroy();var A="vertShader",b="fragShader",O="attributes",D=h(g,A,null),B=a.parseFragmentShaderMaxTextures(h(g,b,null),P.maxTextures),G=h(g,O,null),V=h(g,"shaders",[]),k=V.length;if(k===0)D&&B&&(this.shaders=[new v(this,"default",D,B,S(G))]);else{var U=[];for(y=0;y<k;y++){var W=V[y],X,_,Q,j;if(typeof W=="string"?(X="default",_=D,Q=a.parseFragmentShaderMaxTextures(W,P.maxTextures),j=G):(X=h(W,"name","default"),_=h(W,A,D),Q=a.parseFragmentShaderMaxTextures(h(W,b,B),P.maxTextures),j=h(W,O,G)),X==="default"){var it=Q.split(`
`),K=it[0].trim();K.indexOf("#define SHADER_NAME")>-1&&(X=K.substring(20))}_&&Q&&U.push(new v(this,X,_,Q,S(j)))}this.shaders=U}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(g){return this.currentBatch={start:this.vertexCount,count:0,texture:[g],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=g,this.batch.push(this.currentBatch),0},addTextureToBatch:function(g){var y=this.currentBatch;y&&(y.texture.push(g),y.unit++,y.maxUnit++)},pushBatch:function(g){if(!this.currentBatch||this.forceZero&&g!==this.currentTexture)return this.createBatch(g);if(g===this.currentTexture)return this.currentUnit;var y=this.currentBatch,T=y.texture.indexOf(g);return T===-1?y.texture.length===this.renderer.maxTextures?this.createBatch(g):(y.unit++,y.maxUnit++,y.texture.push(g),this.currentUnit=y.unit,this.currentTexture=g,y.unit):(this.currentUnit=T,this.currentTexture=g,T)},setGameObject:function(g,y){return y===void 0&&(y=g.frame),this.pushBatch(y.source.glTexture)},shouldFlush:function(g){return g===void 0&&(g=0),this.vertexCount+g>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(g,y){(g!==this.width||y!==this.height)&&this.flush(),this.width=g,this.height=y;for(var T=this.renderTargets,P=0;P<T.length;P++)T[P].resize(g,y);return this.setProjectionMatrix(g,y),this.resizeUniform&&this.set2f(this.resizeUniform,g,y),this.emit(l.RESIZE,g,y,this),this.onResize(g,y),this},setProjectionMatrix:function(g,y){var T=this.projectionMatrix;if(!T)return this;this.projectionWidth=g,this.projectionHeight=y,T.ortho(0,g,y,0,-1e3,1e3);for(var P=this.shaders,A="uProjectionMatrix",b=0;b<P.length;b++){var O=P[b];O.hasUniform(A)&&(O.resetUniform(A),O.setMatrix4fv(A,!1,T.val,O))}return this},flipProjectionMatrix:function(g){g===void 0&&(g=!0);var y=this.projectionMatrix;if(!y)return this;var T=this.projectionWidth,P=this.projectionHeight;g?y.ortho(0,T,0,P,-1e3,1e3):y.ortho(0,T,P,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,y.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var g=this.renderer.projectionWidth,y=this.renderer.projectionHeight;(this.projectionWidth!==g||this.projectionHeight!==y)&&this.setProjectionMatrix(g,y)}},bind:function(g){if(g===void 0&&(g=this.currentShader),this.glReset)return this.rebind(g);var y=!1,T=this.gl;return T.getParameter(T.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(T.bindBuffer(T.ARRAY_BUFFER,this.vertexBuffer.webGLBuffer),this.activeBuffer=this.vertexBuffer,y=!0),g.bind(y),this.currentShader=g,this.activeTextures.length=0,this.emit(l.BIND,this,g),this.onActive(g),this},rebind:function(g){this.activeBuffer=null,this.setVertexBuffer();for(var y=this.shaders,T=y.length-1;T>=0;T--){var P=y[T].rebind();(!g||P===g)&&(this.currentShader=P)}return this.activeTextures.length=0,this.emit(l.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},restoreContext:function(){var g=this.shaders,y=!!this.vertexBuffer;this.activeBuffer=null,this.activeTextures.length=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,y&&this.setVertexBuffer();for(var T=0;T<g.length;T++){var P=g[T];P.syncUniforms(),y&&P.rebind()}},setVertexBuffer:function(g){if(g===void 0&&(g=this.vertexBuffer),g!==this.activeBuffer){var y=this.gl;return this.gl.bindBuffer(y.ARRAY_BUFFER,g.webGLBuffer),this.activeBuffer=g,!0}return!1},preBatch:function(g){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(g),this},postBatch:function(g){return this.onDraw(this.currentRenderTarget),this.onPostBatch(g),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(g){if(g===void 0&&(g=!1),this.vertexCount>0){this.emit(l.BEFORE_FLUSH,this,g),this.onBeforeFlush(g);var y=this.gl,T=this.vertexCount,P=this.currentShader.vertexSize,A=this.topology;if(this.active){this.setVertexBuffer(),T===this.vertexCapacity?y.bufferData(y.ARRAY_BUFFER,this.vertexData,y.DYNAMIC_DRAW):y.bufferSubData(y.ARRAY_BUFFER,0,this.bytes.subarray(0,T*P));var b,O,D,B=this.batch,G=this.activeTextures;if(this.forceZero)for(G[0]||y.activeTexture(y.TEXTURE0),b=0;b<B.length;b++)O=B[b],D=O.texture[0],G[0]!==D&&(y.bindTexture(y.TEXTURE_2D,D.webGLTexture),G[0]=D),y.drawArrays(A,O.start,O.count);else for(b=0;b<B.length;b++){O=B[b];for(var V=0;V<=O.maxUnit;V++)D=O.texture[V],G[V]!==D&&(y.activeTexture(y.TEXTURE0+V),y.bindTexture(y.TEXTURE_2D,D.webGLTexture),G[V]=D);y.drawArrays(A,O.start,O.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(l.AFTER_FLUSH,this,g),this.onAfterFlush(g)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(g,y,T,P,A,b,O){var D=this.vertexViewF32,B=this.vertexViewU32,G=this.vertexCount*this.currentShader.vertexComponentCount-1;D[++G]=g,D[++G]=y,D[++G]=T,D[++G]=P,D[++G]=A,D[++G]=b,B[++G]=O,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(g,y,T,P,A,b,O,D,B,G,V,k,U,W,X,_,Q,j,it,K){K===void 0&&(K=this.currentUnit);var J=!1;this.shouldFlush(6)&&(this.flush(),J=!0),this.currentBatch||(K=this.setTexture2D(it));var Y=this.vertexViewF32,q=this.vertexViewU32,$=this.vertexCount*this.currentShader.vertexComponentCount-1;return Y[++$]=y,Y[++$]=T,Y[++$]=G,Y[++$]=V,Y[++$]=K,Y[++$]=j,q[++$]=W,Y[++$]=P,Y[++$]=A,Y[++$]=G,Y[++$]=U,Y[++$]=K,Y[++$]=j,q[++$]=_,Y[++$]=b,Y[++$]=O,Y[++$]=k,Y[++$]=U,Y[++$]=K,Y[++$]=j,q[++$]=Q,Y[++$]=y,Y[++$]=T,Y[++$]=G,Y[++$]=V,Y[++$]=K,Y[++$]=j,q[++$]=W,Y[++$]=b,Y[++$]=O,Y[++$]=k,Y[++$]=U,Y[++$]=K,Y[++$]=j,q[++$]=Q,Y[++$]=D,Y[++$]=B,Y[++$]=k,Y[++$]=V,Y[++$]=K,Y[++$]=j,q[++$]=X,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(g),J},batchTri:function(g,y,T,P,A,b,O,D,B,G,V,k,U,W,X,_,Q){Q===void 0&&(Q=this.currentUnit);var j=!1;this.shouldFlush(3)&&(this.flush(),j=!0),this.currentBatch||(Q=this.setTexture2D(_));var it=this.vertexViewF32,K=this.vertexViewU32,J=this.vertexCount*this.currentShader.vertexComponentCount-1;return it[++J]=y,it[++J]=T,it[++J]=D,it[++J]=B,it[++J]=Q,it[++J]=X,K[++J]=k,it[++J]=P,it[++J]=A,it[++J]=D,it[++J]=V,it[++J]=Q,it[++J]=X,K[++J]=U,it[++J]=b,it[++J]=O,it[++J]=G,it[++J]=V,it[++J]=Q,it[++J]=X,K[++J]=W,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(g),j},drawFillRect:function(g,y,T,P,A,b,O,D){O===void 0&&(O=this.renderer.whiteTexture),D===void 0&&(D=!0),g=Math.floor(g),y=Math.floor(y);var B=Math.floor(g+T),G=Math.floor(y+P),V=this.setTexture2D(O),k=a.getTintAppendFloatAlphaAndSwap(A,b),U=0,W=0,X=1,_=1;D&&(W=1,_=0),this.batchQuad(null,g,y,g,G,B,G,B,y,U,W,X,_,k,k,k,k,0,O,V)},setTexture2D:function(g){return g===void 0&&(g=this.renderer.whiteTexture),this.pushBatch(g)},bindTexture:function(g,y){y===void 0&&(y=0);var T=this.gl;return T.activeTexture(T.TEXTURE0+y),T.bindTexture(T.TEXTURE_2D,g.webGLTexture),this},bindRenderTarget:function(g,y){return this.bindTexture(g.texture,y)},setTime:function(g,y){return this.set1f(g,this.game.loop.getDuration(),y),this},setBoolean:function(g,y,T){return T===void 0&&(T=this.currentShader),T.setBoolean(g,y),this},set1f:function(g,y,T){return T===void 0&&(T=this.currentShader),T.set1f(g,y),this},set2f:function(g,y,T,P){return P===void 0&&(P=this.currentShader),P.set2f(g,y,T),this},set3f:function(g,y,T,P,A){return A===void 0&&(A=this.currentShader),A.set3f(g,y,T,P),this},set4f:function(g,y,T,P,A,b){return b===void 0&&(b=this.currentShader),b.set4f(g,y,T,P,A),this},set1fv:function(g,y,T){return T===void 0&&(T=this.currentShader),T.set1fv(g,y),this},set2fv:function(g,y,T){return T===void 0&&(T=this.currentShader),T.set2fv(g,y),this},set3fv:function(g,y,T){return T===void 0&&(T=this.currentShader),T.set3fv(g,y),this},set4fv:function(g,y,T){return T===void 0&&(T=this.currentShader),T.set4fv(g,y),this},set1iv:function(g,y,T){return T===void 0&&(T=this.currentShader),T.set1iv(g,y),this},set2iv:function(g,y,T){return T===void 0&&(T=this.currentShader),T.set2iv(g,y),this},set3iv:function(g,y,T){return T===void 0&&(T=this.currentShader),T.set3iv(g,y),this},set4iv:function(g,y,T){return T===void 0&&(T=this.currentShader),T.set4iv(g,y),this},set1i:function(g,y,T){return T===void 0&&(T=this.currentShader),T.set1i(g,y),this},set2i:function(g,y,T,P){return P===void 0&&(P=this.currentShader),P.set2i(g,y,T),this},set3i:function(g,y,T,P,A){return A===void 0&&(A=this.currentShader),A.set3i(g,y,T,P),this},set4i:function(g,y,T,P,A,b){return b===void 0&&(b=this.currentShader),b.set4i(g,y,T,P,A),this},setMatrix2fv:function(g,y,T,P){return P===void 0&&(P=this.currentShader),P.setMatrix2fv(g,y,T),this},setMatrix3fv:function(g,y,T,P){return P===void 0&&(P=this.currentShader),P.setMatrix3fv(g,y,T),this},setMatrix4fv:function(g,y,T,P){return P===void 0&&(P=this.currentShader),P.setMatrix4fv(g,y,T),this},destroy:function(){this.emit(l.DESTROY,this);var g,y=this.shaders;for(g=0;g<y.length;g++)y[g].destroy();var T=this.renderTargets;for(g=0;g<T.length;g++)T[g].destroy();var P=this.renderer;return P.deleteBuffer(this.vertexBuffer),P.off(o.RESIZE,this.resize,this),P.off(o.PRE_RENDER,this.onPreRender,this),P.off(o.RENDER,this.onRender,this),P.off(o.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});m.exports=x},74797:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(95428),S=i(72905),u=i(19715),l=i(83419),h=i(8054),r=i(50792),o=i(92503),p=i(50030),a=i(37867),v=i(29747),x=i(7530),g=i(32302),y=i(97480),T=i(69442),P=i(70554),A=i(88815),b=i(26128),O=i(1482),D=i(82751),B=i(84387),G=i(93567),V=i(57183),k=new l({Extends:r,initialize:function(W){r.call(this);var X=W.config,_={alpha:X.transparent,desynchronized:X.desynchronized,depth:!0,antialias:X.antialiasGL,premultipliedAlpha:X.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:X.failIfMajorPerformanceCaveat,powerPreference:X.powerPreference,preserveDrawingBuffer:X.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:X.clearBeforeRender,antialias:X.antialias,backgroundColor:X.backgroundColor,contextCreation:_,roundPixels:X.roundPixels,maxTextures:X.maxTextures,maxTextureSize:X.maxTextureSize,batchSize:X.batchSize,maxLights:X.maxLights,mipmapFilter:X.mipmapFilter},this.game=W,this.type=h.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=W.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.glBufferWrappers=[],this.glProgramWrappers=[],this.glTextureWrappers=[],this.glFramebufferWrappers=[],this.glAttribLocationWrappers=[],this.glUniformLocationWrappers=[],this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=v,this.contextRestoredHandler=v,this.previousContextLostHandler=v,this.previousContextRestoredHandler=v,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.normalTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(U){var W,X=this.game,_=this.canvas,Q=U.backgroundColor;if(X.config.context?W=X.config.context:W=_.getContext("webgl",U.contextCreation)||_.getContext("experimental-webgl",U.contextCreation),!W||W.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=W,this.setExtensions(),this.setContextHandlers(),X.context=W;for(var j=0;j<=27;j++)this.blendModes.push({func:[W.ONE,W.ONE_MINUS_SRC_ALPHA],equation:W.FUNC_ADD});this.blendModes[1].func=[W.ONE,W.DST_ALPHA],this.blendModes[2].func=[W.DST_COLOR,W.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[W.ONE,W.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[W.ZERO,W.ONE_MINUS_SRC_ALPHA],equation:W.FUNC_REVERSE_SUBTRACT},this.glFormats=[W.BYTE,W.SHORT,W.UNSIGNED_BYTE,W.UNSIGNED_SHORT,W.FLOAT],this.glFuncMap={mat2:{func:W.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:W.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:W.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:W.uniform1f,length:1},"1fv":{func:W.uniform1fv,length:1},"1i":{func:W.uniform1i,length:1},"1iv":{func:W.uniform1iv,length:1},"2f":{func:W.uniform2f,length:2},"2fv":{func:W.uniform2fv,length:1},"2i":{func:W.uniform2i,length:2},"2iv":{func:W.uniform2iv,length:1},"3f":{func:W.uniform3f,length:3},"3fv":{func:W.uniform3fv,length:1},"3i":{func:W.uniform3i,length:3},"3iv":{func:W.uniform3iv,length:1},"4f":{func:W.uniform4f,length:4},"4fv":{func:W.uniform4fv,length:1},"4i":{func:W.uniform4i,length:4},"4iv":{func:W.uniform4iv,length:1}},(!U.maxTextures||U.maxTextures===-1)&&(U.maxTextures=W.getParameter(W.MAX_TEXTURE_IMAGE_UNITS)),U.maxTextureSize||(U.maxTextureSize=W.getParameter(W.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),W.disable(W.DEPTH_TEST),W.disable(W.CULL_FACE),W.enable(W.BLEND),W.clearColor(Q.redGL,Q.greenGL,Q.blueGL,Q.alphaGL),W.clear(W.COLOR_BUFFER_BIT);var it=["NEAREST","LINEAR","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_LINEAR"];return it.indexOf(U.mipmapFilter)!==-1&&(this.mipmapFilter=W[U.mipmapFilter]),this.maxTextures=P.checkShaderMax(W,U.maxTextures),this.textureIndexes=[],this.createTemporaryTextures(),this.pipelines=new x(this),this.setBlendMode(h.BlendModes.NORMAL),this.projectionMatrix=new a().identity(),X.textures.once(T.READY,this.boot,this),this},boot:function(){var U=this.game,W=this.pipelines,X=U.scale.baseSize,_=X.width,Q=X.height;this.width=_,this.height=Q,this.isBooted=!0,this.renderTarget=new g(this,_,Q,1,0,!0,!0),this.maskTarget=new g(this,_,Q,1,0,!0,!0),this.maskSource=new g(this,_,Q,1,0,!0,!0);var j=U.config;W.boot(j.pipeline,j.defaultPipeline,j.autoMobilePipeline),this.blankTexture=U.textures.getFrame("__DEFAULT").glTexture,this.normalTexture=U.textures.getFrame("__NORMAL").glTexture,this.whiteTexture=U.textures.getFrame("__WHITE").glTexture;var it=this.gl;it.bindFramebuffer(it.FRAMEBUFFER,null),it.enable(it.SCISSOR_TEST),U.scale.on(y.RESIZE,this.onResize,this),this.resize(_,Q)},setExtensions:function(){var U=this.gl,W=U.getSupportedExtensions();this.supportedExtensions=W;var X="ANGLE_instanced_arrays";this.instancedArraysExtension=W.indexOf(X)>-1?U.getExtension(X):null;var _="OES_vertex_array_object";this.vaoExtension=W.indexOf(_)>-1?U.getExtension(_):null},setContextHandlers:function(U,W){this.previousContextLostHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextLostHandler,!1),this.previousContextRestoredHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextRestoredHandler,!1),typeof U=="function"?this.contextLostHandler=U.bind(this):this.contextLostHandler=this.dispatchContextLost.bind(this),typeof W=="function"?this.contextRestoredHandler=W.bind(this):this.contextRestoredHandler=this.dispatchContextRestored.bind(this),this.canvas.addEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),this.previousContextLostHandler=this.contextLostHandler,this.previousContextRestoredHandler=this.contextRestoredHandler},dispatchContextLost:function(U){this.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),this.emit(o.LOSE_WEBGL,this),U.preventDefault()},dispatchContextRestored:function(U){var W=this.gl;if(W.isContextLost()){console&&console.log("WebGL Context restored, but context is still lost");return}this.currentProgram=null,this.currentFramebuffer=null,this.setBlendMode(h.BlendModes.NORMAL),W.disable(W.BLEND),W.disable(W.DEPTH_TEST),W.enable(W.CULL_FACE),this.compression=this.getCompressedTextures();var X=function(_){_.createResource()};d(this.glTextureWrappers,X),d(this.glBufferWrappers,X),d(this.glFramebufferWrappers,X),d(this.glProgramWrappers,X),d(this.glAttribLocationWrappers,X),d(this.glUniformLocationWrappers,X),this.createTemporaryTextures(),this.pipelines.restoreContext(),this.resize(this.game.scale.baseSize.width,this.game.scale.baseSize.height),this.setExtensions(),this.contextLost=!1,console&&console.warn("WebGL Context restored. Renderer running again."),this.emit(o.RESTORE_WEBGL,this),U.preventDefault()},createTemporaryTextures:function(){for(var U=this.gl,W=0;W<this.maxTextures;W++){var X=U.createTexture();U.activeTexture(U.TEXTURE0+W),U.bindTexture(U.TEXTURE_2D,X),U.texImage2D(U.TEXTURE_2D,0,U.RGBA,1,1,0,U.RGBA,U.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(W)}},captureFrame:function(U,W){},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(U,W,X){},stopCapture:function(){},onCapture:function(U){},onResize:function(U,W){(W.width!==this.width||W.height!==this.height)&&this.resize(W.width,W.height)},beginCapture:function(U,W){U===void 0&&(U=this.width),W===void 0&&(W=this.height),this.renderTarget.bind(!0,U,W),this.setProjectionMatrix(U,W)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(U,W){var X=this.gl;return this.width=U,this.height=W,this.setProjectionMatrix(U,W),X.viewport(0,0,U,W),this.drawingBufferHeight=X.drawingBufferHeight,X.scissor(0,X.drawingBufferHeight-W,U,W),this.defaultScissor[2]=U,this.defaultScissor[3]=W,this.emit(o.RESIZE,U,W),this},getCompressedTextures:function(){var U="WEBGL_compressed_texture_",W="WEBKIT_"+U,X="EXT_texture_compression_",_=function(j,it){var K=j.getExtension(U+it)||j.getExtension(W+it)||j.getExtension(X+it);if(K){var J={};for(var Y in K)J[K[Y]]=Y;return J}},Q=this.gl;return{ETC:_(Q,"etc"),ETC1:_(Q,"etc1"),ATC:_(Q,"atc"),ASTC:_(Q,"astc"),BPTC:_(Q,"bptc"),RGTC:_(Q,"rgtc"),PVRTC:_(Q,"pvrtc"),S3TC:_(Q,"s3tc"),S3TCSRGB:_(Q,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(U,W){var X=this.compression[U.toUpperCase()];if(W in X)return X[W]},supportsCompressedTexture:function(U,W){var X=this.compression[U.toUpperCase()];return X?W?W in X:!0:!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(U,W){return(U!==this.projectionWidth||W!==this.projectionHeight)&&(this.projectionWidth=U,this.projectionHeight=W,this.projectionMatrix.ortho(0,U,W,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(U){return this.supportedExtensions?this.supportedExtensions.indexOf(U):!1},getExtension:function(U){return this.hasExtension(U)?(U in this.extensions||(this.extensions[U]=this.gl.getExtension(U)),this.extensions[U]):null},flush:function(){this.pipelines.flush()},pushScissor:function(U,W,X,_,Q){Q===void 0&&(Q=this.drawingBufferHeight);var j=this.scissorStack,it=[U,W,X,_];return j.push(it),this.setScissor(U,W,X,_,Q),this.currentScissor=it,it},setScissor:function(U,W,X,_,Q){Q===void 0&&(Q=this.drawingBufferHeight);var j=this.gl,it=this.currentScissor,K=X>0&&_>0;if(it&&K){var J=it[0],Y=it[1],q=it[2],$=it[3];K=J!==U||Y!==W||q!==X||$!==_}K&&(this.flush(),j.scissor(U,Q-W-_,X,_))},resetScissor:function(){var U=this.gl;U.enable(U.SCISSOR_TEST);var W=this.currentScissor;if(W){var X=W[0],_=W[1],Q=W[2],j=W[3];Q>0&&j>0&&U.scissor(X,this.drawingBufferHeight-_-j,Q,j)}},popScissor:function(){var U=this.scissorStack;U.pop();var W=U[U.length-1];W&&this.setScissor(W[0],W[1],W[2],W[3]),this.currentScissor=W},hasActiveStencilMask:function(){var U=this.currentMask.mask,W=this.currentCameraMask.mask;return U&&U.isStencil||W&&W.isStencil},resetViewport:function(){var U=this.gl;U.viewport(0,0,this.width,this.height),this.drawingBufferHeight=U.drawingBufferHeight},setBlendMode:function(U,W){W===void 0&&(W=!1);var X=this.gl,_=this.blendModes[U];return W||U!==h.BlendModes.SKIP_CHECK&&this.currentBlendMode!==U?(this.flush(),X.enable(X.BLEND),X.blendEquation(_.equation),_.func.length>2?X.blendFuncSeparate(_.func[0],_.func[1],_.func[2],_.func[3]):X.blendFunc(_.func[0],_.func[1]),this.currentBlendMode=U,!0):!1},addBlendMode:function(U,W){var X=this.blendModes.push({func:U,equation:W});return X-1},updateBlendMode:function(U,W,X){return this.blendModes[U]&&(this.blendModes[U].func=W,X&&(this.blendModes[U].equation=X)),this},removeBlendMode:function(U){return U>17&&this.blendModes[U]&&this.blendModes.splice(U,1),this},pushFramebuffer:function(U,W,X,_,Q){return U===this.currentFramebuffer?this:(this.fboStack.push(U),this.setFramebuffer(U,W,X,_,Q))},setFramebuffer:function(U,W,X,_,Q){if(W===void 0&&(W=!1),X===void 0&&(X=!0),_===void 0&&(_=null),Q===void 0&&(Q=!1),U===this.currentFramebuffer)return this;var j=this.gl,it=this.width,K=this.height;return U&&U.renderTexture&&X?(it=U.renderTexture.width,K=U.renderTexture.height):this.flush(),U?j.bindFramebuffer(j.FRAMEBUFFER,U.webGLFramebuffer):j.bindFramebuffer(j.FRAMEBUFFER,null),X&&j.viewport(0,0,it,K),_&&j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,_.webGLTexture,0),Q&&(j.clearColor(0,0,0,0),j.clear(j.COLOR_BUFFER_BIT)),W&&(U?(this.drawingBufferHeight=K,this.pushScissor(0,0,it,K)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=U,this},popFramebuffer:function(U,W){U===void 0&&(U=!1),W===void 0&&(W=!0);var X=this.fboStack;X.pop();var _=X[X.length-1];return _||(_=null),this.setFramebuffer(_,U,W),_},restoreFramebuffer:function(U,W){U===void 0&&(U=!1),W===void 0&&(W=!0);var X=this.fboStack,_=X[X.length-1];_||(_=null),this.currentFramebuffer=null,this.setFramebuffer(_,U,W)},setProgram:function(U){return U!==this.currentProgram?(this.flush(),this.gl.useProgram(U.webGLProgram),this.currentProgram=U,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram.webGLProgramWrapper),this},createTextureFromSource:function(U,W,X,_,Q){Q===void 0&&(Q=!1);var j=this.gl,it=j.NEAREST,K=j.NEAREST,J=j.CLAMP_TO_EDGE,Y=null;W=U?U.width:W,X=U?U.height:X;var q=p(W,X);if(q&&!Q&&(J=j.REPEAT),_===h.ScaleModes.LINEAR&&this.config.antialias){var $=U&&U.compressed,et=!$&&q||$&&U.mipmaps.length>1;it=this.mipmapFilter&&et?this.mipmapFilter:j.LINEAR,K=j.LINEAR}return!U&&typeof W=="number"&&typeof X=="number"?Y=this.createTexture2D(0,it,K,J,J,j.RGBA,null,W,X):Y=this.createTexture2D(0,it,K,J,J,j.RGBA,U),Y},createTexture2D:function(U,W,X,_,Q,j,it,K,J,Y,q,$){typeof K!="number"&&(K=it?it.width:1),typeof J!="number"&&(J=it?it.height:1);var et=new D(this.gl,U,W,X,_,Q,j,it,K,J,Y,q,$);return this.glTextureWrappers.push(et),et},createFramebuffer:function(U,W,X,_){this.currentFramebuffer=null;var Q=new B(this.gl,U,W,X,_);return this.glFramebufferWrappers.push(Q),Q},beginBitmapMask:function(U,W){var X=this.gl;X&&(this.flush(),this.maskTarget.bind(!0),this.currentCameraMask.mask!==U&&(this.currentMask.mask=U,this.currentMask.camera=W))},drawBitmapMask:function(U,W,X){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),U.renderWebGL(this,U,W),this.maskSource.unbind(!0),this.maskTarget.unbind();var _=this.gl,Q=this.getCurrentStencilMask();Q?(_.enable(_.STENCIL_TEST),Q.mask.applyStencil(this,Q.camera,!0)):this.currentMask.mask=null,this.pipelines.set(X),_.activeTexture(_.TEXTURE0),_.bindTexture(_.TEXTURE_2D,this.maskTarget.texture.webGLTexture),_.activeTexture(_.TEXTURE1),_.bindTexture(_.TEXTURE_2D,this.maskSource.texture.webGLTexture)},createProgram:function(U,W){var X=new O(this.gl,U,W);return this.glProgramWrappers.push(X),X},createVertexBuffer:function(U,W){var X=this.gl,_=new b(X,U,X.ARRAY_BUFFER,W);return this.glBufferWrappers.push(_),_},createAttribLocation:function(U,W){var X=new G(this.gl,U,W);return this.glAttribLocationWrappers.push(X),X},createUniformLocation:function(U,W){var X=new V(this.gl,U,W);return this.glUniformLocationWrappers.push(X),X},createIndexBuffer:function(U,W){var X=this.gl,_=new b(X,U,X.ELEMENT_ARRAY_BUFFER,W);return this.glBufferWrappers.push(_),_},deleteTexture:function(U){if(U)return S(this.glTextureWrappers,U),U.destroy(),this},deleteFramebuffer:function(U){return U?(S(this.fboStack,U),S(this.glFramebufferWrappers,U),U.destroy(),this):this},deleteProgram:function(U){return U&&(S(this.glProgramWrappers,U),U.destroy()),this},deleteAttribLocation:function(U){return U&&(S(this.glAttribLocationWrappers,U),U.destroy()),this},deleteUniformLocation:function(U){return U&&(S(this.glUniformLocationWrappers,U),U.destroy()),this},deleteBuffer:function(U){return U?(S(this.glBufferWrappers,U),U.destroy(),this):this},preRenderCamera:function(U){var W=U.x,X=U.y,_=U.width,Q=U.height,j=U.backgroundColor;if(U.emit(u.PRE_RENDER,U),this.pipelines.preBatchCamera(U),this.pushScissor(W,X,_,Q),U.mask&&(this.currentCameraMask.mask=U.mask,this.currentCameraMask.camera=U._maskCamera,U.mask.preRenderWebGL(this,U,U._maskCamera)),j.alphaGL>0){var it=this.pipelines.setMulti();it.drawFillRect(W,X,_,Q,P.getTintFromFloats(j.blueGL,j.greenGL,j.redGL,1),j.alphaGL)}},getCurrentStencilMask:function(){var U=null,W=this.maskStack,X=this.currentCameraMask;return W.length>0?U=W[W.length-1]:X.mask&&X.mask.isStencil&&(U=X),U},postRenderCamera:function(U){var W=U.flashEffect,X=U.fadeEffect;if(W.isRunning||X.isRunning||X.isComplete){var _=this.pipelines.setMulti();W.postRenderWebGL(_,P.getTintFromFloats),X.postRenderWebGL(_,P.getTintFromFloats)}U.dirty=!1,this.popScissor(),U.mask&&(this.currentCameraMask.mask=null,U.mask.postRenderWebGL(this,U._maskCamera)),this.pipelines.postBatchCamera(U),U.emit(u.POST_RENDER,U)},preRender:function(){if(!this.contextLost){var U=this.gl;if(U.bindFramebuffer(U.FRAMEBUFFER,null),this.emit(o.PRE_RENDER_CLEAR),this.config.clearBeforeRender){var W=this.config.backgroundColor;U.clearColor(W.redGL,W.greenGL,W.blueGL,W.alphaGL),U.clear(U.COLOR_BUFFER_BIT|U.DEPTH_BUFFER_BIT|U.STENCIL_BUFFER_BIT)}U.enable(U.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&U.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(o.PRE_RENDER)}},render:function(U,W,X){if(!this.contextLost){var _=W.length;if(this.emit(o.RENDER,U,X),this.preRenderCamera(X),_===0){this.setBlendMode(h.BlendModes.NORMAL),this.postRenderCamera(X);return}this.currentType="";for(var Q=this.currentMask,j=0;j<_;j++){this.finalType=j===_-1;var it=W[j],K=it.mask;Q=this.currentMask,Q.mask&&Q.mask!==K&&Q.mask.postRenderWebGL(this,Q.camera),K&&Q.mask!==K&&K.preRenderWebGL(this,it,X),it.blendMode!==this.currentBlendMode&&this.setBlendMode(it.blendMode);var J=it.type;J!==this.currentType&&(this.newType=!0,this.currentType=J),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=W[j+1].type===this.currentType,it.renderWebGL(this,it,X),this.newType=!1}Q=this.currentMask,Q.mask&&Q.mask.postRenderWebGL(this,Q.camera),this.setBlendMode(h.BlendModes.NORMAL),this.postRenderCamera(X)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(o.POST_RENDER);var U=this.snapshotState;U.callback&&(A(this.gl,U),U.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var U=this.gl,W=this.getCurrentStencilMask();if(W){var X=W.mask;U.enable(U.STENCIL_TEST),X.invertAlpha?U.stencilFunc(U.NOTEQUAL,X.level,255):U.stencilFunc(U.EQUAL,X.level,255)}},snapshot:function(U,W,X){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,U,W,X)},snapshotArea:function(U,W,X,_,Q,j,it){var K=this.snapshotState;return K.callback=Q,K.type=j,K.encoder=it,K.getPixel=!1,K.x=U,K.y=W,K.width=X,K.height=_,this},snapshotPixel:function(U,W,X){return this.snapshotArea(U,W,1,1,X),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(U,W,X,_,Q,j,it,K,J,Y,q){Q===void 0&&(Q=!1),j===void 0&&(j=0),it===void 0&&(it=0),K===void 0&&(K=W),J===void 0&&(J=X),Y==="pixel"&&(Q=!0,Y="image/png");var $=this.currentFramebuffer;this.snapshotArea(j,it,K,J,_,Y,q);var et=this.snapshotState;return et.getPixel=Q,et.isFramebuffer=!0,et.bufferWidth=W,et.bufferHeight=X,et.width=Math.min(et.width,W),et.height=Math.min(et.height,X),this.setFramebuffer(U),A(this.gl,et),this.setFramebuffer($),et.callback=null,et.isFramebuffer=!1,this},canvasToTexture:function(U,W,X,_){X===void 0&&(X=!1),_===void 0&&(_=!1);var Q=this.gl,j=Q.NEAREST,it=Q.NEAREST,K=U.width,J=U.height,Y=Q.CLAMP_TO_EDGE,q=p(K,J);return!X&&q&&(Y=Q.REPEAT),this.config.antialias&&(j=q&&this.mipmapFilter?this.mipmapFilter:Q.LINEAR,it=Q.LINEAR),W?(W.update(U,K,J,_,Y,Y,j,it,W.format),W):this.createTexture2D(0,j,it,Y,Y,Q.RGBA,U,K,J,!0,!1,_)},createCanvasTexture:function(U,W,X){return W===void 0&&(W=!1),X===void 0&&(X=!1),this.canvasToTexture(U,null,W,X)},updateCanvasTexture:function(U,W,X,_){return X===void 0&&(X=!1),_===void 0&&(_=!1),this.canvasToTexture(U,W,_,X)},videoToTexture:function(U,W,X,_){X===void 0&&(X=!1),_===void 0&&(_=!1);var Q=this.gl,j=Q.NEAREST,it=Q.NEAREST,K=U.videoWidth,J=U.videoHeight,Y=Q.CLAMP_TO_EDGE,q=p(K,J);return!X&&q&&(Y=Q.REPEAT),this.config.antialias&&(j=q&&this.mipmapFilter?this.mipmapFilter:Q.LINEAR,it=Q.LINEAR),W?(W.update(U,K,J,_,Y,Y,j,it,W.format),W):this.createTexture2D(0,j,it,Y,Y,Q.RGBA,U,K,J,!0,!0,_)},createVideoTexture:function(U,W,X){return W===void 0&&(W=!1),X===void 0&&(X=!1),this.videoToTexture(U,null,W,X)},updateVideoTexture:function(U,W,X,_){return X===void 0&&(X=!1),_===void 0&&(_=!1),this.videoToTexture(U,W,_,X)},createUint8ArrayTexture:function(U,W,X){var _=this.gl,Q=_.NEAREST,j=_.NEAREST,it=_.CLAMP_TO_EDGE,K=p(W,X);return K&&(it=_.REPEAT),this.createTexture2D(0,Q,j,it,it,_.RGBA,U,W,X)},setTextureFilter:function(U,W){var X=this.gl,_=W===0?X.LINEAR:X.NEAREST;X.activeTexture(X.TEXTURE0);var Q=X.getParameter(X.TEXTURE_BINDING_2D);return X.bindTexture(X.TEXTURE_2D,U.webGLTexture),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MIN_FILTER,_),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MAG_FILTER,_),U.minFilter=_,U.magFilter=_,Q&&X.bindTexture(X.TEXTURE_2D,Q),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);var U=function(W){W.destroy()};d(this.glAttribLocationWrappers,U),d(this.glBufferWrappers,U),d(this.glFramebufferWrappers,U),d(this.glProgramWrappers,U),d(this.glTextureWrappers,U),d(this.glUniformLocationWrappers,U),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});m.exports=k},38683:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(95428),u=i(95540),l=i(14500),h=new d({initialize:function(o,p,a,v,x){this.pipeline=o,this.name=p,this.renderer=o.renderer,this.gl=this.renderer.gl,this.fragSrc=v,this.vertSrc=a,this.program=this.renderer.createProgram(a,v),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(x),this.createUniforms()},createAttributes:function(r){var o=0,p=0,a=[];this.vertexComponentCount=0;for(var v=0;v<r.length;v++){var x=r[v],g=x.name,y=u(x,"size",1),T=u(x,"type",l.FLOAT),P=T.enum,A=T.size,b=!!x.normalized;a.push({name:g,size:y,type:P,normalized:b,offset:p,enabled:!1,location:-1}),A===4?o+=y:o++,p+=y*A}this.vertexSize=p,this.vertexComponentCount=o,this.attributes=a},bind:function(r,o){return r===void 0&&(r=!1),o===void 0&&(o=!1),o&&this.pipeline.flush(),this.renderer.setProgram(this.program),r&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(r){r===void 0&&(r=!1);for(var o=this.gl,p=this.renderer,a=this.vertexSize,v=this.attributes,x=this.program,g=0;g<v.length;g++){var y=v[g],T=y.size,P=y.type,A=y.offset,b=y.enabled,O=y.location,D=!!y.normalized;if(r){O!==-1&&p.deleteAttribLocation(O);var B=this.renderer.createAttribLocation(x,y.name);B.webGLAttribLocation>=0?(o.enableVertexAttribArray(B.webGLAttribLocation),o.vertexAttribPointer(B.webGLAttribLocation,T,P,D,a,A),y.enabled=!0,y.location=B):B.webGLAttribLocation!==-1&&o.disableVertexAttribArray(B.webGLAttribLocation)}else b?o.vertexAttribPointer(O.webGLAttribLocation,T,P,D,a,A):!b&&O!==-1&&O.webGLAttribLocation>-1&&(o.disableVertexAttribArray(O.webGLAttribLocation),y.location=-1)}return this},createUniforms:function(){var r=this.gl,o=this.program,p=this.uniforms,a,v,x,g=r.getProgramParameter(o.webGLProgram,r.ACTIVE_UNIFORMS);for(a=0;a<g;a++){var y=r.getActiveUniform(o.webGLProgram,a);if(y){v=y.name,x=this.renderer.createUniformLocation(o,v),x!==null&&(p[v]={name:v,location:x,setter:null,value1:null,value2:null,value3:null,value4:null});var T=v.indexOf("[");T>0&&(v=v.substr(0,T),p.hasOwnProperty(v)||(x=this.renderer.createUniformLocation(o,v),x!==null&&(p[v]={name:v,location:x,setter:null,value1:null,value2:null,value3:null,value4:null})))}}return this},syncUniforms:function(){var r=this.gl;this.renderer.setProgram(this.program);for(var o in this.uniforms){var p=this.uniforms[o];p.setter&&p.setter.call(r,p.location.webGLUniformLocation,p.value1,p.value2,p.value3,p.value4)}},hasUniform:function(r){return this.uniforms.hasOwnProperty(r)},resetUniform:function(r){var o=this.uniforms[r];return o&&(o.value1=null,o.value2=null,o.value3=null,o.value4=null),this},setUniform1:function(r,o,p,a){var v=this.uniforms[o];return v?((a||v.value1!==p)&&(v.setter||(v.setter=r),v.value1=p,this.renderer.setProgram(this.program),r.call(this.gl,v.location.webGLUniformLocation,p),this.pipeline.currentShader=this),this):this},setUniform2:function(r,o,p,a,v){var x=this.uniforms[o];return x?((v||x.value1!==p||x.value2!==a)&&(x.setter||(x.setter=r),x.value1=p,x.value2=a,this.renderer.setProgram(this.program),r.call(this.gl,x.location.webGLUniformLocation,p,a),this.pipeline.currentShader=this),this):this},setUniform3:function(r,o,p,a,v,x){var g=this.uniforms[o];return g?((x||g.value1!==p||g.value2!==a||g.value3!==v)&&(g.setter||(g.setter=r),g.value1=p,g.value2=a,g.value3=v,this.renderer.setProgram(this.program),r.call(this.gl,g.location.webGLUniformLocation,p,a,v),this.pipeline.currentShader=this),this):this},setUniform4:function(r,o,p,a,v,x,g){var y=this.uniforms[o];return y?((g||y.value1!==p||y.value2!==a||y.value3!==v||y.value4!==x)&&(y.setter||(y.setter=r),y.value1=p,y.value2=a,y.value3=v,y.value4=x,this.renderer.setProgram(this.program),r.call(this.gl,y.location.webGLUniformLocation,p,a,v,x),this.pipeline.currentShader=this),this):this},setBoolean:function(r,o){return this.setUniform1(this.gl.uniform1i,r,Number(o))},set1f:function(r,o){return this.setUniform1(this.gl.uniform1f,r,o)},set2f:function(r,o,p){return this.setUniform2(this.gl.uniform2f,r,o,p)},set3f:function(r,o,p,a){return this.setUniform3(this.gl.uniform3f,r,o,p,a)},set4f:function(r,o,p,a,v){return this.setUniform4(this.gl.uniform4f,r,o,p,a,v)},set1fv:function(r,o){return this.setUniform1(this.gl.uniform1fv,r,o,!0)},set2fv:function(r,o){return this.setUniform1(this.gl.uniform2fv,r,o,!0)},set3fv:function(r,o){return this.setUniform1(this.gl.uniform3fv,r,o,!0)},set4fv:function(r,o){return this.setUniform1(this.gl.uniform4fv,r,o,!0)},set1iv:function(r,o){return this.setUniform1(this.gl.uniform1iv,r,o,!0)},set2iv:function(r,o){return this.setUniform1(this.gl.uniform2iv,r,o,!0)},set3iv:function(r,o){return this.setUniform1(this.gl.uniform3iv,r,o,!0)},set4iv:function(r,o){return this.setUniform1(this.gl.uniform4iv,r,o,!0)},set1i:function(r,o){return this.setUniform1(this.gl.uniform1i,r,o)},set2i:function(r,o,p){return this.setUniform2(this.gl.uniform2i,r,o,p)},set3i:function(r,o,p,a){return this.setUniform3(this.gl.uniform3i,r,o,p,a)},set4i:function(r,o,p,a,v){return this.setUniform4(this.gl.uniform4i,r,o,p,a,v)},setMatrix2fv:function(r,o,p){return this.setUniform2(this.gl.uniformMatrix2fv,r,o,p,!0)},setMatrix3fv:function(r,o,p){return this.setUniform2(this.gl.uniformMatrix3fv,r,o,p,!0)},setMatrix4fv:function(r,o,p){return this.setUniform2(this.gl.uniformMatrix4fv,r,o,p,!0)},createProgram:function(r,o){return r===void 0&&(r=this.vertSrc),o===void 0&&(o=this.fragSrc),this.program&&this.renderer.deleteProgram(this.program),this.vertSrc=r,this.fragSrc=o,this.program=this.renderer.createProgram(r,o),this.createUniforms(),this.rebind()},destroy:function(){var r=this.renderer;S(this.uniforms,function(o){r.deleteUniformLocation(o.location)}),this.uniforms=null,S(this.attributes,function(o){r.deleteAttribLocation(o.location)}),this.attributes=null,r.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null}});m.exports=h},14500:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};m.exports=E},4159:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(14500),S=i(79291),u={PipelineManager:i(7530),Pipelines:i(96615),RenderTarget:i(32302),Utils:i(70554),WebGLPipeline:i(29100),WebGLRenderer:i(74797),WebGLShader:i(38683),Wrappers:i(9503)};u=S(!1,u,d),m.exports=u},31302:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(95540),u=i(78908),l=i(85191),h=i(14500),r=i(29100),o=new d({Extends:r,initialize:function(a){a.fragShader=S(a,"fragShader",u),a.vertShader=S(a,"vertShader",l),a.batchSize=S(a,"batchSize",1),a.vertices=S(a,"vertices",[-1,1,-1,-7,7,1]),a.attributes=S(a,"attributes",[{name:"inPosition",size:2,type:h.FLOAT}]),r.call(this,a)},boot:function(){r.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(p,a){r.prototype.resize.call(this,p,a),this.set2f("uResolution",p,a)},beginMask:function(p,a,v){this.renderer.beginBitmapMask(p,v)},endMask:function(p,a,v){var x=this.gl,g=this.renderer,y=p.bitmapMask;y&&x&&(g.drawBitmapMask(y,a,this),v&&this.set2f("uResolution",v.width,v.height),this.set1i("uInvertMaskAlpha",p.invertAlpha),x.drawArrays(this.topology,0,3),v&&this.set2f("uResolution",this.width,this.height),x.bindTexture(x.TEXTURE_2D,null))}});m.exports=o},92651:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(58918),u=i(14811),l=i(95540),h=i(43558),r=i(89350),o=i(70554),p=new d({Extends:h,initialize:function(v){v.shaders=[o.setGlowQuality(r.FXGlowFrag,v.game),r.FXShadowFrag,r.FXPixelateFrag,r.FXVignetteFrag,r.FXShineFrag,r.FXBlurLowFrag,r.FXBlurMedFrag,r.FXBlurHighFrag,r.FXGradientFrag,r.FXBloomFrag,r.ColorMatrixFrag,r.FXCircleFrag,r.FXBarrelFrag,r.FXDisplacementFrag,r.FXWipeFrag,r.FXBokehFrag],h.call(this,v);var x=this.game;this.glow=new S.Glow(x),this.shadow=new S.Shadow(x),this.pixelate=new S.Pixelate(x),this.vignette=new S.Vignette(x),this.shine=new S.Shine(x),this.gradient=new S.Gradient(x),this.circle=new S.Circle(x),this.barrel=new S.Barrel(x),this.wipe=new S.Wipe(x),this.bokeh=new S.Bokeh(x);var g=[];g[u.GLOW]=this.onGlow,g[u.SHADOW]=this.onShadow,g[u.PIXELATE]=this.onPixelate,g[u.VIGNETTE]=this.onVignette,g[u.SHINE]=this.onShine,g[u.BLUR]=this.onBlur,g[u.GRADIENT]=this.onGradient,g[u.BLOOM]=this.onBloom,g[u.COLOR_MATRIX]=this.onColorMatrix,g[u.CIRCLE]=this.onCircle,g[u.BARREL]=this.onBarrel,g[u.DISPLACEMENT]=this.onDisplacement,g[u.WIPE]=this.onWipe,g[u.BOKEH]=this.onBokeh,this.fxHandlers=g,this.source,this.target,this.swap},onDraw:function(a,v,x){this.source=a,this.target=v,this.swap=x;var g=a.width,y=a.height,T=this.tempSprite,P=this.fxHandlers;if(T&&T.preFX)for(var A=T.preFX.list,b=0;b<A.length;b++){var O=A[b];O.active&&P[O.type].call(this,O,g,y)}this.drawToGame(this.source)},runDraw:function(){var a=this.source,v=this.target;this.copy(a,v),this.source=v,this.target=a},onGlow:function(a,v,x){var g=this.shaders[u.GLOW];this.setShader(g),this.glow.onPreRender(a,g,v,x),this.runDraw()},onShadow:function(a){var v=this.shaders[u.SHADOW];this.setShader(v),this.shadow.onPreRender(a,v),this.runDraw()},onPixelate:function(a,v,x){var g=this.shaders[u.PIXELATE];this.setShader(g),this.pixelate.onPreRender(a,g,v,x),this.runDraw()},onVignette:function(a){var v=this.shaders[u.VIGNETTE];this.setShader(v),this.vignette.onPreRender(a,v),this.runDraw()},onShine:function(a,v,x){var g=this.shaders[u.SHINE];this.setShader(g),this.shine.onPreRender(a,g,v,x),this.runDraw()},onBlur:function(a,v,x){var g=l(a,"quality"),y=this.shaders[u.BLUR+g];this.setShader(y),this.set1i("uMainSampler",0),this.set2f("resolution",v,x),this.set1f("strength",l(a,"strength")),this.set3fv("color",l(a,"glcolor"));for(var T=l(a,"x"),P=l(a,"y"),A=l(a,"steps"),b=0;b<A;b++)this.set2f("offset",T,0),this.runDraw(),this.set2f("offset",0,P),this.runDraw()},onGradient:function(a){var v=this.shaders[u.GRADIENT];this.setShader(v),this.gradient.onPreRender(a,v),this.runDraw()},onBloom:function(a,v,x){var g=this.shaders[u.BLOOM];this.copySprite(this.source,this.swap),this.setShader(g),this.set1i("uMainSampler",0),this.set1f("strength",l(a,"blurStrength")),this.set3fv("color",l(a,"glcolor"));for(var y=2/v*l(a,"offsetX"),T=2/x*l(a,"offsetY"),P=l(a,"steps"),A=0;A<P;A++)this.set2f("offset",y,0),this.runDraw(),this.set2f("offset",0,T),this.runDraw();this.blendFrames(this.swap,this.source,this.target,l(a,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(a){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",a.getData()),this.set1f("uAlpha",a.alpha),this.runDraw()},onCircle:function(a,v,x){var g=this.shaders[u.CIRCLE];this.setShader(g),this.circle.onPreRender(a,g,v,x),this.runDraw()},onBarrel:function(a){var v=this.shaders[u.BARREL];this.setShader(v),this.barrel.onPreRender(a,v),this.runDraw()},onDisplacement:function(a){this.setShader(this.shaders[u.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",a.x,a.y),this.bindTexture(a.glTexture,1),this.runDraw()},onWipe:function(a){var v=this.shaders[u.WIPE];this.setShader(v),this.wipe.onPreRender(a,v),this.runDraw()},onBokeh:function(a,v,x){var g=this.shaders[u.BOKEH];this.setShader(g),this.bokeh.onPreRender(a,g,v,x),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,h.prototype.destroy.call(this),this}});m.exports=p},96569:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(95540),u=i(31063),l=i(57516),h=i(61340),r=i(26099),o=i(29100),p=new d({Extends:l,initialize:function(v){var x=S(v,"fragShader",u);v.fragShader=x.replace("%LIGHT_COUNT%",v.game.renderer.config.maxLights),l.call(this,v),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new r,this._tempMatrix=new h,this._tempMatrix2=new h},boot:function(){o.prototype.boot.call(this)},onRender:function(a,v){var x=a.sys.lights;if(this.lightsActive=!1,!(!x||!x.active)){var g=x.getLights(v),y=g.length;this.lightsActive=!0;var T,P=this.renderer,A=P.height,b=v.matrix,O=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",v.x,v.y,v.rotation,v.zoom),this.set3f("uAmbientLightColor",x.ambientColor.r,x.ambientColor.g,x.ambientColor.b),this.set1i("uLightCount",y),T=0;T<y;T++){var D=g[T].light,B=D.color,G="uLights["+T+"].";b.transformPoint(D.x,D.y,O),this.set2f(G+"position",O.x-v.scrollX*D.scrollFactorX*v.zoom,A-(O.y-v.scrollY*D.scrollFactorY*v.zoom)),this.set3f(G+"color",B.r,B.g,B.b),this.set1f(G+"intensity",D.intensity),this.set1f(G+"radius",D.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(a){if(a!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var v=this.inverseRotationMatrix;if(a){var x=-a,g=Math.cos(x),y=Math.sin(x);v[1]=y,v[3]=-y,v[0]=v[4]=g}else v[0]=v[4]=1,v[1]=v[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,v),this.currentNormalMapRotation=a}},setTexture2D:function(a,v){var x=this.renderer;a===void 0&&(a=x.whiteTexture);var g=this.getNormalMap(v);this.isNewNormalMap(a,g)&&(this.flush(),this.createBatch(a),this.addTextureToBatch(g),this.currentNormalMap=g);var y=0;if(v&&v.parentContainer){var T=v.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);y=T.rotationNormalized}else v&&(y=v.rotation);return this.currentBatch===null&&(this.createBatch(a),this.addTextureToBatch(g)),this.setNormalMapRotation(y),0},setGameObject:function(a,v){v===void 0&&(v=a.frame);var x=v.glTexture,g=this.getNormalMap(a);if(this.isNewNormalMap(x,g)&&(this.flush(),this.createBatch(x),this.addTextureToBatch(g),this.currentNormalMap=g),a.parentContainer){var y=a.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(y.rotationNormalized)}else this.setNormalMapRotation(a.rotation);return this.currentBatch===null&&(this.createBatch(x),this.addTextureToBatch(g)),0},isNewNormalMap:function(a,v){return this.currentTexture!==a||this.currentNormalMap!==v},getNormalMap:function(a){var v;if(a)a.displayTexture?v=a.displayTexture.dataSource[a.displayFrame.sourceIndex]:a.texture?v=a.texture.dataSource[a.frame.sourceIndex]:a.tileset&&(Array.isArray(a.tileset)?v=a.tileset[0].image.dataSource[0]:v=a.tileset.image.dataSource[0]);else return this.renderer.normalTexture;return v?v.glTexture:this.renderer.normalTexture},batchSprite:function(a,v,x){this.lightsActive&&l.prototype.batchSprite.call(this,a,v,x)},batchTexture:function(a,v,x,g,y,T,P,A,b,O,D,B,G,V,k,U,W,X,_,Q,j,it,K,J,Y,q,$,et,rt,at,lt,vt){this.lightsActive&&l.prototype.batchTexture.call(this,a,v,x,g,y,T,P,A,b,O,D,B,G,V,k,U,W,X,_,Q,j,it,K,J,Y,q,$,et,rt,at,lt,vt)},batchTextureFrame:function(a,v,x,g,y,T,P){this.lightsActive&&l.prototype.batchTextureFrame.call(this,a,v,x,g,y,T,P)}});m.exports=p},56527:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(95540),u=i(57516),l=i(45561),h=i(60722),r=i(14500),o=i(29100),p=new d({Extends:u,initialize:function(v){v.fragShader=S(v,"fragShader",l),v.vertShader=S(v,"vertShader",h),v.attributes=S(v,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:r.UNSIGNED_BYTE,normalized:!0}]),v.forceZero=!0,v.resizeUniform="uResolution",u.call(this,v)},boot:function(){o.prototype.boot.call(this);var a=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",a.width,a.height)}});m.exports=p},57516:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(94811),u=i(95540),l=i(98840),h=i(44667),r=i(61340),o=i(70554),p=i(14500),a=i(29100),v=new d({Extends:a,initialize:function(g){var y=g.game.renderer,T=u(g,"fragShader",l);g.fragShader=o.parseFragmentShaderMaxTextures(T,y.maxTextures),g.vertShader=u(g,"vertShader",h),g.attributes=u(g,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:p.UNSIGNED_BYTE,normalized:!0}]),g.resizeUniform="uResolution",a.call(this,g),this._tempMatrix1=new r,this._tempMatrix2=new r,this._tempMatrix3=new r,this.calcMatrix=new r,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){a.prototype.boot.call(this);var x=this.renderer;this.set1iv("uMainSampler",x.textureIndexes),this.set2f("uResolution",x.width,x.height)},batchSprite:function(x,g,y){this.manager.set(this,x);var T=this._tempMatrix1,P=this._tempMatrix2,A=this._tempMatrix3,b=x.frame,O=b.glTexture,D=b.u0,B=b.v0,G=b.u1,V=b.v1,k=b.x,U=b.y,W=b.cutWidth,X=b.cutHeight,_=b.customPivot,Q=x.displayOriginX,j=x.displayOriginY,it=-Q+k,K=-j+U;if(x.isCropped){var J=x._crop;(J.flipX!==x.flipX||J.flipY!==x.flipY)&&b.updateCropUVs(J,x.flipX,x.flipY),D=J.u0,B=J.v0,G=J.u1,V=J.v1,W=J.width,X=J.height,k=J.x,U=J.y,it=-Q+k,K=-j+U}var Y=1,q=1;x.flipX&&(_||(it+=-b.realWidth+Q*2),Y=-1),x.flipY&&(_||(K+=-b.realHeight+j*2),q=-1);var $=x.x,et=x.y;g.roundPixels&&($=Math.floor($),et=Math.floor(et)),P.applyITRS($,et,x.rotation,x.scaleX*Y,x.scaleY*q),T.copyFrom(g.matrix),y?(T.multiplyWithOffset(y,-g.scrollX*x.scrollFactorX,-g.scrollY*x.scrollFactorY),P.e=$,P.f=et):(P.e-=g.scrollX*x.scrollFactorX,P.f-=g.scrollY*x.scrollFactorY),T.multiply(P,A);var rt=A.setQuad(it,K,it+W,K+X,g.renderRoundPixels),at=o.getTintAppendFloatAlpha,lt=g.alpha,vt=at(x.tintTopLeft,lt*x._alphaTL),xt=at(x.tintTopRight,lt*x._alphaTR),ut=at(x.tintBottomLeft,lt*x._alphaBL),mt=at(x.tintBottomRight,lt*x._alphaBR);this.shouldFlush(6)&&this.flush();var Tt=this.setGameObject(x,b);this.manager.preBatch(x),this.batchQuad(x,rt[0],rt[1],rt[2],rt[3],rt[4],rt[5],rt[6],rt[7],D,B,G,V,vt,xt,ut,mt,x.tintFill,O,Tt),this.manager.postBatch(x)},batchTexture:function(x,g,y,T,P,A,b,O,D,B,G,V,k,U,W,X,_,Q,j,it,K,J,Y,q,$,et,rt,at,lt,vt,xt,ut,mt){mt===void 0&&(mt=!1),this.manager.set(this,x);var Tt=this._tempMatrix1,bt=this._tempMatrix2,St=this._tempMatrix3,Gt=Q/y+rt,Nt=j/T+at,zt=(Q+it)/y+rt,Lt=(j+K)/T+at,ct=b,ot=O,Mt=-X,Ot=-_;if(x.isCropped){var Ut=x._crop,Rt=Ut.width,_t=Ut.height;ct=Rt,ot=_t,b=Rt,O=_t,Q=Ut.x,j=Ut.y;var Yt=Q,ee=j;V&&(Yt=it-Ut.x-Rt),k&&(ee=K-Ut.y-_t),Gt=Yt/y+rt,Nt=ee/T+at,zt=(Yt+Rt)/y+rt,Lt=(ee+_t)/T+at,Mt=-X+Q,Ot=-_+j}k=k^(!xt&&g.isRenderTexture?1:0),V&&(ct*=-1,Mt+=b),k&&(ot*=-1,Ot+=O),lt.roundPixels&&(P=Math.floor(P),A=Math.floor(A)),bt.applyITRS(P,A,G,D,B),Tt.copyFrom(lt.matrix),vt?(Tt.multiplyWithOffset(vt,-lt.scrollX*U,-lt.scrollY*W),bt.e=P,bt.f=A):(bt.e-=lt.scrollX*U,bt.f-=lt.scrollY*W),Tt.multiply(bt,St);var $t=St.setQuad(Mt,Ot,Mt+ct,Ot+ot,lt.renderRoundPixels);ut==null&&(ut=this.setTexture2D(g)),x&&!mt&&this.manager.preBatch(x),this.batchQuad(x,$t[0],$t[1],$t[2],$t[3],$t[4],$t[5],$t[6],$t[7],Gt,Nt,zt,Lt,J,Y,q,$,et,g,ut),x&&!mt&&this.manager.postBatch(x)},batchTextureFrame:function(x,g,y,T,P,A,b){this.manager.set(this);var O=this._tempMatrix1.copyFrom(A),D=this._tempMatrix2;b?O.multiply(b,D):D=O;var B=D.setQuad(g,y,g+x.width,y+x.height),G=this.setTexture2D(x.source.glTexture);T=o.getTintAppendFloatAlpha(T,P),this.batchQuad(null,B[0],B[1],B[2],B[3],B[4],B[5],B[6],B[7],x.u0,x.v0,x.u1,x.v1,T,T,T,T,0,x.glTexture,G)},batchFillRect:function(x,g,y,T,P,A){this.renderer.pipelines.set(this);var b=this.calcMatrix;A&&A.multiply(P,b);var O=b.setQuad(x,g,x+y,g+T),D=this.fillTint;this.batchQuad(null,O[0],O[1],O[2],O[3],O[4],O[5],O[6],O[7],0,0,1,1,D.TL,D.TR,D.BL,D.BR,2)},batchFillTriangle:function(x,g,y,T,P,A,b,O){this.renderer.pipelines.set(this);var D=this.calcMatrix;O&&O.multiply(b,D);var B=D.getX(x,g),G=D.getY(x,g),V=D.getX(y,T),k=D.getY(y,T),U=D.getX(P,A),W=D.getY(P,A),X=this.fillTint;this.batchTri(null,B,G,V,k,U,W,0,0,1,1,X.TL,X.TR,X.BL,2)},batchStrokeTriangle:function(x,g,y,T,P,A,b,O,D){var B=this.tempTriangle;B[0].x=x,B[0].y=g,B[0].width=b,B[1].x=y,B[1].y=T,B[1].width=b,B[2].x=P,B[2].y=A,B[2].width=b,B[3].x=x,B[3].y=g,B[3].width=b,this.batchStrokePath(B,b,!1,O,D)},batchFillPath:function(x,g,y){this.renderer.pipelines.set(this);var T=this.calcMatrix;y&&y.multiply(g,T);for(var P=x.length,A=this.polygonCache,b,O,D=this.fillTint.TL,B=this.fillTint.TR,G=this.fillTint.BL,V=0;V<P;++V)O=x[V],A.push(O.x,O.y);b=S(A),P=b.length;for(var k=0;k<P;k+=3){var U=b[k+0]*2,W=b[k+1]*2,X=b[k+2]*2,_=A[U+0],Q=A[U+1],j=A[W+0],it=A[W+1],K=A[X+0],J=A[X+1],Y=T.getX(_,Q),q=T.getY(_,Q),$=T.getX(j,it),et=T.getY(j,it),rt=T.getX(K,J),at=T.getY(K,J);this.batchTri(null,Y,q,$,et,rt,at,0,0,1,1,D,B,G,2)}A.length=0},batchStrokePath:function(x,g,y,T,P){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var A=x.length-1,b=0;b<A;b++){var O=x[b],D=x[b+1];this.batchLine(O.x,O.y,D.x,D.y,O.width/2,D.width/2,g,b,!y&&b===A-1,T,P)}},batchLine:function(x,g,y,T,P,A,b,O,D,B,G){this.renderer.pipelines.set(this);var V=this.calcMatrix;G&&G.multiply(B,V);var k=y-x,U=T-g,W=Math.sqrt(k*k+U*U);if(W!==0){var X=P*(T-g)/W,_=P*(x-y)/W,Q=A*(T-g)/W,j=A*(x-y)/W,it=y-Q,K=T-j,J=x-X,Y=g-_,q=y+Q,$=T+j,et=x+X,rt=g+_,at=V.getX(it,K),lt=V.getY(it,K),vt=V.getX(J,Y),xt=V.getY(J,Y),ut=V.getX(q,$),mt=V.getY(q,$),Tt=V.getX(et,rt),bt=V.getY(et,rt),St=this.strokeTint,Gt=St.TL,Nt=St.TR,zt=St.BL,Lt=St.BR;if(this.batchQuad(null,Tt,bt,vt,xt,at,lt,ut,mt,0,0,1,1,Gt,Nt,zt,Lt,2),!(b<=2)){var ct=this.prevQuad,ot=this.firstQuad;O>0&&ct[4]?this.batchQuad(null,Tt,bt,vt,xt,ct[0],ct[1],ct[2],ct[3],0,0,1,1,Gt,Nt,zt,Lt,2):(ot[0]=Tt,ot[1]=bt,ot[2]=vt,ot[3]=xt,ot[4]=1),D&&ot[4]?this.batchQuad(null,at,lt,ut,mt,ot[0],ot[1],ot[2],ot[3],0,0,1,1,Gt,Nt,zt,Lt,2):(ct[0]=at,ct[1]=lt,ct[2]=ut,ct[3]=mt,ct[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,a.prototype.destroy.call(this),this}});m.exports=v},43439:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(95540),u=i(4127),l=i(89924),h=i(29100),r=new d({Extends:h,initialize:function(p){p.vertShader=S(p,"vertShader",l),p.fragShader=S(p,"fragShader",u),p.attributes=S(p,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),h.call(this,p)},onRender:function(o,p){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",p.zoom)},batchPointLight:function(o,p,a,v,x,g,y,T,P,A,b,O){var D=o.color,B=o.intensity,G=o.radius,V=o.attenuation,k=D.r*B,U=D.g*B,W=D.b*B,X=p.alpha*o.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(a,v,b,O,G,V,k,U,W,X),this.batchLightVert(x,g,b,O,G,V,k,U,W,X),this.batchLightVert(y,T,b,O,G,V,k,U,W,X),this.batchLightVert(a,v,b,O,G,V,k,U,W,X),this.batchLightVert(y,T,b,O,G,V,k,U,W,X),this.batchLightVert(P,A,b,O,G,V,k,U,W,X),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(o,p,a,v,x,g,y,T,P,A){var b=this.vertexViewF32,O=this.vertexCount*this.currentShader.vertexComponentCount-1;b[++O]=o,b[++O]=p,b[++O]=a,b[++O]=v,b[++O]=x,b[++O]=g,b[++O]=y,b[++O]=T,b[++O]=P,b[++O]=A,this.vertexCount++}});m.exports=r},84057:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(89422),u=i(95540),l=i(27681),h=i(49627),r=i(29100),o=new d({Extends:r,initialize:function(a){a.renderTarget=u(a,"renderTarget",1),a.fragShader=u(a,"fragShader",l),a.vertShader=u(a,"vertShader",h),a.attributes=u(a,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),a.batchSize=1,a.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],r.call(this,a),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new S,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines)},bootFX:function(){r.prototype.boot.call(this);var p=this.manager.UTILITY_PIPELINE;this.fullFrame1=p.fullFrame1,this.fullFrame2=p.fullFrame2,this.halfFrame1=p.halfFrame1,this.halfFrame2=p.halfFrame2;var a=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",a.width,a.height);for(var v=this.renderTargets,x=0;x<v.length;x++)v[x].autoResize=!0},postBatch:function(p){return this.hasBooted||(this.bootFX(),this.currentRenderTarget&&this.currentRenderTarget.bind()),this.onDraw(this.currentRenderTarget),this.onPostBatch(p),this},onDraw:function(p){this.bindAndDraw(p)},getController:function(p){return p!==void 0?p:this.controller?this.controller:this},copySprite:function(p,a,v){v===void 0&&(v=!1);var x=this.gl;x.activeTexture(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,p.texture.webGLTexture);var g=x.getParameter(x.FRAMEBUFFER_BINDING);x.bindFramebuffer(x.FRAMEBUFFER,a.framebuffer.webGLFramebuffer),x.framebufferTexture2D(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.TEXTURE_2D,a.texture.webGLTexture,0),x.clearColor(0,0,0,0),x.clear(x.COLOR_BUFFER_BIT),x.bufferData(x.ARRAY_BUFFER,this.vertexData,x.STATIC_DRAW),x.drawArrays(x.TRIANGLES,0,6),v&&(x.bindTexture(x.TEXTURE_2D,null),x.bindFramebuffer(x.FRAMEBUFFER,g))},copyFrame:function(p,a,v,x,g){this.manager.copyFrame(p,a,v,x,g)},copyToGame:function(p){this.manager.copyToGame(p)},drawFrame:function(p,a,v){this.manager.drawFrame(p,a,v,this.colorMatrix)},blendFrames:function(p,a,v,x,g){this.manager.blendFrames(p,a,v,x,g)},blendFramesAdditive:function(p,a,v,x,g){this.manager.blendFramesAdditive(p,a,v,x,g)},clearFrame:function(p,a){this.manager.clearFrame(p,a)},blitFrame:function(p,a,v,x,g,y){this.manager.blitFrame(p,a,v,x,g,y)},copyFrameRect:function(p,a,v,x,g,y,T,P){this.manager.copyFrameRect(p,a,v,x,g,y,T,P)},bindAndDraw:function(p,a,v,x,g){v===void 0&&(v=!0),x===void 0&&(x=!0);var y=this.gl,T=this.renderer;this.bind(g),this.set1i("uMainSampler",0),a?(y.viewport(0,0,a.width,a.height),y.bindFramebuffer(y.FRAMEBUFFER,a.framebuffer.webGLFramebuffer),y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,a.texture.webGLTexture,0),v&&(x?y.clearColor(0,0,0,0):y.clearColor(0,0,0,1),y.clear(y.COLOR_BUFFER_BIT))):(T.popFramebuffer(!1,!1),T.currentFramebuffer||y.viewport(0,0,T.width,T.height)),T.restoreStencilMask(),y.activeTexture(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,p.texture.webGLTexture),y.bufferData(y.ARRAY_BUFFER,this.vertexData,y.STATIC_DRAW),y.drawArrays(y.TRIANGLES,0,6),a&&(y.bindTexture(y.TEXTURE_2D,null),y.bindFramebuffer(y.FRAMEBUFFER,T.currentFramebuffer.webGLFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,this.manager.removePostPipeline(this),r.prototype.destroy.call(this),this}});m.exports=o},43558:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(10312),S=i(67502),u=i(83419),l=i(96293),h=i(95540),r=i(57516),o=i(27681),p=i(87841),a=i(32302),v=i(45561),x=i(60722),g=i(29100),y=new u({Extends:r,initialize:function(P){var A=h(P,"fragShader",o),b=h(P,"vertShader",x),O=h(P,"drawShader",o),D=[{name:"DrawSprite",fragShader:v,vertShader:x},{name:"CopySprite",fragShader:A,vertShader:b},{name:"DrawGame",fragShader:O,vertShader:x},{name:"ColorMatrix",fragShader:l}],B=h(P,"shaders",[]);P.shaders=D.concat(B),P.vertShader||(P.vertShader=b),P.batchSize=1,r.call(this,P),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new p,this.targetBounds=new p,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){g.prototype.boot.call(this);var T=this.shaders,P=this.renderer;this.drawSpriteShader=T[0],this.copyShader=T[1],this.gameShader=T[2],this.colorMatrixShader=T[3],this.fsTarget=new a(P,P.width,P.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var A=new ArrayBuffer(168);this.quadVertexData=A,this.quadVertexViewF32=new Float32Array(A),this.quadVertexBuffer=P.createVertexBuffer(A,this.gl.STATIC_DRAW),this.onResize(P.width,P.height),this.currentShader=this.copyShader,this.set2f("uResolution",P.width,P.height)},onResize:function(T,P){var A=this.quadVertexViewF32;A[1]=P,A[22]=P,A[14]=T,A[28]=T,A[35]=T,A[36]=P},batchQuad:function(T,P,A,b,O,D,B,G,V,k,U,W,X,_,Q,j,it,K,J){var Y=Math.min(P,b,D,G),q=Math.min(A,O,B,V),$=Math.max(P,b,D,G),et=Math.max(A,O,B,V),rt=$-Y,at=et-q,lt=this.spriteBounds.setTo(Y,q,rt,at),vt=T?T.preFX.padding:0,xt=rt+vt*2,ut=at+vt*2,mt=Math.abs(Math.max(xt,ut)),Tt=this.manager.getRenderTarget(mt),bt=this.targetBounds.setTo(0,0,Tt.width,Tt.height);S(bt,Math.round(lt.centerX),Math.round(lt.centerY)),this.tempSprite=T;var St=this.gl,Gt=this.renderer;Gt.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.set2f("uResolution",Gt.width,Gt.height),this.flipProjectionMatrix(!0),T&&(this.onDrawSprite(T,Tt),T.preFX.onFX(this));var Nt=this.fsTarget;return this.flush(),St.viewport(0,0,Gt.width,Gt.height),St.bindFramebuffer(St.FRAMEBUFFER,Nt.framebuffer.webGLFramebuffer),St.framebufferTexture2D(St.FRAMEBUFFER,St.COLOR_ATTACHMENT0,St.TEXTURE_2D,Nt.texture.webGLTexture,0),St.clearColor(0,0,0,0),St.clear(St.COLOR_BUFFER_BIT),this.setTexture2D(J),this.batchVert(P,A,k,U,0,K,_),this.batchVert(b,O,k,X,0,K,j),this.batchVert(D,B,W,X,0,K,it),this.batchVert(P,A,k,U,0,K,_),this.batchVert(D,B,W,X,0,K,it),this.batchVert(G,V,W,U,0,K,Q),this.flush(),this.flipProjectionMatrix(!1),St.activeTexture(St.TEXTURE0),St.bindTexture(St.TEXTURE_2D,Tt.texture.webGLTexture),St.copyTexSubImage2D(St.TEXTURE_2D,0,0,0,bt.x,bt.y,bt.width,bt.height),St.bindFramebuffer(St.FRAMEBUFFER,null),St.bindTexture(St.TEXTURE_2D,null),this.onBatch(T),this.currentShader=this.copyShader,this.onDraw(Tt,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(T,P,A,b,O,D,B){A===void 0&&(A=!0),b===void 0&&(b=!0),O===void 0&&(O=!1),B===void 0&&(B=this.copyShader);var G=this.gl,V=this.tempSprite;D&&(B=this.colorMatrixShader),this.currentShader=B;var k=this.setVertexBuffer(this.quadVertexBuffer);B.bind(k,!1);var U=this.renderer;if(this.set1i("uMainSampler",0),this.set2f("uResolution",U.width,U.height),V.preFX.onFXCopy(this),this.onCopySprite(T,P,V),D&&(this.set1fv("uColorMatrix",D.getData()),this.set1f("uAlpha",D.alpha)),G.activeTexture(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,T.texture.webGLTexture),T.height>P.height)G.viewport(0,0,T.width,T.height),this.setTargetUVs(T,P);else{var W=P.height-T.height;G.viewport(0,W,T.width,T.height),this.resetUVs()}if(G.bindFramebuffer(G.FRAMEBUFFER,P.framebuffer.webGLFramebuffer),G.framebufferTexture2D(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.TEXTURE_2D,P.texture.webGLTexture,0),A&&(G.clearColor(0,0,0,+!b),G.clear(G.COLOR_BUFFER_BIT)),O){var X=this.renderer.currentBlendMode;this.renderer.setBlendMode(d.ERASE)}G.bufferData(G.ARRAY_BUFFER,this.quadVertexData,G.STATIC_DRAW),G.drawArrays(G.TRIANGLES,0,6),O&&this.renderer.setBlendMode(X),G.bindFramebuffer(G.FRAMEBUFFER,null)},copy:function(T,P){var A=this.gl;this.set1i("uMainSampler",0),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,T.texture.webGLTexture),A.viewport(0,0,T.width,T.height),this.setUVs(0,0,0,1,1,1,1,0),A.bindFramebuffer(A.FRAMEBUFFER,P.framebuffer.webGLFramebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,P.texture.webGLTexture,0),A.clearColor(0,0,0,0),A.clear(A.COLOR_BUFFER_BIT),A.bufferData(A.ARRAY_BUFFER,this.quadVertexData,A.STATIC_DRAW),A.drawArrays(A.TRIANGLES,0,6),A.bindFramebuffer(A.FRAMEBUFFER,null)},blendFrames:function(T,P,A,b,O){this.manager.blendFrames(T,P,A,b,O)},blendFramesAdditive:function(T,P,A,b,O){this.manager.blendFramesAdditive(T,P,A,b,O)},drawToGame:function(T){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(T)},copyToGame:function(T){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(T)},bindAndDraw:function(T){var P=this.gl,A=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(T.texture);var b=this._tempMatrix1.loadIdentity(),O=this.targetBounds.x,D=this.targetBounds.y,B=O+T.width,G=D+T.height,V=b.getX(O,D),k=b.getX(O,G),U=b.getX(B,G),W=b.getX(B,D),X=b.getY(O,D),_=b.getY(O,G),Q=b.getY(B,G),j=b.getY(B,D),it=16777215;this.batchVert(V,X,0,0,0,0,it),this.batchVert(k,_,0,1,0,0,it),this.batchVert(U,Q,1,1,0,0,it),this.batchVert(V,X,0,0,0,0,it),this.batchVert(U,Q,1,1,0,0,it),this.batchVert(W,j,1,0,0,0,it),A.restoreFramebuffer(!1,!0),A.currentFramebuffer||P.viewport(0,0,A.width,A.height),A.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(T){this.drawToGame(T)},setUVs:function(T,P,A,b,O,D,B,G){var V=this.quadVertexViewF32;V[2]=T,V[3]=P,V[9]=A,V[10]=b,V[16]=O,V[17]=D,V[23]=T,V[24]=P,V[30]=O,V[31]=D,V[37]=B,V[38]=G},setTargetUVs:function(T,P){var A=P.height/T.height;A>.5?A=.5-(A-.5):A=.5+(.5-A),this.setUVs(0,A,0,1+A,1,1+A,1,A)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.renderer.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,r.prototype.destroy.call(this),this}});m.exports=y},81041:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(95540),u=i(57516),l=new d({Extends:u,initialize:function(r){r.topology=5,r.batchSize=S(r,"batchSize",256),u.call(this,r)}});m.exports=l},12385:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(95540),u=i(57516),l=i(45561),h=i(60722),r=i(29100),o=new d({Extends:u,initialize:function(a){a.fragShader=S(a,"fragShader",l),a.vertShader=S(a,"vertShader",h),a.forceZero=!0,u.call(this,a)},boot:function(){r.prototype.boot.call(this);var p=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",p.width,p.height)}});m.exports=o},7589:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(35407),S=i(10312),u=i(83419),l=i(89422),h=i(96293),r=i(36682),o=i(95540),p=i(48247),a=i(49627),v=i(29100),x=new u({Extends:v,initialize:function(y){y.renderTarget=o(y,"renderTarget",[{scale:1,autoResize:!0},{scale:1,autoResize:!0},{scale:.5,autoResize:!0},{scale:.5,autoResize:!0}]),y.vertShader=o(y,"vertShader",a),y.shaders=o(y,"shaders",[{name:"Copy",fragShader:r},{name:"AddBlend",fragShader:d},{name:"LinearBlend",fragShader:p},{name:"ColorMatrix",fragShader:h}]),y.attributes=o(y,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),y.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],y.batchSize=1,v.call(this,y),this.colorMatrix=new l,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){v.prototype.boot.call(this);var g=this.shaders,y=this.renderTargets;this.copyShader=g[0],this.addShader=g[1],this.linearShader=g[2],this.colorMatrixShader=g[3],this.fullFrame1=y[0],this.fullFrame2=y[1],this.halfFrame1=y[2],this.halfFrame2=y[3]},copyFrame:function(g,y,T,P,A){T===void 0&&(T=1),P===void 0&&(P=!0),A===void 0&&(A=!0);var b=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",T),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,g.texture.webGLTexture),y?(b.viewport(0,0,y.width,y.height),b.bindFramebuffer(b.FRAMEBUFFER,y.framebuffer.webGLFramebuffer),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,y.texture.webGLTexture,0)):b.viewport(0,0,g.width,g.height),P&&(A?b.clearColor(0,0,0,0):b.clearColor(0,0,0,1),b.clear(b.COLOR_BUFFER_BIT)),b.bufferData(b.ARRAY_BUFFER,this.vertexData,b.STATIC_DRAW),b.drawArrays(b.TRIANGLES,0,6),b.bindFramebuffer(b.FRAMEBUFFER,null),b.bindTexture(b.TEXTURE_2D,null)},blitFrame:function(g,y,T,P,A,b,O){T===void 0&&(T=1),P===void 0&&(P=!0),A===void 0&&(A=!0),b===void 0&&(b=!1),O===void 0&&(O=!1);var D=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",T),D.activeTexture(D.TEXTURE0),D.bindTexture(D.TEXTURE_2D,g.texture.webGLTexture),g.height>y.height)D.viewport(0,0,g.width,g.height),this.setTargetUVs(g,y);else{var B=y.height-g.height;D.viewport(0,B,g.width,g.height)}if(D.bindFramebuffer(D.FRAMEBUFFER,y.framebuffer.webGLFramebuffer),D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.TEXTURE_2D,y.texture.webGLTexture,0),P&&(A?D.clearColor(0,0,0,0):D.clearColor(0,0,0,1),D.clear(D.COLOR_BUFFER_BIT)),b){var G=this.renderer.currentBlendMode;this.renderer.setBlendMode(S.ERASE)}O&&this.flipY(),D.bufferData(D.ARRAY_BUFFER,this.vertexData,D.STATIC_DRAW),D.drawArrays(D.TRIANGLES,0,6),b&&this.renderer.setBlendMode(G),D.bindFramebuffer(D.FRAMEBUFFER,null),D.bindTexture(D.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(g,y,T,P,A,b,O,D){O===void 0&&(O=!0),D===void 0&&(D=!0);var B=this.gl;B.bindFramebuffer(B.FRAMEBUFFER,g.framebuffer.webGLFramebuffer),B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_2D,g.texture.webGLTexture,0),O&&(D?B.clearColor(0,0,0,0):B.clearColor(0,0,0,1),B.clear(B.COLOR_BUFFER_BIT)),B.activeTexture(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,y.texture.webGLTexture),B.copyTexSubImage2D(B.TEXTURE_2D,0,0,0,T,P,A,b),B.bindFramebuffer(B.FRAMEBUFFER,null),B.bindTexture(B.TEXTURE_2D,null)},copyToGame:function(g){var y=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),y.activeTexture(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,g.texture.webGLTexture),y.bufferData(y.ARRAY_BUFFER,this.vertexData,y.STATIC_DRAW),y.drawArrays(y.TRIANGLES,0,6)},drawFrame:function(g,y,T,P){T===void 0&&(T=!0),P===void 0&&(P=this.colorMatrix);var A=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",P.getData()),this.set1f("uAlpha",P.alpha),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,g.texture.webGLTexture),y?(A.viewport(0,0,y.width,y.height),A.bindFramebuffer(A.FRAMEBUFFER,y.framebuffer.webGLFramebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,y.texture.webGLTexture,0)):A.viewport(0,0,g.width,g.height),T?A.clearColor(0,0,0,0):A.clearColor(0,0,0,1),A.clear(A.COLOR_BUFFER_BIT),A.bufferData(A.ARRAY_BUFFER,this.vertexData,A.STATIC_DRAW),A.drawArrays(A.TRIANGLES,0,6),A.bindFramebuffer(A.FRAMEBUFFER,null),A.bindTexture(A.TEXTURE_2D,null)},blendFrames:function(g,y,T,P,A,b){P===void 0&&(P=1),A===void 0&&(A=!0),b===void 0&&(b=this.linearShader);var O=this.gl;this.setShader(b),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",P),O.activeTexture(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,g.texture.webGLTexture),O.activeTexture(O.TEXTURE1),O.bindTexture(O.TEXTURE_2D,y.texture.webGLTexture),T?(O.bindFramebuffer(O.FRAMEBUFFER,T.framebuffer.webGLFramebuffer),O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,T.texture.webGLTexture,0),O.viewport(0,0,T.width,T.height)):O.viewport(0,0,g.width,g.height),A?O.clearColor(0,0,0,0):O.clearColor(0,0,0,1),O.clear(O.COLOR_BUFFER_BIT),O.bufferData(O.ARRAY_BUFFER,this.vertexData,O.STATIC_DRAW),O.drawArrays(O.TRIANGLES,0,6),O.bindFramebuffer(O.FRAMEBUFFER,null),O.bindTexture(O.TEXTURE_2D,null)},blendFramesAdditive:function(g,y,T,P,A){this.blendFrames(g,y,T,P,A,this.addShader)},clearFrame:function(g,y){y===void 0&&(y=!0);var T=this.gl;T.viewport(0,0,g.width,g.height),T.bindFramebuffer(T.FRAMEBUFFER,g.framebuffer.webGLFramebuffer),y?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT);var P=this.renderer.currentFramebuffer;T.bindFramebuffer(T.FRAMEBUFFER,P.webGLFramebuffer)},setUVs:function(g,y,T,P,A,b,O,D){var B=this.vertexViewF32;B[2]=g,B[3]=y,B[6]=T,B[7]=P,B[10]=A,B[11]=b,B[14]=g,B[15]=y,B[18]=A,B[19]=b,B[22]=O,B[23]=D},setTargetUVs:function(g,y){var T=y.height/g.height;T>.5?T=.5-(T-.5):T=.5+(.5-T),this.setUVs(0,T,0,1+T,1,1+T,1,T)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});m.exports=x},36060:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"};m.exports=E},84817:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pipelineafterflush"},36712:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pipelinebeforeflush"},40285:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pipelinebind"},65918:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pipelineboot"},92852:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pipelinedestroy"},56072:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pipelinerebind"},57566:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pipelineresize"},77085:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={AFTER_FLUSH:i(84817),BEFORE_FLUSH:i(36712),BIND:i(40285),BOOT:i(65918),DESTROY:i(92852),REBIND:i(56072),RESIZE:i(57566)}},54812:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(99155),u=i(84057),l=new d({Extends:u,initialize:function(r){u.call(this,{game:r,fragShader:S}),this.amount=1},onPreRender:function(h,r){h=this.getController(h),this.set1f("amount",h.amount,r)}});m.exports=l},67329:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(24400),u=i(84057),l=new d({Extends:u,initialize:function(r){u.call(this,{game:r,fragShader:S}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(h){h=this.getController(h),this.set1f("strength",h.blurStrength),this.set3fv("color",h.glcolor)},onDraw:function(h){var r=this.getController(),o=this.fullFrame1,p=this.fullFrame2;this.copyFrame(h,p);for(var a=2/h.width*r.offsetX,v=2/h.height*r.offsetY,x=0;x<r.steps;x++)this.set2f("offset",a,0),this.copySprite(h,o),this.set2f("offset",0,v),this.copySprite(o,h);this.blendFrames(p,h,o,r.strength),this.copyToGame(o)}});m.exports=l},8861:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(41514),u=i(51078),l=i(94328),h=i(84057),r=new d({Extends:h,initialize:function(p){h.call(this,{game:p,shaders:[{name:"Gaussian5",fragShader:S},{name:"Gaussian9",fragShader:u},{name:"Gaussian13",fragShader:l}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(o){var p=this.getController(),a=this.gl,v=this.fullFrame1,x=a.getParameter(a.FRAMEBUFFER_BINDING);this.bind(this.shaders[p.quality]),a.activeTexture(a.TEXTURE0),a.viewport(0,0,o.width,o.height),this.set1i("uMainSampler",0),this.set2f("resolution",o.width,o.height),this.set1f("strength",p.strength),this.set3fv("color",p.glcolor);for(var g=0;g<p.steps;g++)this.set2f("offset",p.x,0),this.copySprite(o,v),this.set2f("offset",0,p.y),this.copySprite(v,o);a.bindFramebuffer(a.FRAMEBUFFER,x),a.bindTexture(a.TEXTURE_2D,null),this.copyToGame(o)}});m.exports=r},51051:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(90610),u=i(84057),l=new d({Extends:u,initialize:function(r){u.call(this,{game:r,fragShader:S}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(h,r,o,p){h=this.getController(h),this.set1f("radius",h.radius,r),this.set1f("amount",h.amount,r),this.set1f("contrast",h.contrast,r),this.set1f("strength",h.strength,r),this.set2f("blur",h.blurX,h.blurY,r),this.setBoolean("isTiltShift",h.isTiltShift,r),o&&p&&this.set2f("resolution",o,p,r)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});m.exports=l},89428:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(91899),u=i(84057),l=new d({Extends:u,initialize:function(r){u.call(this,{game:r,fragShader:S}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(h,r,o,p){h=this.getController(h),this.set1f("scale",h.scale,r),this.set1f("feather",h.feather,r),this.set1f("thickness",h.thickness,r),this.set3fv("color",h.glcolor,r),this.set4fv("backgroundColor",h.glcolor2,r),o&&p&&this.set2f("resolution",o,p,r)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});m.exports=l},88904:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(84057),u=new d({Extends:S,initialize:function(h){S.call(this,{game:h})},onDraw:function(l){var h=this.fullFrame1;this.controller?this.manager.drawFrame(l,h,!0,this.controller):this.drawFrame(l,h),this.copyToGame(h)}});m.exports=u},63563:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(47838),u=i(84057),l=new d({Extends:u,initialize:function(r){u.call(this,{game:r,fragShader:S}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(h){var r=this.game.textures.getFrame(h);r&&(this.glTexture=r.glTexture)},onDraw:function(h){var r=this.getController(),o=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",r.x,r.y),this.bindTexture(r.glTexture,1),this.copySprite(h,o),this.copyToGame(o)}});m.exports=l},94045:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(95540),u=i(98656),l=i(84057),h=i(70554),r=new d({Extends:l,initialize:function(p,a){var v=S(a,"quality",.1),x=S(a,"distance",10);l.call(this,{game:p,fragShader:h.setGlowQuality(u,p,v,x)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(o,p,a,v){o=this.getController(o),this.set1f("outerStrength",o.outerStrength,p),this.set1f("innerStrength",o.innerStrength,p),this.set4fv("glowColor",o.glcolor,p),this.setBoolean("knockout",o.knockout,p),a&&v&&this.set2f("resolution",a,v,p)},onDraw:function(o){this.set2f("resolution",o.width,o.height),this.bindAndDraw(o)}});m.exports=r},74088:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(70463),u=i(84057),l=new d({Extends:u,initialize:function(r){u.call(this,{game:r,fragShader:S}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(h,r){h=this.getController(h),this.set1f("alpha",h.alpha,r),this.set1i("size",h.size,r),this.set3fv("color1",h.glcolor1,r),this.set3fv("color2",h.glcolor2,r),this.set2f("positionFrom",h.fromX,h.fromY,r),this.set2f("positionTo",h.toX,h.toY,r)}});m.exports=l},99636:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(50831),u=i(84057),l=new d({Extends:u,initialize:function(r){u.call(this,{game:r,fragShader:S}),this.amount=1},onPreRender:function(h,r,o,p){h=this.getController(h),this.set1f("amount",h.amount,r),o&&p&&this.set2f("resolution",o,p,r)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});m.exports=l},34700:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(92595),u=i(84057),l=new d({Extends:u,initialize:function(r){u.call(this,{game:r,fragShader:S}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(h,r){h=this.getController(h);var o=h.samples;this.set1i("samples",o,r),this.set1f("intensity",h.intensity,r),this.set1f("decay",h.decay,r),this.set1f("power",h.power/o,r),this.set2f("lightPosition",h.x,h.y,r),this.set4fv("color",h.glcolor,r)}});m.exports=l},91157:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(72464),u=i(84057),l=new d({Extends:u,initialize:function(r){u.call(this,{game:r,fragShader:S}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(h,r,o,p){h=this.getController(h),this.setTime("time",r),this.set1f("speed",h.speed,r),this.set1f("lineWidth",h.lineWidth,r),this.set1f("gradient",h.gradient,r),this.setBoolean("reveal",h.reveal,r),o&&p&&this.set2f("resolution",o,p,r)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});m.exports=l},27797:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(39249),u=i(84057),l=new d({Extends:u,initialize:function(r){u.call(this,{game:r,fragShader:S}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(h,r){h=this.getController(h),this.set1f("radius",h.radius,r),this.set1f("strength",h.strength,r),this.set2f("position",h.x,h.y,r)}});m.exports=l},67603:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(2878),u=i(84057),l=new d({Extends:u,initialize:function(r){u.call(this,{game:r,fragShader:S}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(h,r){h=this.getController(h);var o=h.progress,p=h.wipeWidth,a=h.direction,v=h.axis;this.set4f("config",o,p,a,v,r),this.setBoolean("reveal",h.reveal,r)}});m.exports=l},58918:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={Barrel:i(54812),Bloom:i(67329),Blur:i(8861),Bokeh:i(51051),Circle:i(89428),ColorMatrix:i(88904),Displacement:i(63563),Glow:i(94045),Gradient:i(74088),Pixelate:i(99636),Shadow:i(34700),Shine:i(91157),Vignette:i(27797),Wipe:i(67603)};m.exports=d},96615:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(36060),S=i(79291),u={FX:i(58918),BitmapMaskPipeline:i(31302),Events:i(77085),FXPipeline:i(92651),LightPipeline:i(96569),MobilePipeline:i(56527),MultiPipeline:i(57516),PointLightPipeline:i(43439),PostFXPipeline:i(84057),PreFXPipeline:i(43558),RopePipeline:i(81041),SinglePipeline:i(12385),UtilityPipeline:i(7589)};u=S(!1,u,d),m.exports=u},35407:m=>{m.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)},78908:m=>{m.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)},85191:m=>{m.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)},96293:m=>{m.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)},36682:m=>{m.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)},99155:m=>{m.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)},24400:m=>{m.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)},94328:m=>{m.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},41514:m=>{m.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},51078:m=>{m.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},90610:m=>{m.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)},91899:m=>{m.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)},47838:m=>{m.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)},98656:m=>{m.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)},70463:m=>{m.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)},50831:m=>{m.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)},92595:m=>{m.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)},72464:m=>{m.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)},39249:m=>{m.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)},2878:m=>{m.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)},31063:m=>{m.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)},48247:m=>{m.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)},41214:m=>{m.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)},39653:m=>{m.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)},62143:m=>{m.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},47940:m=>{m.exports=["#define SHADER_NAME PHASER_MOBILE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},98840:m=>{m.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},44667:m=>{m.exports=["#define SHADER_NAME PHASER_MULTI_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},4127:m=>{m.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)},89924:m=>{m.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)},27681:m=>{m.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)},49627:m=>{m.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)},45561:m=>{m.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},60722:m=>{m.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},89350:(m,E,i)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={AddBlendFrag:i(35407),BitmapMaskFrag:i(78908),BitmapMaskVert:i(85191),ColorMatrixFrag:i(96293),CopyFrag:i(36682),FXBarrelFrag:i(99155),FXBloomFrag:i(24400),FXBlurHighFrag:i(94328),FXBlurLowFrag:i(41514),FXBlurMedFrag:i(51078),FXBokehFrag:i(90610),FXCircleFrag:i(91899),FXDisplacementFrag:i(47838),FXGlowFrag:i(98656),FXGradientFrag:i(70463),FXPixelateFrag:i(50831),FXShadowFrag:i(92595),FXShineFrag:i(72464),FXVignetteFrag:i(39249),FXWipeFrag:i(2878),LightFrag:i(31063),LinearBlendFrag:i(48247),MeshFrag:i(41214),MeshVert:i(39653),MobileFrag:i(62143),MobileVert:i(47940),MultiFrag:i(98840),MultiVert:i(44667),PointLightFrag:i(4127),PointLightVert:i(89924),PostFXFrag:i(27681),QuadVert:i(49627),SingleFrag:i(45561),SingleVert:i(60722)}},93567:(m,E,i)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=new d({initialize:function(l,h,r){this.webGLAttribLocation=-1,this.gl=l,this.program=h,this.name=r,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLAttribLocation=-1;return}var u=this.gl;u.isContextLost()||(this.webGLAttribLocation=u.getAttribLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLAttribLocation=-1}});m.exports=S},26128:(m,E,i)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=new d({initialize:function(l,h,r,o){this.webGLBuffer=null,this.gl=l,this.initialDataOrSize=h,this.bufferType=r,this.bufferUsage=o,this.createResource()},createResource:function(){if(this.initialDataOrSize!==null){var u=this.gl;if(!u.isContextLost()){var l=this.bufferType,h=u.createBuffer();this.webGLBuffer=h,u.bindBuffer(l,this.webGLBuffer),u.bufferData(l,this.initialDataOrSize,this.bufferUsage),u.bindBuffer(l,null)}}},destroy:function(){var u=this.gl;u.isContextLost()||u.deleteBuffer(this.webGLBuffer),this.webGLBuffer=null,this.initialDataOrSize=null,this.gl=null}});m.exports=S},84387:(m,E,i)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"},u=new d({initialize:function(h,r,o,p,a){this.webGLFramebuffer=null,this.gl=h,this.width=r,this.height=o,this.renderTexture=p,this.addDepthStencilBuffer=!!a,this.createResource()},createResource:function(){var l=this.gl;if(!l.isContextLost()){var h=this.renderTexture,r=0,o=l.createFramebuffer();if(this.webGLFramebuffer=o,l.bindFramebuffer(l.FRAMEBUFFER,o),h.isRenderTexture=!0,h.isAlphaPremultiplied=!1,l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,h.webGLTexture,0),r=l.checkFramebufferStatus(l.FRAMEBUFFER),r!==l.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+(S[r]||r));if(this.addDepthStencilBuffer){var p=l.createRenderbuffer();l.bindRenderbuffer(l.RENDERBUFFER,p),l.renderbufferStorage(l.RENDERBUFFER,l.DEPTH_STENCIL,this.width,this.height),l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,p)}l.bindFramebuffer(l.FRAMEBUFFER,null)}},destroy:function(){if(this.webGLFramebuffer!==null){var l=this.gl;if(!l.isContextLost()){l.bindFramebuffer(l.FRAMEBUFFER,this.webGLFramebuffer);var h=l.getFramebufferAttachmentParameter(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);h!==null&&(l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,null,0),l.deleteTexture(h));var r=l.getFramebufferAttachmentParameter(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);r!==null&&l.deleteRenderbuffer(r),l.bindFramebuffer(l.FRAMEBUFFER,null),l.deleteFramebuffer(this.webGLFramebuffer)}this.renderTexture=null,this.webGLFramebuffer=null,this.gl=null}}});m.exports=u},1482:(m,E,i)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=new d({initialize:function(l,h,r){this.webGLProgram=null,this.gl=l,this.vertexSource=h,this.fragmentSource=r,this.createResource()},createResource:function(){var u=this.gl;if(!u.isContextLost()){var l=u.createProgram(),h=u.createShader(u.VERTEX_SHADER),r=u.createShader(u.FRAGMENT_SHADER);u.shaderSource(h,this.vertexSource),u.shaderSource(r,this.fragmentSource),u.compileShader(h),u.compileShader(r);var o=`Shader failed:
`;if(!u.getShaderParameter(h,u.COMPILE_STATUS))throw new Error("Vertex "+o+u.getShaderInfoLog(h));if(!u.getShaderParameter(r,u.COMPILE_STATUS))throw new Error("Fragment "+o+u.getShaderInfoLog(r));if(u.attachShader(l,h),u.attachShader(l,r),u.linkProgram(l),!u.getProgramParameter(l,u.LINK_STATUS))throw new Error("Link "+o+u.getProgramInfoLog(l));u.useProgram(l),this.webGLProgram=l}},destroy:function(){this.webGLProgram&&(this.gl.isContextLost()||this.gl.deleteProgram(this.webGLProgram),this.webGLProgram=null,this.gl=null)}});m.exports=S},82751:(m,E,i)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(50030),u=new d({initialize:function(h,r,o,p,a,v,x,g,y,T,P,A,b){this.webGLTexture=null,this.isRenderTexture=!1,this.gl=h,this.mipLevel=r,this.minFilter=o,this.magFilter=p,this.wrapT=a,this.wrapS=v,this.format=x,this.pixels=g,this.width=y,this.height=T,this.pma=P??!0,this.forceSize=!!A,this.flipY=!!b,this.__SPECTOR_Metadata={},this.createResource()},createResource:function(){var l=this.gl;if(!l.isContextLost()){if(this.pixels instanceof u){this.webGLTexture=this.pixels.webGLTexture;return}var h=l.createTexture();h.__SPECTOR_Metadata=this.__SPECTOR_Metadata,this.webGLTexture=h,this._processTexture()}},update:function(l,h,r,o,p,a,v,x,g){if(!(h===0||r===0)){this.pixels=l,this.width=h,this.height=r,this.flipY=o,this.wrapS=p,this.wrapT=a,this.minFilter=v,this.magFilter=x,this.format=g;var y=this.gl;y.isContextLost()||this._processTexture()}},_processTexture:function(){var l=this.gl;l.activeTexture(l.TEXTURE0);var h=l.getParameter(l.TEXTURE_BINDING_2D);l.bindTexture(l.TEXTURE_2D,this.webGLTexture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,this.minFilter),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,this.magFilter),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,this.wrapS),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,this.wrapT),l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.pma),l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,this.flipY);var r=this.pixels,o=this.mipLevel,p=this.width,a=this.height,v=this.format,x=!1;if(r==null)l.texImage2D(l.TEXTURE_2D,o,v,p,a,0,v,l.UNSIGNED_BYTE,null),x=S(p,a);else if(r.compressed){p=r.width,a=r.height,x=r.generateMipmap;for(var g=0;g<r.mipmaps.length;g++)l.compressedTexImage2D(l.TEXTURE_2D,g,r.internalFormat,r.mipmaps[g].width,r.mipmaps[g].height,0,r.mipmaps[g].data)}else r instanceof Uint8Array?(l.texImage2D(l.TEXTURE_2D,o,v,p,a,0,v,l.UNSIGNED_BYTE,r),x=S(p,a)):(this.forceSize||(p=r.width,a=r.height),l.texImage2D(l.TEXTURE_2D,o,v,v,l.UNSIGNED_BYTE,r),x=S(p,a));x&&l.generateMipmap(l.TEXTURE_2D),h?l.bindTexture(l.TEXTURE_2D,h):l.bindTexture(l.TEXTURE_2D,null)},spectorMetadata:{get:function(){return this.__SPECTOR_Metadata},set:function(l){this.__SPECTOR_Metadata=l,this.gl.isContextLost()||(this.webGLTexture.__SPECTOR_Metadata=l)}},destroy:function(){this.webGLTexture!==null&&(this.gl.isContextLost()||this.pixels instanceof u||this.gl.deleteTexture(this.webGLTexture),this.pixels=null,this.webGLTexture=null,this.gl=null)}});m.exports=u},57183:(m,E,i)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=new d({initialize:function(l,h,r){this.webGLUniformLocation=null,this.gl=l,this.program=h,this.name=r,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLUniformLocation=null;return}var u=this.gl;u.isContextLost()||(this.webGLUniformLocation=u.getUniformLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLUniformLocation=null}});m.exports=S},9503:(m,E,i)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={WebGLAttribLocationWrapper:i(93567),WebGLBufferWrapper:i(26128),WebGLProgramWrapper:i(1482),WebGLTextureWrapper:i(82751),WebGLFramebufferWrapper:i(84387),WebGLUniformLocationWrapper:i(57183)};m.exports=d},76531:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(13560),S=i(83419),u=i(45319),l=i(50792),h=i(97480),r=i(8443),o=i(57811),p=i(74403),a=i(45818),v=i(29747),x=i(87841),g=i(86555),y=i(56583),T=i(26099),P=i(38058),A=new S({Extends:l,initialize:function(O){l.call(this),this.game=O,this.canvas,this.canvasBounds=new x,this.parent=null,this.parentIsWindow=!1,this.parentSize=new g,this.gameSize=new g,this.baseSize=new g,this.displaySize=new g,this.scaleMode=d.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new T(1,1),this.autoRound=!1,this.autoCenter=d.CENTER.NO_CENTER,this.orientation=d.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:v,windowResize:v,fullScreenChange:v,fullScreenError:v}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(r.BOOT,this.boot,this)},boot:function(){var b=this.game;this.canvas=b.canvas,this.fullscreen=b.device.fullscreen;var O=this.scaleMode;O!==d.SCALE_MODE.RESIZE&&O!==d.SCALE_MODE.EXPAND&&this.displaySize.setAspectMode(O),O===d.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),b.events.on(r.PRE_STEP,this.step,this),b.events.once(r.READY,this.refresh,this),b.events.once(r.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(b){this.getParent(b),this.getParentBounds();var O=b.width,D=b.height,B=b.scaleMode,G=b.zoom,V=b.autoRound;if(typeof O=="string")if(O.substr(-1)!=="%")O=parseInt(O,10);else{var k=this.parentSize.width;k===0&&(k=window.innerWidth);var U=parseInt(O,10)/100;O=Math.floor(k*U)}if(typeof D=="string")if(D.substr(-1)!=="%")D=parseInt(D,10);else{var W=this.parentSize.height;W===0&&(W=window.innerHeight);var X=parseInt(D,10)/100;D=Math.floor(W*X)}this.scaleMode=B,this.autoRound=V,this.autoCenter=b.autoCenter,this.resizeInterval=b.resizeInterval,V&&(O=Math.floor(O),D=Math.floor(D)),this.gameSize.setSize(O,D),G===d.ZOOM.MAX_ZOOM&&(G=this.getMaxZoom()),this.zoom=G,G!==1&&(this._resetZoom=!0),this.baseSize.setSize(O,D),V&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),b.minWidth>0&&this.displaySize.setMin(b.minWidth*G,b.minHeight*G),b.maxWidth>0&&this.displaySize.setMax(b.maxWidth*G,b.maxHeight*G),this.displaySize.setSize(O,D),(b.snapWidth>0||b.snapHeight>0)&&this.displaySize.setSnap(b.snapWidth,b.snapHeight),this.orientation=a(O,D)},getParent:function(b){var O=b.parent;if(O!==null){if(this.parent=p(O),this.parentIsWindow=this.parent===document.body,b.expandParent&&b.scaleMode!==d.SCALE_MODE.NONE){var D=this.parent.getBoundingClientRect();(this.parentIsWindow||D.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",D=this.parent.getBoundingClientRect(),!this.parentIsWindow&&D.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}b.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=p(b.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var b=this.parentSize,O=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(O.height=o(!0));var D=O.width,B=O.height;if(b.width!==D||b.height!==B)return b.setSize(D,B),!0;if(this.canvas){var G=this.canvasBounds,V=this.canvas.getBoundingClientRect();if(V.x!==G.x||V.y!==G.y)return!0}return!1},lockOrientation:function(b){var O=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return O?O.call(screen,b):!1},setParentSize:function(b,O){return this.parentSize.setSize(b,O),this.refresh()},setGameSize:function(b,O){var D=this.autoRound;D&&(b=Math.floor(b),O=Math.floor(O));var B=this.width,G=this.height;return this.gameSize.resize(b,O),this.baseSize.resize(b,O),D&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(b/O),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(B,G)},resize:function(b,O){var D=this.zoom,B=this.autoRound;B&&(b=Math.floor(b),O=Math.floor(O));var G=this.width,V=this.height;this.gameSize.resize(b,O),this.baseSize.resize(b,O),B&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(b*D,O*D),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var k=this.canvas.style,U=b*D,W=O*D;return B&&(U=Math.floor(U),W=Math.floor(W)),(U!==b||W!==O)&&(k.width=U+"px",k.height=W+"px"),this.refresh(G,V)},setZoom:function(b){return this.zoom=b,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},setSnap:function(b,O){return b===void 0&&(b=0),O===void 0&&(O=b),this.displaySize.setSnap(b,O),this.refresh()},refresh:function(b,O){b===void 0&&(b=this.width),O===void 0&&(O=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var D=this.game.domContainer;if(D){this.baseSize.setCSS(D);var B=this.canvas.style,G=D.style;G.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",G.marginLeft=B.marginLeft,G.marginTop=B.marginTop}return this.emit(h.RESIZE,this.gameSize,this.baseSize,this.displaySize,b,O),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var b=a(this.width,this.height);b!==this.orientation&&(this.orientation=b,this.emit(h.ORIENTATION_CHANGE,b))}},updateScale:function(){var b=this.canvas.style,O=this.gameSize.width,D=this.gameSize.height,B,G,V=this.zoom,k=this.autoRound;if(this.scaleMode===d.SCALE_MODE.NONE)this.displaySize.setSize(O*V,D*V),B=this.displaySize.width,G=this.displaySize.height,k&&(B=Math.floor(B),G=Math.floor(G)),this._resetZoom&&(b.width=B+"px",b.height=G+"px",this._resetZoom=!1);else if(this.scaleMode===d.SCALE_MODE.RESIZE)this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),B=this.displaySize.width,G=this.displaySize.height,k&&(B=Math.floor(B),G=Math.floor(G)),this.canvas.width=B,this.canvas.height=G;else if(this.scaleMode===d.SCALE_MODE.EXPAND){var U=this.game.config.width,W=this.game.config.height,X=this.parentSize.width,_=this.parentSize.height,Q=X/U,j=_/W,it,K;Q<j?(it=U,K=Q!==0?_/Q:W):(it=j!==0?X/j:U,K=W);var J=u(it,this.displaySize.minWidth,this.displaySize.maxWidth),Y=u(K,this.displaySize.minHeight,this.displaySize.maxHeight);this.baseSize.setSize(J,Y),this.gameSize.setSize(J,Y),k&&(J=Math.floor(J),Y=Math.floor(Y)),this.canvas.width=J,this.canvas.height=Y;var q=X*(J/it),$=_*(Y/K);this.displaySize.setSize(q,$),B=this.displaySize.width,G=this.displaySize.height,k&&(B=Math.floor(B),G=Math.floor(G)),b.width=B+"px",b.height=G+"px"}else this.displaySize.setSize(this.parentSize.width,this.parentSize.height),B=this.displaySize.width,G=this.displaySize.height,k&&(B=Math.floor(B),G=Math.floor(G)),b.width=B+"px",b.height=G+"px";this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var b=y(this.parentSize.width,this.gameSize.width,0,!0),O=y(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(b,O),1)},updateCenter:function(){var b=this.autoCenter;if(b!==d.CENTER.NO_CENTER){var O=this.canvas,D=O.style,B=O.getBoundingClientRect(),G=B.width,V=B.height,k=Math.floor((this.parentSize.width-G)/2),U=Math.floor((this.parentSize.height-V)/2);b===d.CENTER.CENTER_HORIZONTALLY?U=0:b===d.CENTER.CENTER_VERTICALLY&&(k=0),D.marginLeft=k+"px",D.marginTop=U+"px"}},updateBounds:function(){var b=this.canvasBounds,O=this.canvas.getBoundingClientRect();b.x=O.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),b.y=O.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),b.width=O.width,b.height=O.height},transformX:function(b){return(b-this.canvasBounds.left)*this.displayScale.x},transformY:function(b){return(b-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(b){b===void 0&&(b={navigationUI:"hide"});var O=this.fullscreen;if(!O.available){this.emit(h.FULLSCREEN_UNSUPPORTED);return}if(!O.active){var D=this.getFullscreenTarget();O.keyboard?D[O.request](Element.ALLOW_KEYBOARD_INPUT):D[O.request](b)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(h.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(b){this.removeFullscreenTarget(),this.emit(h.FULLSCREEN_FAILED,b)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var b=document.createElement("div");b.style.margin="0",b.style.padding="0",b.style.width="100%",b.style.height="100%",this.fullscreenTarget=b,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var O=this.canvas.parentNode;O.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var b=this.fullscreenTarget;if(b&&b.parentNode){var O=b.parentNode;O.insertBefore(this.canvas,b),O.removeChild(b)}}},stopFullscreen:function(){var b=this.fullscreen;if(!b.available)return this.emit(h.FULLSCREEN_UNSUPPORTED),!1;b.active&&document[b.cancel](),this.removeFullscreenTarget()},leaveFullScreenSuccessHandler:function(){this.getParentBounds(),this.emit(h.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(b){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(b)},startListeners:function(){var b=this,O=this.domlisteners;if(O.orientationChange=function(){b.updateBounds(),b._checkOrientation=!0,b.dirty=!0,b.refresh()},O.windowResize=function(){b.updateBounds(),b.dirty=!0},screen.orientation&&screen.orientation.addEventListener?screen.orientation.addEventListener("change",O.orientationChange,!1):window.addEventListener("orientationchange",O.orientationChange,!1),window.addEventListener("resize",O.windowResize,!1),this.fullscreen.available){O.fullScreenChange=function(B){return b.onFullScreenChange(B)},O.fullScreenError=function(B){return b.onFullScreenError(B)};var D=["webkit","moz",""];D.forEach(function(B){document.addEventListener(B+"fullscreenchange",O.fullScreenChange,!1),document.addEventListener(B+"fullscreenerror",O.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",O.fullScreenChange,!1),document.addEventListener("MSFullscreenError",O.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():(this.stopFullscreen(),this.leaveFullScreenSuccessHandler())},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(b,O){b instanceof P||(O=b,b=void 0),O===void 0&&(O=new x);var D=this.baseSize,B=this.parentSize,G=this.canvasBounds,V=this.displayScale,k=G.x>=0?0:-(G.x*V.x),U=G.y>=0?0:-(G.y*V.y),W;B.width>=G.width?W=D.width:W=D.width-(G.width-B.width)*V.x;var X;return B.height>=G.height?X=D.height:X=D.height-(G.height-B.height)*V.y,O.setTo(k,U,W,X),b&&(O.width/=b.zoomX,O.height/=b.zoomY,O.centerX=b.centerX+b.scrollX,O.centerY=b.centerY+b.scrollY),O},step:function(b,O){this.parent&&(this._lastCheck+=O,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var b=this.domlisteners;screen.orientation&&screen.orientation.addEventListener?screen.orientation.removeEventListener("change",b.orientationChange,!1):window.removeEventListener("orientationchange",b.orientationChange,!1),window.removeEventListener("resize",b.windowResize,!1);var O=["webkit","moz",""];O.forEach(function(D){document.removeEventListener(D+"fullscreenchange",b.fullScreenChange,!1),document.removeEventListener(D+"fullscreenerror",b.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",b.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",b.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===d.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===d.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});m.exports=A},64743:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},39218:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={LANDSCAPE:"landscape-primary",LANDSCAPE_SECONDARY:"landscape-secondary",PORTRAIT:"portrait-primary",PORTRAIT_SECONDARY:"portrait-secondary"}},81050:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5,EXPAND:6}},80805:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},13560:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={CENTER:i(64743),ORIENTATION:i(39218),SCALE_MODE:i(81050),ZOOM:i(80805)};m.exports=d},56139:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="enterfullscreen"},2336:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="fullscreenfailed"},47412:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="fullscreenunsupported"},51452:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="leavefullscreen"},20666:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="orientationchange"},47945:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="resize"},97480:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={ENTER_FULLSCREEN:i(56139),FULLSCREEN_FAILED:i(2336),FULLSCREEN_UNSUPPORTED:i(47412),LEAVE_FULLSCREEN:i(51452),ORIENTATION_CHANGE:i(20666),RESIZE:i(47945)}},93364:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(79291),S=i(13560),u={Center:i(64743),Events:i(97480),Orientation:i(39218),ScaleManager:i(76531),ScaleModes:i(81050),Zoom:i(80805)};u=d(!1,u,S.CENTER),u=d(!1,u,S.ORIENTATION),u=d(!1,u,S.SCALE_MODE),u=d(!1,u,S.ZOOM),m.exports=u},27397:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(95540),S=i(35355),u=function(l){var h=l.game.config.defaultPhysicsSystem,r=d(l.settings,"physics",!1);if(!(!h&&!r)){var o=[];if(h&&o.push(S(h+"Physics")),r)for(var p in r)p=S(p.concat("Physics")),o.indexOf(p)===-1&&o.push(p);return o}};m.exports=u},52106:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(95540),S=function(u){var l=u.plugins.getDefaultScenePlugins(),h=d(u.settings,"plugins",!1);return Array.isArray(h)?h:l||[]};m.exports=S},87033:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};m.exports=E},97482:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(2368),u=new d({initialize:function(h){this.sys=new S(this,h),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});m.exports=u},60903:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(89993),u=i(44594),l=i(8443),h=i(35154),r=i(54899),o=i(29747),p=i(97482),a=i(2368),v=new d({initialize:function(g,y){if(this.game=g,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,y){Array.isArray(y)||(y=[y]);for(var T=0;T<y.length;T++)this._pending.push({key:"default",scene:y[T],autoStart:T===0,data:{}})}g.events.once(l.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){this.systemScene=this.createSceneFromInstance("__SYSTEM",new p),this.game.events.emit(l.SYSTEM_READY,this.systemScene,this);var x,g,y,T;for(x=0;x<this._pending.length;x++){g=this._pending[x],y=g.key,T=g.scene;var P;T instanceof p?P=this.createSceneFromInstance(y,T):typeof T=="object"?P=this.createSceneFromObject(y,T):typeof T=="function"&&(P=this.createSceneFromFunction(y,T)),y=P.sys.settings.key,this.keys[y]=P,this.scenes.push(P),this._data[y]&&(P.sys.settings.data=this._data[y].data,this._data[y].autoStart&&(g.autoStart=!0)),(g.autoStart||P.sys.settings.active)&&this._start.push(y)}for(this._pending.length=0,this._data={},this.isBooted=!0,x=0;x<this._start.length;x++)g=this._start[x],this.start(g);this._start.length=0}},processQueue:function(){var x=this._pending.length,g=this._queue.length;if(!(x===0&&g===0)){var y,T;if(x){for(y=0;y<x;y++)T=this._pending[y],this.add(T.key,T.scene,T.autoStart,T.data);for(y=0;y<this._start.length;y++)T=this._start[y],this.start(T);this._start.length=0,this._pending.length=0}for(y=0;y<this._queue.length;y++)T=this._queue[y],this[T.op](T.keyA,T.keyB,T.data);this._queue.length=0}},add:function(x,g,y,T){if(y===void 0&&(y=!1),T===void 0&&(T={}),this.isProcessing||!this.isBooted)return this._pending.push({key:x,scene:g,autoStart:y,data:T}),this.isBooted||(this._data[x]={data:T}),null;x=this.getKey(x,g);var P;return g instanceof p?P=this.createSceneFromInstance(x,g):typeof g=="object"?(g.key=x,P=this.createSceneFromObject(x,g)):typeof g=="function"&&(P=this.createSceneFromFunction(x,g)),P.sys.settings.data=T,x=P.sys.settings.key,this.keys[x]=P,this.scenes.push(P),(y||P.sys.settings.active)&&(this._pending.length?this._start.push(x):this.start(x)),P},remove:function(x){if(this.isProcessing)return this.queueOp("remove",x);var g=this.getScene(x);if(!g||g.sys.isTransitioning())return this;var y=this.scenes.indexOf(g),T=g.sys.settings.key;return y>-1&&(delete this.keys[T],this.scenes.splice(y,1),this._start.indexOf(T)>-1&&(y=this._start.indexOf(T),this._start.splice(y,1)),g.sys.destroy()),this},bootScene:function(x){var g=x.sys,y=g.settings;g.sceneUpdate=o,x.init&&(x.init.call(x,y.data),y.status=S.INIT,y.isTransition&&g.events.emit(u.TRANSITION_INIT,y.transitionFrom,y.transitionDuration));var T;g.load&&(T=g.load,T.reset()),T&&x.preload?(x.preload.call(x),y.status=S.LOADING,T.once(r.COMPLETE,this.loadComplete,this),T.start()):this.create(x)},loadComplete:function(x){this.create(x.scene)},payloadComplete:function(x){this.bootScene(x.scene)},update:function(x,g){this.processQueue(),this.isProcessing=!0;for(var y=this.scenes.length-1;y>=0;y--){var T=this.scenes[y].sys;T.settings.status>S.START&&T.settings.status<=S.RUNNING&&T.step(x,g),T.scenePlugin&&T.scenePlugin._target&&T.scenePlugin.step(x,g)}},render:function(x){for(var g=0;g<this.scenes.length;g++){var y=this.scenes[g].sys;y.settings.visible&&y.settings.status>=S.LOADING&&y.settings.status<S.SLEEPING&&y.render(x)}this.isProcessing=!1},create:function(x){var g=x.sys,y=g.settings;x.create&&(y.status=S.CREATING,x.create.call(x,y.data),y.status===S.DESTROYED)||(y.isTransition&&g.events.emit(u.TRANSITION_START,y.transitionFrom,y.transitionDuration),x.update&&(g.sceneUpdate=x.update),y.status=S.RUNNING,g.events.emit(u.CREATE,x))},createSceneFromFunction:function(x,g){var y=new g;if(y instanceof p){var T=y.sys.settings.key;if(T!==""&&(x=T),this.keys.hasOwnProperty(x))throw new Error("Cannot add Scene with duplicate key: "+x);return this.createSceneFromInstance(x,y)}else return y.sys=new a(y),y.sys.settings.key=x,y.sys.init(this.game),y},createSceneFromInstance:function(x,g){var y=g.sys.settings.key;return y===""&&(g.sys.settings.key=x),g.sys.init(this.game),g},createSceneFromObject:function(x,g){var y=new p(g),T=y.sys.settings.key;T!==""?x=T:y.sys.settings.key=x,y.sys.init(this.game);for(var P=["init","preload","create","update","render"],A=0;A<P.length;A++){var b=h(g,P[A],null);b&&(y[P[A]]=b)}if(g.hasOwnProperty("extend")){for(var O in g.extend)if(g.extend.hasOwnProperty(O)){var D=g.extend[O];O==="data"&&y.hasOwnProperty("data")&&typeof D=="object"?y.data.merge(D):O!=="sys"&&(y[O]=D)}}return y},getKey:function(x,g){if(x||(x="default"),typeof g=="function")return x;if(g instanceof p?x=g.sys.settings.key:typeof g=="object"&&g.hasOwnProperty("key")&&(x=g.key),this.keys.hasOwnProperty(x))throw new Error("Cannot add Scene with duplicate key: "+x);return x},getScenes:function(x,g){x===void 0&&(x=!0),g===void 0&&(g=!1);for(var y=[],T=this.scenes,P=0;P<T.length;P++){var A=T[P];A&&(!x||x&&A.sys.isActive())&&y.push(A)}return g?y.reverse():y},getScene:function(x){if(typeof x=="string"){if(this.keys[x])return this.keys[x]}else for(var g=0;g<this.scenes.length;g++)if(x===this.scenes[g])return x;return null},isActive:function(x){var g=this.getScene(x);return g?g.sys.isActive():null},isPaused:function(x){var g=this.getScene(x);return g?g.sys.isPaused():null},isVisible:function(x){var g=this.getScene(x);return g?g.sys.isVisible():null},isSleeping:function(x){var g=this.getScene(x);return g?g.sys.isSleeping():null},pause:function(x,g){var y=this.getScene(x);return y&&y.sys.pause(g),this},resume:function(x,g){var y=this.getScene(x);return y&&y.sys.resume(g),this},sleep:function(x,g){var y=this.getScene(x);return y&&!y.sys.isTransitioning()&&y.sys.sleep(g),this},wake:function(x,g){var y=this.getScene(x);return y&&y.sys.wake(g),this},run:function(x,g){var y=this.getScene(x);if(!y){for(var T=0;T<this._pending.length;T++)if(this._pending[T].key===x){this.queueOp("start",x,g);break}return this}y.sys.isSleeping()?y.sys.wake(g):y.sys.isPaused()?y.sys.resume(g):this.start(x,g)},start:function(x,g){if(!this.isBooted)return this._data[x]={autoStart:!0,data:g},this;var y=this.getScene(x);if(!y)return console.warn("Scene key not found: "+x),this;var T=y.sys,P=T.settings.status;if(P>=S.START&&P<=S.CREATING)return this;if(P>=S.RUNNING&&P<=S.SLEEPING)T.shutdown(),T.sceneUpdate=o,T.start(g);else{T.sceneUpdate=o,T.start(g);var A;if(T.load&&(A=T.load),A&&T.settings.hasOwnProperty("pack")&&(A.reset(),A.addPack({payload:T.settings.pack})))return T.settings.status=S.LOADING,A.once(r.COMPLETE,this.payloadComplete,this),A.start(),this}return this.bootScene(y),this},stop:function(x,g){var y=this.getScene(x);if(y&&!y.sys.isTransitioning()&&y.sys.settings.status!==S.SHUTDOWN){var T=y.sys.load;T&&(T.off(r.COMPLETE,this.loadComplete,this),T.off(r.COMPLETE,this.payloadComplete,this)),y.sys.shutdown(g)}return this},switch:function(x,g,y){var T=this.getScene(x),P=this.getScene(g);return T&&P&&T!==P&&(this.sleep(x),this.isSleeping(g)?this.wake(g,y):this.start(g,y)),this},getAt:function(x){return this.scenes[x]},getIndex:function(x){var g=this.getScene(x);return this.scenes.indexOf(g)},bringToTop:function(x){if(this.isProcessing)return this.queueOp("bringToTop",x);var g=this.getIndex(x),y=this.scenes;if(g!==-1&&g<y.length){var T=this.getScene(x);y.splice(g,1),y.push(T)}return this},sendToBack:function(x){if(this.isProcessing)return this.queueOp("sendToBack",x);var g=this.getIndex(x);if(g!==-1&&g>0){var y=this.getScene(x);this.scenes.splice(g,1),this.scenes.unshift(y)}return this},moveDown:function(x){if(this.isProcessing)return this.queueOp("moveDown",x);var g=this.getIndex(x);if(g>0){var y=g-1,T=this.getScene(x),P=this.getAt(y);this.scenes[g]=P,this.scenes[y]=T}return this},moveUp:function(x){if(this.isProcessing)return this.queueOp("moveUp",x);var g=this.getIndex(x);if(g<this.scenes.length-1){var y=g+1,T=this.getScene(x),P=this.getAt(y);this.scenes[g]=P,this.scenes[y]=T}return this},moveAbove:function(x,g){if(x===g)return this;if(this.isProcessing)return this.queueOp("moveAbove",x,g);var y=this.getIndex(x),T=this.getIndex(g);if(y!==-1&&T!==-1&&T<y){var P=this.getAt(T);this.scenes.splice(T,1),this.scenes.splice(y+(T>y),0,P)}return this},moveBelow:function(x,g){if(x===g)return this;if(this.isProcessing)return this.queueOp("moveBelow",x,g);var y=this.getIndex(x),T=this.getIndex(g);if(y!==-1&&T!==-1&&T>y){var P=this.getAt(T);this.scenes.splice(T,1),y===0?this.scenes.unshift(P):this.scenes.splice(y-(T<y),0,P)}return this},queueOp:function(x,g,y,T){return this._queue.push({op:x,keyA:g,keyB:y,data:T}),this},swapPosition:function(x,g){if(x===g)return this;if(this.isProcessing)return this.queueOp("swapPosition",x,g);var y=this.getIndex(x),T=this.getIndex(g);if(y!==T&&y!==-1&&T!==-1){var P=this.getAt(y);this.scenes[y]=this.scenes[T],this.scenes[T]=P}return this},dump:function(){for(var x=[],g=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],y=0;y<this.scenes.length;y++){var T=this.scenes[y].sys,P=T.settings.visible&&(T.settings.status===S.RUNNING||T.settings.status===S.PAUSED)?"[*] ":"[-] ";P+=T.settings.key+" ("+g[T.settings.status]+")",x.push(P)}console.log(x.join(`
`))},destroy:function(){for(var x=0;x<this.scenes.length;x++){var g=this.scenes[x].sys;g.destroy()}this.systemScene.sys.destroy(),this.update=o,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});m.exports=v},52209:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45319),S=i(83419),u=i(44594),l=i(95540),h=i(37277),r=new S({initialize:function(p){this.scene=p,this.systems=p.sys,this.settings=p.sys.settings,this.key=p.sys.settings.key,this.manager=p.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,p.sys.events.once(u.BOOT,this.boot,this),p.sys.events.on(u.START,this.pluginStart,this)},boot:function(){this.systems.events.once(u.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(u.SHUTDOWN,this.shutdown,this)},start:function(o,p){return o===void 0&&(o=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",o,p),this},restart:function(o){var p=this.key;return this.manager.queueOp("stop",p),this.manager.queueOp("start",p,o),this},transition:function(o){o===void 0&&(o={});var p=l(o,"target",!1),a=this.manager.getScene(p);if(!p||!this.checkValidTransition(a))return!1;var v=l(o,"duration",1e3);this._elapsed=0,this._target=a,this._duration=v,this._willSleep=l(o,"sleep",!1),this._willRemove=l(o,"remove",!1);var x=l(o,"onUpdate",null);x&&(this._onUpdate=x,this._onUpdateScope=l(o,"onUpdateScope",this.scene));var g=l(o,"allowInput",!1);this.settings.transitionAllowInput=g;var y=a.sys.settings;y.isTransition=!0,y.transitionFrom=this.scene,y.transitionDuration=v,y.transitionAllowInput=g,l(o,"moveAbove",!1)?this.manager.moveAbove(this.key,p):l(o,"moveBelow",!1)&&this.manager.moveBelow(this.key,p),a.sys.isSleeping()?a.sys.wake(l(o,"data")):this.manager.start(p,l(o,"data"));var T=l(o,"onStart",null),P=l(o,"onStartScope",this.scene);return T&&T.call(P,this.scene,a,v),this.systems.events.emit(u.TRANSITION_OUT,a,v),!0},checkValidTransition:function(o){return!(!o||o.sys.isActive()||o.sys.isTransitioning()||o===this.scene||this.systems.isTransitioning())},step:function(o,p){this._elapsed+=p,this.transitionProgress=d(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var o=this._target.sys,p=this._target.sys.settings;o.events.emit(u.TRANSITION_COMPLETE,this.scene),p.isTransition=!1,p.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(o,p,a,v){return this.manager.add(o,p,a,v)},launch:function(o,p){return o&&o!==this.key&&this.manager.queueOp("start",o,p),this},run:function(o,p){return o&&o!==this.key&&this.manager.queueOp("run",o,p),this},pause:function(o,p){return o===void 0&&(o=this.key),this.manager.queueOp("pause",o,p),this},resume:function(o,p){return o===void 0&&(o=this.key),this.manager.queueOp("resume",o,p),this},sleep:function(o,p){return o===void 0&&(o=this.key),this.manager.queueOp("sleep",o,p),this},wake:function(o,p){return o===void 0&&(o=this.key),this.manager.queueOp("wake",o,p),this},switch:function(o,p){return o!==this.key&&this.manager.queueOp("switch",this.key,o,p),this},stop:function(o,p){return o===void 0&&(o=this.key),this.manager.queueOp("stop",o,p),this},setActive:function(o,p,a){p===void 0&&(p=this.key);var v=this.manager.getScene(p);return v&&v.sys.setActive(o,a),this},setVisible:function(o,p){p===void 0&&(p=this.key);var a=this.manager.getScene(p);return a&&a.sys.setVisible(o),this},isSleeping:function(o){return o===void 0&&(o=this.key),this.manager.isSleeping(o)},isActive:function(o){return o===void 0&&(o=this.key),this.manager.isActive(o)},isPaused:function(o){return o===void 0&&(o=this.key),this.manager.isPaused(o)},isVisible:function(o){return o===void 0&&(o=this.key),this.manager.isVisible(o)},swapPosition:function(o,p){return p===void 0&&(p=this.key),o!==p&&this.manager.swapPosition(o,p),this},moveAbove:function(o,p){return p===void 0&&(p=this.key),o!==p&&this.manager.moveAbove(o,p),this},moveBelow:function(o,p){return p===void 0&&(p=this.key),o!==p&&this.manager.moveBelow(o,p),this},remove:function(o){return o===void 0&&(o=this.key),this.manager.remove(o),this},moveUp:function(o){return o===void 0&&(o=this.key),this.manager.moveUp(o),this},moveDown:function(o){return o===void 0&&(o=this.key),this.manager.moveDown(o),this},bringToTop:function(o){return o===void 0&&(o=this.key),this.manager.bringToTop(o),this},sendToBack:function(o){return o===void 0&&(o=this.key),this.manager.sendToBack(o),this},get:function(o){return this.manager.getScene(o)},getStatus:function(o){var p=this.manager.getScene(o);if(p)return p.sys.getStatus()},getIndex:function(o){return o===void 0&&(o=this.key),this.manager.getIndex(o)},shutdown:function(){var o=this.systems.events;o.off(u.SHUTDOWN,this.shutdown,this),o.off(u.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});h.register("ScenePlugin",r,"scenePlugin"),m.exports=r},55681:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(89993),S=i(35154),u=i(46975),l=i(87033),h={create:function(r){return typeof r=="string"?r={key:r}:r===void 0&&(r={}),{status:d.PENDING,key:S(r,"key",""),active:S(r,"active",!1),visible:S(r,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:S(r,"pack",!1),cameras:S(r,"cameras",null),map:S(r,"map",u(l,S(r,"mapAdd",{}))),physics:S(r,"physics",{}),loader:S(r,"loader",{}),plugins:S(r,"plugins",!1),input:S(r,"input",{})}}};m.exports=h},2368:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(89993),u=i(42363),l=i(44594),h=i(27397),r=i(52106),o=i(29747),p=i(55681),a=new d({initialize:function(x,g){this.scene=x,this.game,this.renderer,this.config=g,this.settings=p.create(g),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=o},init:function(v){this.settings.status=S.INIT,this.sceneUpdate=o,this.game=v,this.renderer=v.renderer,this.canvas=v.canvas,this.context=v.context;var x=v.plugins;this.plugins=x,x.addToScene(this,u.Global,[u.CoreScene,r(this),h(this)]),this.events.emit(l.BOOT,this),this.settings.isBooted=!0},step:function(v,x){var g=this.events;g.emit(l.PRE_UPDATE,v,x),g.emit(l.UPDATE,v,x),this.sceneUpdate.call(this.scene,v,x),g.emit(l.POST_UPDATE,v,x)},render:function(v){var x=this.displayList;x.depthSort(),this.events.emit(l.PRE_RENDER,v),this.cameras.render(v,x),this.events.emit(l.RENDER,v)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(v){var x=this.settings,g=this.getStatus();return g!==S.CREATING&&g!==S.RUNNING?console.warn("Cannot pause non-running Scene",x.key):this.settings.active&&(x.status=S.PAUSED,x.active=!1,this.events.emit(l.PAUSE,this,v)),this},resume:function(v){var x=this.events,g=this.settings;return this.settings.active||(g.status=S.RUNNING,g.active=!0,x.emit(l.RESUME,this,v)),this},sleep:function(v){var x=this.settings,g=this.getStatus();return g!==S.CREATING&&g!==S.RUNNING?console.warn("Cannot sleep non-running Scene",x.key):(x.status=S.SLEEPING,x.active=!1,x.visible=!1,this.events.emit(l.SLEEP,this,v)),this},wake:function(v){var x=this.events,g=this.settings;return g.status=S.RUNNING,g.active=!0,g.visible=!0,x.emit(l.WAKE,this,v),g.isTransition&&x.emit(l.TRANSITION_WAKE,g.transitionFrom,g.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var v=this.settings.status;return v>S.PENDING&&v<=S.RUNNING},isSleeping:function(){return this.settings.status===S.SLEEPING},isActive:function(){return this.settings.status===S.RUNNING},isPaused:function(){return this.settings.status===S.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(v){return this.settings.visible=v,this},setActive:function(v,x){return v?this.resume(x):this.pause(x)},start:function(v){var x=this.events,g=this.settings;v&&(g.data=v),g.status=S.START,g.active=!0,g.visible=!0,x.emit(l.START,this),x.emit(l.READY,this,v)},shutdown:function(v){var x=this.events,g=this.settings;x.off(l.TRANSITION_INIT),x.off(l.TRANSITION_START),x.off(l.TRANSITION_COMPLETE),x.off(l.TRANSITION_OUT),g.status=S.SHUTDOWN,g.active=!1,g.visible=!1,x.emit(l.SHUTDOWN,this,v)},destroy:function(){var v=this.events,x=this.settings;x.status=S.DESTROYED,x.active=!1,x.visible=!1,v.emit(l.DESTROY,this),v.removeAllListeners();for(var g=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],y=0;y<g.length;y++)this[g[y]]=null}});m.exports=a},89993:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};m.exports=E},69830:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="addedtoscene"},7919:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="boot"},46763:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="create"},11763:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="destroy"},71555:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pause"},36735:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="postupdate"},3809:m=>{/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="prerender"},90716:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="preupdate"},58262:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="ready"},91633:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="removedfromscene"},10319:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="render"},87132:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="resume"},81961:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="shutdown"},90194:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="sleep"},6265:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="start"},33178:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="transitioncomplete"},43063:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="transitioninit"},11259:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="transitionout"},61611:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="transitionstart"},45209:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="transitionwake"},22966:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="update"},21747:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="wake"},44594:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={ADDED_TO_SCENE:i(69830),BOOT:i(7919),CREATE:i(46763),DESTROY:i(11763),PAUSE:i(71555),POST_UPDATE:i(36735),PRE_RENDER:i(3809),PRE_UPDATE:i(90716),READY:i(58262),REMOVED_FROM_SCENE:i(91633),RENDER:i(10319),RESUME:i(87132),SHUTDOWN:i(81961),SLEEP:i(90194),START:i(6265),TRANSITION_COMPLETE:i(33178),TRANSITION_INIT:i(43063),TRANSITION_OUT:i(11259),TRANSITION_START:i(61611),TRANSITION_WAKE:i(45209),UPDATE:i(22966),WAKE:i(21747)}},62194:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(89993),S=i(79291),u={Events:i(44594),GetPhysicsPlugins:i(27397),GetScenePlugins:i(52106),SceneManager:i(60903),ScenePlugin:i(52209),Settings:i(55681),Systems:i(2368)};u=S(!1,u,d),m.exports=u},30341:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(50792),u=i(14463),l=i(79291),h=i(29747),r=new d({Extends:S,initialize:function(p,a,v){S.call(this),this.manager=p,this.key=a,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=l(this.config,v),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(o){return!o||!o.name||typeof o.name!="string"?!1:this.markers[o.name]?(console.error("addMarker "+o.name+" already exists in Sound"),!1):(o=l(!0,{name:"",start:0,duration:this.totalDuration-(o.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},o),this.markers[o.name]=o,!0)},updateMarker:function(o){return!o||!o.name||typeof o.name!="string"?!1:this.markers[o.name]?(this.markers[o.name]=l(!0,this.markers[o.name],o),!0):(console.warn("Audio Marker: "+o.name+" missing in Sound: "+this.key),!1)},removeMarker:function(o){var p=this.markers[o];return p?(this.markers[o]=null,p):null},play:function(o,p){if(o===void 0&&(o=""),typeof o=="object"&&(p=o,o=""),typeof o!="string")return!1;if(!o)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[o])return console.warn("Marker: "+o+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[o],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=l(this.currentConfig,p),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:h,calculateRate:function(){var o=1.0005777895065548,p=this.currentConfig.detune+this.manager.detune,a=Math.pow(o,p);this.totalRate=this.currentConfig.rate*this.manager.rate*a},destroy:function(){this.pendingRemove||(this.stop(),this.emit(u.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});m.exports=r},85034:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(41786),u=i(50792),l=i(14463),h=i(8443),r=i(46710),o=i(58731),p=i(29747),a=i(26099),v=new d({Extends:u,initialize:function(g){u.call(this),this.game=g,this.jsonCache=g.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new a;var y=g.events;y.on(h.BLUR,this.onGameBlur,this),y.on(h.FOCUS,this.onGameFocus,this),y.on(h.PRE_STEP,this.update,this),y.once(h.DESTROY,this.destroy,this)},add:p,addAudioSprite:function(x,g){g===void 0&&(g={});var y=this.add(x,g);y.spritemap=this.jsonCache.get(x).spritemap;for(var T in y.spritemap)if(y.spritemap.hasOwnProperty(T)){var P=S(g),A=y.spritemap[T];P.loop=A.hasOwnProperty("loop")?A.loop:!1,y.addMarker({name:T,start:A.start,duration:A.end-A.start,config:P})}return y},get:function(x){return o(this.sounds,"key",x)},getAll:function(x){return x?r(this.sounds,"key",x):r(this.sounds)},getAllPlaying:function(){return r(this.sounds,"isPlaying",!0)},play:function(x,g){var y=this.add(x);return y.once(l.COMPLETE,y.destroy,y),g?g.name?(y.addMarker(g),y.play(g.name)):y.play(g):y.play()},playAudioSprite:function(x,g,y){var T=this.addAudioSprite(x);return T.once(l.COMPLETE,T.destroy,T),T.play(g,y)},remove:function(x){var g=this.sounds.indexOf(x);return g!==-1?(x.destroy(),this.sounds.splice(g,1),!0):!1},removeAll:function(){this.sounds.forEach(function(x){x.destroy()}),this.sounds.length=0},removeByKey:function(x){for(var g=0,y=this.sounds.length-1;y>=0;y--){var T=this.sounds[y];T.key===x&&(T.destroy(),this.sounds.splice(y,1),g++)}return g},pauseAll:function(){this.forEachActiveSound(function(x){x.pause()}),this.emit(l.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(x){x.resume()}),this.emit(l.RESUME_ALL,this)},setListenerPosition:p,stopAll:function(){this.forEachActiveSound(function(x){x.stop()}),this.emit(l.STOP_ALL,this)},stopByKey:function(x){var g=0;return this.getAll(x).forEach(function(y){y.stop()&&g++}),g},isPlaying:function(x){var g=this.sounds,y=g.length-1,T;if(x===void 0){for(;y>=0;y--)if(T=this.sounds[y],T.isPlaying)return!0}else for(;y>=0;y--)if(T=this.sounds[y],T.key===x&&T.isPlaying)return!0;return!1},unlock:p,onBlur:p,onFocus:p,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(x,g){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(l.UNLOCKED,this));for(var y=this.sounds.length-1;y>=0;y--)this.sounds[y].pendingRemove&&this.sounds.splice(y,1);this.sounds.forEach(function(T){T.update(x,g)})},destroy:function(){this.game.events.off(h.BLUR,this.onGameBlur,this),this.game.events.off(h.FOCUS,this.onGameFocus,this),this.game.events.off(h.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(x,g){var y=this;this.sounds.forEach(function(T,P){T&&!T.pendingRemove&&x.call(g||y,T,P,y.sounds)})},setRate:function(x){return this.rate=x,this},rate:{get:function(){return this._rate},set:function(x){this._rate=x,this.forEachActiveSound(function(g){g.calculateRate()}),this.emit(l.GLOBAL_RATE,this,x)}},setDetune:function(x){return this.detune=x,this},detune:{get:function(){return this._detune},set:function(x){this._detune=x,this.forEachActiveSound(function(g){g.calculateRate()}),this.emit(l.GLOBAL_DETUNE,this,x)}}});m.exports=v},14747:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(33684),S=i(25960),u=i(57490),l={create:function(h){var r=h.config.audio,o=h.device.audio;return r.noAudio||!o.webAudio&&!o.audioData?new S(h):o.webAudio&&!r.disableWebAudio?new u(h):new d(h)}};m.exports=l},19723:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="complete"},98882:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="decodedall"},57506:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="decoded"},73146:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="destroy"},11305:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="detune"},40577:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="detune"},30333:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="mute"},20394:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="rate"},21802:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="volume"},1299:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="looped"},99190:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="loop"},97125:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="mute"},89259:m=>{/**
 * @author       pi-kei
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pan"},79986:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pauseall"},17586:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pause"},19618:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="play"},42306:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="rate"},10387:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="resumeall"},48959:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="resume"},9960:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="seek"},19180:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="stopall"},98328:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="stop"},50401:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="unlocked"},52498:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="volume"},14463:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={COMPLETE:i(19723),DECODED:i(57506),DECODED_ALL:i(98882),DESTROY:i(73146),DETUNE:i(11305),GLOBAL_DETUNE:i(40577),GLOBAL_MUTE:i(30333),GLOBAL_RATE:i(20394),GLOBAL_VOLUME:i(21802),LOOP:i(99190),LOOPED:i(1299),MUTE:i(97125),PAN:i(89259),PAUSE_ALL:i(79986),PAUSE:i(17586),PLAY:i(19618),RATE:i(42306),RESUME_ALL:i(10387),RESUME:i(48959),SEEK:i(9960),STOP_ALL:i(19180),STOP:i(98328),UNLOCKED:i(50401),VOLUME:i(52498)}},64895:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(30341),S=i(83419),u=i(14463),l=i(45319),h=new S({Extends:d,initialize:function(o,p,a){if(a===void 0&&(a={}),this.tags=o.game.cache.audio.get(p),!this.tags)throw new Error('No cached audio asset with key "'+p);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,d.call(this,o,p,a)},play:function(r,o){return this.manager.isLocked(this,"play",[r,o])||!d.prototype.play.call(this,r,o)||!this.pickAndPlayAudioTag()?!1:(this.emit(u.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!d.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(u.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!d.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(u.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!d.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(u.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var r=this.currentConfig.seek,o=this.currentConfig.delay,p=(this.currentMarker?this.currentMarker.start:0)+r;return this.previousTime=p,this.audio.currentTime=p,this.applyConfig(),o===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+o*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var r=0;r<this.tags.length;r++){var o=this.tags[r];if(o.dataset.used==="false")return o.dataset.used="true",this.audio=o,!0}if(!this.manager.override)return!1;var p=[];this.manager.forEachActiveSound(function(v){v.key===this.key&&v.audio&&p.push(v)},this),p.sort(function(v,x){return v.loop===x.loop?x.seek/x.duration-v.seek/v.duration:v.loop?1:-1});var a=p[0];return this.audio=a.audio,a.reset(),a.audio=null,a.startTime=0,a.previousTime=0,!0},playCatchPromise:function(){var r=this.audio.play();r&&r.catch(function(o){console.warn(o)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){d.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(r){if(this.isPlaying){if(this.startTime>0){this.startTime<r-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,r-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var o=this.currentMarker?this.currentMarker.start:0,p=o+this.duration,a=this.audio.currentTime;if(this.currentConfig.loop)a>=p-this.manager.loopEndOffset?(this.audio.currentTime=o+Math.max(0,a-p),a=this.audio.currentTime):a<o&&(this.audio.currentTime+=o,a=this.audio.currentTime),a<this.previousTime&&this.emit(u.LOOPED,this);else if(a>=p){this.reset(),this.stopAndReleaseAudioTag(),this.emit(u.COMPLETE,this);return}this.previousTime=a}},destroy:function(){d.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=l(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){d.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(r){this.currentConfig.mute=r,!this.manager.isLocked(this,"mute",r)&&(this.updateMute(),this.emit(u.MUTE,this,r))}},setMute:function(r){return this.mute=r,this},volume:{get:function(){return this.currentConfig.volume},set:function(r){this.currentConfig.volume=r,!this.manager.isLocked(this,"volume",r)&&(this.updateVolume(),this.emit(u.VOLUME,this,r))}},setVolume:function(r){return this.volume=r,this},rate:{get:function(){return this.currentConfig.rate},set:function(r){this.currentConfig.rate=r,!this.manager.isLocked(this,u.RATE,r)&&(this.calculateRate(),this.emit(u.RATE,this,r))}},setRate:function(r){return this.rate=r,this},detune:{get:function(){return this.currentConfig.detune},set:function(r){this.currentConfig.detune=r,!this.manager.isLocked(this,u.DETUNE,r)&&(this.calculateRate(),this.emit(u.DETUNE,this,r))}},setDetune:function(r){return this.detune=r,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(r){this.manager.isLocked(this,"seek",r)||this.startTime>0||(this.isPlaying||this.isPaused)&&(r=Math.min(Math.max(0,r),this.duration),this.isPlaying?(this.previousTime=r,this.audio.currentTime=r):this.isPaused&&(this.currentConfig.seek=r),this.emit(u.SEEK,this,r))}},setSeek:function(r){return this.seek=r,this},loop:{get:function(){return this.currentConfig.loop},set:function(r){this.currentConfig.loop=r,!this.manager.isLocked(this,"loop",r)&&(this.audio&&(this.audio.loop=r),this.emit(u.LOOP,this,r))}},setLoop:function(r){return this.loop=r,this},pan:{get:function(){return this.currentConfig.pan},set:function(r){this.currentConfig.pan=r,this.emit(u.PAN,this,r)}},setPan:function(r){return this.pan=r,this}});m.exports=h},33684:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(85034),S=i(83419),u=i(14463),l=i(64895),h=new S({Extends:d,initialize:function(o){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,d.call(this,o)},add:function(r,o){var p=new l(this,r,o);return this.sounds.push(p),p},unlock:function(){this.locked=!1;var r=this;if(this.game.cache.audio.entries.each(function(v,x){for(var g=0;g<x.length;g++)if(x[g].dataset.locked==="true")return r.locked=!0,!1;return!0}),!!this.locked){var o=!1,p=function(){o=!0},a=function(){if(o){o=!1;return}document.body.removeEventListener("touchmove",p),document.body.removeEventListener("touchend",a);var v=[];if(r.game.cache.audio.entries.each(function(g,y){for(var T=0;T<y.length;T++){var P=y[T];P.dataset.locked==="true"&&v.push(P)}return!0}),v.length!==0){var x=v[v.length-1];x.oncanplaythrough=function(){x.oncanplaythrough=null,v.forEach(function(g){g.dataset.locked="false"}),r.unlocked=!0},v.forEach(function(g){g.load()})}};this.once(u.UNLOCKED,function(){for(this.forEachActiveSound(function(x){x.currentMarker===null&&x.duration===0&&(x.duration=x.tags[0].duration),x.totalDuration=x.tags[0].duration});this.lockedActionsQueue.length;){var v=this.lockedActionsQueue.shift();v.sound[v.prop].apply?v.sound[v.prop].apply(v.sound,v.value||[]):v.sound[v.prop]=v.value}},this),document.body.addEventListener("touchmove",p,!1),document.body.addEventListener("touchend",a,!1)}},onBlur:function(){this.forEachActiveSound(function(r){r.isPlaying&&(this.onBlurPausedSounds.push(r),r.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(r){r.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){d.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(r,o,p){return r.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:r,prop:o,value:p}),!0):!1},setMute:function(r){return this.mute=r,this},mute:{get:function(){return this._mute},set:function(r){this._mute=r,this.forEachActiveSound(function(o){o.updateMute()}),this.emit(u.GLOBAL_MUTE,this,r)}},setVolume:function(r){return this.volume=r,this},volume:{get:function(){return this._volume},set:function(r){this._volume=r,this.forEachActiveSound(function(o){o.updateVolume()}),this.emit(u.GLOBAL_VOLUME,this,r)}}});m.exports=h},23717:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={SoundManagerCreator:i(14747),Events:i(14463),BaseSound:i(30341),BaseSoundManager:i(85034),WebAudioSound:i(71741),WebAudioSoundManager:i(57490),HTML5AudioSound:i(64895),HTML5AudioSoundManager:i(33684),NoAudioSound:i(4603),NoAudioSoundManager:i(25960)}},4603:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(30341),S=i(83419),u=i(50792),l=i(79291),h=i(29747),r=function(){return!1},o=function(){return null},p=function(){return this},a=new S({Extends:u,initialize:function(x,g,y){y===void 0&&(y={}),u.call(this),this.manager=x,this.key=g,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=l({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},y),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:r,updateMarker:r,removeMarker:o,play:r,pause:r,resume:r,stop:r,setMute:p,setVolume:p,setRate:p,setDetune:p,setSeek:p,setLoop:p,setPan:p,applyConfig:o,resetConfig:o,update:h,calculateRate:o,destroy:function(){d.prototype.destroy.call(this)}});m.exports=a},25960:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(85034),S=i(83419),u=i(50792),l=i(4603),h=i(29747),r=new S({Extends:u,initialize:function(p){u.call(this),this.game=p,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(o,p){var a=new l(this,o,p);return this.sounds.push(a),a},addAudioSprite:function(o,p){var a=this.add(o,p);return a.spritemap={},a},get:function(o){return d.prototype.get.call(this,o)},getAll:function(o){return d.prototype.getAll.call(this,o)},play:function(o,p){return!1},playAudioSprite:function(o,p,a){return!1},remove:function(o){return d.prototype.remove.call(this,o)},removeAll:function(){return d.prototype.removeAll.call(this)},removeByKey:function(o){return d.prototype.removeByKey.call(this,o)},stopByKey:function(o){return d.prototype.stopByKey.call(this,o)},onBlur:h,onFocus:h,onGameBlur:h,onGameFocus:h,pauseAll:h,resumeAll:h,stopAll:h,update:h,setRate:h,setDetune:h,setMute:h,setVolume:h,unlock:h,forEachActiveSound:function(o,p){d.prototype.forEachActiveSound.call(this,o,p)},destroy:function(){d.prototype.destroy.call(this)}});m.exports=r},71741:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(30341),S=i(83419),u=i(14463),l=i(95540),h=new S({Extends:d,initialize:function(o,p,a){if(a===void 0&&(a={}),this.audioBuffer=o.game.cache.audio.get(p),!this.audioBuffer)throw new Error('Audio key "'+p+'" not found in cache');this.source=null,this.loopSource=null,this.muteNode=o.context.createGain(),this.volumeNode=o.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),o.context.createPanner&&(this.spatialNode=o.context.createPanner(),this.volumeNode.connect(this.spatialNode)),o.context.createStereoPanner?(this.pannerNode=o.context.createStereoPanner(),o.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(o.destination)):o.context.createPanner?this.spatialNode.connect(o.destination):this.volumeNode.connect(o.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,d.call(this,o,p,a)},play:function(r,o){return d.prototype.play.call(this,r,o)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(u.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!d.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(u.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!d.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(u.RESUME,this),!0)},stop:function(){return d.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(u.STOP,this),!0):!1},createAndStartBufferSource:function(){var r=this.currentConfig.seek,o=this.currentConfig.delay,p=this.manager.context.currentTime+o,a=(this.currentMarker?this.currentMarker.start:0)+r,v=this.duration-r;this.playTime=p-r,this.startTime=p,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,p),Math.max(0,a),Math.max(0,v)),this.resetConfig()},createAndStartLoopBufferSource:function(){var r=this.getLoopTime(),o=this.currentMarker?this.currentMarker.start:0,p=this.duration;this.loopTime=r,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,r),Math.max(0,o),Math.max(0,p))},createBufferSource:function(){var r=this,o=this.manager.context.createBufferSource();return o.buffer=this.audioBuffer,o.connect(this.muteNode),o.onended=function(p){var a=p.target;(a===r.source||a===r.loopSource)&&(r.currentConfig.loop?r.hasLooped=!0:r.hasEnded=!0)},o},stopAndRemoveBufferSource:function(){if(this.source){var r=this.source;this.source=null,r.stop(),r.disconnect()}this.playTime=0,this.startTime=0,this.hasEnded=!1,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var r=this.currentConfig.source;if(r&&this.manager.context.createPanner){var o=this.spatialNode;o.panningModel=l(r,"panningModel","equalpower"),o.distanceModel=l(r,"distanceModel","inverse"),o.orientationX.value=l(r,"orientationX",0),o.orientationY.value=l(r,"orientationY",0),o.orientationZ.value=l(r,"orientationZ",-1),o.refDistance=l(r,"refDistance",1),o.maxDistance=l(r,"maxDistance",1e4),o.rolloffFactor=l(r,"rolloffFactor",1),o.coneInnerAngle=l(r,"coneInnerAngle",360),o.coneOuterAngle=l(r,"coneOuterAngle",0),o.coneOuterGain=l(r,"coneOuterGain",0),this.spatialSource=l(r,"follow",null),this.spatialSource||(o.positionX.value=l(r,"x",0),o.positionY.value=l(r,"y",0),o.positionZ.value=l(r,"z",0))}d.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(r){this.spatialNode&&(this.spatialNode.positionX.value=r)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(r){this.spatialNode&&(this.spatialNode.positionY.value=r)}},update:function(){if(this.isPlaying&&this.spatialSource){var r=l(this.spatialSource,"x",null),o=l(this.spatialSource,"y",null);r&&r!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=r),o&&o!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=o)}this.hasEnded?(d.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(u.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(u.LOOPED,this))},destroy:function(){this.pendingRemove||(d.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){d.prototype.calculateRate.call(this);var r=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,r),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,r)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var r=0,o=0;o<this.rateUpdates.length;o++){var p=0;o<this.rateUpdates.length-1?p=this.rateUpdates[o+1].time:p=this.manager.context.currentTime-this.playTime,r+=(p-this.rateUpdates[o].time)*this.rateUpdates[o].rate}return r},getLoopTime:function(){for(var r=0,o=0;o<this.rateUpdates.length-1;o++)r+=(this.rateUpdates[o+1].time-this.rateUpdates[o].time)*this.rateUpdates[o].rate;var p=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+p.time+(this.duration-r)/p.rate},rate:{get:function(){return this.currentConfig.rate},set:function(r){this.currentConfig.rate=r,this.calculateRate(),this.emit(u.RATE,this,r)}},setRate:function(r){return this.rate=r,this},detune:{get:function(){return this.currentConfig.detune},set:function(r){this.currentConfig.detune=r,this.calculateRate(),this.emit(u.DETUNE,this,r)}},setDetune:function(r){return this.detune=r,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(r){this.currentConfig.mute=r,this.muteNode.gain.setValueAtTime(r?0:1,0),this.emit(u.MUTE,this,r)}},setMute:function(r){return this.mute=r,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(r){this.currentConfig.volume=r,this.volumeNode.gain.setValueAtTime(r,0),this.emit(u.VOLUME,this,r)}},setVolume:function(r){return this.volume=r,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(r){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(r=Math.min(Math.max(0,r),this.duration),this.currentConfig.seek=r,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(u.SEEK,this,r))}},setSeek:function(r){return this.seek=r,this},loop:{get:function(){return this.currentConfig.loop},set:function(r){this.currentConfig.loop=r,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),r&&this.createAndStartLoopBufferSource()),this.emit(u.LOOP,this,r)}},setLoop:function(r){return this.loop=r,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(r){this.currentConfig.pan=r,this.pannerNode&&this.pannerNode.pan.setValueAtTime(r,this.manager.context.currentTime),this.emit(u.PAN,this,r)}},setPan:function(r){return this.pan=r,this}});m.exports=h},57490:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(53134),S=i(85034),u=i(83419),l=i(14463),h=i(8443),r=i(71741),o=i(95540),p=new u({Extends:S,initialize:function(v){this.context=this.createAudioContext(v),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended",S.call(this,v),this.locked&&(v.isBooted?this.unlock():v.events.once(h.BOOT,this.unlock,this)),v.events.on(h.VISIBLE,this.onGameVisible,this)},onGameVisible:function(){var a=this.context;window.setTimeout(function(){a&&(a.suspend(),a.resume())},100)},createAudioContext:function(a){var v=a.config.audio;if(v.context)return v.context.resume(),v.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(a){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=a,this.masterMuteNode=a.createGain(),this.masterVolumeNode=a.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(a.destination),this.destination=this.masterMuteNode,this},add:function(a,v){var x=new r(this,a,v);return this.sounds.push(x),x},decodeAudio:function(a,v){var x;Array.isArray(a)?x=a:x=[{key:a,data:v}];for(var g=this.game.cache.audio,y=x.length,T=0;T<x.length;T++){var P=x[T],A=P.key,b=P.data;typeof b=="string"&&(b=d(b));var O=(function(B,G){g.add(B,G),this.emit(l.DECODED,B),y--,y===0&&this.emit(l.DECODED_ALL)}).bind(this,A),D=(function(B,G){console.error("Error decoding audio: "+B+" - ",G?G.message:""),y--,y===0&&this.emit(l.DECODED_ALL)}).bind(this,A);this.context.decodeAudioData(b,O,D)}},setListenerPosition:function(a,v){return a===void 0&&(a=this.game.scale.width/2),v===void 0&&(v=this.game.scale.height/2),this.listenerPosition.set(a,v),this},unlock:function(){var a=this,v=document.body,x=function g(){if(a.context&&v){var y=v.removeEventListener.bind(v);a.context.resume().then(function(){y("touchstart",g),y("touchend",g),y("mousedown",g),y("mouseup",g),y("keydown",g),a.unlocked=!0},function(){y("touchstart",g),y("touchend",g),y("mousedown",g),y("mouseup",g),y("keydown",g)})}};v&&(v.addEventListener("touchstart",x,!1),v.addEventListener("touchend",x,!1),v.addEventListener("mousedown",x,!1),v.addEventListener("mouseup",x,!1),v.addEventListener("keydown",x,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var a=this.context;a&&!this.locked&&(a.state==="suspended"||a.state==="interrupted")&&a.resume()},update:function(a,v){var x=this.context.listener,g=o(this.listenerPosition,"x",null),y=o(this.listenerPosition,"y",null);if(x&&x.positionX!==void 0)g&&g!==this._spatialx&&(this._spatialx=x.positionX.value=g),y&&y!==this._spatialy&&(this._spatialy=x.positionY.value=y);else if(x){g&&g!==this._spatialx&&(this._spatialx=g),y&&y!==this._spatialy&&(this._spatialy=y);var T=o(x,"z",0);x.setPosition(this._spatialx||0,this._spatialy||0,T)}S.prototype.update.call(this,a,v),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var a=this;this.context.close().then(function(){a.context=null})}this.game.events.off(h.VISIBLE,this.onGameVisible,this),S.prototype.destroy.call(this)},setMute:function(a){return this.mute=a,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(a){this.masterMuteNode.gain.setValueAtTime(a?0:1,0),this.emit(l.GLOBAL_MUTE,this,a)}},setVolume:function(a){return this.volume=a,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(a){this.masterVolumeNode.gain.setValueAtTime(a,0),this.emit(l.GLOBAL_VOLUME,this,a)}}});m.exports=p},73162:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(37105),S=i(83419),u=i(29747),l=i(19186),h=new S({initialize:function(o){this.parent=o,this.list=[],this.position=0,this.addCallback=u,this.removeCallback=u,this._sortKey=""},add:function(r,o){return o?d.Add(this.list,r):d.Add(this.list,r,0,this.addCallback,this)},addAt:function(r,o,p){return p?d.AddAt(this.list,r,o):d.AddAt(this.list,r,o,0,this.addCallback,this)},getAt:function(r){return this.list[r]},getIndex:function(r){return this.list.indexOf(r)},sort:function(r,o){return r?(o===void 0&&(o=function(p,a){return p[r]-a[r]}),l(this.list,o),this):this},getByName:function(r){return d.GetFirst(this.list,"name",r)},getRandom:function(r,o){return d.GetRandom(this.list,r,o)},getFirst:function(r,o,p,a){return d.GetFirst(this.list,r,o,p,a)},getAll:function(r,o,p,a){return d.GetAll(this.list,r,o,p,a)},count:function(r,o){return d.CountAllMatching(this.list,r,o)},swap:function(r,o){d.Swap(this.list,r,o)},moveTo:function(r,o){return d.MoveTo(this.list,r,o)},moveAbove:function(r,o){return d.MoveAbove(this.list,r,o)},moveBelow:function(r,o){return d.MoveBelow(this.list,r,o)},remove:function(r,o){return o?d.Remove(this.list,r):d.Remove(this.list,r,this.removeCallback,this)},removeAt:function(r,o){return o?d.RemoveAt(this.list,r):d.RemoveAt(this.list,r,this.removeCallback,this)},removeBetween:function(r,o,p){return p?d.RemoveBetween(this.list,r,o):d.RemoveBetween(this.list,r,o,this.removeCallback,this)},removeAll:function(r){for(var o=this.list.length;o--;)this.remove(this.list[o],r);return this},bringToTop:function(r){return d.BringToTop(this.list,r)},sendToBack:function(r){return d.SendToBack(this.list,r)},moveUp:function(r){return d.MoveUp(this.list,r),r},moveDown:function(r){return d.MoveDown(this.list,r),r},reverse:function(){return this.list.reverse(),this},shuffle:function(){return d.Shuffle(this.list),this},replace:function(r,o){return d.Replace(this.list,r,o)},exists:function(r){return this.list.indexOf(r)>-1},setAll:function(r,o,p,a){return d.SetAll(this.list,r,o,p,a),this},each:function(r,o){for(var p=[null],a=2;a<arguments.length;a++)p.push(arguments[a]);for(a=0;a<this.list.length;a++)p[0]=this.list[a],r.apply(o,p)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});m.exports=h},90330:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=new d({initialize:function(l){this.entries={},this.size=0,this.setAll(l)},setAll:function(u){if(Array.isArray(u))for(var l=0;l<u.length;l++)this.set(u[l][0],u[l][1]);return this},set:function(u,l){return this.has(u)||this.size++,this.entries[u]=l,this},get:function(u){if(this.has(u))return this.entries[u]},getArray:function(){var u=[],l=this.entries;for(var h in l)u.push(l[h]);return u},has:function(u){return this.entries.hasOwnProperty(u)},delete:function(u){return this.has(u)&&(delete this.entries[u],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(u){delete this.entries[u]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var u=[],l=this.entries;for(var h in l)u.push(l[h]);return u},dump:function(){var u=this.entries;console.group("Map");for(var l in u)console.log(l,u[l]);console.groupEnd()},each:function(u){var l=this.entries;for(var h in l)if(u(h,l[h])===!1)break;return this},contains:function(u){var l=this.entries;for(var h in l)if(l[h]===u)return!0;return!1},merge:function(u,l){l===void 0&&(l=!1);var h=this.entries,r=u.entries;for(var o in r)h.hasOwnProperty(o)&&l?h[o]=r[o]:this.set(o,r[o]);return this}});m.exports=S},25774:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(50792),u=i(82348),l=new d({Extends:S,initialize:function(){S.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(h){return this._active.indexOf(h)>-1},isPending:function(h){return this._toProcess>0&&this._pending.indexOf(h)>-1},isDestroying:function(h){return this._destroy.indexOf(h)>-1},add:function(h){return this.checkQueue&&this.isActive(h)&&!this.isDestroying(h)||this.isPending(h)||(this._pending.push(h),this._toProcess++),h},remove:function(h){if(this.isPending(h)){var r=this._pending,o=r.indexOf(h);o!==-1&&r.splice(o,1)}else this.isActive(h)&&(this._destroy.push(h),this._toProcess++);return h},removeAll:function(){for(var h=this._active,r=this._destroy,o=h.length;o--;)r.push(h[o]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var h=this._destroy,r=this._active,o,p;for(o=0;o<h.length;o++){p=h[o];var a=r.indexOf(p);a!==-1&&(r.splice(a,1),this.emit(u.PROCESS_QUEUE_REMOVE,p))}for(h.length=0,h=this._pending,o=0;o<h.length;o++)p=h[o],(!this.checkQueue||this.checkQueue&&r.indexOf(p)===-1)&&(r.push(p),this.emit(u.PROCESS_QUEUE_ADD,p));return h.length=0,this._toProcess=0,r},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});m.exports=l},59542:(m,E,i)=>{/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(43886);function S(b){if(!(this instanceof S))return new S(b);this._maxEntries=Math.max(4,b||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}S.prototype={all:function(){return this._all(this.data,[])},search:function(b){var O=this.data,D=[],B=this.toBBox;if(!T(b,O))return D;for(var G=[],V,k,U,W;O;){for(V=0,k=O.children.length;V<k;V++)U=O.children[V],W=O.leaf?B(U):U,T(b,W)&&(O.leaf?D.push(U):y(b,W)?this._all(U,D):G.push(U));O=G.pop()}return D},collides:function(b){var O=this.data,D=this.toBBox;if(!T(b,O))return!1;for(var B=[],G,V,k,U;O;){for(G=0,V=O.children.length;G<V;G++)if(k=O.children[G],U=O.leaf?D(k):k,T(b,U)){if(O.leaf||y(b,U))return!0;B.push(k)}O=B.pop()}return!1},load:function(b){if(!(b&&b.length))return this;if(b.length<this._minEntries){for(var O=0,D=b.length;O<D;O++)this.insert(b[O]);return this}var B=this._build(b.slice(),0,b.length-1,0);if(!this.data.children.length)this.data=B;else if(this.data.height===B.height)this._splitRoot(this.data,B);else{if(this.data.height<B.height){var G=this.data;this.data=B,B=G}this._insert(B,this.data.height-B.height-1,!0)}return this},insert:function(b){return b&&this._insert(b,this.data.height-1),this},clear:function(){return this.data=P([]),this},remove:function(b,O){if(!b)return this;for(var D=this.data,B=this.toBBox(b),G=[],V=[],k,U,W,X;D||G.length;){if(D||(D=G.pop(),U=G[G.length-1],k=V.pop(),X=!0),D.leaf&&(W=u(b,D.children,O),W!==-1))return D.children.splice(W,1),G.push(D),this._condense(G),this;!X&&!D.leaf&&y(D,B)?(G.push(D),V.push(k),k=0,U=D,D=D.children[0]):U?(k++,D=U.children[k],X=!1):D=null}return this},toBBox:function(b){return b},compareMinX:o,compareMinY:p,toJSON:function(){return this.data},fromJSON:function(b){return this.data=b,this},_all:function(b,O){for(var D=[];b;)b.leaf?O.push.apply(O,b.children):D.push.apply(D,b.children),b=D.pop();return O},_build:function(b,O,D,B){var G=D-O+1,V=this._maxEntries,k;if(G<=V)return k=P(b.slice(O,D+1)),l(k,this.toBBox),k;B||(B=Math.ceil(Math.log(G)/Math.log(V)),V=Math.ceil(G/Math.pow(V,B-1))),k=P([]),k.leaf=!1,k.height=B;var U=Math.ceil(G/V),W=U*Math.ceil(Math.sqrt(V)),X,_,Q,j;for(A(b,O,D,W,this.compareMinX),X=O;X<=D;X+=W)for(Q=Math.min(X+W-1,D),A(b,X,Q,U,this.compareMinY),_=X;_<=Q;_+=U)j=Math.min(_+U-1,Q),k.children.push(this._build(b,_,j,B-1));return l(k,this.toBBox),k},_chooseSubtree:function(b,O,D,B){for(var G,V,k,U,W,X,_,Q;B.push(O),!(O.leaf||B.length-1===D);){for(_=Q=1/0,G=0,V=O.children.length;G<V;G++)k=O.children[G],W=a(k),X=x(b,k)-W,X<Q?(Q=X,_=W<_?W:_,U=k):X===Q&&W<_&&(_=W,U=k);O=U||O.children[0]}return O},_insert:function(b,O,D){var B=this.toBBox,G=D?b:B(b),V=[],k=this._chooseSubtree(G,this.data,O,V);for(k.children.push(b),r(k,G);O>=0&&V[O].children.length>this._maxEntries;)this._split(V,O),O--;this._adjustParentBBoxes(G,V,O)},_split:function(b,O){var D=b[O],B=D.children.length,G=this._minEntries;this._chooseSplitAxis(D,G,B);var V=this._chooseSplitIndex(D,G,B),k=P(D.children.splice(V,D.children.length-V));k.height=D.height,k.leaf=D.leaf,l(D,this.toBBox),l(k,this.toBBox),O?b[O-1].children.push(k):this._splitRoot(D,k)},_splitRoot:function(b,O){this.data=P([b,O]),this.data.height=b.height+1,this.data.leaf=!1,l(this.data,this.toBBox)},_chooseSplitIndex:function(b,O,D){var B,G,V,k,U,W,X,_;for(W=X=1/0,B=O;B<=D-O;B++)G=h(b,0,B,this.toBBox),V=h(b,B,D,this.toBBox),k=g(G,V),U=a(G)+a(V),k<W?(W=k,_=B,X=U<X?U:X):k===W&&U<X&&(X=U,_=B);return _},_chooseSplitAxis:function(b,O,D){var B=b.leaf?this.compareMinX:o,G=b.leaf?this.compareMinY:p,V=this._allDistMargin(b,O,D,B),k=this._allDistMargin(b,O,D,G);V<k&&b.children.sort(B)},_allDistMargin:function(b,O,D,B){b.children.sort(B);var G=this.toBBox,V=h(b,0,O,G),k=h(b,D-O,D,G),U=v(V)+v(k),W,X;for(W=O;W<D-O;W++)X=b.children[W],r(V,b.leaf?G(X):X),U+=v(V);for(W=D-O-1;W>=O;W--)X=b.children[W],r(k,b.leaf?G(X):X),U+=v(k);return U},_adjustParentBBoxes:function(b,O,D){for(var B=D;B>=0;B--)r(O[B],b)},_condense:function(b){for(var O=b.length-1,D;O>=0;O--)b[O].children.length===0?O>0?(D=b[O-1].children,D.splice(D.indexOf(b[O]),1)):this.clear():l(b[O],this.toBBox)},compareMinX:function(b,O){return b.left-O.left},compareMinY:function(b,O){return b.top-O.top},toBBox:function(b){return{minX:b.left,minY:b.top,maxX:b.right,maxY:b.bottom}}};function u(b,O,D){if(!D)return O.indexOf(b);for(var B=0;B<O.length;B++)if(D(b,O[B]))return B;return-1}function l(b,O){h(b,0,b.children.length,O,b)}function h(b,O,D,B,G){G||(G=P(null)),G.minX=1/0,G.minY=1/0,G.maxX=-1/0,G.maxY=-1/0;for(var V=O,k;V<D;V++)k=b.children[V],r(G,b.leaf?B(k):k);return G}function r(b,O){return b.minX=Math.min(b.minX,O.minX),b.minY=Math.min(b.minY,O.minY),b.maxX=Math.max(b.maxX,O.maxX),b.maxY=Math.max(b.maxY,O.maxY),b}function o(b,O){return b.minX-O.minX}function p(b,O){return b.minY-O.minY}function a(b){return(b.maxX-b.minX)*(b.maxY-b.minY)}function v(b){return b.maxX-b.minX+(b.maxY-b.minY)}function x(b,O){return(Math.max(O.maxX,b.maxX)-Math.min(O.minX,b.minX))*(Math.max(O.maxY,b.maxY)-Math.min(O.minY,b.minY))}function g(b,O){var D=Math.max(b.minX,O.minX),B=Math.max(b.minY,O.minY),G=Math.min(b.maxX,O.maxX),V=Math.min(b.maxY,O.maxY);return Math.max(0,G-D)*Math.max(0,V-B)}function y(b,O){return b.minX<=O.minX&&b.minY<=O.minY&&O.maxX<=b.maxX&&O.maxY<=b.maxY}function T(b,O){return O.minX<=b.maxX&&O.minY<=b.maxY&&O.maxX>=b.minX&&O.maxY>=b.minY}function P(b){return{children:b,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function A(b,O,D,B,G){for(var V=[O,D],k;V.length;)D=V.pop(),O=V.pop(),!(D-O<=B)&&(k=O+Math.ceil((D-O)/B/2)*B,d(b,k,O,D,G),V.push(O,k,k,D))}m.exports=S},35072:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=new d({initialize:function(l){if(this.entries=[],Array.isArray(l))for(var h=0;h<l.length;h++)this.set(l[h])},set:function(u){return this.entries.indexOf(u)===-1&&this.entries.push(u),this},get:function(u,l){for(var h=0;h<this.entries.length;h++){var r=this.entries[h];if(r[u]===l)return r}},getArray:function(){return this.entries.slice(0)},delete:function(u){var l=this.entries.indexOf(u);return l>-1&&this.entries.splice(l,1),this},dump:function(){console.group("Set");for(var u=0;u<this.entries.length;u++){var l=this.entries[u];console.log(l)}console.groupEnd()},each:function(u,l){var h,r=this.entries.slice(),o=r.length;if(l)for(h=0;h<o&&u.call(l,r[h],h)!==!1;h++);else for(h=0;h<o&&u(r[h],h)!==!1;h++);return this},iterate:function(u,l){var h,r=this.entries.length;if(l)for(h=0;h<r&&u.call(l,this.entries[h],h)!==!1;h++);else for(h=0;h<r&&u(this.entries[h],h)!==!1;h++);return this},iterateLocal:function(u){var l,h=[];for(l=1;l<arguments.length;l++)h.push(arguments[l]);var r=this.entries.length;for(l=0;l<r;l++){var o=this.entries[l];o[u].apply(o,h)}return this},clear:function(){return this.entries.length=0,this},contains:function(u){return this.entries.indexOf(u)>-1},union:function(u){var l=new S;return u.entries.forEach(function(h){l.set(h)}),this.entries.forEach(function(h){l.set(h)}),l},intersect:function(u){var l=new S;return this.entries.forEach(function(h){u.contains(h)&&l.set(h)}),l},difference:function(u){var l=new S;return this.entries.forEach(function(h){u.contains(h)||l.set(h)}),l},size:{get:function(){return this.entries.length},set:function(u){return u<this.entries.length?this.entries.length=u:this.entries.length}}});m.exports=S},86555:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45319),S=i(83419),u=i(56583),l=i(26099),h=new S({initialize:function(o,p,a,v){o===void 0&&(o=0),p===void 0&&(p=o),a===void 0&&(a=0),v===void 0&&(v=null),this._width=o,this._height=p,this._parent=v,this.aspectMode=a,this.aspectRatio=p===0?1:o/p,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new l},setAspectMode:function(r){return r===void 0&&(r=0),this.aspectMode=r,this.setSize(this._width,this._height)},setSnap:function(r,o){return r===void 0&&(r=0),o===void 0&&(o=r),this.snapTo.set(r,o),this.setSize(this._width,this._height)},setParent:function(r){return this._parent=r,this.setSize(this._width,this._height)},setMin:function(r,o){return r===void 0&&(r=0),o===void 0&&(o=r),this.minWidth=d(r,0,this.maxWidth),this.minHeight=d(o,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(r,o){return r===void 0&&(r=Number.MAX_VALUE),o===void 0&&(o=r),this.maxWidth=d(r,this.minWidth,Number.MAX_VALUE),this.maxHeight=d(o,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(r,o){switch(r===void 0&&(r=0),o===void 0&&(o=r),this.aspectMode){case h.NONE:this._width=this.getNewWidth(u(r,this.snapTo.x)),this._height=this.getNewHeight(u(o,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case h.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(u(r,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case h.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(u(o,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case h.FIT:this.constrain(r,o,!0);break;case h.ENVELOP:this.constrain(r,o,!1);break}return this},setAspectRatio:function(r){return this.aspectRatio=r,this.setSize(this._width,this._height)},resize:function(r,o){return this._width=this.getNewWidth(u(r,this.snapTo.x)),this._height=this.getNewHeight(u(o,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(r,o){return o===void 0&&(o=!0),r=d(r,this.minWidth,this.maxWidth),o&&this._parent&&r>this._parent.width&&(r=Math.max(this.minWidth,this._parent.width)),r},getNewHeight:function(r,o){return o===void 0&&(o=!0),r=d(r,this.minHeight,this.maxHeight),o&&this._parent&&r>this._parent.height&&(r=Math.max(this.minHeight,this._parent.height)),r},constrain:function(r,o,p){r===void 0&&(r=0),o===void 0&&(o=r),p===void 0&&(p=!0),r=this.getNewWidth(r),o=this.getNewHeight(o);var a=this.snapTo,v=o===0?1:r/o;return p&&this.aspectRatio>v||!p&&this.aspectRatio<v?(r=u(r,a.x),o=r/this.aspectRatio,a.y>0&&(o=u(o,a.y),r=o*this.aspectRatio)):(p&&this.aspectRatio<v||!p&&this.aspectRatio>v)&&(o=u(o,a.y),r=o*this.aspectRatio,a.x>0&&(r=u(r,a.x),o=r*(1/this.aspectRatio))),this._width=r,this._height=o,this},fitTo:function(r,o){return this.constrain(r,o,!0)},envelop:function(r,o){return this.constrain(r,o,!1)},setWidth:function(r){return this.setSize(r,this._height)},setHeight:function(r){return this.setSize(this._width,r)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(r){r&&r.style&&(r.style.width=this._width+"px",r.style.height=this._height+"px")},copy:function(r){return r.setAspectMode(this.aspectMode),r.aspectRatio=this.aspectRatio,r.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(r){this.setSize(r,this._height)}},height:{get:function(){return this._height},set:function(r){this.setSize(this._width,r)}}});h.NONE=0,h.WIDTH_CONTROLS_HEIGHT=1,h.HEIGHT_CONTROLS_WIDTH=2,h.FIT=3,h.ENVELOP=4,m.exports=h},15238:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="add"},56187:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="remove"},82348:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={PROCESS_QUEUE_ADD:i(15238),PROCESS_QUEUE_REMOVE:i(56187)}},41392:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Events:i(82348),List:i(73162),Map:i(90330),ProcessQueue:i(25774),RTree:i(59542),Set:i(35072),Size:i(86555)}},57382:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(45319),u=i(40987),l=i(8054),h=i(50030),r=i(79237),o=new d({Extends:r,initialize:function(a,v,x,g,y){r.call(this,a,v,x,g,y),this.add("__BASE",0,0,0,g,y),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=g,this.height=y,this.imageData=this.context.getImageData(0,0,g,y),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===l.WEBGL&&this.refresh(),this},draw:function(p,a,v,x){return x===void 0&&(x=!0),this.context.drawImage(v,p,a),x&&this.update(),this},drawFrame:function(p,a,v,x,g){v===void 0&&(v=0),x===void 0&&(x=0),g===void 0&&(g=!0);var y=this.manager.getFrame(p,a);if(y){var T=y.canvasData,P=y.cutWidth,A=y.cutHeight,b=y.source.resolution;this.context.drawImage(y.source.image,T.x,T.y,P,A,v,x,P/b,A/b),g&&this.update()}return this},setPixel:function(p,a,v,x,g,y){y===void 0&&(y=255),p=Math.abs(Math.floor(p)),a=Math.abs(Math.floor(a));var T=this.getIndex(p,a);if(T>-1){var P=this.context.getImageData(p,a,1,1);P.data[0]=v,P.data[1]=x,P.data[2]=g,P.data[3]=y,this.context.putImageData(P,p,a)}return this},putData:function(p,a,v,x,g,y,T){return x===void 0&&(x=0),g===void 0&&(g=0),y===void 0&&(y=p.width),T===void 0&&(T=p.height),this.context.putImageData(p,a,v,x,g,y,T),this},getData:function(p,a,v,x){p=S(Math.floor(p),0,this.width-1),a=S(Math.floor(a),0,this.height-1),v=S(v,1,this.width-p),x=S(x,1,this.height-a);var g=this.context.getImageData(p,a,v,x);return g},getPixel:function(p,a,v){v||(v=new u);var x=this.getIndex(p,a);if(x>-1){var g=this.data,y=g[x+0],T=g[x+1],P=g[x+2],A=g[x+3];v.setTo(y,T,P,A)}return v},getPixels:function(p,a,v,x){p===void 0&&(p=0),a===void 0&&(a=0),v===void 0&&(v=this.width),x===void 0&&(x=v),p=Math.abs(Math.round(p)),a=Math.abs(Math.round(a));for(var g=S(p,0,this.width),y=S(p+v,0,this.width),T=S(a,0,this.height),P=S(a+x,0,this.height),A=new u,b=[],O=T;O<P;O++){for(var D=[],B=g;B<y;B++)A=this.getPixel(B,O,A),D.push({x:B,y:O,color:A.color,alpha:A.alphaGL});b.push(D)}return b},getIndex:function(p,a){return p=Math.abs(Math.round(p)),a=Math.abs(Math.round(a)),p<this.width&&a<this.height?(p+a*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(p,a,v,x,g){return p===void 0&&(p=0),a===void 0&&(a=0),v===void 0&&(v=this.width),x===void 0&&(x=this.height),g===void 0&&(g=!0),this.context.clearRect(p,a,v,x),g&&this.update(),this},setSize:function(p,a){return a===void 0&&(a=p),(p!==this.width||a!==this.height)&&(this.canvas.width=p,this.canvas.height=a,this._source.width=p,this._source.height=a,this._source.isPowerOf2=h(p,a),this.frames.__BASE.setSize(p,a,0,0),this.width=p,this.height=a,this.refresh()),this},destroy:function(){r.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});m.exports=o},81320:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(10312),S=i(38058),u=i(27919),l=i(83419),h=i(8054),r=i(4327),o=i(95540),p=i(36060),a=i(32302),v=i(79237),x=i(70554),g=new l({Extends:v,initialize:function(T,P,A,b,O){A===void 0&&(A=256),b===void 0&&(b=256),O===void 0&&(O=!0),this.type="DynamicTexture";var D=T.game.renderer,B=D&&D.type===h.CANVAS,G=B?u.create2D(this,A,b):[this];v.call(this,T,P,G,A,b),this.add("__BASE",0,0,0,A,b),this.renderer=D,this.width=-1,this.height=-1,this.isDrawing=!1,this.canvas=B?G:null,this.context=B?G.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new S(0,0,A,b).setScene(T.game.scene.systemScene,!1),this.renderTarget=B?null:new a(D,A,b,1,0,!1,!1,!0,!1),this.pipeline=B?null:D.pipelines.get(p.SINGLE_PIPELINE),this.setSize(A,b,O)},setSize:function(y,T,P){T===void 0&&(T=y),P===void 0&&(P=!0),P&&(y=Math.floor(y),T=Math.floor(T),y%2!==0&&y++,T%2!==0&&T++);var A=this.get(),b=A.source;if(y!==this.width||T!==this.height){this.canvas&&(this.canvas.width=y,this.canvas.height=T);var O=this.renderTarget;O&&(O.willResize(y,T)&&O.resize(y,T),O.texture!==b.glTexture&&this.renderer.deleteTexture(b.glTexture),this.setFromRenderTarget()),this.camera.setSize(y,T),b.width=y,b.height=T,A.setSize(y,T),this.width=y,this.height=T}else{var D=this.getSourceImage();A.cutX+y>D.width&&(y=D.width-A.cutX),A.cutY+T>D.height&&(T=D.height-A.cutY),A.setSize(y,T,A.cutX,A.cutY)}return this},setFromRenderTarget:function(){var y=this.get(),T=y.source,P=this.renderTarget;return T.isRenderTexture=!0,T.isGLTexture=!0,T.glTexture=P.texture,this},setIsSpriteTexture:function(y){return this.isSpriteTexture=y,this},fill:function(y,T,P,A,b,O){var D=this.camera,B=this.renderer;T===void 0&&(T=1),P===void 0&&(P=0),A===void 0&&(A=0),b===void 0&&(b=this.width),O===void 0&&(O=this.height);var G=y>>16&255,V=y>>8&255,k=y&255,U=this.renderTarget;if(D.preRender(),U){U.bind(!0);var W=this.pipeline.manager.set(this.pipeline),X=B.width/U.width,_=B.height/U.height,Q=U.height-(A+O);W.drawFillRect(P*X,Q*_,b*X,O*_,x.getTintFromFloats(k/255,V/255,G/255,1),T),U.unbind(!0)}else{var j=this.context;B.setContext(j),j.globalCompositeOperation="source-over",j.fillStyle="rgba("+G+","+V+","+k+","+T+")",j.fillRect(P,A,b,O),B.setContext()}return this.dirty=!0,this},clear:function(y,T,P,A){if(this.dirty){var b=this.context,O=this.renderTarget;O?O.clear(y,T,P,A):b&&(y!==void 0&&T!==void 0&&P!==void 0&&A!==void 0?b.clearRect(y,T,P,A):(b.save(),b.setTransform(1,0,0,1,0,0),b.clearRect(0,0,this.width,this.height),b.restore())),this.dirty=!1}return this},stamp:function(y,T,P,A,b){P===void 0&&(P=0),A===void 0&&(A=0);var O=o(b,"alpha",1),D=o(b,"tint",16777215),B=o(b,"angle",0),G=o(b,"rotation",0),V=o(b,"scale",1),k=o(b,"scaleX",V),U=o(b,"scaleY",V),W=o(b,"originX",.5),X=o(b,"originY",.5),_=o(b,"blendMode",0),Q=o(b,"erase",!1),j=o(b,"skipBatch",!1),it=this.manager.resetStamp(O,D);return it.setAngle(0),B!==0?it.setAngle(B):G!==0&&it.setRotation(G),it.setScale(k,U),it.setTexture(y,T),it.setOrigin(W,X),it.setBlendMode(_),Q&&(this._eraseMode=!0),j?this.batchGameObject(it,P,A):this.draw(it,P,A),Q&&(this._eraseMode=!1),this},erase:function(y,T,P){return this._eraseMode=!0,this.draw(y,T,P),this._eraseMode=!1,this},draw:function(y,T,P,A,b){return this.beginDraw(),this.batchDraw(y,T,P,A,b),this.endDraw(),this},drawFrame:function(y,T,P,A,b,O){return this.beginDraw(),this.batchDrawFrame(y,T,P,A,b,O),this.endDraw(),this},repeat:function(y,T,P,A,b,O,D,B,G){if(P===void 0&&(P=0),A===void 0&&(A=0),b===void 0&&(b=this.width),O===void 0&&(O=this.height),D===void 0&&(D=1),B===void 0&&(B=16777215),G===void 0&&(G=!1),y instanceof r?T=y:T=this.manager.getFrame(y,T),!T)return this;var V=this.manager.resetStamp(D,B);V.setFrame(T),V.setOrigin(0);var k=T.width,U=T.height;b=Math.floor(b),O=Math.floor(O);var W=Math.ceil(b/k),X=Math.ceil(O/U),_=W*k-b,Q=X*U-O;_>0&&(_=k-_),Q>0&&(Q=U-Q),P<0&&(W+=Math.ceil(Math.abs(P)/k)),A<0&&(X+=Math.ceil(Math.abs(A)/U));var j=P,it=A,K=!1,J=this.manager.stampCrop.setTo(0,0,k,U);G||this.beginDraw();for(var Y=0;Y<X;Y++){if(it+U<0){it+=U;continue}for(var q=0;q<W;q++){if(K=!1,j+k<0){j+=k;continue}else j<0&&(K=!0,J.width=k+j,J.x=k-J.width);it<0&&(K=!0,J.height=U+it,J.y=U-J.height),_>0&&q===W-1&&(K=!0,J.width=_),Q>0&&Y===X-1&&(K=!0,J.height=Q),K&&V.setCrop(J),this.batchGameObject(V,j,it),V.isCropped=!1,J.setTo(0,0,k,U),j+=k}j=P,it+=U}return G||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var y=this.camera,T=this.renderer,P=this.renderTarget;y.preRender(),P?T.beginCapture(P.width,P.height):T.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(y,T,P,A,b){return Array.isArray(y)||(y=[y]),this.batchList(y,T,P,A,b),this},batchDrawFrame:function(y,T,P,A,b,O){P===void 0&&(P=0),A===void 0&&(A=0),b===void 0&&(b=1),O===void 0&&(O=16777215);var D=this.manager.getFrame(y,T);return D&&(this.renderTarget?this.pipeline.batchTextureFrame(D,P,A,O,b,this.camera.matrix,null):this.batchTextureFrame(D,P,A,b,O)),this},endDraw:function(y){if(y===void 0&&(y=this._eraseMode),this.isDrawing){var T=this.renderer,P=this.renderTarget;if(P){var A=T.endCapture(),b=T.pipelines.setUtility();b.blitFrame(A,P,1,!1,!1,y,this.isSpriteTexture),T.resetScissor(),T.resetViewport()}else T.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(y,T,P,A,b){var O=y.length;if(O!==0)for(var D=0;D<O;D++){var B=y[D];!B||B===this||(B.renderWebGL||B.renderCanvas?this.batchGameObject(B,T,P):B.isParent||B.list?this.batchGroup(B.getChildren(),T,P):typeof B=="string"?this.batchTextureFrameKey(B,null,T,P,A,b):B instanceof r?this.batchTextureFrame(B,T,P,A,b):Array.isArray(B)&&this.batchList(B,T,P,A,b))}},batchGroup:function(y,T,P){T===void 0&&(T=0),P===void 0&&(P=0);for(var A=0;A<y.length;A++){var b=y[A];b.willRender(this.camera)&&this.batchGameObject(b,b.x+T,b.y+P)}},batchGameObject:function(y,T,P){T===void 0&&(T=y.x),P===void 0&&(P=y.y);var A=y.x,b=y.y,O=this.camera,D=this.renderer,B=this._eraseMode,G=y.mask;if(y.setPosition(T,P),this.canvas){if(B){var V=y.blendMode;y.blendMode=d.ERASE}G&&G.preRenderCanvas(D,y,O),y.renderCanvas(D,y,O,null),G&&G.postRenderCanvas(D,y,O),B&&(y.blendMode=V)}else D&&(G&&G.preRenderWebGL(D,y,O),B||D.setBlendMode(y.blendMode),y.renderWebGL(D,y,O),G&&G.postRenderWebGL(D,O,this.renderTarget));y.setPosition(A,b)},batchTextureFrameKey:function(y,T,P,A,b,O){var D=this.manager.getFrame(y,T);D&&this.batchTextureFrame(D,P,A,b,O)},batchTextureFrame:function(y,T,P,A,b){T===void 0&&(T=0),P===void 0&&(P=0),A===void 0&&(A=1),b===void 0&&(b=16777215);var O=this.camera.matrix,D=this.renderTarget;if(D)this.pipeline.batchTextureFrame(y,T,P,b,A,O,null);else{var B=this.context,G=y.canvasData,V=y.source.image;B.save(),B.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",B.globalAlpha=A,O.setToContext(B),G.width>0&&G.height>0&&B.drawImage(V,G.x,G.y,G.width,G.height,T,P,G.width,G.height),B.restore()}},snapshotArea:function(y,T,P,A,b,O,D){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,b,!1,y,T,P,A,O,D):this.renderer.snapshotCanvas(this.canvas,b,!1,y,T,P,A,O,D),this},snapshot:function(y,T,P){return this.snapshotArea(0,0,this.width,this.height,y,T,P)},snapshotPixel:function(y,T,P){return this.snapshotArea(y,T,1,1,P,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(y,T,P,A){var b=this.manager.resetStamp();b.setTexture(this),b.setOrigin(0),b.renderWebGL(y,b,P,A)},renderCanvas:function(){},destroy:function(){var y=this.manager.stamp;y&&y.texture===this&&this.manager.resetStamp(),v.prototype.destroy.call(this),u.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.renderer=null}});m.exports=g},4327:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(45319),u=i(79291),l=new d({initialize:function(r,o,p,a,v,x,g){this.texture=r,this.name=o,this.source=r.source[p],this.sourceIndex=p,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0},is3Slice:!1,scale9:!1,scale9Borders:{x:0,y:0,w:0,h:0}},this.setSize(x,g,a,v)},setCutPosition:function(h,r){return h===void 0&&(h=0),r===void 0&&(r=0),this.cutX=h,this.cutY=r,this.updateUVs()},setCutSize:function(h,r){return this.cutWidth=h,this.cutHeight=r,this.updateUVs()},setSize:function(h,r,o,p){o===void 0&&(o=0),p===void 0&&(p=0),this.setCutPosition(o,p),this.setCutSize(h,r),this.width=h,this.height=r,this.halfWidth=Math.floor(h*.5),this.halfHeight=Math.floor(r*.5),this.centerX=Math.floor(h/2),this.centerY=Math.floor(r/2);var a=this.data,v=a.cut;v.x=o,v.y=p,v.w=h,v.h=r,v.r=o+h,v.b=p+r,a.sourceSize.w=h,a.sourceSize.h=r,a.spriteSourceSize.w=h,a.spriteSourceSize.h=r,a.radius=.5*Math.sqrt(h*h+r*r);var x=a.drawImage;return x.x=o,x.y=p,x.width=h,x.height=r,this.updateUVs()},setTrim:function(h,r,o,p,a,v){var x=this.data,g=x.spriteSourceSize;return x.trim=!0,x.sourceSize.w=h,x.sourceSize.h=r,g.x=o,g.y=p,g.w=a,g.h=v,g.r=o+a,g.b=p+v,this.x=o,this.y=p,this.width=a,this.height=v,this.halfWidth=a*.5,this.halfHeight=v*.5,this.centerX=Math.floor(a/2),this.centerY=Math.floor(v/2),this.updateUVs()},setScale9:function(h,r,o,p){var a=this.data;return a.scale9=!0,a.is3Slice=r===0&&p===this.height,a.scale9Borders.x=h,a.scale9Borders.y=r,a.scale9Borders.w=o,a.scale9Borders.h=p,this},setCropUVs:function(h,r,o,p,a,v,x){var g=this.cutX,y=this.cutY,T=this.cutWidth,P=this.cutHeight,A=this.realWidth,b=this.realHeight;r=S(r,0,A),o=S(o,0,b),p=S(p,0,A-r),a=S(a,0,b-o);var O=g+r,D=y+o,B=p,G=a,V=this.data;if(V.trim){var k=V.spriteSourceSize;p=S(p,0,k.x+T-r),a=S(a,0,k.y+P-o);var U=r+p,W=o+a,X=!(k.r<r||k.b<o||k.x>U||k.y>W);if(X){var _=Math.max(k.x,r),Q=Math.max(k.y,o),j=Math.min(k.r,U)-_,it=Math.min(k.b,W)-Q;B=j,G=it,v?O=g+(T-(_-k.x)-j):O=g+(_-k.x),x?D=y+(P-(Q-k.y)-it):D=y+(Q-k.y),r=_,o=Q,p=j,a=it}else O=0,D=0,B=0,G=0}else v&&(O=g+(T-r-p)),x&&(D=y+(P-o-a));var K=this.source.width,J=this.source.height;return h.u0=Math.max(0,O/K),h.v0=Math.max(0,D/J),h.u1=Math.min(1,(O+B)/K),h.v1=Math.min(1,(D+G)/J),h.x=r,h.y=o,h.cx=O,h.cy=D,h.cw=B,h.ch=G,h.width=p,h.height=a,h.flipX=v,h.flipY=x,h},updateCropUVs:function(h,r,o){return this.setCropUVs(h,h.x,h.y,h.width,h.height,r,o)},setUVs:function(h,r,o,p,a,v){var x=this.data.drawImage;return x.width=h,x.height=r,this.u0=o,this.v0=p,this.u1=a,this.v1=v,this},updateUVs:function(){var h=this.cutX,r=this.cutY,o=this.cutWidth,p=this.cutHeight,a=this.data.drawImage;a.width=o,a.height=p;var v=this.source.width,x=this.source.height;return this.u0=h/v,this.v0=r/x,this.u1=(h+o)/v,this.v1=(r+p)/x,this},updateUVsInverted:function(){var h=this.source.width,r=this.source.height;return this.u0=(this.cutX+this.cutHeight)/h,this.v0=this.cutY/r,this.u1=this.cutX/h,this.v1=(this.cutY+this.cutWidth)/r,this},clone:function(){var h=new l(this.texture,this.name,this.sourceIndex);return h.cutX=this.cutX,h.cutY=this.cutY,h.cutWidth=this.cutWidth,h.cutHeight=this.cutHeight,h.x=this.x,h.y=this.y,h.width=this.width,h.height=this.height,h.halfWidth=this.halfWidth,h.halfHeight=this.halfHeight,h.centerX=this.centerX,h.centerY=this.centerY,h.rotated=this.rotated,h.data=u(!0,h.data,this.data),h.updateUVs(),h},destroy:function(){this.texture=null,this.source=null,this.customData=null,this.data=null},glTexture:{get:function(){return this.source.glTexture}},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},scale9:{get:function(){return this.data.scale9}},is3Slice:{get:function(){return this.data.is3Slice}},canvasData:{get:function(){return this.data.drawImage}}});m.exports=l},79237:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(4327),u=i(11876),l='Texture "%s" has no frame "%s"',h=new d({initialize:function(o,p,a,v,x){Array.isArray(a)||(a=[a]),this.manager=o,this.key=p,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var g=0;g<a.length;g++)this.source.push(new u(this,a[g],v,x))},add:function(r,o,p,a,v,x){if(this.has(r))return null;var g=new S(this,r,o,p,a,v,x);return this.frames[r]=g,this.firstFrame==="__BASE"&&(this.firstFrame=r),this.frameTotal++,g},remove:function(r){if(this.has(r)){var o=this.get(r);return o.destroy(),delete this.frames[r],!0}return!1},has:function(r){return this.frames.hasOwnProperty(r)},get:function(r){r||(r=this.firstFrame);var o=this.frames[r];return o||(console.warn(l,this.key,r),o=this.frames[this.firstFrame]),o},getTextureSourceIndex:function(r){for(var o=0;o<this.source.length;o++)if(this.source[o]===r)return o;return-1},getFramesFromTextureSource:function(r,o){o===void 0&&(o=!1);var p=[];for(var a in this.frames)if(!(a==="__BASE"&&!o)){var v=this.frames[a];v.sourceIndex===r&&p.push(v)}return p},getFrameBounds:function(r){r===void 0&&(r=0);for(var o=this.getFramesFromTextureSource(r,!0),p=o[0],a=p.cutX,v=p.cutY,x=p.cutX+p.cutWidth,g=p.cutY+p.cutHeight,y=1;y<o.length;y++){var T=o[y];T.cutX<a&&(a=T.cutX),T.cutY<v&&(v=T.cutY),T.cutX+T.cutWidth>x&&(x=T.cutX+T.cutWidth),T.cutY+T.cutHeight>g&&(g=T.cutY+T.cutHeight)}return{x:a,y:v,width:x-a,height:g-v}},getFrameNames:function(r){r===void 0&&(r=!1);var o=Object.keys(this.frames);if(!r){var p=o.indexOf("__BASE");p!==-1&&o.splice(p,1)}return o},getSourceImage:function(r){(r==null||this.frameTotal===1)&&(r="__BASE");var o=this.frames[r];return o?o.source.image:(console.warn(l,this.key,r),this.frames.__BASE.source.image)},getDataSourceImage:function(r){(r==null||this.frameTotal===1)&&(r="__BASE");var o=this.frames[r],p;return o?p=o.sourceIndex:(console.warn(l,this.key,r),p=this.frames.__BASE.sourceIndex),this.dataSource[p].image},setDataSource:function(r){Array.isArray(r)||(r=[r]);for(var o=0;o<r.length;o++){var p=this.source[o];this.dataSource.push(new u(this,r[o],p.width,p.height))}},setFilter:function(r){var o;for(o=0;o<this.source.length;o++)this.source[o].setFilter(r);for(o=0;o<this.dataSource.length;o++)this.dataSource[o].setFilter(r)},destroy:function(){var r,o=this.source,p=this.dataSource;for(r=0;r<o.length;r++)o[r]&&o[r].destroy();for(r=0;r<p.length;r++)p[r]&&p[r].destroy();for(var a in this.frames){var v=this.frames[a];v&&v.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});m.exports=h},17130:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(27919),S=i(57382),u=i(83419),l=i(40987),h=i(8054),r=i(81320),o=i(50792),p=i(69442),a=i(4327),v=i(8443),x=i(99584),g=i(35154),y=i(88571),T=i(41212),P=i(61309),A=i(87841),b=i(79237),O=new u({Extends:o,initialize:function(B){o.call(this),this.game=B,this.name="TextureManager",this.list={},this._tempCanvas=d.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new A,this.silentWarnings=!1,B.events.once(v.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(p.LOAD,this.updatePending,this),this.on(p.ERROR,this.updatePending,this);var D=this.game.config;D.defaultImage!==null&&this.addBase64("__DEFAULT",D.defaultImage),D.missingImage!==null&&this.addBase64("__MISSING",D.missingImage),D.whiteImage!==null&&this.addBase64("__WHITE",D.whiteImage),this.game.renderer&&this.game.renderer.gl&&this.addUint8Array("__NORMAL",new Uint8Array([127,127,255,255]),1,1),this.game.events.once(v.DESTROY,this.destroy,this),this.game.events.once(v.SYSTEM_READY,function(B){this.stamp=new y(B).setOrigin(0)},this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(p.LOAD),this.off(p.ERROR),this.emit(p.READY))},checkKey:function(D){return!D||typeof D!="string"||this.exists(D)?(this.silentWarnings||console.error("Texture key already in use: "+D),!1):!0},remove:function(D){if(typeof D=="string")if(this.exists(D))D=this.get(D);else return this.silentWarnings||console.warn("No texture found matching key: "+D),this;var B=D.key;return this.list.hasOwnProperty(B)&&(D.destroy(),this.emit(p.REMOVE,B),this.emit(p.REMOVE_KEY+B)),this},removeKey:function(D){return this.list.hasOwnProperty(D)&&delete this.list[D],this},addBase64:function(D,B){if(this.checkKey(D)){var G=this,V=new Image;V.onerror=function(){G.emit(p.ERROR,D)},V.onload=function(){var k=G.create(D,V);k&&(P.Image(k,0),G.emit(p.ADD,D,k),G.emit(p.ADD_KEY+D,k),G.emit(p.LOAD,D,k))},V.src=B}return this},getBase64:function(D,B,G,V){G===void 0&&(G="image/png"),V===void 0&&(V=.92);var k="",U=this.getFrame(D,B);if(U&&(U.source.isRenderTexture||U.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(U){var W=U.canvasData,X=d.create2D(this,W.width,W.height),_=X.getContext("2d",{willReadFrequently:!0});W.width>0&&W.height>0&&_.drawImage(U.source.image,W.x,W.y,W.width,W.height,0,0,W.width,W.height),k=X.toDataURL(G,V),d.remove(X)}return k},addImage:function(D,B,G){var V=null;return this.checkKey(D)&&(V=this.create(D,B),P.Image(V,0),G&&V.setDataSource(G),this.emit(p.ADD,D,V),this.emit(p.ADD_KEY+D,V)),V},addGLTexture:function(D,B){var G=null;if(this.checkKey(D)){var V=B.width,k=B.height;G=this.create(D,B,V,k),G.add("__BASE",0,0,0,V,k),this.emit(p.ADD,D,G),this.emit(p.ADD_KEY+D,G)}return G},addCompressedTexture:function(D,B,G){var V=null;if(this.checkKey(D)){if(V=this.create(D,B),V.add("__BASE",0,0,0,B.width,B.height),G){var k=function(W,X,_){Array.isArray(_.textures)||Array.isArray(_.frames)?P.JSONArray(W,X,_):P.JSONHash(W,X,_)};if(Array.isArray(G))for(var U=0;U<G.length;U++)k(V,U,G[U]);else k(V,0,G)}this.emit(p.ADD,D,V),this.emit(p.ADD_KEY+D,V)}return V},addRenderTexture:function(D,B){var G=null;return this.checkKey(D)&&(G=this.create(D,B),G.add("__BASE",0,0,0,B.width,B.height),this.emit(p.ADD,D,G),this.emit(p.ADD_KEY+D,G)),G},generate:function(D,B){if(this.checkKey(D)){var G=d.create(this,1,1);return B.canvas=G,x(B),this.addCanvas(D,G)}else return null},createCanvas:function(D,B,G){if(B===void 0&&(B=256),G===void 0&&(G=256),this.checkKey(D)){var V=d.create(this,B,G,h.CANVAS,!0);return this.addCanvas(D,V)}return null},addCanvas:function(D,B,G){G===void 0&&(G=!1);var V=null;return G?V=new S(this,D,B,B.width,B.height):this.checkKey(D)&&(V=new S(this,D,B,B.width,B.height),this.list[D]=V,this.emit(p.ADD,D,V),this.emit(p.ADD_KEY+D,V)),V},addDynamicTexture:function(D,B,G){var V=null;return typeof D=="string"&&!this.exists(D)?V=new r(this,D,B,G):(V=D,D=V.key),this.checkKey(D)?(this.list[D]=V,this.emit(p.ADD,D,V),this.emit(p.ADD_KEY+D,V)):V=null,V},addAtlas:function(D,B,G,V){return Array.isArray(G.textures)||Array.isArray(G.frames)?this.addAtlasJSONArray(D,B,G,V):this.addAtlasJSONHash(D,B,G,V)},addAtlasJSONArray:function(D,B,G,V){var k=null;if(B instanceof b?(D=B.key,k=B):this.checkKey(D)&&(k=this.create(D,B)),k){if(Array.isArray(G))for(var U=G.length===1,W=0;W<k.source.length;W++){var X=U?G[0]:G[W];P.JSONArray(k,W,X)}else P.JSONArray(k,0,G);V&&k.setDataSource(V),this.emit(p.ADD,D,k),this.emit(p.ADD_KEY+D,k)}return k},addAtlasJSONHash:function(D,B,G,V){var k=null;if(B instanceof b?(D=B.key,k=B):this.checkKey(D)&&(k=this.create(D,B)),k){if(Array.isArray(G))for(var U=0;U<G.length;U++)P.JSONHash(k,U,G[U]);else P.JSONHash(k,0,G);V&&k.setDataSource(V),this.emit(p.ADD,D,k),this.emit(p.ADD_KEY+D,k)}return k},addAtlasXML:function(D,B,G,V){var k=null;return B instanceof b?(D=B.key,k=B):this.checkKey(D)&&(k=this.create(D,B)),k&&(P.AtlasXML(k,0,G),V&&k.setDataSource(V),this.emit(p.ADD,D,k),this.emit(p.ADD_KEY+D,k)),k},addUnityAtlas:function(D,B,G,V){var k=null;return B instanceof b?(D=B.key,k=B):this.checkKey(D)&&(k=this.create(D,B)),k&&(P.UnityYAML(k,0,G),V&&k.setDataSource(V),this.emit(p.ADD,D,k),this.emit(p.ADD_KEY+D,k)),k},addSpriteSheet:function(D,B,G,V){var k=null;if(B instanceof b?(D=B.key,k=B):this.checkKey(D)&&(k=this.create(D,B)),k){var U=k.source[0].width,W=k.source[0].height;P.SpriteSheet(k,0,0,0,U,W,G),V&&k.setDataSource(V),this.emit(p.ADD,D,k),this.emit(p.ADD_KEY+D,k)}return k},addSpriteSheetFromAtlas:function(D,B){if(!this.checkKey(D))return null;var G=g(B,"atlas",null),V=g(B,"frame",null);if(!(!G||!V)){var k=this.get(G),U=k.get(V);if(U){var W=U.source.image;W||(W=U.source.glTexture);var X=this.create(D,W);return U.trimmed?P.SpriteSheetFromAtlas(X,U,B):P.SpriteSheet(X,0,U.cutX,U.cutY,U.cutWidth,U.cutHeight,B),this.emit(p.ADD,D,X),this.emit(p.ADD_KEY+D,X),X}}},addUint8Array:function(D,B,G,V){if(!this.checkKey(D)||B.length/4!==G*V)return null;var k=this.create(D,B,G,V);return k.add("__BASE",0,0,0,G,V),this.emit(p.ADD,D,k),this.emit(p.ADD_KEY+D,k),k},create:function(D,B,G,V){var k=null;return this.checkKey(D)&&(k=new b(this,D,B,G,V),this.list[D]=k),k},exists:function(D){return this.list.hasOwnProperty(D)},get:function(D){return D===void 0&&(D="__DEFAULT"),this.list[D]?this.list[D]:D instanceof b?D:D instanceof a?D.texture:this.list.__MISSING},cloneFrame:function(D,B){if(this.list[D])return this.list[D].get(B).clone()},getFrame:function(D,B){if(this.list[D])return this.list[D].get(B)},parseFrame:function(D){if(D){if(typeof D=="string")return this.getFrame(D);if(Array.isArray(D)&&D.length===2)return this.getFrame(D[0],D[1]);if(T(D))return this.getFrame(D.key,D.frame);if(D instanceof b)return D.get();if(D instanceof a)return D}else return},getTextureKeys:function(){var D=[];for(var B in this.list)B!=="__DEFAULT"&&B!=="__MISSING"&&B!=="__WHITE"&&B!=="__NORMAL"&&D.push(B);return D},getPixel:function(D,B,G,V){var k=this.getFrame(G,V);if(k){D-=k.x,B-=k.y;var U=k.data.cut;if(D+=U.x,B+=U.y,D>=U.x&&D<U.r&&B>=U.y&&B<U.b){var W=this._tempContext;W.clearRect(0,0,1,1),W.drawImage(k.source.image,D,B,1,1,0,0,1,1);var X=W.getImageData(0,0,1,1);return new l(X.data[0],X.data[1],X.data[2],X.data[3])}}return null},getPixelAlpha:function(D,B,G,V){var k=this.getFrame(G,V);if(k){D-=k.x,B-=k.y;var U=k.data.cut;if(D+=U.x,B+=U.y,D>=U.x&&D<U.r&&B>=U.y&&B<U.b){var W=this._tempContext;W.clearRect(0,0,1,1),W.drawImage(k.source.image,D,B,1,1,0,0,1,1);var X=W.getImageData(0,0,1,1);return X.data[3]}}return null},setTexture:function(D,B,G){return this.list[B]&&(D.texture=this.list[B],D.frame=D.texture.get(G)),D},renameTexture:function(D,B){var G=this.get(D);return G&&D!==B?(G.key=B,this.list[B]=G,delete this.list[D],!0):!1},each:function(D,B){for(var G=[null],V=1;V<arguments.length;V++)G.push(arguments[V]);for(var k in this.list)G[0]=this.list[k],D.apply(B,G)},resetStamp:function(D,B){D===void 0&&(D=1),B===void 0&&(B=16777215);var G=this.stamp;return G.setCrop(),G.setPosition(0),G.setAngle(0),G.setScale(1),G.setAlpha(D),G.setTint(B),G.setTexture("__WHITE"),G},destroy:function(){for(var D in this.list)this.list[D].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,d.remove(this._tempCanvas)}});m.exports=O},11876:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(27919),S=i(83419),u=i(50030),l=i(29795),h=i(82751),r=new S({initialize:function(p,a,v,x,g){g===void 0&&(g=!1);var y=p.manager.game;this.renderer=y.renderer,this.texture=p,this.source=a,this.image=a.compressed?null:a,this.compressionAlgorithm=a.compressed?a.format:null,this.resolution=1,this.width=v||a.naturalWidth||a.videoWidth||a.width||0,this.height=x||a.naturalHeight||a.videoHeight||a.height||0,this.scaleMode=l.DEFAULT,this.isCanvas=a instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&a instanceof HTMLVideoElement,this.isRenderTexture=a.type==="RenderTexture"||a.type==="DynamicTexture",this.isGLTexture=a instanceof h,this.isPowerOf2=u(this.width,this.height),this.glTexture=null,this.flipY=g,this.init(y)},init:function(o){var p=this.renderer;if(p){var a=this.source;if(p.gl){var v=this.image,x=this.flipY,g=this.width,y=this.height,T=this.scaleMode;this.isCanvas?this.glTexture=p.createCanvasTexture(v,!1,x):this.isVideo?this.glTexture=p.createVideoTexture(v,!1,x):this.isRenderTexture?this.glTexture=p.createTextureFromSource(null,g,y,T):this.isGLTexture?this.glTexture=a:this.compressionAlgorithm?this.glTexture=p.createTextureFromSource(a,void 0,void 0,T):a instanceof Uint8Array?this.glTexture=p.createUint8ArrayTexture(a,g,y,T):this.glTexture=p.createTextureFromSource(v,g,y,T)}else this.isRenderTexture&&(this.image=a.canvas)}o.config.antialias||this.setFilter(1)},setFilter:function(o){this.renderer&&this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,o),this.scaleMode=o},setFlipY:function(o){return o===void 0&&(o=!0),o===this.flipY?this:(this.flipY=o,this.update(),this)},update:function(){var o=this.renderer,p=this.image,a=this.flipY,v=o.gl;v&&this.isCanvas?o.updateCanvasTexture(p,this.glTexture,a):v&&this.isVideo&&o.updateVideoTexture(p,this.glTexture,a)},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture),this.isCanvas&&d.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});m.exports=r},19673:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={LINEAR:0,NEAREST:1};m.exports=E},44538:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="addtexture"},63486:m=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="addtexture-"},94851:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="onerror"},29099:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="onload"},8678:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="ready"},86415:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="removetexture"},30879:m=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="removetexture-"},69442:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={ADD:i(44538),ADD_KEY:i(63486),ERROR:i(94851),LOAD:i(29099),READY:i(8678),REMOVE:i(86415),REMOVE_KEY:i(30879)}},27458:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(79291),S=i(19673),u={CanvasTexture:i(57382),DynamicTexture:i(81320),Events:i(69442),FilterMode:S,Frame:i(4327),Parsers:i(61309),Texture:i(79237),TextureManager:i(17130),TextureSource:i(11876)};u=d(!1,u,S),m.exports=u},89905:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){if(!S.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var u=i.source[d];i.add("__BASE",d,0,0,u.width,u.height);for(var l=S.getElementsByTagName("SubTexture"),h,r=0;r<l.length;r++){var o=l[r].attributes,p=o.name.value,a=parseInt(o.x.value,10),v=parseInt(o.y.value,10),x=parseInt(o.width.value,10),g=parseInt(o.height.value,10);if(h=i.add(p,d,a,v,x,g),o.frameX){var y=Math.abs(parseInt(o.frameX.value,10)),T=Math.abs(parseInt(o.frameY.value,10)),P=parseInt(o.frameWidth.value,10),A=parseInt(o.frameHeight.value,10);h.setTrim(x,g,y,T,P,A)}}return i};m.exports=E},72893:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){var S=i.source[d];return i.add("__BASE",d,0,0,S.width,S.height),i};m.exports=E},4832:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){var S=i.source[d];return i.add("__BASE",d,0,0,S.width,S.height),i};m.exports=E},78566:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(41786),S=function(u,l,h){if(!h.frames&&!h.textures){console.warn("Invalid Texture Atlas JSON Array");return}var r=u.source[l];u.add("__BASE",l,0,0,r.width,r.height);for(var o=Array.isArray(h.textures)?h.textures[l].frames:h.frames,p,a=0;a<o.length;a++){var v=o[a];if(p=u.add(v.filename,l,v.frame.x,v.frame.y,v.frame.w,v.frame.h),!p){console.warn("Invalid atlas json, frame already exists: "+v.filename);continue}v.trimmed&&p.setTrim(v.sourceSize.w,v.sourceSize.h,v.spriteSourceSize.x,v.spriteSourceSize.y,v.spriteSourceSize.w,v.spriteSourceSize.h),v.rotated&&(p.rotated=!0,p.updateUVsInverted());var x=v.anchor||v.pivot;x&&(p.customPivot=!0,p.pivotX=x.x,p.pivotY=x.y),v.scale9Borders&&p.setScale9(v.scale9Borders.x,v.scale9Borders.y,v.scale9Borders.w,v.scale9Borders.h),p.customData=d(v)}for(var g in h)g!=="frames"&&(Array.isArray(h[g])?u.customData[g]=h[g].slice(0):u.customData[g]=h[g]);return u};m.exports=S},39711:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(41786),S=function(u,l,h){if(!h.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var r=u.source[l];u.add("__BASE",l,0,0,r.width,r.height);var o=h.frames,p;for(var a in o)if(o.hasOwnProperty(a)){var v=o[a];if(p=u.add(a,l,v.frame.x,v.frame.y,v.frame.w,v.frame.h),!p){console.warn("Invalid atlas json, frame already exists: "+a);continue}v.trimmed&&p.setTrim(v.sourceSize.w,v.sourceSize.h,v.spriteSourceSize.x,v.spriteSourceSize.y,v.spriteSourceSize.w,v.spriteSourceSize.h),v.rotated&&(p.rotated=!0,p.updateUVsInverted());var x=v.anchor||v.pivot;x&&(p.customPivot=!0,p.pivotX=x.x,p.pivotY=x.y),v.scale9Borders&&p.setScale9(v.scale9Borders.x,v.scale9Borders.y,v.scale9Borders.w,v.scale9Borders.h),p.customData=d(v)}for(var g in h)g!=="frames"&&(Array.isArray(h[g])?u.customData[g]=h[g].slice(0):u.customData[g]=h[g]);return u};m.exports=S},31403:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){var d=[171,75,84,88,32,49,49,187,13,10,26,10],S,u=new Uint8Array(i,0,12);for(S=0;S<u.length;S++)if(u[S]!==d[S]){console.warn("KTXParser - Invalid file format");return}var l=Uint32Array.BYTES_PER_ELEMENT,h=new DataView(i,12,13*l),r=h.getUint32(0,!0)===67305985,o=h.getUint32(1*l,r);if(o!==0){console.warn("KTXParser - Only compressed formats supported");return}var p=h.getUint32(4*l,r),a=h.getUint32(6*l,r),v=h.getUint32(7*l,r),x=Math.max(1,h.getUint32(11*l,r)),g=h.getUint32(12*l,r),y=new Array(x),T=12+13*4+g,P=a,A=v;for(S=0;S<x;S++){var b=new Int32Array(i,T,1)[0];T+=4,y[S]={data:new Uint8Array(i,T,b),width:P,height:A},P=Math.max(1,P>>1),A=Math.max(1,A>>1),T+=b}return{mipmaps:y,width:a,height:v,internalFormat:p,compressed:!0,generateMipmap:!1}};m.exports=E},82038:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function E(B,G,V,k,U,W,X){return X===void 0&&(X=16),Math.floor((B+V)/U)*Math.floor((G+k)/W)*X}function i(B,G){return B=Math.max(B,16),G=Math.max(G,8),B*G/4}function d(B,G){return B=Math.max(B,8),G=Math.max(G,8),B*G/2}function S(B,G){return Math.ceil(B/4)*Math.ceil(G/4)*16}function u(B,G){return E(B,G,3,3,4,4,8)}function l(B,G){return E(B,G,3,3,4,4)}function h(B,G){return E(B,G,4,3,5,4)}function r(B,G){return E(B,G,4,4,5,5)}function o(B,G){return E(B,G,5,4,6,5)}function p(B,G){return E(B,G,5,5,6,6)}function a(B,G){return E(B,G,7,4,8,5)}function v(B,G){return E(B,G,7,5,8,6)}function x(B,G){return E(B,G,7,7,8,8)}function g(B,G){return E(B,G,9,4,10,5)}function y(B,G){return E(B,G,9,5,10,6)}function T(B,G){return E(B,G,9,7,10,8)}function P(B,G){return E(B,G,9,9,10,10)}function A(B,G){return E(B,G,11,9,12,10)}function b(B,G){return E(B,G,11,11,12,12)}var O={0:{sizeFunc:i,glFormat:[35841]},1:{sizeFunc:i,glFormat:[35843]},2:{sizeFunc:d,glFormat:[35840]},3:{sizeFunc:d,glFormat:[35842]},6:{sizeFunc:u,glFormat:[36196]},7:{sizeFunc:u,glFormat:[33776,35916]},8:{sizeFunc:l,glFormat:[33777,35917]},9:{sizeFunc:l,glFormat:[33778,35918]},11:{sizeFunc:l,glFormat:[33779,35919]},14:{sizeFunc:S,glFormat:[36494,36495]},15:{sizeFunc:S,glFormat:[36492,36493]},22:{sizeFunc:u,glFormat:[37492,37493]},23:{sizeFunc:l,glFormat:[37496,37497]},24:{sizeFunc:u,glFormat:[37494,37495]},25:{sizeFunc:u,glFormat:[37488]},26:{sizeFunc:l,glFormat:[37490]},27:{sizeFunc:l,glFormat:[37808,37840]},28:{sizeFunc:h,glFormat:[37809,37841]},29:{sizeFunc:r,glFormat:[37810,37842]},30:{sizeFunc:o,glFormat:[37811,37843]},31:{sizeFunc:p,glFormat:[37812,37844]},32:{sizeFunc:a,glFormat:[37813,37845]},33:{sizeFunc:v,glFormat:[37814,37846]},34:{sizeFunc:x,glFormat:[37815,37847]},35:{sizeFunc:g,glFormat:[37816,37848]},36:{sizeFunc:y,glFormat:[37817,37849]},37:{sizeFunc:T,glFormat:[37818,37850]},38:{sizeFunc:P,glFormat:[37819,37851]},39:{sizeFunc:A,glFormat:[37820,37852]},40:{sizeFunc:b,glFormat:[37821,37853]}},D=function(B){for(var G=new Uint32Array(B,0,13),V=G[0],k=V===55727696,U=k?G[2]:G[3],W=G[4],X=O[U].glFormat[W],_=O[U].sizeFunc,Q=G[11],j=G[7],it=G[6],K=52+G[12],J=new Uint8Array(B,K),Y=new Array(Q),q=0,$=j,et=it,rt=0;rt<Q;rt++){var at=_($,et);Y[rt]={data:new Uint8Array(J.buffer,J.byteOffset+q,at),width:$,height:et},$=Math.max(1,$>>1),et=Math.max(1,et>>1),q+=at}return{mipmaps:Y,width:j,height:it,internalFormat:X,compressed:!0,generateMipmap:!1}};m.exports=D},75549:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(95540),S=function(u,l,h,r,o,p,a){var v=d(a,"frameWidth",null),x=d(a,"frameHeight",v);if(v===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var g=u.source[l];u.add("__BASE",l,0,0,g.width,g.height);var y=d(a,"startFrame",0),T=d(a,"endFrame",-1),P=d(a,"margin",0),A=d(a,"spacing",0),b=Math.floor((o-P+A)/(v+A)),O=Math.floor((p-P+A)/(x+A)),D=b*O;D===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",u.key),(y>D||y<-D)&&(y=0),y<0&&(y=D+y),(T===-1||T>D||T<y)&&(T=D);for(var B=P,G=P,V=0,k=0,U=0,W=0;W<D;W++){V=0,k=0;var X=B+v,_=G+x;X>o&&(V=X-o),_>p&&(k=_-p),W>=y&&W<=T&&(u.add(U,l,h+B,r+G,v-V,x-k),U++),B+=v+A,B+v>o&&(B=P,G+=x+A)}return u};m.exports=S},47534:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(95540),S=function(u,l,h){var r=d(h,"frameWidth",null),o=d(h,"frameHeight",r);if(!r)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var p=u.source[0];u.add("__BASE",0,0,0,p.width,p.height),d(h,"startFrame",0),d(h,"endFrame",-1);for(var a=d(h,"margin",0),v=d(h,"spacing",0),x=l.cutX,g=l.cutY,y=l.cutWidth,T=l.cutHeight,P=l.realWidth,A=l.realHeight,b=Math.floor((P-a+v)/(r+v)),O=Math.floor((A-a+v)/(o+v)),D=l.x,B=r-D,G=r-(P-y-D),V=l.y,k=o-V,U=o-(A-T-V),W,X=a,_=a,Q=0,j=0,it=0;it<O;it++){for(var K=it===0,J=it===O-1,Y=0;Y<b;Y++){var q=Y===0,$=Y===b-1;if(W=u.add(Q,j,x+X,g+_,r,o),q||K||$||J){var et=q?D:0,rt=K?V:0,at=0,lt=0;q&&(at+=r-B),$&&(at+=r-G),K&&(lt+=o-k),J&&(lt+=o-U);var vt=r-at,xt=o-lt;W.cutWidth=vt,W.cutHeight=xt,W.setTrim(r,o,et,rt,vt,xt)}X+=v,q?X+=B:$?X+=G:X+=r,Q++}X=a,_+=v,K?_+=k:J?_+=U:_+=o}return u};m.exports=S},86147:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=0,i=function(S,u,l,h){var r=E-h.y-h.height;S.add(l,u,h.x,r,h.width,h.height)},d=function(S,u,l){var h=S.source[u];S.add("__BASE",u,0,0,h.width,h.height),E=h.height;for(var r=l.split(`
`),o=/^[ ]*(- )*(\w+)+[: ]+(.*)/,p="",a="",v={x:0,y:0,width:0,height:0},x=0;x<r.length;x++){var g=r[x].match(o);if(g){var y=g[1]==="- ",T=g[2],P=g[3];if(y&&(a!==p&&(i(S,u,a,v),p=a),v={x:0,y:0,width:0,height:0}),T==="name"){a=P;continue}switch(T){case"x":case"y":case"width":case"height":v[T]=parseInt(P,10);break}}}return a!==p&&i(S,u,a,v),S};m.exports=d},55222:(m,E,i)=>{/**
 * @author       Ben Richards <benjamindrichards@gmail.com>
 * @copyright    2024 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(50030),S=function(p){for(var a=p.mipmaps,v=1;v<a.length;v++){var x=a[v].width,g=a[v].height;if(!d(x,g))return console.warn("Mip level "+v+" is not a power-of-two size: "+x+"x"+g),!1}var y=o[p.internalFormat];return y?y(p):(console.warn("No format checker found for internal format "+p.internalFormat+". Assuming valid."),!0)};function u(p){for(var a=p.mipmaps,v=0;v<a.length;v++){var x=a[v].width,g=a[v].height;if((x<<v)%4!==0||(g<<v)%4!==0)return console.warn("BPTC, RGTC, and S3TC dimensions must be a multiple of 4 pixels, and each successive mip level must be half the size of the previous level, rounded down. Mip level "+v+" is "+x+"x"+g),!1}return!0}function l(){return!0}function h(p){var a=p.mipmaps,v=a[0];return d(v.width,v.height)?!0:(console.warn("PVRTC base dimensions must be power of two. Base level is "+v.width+"x"+v.height),!1)}function r(p){var a=p.mipmaps,v=a[0];return v.width%4!==0||v.height%4!==0?(console.warn("S3TC SRGB base dimensions must be a multiple of 4 pixels. Base level is "+v.width+"x"+v.height+" pixels"),!1):!0}var o={37488:l,37489:l,37490:l,37491:l,37492:l,37493:l,37494:l,37495:l,37496:l,37497:l,36196:l,37808:l,37809:l,37810:l,37811:l,37812:l,37813:l,37814:l,37815:l,37816:l,37817:l,37818:l,37819:l,37820:l,37821:l,37840:l,37841:l,37842:l,37843:l,37844:l,37845:l,37846:l,37847:l,37848:l,37849:l,37850:l,37851:l,37852:l,37853:l,36492:u,36493:u,36494:u,36495:u,36283:u,36284:u,36285:u,36286:u,35840:h,35841:h,35842:h,35843:h,33776:u,33777:u,33778:u,33779:u,35916:r,35917:r,35918:r,35919:r};m.exports=S},61309:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={AtlasXML:i(89905),Canvas:i(72893),Image:i(4832),JSONArray:i(78566),JSONHash:i(39711),KTXParser:i(31403),PVRParser:i(82038),SpriteSheet:i(75549),SpriteSheetFromAtlas:i(47534),UnityYAML:i(86147)}},80341:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},16536:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=new d({initialize:function(l,h,r,o,p,a,v){(r===void 0||r<=0)&&(r=32),(o===void 0||o<=0)&&(o=32),p===void 0&&(p=0),a===void 0&&(a=0),this.name=l,this.firstgid=h|0,this.imageWidth=r|0,this.imageHeight=o|0,this.imageMargin=p|0,this.imageSpacing=a|0,this.properties=v||{},this.images=[],this.total=0},containsImageIndex:function(u){return u>=this.firstgid&&u<this.firstgid+this.total},addImage:function(u,l,h,r){return this.images.push({gid:u,image:l,width:h,height:r}),this.total++,this}});m.exports=S},27462:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=new d({initialize:function(l){if(this.gids=[],l!==void 0)for(var h=0;h<l.length;++h)for(var r=l[h],o=0;o<r.total;++o)this.gids[r.firstgid+o]=r;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(u){this.gids=u?this._gids:void 0}},getTypeIncludingTile:function(u){if(u.type!==void 0&&u.type!=="")return u.type;if(!(!this.gids||u.gid===void 0)){var l=this.gids[u.gid];if(l){var h=l.getTileData(u.gid);if(h)return h.type}}},setTextureAndFrame:function(u,l,h,r){if(l===null&&this.gids&&r.gid!==void 0){var o=this.gids[r.gid];o&&(l===null&&o.image!==void 0&&(l=o.image.key),h===null&&(h=r.gid-o.firstgid),u.scene.textures.getFrame(l,h)||(l=null,h=null))}u.setTexture(l,h)},setPropertiesFromTiledObject:function(u,l){if(this.gids!==void 0&&l.gid!==void 0){var h=this.gids[l.gid];h!==void 0&&this.setFromJSON(u,h.getTileProperties(l.gid))}this.setFromJSON(u,l.properties)},setFromJSON:function(u,l){if(l){if(Array.isArray(l)){for(var h=0;h<l.length;h++){var r=l[h];u[r.name]!==void 0?u[r.name]=r.value:u.setData(r.name,r.value)}return}for(var o in l)u[o]!==void 0?u[o]=l[o]:u.setData(o,l[o])}}});m.exports=S},31989:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(80341),S=i(87010),u=i(46177),l=i(49075),h=function(r,o,p,a,v,x,g,y){p===void 0&&(p=32),a===void 0&&(a=32),v===void 0&&(v=10),x===void 0&&(x=10),y===void 0&&(y=!1);var T=null;if(Array.isArray(g)){var P=o!==void 0?o:"map";T=u(P,d.ARRAY_2D,g,p,a,y)}else if(o!==void 0){var A=r.cache.tilemap.get(o);A?T=u(o,A.format,A.data,p,a,y):console.warn("No map data found for key "+o)}return T===null&&(T=new S({tileWidth:p,tileHeight:a,width:v,height:x})),new l(r,T)};m.exports=h},23029:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(31401),u=i(91907),l=i(62644),h=i(93232),r=new d({Mixins:[S.AlphaSingle,S.Flip,S.Visible],initialize:function(p,a,v,x,g,y,T,P){this.layer=p,this.index=a,this.x=v,this.y=x,this.width=g,this.height=y,this.right,this.bottom,this.baseWidth=T!==void 0?T:g,this.baseHeight=P!==void 0?P:y,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.tintFill=!1,this.physics={}},containsPoint:function(o,p){return!(o<this.pixelX||p<this.pixelY||o>this.right||p>this.bottom)},copy:function(o){return this.index=o.index,this.alpha=o.alpha,this.properties=l(o.properties),this.visible=o.visible,this.setFlip(o.flipX,o.flipY),this.tint=o.tint,this.rotation=o.rotation,this.collideUp=o.collideUp,this.collideDown=o.collideDown,this.collideLeft=o.collideLeft,this.collideRight=o.collideRight,this.collisionCallback=o.collisionCallback,this.collisionCallbackContext=o.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(o){var p=this.tilemapLayer;if(p){var a=p.tileToWorldXY(this.x,this.y,void 0,o);return a.x}return this.x*this.baseWidth},getRight:function(o){var p=this.tilemapLayer;return p?this.getLeft(o)+this.width*p.scaleX:this.getLeft(o)+this.width},getTop:function(o){var p=this.tilemapLayer;if(p){var a=p.tileToWorldXY(this.x,this.y,void 0,o);return a.y}return this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(o){var p=this.tilemapLayer;return p?this.getTop(o)+this.height*p.scaleY:this.getTop(o)+this.height},getBounds:function(o,p){return p===void 0&&(p=new h),p.x=this.getLeft(o),p.y=this.getTop(o),p.width=this.getRight(o)-p.x,p.height=this.getBottom(o)-p.y,p},getCenterX:function(o){return(this.getLeft(o)+this.getRight(o))/2},getCenterY:function(o){return(this.getTop(o)+this.getBottom(o))/2},intersects:function(o,p,a,v){return!(a<=this.pixelX||v<=this.pixelY||o>=this.right||p>=this.bottom)},isInteresting:function(o,p){return o&&p?this.canCollide||this.hasInterestingFace:o?this.collides:p?this.hasInterestingFace:!1},resetCollision:function(o){if(o===void 0&&(o=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,o){var p=this.tilemapLayer;p&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(o,p,a,v,x){if(p===void 0&&(p=o),a===void 0&&(a=o),v===void 0&&(v=o),x===void 0&&(x=!0),this.collideLeft=o,this.collideRight=p,this.collideUp=a,this.collideDown=v,this.faceLeft=o,this.faceRight=p,this.faceTop=a,this.faceBottom=v,x){var g=this.tilemapLayer;g&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(o,p){return o===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=o,this.collisionCallbackContext=p),this},setSize:function(o,p,a,v){return o!==void 0&&(this.width=o),p!==void 0&&(this.height=p),a!==void 0&&(this.baseWidth=a),v!==void 0&&(this.baseHeight=v),this.updatePixelXY(),this},updatePixelXY:function(){var o=this.layer.orientation;if(o===u.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(o===u.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(o===u.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(o===u.HEXAGONAL){var p=this.layer.staggerAxis,a=this.layer.staggerIndex,v=this.layer.hexSideLength,x,g;p==="y"?(g=(this.baseHeight-v)/2+v,a==="odd"?this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.pixelX=this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*g):p==="x"&&(x=(this.baseWidth-v)/2+v,this.pixelX=this.x*x,a==="odd"?this.pixelY=this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.pixelY=this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var o=this.layer.tilemapLayer;if(o){var p=o.gidMap[this.index];if(p)return p}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var o=this.tilemapLayer;return o?o.tilemap:null}}});m.exports=r},49075:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(84101),S=i(83419),u=i(39506),l=i(80341),h=i(95540),r=i(14977),o=i(27462),p=i(91907),a=i(36305),v=i(19133),x=i(68287),g=i(23029),y=i(81086),T=i(20442),P=i(33629),A=new S({initialize:function(O,D){this.scene=O,this.tileWidth=D.tileWidth,this.tileHeight=D.tileHeight,this.width=D.width,this.height=D.height,this.orientation=D.orientation,this.renderOrder=D.renderOrder,this.format=D.format,this.version=D.version,this.properties=D.properties,this.widthInPixels=D.widthInPixels,this.heightInPixels=D.heightInPixels,this.imageCollections=D.imageCollections,this.images=D.images,this.layers=D.layers,this.tiles=D.tiles,this.tilesets=D.tilesets,this.objects=D.objects,this.currentLayerIndex=0,this.hexSideLength=D.hexSideLength;var B=this.orientation;this._convert={WorldToTileXY:y.GetWorldToTileXYFunction(B),WorldToTileX:y.GetWorldToTileXFunction(B),WorldToTileY:y.GetWorldToTileYFunction(B),TileToWorldXY:y.GetTileToWorldXYFunction(B),TileToWorldX:y.GetTileToWorldXFunction(B),TileToWorldY:y.GetTileToWorldYFunction(B),GetTileCorners:y.GetTileCornersFunction(B)}},setRenderOrder:function(b){var O=["right-down","left-down","right-up","left-up"];return typeof b=="number"&&(b=O[b]),O.indexOf(b)>-1&&(this.renderOrder=b),this},addTilesetImage:function(b,O,D,B,G,V,k,U){if(b===void 0)return null;O==null&&(O=b);var W=this.scene.sys.textures;if(!W.exists(O))return console.warn('Texture key "%s" not found',O),null;var X=W.get(O),_=this.getTilesetIndex(b);if(_===null&&this.format===l.TILED_JSON)return console.warn('Tilemap has no tileset "%s". Its tilesets are %o',b,this.tilesets),null;var Q=this.tilesets[_];return Q?((D||B)&&Q.setTileSize(D,B),(G||V)&&Q.setSpacing(G,V),Q.setImage(X),Q):(D===void 0&&(D=this.tileWidth),B===void 0&&(B=this.tileHeight),G===void 0&&(G=0),V===void 0&&(V=0),k===void 0&&(k=0),U===void 0&&(U={x:0,y:0}),Q=new P(b,k,D,B,G,V,void 0,void 0,U),Q.setImage(X),this.tilesets.push(Q),this.tiles=d(this),Q)},copy:function(b,O,D,B,G,V,k,U){return U=this.getLayer(U),U!==null?(y.Copy(b,O,D,B,G,V,k,U),this):null},createBlankLayer:function(b,O,D,B,G,V,k,U){D===void 0&&(D=0),B===void 0&&(B=0),G===void 0&&(G=this.width),V===void 0&&(V=this.height),k===void 0&&(k=this.tileWidth),U===void 0&&(U=this.tileHeight);var W=this.getLayerIndex(b);if(W!==null)return console.warn("Invalid Tilemap Layer ID: "+b),null;for(var X=new r({name:b,tileWidth:k,tileHeight:U,width:G,height:V,orientation:this.orientation,hexSideLength:this.hexSideLength}),_,Q=0;Q<V;Q++){_=[];for(var j=0;j<G;j++)_.push(new g(X,-1,j,Q,k,U,this.tileWidth,this.tileHeight));X.data.push(_)}this.layers.push(X),this.currentLayerIndex=this.layers.length-1;var it=new T(this.scene,this,this.currentLayerIndex,O,D,B);return it.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(it),it},createLayer:function(b,O,D,B){var G=this.getLayerIndex(b);if(G===null)return console.warn("Invalid Tilemap Layer ID: "+b),typeof b=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var V=this.layers[G];if(V.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+b),null;this.currentLayerIndex=G,D===void 0&&(D=V.x),B===void 0&&(B=V.y);var k=new T(this.scene,this,G,O,D,B);return k.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(k),k},createFromObjects:function(b,O,D){D===void 0&&(D=!0);var B=[],G=this.getObjectLayer(b);if(!G)return console.warn("createFromObjects: Invalid objectLayerName given: "+b),B;var V=new o(D?this.tilesets:void 0);Array.isArray(O)||(O=[O]);for(var k=G.objects,U=0;U<O.length;U++){var W=O[U],X=h(W,"id",null),_=h(W,"gid",null),Q=h(W,"name",null),j=h(W,"type",null);V.enabled=!h(W,"ignoreTileset",null);for(var it,K=[],J=0;J<k.length;J++)it=k[J],(X===null&&_===null&&Q===null&&j===null||X!==null&&it.id===X||_!==null&&it.gid===_||Q!==null&&it.name===Q||j!==null&&V.getTypeIncludingTile(it)===j)&&K.push(it);for(var Y=h(W,"classType",x),q=h(W,"scene",this.scene),$=h(W,"container",null),et=h(W,"key",null),rt=h(W,"frame",null),at=0;at<K.length;at++){it=K[at];var lt=new Y(q);if(lt.setName(it.name),lt.setPosition(it.x,it.y),V.setTextureAndFrame(lt,et,rt,it),it.width&&(lt.displayWidth=it.width),it.height&&(lt.displayHeight=it.height),this.orientation===p.ISOMETRIC){var vt=this.tileWidth/this.tileHeight,xt={x:lt.x-lt.y,y:(lt.x+lt.y)/vt};lt.x=xt.x,lt.y=xt.y}var ut={x:lt.originX*it.width,y:(lt.originY-(it.gid?1:0))*it.height};if(it.rotation){var mt=u(it.rotation);a(ut,mt),lt.rotation=mt}lt.x+=ut.x,lt.y+=ut.y,(it.flippedHorizontal!==void 0||it.flippedVertical!==void 0)&&lt.setFlip(it.flippedHorizontal,it.flippedVertical),it.visible||(lt.visible=!1),V.setPropertiesFromTiledObject(lt,it),$?$.add(lt):q.add.existing(lt),B.push(lt)}}return B},createFromTiles:function(b,O,D,B,G,V){return V=this.getLayer(V),V===null?null:y.CreateFromTiles(b,O,D,B,G,V)},fill:function(b,O,D,B,G,V,k){return V===void 0&&(V=!0),k=this.getLayer(k),k===null?null:(y.Fill(b,O,D,B,G,V,k),this)},filterObjects:function(b,O,D){if(typeof b=="string"){var B=b;if(b=this.getObjectLayer(b),!b)return console.warn("No object layer found with the name: "+B),null}return b.objects.filter(O,D)},filterTiles:function(b,O,D,B,G,V,k,U){return U=this.getLayer(U),U===null?null:y.FilterTiles(b,O,D,B,G,V,k,U)},findByIndex:function(b,O,D,B){return B=this.getLayer(B),B===null?null:y.FindByIndex(b,O,D,B)},findObject:function(b,O,D){if(typeof b=="string"){var B=b;if(b=this.getObjectLayer(b),!b)return console.warn("No object layer found with the name: "+B),null}return b.objects.find(O,D)||null},findTile:function(b,O,D,B,G,V,k,U){return U=this.getLayer(U),U===null?null:y.FindTile(b,O,D,B,G,V,k,U)},forEachTile:function(b,O,D,B,G,V,k,U){return U=this.getLayer(U),U===null?null:(y.ForEachTile(b,O,D,B,G,V,k,U),this)},getImageIndex:function(b){return this.getIndex(this.images,b)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(b){return b.name})},getIndex:function(b,O){for(var D=0;D<b.length;D++)if(b[D].name===O)return D;return null},getLayer:function(b){var O=this.getLayerIndex(b);return O!==null?this.layers[O]:null},getObjectLayer:function(b){var O=this.getIndex(this.objects,b);return O!==null?this.objects[O]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(b){return b.name})},getLayerIndex:function(b){return b===void 0?this.currentLayerIndex:typeof b=="string"?this.getLayerIndexByName(b):typeof b=="number"&&b<this.layers.length?b:b instanceof T&&b.tilemap===this?b.layerIndex:null},getLayerIndexByName:function(b){return this.getIndex(this.layers,b)},getTileAt:function(b,O,D,B){return B=this.getLayer(B),B===null?null:y.GetTileAt(b,O,D,B)},getTileAtWorldXY:function(b,O,D,B,G){return G=this.getLayer(G),G===null?null:y.GetTileAtWorldXY(b,O,D,B,G)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(b){return b.name})},getTilesWithin:function(b,O,D,B,G,V){return V=this.getLayer(V),V===null?null:y.GetTilesWithin(b,O,D,B,G,V)},getTilesWithinShape:function(b,O,D,B){return B=this.getLayer(B),B===null?null:y.GetTilesWithinShape(b,O,D,B)},getTilesWithinWorldXY:function(b,O,D,B,G,V,k){return k=this.getLayer(k),k===null?null:y.GetTilesWithinWorldXY(b,O,D,B,G,V,k)},getTileset:function(b){var O=this.getIndex(this.tilesets,b);return O!==null?this.tilesets[O]:null},getTilesetIndex:function(b){return this.getIndex(this.tilesets,b)},hasTileAt:function(b,O,D){return D=this.getLayer(D),D===null?null:y.HasTileAt(b,O,D)},hasTileAtWorldXY:function(b,O,D,B){return B=this.getLayer(B),B===null?null:y.HasTileAtWorldXY(b,O,D,B)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(b){this.setLayer(b)}},putTileAt:function(b,O,D,B,G){return B===void 0&&(B=!0),G=this.getLayer(G),G===null?null:y.PutTileAt(b,O,D,B,G)},putTileAtWorldXY:function(b,O,D,B,G,V){return B===void 0&&(B=!0),V=this.getLayer(V),V===null?null:y.PutTileAtWorldXY(b,O,D,B,G,V)},putTilesAt:function(b,O,D,B,G){return B===void 0&&(B=!0),G=this.getLayer(G),G===null?null:(y.PutTilesAt(b,O,D,B,G),this)},randomize:function(b,O,D,B,G,V){return V=this.getLayer(V),V===null?null:(y.Randomize(b,O,D,B,G,V),this)},calculateFacesAt:function(b,O,D){return D=this.getLayer(D),D===null?null:(y.CalculateFacesAt(b,O,D),this)},calculateFacesWithin:function(b,O,D,B,G){return G=this.getLayer(G),G===null?null:(y.CalculateFacesWithin(b,O,D,B,G),this)},removeLayer:function(b){var O=this.getLayerIndex(b);if(O!==null){v(this.layers,O);for(var D=O;D<this.layers.length;D++)this.layers[D].tilemapLayer&&this.layers[D].tilemapLayer.layerIndex--;return this.currentLayerIndex===O&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(b){var O=this.getLayerIndex(b);return O!==null?(b=this.layers[O],b.tilemapLayer.destroy(),v(this.layers,O),this.currentLayerIndex===O&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var b=this.layers,O=0;O<b.length;O++)b[O].tilemapLayer&&b[O].tilemapLayer.destroy(!1);return b.length=0,this.currentLayerIndex=0,this},removeTile:function(b,O,D){O===void 0&&(O=-1),D===void 0&&(D=!0);var B=[];Array.isArray(b)||(b=[b]);for(var G=0;G<b.length;G++){var V=b[G];B.push(this.removeTileAt(V.x,V.y,!0,D,V.tilemapLayer)),O>-1&&this.putTileAt(O,V.x,V.y,D,V.tilemapLayer)}return B},removeTileAt:function(b,O,D,B,G){return D===void 0&&(D=!0),B===void 0&&(B=!0),G=this.getLayer(G),G===null?null:y.RemoveTileAt(b,O,D,B,G)},removeTileAtWorldXY:function(b,O,D,B,G,V){return D===void 0&&(D=!0),B===void 0&&(B=!0),V=this.getLayer(V),V===null?null:y.RemoveTileAtWorldXY(b,O,D,B,G,V)},renderDebug:function(b,O,D){return D=this.getLayer(D),D===null?null:(this.orientation===p.ORTHOGONAL&&y.RenderDebug(b,O,D),this)},renderDebugFull:function(b,O){for(var D=this.layers,B=0;B<D.length;B++)y.RenderDebug(b,O,D[B]);return this},replaceByIndex:function(b,O,D,B,G,V,k){return k=this.getLayer(k),k===null?null:(y.ReplaceByIndex(b,O,D,B,G,V,k),this)},setCollision:function(b,O,D,B,G){return O===void 0&&(O=!0),D===void 0&&(D=!0),G===void 0&&(G=!0),B=this.getLayer(B),B===null?null:(y.SetCollision(b,O,D,B,G),this)},setCollisionBetween:function(b,O,D,B,G){return D===void 0&&(D=!0),B===void 0&&(B=!0),G=this.getLayer(G),G===null?null:(y.SetCollisionBetween(b,O,D,B,G),this)},setCollisionByProperty:function(b,O,D,B){return O===void 0&&(O=!0),D===void 0&&(D=!0),B=this.getLayer(B),B===null?null:(y.SetCollisionByProperty(b,O,D,B),this)},setCollisionByExclusion:function(b,O,D,B){return O===void 0&&(O=!0),D===void 0&&(D=!0),B=this.getLayer(B),B===null?null:(y.SetCollisionByExclusion(b,O,D,B),this)},setCollisionFromCollisionGroup:function(b,O,D){return b===void 0&&(b=!0),O===void 0&&(O=!0),D=this.getLayer(D),D===null?null:(y.SetCollisionFromCollisionGroup(b,O,D),this)},setTileIndexCallback:function(b,O,D,B){return B=this.getLayer(B),B===null?null:(y.SetTileIndexCallback(b,O,D,B),this)},setTileLocationCallback:function(b,O,D,B,G,V,k){return k=this.getLayer(k),k===null?null:(y.SetTileLocationCallback(b,O,D,B,G,V,k),this)},setLayer:function(b){var O=this.getLayerIndex(b);return O!==null&&(this.currentLayerIndex=O),this},setBaseTileSize:function(b,O){this.tileWidth=b,this.tileHeight=O,this.widthInPixels=this.width*b,this.heightInPixels=this.height*O;for(var D=0;D<this.layers.length;D++){this.layers[D].baseTileWidth=b,this.layers[D].baseTileHeight=O;for(var B=this.layers[D].data,G=this.layers[D].width,V=this.layers[D].height,k=0;k<V;k++)for(var U=0;U<G;U++){var W=B[k][U];W!==null&&W.setSize(void 0,void 0,b,O)}}return this},setLayerTileSize:function(b,O,D){if(D=this.getLayer(D),D===null)return this;D.tileWidth=b,D.tileHeight=O;for(var B=D.data,G=D.width,V=D.height,k=0;k<V;k++)for(var U=0;U<G;U++){var W=B[k][U];W!==null&&W.setSize(b,O)}return this},shuffle:function(b,O,D,B,G){return G=this.getLayer(G),G===null?null:(y.Shuffle(b,O,D,B,G),this)},swapByIndex:function(b,O,D,B,G,V,k){return k=this.getLayer(k),k===null?null:(y.SwapByIndex(b,O,D,B,G,V,k),this)},tileToWorldX:function(b,O,D){return D=this.getLayer(D),D===null?null:this._convert.TileToWorldX(b,O,D)},tileToWorldY:function(b,O,D){return D=this.getLayer(D),D===null?null:this._convert.TileToWorldY(b,O,D)},tileToWorldXY:function(b,O,D,B,G){return G=this.getLayer(G),G===null?null:this._convert.TileToWorldXY(b,O,D,B,G)},getTileCorners:function(b,O,D,B){return B=this.getLayer(B),B===null?null:this._convert.GetTileCorners(b,O,D,B)},weightedRandomize:function(b,O,D,B,G,V){return V=this.getLayer(V),V===null?null:(y.WeightedRandomize(O,D,B,G,b,V),this)},worldToTileX:function(b,O,D,B){return B=this.getLayer(B),B===null?null:this._convert.WorldToTileX(b,O,D,B)},worldToTileY:function(b,O,D,B){return B=this.getLayer(B),B===null?null:this._convert.WorldToTileY(b,O,D,B)},worldToTileXY:function(b,O,D,B,G,V){return V=this.getLayer(V),V===null?null:this._convert.WorldToTileXY(b,O,D,B,G,V)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});m.exports=A},45939:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(44603),S=i(31989);d.register("tilemap",function(u){var l=u!==void 0?u:{};return S(this.scene,l.key,l.tileWidth,l.tileHeight,l.width,l.height,l.data,l.insertNull)})},46029:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(39429),S=i(31989);d.register("tilemap",function(u,l,h,r,o,p,a){return u===null&&(u=void 0),l===null&&(l=void 0),h===null&&(h=void 0),r===null&&(r=void 0),o===null&&(o=void 0),S(this.scene,u,l,h,r,o,p,a)})},20442:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(78389),u=i(31401),l=i(95643),h=i(81086),r=i(19218),o=i(26099),p=new d({Extends:l,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.Transform,u.Visible,u.ScrollFactor,S,r],initialize:function(v,x,g,y,T,P){l.call(this,v,"TilemapLayer"),this.isTilemap=!0,this.tilemap=x,this.layerIndex=g,this.layer=x.layers[g],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=h.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new o,this.collisionCategory=1,this.collisionMask=1,this.setTilesets(y),this.setAlpha(this.layer.alpha),this.setPosition(T,P),this.setOrigin(0,0),this.setSize(x.tileWidth*this.layer.width,x.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(a){var v=[],x=[],g=this.tilemap;Array.isArray(a)||(a=[a]);for(var y=0;y<a.length;y++){var T=a[y];if(typeof T=="string"&&(T=g.getTileset(T)),T){x.push(T);for(var P=T.firstgid,A=0;A<T.total;A++)v[P+A]=T}}this.gidMap=v,this.tileset=x},setRenderOrder:function(a){var v=["right-down","left-down","right-up","left-up"];return typeof a=="string"&&(a=v.indexOf(a)),a>=0&&a<4&&(this._renderOrder=a),this},calculateFacesAt:function(a,v){return h.CalculateFacesAt(a,v,this.layer),this},calculateFacesWithin:function(a,v,x,g){return h.CalculateFacesWithin(a,v,x,g,this.layer),this},createFromTiles:function(a,v,x,g,y){return h.CreateFromTiles(a,v,x,g,y,this.layer)},cull:function(a){return this.cullCallback(this.layer,a,this.culledTiles,this._renderOrder)},copy:function(a,v,x,g,y,T,P){return h.Copy(a,v,x,g,y,T,P,this.layer),this},fill:function(a,v,x,g,y,T){return h.Fill(a,v,x,g,y,T,this.layer),this},filterTiles:function(a,v,x,g,y,T,P){return h.FilterTiles(a,v,x,g,y,T,P,this.layer)},findByIndex:function(a,v,x){return h.FindByIndex(a,v,x,this.layer)},findTile:function(a,v,x,g,y,T,P){return h.FindTile(a,v,x,g,y,T,P,this.layer)},forEachTile:function(a,v,x,g,y,T,P){return h.ForEachTile(a,v,x,g,y,T,P,this.layer),this},setTint:function(a,v,x,g,y,T){a===void 0&&(a=16777215);var P=function(A){A.tint=a,A.tintFill=!1};return this.forEachTile(P,this,v,x,g,y,T)},setTintFill:function(a,v,x,g,y,T){a===void 0&&(a=16777215);var P=function(A){A.tint=a,A.tintFill=!0};return this.forEachTile(P,this,v,x,g,y,T)},getTileAt:function(a,v,x){return h.GetTileAt(a,v,x,this.layer)},getTileAtWorldXY:function(a,v,x,g){return h.GetTileAtWorldXY(a,v,x,g,this.layer)},getIsoTileAtWorldXY:function(a,v,x,g,y){x===void 0&&(x=!0);var T=this.tempVec;return h.IsometricWorldToTileXY(a,v,!0,T,y,this.layer,x),this.getTileAt(T.x,T.y,g)},getTilesWithin:function(a,v,x,g,y){return h.GetTilesWithin(a,v,x,g,y,this.layer)},getTilesWithinShape:function(a,v,x){return h.GetTilesWithinShape(a,v,x,this.layer)},getTilesWithinWorldXY:function(a,v,x,g,y,T){return h.GetTilesWithinWorldXY(a,v,x,g,y,T,this.layer)},hasTileAt:function(a,v){return h.HasTileAt(a,v,this.layer)},hasTileAtWorldXY:function(a,v,x){return h.HasTileAtWorldXY(a,v,x,this.layer)},putTileAt:function(a,v,x,g){return h.PutTileAt(a,v,x,g,this.layer)},putTileAtWorldXY:function(a,v,x,g,y){return h.PutTileAtWorldXY(a,v,x,g,y,this.layer)},putTilesAt:function(a,v,x,g){return h.PutTilesAt(a,v,x,g,this.layer),this},randomize:function(a,v,x,g,y){return h.Randomize(a,v,x,g,y,this.layer),this},removeTileAt:function(a,v,x,g){return h.RemoveTileAt(a,v,x,g,this.layer)},removeTileAtWorldXY:function(a,v,x,g,y){return h.RemoveTileAtWorldXY(a,v,x,g,y,this.layer)},renderDebug:function(a,v){return h.RenderDebug(a,v,this.layer),this},replaceByIndex:function(a,v,x,g,y,T){return h.ReplaceByIndex(a,v,x,g,y,T,this.layer),this},setSkipCull:function(a){return a===void 0&&(a=!0),this.skipCull=a,this},setCullPadding:function(a,v){return a===void 0&&(a=1),v===void 0&&(v=1),this.cullPaddingX=a,this.cullPaddingY=v,this},setCollision:function(a,v,x,g){return h.SetCollision(a,v,x,this.layer,g),this},setCollisionBetween:function(a,v,x,g){return h.SetCollisionBetween(a,v,x,g,this.layer),this},setCollisionByProperty:function(a,v,x){return h.SetCollisionByProperty(a,v,x,this.layer),this},setCollisionByExclusion:function(a,v,x){return h.SetCollisionByExclusion(a,v,x,this.layer),this},setCollisionFromCollisionGroup:function(a,v){return h.SetCollisionFromCollisionGroup(a,v,this.layer),this},setTileIndexCallback:function(a,v,x){return h.SetTileIndexCallback(a,v,x,this.layer),this},setTileLocationCallback:function(a,v,x,g,y,T){return h.SetTileLocationCallback(a,v,x,g,y,T,this.layer),this},shuffle:function(a,v,x,g){return h.Shuffle(a,v,x,g,this.layer),this},swapByIndex:function(a,v,x,g,y,T){return h.SwapByIndex(a,v,x,g,y,T,this.layer),this},tileToWorldX:function(a,v){return this.tilemap.tileToWorldX(a,v,this)},tileToWorldY:function(a,v){return this.tilemap.tileToWorldY(a,v,this)},tileToWorldXY:function(a,v,x,g){return this.tilemap.tileToWorldXY(a,v,x,g,this)},getTileCorners:function(a,v,x){return this.tilemap.getTileCorners(a,v,x,this)},weightedRandomize:function(a,v,x,g,y){return h.WeightedRandomize(v,x,g,y,a,this.layer),this},worldToTileX:function(a,v,x){return this.tilemap.worldToTileX(a,v,x,this)},worldToTileY:function(a,v,x){return this.tilemap.worldToTileY(a,v,x,this)},worldToTileXY:function(a,v,x,g,y){return this.tilemap.worldToTileXY(a,v,x,g,y,this)},destroy:function(a){a===void 0&&(a=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),a&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],l.prototype.destroy.call(this))}});m.exports=p},16153:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(61340),S=new d,u=new d,l=new d,h=function(r,o,p,a){var v=o.cull(p),x=v.length,g=p.alpha*o.alpha;if(!(x===0||g<=0)){var y=S,T=u,P=l;T.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY),y.copyFrom(p.matrix);var A=r.currentContext,b=o.gidMap;A.save(),a?(y.multiplyWithOffset(a,-p.scrollX*o.scrollFactorX,-p.scrollY*o.scrollFactorY),T.e=o.x,T.f=o.y,y.multiply(T,P),P.copyToContext(A)):(T.e-=p.scrollX*o.scrollFactorX,T.f-=p.scrollY*o.scrollFactorY,T.copyToContext(A)),(!r.antialias||o.scaleX>1||o.scaleY>1)&&(A.imageSmoothingEnabled=!1);for(var O=0;O<x;O++){var D=v[O],B=b[D.index];if(B){var G=B.image.getSourceImage(),V=B.getTileTextureCoordinates(D.index),k=B.tileWidth,U=B.tileHeight;if(!(V===null||k===0||U===0)){var W=k*.5,X=U*.5;V.x+=B.tileOffset.x,V.y+=B.tileOffset.y,A.save(),A.translate(D.pixelX+W,D.pixelY+X),D.rotation!==0&&A.rotate(D.rotation),(D.flipX||D.flipY)&&A.scale(D.flipX?-1:1,D.flipY?-1:1),A.globalAlpha=g*D.alpha,A.drawImage(G,V.x,V.y,k,U,-W,-X,k,U),A.restore()}}}A.restore()}};m.exports=h},19218:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(29747),S=d,u=d;S=i(99558),u=i(16153),m.exports={renderWebGL:S,renderCanvas:u}},99558:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(70554),S=function(u,l,h){var r=l.cull(h),o=r.length,p=h.alpha*l.alpha;if(!(o===0||p<=0)){var a=l.gidMap,v=u.pipelines.set(l.pipeline,l),x=d.getTintAppendFloatAlpha,g=l.scrollFactorX,y=l.scrollFactorY,T=l.x,P=l.y,A=l.scaleX,b=l.scaleY;u.pipelines.preBatch(l);for(var O=0;O<o;O++){var D=r[O],B=a[D.index];if(B){var G=B.getTileTextureCoordinates(D.index),V=B.tileWidth,k=B.tileHeight;if(!(!G||V===0||k===0)){var U=V*.5,W=k*.5,X=B.glTexture,_=v.setTexture2D(X,l),Q=V,j=k,it=G.x,K=G.y,J=B.tileOffset.x,Y=B.tileOffset.y,q=x(D.tint,p*D.alpha);v.batchTexture(l,X,X.width,X.height,T+D.pixelX*A+(U*A-J),P+D.pixelY*b+(W*b-Y),V,k,A,b,D.rotation,D.flipX,D.flipY,g,y,U,W,it,K,Q,j,q,q,q,q,D.tintFill,0,0,h,null,!0,_,!0)}}}u.pipelines.postBatch(l)}};m.exports=S},33629:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(26099),u=new d({initialize:function(h,r,o,p,a,v,x,g,y){(o===void 0||o<=0)&&(o=32),(p===void 0||p<=0)&&(p=32),a===void 0&&(a=0),v===void 0&&(v=0),x===void 0&&(x={}),g===void 0&&(g={}),this.name=h,this.firstgid=r,this.tileWidth=o,this.tileHeight=p,this.tileMargin=a,this.tileSpacing=v,this.tileProperties=x,this.tileData=g,this.tileOffset=new S,y!==void 0&&this.tileOffset.set(y.x,y.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(l){return this.containsTileIndex(l)?this.tileProperties[l-this.firstgid]:null},getTileData:function(l){return this.containsTileIndex(l)?this.tileData[l-this.firstgid]:null},getTileCollisionGroup:function(l){var h=this.getTileData(l);return h&&h.objectgroup?h.objectgroup:null},containsTileIndex:function(l){return l>=this.firstgid&&l<this.firstgid+this.total},getTileTextureCoordinates:function(l){return this.containsTileIndex(l)?this.texCoordinates[l-this.firstgid]:null},setImage:function(l){this.image=l;var h=l.get(),r=l.getFrameBounds();return this.glTexture=h.source.glTexture,h.width>r.width||h.height>r.height?this.updateTileData(h.width,h.height):this.updateTileData(r.width,r.height,r.x,r.y),this},setTileSize:function(l,h){return l!==void 0&&(this.tileWidth=l),h!==void 0&&(this.tileHeight=h),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(l,h){return l!==void 0&&(this.tileMargin=l),h!==void 0&&(this.tileSpacing=h),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(l,h,r,o){r===void 0&&(r=0),o===void 0&&(o=0);var p=(h-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),a=(l-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(p%1!==0||a%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),p=Math.floor(p),a=Math.floor(a),this.rows=p,this.columns=a,this.total=p*a,this.texCoordinates.length=0;for(var v=this.tileMargin+r,x=this.tileMargin+o,g=0;g<this.rows;g++){for(var y=0;y<this.columns;y++)this.texCoordinates.push({x:v,y:x}),v+=this.tileWidth+this.tileSpacing;v=this.tileMargin+r,x+=this.tileHeight+this.tileSpacing}return this}});m.exports=u},72023:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7423),S=function(u,l,h){var r=d(u,l,!0,h),o=d(u,l-1,!0,h),p=d(u,l+1,!0,h),a=d(u-1,l,!0,h),v=d(u+1,l,!0,h),x=r&&r.collides;return x&&(r.faceTop=!0,r.faceBottom=!0,r.faceLeft=!0,r.faceRight=!0),o&&o.collides&&(x&&(r.faceTop=!1),o.faceBottom=!x),p&&p.collides&&(x&&(r.faceBottom=!1),p.faceTop=!x),a&&a.collides&&(x&&(r.faceLeft=!1),a.faceRight=!x),v&&v.collides&&(x&&(r.faceRight=!1),v.faceLeft=!x),r&&!r.collides&&r.resetFaces(),r};m.exports=S},42573:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7423),S=i(7386),u=function(l,h,r,o,p){for(var a=null,v=null,x=null,g=null,y=S(l,h,r,o,null,p),T=0;T<y.length;T++){var P=y[T];P&&(P.collides?(a=d(P.x,P.y-1,!0,p),v=d(P.x,P.y+1,!0,p),x=d(P.x-1,P.y,!0,p),g=d(P.x+1,P.y,!0,p),P.faceTop=!(a&&a.collides),P.faceBottom=!(v&&v.collides),P.faceLeft=!(x&&x.collides),P.faceRight=!(g&&g.collides)):P.resetFaces())}};m.exports=u},33528:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26099),S=new d,u=function(l,h,r,o){var p=r.tilemapLayer,a=p.cullPaddingX,v=p.cullPaddingY,x=p.tilemap.tileToWorldXY(l,h,S,o,p);return x.x>o.worldView.x+p.scaleX*r.tileWidth*(-a-.5)&&x.x<o.worldView.right+p.scaleX*r.tileWidth*(a-.5)&&x.y>o.worldView.y+p.scaleY*r.tileHeight*(-v-1)&&x.y<o.worldView.bottom+p.scaleY*r.tileHeight*(v-.5)};m.exports=u},1785:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(42573),S=i(7386),u=i(62991),l=i(23029),h=function(r,o,p,a,v,x,g,y){g===void 0&&(g=!0);var T=S(r,o,p,a,null,y),P=[];T.forEach(function(V){var k=new l(V.layer,V.index,V.x,V.y,V.width,V.height,V.baseWidth,V.baseHeight);k.copy(V),P.push(k)});for(var A=v-r,b=x-o,O=0;O<P.length;O++){var D=P[O],B=D.x+A,G=D.y+b;u(B,G,y)&&y.data[G][B]&&(D.x=B,D.y=G,D.updatePixelXY(),y.data[G][B]=D)}g&&d(v-1,x-1,p+2,a+2,y),T.length=0,P.length=0};m.exports=h},78419:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62644),S=i(7386),u=i(27987),l=function(h,r,o,p,a,v){o||(o={}),Array.isArray(h)||(h=[h]);var x=v.tilemapLayer;p||(p=x.scene),a||(a=p.cameras.main);var g=v.width,y=v.height,T=S(0,0,g,y,null,v),P=[],A,b=function(G,V,k){for(var U=0;U<k.length;U++){var W=k[U];G.hasOwnProperty(W)||(G[W]=V[W])}};for(A=0;A<T.length;A++){var O=T[A],D=d(o);if(h.indexOf(O.index)!==-1){var B=x.tileToWorldXY(O.x,O.y,void 0,a,v);D.x=B.x,D.y=B.y,b(D,O,["rotation","flipX","flipY","alpha","visible","tint"]),D.hasOwnProperty("origin")||(D.x+=O.width*.5,D.y+=O.height*.5),D.hasOwnProperty("useSpriteSheet")&&(D.key=O.tileset.image,D.frame=O.index-O.tileset.firstgid),P.push(p.make.sprite(D))}}if(Array.isArray(r))for(A=0;A<h.length;A++)u(h[A],r[A],0,0,g,y,v);else if(r!==null)for(A=0;A<h.length;A++)u(h[A],r,0,0,g,y,v);return P};m.exports=l},19545:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(87841),S=i(63448),u=i(56583),l=new d,h=function(r,o){var p=r.tilemapLayer.tilemap,a=r.tilemapLayer,v=Math.floor(p.tileWidth*a.scaleX),x=Math.floor(p.tileHeight*a.scaleY),g=u(o.worldView.x-a.x,v,0,!0)-a.cullPaddingX,y=S(o.worldView.right-a.x,v,0,!0)+a.cullPaddingX,T=u(o.worldView.y-a.y,x,0,!0)-a.cullPaddingY,P=S(o.worldView.bottom-a.y,x,0,!0)+a.cullPaddingY;return l.setTo(g,T,y-g,P-T)};m.exports=h},30003:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(19545),S=i(32483),u=function(l,h,r,o){r===void 0&&(r=[]),o===void 0&&(o=0),r.length=0;var p=l.tilemapLayer,a=d(l,h);return(p.skipCull||p.scrollFactorX!==1||p.scrollFactorY!==1)&&(a.left=0,a.right=l.width,a.top=0,a.bottom=l.height),S(l,a,o,r),r};m.exports=u},35137:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7386),S=i(42573),u=i(20576),l=function(h,r,o,p,a,v,x){for(var g=x.collideIndexes.indexOf(h)!==-1,y=d(r,o,p,a,null,x),T=0;T<y.length;T++)y[T].index=h,u(y[T],g);v&&S(r-1,o-1,p+2,a+2,x)};m.exports=l},40253:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7386),S=function(u,l,h,r,o,p,a,v){var x=d(h,r,o,p,a,v);return x.filter(u,l)};m.exports=S},52692:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){d===void 0&&(d=0),S===void 0&&(S=!1);var l=0,h,r,o;if(S){for(r=u.height-1;r>=0;r--)for(h=u.width-1;h>=0;h--)if(o=u.data[r][h],o&&o.index===i){if(l===d)return o;l+=1}}else for(r=0;r<u.height;r++)for(h=0;h<u.width;h++)if(o=u.data[r][h],o&&o.index===i){if(l===d)return o;l+=1}return null};m.exports=E},66151:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7386),S=function(u,l,h,r,o,p,a,v){var x=d(h,r,o,p,a,v);return x.find(u,l)||null};m.exports=S},97560:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7386),S=function(u,l,h,r,o,p,a,v){var x=d(h,r,o,p,a,v);x.forEach(u,l)};m.exports=S},43305:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91907),S=i(30003),u=i(9474),l=i(14018),h=i(29747),r=i(54503),o=function(p){return p===d.ORTHOGONAL?S:p===d.HEXAGONAL?u:p===d.STAGGERED?r:p===d.ISOMETRIC?l:h};m.exports=o},7423:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62991),S=function(u,l,h,r){if(d(u,l,r)){var o=r.data[l][u]||null;return o?o.index===-1?h?o:null:o:null}else return null};m.exports=S},60540:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7423),S=i(26099),u=new S,l=function(h,r,o,p,a){return a.tilemapLayer.worldToTileXY(h,r,!0,u,p),d(u.x,u.y,o,a)};m.exports=l},55826:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26099),S=function(u,l,h,r){var o=r.baseTileWidth,p=r.baseTileHeight,a=r.tilemapLayer,v=0,x=0;a&&(h||(h=a.scene.cameras.main),v=a.x+h.scrollX*(1-a.scrollFactorX),x=a.y+h.scrollY*(1-a.scrollFactorY),o*=a.scaleX,p*=a.scaleY);var g=v+u*o,y=x+l*p;return[new d(g,y),new d(g+o,y),new d(g+o,y+p),new d(g,y+p)]};m.exports=S},11758:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91907),S=i(27229),u=i(29747),l=i(55826),h=function(r){return r===d.ORTHOGONAL?l:r===d.ISOMETRIC?u:r===d.HEXAGONAL?S:(r===d.STAGGERED,u)};m.exports=h},39167:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91907),S=i(29747),u=i(97281),l=function(h){return h===d.ORTHOGONAL?u:S};m.exports=l},62e3:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91907),S=i(19951),u=i(14127),l=i(29747),h=i(97202),r=i(70326),o=function(p){return p===d.ORTHOGONAL?r:p===d.ISOMETRIC?u:p===d.HEXAGONAL?S:p===d.STAGGERED?h:l};m.exports=o},5984:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91907),S=i(29747),u=i(28054),l=i(29650),h=function(r){return r===d.ORTHOGONAL?l:r===d.STAGGERED?u:S};m.exports=h},7386:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(95540),S=function(u,l,h,r,o,p){u===void 0&&(u=0),l===void 0&&(l=0),h===void 0&&(h=p.width),r===void 0&&(r=p.height),o||(o={});var a=d(o,"isNotEmpty",!1),v=d(o,"isColliding",!1),x=d(o,"hasInterestingFace",!1);u<0&&(h+=u,u=0),l<0&&(r+=l,l=0),u+h>p.width&&(h=Math.max(p.width-u,0)),l+r>p.height&&(r=Math.max(p.height-l,0));for(var g=[],y=l;y<l+r;y++)for(var T=u;T<u+h;T++){var P=p.data[y][T];if(P!==null){if(a&&P.index===-1||v&&!P.collides||x&&!P.hasInterestingFace)continue;g.push(P)}}return g};m.exports=S},91141:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(55738),S=i(7386),u=i(91865),l=i(29747),h=i(26099),r=i(91907),o=function(g,y){return u.RectangleToTriangle(y,g)},p=new h,a=new h,v=new h,x=function(g,y,T,P){if(P.orientation!==r.ORTHOGONAL)return console.warn("GetTilesWithinShape only works with orthogonal tilemaps"),[];if(g===void 0)return[];var A=l;g instanceof d.Circle?A=u.CircleToRectangle:g instanceof d.Rectangle?A=u.RectangleToRectangle:g instanceof d.Triangle?A=o:g instanceof d.Line&&(A=u.LineToRectangle),P.tilemapLayer.worldToTileXY(g.left,g.top,!0,a,T);var b=a.x,O=a.y;P.tilemapLayer.worldToTileXY(g.right,g.bottom,!1,v,T);var D=Math.ceil(v.x),B=Math.ceil(v.y),G=Math.max(D-b,1),V=Math.max(B-O,1),k=S(b,O,G,V,y,P),U=P.tileWidth,W=P.tileHeight;P.tilemapLayer&&(U*=P.tilemapLayer.scaleX,W*=P.tilemapLayer.scaleY);for(var X=[],_=new d.Rectangle(0,0,U,W),Q=0;Q<k.length;Q++){var j=k[Q];P.tilemapLayer.tileToWorldXY(j.x,j.y,p,T),_.x=p.x,_.y=p.y,A(g,_)&&X.push(j)}return X};m.exports=x},96523:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7386),S=i(26099),u=new S,l=new S,h=function(r,o,p,a,v,x,g){var y=g.tilemapLayer.tilemap._convert.WorldToTileXY;y(r,o,!0,u,x,g);var T=u.x,P=u.y;y(r+p,o+a,!1,l,x,g);var A=Math.ceil(l.x),b=Math.ceil(l.y);return d(T,P,A-T,b-P,v,g)};m.exports=h},96113:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91907),S=i(20242),u=i(10095),l=function(h){return h===d.ORTHOGONAL?u:S};m.exports=l},16926:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91907),S=i(86625),u=i(96897),l=i(29747),h=i(15108),r=i(85896),o=function(p){return p===d.ORTHOGONAL?r:p===d.ISOMETRIC?u:p===d.HEXAGONAL?S:p===d.STAGGERED?h:l};m.exports=o},55762:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91907),S=i(20242),u=i(51900),l=i(63288),h=function(r){return r===d.ORTHOGONAL?l:r===d.STAGGERED?u:S};m.exports=h},45091:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62991),S=function(u,l,h){if(d(u,l,h)){var r=h.data[l][u];return r!==null&&r.index>-1}else return!1};m.exports=S},24152:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(45091),S=i(26099),u=new S,l=function(h,r,o,p){p.tilemapLayer.worldToTileXY(h,r,!0,u,o);var a=u.x,v=u.y;return d(a,v,p)};m.exports=l},90454:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(63448),S=i(56583),u=function(l,h){var r=l.tilemapLayer.tilemap,o=l.tilemapLayer,p=Math.floor(r.tileWidth*o.scaleX),a=Math.floor(r.tileHeight*o.scaleY),v=l.hexSideLength,x,g,y,T;if(l.staggerAxis==="y"){var P=(a-v)/2+v;x=S(h.worldView.x-o.x,p,0,!0)-o.cullPaddingX,g=d(h.worldView.right-o.x,p,0,!0)+o.cullPaddingX,y=S(h.worldView.y-o.y,P,0,!0)-o.cullPaddingY,T=d(h.worldView.bottom-o.y,P,0,!0)+o.cullPaddingY}else{var A=(p-v)/2+v;x=S(h.worldView.x-o.x,A,0,!0)-o.cullPaddingX,g=d(h.worldView.right-o.x,A,0,!0)+o.cullPaddingX,y=S(h.worldView.y-o.y,a,0,!0)-o.cullPaddingY,T=d(h.worldView.bottom-o.y,a,0,!0)+o.cullPaddingY}return{left:x,right:g,top:y,bottom:T}};m.exports=u},9474:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(90454),S=i(32483),u=function(l,h,r,o){r===void 0&&(r=[]),o===void 0&&(o=0),r.length=0;var p=l.tilemapLayer,a=d(l,h);return p.skipCull&&p.scrollFactorX===1&&p.scrollFactorY===1&&(a.left=0,a.right=l.width,a.top=0,a.bottom=l.height),S(l,a,o,r),r};m.exports=u},27229:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(19951),S=i(26099),u=new S,l=function(h,r,o,p){var a=p.baseTileWidth,v=p.baseTileHeight,x=p.tilemapLayer;x&&(a*=x.scaleX,v*=x.scaleY);var g=d(h,r,u,o,p),y=[],T=.5773502691896257,P,A;p.staggerAxis==="y"?(P=T*a,A=v/2):(P=a/2,A=T*v);for(var b=0;b<6;b++){var O=2*Math.PI*(.5-b)/6;y.push(new S(g.x+P*Math.cos(O),g.y+A*Math.sin(O)))}return y};m.exports=l},19951:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26099),S=function(u,l,h,r,o){h||(h=new d);var p=o.baseTileWidth,a=o.baseTileHeight,v=o.tilemapLayer,x=0,g=0;v&&(r||(r=v.scene.cameras.main),x=v.x+r.scrollX*(1-v.scrollFactorX),g=v.y+r.scrollY*(1-v.scrollFactorY),p*=v.scaleX,a*=v.scaleY);var y=p/2,T=a/2,P,A,b=o.staggerAxis,O=o.staggerIndex;return b==="y"?(P=x+p*u+p,A=g+1.5*l*T+T,l%2===0&&(O==="odd"?P-=y:P+=y)):b==="x"&&O==="odd"&&(P=x+1.5*u*y+y,A=g+a*u+a,u%2===0&&(O==="odd"?A-=T:A+=T)),h.set(P,A)};m.exports=S},86625:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26099),S=function(u,l,h,r,o,p){r||(r=new d);var a=p.baseTileWidth,v=p.baseTileHeight,x=p.tilemapLayer;x&&(o||(o=x.scene.cameras.main),u=u-(x.x+o.scrollX*(1-x.scrollFactorX)),l=l-(x.y+o.scrollY*(1-x.scrollFactorY)),a*=x.scaleX,v*=x.scaleY);var g=.5773502691896257,y=-.3333333333333333,T=0,P=.6666666666666666,A=a/2,b=v/2,O,D,B,G,V;p.staggerAxis==="y"?(O=(u-A)/(g*a),D=(l-b)/b,B=g*O+y*D,G=T*O+P*D):(O=(u-A)/A,D=(l-b)/(g*v),B=y*O+g*D,G=P*O+T*D),V=-B-G;var k=Math.round(B),U=Math.round(G),W=Math.round(V),X=Math.abs(k-B),_=Math.abs(U-G),Q=Math.abs(W-V);X>_&&X>Q?k=-U-W:_>Q&&(U=-k-W);var j,it=U;return p.staggerIndex==="odd"?j=it%2===0?U/2+k:U/2+k-.5:j=it%2===0?U/2+k:U/2+k+.5,r.set(j,it)};m.exports=S},62991:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){return i>=0&&i<S.width&&d>=0&&d<S.height};m.exports=E},14018:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(33528),S=function(u,l,h,r){h===void 0&&(h=[]),r===void 0&&(r=0),h.length=0;var o=u.tilemapLayer,p=u.data,a=u.width,v=u.height,x=o.skipCull,g=0,y=a,T=0,P=v,A,b,O;if(r===0)for(b=T;b<P;b++)for(A=g;A<y;A++)O=p[b][A],!(!O||O.index===-1||!O.visible||O.alpha===0)&&(!x&&!d(A,b,u,l)||h.push(O));else if(r===1)for(b=T;b<P;b++)for(A=y;A>=g;A--)O=p[b][A],!(!O||O.index===-1||!O.visible||O.alpha===0)&&(!x&&!d(A,b,u,l)||h.push(O));else if(r===2)for(b=P;b>=T;b--)for(A=g;A<y;A++)O=p[b][A],!(!O||O.index===-1||!O.visible||O.alpha===0)&&(!x&&!d(A,b,u,l)||h.push(O));else if(r===3)for(b=P;b>=T;b--)for(A=y;A>=g;A--)O=p[b][A],!(!O||O.index===-1||!O.visible||O.alpha===0)&&(!x&&!d(A,b,u,l)||h.push(O));return o.tilesDrawn=h.length,o.tilesTotal=a*v,h};m.exports=S},14127:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26099),S=function(u,l,h,r,o){h||(h=new d);var p=o.baseTileWidth,a=o.baseTileHeight,v=o.tilemapLayer,x=0,g=0;v&&(r||(r=v.scene.cameras.main),x=v.x+r.scrollX*(1-v.scrollFactorX),p*=v.scaleX,g=v.y+r.scrollY*(1-v.scrollFactorY),a*=v.scaleY);var y=x+(u-l)*(p/2),T=g+(u+l)*(a/2);return h.set(y,T)};m.exports=S},96897:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26099),S=function(u,l,h,r,o,p,a){r||(r=new d);var v=p.baseTileWidth,x=p.baseTileHeight,g=p.tilemapLayer;g&&(o||(o=g.scene.cameras.main),l=l-(g.y+o.scrollY*(1-g.scrollFactorY)),x*=g.scaleY,u=u-(g.x+o.scrollX*(1-g.scrollFactorX)),v*=g.scaleX);var y=v/2,T=x/2;u=u-y,a||(l=l-x);var P=.5*(u/y+l/T),A=.5*(-u/y+l/T);return h&&(P=Math.floor(P),A=Math.floor(A)),r.set(P,A)};m.exports=S},71558:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(23029),S=i(62991),u=i(72023),l=i(20576),h=function(r,o,p,a,v){if(a===void 0&&(a=!0),!S(o,p,v))return null;var x,g=v.data[p][o],y=g&&g.collides;r instanceof d?(v.data[p][o]===null&&(v.data[p][o]=new d(v,r.index,o,p,v.tileWidth,v.tileHeight)),v.data[p][o].copy(r)):(x=r,v.data[p][o]===null?v.data[p][o]=new d(v,x,o,p,v.tileWidth,v.tileHeight):v.data[p][o].index=x);var T=v.data[p][o],P=v.collideIndexes.indexOf(T.index)!==-1;if(x=r instanceof d?r.index:r,x===-1)T.width=v.tileWidth,T.height=v.tileHeight;else{var A=v.tilemapLayer.tilemap,b=A.tiles,O=b[x][2],D=A.tilesets[O];T.width=D.tileWidth,T.height=D.tileHeight}return l(T,P),a&&y!==T.collides&&u(o,p,v),T};m.exports=h},26303:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(71558),S=i(26099),u=new S,l=function(h,r,o,p,a,v){return v.tilemapLayer.worldToTileXY(r,o,!0,u,a,v),d(h,u.x,u.y,p,v)};m.exports=l},14051:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(42573),S=i(71558),u=function(l,h,r,o,p){if(o===void 0&&(o=!0),!Array.isArray(l))return null;Array.isArray(l[0])||(l=[l]);for(var a=l.length,v=l[0].length,x=0;x<a;x++)for(var g=0;g<v;g++){var y=l[x][g];S(y,h+g,r+x,!1,p)}o&&d(h-1,r-1,v+2,a+2,p)};m.exports=u},77389:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7386),S=i(26546),u=function(l,h,r,o,p,a){var v,x=d(l,h,r,o,{},a);if(!p)for(p=[],v=0;v<x.length;v++)p.indexOf(x[v].index)===-1&&p.push(x[v].index);for(v=0;v<x.length;v++)x[v].index=S(p)};m.exports=u},63557:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(23029),S=i(62991),u=i(72023),l=function(h,r,o,p,a){if(o===void 0&&(o=!0),p===void 0&&(p=!0),!S(h,r,a))return null;var v=a.data[r][h];if(v)a.data[r][h]=o?null:new d(a,-1,h,r,a.tileWidth,a.tileHeight);else return null;return p&&v&&v.collides&&u(h,r,a),v};m.exports=l},94178:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(63557),S=i(26099),u=new S,l=function(h,r,o,p,a,v){return v.tilemapLayer.worldToTileXY(h,r,!0,u,a,v),d(u.x,u.y,o,p,v)};m.exports=l},15533:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7386),S=i(3956),u=new S(105,210,231,150),l=new S(243,134,48,200),h=new S(40,39,37,150),r=function(o,p,a){p===void 0&&(p={});var v=p.tileColor!==void 0?p.tileColor:u,x=p.collidingTileColor!==void 0?p.collidingTileColor:l,g=p.faceColor!==void 0?p.faceColor:h,y=d(0,0,a.width,a.height,null,a);o.translateCanvas(a.tilemapLayer.x,a.tilemapLayer.y),o.scaleCanvas(a.tilemapLayer.scaleX,a.tilemapLayer.scaleY);for(var T=0;T<y.length;T++){var P=y[T],A=P.tileset?P.tileset.tileOffset:{x:0,y:0},b=P.width,O=P.height,D=P.pixelX-A.x,B=P.pixelY-A.y,G=P.collides?x:v;G!==null&&(o.fillStyle(G.color,G.alpha/255),o.fillRect(D,B,b,O)),D+=1,B+=1,b-=2,O-=2,g!==null&&(o.lineStyle(1,g.color,g.alpha/255),P.faceTop&&o.lineBetween(D,B,D+b,B),P.faceRight&&o.lineBetween(D+b,B,D+b,B+O),P.faceBottom&&o.lineBetween(D,B+O,D+b,B+O),P.faceLeft&&o.lineBetween(D,B,D,B+O))}};m.exports=r},27987:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7386),S=function(u,l,h,r,o,p,a){for(var v=d(h,r,o,p,null,a),x=0;x<v.length;x++)v[x]&&v[x].index===u&&(v[x].index=l)};m.exports=S},32483:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){var l=i.data,h=i.width,r=i.height,o=i.tilemapLayer,p=Math.max(0,d.left),a=Math.min(h,d.right),v=Math.max(0,d.top),x=Math.min(r,d.bottom),g,y,T;if(S===0)for(y=v;y<x;y++)for(g=p;l[y]&&g<a;g++)T=l[y][g],!(!T||T.index===-1||!T.visible||T.alpha===0)&&u.push(T);else if(S===1)for(y=v;y<x;y++)for(g=a;l[y]&&g>=p;g--)T=l[y][g],!(!T||T.index===-1||!T.visible||T.alpha===0)&&u.push(T);else if(S===2)for(y=x;y>=v;y--)for(g=p;l[y]&&g<a;g++)T=l[y][g],!(!T||T.index===-1||!T.visible||T.alpha===0)&&u.push(T);else if(S===3)for(y=x;y>=v;y--)for(g=a;l[y]&&g>=p;g--)T=l[y][g],!(!T||T.index===-1||!T.visible||T.alpha===0)&&u.push(T);return o.tilesDrawn=u.length,o.tilesTotal=h*r,u};m.exports=E},57068:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(20576),S=i(42573),u=i(9589),l=function(h,r,o,p,a){r===void 0&&(r=!0),o===void 0&&(o=!0),a===void 0&&(a=!0),Array.isArray(h)||(h=[h]);for(var v=0;v<h.length;v++)u(h[v],r,p);if(a)for(var x=0;x<p.height;x++)for(var g=0;g<p.width;g++){var y=p.data[x][g];y&&h.indexOf(y.index)!==-1&&d(y,r)}o&&S(0,0,p.width,p.height,p)};m.exports=l},37266:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(20576),S=i(42573),u=i(9589),l=function(h,r,o,p,a,v){if(o===void 0&&(o=!0),p===void 0&&(p=!0),v===void 0&&(v=!0),!(h>r)){for(var x=h;x<=r;x++)u(x,o,a);if(v)for(var g=0;g<a.height;g++)for(var y=0;y<a.width;y++){var T=a.data[g][y];T&&T.index>=h&&T.index<=r&&d(T,o)}p&&S(0,0,a.width,a.height,a)}};m.exports=l},75661:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(20576),S=i(42573),u=i(9589),l=function(h,r,o,p){r===void 0&&(r=!0),o===void 0&&(o=!0),Array.isArray(h)||(h=[h]);for(var a=0;a<p.height;a++)for(var v=0;v<p.width;v++){var x=p.data[a][v];x&&h.indexOf(x.index)===-1&&(d(x,r),u(x.index,r,p))}o&&S(0,0,p.width,p.height,p)};m.exports=l},64740:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(20576),S=i(42573),u=i(97022),l=function(h,r,o,p){r===void 0&&(r=!0),o===void 0&&(o=!0);for(var a=0;a<p.height;a++)for(var v=0;v<p.width;v++){var x=p.data[a][v];if(x){for(var g in h)if(u(x.properties,g)){var y=h[g];Array.isArray(y)||(y=[y]);for(var T=0;T<y.length;T++)x.properties[g]===y[T]&&d(x,r)}}}o&&S(0,0,p.width,p.height,p)};m.exports=l},63307:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(20576),S=i(42573),u=function(l,h,r){l===void 0&&(l=!0),h===void 0&&(h=!0);for(var o=0;o<r.height;o++)for(var p=0;p<r.width;p++){var a=r.data[o][p];if(a){var v=a.getCollisionGroup();v&&v.objects&&v.objects.length>0&&d(a,l)}}h&&S(0,0,r.width,r.height,r)};m.exports=u},9589:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){var u=S.collideIndexes.indexOf(i);d&&u===-1?S.collideIndexes.push(i):!d&&u!==-1&&S.collideIndexes.splice(u,1)};m.exports=E},20576:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){d?i.setCollision(!0,!0,!0,!0,!1):i.resetCollision(!1)};m.exports=E},79583:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){if(typeof i=="number")u.callbacks[i]=d!==null?{callback:d,callbackContext:S}:void 0;else for(var l=0,h=i.length;l<h;l++)u.callbacks[i[l]]=d!==null?{callback:d,callbackContext:S}:void 0};m.exports=E},93254:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7386),S=function(u,l,h,r,o,p,a){for(var v=d(u,l,h,r,null,a),x=0;x<v.length;x++)v[x].setCollisionCallback(o,p)};m.exports=S},32903:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7386),S=i(33680),u=function(l,h,r,o,p){var a=d(l,h,r,o,null,p),v=a.map(function(g){return g.index});S(v);for(var x=0;x<a.length;x++)a[x].index=v[x]};m.exports=u},61325:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(63448),S=i(56583),u=function(l,h){var r=l.tilemapLayer.tilemap,o=l.tilemapLayer,p=Math.floor(r.tileWidth*o.scaleX),a=Math.floor(r.tileHeight*o.scaleY),v=S(h.worldView.x-o.x,p,0,!0)-o.cullPaddingX,x=d(h.worldView.right-o.x,p,0,!0)+o.cullPaddingX,g=S(h.worldView.y-o.y,a/2,0,!0)-o.cullPaddingY,y=d(h.worldView.bottom-o.y,a/2,0,!0)+o.cullPaddingY;return{left:v,right:x,top:g,bottom:y}};m.exports=u},54503:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(61325),S=i(32483),u=function(l,h,r,o){r===void 0&&(r=[]),o===void 0&&(o=0),r.length=0;var p=l.tilemapLayer,a=d(l,h);return p.skipCull&&p.scrollFactorX===1&&p.scrollFactorY===1&&(a.left=0,a.right=l.width,a.top=0,a.bottom=l.height),S(l,a,o,r),r};m.exports=u},97202:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26099),S=function(u,l,h,r,o){h||(h=new d);var p=o.baseTileWidth,a=o.baseTileHeight,v=o.tilemapLayer,x=0,g=0;v&&(r||(r=v.scene.cameras.main),x=v.x+r.scrollX*(1-v.scrollFactorX),p*=v.scaleX,g=v.y+r.scrollY*(1-v.scrollFactorY),a*=v.scaleY);var y=x+u*p+l%2*(p/2),T=g+l*(a/2);return h.set(y,T)};m.exports=S},28054:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){var u=S.baseTileHeight,l=S.tilemapLayer,h=0;return l&&(d===void 0&&(d=l.scene.cameras.main),h=l.y+d.scrollY*(1-l.scrollFactorY),u*=l.scaleY),h+i*(u/2)+u};m.exports=E},15108:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26099),S=function(u,l,h,r,o,p){r||(r=new d);var a=p.baseTileWidth,v=p.baseTileHeight,x=p.tilemapLayer;x&&(o||(o=x.scene.cameras.main),l=l-(x.y+o.scrollY*(1-x.scrollFactorY)),v*=x.scaleY,u=u-(x.x+o.scrollX*(1-x.scrollFactorX)),a*=x.scaleX);var g=h?Math.floor(l/(v/2)):l/(v/2),y=h?Math.floor((u+g%2*.5*a)/a):(u+g%2*.5*a)/a;return r.set(y,g)};m.exports=S},51900:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){var l=u.baseTileHeight,h=u.tilemapLayer;return h&&(S||(S=h.scene.cameras.main),i=i-(h.y+S.scrollY*(1-h.scrollFactorY)),l*=h.scaleY),d?Math.floor(i/(l/2)):i/(l/2)};m.exports=E},86560:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7386),S=function(u,l,h,r,o,p,a){for(var v=d(h,r,o,p,null,a),x=0;x<v.length;x++)v[x]&&(v[x].index===u?v[x].index=l:v[x].index===l&&(v[x].index=u))};m.exports=S},97281:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){var u=S.baseTileWidth,l=S.tilemapLayer,h=0;return l&&(d||(d=l.scene.cameras.main),h=l.x+d.scrollX*(1-l.scrollFactorX),u*=l.scaleX),h+i*u};m.exports=E},70326:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(97281),S=i(29650),u=i(26099),l=function(h,r,o,p,a){return o||(o=new u(0,0)),o.x=d(h,p,a),o.y=S(r,p,a),o};m.exports=l},29650:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){var u=S.baseTileHeight,l=S.tilemapLayer,h=0;return l&&(d||(d=l.scene.cameras.main),h=l.y+d.scrollY*(1-l.scrollFactorY),u*=l.scaleY),h+i*u};m.exports=E},77366:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(7386),S=i(75508),u=function(l,h,r,o,p,a){if(p){var v,x=d(l,h,r,o,null,a),g=0;for(v=0;v<p.length;v++)g+=p[v].weight;if(!(g<=0))for(v=0;v<x.length;v++){for(var y=S.RND.frac()*g,T=0,P=-1,A=0;A<p.length;A++)if(T+=p[A].weight,y<=T){var b=p[A].index;P=Array.isArray(b)?b[Math.floor(S.RND.frac()*b.length)]:b;break}x[v].index=P}}};m.exports=u},10095:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(85896),S=i(26099),u=new S,l=function(h,r,o,p){return d(h,0,r,u,o,p),u.x};m.exports=l},85896:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(26099),S=function(u,l,h,r,o,p){h===void 0&&(h=!0),r||(r=new d);var a=p.baseTileWidth,v=p.baseTileHeight,x=p.tilemapLayer;x&&(o||(o=x.scene.cameras.main),u=u-(x.x+o.scrollX*(1-x.scrollFactorX)),l=l-(x.y+o.scrollY*(1-x.scrollFactorY)),a*=x.scaleX,v*=x.scaleY);var g=u/a,y=l/v;return h&&(g=Math.floor(g),y=Math.floor(y)),r.set(g,y)};m.exports=S},63288:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(85896),S=i(26099),u=new S,l=function(h,r,o,p){return d(0,h,r,u,o,p),u.y};m.exports=l},81086:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={CalculateFacesAt:i(72023),CalculateFacesWithin:i(42573),CheckIsoBounds:i(33528),Copy:i(1785),CreateFromTiles:i(78419),CullBounds:i(19545),CullTiles:i(30003),Fill:i(35137),FilterTiles:i(40253),FindByIndex:i(52692),FindTile:i(66151),ForEachTile:i(97560),GetCullTilesFunction:i(43305),GetTileAt:i(7423),GetTileAtWorldXY:i(60540),GetTileCorners:i(55826),GetTileCornersFunction:i(11758),GetTilesWithin:i(7386),GetTilesWithinShape:i(91141),GetTilesWithinWorldXY:i(96523),GetTileToWorldXFunction:i(39167),GetTileToWorldXYFunction:i(62e3),GetTileToWorldYFunction:i(5984),GetWorldToTileXFunction:i(96113),GetWorldToTileXYFunction:i(16926),GetWorldToTileYFunction:i(55762),HasTileAt:i(45091),HasTileAtWorldXY:i(24152),HexagonalCullBounds:i(90454),HexagonalCullTiles:i(9474),HexagonalGetTileCorners:i(27229),HexagonalTileToWorldXY:i(19951),HexagonalWorldToTileXY:i(86625),IsInLayerBounds:i(62991),IsometricCullTiles:i(14018),IsometricTileToWorldXY:i(14127),IsometricWorldToTileXY:i(96897),PutTileAt:i(71558),PutTileAtWorldXY:i(26303),PutTilesAt:i(14051),Randomize:i(77389),RemoveTileAt:i(63557),RemoveTileAtWorldXY:i(94178),RenderDebug:i(15533),ReplaceByIndex:i(27987),RunCull:i(32483),SetCollision:i(57068),SetCollisionBetween:i(37266),SetCollisionByExclusion:i(75661),SetCollisionByProperty:i(64740),SetCollisionFromCollisionGroup:i(63307),SetLayerCollisionIndex:i(9589),SetTileCollision:i(20576),SetTileIndexCallback:i(79583),SetTileLocationCallback:i(93254),Shuffle:i(32903),StaggeredCullBounds:i(61325),StaggeredCullTiles:i(54503),StaggeredTileToWorldXY:i(97202),StaggeredTileToWorldY:i(28054),StaggeredWorldToTileXY:i(15108),StaggeredWorldToTileY:i(51900),SwapByIndex:i(86560),TileToWorldX:i(97281),TileToWorldXY:i(70326),TileToWorldY:i(29650),WeightedRandomize:i(77366),WorldToTileX:i(10095),WorldToTileXY:i(85896),WorldToTileY:i(63288)}},91907:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},21829:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={ORIENTATION:i(91907)};m.exports=d},62501:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(79291),S=i(21829),u={Components:i(81086),Parsers:i(57442),Formats:i(80341),ImageCollection:i(16536),ParseToTilemap:i(31989),Tile:i(23029),Tilemap:i(49075),TilemapCreator:i(45939),TilemapFactory:i(46029),Tileset:i(33629),TilemapLayer:i(20442),Orientation:i(91907),LayerData:i(14977),MapData:i(87010),ObjectLayer:i(48700)};u=d(!1,u,S.ORIENTATION),m.exports=u},14977:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(91907),u=i(95540),l=new d({initialize:function(r){r===void 0&&(r={}),this.name=u(r,"name","layer"),this.id=u(r,"id",0),this.x=u(r,"x",0),this.y=u(r,"y",0),this.width=u(r,"width",0),this.height=u(r,"height",0),this.tileWidth=u(r,"tileWidth",0),this.tileHeight=u(r,"tileHeight",0),this.baseTileWidth=u(r,"baseTileWidth",this.tileWidth),this.baseTileHeight=u(r,"baseTileHeight",this.tileHeight),this.orientation=u(r,"orientation",S.ORTHOGONAL),this.widthInPixels=u(r,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=u(r,"heightInPixels",this.height*this.baseTileHeight),this.alpha=u(r,"alpha",1),this.visible=u(r,"visible",!0),this.properties=u(r,"properties",[]),this.indexes=u(r,"indexes",[]),this.collideIndexes=u(r,"collideIndexes",[]),this.callbacks=u(r,"callbacks",[]),this.bodies=u(r,"bodies",[]),this.data=u(r,"data",[]),this.tilemapLayer=u(r,"tilemapLayer",null),this.hexSideLength=u(r,"hexSideLength",0),this.staggerAxis=u(r,"staggerAxis","y"),this.staggerIndex=u(r,"staggerIndex","odd")}});m.exports=l},87010:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(91907),u=i(95540),l=new d({initialize:function(r){r===void 0&&(r={}),this.name=u(r,"name","map"),this.width=u(r,"width",0),this.height=u(r,"height",0),this.infinite=u(r,"infinite",!1),this.tileWidth=u(r,"tileWidth",0),this.tileHeight=u(r,"tileHeight",0),this.widthInPixels=u(r,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=u(r,"heightInPixels",this.height*this.tileHeight),this.format=u(r,"format",null),this.orientation=u(r,"orientation",S.ORTHOGONAL),this.renderOrder=u(r,"renderOrder","right-down"),this.version=u(r,"version","1"),this.properties=u(r,"properties",{}),this.layers=u(r,"layers",[]),this.images=u(r,"images",[]),this.objects=u(r,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=u(r,"collision",{}),this.tilesets=u(r,"tilesets",[]),this.imageCollections=u(r,"imageCollections",[]),this.tiles=u(r,"tiles",[]),this.hexSideLength=u(r,"hexSideLength",0),this.staggerAxis=u(r,"staggerAxis","y"),this.staggerIndex=u(r,"staggerIndex","odd")}});m.exports=l},48700:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(95540),u=new d({initialize:function(h){h===void 0&&(h={}),this.name=S(h,"name","object layer"),this.id=S(h,"id",0),this.opacity=S(h,"opacity",1),this.properties=S(h,"properties",{}),this.propertyTypes=S(h,"propertytypes",{}),this.type=S(h,"type","objectgroup"),this.visible=S(h,"visible",!0),this.objects=S(h,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});m.exports=u},6641:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(91907),S=function(u){return u=u.toLowerCase(),u==="isometric"?d.ISOMETRIC:u==="staggered"?d.STAGGERED:u==="hexagonal"?d.HEXAGONAL:d.ORTHOGONAL};m.exports=S},46177:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(80341),S=i(2342),u=i(82593),l=i(46594),h=i(87021),r=function(o,p,a,v,x,g){var y;switch(p){case d.ARRAY_2D:y=S(o,a,v,x,g);break;case d.CSV:y=u(o,a,v,x,g);break;case d.TILED_JSON:y=l(o,a,g);break;case d.WELTMEISTER:y=h(o,a,g);break;default:console.warn("Unrecognized tilemap data format: "+p),y=null}return y};m.exports=r},2342:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(80341),S=i(14977),u=i(87010),l=i(23029),h=function(r,o,p,a,v){for(var x=new S({tileWidth:p,tileHeight:a}),g=new u({name:r,tileWidth:p,tileHeight:a,format:d.ARRAY_2D,layers:[x]}),y=[],T=o.length,P=0,A=0;A<o.length;A++){y[A]=[];for(var b=o[A],O=0;O<b.length;O++){var D=parseInt(b[O],10);isNaN(D)||D===-1?y[A][O]=v?null:new l(x,-1,O,A,p,a):y[A][O]=new l(x,D,O,A,p,a)}P===0&&(P=b.length)}return g.width=x.width=P,g.height=x.height=T,g.widthInPixels=x.widthInPixels=P*p,g.heightInPixels=x.heightInPixels=T*a,x.data=y,g};m.exports=h},82593:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(80341),S=i(2342),u=function(l,h,r,o,p){var a=h.trim().split(`
`).map(function(x){return x.split(",")}),v=S(l,a,r,o,p);return v.format=d.CSV,v};m.exports=u},6656:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(14977),S=i(23029),u=function(l,h){for(var r=[],o=0;o<l.layer.length;o++){for(var p=l.layer[o],a=new d({name:p.name,width:p.width,height:p.height,tileWidth:p.tilesize,tileHeight:p.tilesize,visible:p.visible===1}),v=[],x=[],g=0;g<p.data.length;g++){for(var y=0;y<p.data[g].length;y++){var T=p.data[g][y]-1,P;T>-1?P=new S(a,T,y,g,p.tilesize,p.tilesize):P=h?null:new S(a,-1,y,g,p.tilesize,p.tilesize),v.push(P)}x.push(v),v=[]}a.data=x,r.push(a)}return r};m.exports=u},96483:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(33629),S=function(u){for(var l=[],h=[],r=0;r<u.layer.length;r++){var o=u.layer[r],p=o.tilesetName;p!==""&&h.indexOf(p)===-1&&(h.push(p),l.push(new d(p,0,o.tilesize,o.tilesize,0,0)))}return l};m.exports=S},87021:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(80341),S=i(87010),u=i(6656),l=i(96483),h=function(r,o,p){if(o.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+r),null;for(var a=0,v=0,x=0;x<o.layer.length;x++)o.layer[x].width>a&&(a=o.layer[x].width),o.layer[x].height>v&&(v=o.layer[x].height);var g=new S({width:a,height:v,name:r,tileWidth:o.layer[0].tilesize,tileHeight:o.layer[0].tilesize,format:d.WELTMEISTER});return g.layers=u(o,p),g.tilesets=l(o),g};m.exports=h},52833:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={ParseTileLayers:i(6656),ParseTilesets:i(96483),ParseWeltmeister:i(87021)}},57442:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={FromOrientationString:i(6641),Parse:i(46177),Parse2DArray:i(2342),ParseCSV:i(82593),Impact:i(52833),Tiled:i(96761)}},51233:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(79291),S=function(u){for(var l,h,r,o,p,a=0;a<u.layers.length;a++){l=u.layers[a],o=null;for(var v=0;v<l.data.length;v++){p=l.data[v];for(var x=0;x<p.length;x++)h=p[x],!(h===null||h.index<0)&&(r=u.tiles[h.index][2],o=u.tilesets[r],h.width=o.tileWidth,h.height=o.tileHeight,o.tileProperties&&o.tileProperties[h.index-o.firstgid]&&(h.properties=d(h.properties,o.tileProperties[h.index-o.firstgid])))}}};m.exports=S},41868:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){for(var d=window.atob(i),S=d.length,u=new Array(S/4),l=0;l<S;l+=4)u[l/4]=(d.charCodeAt(l)|d.charCodeAt(l+1)<<8|d.charCodeAt(l+2)<<16|d.charCodeAt(l+3)<<24)>>>0;return u};m.exports=E},84101:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(33629),S=function(u){var l,h,r=[];for(l=0;l<u.imageCollections.length;l++)for(var o=u.imageCollections[l],p=o.images,a=0;a<p.length;a++){var v=p[a],x={x:0,y:v.height-u.tileHeight};h=new d(v.image,v.gid,v.width,v.height,0,0,void 0,void 0,x),h.updateTileData(v.width,v.height),u.tilesets.push(h)}for(l=0;l<u.tilesets.length;l++){h=u.tilesets[l];for(var g=h.tileMargin,y=h.tileMargin,T=0,P=0,A=0,b=h.firstgid;b<h.firstgid+h.total&&(r[b]=[g,y,l],g+=h.tileWidth+h.tileSpacing,T++,!(T===h.total||(P++,P===h.columns&&(g=h.tileMargin,y+=h.tileHeight+h.tileSpacing,P=0,A++,A===h.rows))));b++);}return r};m.exports=S},79677:(m,E,i)=>{/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(95540),S=function(u,l,h){if(!l)return{i:0,layers:u.layers,name:"",opacity:1,visible:!0,x:0,y:0};var r=l.x+d(l,"startx",0)*u.tilewidth+d(l,"offsetx",0),o=l.y+d(l,"starty",0)*u.tileheight+d(l,"offsety",0);return{i:0,layers:l.layers,name:h.name+l.name+"/",opacity:h.opacity*l.opacity,visible:h.visible&&l.visible,x:h.x+r,y:h.y+o}};m.exports=S},29920:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=2147483648,i=1073741824,d=536870912,S=function(u){var l=!!(u&E),h=!!(u&i),r=!!(u&d);u=u&536870911;var o=0,p=!1;return l&&h&&r?(o=Math.PI/2,p=!0):l&&h&&!r?(o=Math.PI,p=!1):l&&!h&&r?(o=Math.PI/2,p=!1):l&&!h&&!r?(o=0,p=!0):!l&&h&&r?(o=3*Math.PI/2,p=!1):!l&&h&&!r?(o=Math.PI,p=!0):!l&&!h&&r?(o=3*Math.PI/2,p=!0):!l&&!h&&!r&&(o=0,p=!1),{gid:u,flippedHorizontal:l,flippedVertical:h,flippedAntiDiagonal:r,rotation:o,flipped:p}};m.exports=S},12635:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(95540),S=i(79677),u=function(l){for(var h=[],r=[],o=S(l);o.i<o.layers.length||r.length>0;){if(o.i>=o.layers.length){if(r.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}o=r.pop();continue}var p=o.layers[o.i];if(o.i++,p.type!=="imagelayer"){if(p.type==="group"){var a=S(l,p,o);r.push(o),o=a}continue}var v=d(p,"offsetx",0)+d(p,"startx",0),x=d(p,"offsety",0)+d(p,"starty",0);h.push({name:o.name+p.name,image:p.image,x:o.x+v+p.x,y:o.y+x+p.y,alpha:o.opacity*p.opacity,visible:o.visible&&p.visible,properties:d(p,"properties",{})})}return h};m.exports=u},46594:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(51233),S=i(84101),u=i(91907),l=i(62644),h=i(80341),r=i(6641),o=i(87010),p=i(12635),a=i(22611),v=i(28200),x=i(24619),g=function(y,T,P){var A=l(T),b=new o({width:A.width,height:A.height,name:y,tileWidth:A.tilewidth,tileHeight:A.tileheight,orientation:r(A.orientation),format:h.TILED_JSON,version:A.version,properties:A.properties,renderOrder:A.renderorder,infinite:A.infinite});if(b.orientation===u.HEXAGONAL)if(b.hexSideLength=A.hexsidelength,b.staggerAxis=A.staggeraxis,b.staggerIndex=A.staggerindex,b.staggerAxis==="y"){var O=(b.tileHeight-b.hexSideLength)/2;b.widthInPixels=b.tileWidth*(b.width+.5),b.heightInPixels=b.height*(b.hexSideLength+O)+O}else{var D=(b.tileWidth-b.hexSideLength)/2;b.widthInPixels=b.width*(b.hexSideLength+D)+D,b.heightInPixels=b.tileHeight*(b.height+.5)}b.layers=v(A,P),b.images=p(A);var B=x(A);return b.tilesets=B.tilesets,b.imageCollections=B.imageCollections,b.objects=a(A),b.tiles=S(b),d(b),b};m.exports=g},52205:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(18254),S=i(29920),u=function(r){return{x:r.x,y:r.y}},l=["id","name","type","rotation","properties","visible","x","y","width","height"],h=function(r,o,p){o===void 0&&(o=0),p===void 0&&(p=0);var a=d(r,l);if(a.x+=o,a.y+=p,r.gid){var v=S(r.gid);a.gid=v.gid,a.flippedHorizontal=v.flippedHorizontal,a.flippedVertical=v.flippedVertical,a.flippedAntiDiagonal=v.flippedAntiDiagonal}else r.polyline?a.polyline=r.polyline.map(u):r.polygon?a.polygon=r.polygon.map(u):r.ellipse?a.ellipse=r.ellipse:r.text?a.text=r.text:r.point?a.point=!0:a.rectangle=!0;return a};m.exports=h},22611:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(95540),S=i(52205),u=i(48700),l=i(79677),h=function(r){for(var o=[],p=[],a=l(r);a.i<a.layers.length||p.length>0;){if(a.i>=a.layers.length){if(p.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}a=p.pop();continue}var v=a.layers[a.i];if(a.i++,v.opacity*=a.opacity,v.visible=a.visible&&v.visible,v.type!=="objectgroup"){if(v.type==="group"){var x=l(r,v,a);p.push(a),a=x}continue}v.name=a.name+v.name;for(var g=a.x+d(v,"startx",0)+d(v,"offsetx",0),y=a.y+d(v,"starty",0)+d(v,"offsety",0),T=[],P=0;P<v.objects.length;P++){var A=S(v.objects[P],g,y);T.push(A)}var b=new u(v);b.objects=T,o.push(b)}return o};m.exports=h},28200:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(41868),S=i(91907),u=i(79677),l=i(6641),h=i(95540),r=i(14977),o=i(29920),p=i(23029),a=function(v,x){for(var g=h(v,"infinite",!1),y=[],T=[],P=u(v);P.i<P.layers.length||T.length>0;){if(P.i>=P.layers.length){if(T.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}P=T.pop();continue}var A=P.layers[P.i];if(P.i++,A.type!=="tilelayer"){if(A.type==="group"){var b=u(v,A,P);T.push(P),P=b}continue}if(A.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+A.name+"'");continue}else if(A.encoding&&A.encoding==="base64"){if(A.chunks)for(var O=0;O<A.chunks.length;O++)A.chunks[O].data=d(A.chunks[O].data);A.data&&(A.data=d(A.data)),delete A.encoding}var D,B,G,V,k,U,W=[],X=0;if(g){var _=h(A,"startx",0)+A.x,Q=h(A,"starty",0)+A.y;D=new r({name:P.name+A.name,id:A.id,x:P.x+h(A,"offsetx",0)+_*v.tilewidth,y:P.y+h(A,"offsety",0)+Q*v.tileheight,width:A.width,height:A.height,tileWidth:v.tilewidth,tileHeight:v.tileheight,alpha:P.opacity*A.opacity,visible:P.visible&&A.visible,properties:h(A,"properties",[]),orientation:l(v.orientation)}),D.orientation===S.HEXAGONAL&&(D.hexSideLength=v.hexsidelength,D.staggerAxis=v.staggeraxis,D.staggerIndex=v.staggerindex,D.staggerAxis==="y"?(k=(D.tileHeight-D.hexSideLength)/2,D.widthInPixels=D.tileWidth*(D.width+.5),D.heightInPixels=D.height*(D.hexSideLength+k)+k):(U=(D.tileWidth-D.hexSideLength)/2,D.widthInPixels=D.width*(D.hexSideLength+U)+U,D.heightInPixels=D.tileHeight*(D.height+.5)));for(var j=0;j<A.height;j++){W[j]=[null];for(var it=0;it<A.width;it++)W[j][it]=null}for(j=0,xt=A.chunks.length;j<xt;j++)for(var K=A.chunks[j],J=K.x-_,Y=K.y-Q,q=0,$=0,et=K.data.length;$<et;$++){var rt=X+J,at=q+Y;B=o(K.data[$]),B.gid>0?(G=new p(D,B.gid,rt,at,v.tilewidth,v.tileheight),G.rotation=B.rotation,G.flipX=B.flipped,W[at][rt]=G):(V=x?null:new p(D,-1,rt,at,v.tilewidth,v.tileheight),W[at][rt]=V),X++,X===K.width&&(q++,X=0)}}else{D=new r({name:P.name+A.name,id:A.id,x:P.x+h(A,"offsetx",0)+A.x,y:P.y+h(A,"offsety",0)+A.y,width:A.width,height:A.height,tileWidth:v.tilewidth,tileHeight:v.tileheight,alpha:P.opacity*A.opacity,visible:P.visible&&A.visible,properties:h(A,"properties",[]),orientation:l(v.orientation)}),D.orientation===S.HEXAGONAL&&(D.hexSideLength=v.hexsidelength,D.staggerAxis=v.staggeraxis,D.staggerIndex=v.staggerindex,D.staggerAxis==="y"?(k=(D.tileHeight-D.hexSideLength)/2,D.widthInPixels=D.tileWidth*(D.width+.5),D.heightInPixels=D.height*(D.hexSideLength+k)+k):(U=(D.tileWidth-D.hexSideLength)/2,D.widthInPixels=D.width*(D.hexSideLength+U)+U,D.heightInPixels=D.tileHeight*(D.height+.5)));for(var lt=[],vt=0,xt=A.data.length;vt<xt;vt++)B=o(A.data[vt]),B.gid>0?(G=new p(D,B.gid,X,W.length,v.tilewidth,v.tileheight),G.rotation=B.rotation,G.flipX=B.flipped,lt.push(G)):(V=x?null:new p(D,-1,X,W.length,v.tilewidth,v.tileheight),lt.push(V)),X++,X===A.width&&(W.push(lt),X=0,lt=[])}D.data=W,y.push(D)}return y};m.exports=a},24619:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(33629),S=i(16536),u=i(52205),l=i(57880),h=function(r){for(var o=[],p=[],a=null,v,x=0;x<r.tilesets.length;x++){var g=r.tilesets[x];if(g.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(g.image){var y=new d(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing,void 0,void 0,g.tileoffset);if(r.version>1){var T=void 0,P=void 0;if(Array.isArray(g.tiles)){T=T||{},P=P||{};for(var A=0;A<g.tiles.length;A++){var b=g.tiles[A];if(b.properties){var O={};b.properties.forEach(function(j){O[j.name]=j.value}),P[b.id]=O}if(b.objectgroup&&((T[b.id]||(T[b.id]={})).objectgroup=b.objectgroup,b.objectgroup.objects)){var D=b.objectgroup.objects.map(function(j){return u(j)});T[b.id].objectgroup.objects=D}b.animation&&((T[b.id]||(T[b.id]={})).animation=b.animation),b.type&&((T[b.id]||(T[b.id]={})).type=b.type)}}Array.isArray(g.wangsets)&&(T=T||{},P=P||{},l(g.wangsets,T)),T&&(y.tileData=T,y.tileProperties=P)}else if(g.tileproperties&&(y.tileProperties=g.tileproperties),g.tiles){y.tileData=g.tiles;for(v in y.tileData){var B=y.tileData[v].objectgroup;if(B&&B.objects){var G=B.objects.map(function(j){return u(j)});y.tileData[v].objectgroup.objects=G}}}y.updateTileData(g.imagewidth,g.imageheight),o.push(y)}else{var V=new S(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing,g.properties),k=0;for(A=0;A<g.tiles.length;A++){b=g.tiles[A];var U=b.image,W=parseInt(b.id,10),X=g.firstgid+W,_=b.imagewidth,Q=b.imageheight;V.addImage(X,U,_,Q),k=Math.max(W,k)}V.maxId=k,p.push(V)}a&&(a.lastgid=g.firstgid-1),a=g}return{tilesets:o,imageCollections:p}};m.exports=h},57880:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){for(var S=0;S<i.length;S++){var u=i[S],l=S;if(u.name&&u.name!==""&&(l=u.name),Array.isArray(u.wangtiles)&&u.wangtiles.length>0){var h={},r={},o,p,a;if(Array.isArray(u.edgecolors))for(o=0;o<u.edgecolors.length;o++)a=1+o,p=u.edgecolors[o],p.name!==""&&(h[a]=p.name);if(Array.isArray(u.cornercolors))for(o=0;o<u.cornercolors.length;o++)a=1+o,p=u.cornercolors[o],p.name!==""&&(r[a]=p.name);if(Array.isArray(u.colors))for(o=0;o<u.colors.length;o++)p=u.colors[o],a=1+o,p.name!==""&&(h[a]=r[a]=p.name);for(var v=[h,r,h,r,h,r,h,r],x=0;x<u.wangtiles.length;x++){var g=u.wangtiles[x],y=d[g.tileid]||(d[g.tileid]={});y=y.wangid||(y.wangid={});for(var T=[],P=0;P<Math.min(v.length,g.wangid.length);P++){if(p=g.wangid[P],p===0){T.push(void 0);continue}var A=v[P][p];if(A!==void 0){T.push(A);continue}T.push(p)}y[l]=T}}}};m.exports=E},96761:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={AssignTileProperties:i(51233),Base64Decode:i(41868),BuildTilesetIndex:i(84101),CreateGroupLayer:i(79677),ParseGID:i(29920),ParseImageLayers:i(12635),ParseJSONTiled:i(46594),ParseObject:i(52205),ParseObjectLayers:i(22611),ParseTileLayers:i(28200),ParseTilesets:i(24619)}},33385:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(37277),u=i(44594),l=i(94880),h=i(72905),r=new d({initialize:function(p){this.scene=p,this.systems=p.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],p.sys.events.once(u.BOOT,this.boot,this),p.sys.events.on(u.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(u.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var o=this.systems.events;o.on(u.PRE_UPDATE,this.preUpdate,this),o.on(u.UPDATE,this.update,this),o.once(u.SHUTDOWN,this.shutdown,this)},addEvent:function(o){var p;if(o instanceof l){if(p=o,this.removeEvent(p),p.elapsed=p.startAt,p.hasDispatched=!1,p.repeatCount=p.repeat===-1||p.loop?999999999999:p.repeat,p.delay<=0&&p.repeatCount>0)throw new Error("TimerEvent infinite loop created via zero delay")}else p=new l(o);return this._pendingInsertion.push(p),p},delayedCall:function(o,p,a,v){return this.addEvent({delay:o,callback:p,args:a,callbackScope:v})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(o){Array.isArray(o)||(o=[o]);for(var p=0;p<o.length;p++){var a=o[p];h(this._pendingRemoval,a),h(this._pendingInsertion,a),h(this._active,a)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var o=this._pendingRemoval.length,p=this._pendingInsertion.length;if(!(o===0&&p===0)){var a,v;for(a=0;a<o;a++){v=this._pendingRemoval[a];var x=this._active.indexOf(v);x>-1&&this._active.splice(x,1),v.destroy()}for(a=0;a<p;a++)v=this._pendingInsertion[a],this._active.push(v);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(o,p){if(this.now=o,!this.paused){p*=this.timeScale;for(var a=0;a<this._active.length;a++){var v=this._active[a];if(!v.paused&&(v.elapsed+=p*v.timeScale,v.elapsed>=v.delay)){var x=v.elapsed-v.delay;if(v.elapsed=v.delay,!v.hasDispatched&&v.callback&&(v.hasDispatched=!0,v.callback.apply(v.callbackScope,v.args)),v.repeatCount>0){if(v.repeatCount--,x>=v.delay)for(;x>=v.delay&&v.repeatCount>0;)v.callback&&v.callback.apply(v.callbackScope,v.args),x-=v.delay,v.repeatCount--;v.elapsed=x,v.hasDispatched=!1}else v.hasDispatched&&this._pendingRemoval.push(v)}}}},shutdown:function(){var o;for(o=0;o<this._pendingInsertion.length;o++)this._pendingInsertion[o].destroy();for(o=0;o<this._active.length;o++)this._active[o].destroy();for(o=0;o<this._pendingRemoval.length;o++)this._pendingRemoval[o].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var p=this.systems.events;p.off(u.PRE_UPDATE,this.preUpdate,this),p.off(u.UPDATE,this.update,this),p.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});S.register("Clock",r,"time"),m.exports=r},96120:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(50792),u=i(39429),l=i(95540),h=i(44594),r=i(89809),o=new d({Extends:S,initialize:function(a,v){S.call(this),this.scene=a,this.systems=a.sys,this.elapsed=0,this.timeScale=1,this.paused=!0,this.complete=!1,this.totalComplete=0,this.loop=0,this.iteration=0,this.events=[];var x=this.systems.events;x.on(h.PRE_UPDATE,this.preUpdate,this),x.on(h.UPDATE,this.update,this),x.once(h.SHUTDOWN,this.destroy,this),v&&this.add(v)},preUpdate:function(p,a){this.paused||(this.elapsed+=a*this.timeScale)},update:function(){if(!(this.paused||this.complete)){var p,a=this.events,v=!1,x=this.systems,g;for(p=0;p<a.length;p++){var y=a[p];if(!y.complete&&y.time<=this.elapsed){if(y.complete=!0,this.totalComplete++,g=y.target?y.target:this,y.if&&!y.if.call(g,y))continue;if(y.once&&(v=!0),y.set&&y.target)for(var T in y.set)y.target[T]=y.set[T];this.iteration&&y.repeat++,y.loop&&y.repeat&&y.loop.call(g),y.tween&&(y.tweenInstance=x.tweens.add(y.tween)),y.sound&&(typeof y.sound=="string"?x.sound.play(y.sound):x.sound.play(y.sound.key,y.sound.config)),y.event&&this.emit(y.event,g),y.run&&y.run.call(g),y.stop&&this.stop()}}if(v)for(p=0;p<a.length;p++)a[p].complete&&a[p].once&&(a.splice(p,1),p--);this.totalComplete>=a.length&&(this.loop!==0&&(this.loop===-1||this.loop>this.iteration)?(this.iteration++,this.reset(!0)):this.complete=!0),this.complete&&this.emit(r.COMPLETE,this)}},play:function(p){return p===void 0&&(p=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,p&&this.reset(),this},pause:function(){this.paused=!0;for(var p=this.events,a=0;a<p.length;a++){var v=p[a];v.tweenInstance&&(v.tweenInstance.paused=!0)}return this},repeat:function(p){return(p===void 0||p===!0)&&(p=-1),p===!1&&(p=0),this.loop=p,this},resume:function(){this.paused=!1;for(var p=this.events,a=0;a<p.length;a++){var v=p[a];v.tweenInstance&&(v.tweenInstance.paused=!1)}return this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(p){p===void 0&&(p=!1),this.elapsed=0,p||(this.iteration=0);for(var a=this.events,v=0;v<a.length;v++){var x=a[v];x.complete=!1,p||(x.repeat=0),x.tweenInstance&&x.tweenInstance.stop()}return this.play(!1)},add:function(p){Array.isArray(p)||(p=[p]);var a=this.events,v=0;a.length>0&&(v=a[a.length-1].time);for(var x=0;x<p.length;x++){var g=p[x],y=l(g,"at",0),T=l(g,"in",null);T!==null&&(y=this.elapsed+T);var P=l(g,"from",null);P!==null&&(y=v+P),a.push({complete:!1,time:y,repeat:0,if:l(g,"if",null),run:l(g,"run",null),loop:l(g,"loop",null),event:l(g,"event",null),target:l(g,"target",null),set:l(g,"set",null),tween:l(g,"tween",null),sound:l(g,"sound",null),once:l(g,"once",!1),stop:l(g,"stop",!1)}),v=y}return this.complete=!1,this},clear:function(){for(var p=this.events,a=0;a<p.length;a++){var v=p[a];v.tweenInstance&&v.tweenInstance.stop()}return p=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){var p=Math.min(this.totalComplete,this.events.length);return p/this.events.length},destroy:function(){var p=this.systems.events;p.off(h.PRE_UPDATE,this.preUpdate,this),p.off(h.UPDATE,this.update,this),p.off(h.SHUTDOWN,this.destroy,this),this.clear(),this.scene=null,this.systems=null}});u.register("timeline",function(p){return new o(this.scene,p)}),m.exports=o},94880:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(95540),u=new d({initialize:function(h){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(h)},reset:function(l){if(this.delay=S(l,"delay",0),this.repeat=S(l,"repeat",0),this.loop=S(l,"loop",!1),this.callback=S(l,"callback",void 0),this.callbackScope=S(l,"callbackScope",this),this.args=S(l,"args",[]),this.timeScale=S(l,"timeScale",1),this.startAt=S(l,"startAt",0),this.paused=S(l,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay<=0&&this.repeatCount>0)throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var l=this.delay+this.delay*this.repeat,h=this.elapsed+this.delay*(this.repeat-this.repeatCount);return h/l}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(l){l===void 0&&(l=!1),this.elapsed=this.delay,this.hasDispatched=!l,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});m.exports=u},35945:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="complete"},89809:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={COMPLETE:i(35945)}},90291:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Clock:i(33385),Events:i(89809),Timeline:i(96120),TimerEvent:i(94880)}},40382:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(72905),S=i(83419),u=i(43491),l=i(88032),h=i(37277),r=i(44594),o=i(93109),p=i(86081),a=i(8357),v=i(43960),x=i(26012),g=new S({initialize:function(T){this.scene=T,this.events=T.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(r.BOOT,this.boot,this),this.events.on(r.START,this.start,this)},boot:function(){this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(r.UPDATE,this.update,this),this.events.once(r.SHUTDOWN,this.shutdown,this)},create:function(y){Array.isArray(y)||(y=[y]);for(var T=[],P=0;P<y.length;P++){var A=y[P];A instanceof p||A instanceof v?T.push(A):Array.isArray(A.tweens)?T.push(x(this,A)):T.push(a(this,A))}return T.length===1?T[0]:T},add:function(y){var T=y,P=this.tweens;return T instanceof p||T instanceof v||(Array.isArray(T.tweens)?T=x(this,T):T=a(this,T)),P.push(T.reset()),T},addMultiple:function(y){for(var T,P=[],A=this.tweens,b=0;b<y.length;b++)T=y[b],T instanceof p||T instanceof v||(Array.isArray(T.tweens)?T=x(this,T):T=a(this,T)),A.push(T.reset()),P.push(T);return P},chain:function(y){var T=x(this,y);return this.tweens.push(T.init()),T},getChainedTweens:function(y){return y.getChainedTweens()},has:function(y){return this.tweens.indexOf(y)>-1},existing:function(y){return this.has(y)||this.tweens.push(y.reset()),this},addCounter:function(y){var T=l(this,y);return this.tweens.push(T.reset()),T},stagger:function(y,T){return o(y,T)},setLagSmooth:function(y,T){return y===void 0&&(y=1/1e-8),T===void 0&&(T=0),this.maxLag=y,this.lagSkip=Math.min(T,this.maxLag),this},setFps:function(y){return y===void 0&&(y=240),this.gap=1e3/y,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(y){var T=Date.now()-this.prevTime;T>this.maxLag&&(this.startTime+=T-this.lagSkip),this.prevTime+=T;var P=this.prevTime-this.startTime,A=P-this.nextTime,b=P-this.time*1e3;return A>0||y?(P/=1e3,this.time=P,this.nextTime+=A+(A>=this.gap?4:this.gap-A)):b=0,b},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(y){y===void 0&&(y=!1);var T=this.getDelta(y);if(!(T<=0)){this.processing=!0;var P,A,b=[],O=this.tweens;for(P=0;P<O.length;P++)A=O[P],A.update(T)&&b.push(A);var D=b.length;if(D&&O.length>0){for(P=0;P<D;P++){A=b[P];var B=O.indexOf(A);B>-1&&(A.isPendingRemove()||A.isDestroyed())&&(O.splice(B,1),A.destroy())}b.length=0}this.processing=!1}},remove:function(y){return this.processing?y.setPendingRemoveState():(d(this.tweens,y),y.setRemovedState()),this},reset:function(y){return this.existing(y),y.seek(),y.setActiveState(),this},makeActive:function(y){return this.existing(y),y.setActiveState(),this},each:function(y,T){var P,A=[null];for(P=1;P<arguments.length;P++)A.push(arguments[P]);return this.tweens.forEach(function(b){A[0]=b,y.apply(T,A)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(y){var T=[],P=this.tweens;Array.isArray(y)?y=u(y):y=[y];for(var A=y.length,b=0;b<P.length;b++)for(var O=P[b],D=0;D<A;D++)!O.isDestroyed()&&O.hasTarget(y[D])&&T.push(O);return T},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(y){return this.timeScale=y,this},isTweening:function(y){for(var T=this.tweens,P,A=0;A<T.length;A++)if(P=T[A],P.isPlaying()&&P.hasTarget(y))return!0;return!1},killAll:function(){for(var y=this.processing?this.getTweens():this.tweens,T=0;T<y.length;T++)y[T].destroy();return this.processing||(y.length=0),this},killTweensOf:function(y){for(var T=this.getTweensOf(y),P=0;P<T.length;P++)T[P].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(r.UPDATE,this.update,this),this.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(r.START,this.start,this),this.scene=null,this.events=null}});h.register("TweenManager",g,"tweens"),m.exports=g},57355:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){return i&&i.hasOwnProperty(d)?i[d]:S};m.exports=E},6113:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(62640),S=i(35355),u=function(l,h){var r=d.Power0;if(typeof l=="string")if(d.hasOwnProperty(l))r=d[l];else{var o="";if(l.indexOf(".")){o=l.substring(l.indexOf(".")+1);var p=o.toLowerCase();p==="in"?o="easeIn":p==="out"?o="easeOut":p==="inout"&&(o="easeInOut")}l=S(l.substring(0,l.indexOf(".")+1)+o),d.hasOwnProperty(l)&&(r=d[l])}else typeof l=="function"&&(r=l);if(!h)return r;var a=h.slice(0);return a.unshift(0),function(v){return a[0]=v,r.apply(this,a)}};m.exports=u},91389:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(89318),S=i(77259),u=i(28392),l={bezier:d,catmull:S,catmullrom:S,linear:u},h=function(r){if(r===null)return null;var o=l.linear;return typeof r=="string"?l.hasOwnProperty(r)&&(o=l[r]):typeof r=="function"&&(o=r),o};m.exports=h},55292:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){var u;if(i.hasOwnProperty(d)){var l=typeof i[d];l==="function"?u=function(h,r,o,p,a,v){return i[d](h,r,o,p,a,v)}:u=function(){return i[d]}}else typeof S=="function"?u=S:u=function(){return S};return u};m.exports=E},82985:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(81076),S=function(u){var l,h=[];if(u.hasOwnProperty("props"))for(l in u.props)l.substring(0,1)!=="_"&&h.push({key:l,value:u.props[l]});else for(l in u)d.indexOf(l)===-1&&l.substring(0,1)!=="_"&&h.push({key:l,value:u[l]});return h};m.exports=S},62329:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(35154),S=function(u){var l=d(u,"targets",null);return l===null||(typeof l=="function"&&(l=l.call()),Array.isArray(l)||(l=[l])),l};m.exports=S},17777:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(30976),S=i(99472);function u(p){return!!p.getActive&&typeof p.getActive=="function"}function l(p){return!!p.getStart&&typeof p.getStart=="function"}function h(p){return!!p.getEnd&&typeof p.getEnd=="function"}function r(p){return l(p)||h(p)||u(p)}var o=function(p,a){var v,x=function(j,it,K){return K},g=function(j,it,K){return K},y=null,T=typeof a;if(T==="number")x=function(){return a};else if(Array.isArray(a))g=function(){return a[0]},x=function(){return a[a.length-1]};else if(T==="string"){var P=a.toLowerCase(),A=P.substring(0,6)==="random",b=P.substring(0,3)==="int";if(A||b){var O=P.indexOf("("),D=P.indexOf(")"),B=P.indexOf(",");if(O&&D&&B){var G=parseFloat(P.substring(O+1,B)),V=parseFloat(P.substring(B+1,D));A?x=function(){return S(G,V)}:x=function(){return d(G,V)}}else throw new Error("invalid random() format")}else{P=P[0];var k=parseFloat(a.substr(2));switch(P){case"+":x=function(j,it,K){return K+k};break;case"-":x=function(j,it,K){return K-k};break;case"*":x=function(j,it,K){return K*k};break;case"/":x=function(j,it,K){return K/k};break;default:x=function(){return parseFloat(a)}}}}else if(T==="function")x=a;else if(T==="object")if(r(a))u(a)&&(y=a.getActive),h(a)&&(x=a.getEnd),l(a)&&(g=a.getStart);else if(a.hasOwnProperty("value"))v=o(p,a.value);else{var U=a.hasOwnProperty("to"),W=a.hasOwnProperty("from"),X=a.hasOwnProperty("start");if(U&&(W||X)){if(v=o(p,a.to),X){var _=o(p,a.start);v.getActive=_.getEnd}if(W){var Q=o(p,a.from);v.getStart=Q.getEnd}}}return v||(v={getActive:y,getEnd:x,getStart:g}),v};m.exports=o},88032:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(70402),S=i(69902),u=i(23568),l=i(57355),h=i(6113),r=i(95540),o=i(55292),p=i(35154),a=i(17777),v=i(269),x=i(86081),g=function(y,T,P){if(T instanceof x)return T.parent=y,T;P===void 0?P=S:P=v(S,P);var A=r(T,"from",0),b=r(T,"to",1),O=[{value:A}],D=r(T,"delay",P.delay),B=r(T,"easeParams",P.easeParams),G=r(T,"ease",P.ease),V=a("value",b),k=new x(y,O),U=k.add(0,"value",V.getEnd,V.getStart,V.getActive,h(r(T,"ease",G),r(T,"easeParams",B)),o(T,"delay",D),r(T,"duration",P.duration),l(T,"yoyo",P.yoyo),r(T,"hold",P.hold),r(T,"repeat",P.repeat),r(T,"repeatDelay",P.repeatDelay),!1,!1);U.start=A,U.current=A,k.completeDelay=u(T,"completeDelay",0),k.loop=Math.round(u(T,"loop",0)),k.loopDelay=Math.round(u(T,"loopDelay",0)),k.paused=l(T,"paused",!1),k.persist=l(T,"persist",!1),k.isNumberTween=!0,k.callbackScope=p(T,"callbackScope",k);for(var W=d.TYPES,X=0;X<W.length;X++){var _=W[X],Q=p(T,_,!1);if(Q){var j=p(T,_+"Params",[]);k.setCallback(_,Q,j)}}return k};m.exports=g},93109:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(6113),S=i(35154),u=i(36383),l=function(h,r){r===void 0&&(r={});var o,p=S(r,"start",0),a=S(r,"ease",null),v=S(r,"grid",null),x=S(r,"from",0),g=x==="first",y=x==="center",T=x==="last",P=typeof x=="number",A=Array.isArray(h),b=parseFloat(A?h[0]:h),O=A?parseFloat(h[1]):0,D=Math.max(b,O);if(A&&(p+=b),v){var B=v[0],G=v[1],V=0,k=0,U=0,W=0,X=[];T?(V=B-1,k=G-1):P?(V=x%B,k=Math.floor(x/B)):y&&(V=(B-1)/2,k=(G-1)/2);for(var _=u.MIN_SAFE_INTEGER,Q=0;Q<G;Q++){X[Q]=[];for(var j=0;j<B;j++){U=V-j,W=k-Q;var it=Math.sqrt(U*U+W*W);it>_&&(_=it),X[Q][j]=it}}}var K=a?d(a):null;return v?o=function(J,Y,q,$){var et=0,rt=$%B,at=Math.floor($/B);rt>=0&&rt<B&&at>=0&&at<G&&(et=X[at][rt]);var lt;if(A){var vt=O-b;K?lt=et/_*vt*K(et/_):lt=et/_*vt}else K?lt=et*b*K(et/_):lt=et*b;return lt+p}:o=function(J,Y,q,$,et){et--;var rt;g?rt=$:y?rt=Math.abs(et/2-$):T?rt=et-$:P&&(rt=Math.abs(x-$));var at;if(A){var lt;y?lt=(O-b)/et*(rt*2):lt=(O-b)/et*rt,K?at=lt*K(rt/et):at=lt}else K?at=et*D*K(rt/et):at=rt*b;return at+p},o};m.exports=l},8357:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(70402),S=i(69902),u=i(23568),l=i(57355),h=i(6113),r=i(95540),o=i(91389),p=i(55292),a=i(82985),v=i(62329),x=i(35154),g=i(17777),y=i(269),T=i(86081),P=function(A,b,O){if(b instanceof T)return b.parent=A,b;O===void 0?O=S:O=y(S,O);var D=v(b);!D&&O.targets&&(D=O.targets);for(var B=a(b),G=r(b,"delay",O.delay),V=r(b,"duration",O.duration),k=r(b,"easeParams",O.easeParams),U=r(b,"ease",O.ease),W=r(b,"hold",O.hold),X=r(b,"repeat",O.repeat),_=r(b,"repeatDelay",O.repeatDelay),Q=l(b,"yoyo",O.yoyo),j=l(b,"flipX",O.flipX),it=l(b,"flipY",O.flipY),K=r(b,"interpolation",O.interpolation),J=function(mt,Tt,bt,St){if(bt==="texture"){var Gt=St,Nt=void 0;Array.isArray(St)?(Gt=St[0],Nt=St[1]):St.hasOwnProperty("value")?(Gt=St.value,Array.isArray(St.value)?(Gt=St.value[0],Nt=St.value[1]):typeof St.value=="string"&&(Gt=St.value)):typeof St=="string"&&(Gt=St),mt.addFrame(Tt,Gt,Nt,p(St,"delay",G),r(St,"duration",V),r(St,"hold",W),r(St,"repeat",X),r(St,"repeatDelay",_),l(St,"flipX",j),l(St,"flipY",it))}else{var zt=g(bt,St),Lt=o(r(St,"interpolation",K));mt.add(Tt,bt,zt.getEnd,zt.getStart,zt.getActive,h(r(St,"ease",U),r(St,"easeParams",k)),p(St,"delay",G),r(St,"duration",V),l(St,"yoyo",Q),r(St,"hold",W),r(St,"repeat",X),r(St,"repeatDelay",_),l(St,"flipX",j),l(St,"flipY",it),Lt,Lt?St:null)}},Y=new T(A,D),q=0;q<B.length;q++)for(var $=B[q].key,et=B[q].value,rt=0;rt<D.length;rt++)$==="scale"&&!D[rt].hasOwnProperty("scale")?(J(Y,rt,"scaleX",et),J(Y,rt,"scaleY",et)):J(Y,rt,$,et);Y.completeDelay=u(b,"completeDelay",0),Y.loop=Math.round(u(b,"loop",0)),Y.loopDelay=Math.round(u(b,"loopDelay",0)),Y.paused=l(b,"paused",!1),Y.persist=l(b,"persist",!1),Y.callbackScope=r(b,"callbackScope",Y);for(var at=d.TYPES,lt=0;lt<at.length;lt++){var vt=at[lt],xt=x(b,vt,!1);if(xt){var ut=x(b,vt+"Params",[]);Y.setCallback(vt,xt,ut)}}return Y};m.exports=P},26012:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(70402),S=i(23568),u=i(57355),l=i(62329),h=i(35154),r=i(8357),o=i(43960),p=function(a,v){if(v instanceof o)return v.parent=a,v;var x=new o(a);x.startDelay=h(v,"delay",0),x.completeDelay=S(v,"completeDelay",0),x.loop=Math.round(S(v,"loop",h(v,"repeat",0))),x.loopDelay=Math.round(S(v,"loopDelay",h(v,"repeatDelay",0))),x.paused=u(v,"paused",!1),x.persist=u(v,"persist",!1),x.callbackScope=h(v,"callbackScope",x);var g,y=d.TYPES;for(g=0;g<y.length;g++){var T=y[g],P=h(v,T,!1);if(P){var A=h(v,T+"Params",[]);x.setCallback(T,P,A)}}var b=h(v,"tweens",null);if(Array.isArray(b)){var O=[],D=l(v),B=void 0;for(D&&(B={targets:D}),g=0;g<b.length;g++)O.push(r(x,b[g],B));x.add(O)}return x};m.exports=p},30231:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={GetBoolean:i(57355),GetEaseFunction:i(6113),GetInterpolationFunction:i(91389),GetNewValue:i(55292),GetProps:i(82985),GetTargets:i(62329),GetValueOp:i(17777),NumberTweenBuilder:i(88032),StaggerBuilder:i(93109),TweenBuilder:i(8357)}},73685:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="active"},98540:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="complete"},67233:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="loop"},2859:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pause"},98336:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="repeat"},25764:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="resume"},32193:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="start"},84371:m=>{/**
 * @author       samme
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="stop"},70766:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="update"},55659:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="yoyo"},842:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={TWEEN_ACTIVE:i(73685),TWEEN_COMPLETE:i(98540),TWEEN_LOOP:i(67233),TWEEN_PAUSE:i(2859),TWEEN_RESUME:i(25764),TWEEN_REPEAT:i(98336),TWEEN_START:i(32193),TWEEN_STOP:i(84371),TWEEN_UPDATE:i(70766),TWEEN_YOYO:i(55659)}},43066:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={States:i(86353),Builders:i(30231),Events:i(842),TweenManager:i(40382),Tween:i(86081),TweenData:i(48177),TweenFrameData:i(42220),BaseTween:i(70402),TweenChain:i(43960)};m.exports=d},70402:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(50792),u=i(842),l=i(86353),h=new d({Extends:S,initialize:function(o){S.call(this),this.parent=o,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=l.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(r){return this.timeScale=r,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(u.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(u.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(u.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(u.TWEEN_COMPLETE,"onComplete")},complete:function(r){return r===void 0&&(r=0),r?(this.setCompleteDelayState(),this.countdown=r):this.onCompleteHandler(),this},completeAfterLoop:function(r){return r===void 0&&(r=0),this.loopCounter>r&&(this.loopCounter=r),this},remove:function(){return this.parent&&this.parent.remove(this),this},stop:function(){return this.parent&&!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(u.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(r){this.countdown-=r,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(u.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(r){return this.countdown-=r,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(u.TWEEN_START,"onStart"),r=0),r},updateCompleteDelay:function(r){this.countdown-=r,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(r,o,p){return p===void 0&&(p=[]),this.callbacks.hasOwnProperty(r)&&(this.callbacks[r]={func:o,params:p}),this},setPendingState:function(){this.state=l.PENDING},setActiveState:function(){this.state=l.ACTIVE,this.hasStarted=!1},setLoopDelayState:function(){this.state=l.LOOP_DELAY},setCompleteDelayState:function(){this.state=l.COMPLETE_DELAY},setStartDelayState:function(){this.state=l.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=l.PENDING_REMOVE},setRemovedState:function(){this.state=l.REMOVED},setFinishedState:function(){this.state=l.FINISHED},setDestroyedState:function(){this.state=l.DESTROYED},isPending:function(){return this.state===l.PENDING},isActive:function(){return this.state===l.ACTIVE},isLoopDelayed:function(){return this.state===l.LOOP_DELAY},isCompleteDelayed:function(){return this.state===l.COMPLETE_DELAY},isStartDelayed:function(){return this.state===l.START_DELAY},isPendingRemove:function(){return this.state===l.PENDING_REMOVE},isRemoved:function(){return this.state===l.REMOVED},isFinished:function(){return this.state===l.FINISHED},isDestroyed:function(){return this.state===l.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(r){r.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});h.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],m.exports=h},95042:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(83419),S=i(842),u=i(86353),l=new d({initialize:function(r,o,p,a,v,x,g,y,T,P){this.tween=r,this.targetIndex=o,this.duration=a<=0?.01:a,this.totalDuration=0,this.delay=0,this.getDelay=p,this.yoyo=v,this.hold=x,this.repeat=g,this.repeatDelay=y,this.repeatCounter=0,this.flipX=T,this.flipY=P,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(h){h===void 0&&(h=this.current),this.tween.targets[this.targetIndex][this.key]=h},setCreatedState:function(){this.state=u.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=u.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=u.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=u.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=u.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=u.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=u.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=u.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===u.CREATED},isDelayed:function(){return this.state===u.DELAY},isPendingRender:function(){return this.state===u.PENDING_RENDER},isPlayingForward:function(){return this.state===u.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===u.PLAYING_BACKWARD},isHolding:function(){return this.state===u.HOLD_DELAY},isRepeating:function(){return this.state===u.REPEAT_DELAY},isComplete:function(){return this.state===u.COMPLETE},setStateFromEnd:function(h){this.yoyo?this.onRepeat(h,!0,!0):this.repeatCounter>0?this.onRepeat(h,!0,!1):this.setCompleteState()},setStateFromStart:function(h){this.repeatCounter>0?this.onRepeat(h,!1):this.setCompleteState()},reset:function(){var h=this.tween,r=h.totalTargets,o=this.targetIndex,p=h.targets[o],a=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(p,a,0,o,r,h),this.repeatCounter=this.repeat===-1?u.MAX:this.repeat,this.setPendingRenderState();var v=this.duration+this.hold;this.yoyo&&(v+=this.duration);var x=v+this.repeatDelay;this.totalDuration=this.delay+v,this.repeat===-1?(this.totalDuration+=x*u.MAX,h.isInfinite=!0):this.repeat>0&&(this.totalDuration+=x*this.repeat),this.totalDuration>h.duration&&(h.duration=this.totalDuration),this.delay<h.startDelay&&(h.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(h,r,o){var p=this.tween,a=p.totalTargets,v=this.targetIndex,x=p.targets[v],g=this.key,y=g!=="texture";if(this.elapsed=h,this.progress=h/this.duration,this.flipX&&x.toggleFlipX(),this.flipY&&x.toggleFlipY(),y&&(r||o)&&(this.start=this.getStartValue(x,g,this.start,v,a,p)),o){this.setPlayingBackwardState(),this.dispatchEvent(S.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,y&&(this.end=this.getEndValue(x,g,this.start,v,a,p)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-h,y&&(this.current=this.start,x[g]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(S.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});m.exports=l},69902:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};m.exports=E},81076:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]},86081:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(70402),S=i(83419),u=i(842),l=i(44603),h=i(39429),r=i(36383),o=i(86353),p=i(48177),a=i(42220),v=new S({Extends:d,initialize:function(g,y){d.call(this,g),this.targets=y,this.totalTargets=y.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.isNumberTween=!1},add:function(x,g,y,T,P,A,b,O,D,B,G,V,k,U,W,X){var _=new p(this,x,g,y,T,P,A,b,O,D,B,G,V,k,U,W,X);return this.totalData=this.data.push(_),_},addFrame:function(x,g,y,T,P,A,b,O,D,B){var G=new a(this,x,g,y,T,P,A,b,O,D,B);return this.totalData=this.data.push(G),G},getValue:function(x){x===void 0&&(x=0);var g=null;return this.data&&(g=this.data[x].current),g},hasTarget:function(x){return this.targets&&this.targets.indexOf(x)!==-1},updateTo:function(x,g,y){if(y===void 0&&(y=!1),x!=="texture")for(var T=0;T<this.totalData;T++){var P=this.data[T];P.key===x&&(P.isPlayingForward()||P.isPlayingBackward())&&(P.end=g,y&&(P.start=P.current))}return this},restart:function(){switch(this.state){case o.REMOVED:case o.FINISHED:this.seek(),this.parent.makeActive(this);break;case o.PENDING:case o.PENDING_REMOVE:this.parent.reset(this);break;case o.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(u.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,d.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(x,g,y){if(x===void 0&&(x=0),g===void 0&&(g=16.6),y===void 0&&(y=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;y||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(u.TWEEN_ACTIVE,"onActive");var T=this.paused;if(this.paused=!1,x>0){for(var P=Math.floor(x/g),A=x-P*g,b=0;b<P;b++)this.update(g);A>0&&this.update(A)}return this.paused=T,this.isSeeking=!1,this},initTweenData:function(x){x===void 0&&(x=!1),this.duration=0,this.startDelay=r.MAX_SAFE_INTEGER;for(var g=this.data,y=0;y<this.totalData;y++)g[y].reset(x);this.duration=Math.max(this.duration,.01);var T=this.duration,P=this.completeDelay,A=this.loopCounter,b=this.loopDelay;A>0?this.totalDuration=T+P+(T+b)*A:this.totalDuration=T+P},reset:function(x){return x===void 0&&(x=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=o.MAX),x||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(u.TWEEN_ACTIVE,"onActive")),this},update:function(x){if(this.isPendingRemove()||this.isDestroyed())return this.persist?(this.setFinishedState(),!1):!0;if(this.paused||this.isFinished())return!1;if(x*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(x),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(x),!1;this.hasStarted||(this.startDelay-=x,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(u.TWEEN_START,"onStart"),x=0));var g=!1;if(this.isActive())for(var y=this.data,T=0;T<this.totalData;T++)y[T].update(x)&&(g=!0);this.elapsed+=x,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=x,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),g||this.nextState();var P=this.isPendingRemove();return P&&this.persist&&(this.setFinishedState(),P=!1),P},forward:function(x){return this.update(x),this},rewind:function(x){return this.update(-x),this},dispatchEvent:function(x,g){if(!this.isSeeking){if(this.emit(x,this,this.targets),!this.callbacks)return;var y=this.callbacks[g];y&&y.func.apply(this.callbackScope,[this,this.targets].concat(y.params))}},destroy:function(){d.prototype.destroy.call(this),this.targets=null}});h.register("tween",function(x){return this.scene.sys.tweens.add(x)}),l.register("tween",function(x){return this.scene.sys.tweens.create(x)}),m.exports=v},43960:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(72905),S=i(70402),u=i(83419),l=i(842),h=i(44603),r=i(39429),o=i(86353),p=new u({Extends:S,initialize:function(v){S.call(this,v),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?o.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this},add:function(a){var v=this.parent.create(a);Array.isArray(v)||(v=[v]);for(var x=this.data,g=0;g<v.length;g++){var y=v[g];y.parent=this,x.push(y.reset())}return this.totalData=x.length,this},remove:function(a){return d(this.data,a),a.setRemovedState(),a===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(a){for(var v=this.data,x=0;x<this.totalData;x++)if(v[x].hasTarget(a))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(a){return a.seek(),a.setActiveState(),this},makeActive:function(a){return a.reset(),a.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(l.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var a=this.data,v=this.totalData,x=0;x<v;x++)a[x].reset(!1);this.setCurrentTween(0)},update:function(a){if(this.isPendingRemove()||this.isDestroyed())return this.persist?(this.setFinishedState(),!1):!0;if(this.isFinished()||this.paused)return!1;if(a*=this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(a),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(a),!1;this.hasStarted||(this.startDelay-=a,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(l.TWEEN_START,"onStart"),a=0));var v=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(a)&&this.nextTween()&&this.nextState(),v=this.isPendingRemove(),v&&this.persist&&(this.setFinishedState(),v=!1)),v},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(a){this.currentIndex=a,this.currentTween=this.data[a],this.currentTween.setActiveState()},dispatchEvent:function(a,v){this.emit(a,this);var x=this.callbacks[v];x&&x.func.apply(this.callbackScope,[this].concat(x.params))},destroy:function(){S.prototype.destroy.call(this),this.currentTween=null}});r.register("tweenchain",function(a){return this.scene.sys.tweens.chain(a)}),h.register("tweenchain",function(a){return this.scene.sys.tweens.create(a)}),m.exports=p},48177:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(95042),S=i(45319),u=i(83419),l=i(842),h=new u({Extends:d,initialize:function(o,p,a,v,x,g,y,T,P,A,b,O,D,B,G,V,k){d.call(this,o,p,T,P,A,b,O,D,B,G),this.key=a,this.getActiveValue=g,this.getEndValue=v,this.getStartValue=x,this.ease=y,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=V,this.interpolationData=k},reset:function(r){d.prototype.reset.call(this);var o=this.tween.targets[this.targetIndex],p=this.key;r&&(o[p]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(o[p]=this.getActiveValue(o,p,0))},update:function(r){var o=this.tween,p=o.totalTargets,a=this.targetIndex,v=o.targets[a],x=this.key;if(!v)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=r,this.elapsed<=0&&(this.elapsed=0,r=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(l.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(v,x,v[x],a,p,o),this.end=this.getEndValue(v,x,this.start,a,p,o),this.current=this.start,v[x]=this.start,this.setPlayingForwardState(),!0;var g=this.isPlayingForward(),y=this.isPlayingBackward();if(g||y){var T=this.elapsed,P=this.duration,A=0,b=!1;T+=r,T>=P?(A=T-P,T=P,b=!0):T<0&&(T=0);var O=S(T/P,0,1);this.elapsed=T,this.progress=O,this.previous=this.current,g||(O=1-O);var D=this.ease(O);this.interpolation?this.current=this.interpolation(this.interpolationData,D):this.current=this.start+(this.end-this.start)*D,v[x]=this.current,b&&(g?(o.isNumberTween&&(this.current=this.end,v[x]=this.current),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(A)):(o.isNumberTween&&(this.current=this.start,v[x]=this.current),this.setStateFromStart(A))),this.dispatchEvent(l.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(r,o){var p=this.tween;if(!p.isSeeking){var a=p.targets[this.targetIndex],v=this.key,x=this.current,g=this.previous;p.emit(r,p,v,a,x,g);var y=p.callbacks[o];y&&y.func.apply(p.callbackScope,[p,a,v,x,g].concat(y.params))}},destroy:function(){d.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});m.exports=h},42220:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(95042),S=i(45319),u=i(83419),l=i(842),h=new u({Extends:d,initialize:function(o,p,a,v,x,g,y,T,P,A,b){d.call(this,o,p,x,g,!1,y,T,P,A,b),this.key="texture",this.startTexture=null,this.endTexture=a,this.startFrame=null,this.endFrame=v,this.yoyo=T!==0},reset:function(r){d.prototype.reset.call(this);var o=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=o.texture.key,this.startFrame=o.frame.name),r&&o.setTexture(this.startTexture,this.startFrame)},update:function(r){var o=this.tween,p=this.targetIndex,a=o.targets[p];if(!a)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=r,this.elapsed<=0&&(this.elapsed=0,r=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(l.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&a.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var v=this.isPlayingForward(),x=this.isPlayingBackward();if(v||x){var g=this.elapsed,y=this.duration,T=0,P=!1;g+=r,g>=y?(T=g-y,g=y,P=!0):g<0&&(g=0);var A=S(g/y,0,1);this.elapsed=g,this.progress=A,P&&(v?(a.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(T)):(a.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(T))),this.dispatchEvent(l.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(r,o){var p=this.tween;if(!p.isSeeking){var a=p.targets[this.targetIndex],v=this.key;p.emit(r,p,v,a);var x=p.callbacks[o];x&&x.func.apply(p.callbackScope,[p,a,v].concat(x.params))}},destroy:function(){d.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});m.exports=h},86353:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};m.exports=E},83419:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function E(h){return!!h.get&&typeof h.get=="function"||!!h.set&&typeof h.set=="function"}function i(h,r,o){var p=o?h[r]:Object.getOwnPropertyDescriptor(h,r);return!o&&p.value&&typeof p.value=="object"&&(p=p.value),p&&E(p)?(typeof p.enumerable>"u"&&(p.enumerable=!0),typeof p.configurable>"u"&&(p.configurable=!0),p):!1}function d(h,r){var o=Object.getOwnPropertyDescriptor(h,r);return o?(o.value&&typeof o.value=="object"&&(o=o.value),o.configurable===!1):!1}function S(h,r,o,p){for(var a in r)if(r.hasOwnProperty(a)){var v=i(r,a,o);if(v!==!1){var x=p||h;if(d(x.prototype,a)){if(l.ignoreFinals)continue;throw new Error("cannot override final property '"+a+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(h.prototype,a,v)}else h.prototype[a]=r[a]}}function u(h,r){if(r){Array.isArray(r)||(r=[r]);for(var o=0;o<r.length;o++)S(h,r[o].prototype||r[o])}}function l(h){h||(h={});var r,o;if(h.initialize){if(typeof h.initialize!="function")throw new Error("initialize must be a function");r=h.initialize,delete h.initialize}else if(h.Extends){var p=h.Extends;r=function(){p.apply(this,arguments)}}else r=function(){};h.Extends?(r.prototype=Object.create(h.Extends.prototype),r.prototype.constructor=r,o=h.Extends,delete h.Extends):r.prototype.constructor=r;var a=null;return h.Mixins&&(a=h.Mixins,delete h.Mixins),u(r,a),S(r,h,!0,o),r}l.extend=S,l.mixin=u,l.ignoreFinals=!1,m.exports=l},29747:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(){};m.exports=E},20242:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(){return null};m.exports=E},71146:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u,l){if(l===void 0&&(l=i),S>0){var h=S-i.length;if(h<=0)return null}if(!Array.isArray(d))return i.indexOf(d)===-1?(i.push(d),u&&u.call(l,d),d):null;for(var r=d.length-1;r>=0;)i.indexOf(d[r])!==-1&&d.splice(r,1),r--;if(r=d.length,r===0)return null;S>0&&r>h&&(d.splice(h),r=h);for(var o=0;o<r;o++){var p=d[o];i.push(p),u&&u.call(l,p)}return d};m.exports=E},51067:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u,l,h){if(S===void 0&&(S=0),h===void 0&&(h=i),u>0){var r=u-i.length;if(r<=0)return null}if(!Array.isArray(d))return i.indexOf(d)===-1?(i.splice(S,0,d),l&&l.call(h,d),d):null;for(var o=d.length-1;o>=0;)i.indexOf(d[o])!==-1&&d.pop(),o--;if(o=d.length,o===0)return null;u>0&&o>r&&(d.splice(r),o=r);for(var p=o-1;p>=0;p--){var a=d[p];i.splice(S,0,a),l&&l.call(h,a)}return d};m.exports=E},66905:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){var S=i.indexOf(d);return S!==-1&&S<i.length&&(i.splice(S,1),i.push(d)),d};m.exports=E},21612:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(82011),S=function(u,l,h,r,o){r===void 0&&(r=0),o===void 0&&(o=u.length);var p=0;if(d(u,r,o))for(var a=r;a<o;a++){var v=u[a];v[l]===h&&p++}return p};m.exports=S},95428:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){var u,l=[null];for(u=3;u<arguments.length;u++)l.push(arguments[u]);for(u=0;u<i.length;u++)l[0]=i[u],d.apply(S,l);return i};m.exports=E},36914:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(82011),S=function(u,l,h,r,o){if(r===void 0&&(r=0),o===void 0&&(o=u.length),d(u,r,o)){var p,a=[null];for(p=5;p<arguments.length;p++)a.push(arguments[p]);for(p=r;p<o;p++)a[0]=u[p],l.apply(h,a)}return u};m.exports=S},81957:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){if(d.length){if(d.length===1)return d[0]}else return NaN;var u=1,l,h;if(S){if(i<d[0][S])return d[0];for(;d[u][S]<i;)u++}else for(;d[u]<i;)u++;return u>d.length&&(u=d.length),S?(l=d[u-1][S],h=d[u][S],h-i<=i-l?d[u]:d[u-1]):(l=d[u-1],h=d[u],h-i<=i-l?h:l)};m.exports=E},43491:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){d===void 0&&(d=[]);for(var S=0;S<i.length;S++)Array.isArray(i[S])?E(i[S],d):d.push(i[S]);return d};m.exports=E},46710:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(82011),S=function(u,l,h,r,o){r===void 0&&(r=0),o===void 0&&(o=u.length);var p=[];if(d(u,r,o))for(var a=r;a<o;a++){var v=u[a];(!l||l&&h===void 0&&v.hasOwnProperty(l)||l&&h!==void 0&&v[l]===h)&&p.push(v)}return p};m.exports=S},58731:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(82011),S=function(u,l,h,r,o){if(r===void 0&&(r=0),o===void 0&&(o=u.length),r!==-1){if(d(u,r,o))for(var p=r;p<o;p++){var a=u[p];if(!l||l&&h===void 0&&a.hasOwnProperty(l)||l&&h!==void 0&&a[l]===h)return a}}else if(d(u,0,o))for(var p=o;p>=0;p--){var a=u[p];if(!l||l&&h===void 0&&a.hasOwnProperty(l)||l&&h!==void 0&&a[l]===h)return a}return null};m.exports=S},26546:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){d===void 0&&(d=0),S===void 0&&(S=i.length);var u=d+Math.floor(Math.random()*S);return i[u]===void 0?null:i[u]};m.exports=E},85835:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){if(d===S)return i;var u=i.indexOf(d),l=i.indexOf(S);if(u<0||l<0)throw new Error("Supplied items must be elements of the same array");return u>l||(i.splice(u,1),l=i.indexOf(S),i.splice(l+1,0,d)),i};m.exports=E},83371:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){if(d===S)return i;var u=i.indexOf(d),l=i.indexOf(S);if(u<0||l<0)throw new Error("Supplied items must be elements of the same array");return u<l||(i.splice(u,1),l===0?i.unshift(d):i.splice(l,0,d)),i};m.exports=E},70864:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){var S=i.indexOf(d);if(S>0){var u=i[S-1],l=i.indexOf(u);i[S]=u,i[l]=d}return i};m.exports=E},69693:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){var u=i.indexOf(d);if(u===-1||S<0||S>=i.length)throw new Error("Supplied index out of bounds");return u!==S&&(i.splice(u,1),i.splice(S,0,d)),d};m.exports=E},40853:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){var S=i.indexOf(d);if(S!==-1&&S<i.length-1){var u=i[S+1],l=i.indexOf(u);i[S]=u,i[l]=d}return i};m.exports=E},20283:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){var l=[],h,r=!1;if((S||u)&&(r=!0,S||(S=""),u||(u="")),d<i)for(h=i;h>=d;h--)r?l.push(S+h.toString()+u):l.push(h);else for(h=i;h<=d;h++)r?l.push(S+h.toString()+u):l.push(h);return l};m.exports=E},593:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(2284),S=function(u,l,h){u===void 0&&(u=0),l===void 0&&(l=null),h===void 0&&(h=1),l===null&&(l=u,u=0);for(var r=[],o=Math.max(d((l-u)/(h||1)),0),p=0;p<o;p++)r.push(u),u+=h;return r};m.exports=S},43886:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function E(S,u,l){var h=S[u];S[u]=S[l],S[l]=h}function i(S,u){return S<u?-1:S>u?1:0}var d=function(S,u,l,h,r){for(l===void 0&&(l=0),h===void 0&&(h=S.length-1),r===void 0&&(r=i);h>l;){if(h-l>600){var o=h-l+1,p=u-l+1,a=Math.log(o),v=.5*Math.exp(2*a/3),x=.5*Math.sqrt(a*v*(o-v)/o)*(p-o/2<0?-1:1),g=Math.max(l,Math.floor(u-p*v/o+x)),y=Math.min(h,Math.floor(u+(o-p)*v/o+x));d(S,u,g,y,r)}var T=S[u],P=l,A=h;for(E(S,l,u),r(S[h],T)>0&&E(S,l,h);P<A;){for(E(S,P,A),P++,A--;r(S[P],T)<0;)P++;for(;r(S[A],T)>0;)A--}r(S[l],T)===0?E(S,l,A):(A++,E(S,A,h)),A<=u&&(l=A+1),u<=A&&(h=A-1)}};m.exports=d},88492:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(35154),S=i(33680),u=function(h,r,o){for(var p=[],a=0;a<h.length;a++)for(var v=0;v<r.length;v++)for(var x=0;x<o;x++)p.push({a:h[a],b:r[v]});return p},l=function(h,r,o){var p=d(o,"max",0),a=d(o,"qty",1),v=d(o,"random",!1),x=d(o,"randomB",!1),g=d(o,"repeat",0),y=d(o,"yoyo",!1),T=[];if(x&&S(r),g===-1)if(p===0)g=0;else{var P=h.length*r.length*a;y&&(P*=2),g=Math.ceil(p/P)}for(var A=0;A<=g;A++){var b=u(h,r,a);v&&S(b),T=T.concat(b),y&&(b.reverse(),T=T.concat(b))}return p&&T.splice(p),T};m.exports=l},72905:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(19133),S=function(u,l,h,r){r===void 0&&(r=u);var o;if(!Array.isArray(l))return o=u.indexOf(l),o!==-1?(d(u,o),h&&h.call(r,l),l):null;for(var p=l.length-1,a=[];p>=0;){var v=l[p];o=u.indexOf(v),o!==-1&&(d(u,o),a.push(v),h&&h.call(r,v)),p--}return a};m.exports=S},60248:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(19133),S=function(u,l,h,r){if(r===void 0&&(r=u),l<0||l>u.length-1)throw new Error("Index out of bounds");var o=d(u,l);return h&&h.call(r,o),o};m.exports=S},81409:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(82011),S=function(u,l,h,r,o){if(l===void 0&&(l=0),h===void 0&&(h=u.length),o===void 0&&(o=u),d(u,l,h)){var p=h-l,a=u.splice(l,p);if(r)for(var v=0;v<a.length;v++){var x=a[v];r.call(o,x)}return a}else return[]};m.exports=S},31856:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(19133),S=function(u,l,h){l===void 0&&(l=0),h===void 0&&(h=u.length);var r=l+Math.floor(Math.random()*h);return d(u,r)};m.exports=S},42169:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){var u=i.indexOf(d),l=i.indexOf(S);return u!==-1&&l===-1?(i[u]=S,!0):!1};m.exports=E},86003:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){d===void 0&&(d=1);for(var S=null,u=0;u<d;u++)S=i.shift(),i.push(S);return S};m.exports=E},49498:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){d===void 0&&(d=1);for(var S=null,u=0;u<d;u++)S=i.pop(),i.unshift(S);return S};m.exports=E},82011:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){var l=i.length;if(d<0||d>=l||d>=S||S>l){if(u)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};m.exports=E},89545:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){var S=i.indexOf(d);return S!==-1&&S>0&&(i.splice(S,1),i.unshift(d)),d};m.exports=E},17810:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(82011),S=function(u,l,h,r,o){if(r===void 0&&(r=0),o===void 0&&(o=u.length),d(u,r,o))for(var p=r;p<o;p++){var a=u[p];a.hasOwnProperty(l)&&(a[l]=h)}return u};m.exports=S},33680:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){for(var d=i.length-1;d>0;d--){var S=Math.floor(Math.random()*(d+1)),u=i[d];i[d]=i[S],i[S]=u}return i};m.exports=E},90126:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){var d=/\D/g;return i.sort(function(S,u){return parseInt(S.replace(d,""),10)-parseInt(u.replace(d,""),10)}),i};m.exports=E},19133:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){if(!(d>=i.length)){for(var S=i.length-1,u=i[d],l=d;l<S;l++)i[l]=i[l+1];return i.length=S,u}};m.exports=E},19186:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Angry Bytes (and contributors)
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(82264);function S(r,o){return String(r).localeCompare(o)}function u(r,o){var p=r.length;if(p<=1)return r;for(var a=new Array(p),v=1;v<p;v*=2){l(r,o,v,a);var x=r;r=a,a=x}return r}function l(r,o,p,a){var v=r.length,x=0,g=p*2,y,T,P,A,b;for(y=0;y<v;y+=g)for(T=y+p,P=T+p,T>v&&(T=v),P>v&&(P=v),A=y,b=T;;)if(A<T&&b<P)o(r[A],r[b])<=0?a[x++]=r[A++]:a[x++]=r[b++];else if(A<T)a[x++]=r[A++];else if(b<P)a[x++]=r[b++];else break}var h=function(r,o){if(o===void 0&&(o=S),!r||r.length<2)return r;if(d.features.stableSort)return r.sort(o);var p=u(r,o);return p!==r&&l(p,null,r.length,r),r};m.exports=h},25630:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){if(d===S)return i;var u=i.indexOf(d),l=i.indexOf(S);if(u<0||l<0)throw new Error("Supplied items must be elements of the same array");return i[u]=S,i[l]=d,i};m.exports=E},37105:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Matrix:i(54915),Add:i(71146),AddAt:i(51067),BringToTop:i(66905),CountAllMatching:i(21612),Each:i(95428),EachInRange:i(36914),FindClosestInSorted:i(81957),Flatten:i(43491),GetAll:i(46710),GetFirst:i(58731),GetRandom:i(26546),MoveDown:i(70864),MoveTo:i(69693),MoveUp:i(40853),MoveAbove:i(85835),MoveBelow:i(83371),NumberArray:i(20283),NumberArrayStep:i(593),QuickSelect:i(43886),Range:i(88492),Remove:i(72905),RemoveAt:i(60248),RemoveBetween:i(81409),RemoveRandomElement:i(31856),Replace:i(42169),RotateLeft:i(86003),RotateRight:i(49498),SafeRange:i(82011),SendToBack:i(89545),SetAll:i(17810),Shuffle:i(33680),SortByDigits:i(90126),SpliceOne:i(19133),StableSort:i(19186),Swap:i(25630)}},86922:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){if(!Array.isArray(i)||!Array.isArray(i[0]))return!1;for(var d=i[0].length,S=1;S<i.length;S++)if(i[S].length!==d)return!1;return!0};m.exports=E},63362:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(41836),S=i(86922),u=function(l){var h="";if(!S(l))return h;for(var r=0;r<l.length;r++){for(var o=0;o<l[r].length;o++){var p=l[r][o].toString();p!=="undefined"?h+=d(p,2):h+="?",o<l[r].length-1&&(h+=" |")}if(r<l.length-1){h+=`
`;for(var a=0;a<l[r].length;a++)h+="---",a<l[r].length-1&&(h+="+");h+=`
`}}return h};m.exports=u},92598:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i.reverse()};m.exports=E},21224:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){for(var d=0;d<i.length;d++)i[d].reverse();return i};m.exports=E},98717:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(37829),S=function(u){return d(u,180)};m.exports=S},44657:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(37829),S=function(u,l){l===void 0&&(l=1);for(var h=0;h<l;h++)u=d(u,90);return u};m.exports=S},37829:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(86922),S=i(2429),u=function(l,h){if(h===void 0&&(h=90),!d(l))return null;if(typeof h!="string"&&(h=(h%360+360)%360),h===90||h===-270||h==="rotateLeft")l=S(l),l.reverse();else if(h===-90||h===270||h==="rotateRight")l.reverse(),l=S(l);else if(Math.abs(h)===180||h==="rotate180"){for(var r=0;r<l.length;r++)l[r].reverse();l.reverse()}return l};m.exports=u},92632:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(37829),S=function(u,l){l===void 0&&(l=1);for(var h=0;h<l;h++)u=d(u,-90);return u};m.exports=S},69512:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(86003),S=i(49498),u=function(l,h,r){if(h===void 0&&(h=0),r===void 0&&(r=0),r!==0&&(r<0?d(l,Math.abs(r)):S(l,r)),h!==0)for(var o=0;o<l.length;o++){var p=l[o];h<0?d(p,Math.abs(h)):S(p,h)}return l};m.exports=u},2429:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){for(var d=i.length,S=i[0].length,u=new Array(S),l=0;l<S;l++){u[l]=new Array(d);for(var h=d-1;h>-1;h--)u[l][h]=i[h][l]}return u};m.exports=E},54915:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={CheckMatrix:i(86922),MatrixToString:i(63362),ReverseColumns:i(92598),ReverseRows:i(21224),Rotate180:i(98717),RotateLeft:i(44657),RotateMatrix:i(37829),RotateRight:i(92632),Translate:i(69512),TransposeMatrix:i(2429)}},71334:m=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=function(d,S){for(var u=new Uint8Array(d),l=u.length,h=S?"data:"+S+";base64,":"",r=0;r<l;r+=3)h+=E[u[r]>>2],h+=E[(u[r]&3)<<4|u[r+1]>>4],h+=E[(u[r+1]&15)<<2|u[r+2]>>6],h+=E[u[r+2]&63];return l%3===2?h=h.substring(0,h.length-1)+"=":l%3===1&&(h=h.substring(0,h.length-2)+"=="),h};m.exports=i},53134:m=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Uint8Array(256),d=0;d<E.length;d++)i[E.charCodeAt(d)]=d;var S=function(u){u=u.substr(u.indexOf(",")+1);var l=u.length,h=l*.75,r=0,o,p,a,v;u[l-1]==="="&&(h--,u[l-2]==="="&&h--);for(var x=new ArrayBuffer(h),g=new Uint8Array(x),y=0;y<l;y+=4)o=i[u.charCodeAt(y)],p=i[u.charCodeAt(y+1)],a=i[u.charCodeAt(y+2)],v=i[u.charCodeAt(y+3)],g[r++]=o<<2|p>>4,g[r++]=(p&15)<<4|a>>2,g[r++]=(a&3)<<6|v&63;return x};m.exports=S},65839:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={ArrayBufferToBase64:i(71334),Base64ToArrayBuffer:i(53134)}},91799:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Array:i(37105),Base64:i(65839),Objects:i(1183),String:i(31749),NOOP:i(29747),NULL:i(20242)}},41786:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){var d={};for(var S in i)Array.isArray(i[S])?d[S]=i[S].slice(0):d[S]=i[S];return d};m.exports=E},62644:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){var d,S,u;if(typeof i!="object"||i===null)return i;d=Array.isArray(i)?[]:{};for(u in i)S=i[u],d[u]=E(S);return d};m.exports=E},79291:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(41212),S=function(){var u,l,h,r,o,p,a=arguments[0]||{},v=1,x=arguments.length,g=!1;for(typeof a=="boolean"&&(g=a,a=arguments[1]||{},v=2),x===v&&(a=this,--v);v<x;v++)if((u=arguments[v])!=null)for(l in u)h=a[l],r=u[l],a!==r&&(g&&r&&(d(r)||(o=Array.isArray(r)))?(o?(o=!1,p=h&&Array.isArray(h)?h:[]):p=h&&d(h)?h:{},a[l]=S(g,p,r)):r!==void 0&&(a[l]=r));return a};m.exports=S},23568:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(75508),S=i(35154),u=function(l,h,r){var o=S(l,h,null);if(o===null)return r;if(Array.isArray(o))return d.RND.pick(o);if(typeof o=="object"){if(o.hasOwnProperty("randInt"))return d.RND.integerInRange(o.randInt[0],o.randInt[1]);if(o.hasOwnProperty("randFloat"))return d.RND.realInRange(o.randFloat[0],o.randFloat[1])}else if(typeof o=="function")return o(h);return o};m.exports=u},95540:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){var u=typeof i;return!i||u==="number"||u==="string"?S:i.hasOwnProperty(d)&&i[d]!==void 0?i[d]:S};m.exports=E},82840:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(35154),S=i(45319),u=function(l,h,r,o,p){p===void 0&&(p=r);var a=d(l,h,p);return S(a,r,o)};m.exports=u},35154:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){if(!i&&!u||typeof i=="number")return S;if(i&&i.hasOwnProperty(d))return i[d];if(u&&u.hasOwnProperty(d))return u[d];if(d.indexOf(".")!==-1){for(var l=d.split("."),h=i,r=u,o=S,p=S,a=!0,v=!0,x=0;x<l.length;x++)h&&h.hasOwnProperty(l[x])?(o=h[l[x]],h=h[l[x]]):a=!1,r&&r.hasOwnProperty(l[x])?(p=r[l[x]],r=r[l[x]]):v=!1;return a?o:v?p:S}else return S};m.exports=E},69036:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){for(var S=0;S<d.length;S++)if(!i.hasOwnProperty(d[S]))return!1;return!0};m.exports=E},1985:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){for(var S=0;S<d.length;S++)if(i.hasOwnProperty(d[S]))return!0;return!1};m.exports=E},97022:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return i.hasOwnProperty(d)};m.exports=E},41212:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){if(!i||typeof i!="object"||i.nodeType||i===i.window)return!1;try{if(i.constructor&&!{}.hasOwnProperty.call(i.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};m.exports=E},46975:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(41786),S=function(u,l){var h=d(u);for(var r in l)h.hasOwnProperty(r)||(h[r]=l[r]);return h};m.exports=S},269:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(41786),S=function(u,l){var h=d(u);for(var r in l)h.hasOwnProperty(r)&&(h[r]=l[r]);return h};m.exports=S},18254:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=i(97022),S=function(u,l){for(var h={},r=0;r<l.length;r++){var o=l[r];d(u,o)&&(h[o]=u[o])}return h};m.exports=S},61622:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S){if(!i||typeof i=="number")return!1;if(i.hasOwnProperty(d))return i[d]=S,!0;if(d.indexOf(".")!==-1){for(var u=d.split("."),l=i,h=i,r=0;r<u.length;r++)if(l.hasOwnProperty(u[r]))h=l,l=l[u[r]];else return!1;return h[u[u.length-1]]=S,!0}return!1};m.exports=E},1183:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Clone:i(41786),DeepCopy:i(62644),Extend:i(79291),GetAdvancedValue:i(23568),GetFastValue:i(95540),GetMinMaxValue:i(82840),GetValue:i(35154),HasAll:i(69036),HasAny:i(1985),HasValue:i(97022),IsPlainObject:i(41212),Merge:i(46975),MergeRight:i(269),Pick:i(18254),SetValue:i(61622)}},27902:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return i.replace(/%([0-9]+)/g,function(S,u){return d[Number(u)-1]})};m.exports=E},41836:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d,S,u){d===void 0&&(d=0),S===void 0&&(S=" "),u===void 0&&(u=3),i=i.toString();var l=0;if(d+1>=i.length)switch(u){case 1:i=new Array(d+1-i.length).join(S)+i;break;case 3:var h=Math.ceil((l=d-i.length)/2),r=l-h;i=new Array(r+1).join(S)+i+new Array(h+1).join(S);break;default:i=i+new Array(d+1-i.length).join(S);break}return i};m.exports=E},33628:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i,d){return d===0?i.slice(1):i.slice(0,d)+i.slice(d+1)};m.exports=E},27671:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i.split("").reverse().join("")};m.exports=E},45650:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var d=Math.random()*16|0,S=i==="x"?d:d&3|8;return S.toString(16)})};m.exports=E},35355:m=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(i){return i&&i[0].toUpperCase()+i.slice(1)};m.exports=E},31749:(m,E,i)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2025 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Format:i(27902),Pad:i(41836),RemoveAt:i(33628),Reverse:i(27671),UppercaseFirst:i(35355),UUID:i(45650)}}},M={};function R(m){var E=M[m];if(E!==void 0)return E.exports;var i=M[m]={exports:{}};return c[m](i,i.exports,R),i.exports}R.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var I=R(85454);return I})())})(yO);var Wtt=yO.exports;const ys=xO(Wtt),Xtt={setEventEmitter(L,n){return n===void 0&&(n=Phaser.Events.EventEmitter),this._privateEE=L===!0||L===void 0,this._eventEmitter=this._privateEE?new n:L,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit(L){return this._eventEmitter&&L&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},Htt=Phaser.Scene;var Lf=function(L){return L instanceof Htt},Ytt=function(L){return L==null||typeof L!="object"?null:Lf(L)?L:L.scene&&Lf(L.scene)?L.scene:L.parent&&L.parent.scene&&Lf(L.parent.scene)?L.parent.scene:null};const $tt=Phaser.Game;var SR=function(L){return L instanceof $tt},_tt=function(L){if(L==null||typeof L!="object")return null;if(SR(L))return L;if(SR(L.game))return L.game;if(Lf(L))return L.sys.game;if(Lf(L.scene))return L.scene.sys.game};const Ztt=Phaser.Utils.Objects.GetValue;class SO{constructor(n,c){this.setParent(n),this.isShutdown=!1,this.setEventEmitter(Ztt(c,"eventEmitter",!0)),this.parent&&(this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.once("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this))}shutdown(n){this.isShutdown||(this.parent&&(this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.off("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this)),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.game=void 0,this.isShutdown=!0)}destroy(n){this.shutdown(n)}onEnvDestroy(){this.destroy(!0)}onParentDestroy(n,c){this.destroy(c)}setParent(n){return this.parent=n,this.scene=Ytt(n),this.game=_tt(n),this}}Object.assign(SO.prototype,Xtt);const Ktt=Phaser.Cameras.Scene2D.BaseCamera;var Jtt=function(L){return L instanceof Ktt};const TO=Phaser.Geom.Rectangle;var Qtt=function(L,n,c){return Jtt(n)||(c=n,n=void 0),c===void 0?c=new TO:c===!0&&(c=jtt),n?L.scale.getViewPort(n,c):L.scale.getViewPort(c)},jtt=new TO,qtt=function(L){if(L.resize)return!0;if(!L.setSize)return!1;for(var n=0,c=TR.length;n<c;n++){var M=TR[n];if(M&&L instanceof M)return!1}return!0},TR=[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Mesh,Phaser.GameObjects.Shader,Phaser.GameObjects.Video],tet=function(L){if(L.displayWidth===void 0)return!1;for(var n=0,c=CR.length;n<c;n++){var M=CR[n];if(M&&L instanceof M)return!1}return!0},CR=[Phaser.GameObjects.BitmapText],eet=function(L,n,c){if(!(!L||n===void 0&&c===void 0))if(qtt(L)){var M,R;n===void 0?M=L.width:M=n/L.scaleX,c===void 0?R=L.height:R=c/L.scaleY,L.resize?L.resize(M,R):L.setSize(M,R)}else{var I=tet(L);n!==void 0&&(I?L.displayWidth=n:L.scaleX=n/L.width),c!==void 0&&(I?L.displayHeight=c:L.scaleY=c/L.height)}},iet=function(L,n,c,M){eet(c,L,n)};const zv=Phaser.Utils.Objects.GetValue;class set extends SO{constructor(n,c){super(n,{eventEmitter:!1}),this.viewport=void 0,this.resetFromJSON(c)}shutdown(n){this.isShutdown||(this.autoAnchor(!1),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(n))}resetFromJSON(n){n===void 0&&(n={});var c,M;n.x!==void 0?(c=null,M=n.x):n.left!==void 0?(c=0,M=n.left):n.right!==void 0?(c=1,M=n.right):n.centerX!==void 0&&(c=.5,M=n.centerX);var R,I;n.y!==void 0?(R=null,I=n.y):n.top!==void 0?(R=0,I=n.top):n.bottom!==void 0?(R=1,I=n.bottom):n.centerY!==void 0&&(R=.5,I=n.centerY);var m,E;M!==void 0&&(M=M.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),m=parseFloat(M[0])/100,E=M[1]===""?0:parseFloat(M[1]));var i,d;I!==void 0&&(I=I.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),i=parseFloat(I[0])/100,d=I[1]===""?0:parseFloat(I[1]));var S=n.width,u,l;S!==void 0&&(S=S.split("%"),u=parseFloat(S[0])/100,l=S[1]===""?0:parseFloat(S[1]));var h=n.height,r,o;h!==void 0&&(h=h.split("%"),r=parseFloat(h[0])/100,o=h[1]===""?0:parseFloat(h[1])),this.setAlign(c,R),this.setPercentage(m,i),this.setOffset(E,d),this.setSizePercentage(u,r),this.setSizePadding(l,o);var p=zv(n,"onResizeCallback",iet),a=zv(n,"onResizeCallbackScope");this.setResizeCallback(p,a);var v=zv(n,"onUpdateViewportCallback"),x=zv(n,"onUpdateViewportCallbackScope");return this.setUpdateViewportCallback(v,x),this.autoAnchor(n.enable),this}autoAnchor(n){return n===void 0&&(n=!0),n=!!n,this.autoAnchorEnable===n?this:(n?(this.scene.sys.scale.on("resize",this.anchor,this),this.anchor()):this.scene.sys.scale.off("resize",this.anchor,this),this.autoAnchorEnable=n,this)}setAlign(n,c){return this.alignX=n,this.alignY=c,this}setPercentage(n,c){return this.percentageX=n,this.percentageY=c,this}setOffset(n,c){return this.offsetX=n,this.offsetY=c,this}setSizePercentage(n,c){return this.percentageWidth=n,this.percentageHeight=c,this}setSizePadding(n,c){return this.paddingWidth=n,this.paddingHeight=c,this}setResizeCallback(n,c){return this.onResizeCallback=n,this.onResizeCallbackScope=c,this}setUpdateViewportCallback(n,c){return this.onUpdateViewportCallback=n,this.onUpdateViewportCallbackScope=c,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var n=this.onResizeCallback,c=this.onResizeCallbackScope,M=this.anchorWidth,R=this.anchorHeight;if(!(M===void 0&&R===void 0||!n)){var I=this.parent;M===void 0&&(M=I.width),R===void 0&&(R=I.height),c?n.call(c,M,R,I,this):n(M,R,I,this)}}updatePosition(){var n=this.parent;return this.alignX===null?n.x=this.anchorX:this.alignX!==void 0&&(n.x=this.anchorX+n.displayWidth*(n.originX-this.alignX)),this.alignY===null?n.y=this.anchorY:this.alignY!==void 0&&(n.y=this.anchorY+n.displayHeight*(n.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(this.percentageWidth!==void 0)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(this.percentageHeight!==void 0)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){var n=this.parent.scene.cameras.main;this.viewport=Qtt(this.scene,n,this.viewport);var c=this.viewport,M=this.onUpdateViewportCallback,R=this.onUpdateViewportCallbackScope;M&&(R?M.call(R,c,this.parent,this):M(c,this.parent,this))}}class net extends Phaser.Plugins.BasePlugin{constructor(n){super(n)}start(){var n=this.game.events;n.on("destroy",this.destroy,this)}add(n,c){return new set(n,c)}}var CO={exports:{}};(function(L,n){(function(c,M){L.exports=M()})(gO,function(){class c{constructor(t){this.scene=t,t.events.once("destroy",this.destroy,this)}destroy(){this.scene=null}static register(t,s){c.prototype[t]=s}}var M=function(e){return e===void 0&&(e=R),this.getFrameNameCallback=e,this},R=function(e,t,s){return s==="__BASE"?`${e},${t}`:`${s}:${e},${t}`};function I(e){if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(s=>I(s));if(e instanceof Date)return new Date(e);if(e instanceof RegExp)return new RegExp(e);if(Object.getPrototypeOf(e)!==Object.prototype)return e;const t={};for(let s in e)e.hasOwnProperty(s)&&(t[s]=I(e[s]));return t}var m=function(e,t,s,f){Array.isArray(t)&&(f=s,s=t,t=void 0),t==null&&(t="__BASE"),typeof s=="number"&&arguments.length>=6?(s=[arguments[2],void 0,arguments[3]],f=[arguments[4],void 0,arguments[5]]):s===void 0&&f===void 0&&this.columns.data!==void 0&&this.rows.data!==void 0?(s=this.columns.data,f=this.rows.data):(s=I(s),f=I(f)),this.textureKey=e,this.baseFrameName=t,this.columns.data=s,this.columns.count=s?s.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=f,this.rows.count=f?f.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var C=this.scene.sys.textures.get(e);if(!C)return this.clear(),this;if(!s||!f)return this.clear(),this;for(var w=C.get(t),F=w.width,N=0,z=0,H=s.length;z<H;z++)s[z]===void 0?N++:typeof s[z]=="number"?F-=s[z]:F-=s[z].width;for(var Z=N>0?F/N:0,tt=w.height,nt=0,z=0,H=f.length;z<H;z++)f[z]===void 0?nt++:typeof f[z]=="number"?tt-=f[z]:tt-=f[z].width;for(var st=nt?tt/nt:0,ht,ft,dt,gt,Et,yt=0,Dt=0,Wt=0,qt=f.length;Wt<qt;Wt++){f[Wt]===void 0&&(f[Wt]=st),typeof f[Wt]=="number"&&(f[Wt]={height:f[Wt],stretch:Wt%2}),ht=f[Wt],dt=ht.height,this.rows.stretch+=ht.stretch|0,this.rows.minHeight+=ht.stretch>0?0:dt,yt=0;for(var z=0,re=s.length;z<re;z++){if(s[z]===void 0&&(s[z]=Z),typeof s[z]=="number"&&(s[z]={width:s[z],stretch:z%2}),ft=s[z],gt=ft.width,Wt===0&&(this.columns.stretch+=ft.stretch|0,this.columns.minWidth+=ft.stretch>0?0:gt),gt>=1&&dt>=1){Et=this.getFrameNameCallback(z,Wt,t);var ce=typeof Et;(ce==="string"||ce==="number")&&C.add(Et,0,yt+w.cutX,Dt+w.cutY,gt,dt)}yt+=gt}Dt+=dt}return this.updateTexture(),this},E=function(){if(this.clear(),this.textureKey===void 0)return this;var e=this.scene.sys.textures.get(this.textureKey);if(!e)return this;var t=this.columns.minWidth*this.maxFixedPartScaleX,s=this.rows.minHeight*this.maxFixedPartScaleY,f=this.width-t,C=this.height-s,w=f>=0?this.maxFixedPartScaleX:this.width/t,F=C>=0?this.maxFixedPartScaleY:this.height/s;if(this.preserveRatio){var N=Math.min(w,F);if(w>N){var z=(w-N)*t;f>=0?f+=z:f=z,w=N}if(F>N){var H=(F-N)*s;C>=0?C+=H:C=H,F=N}}this.columns.scale=w,this.rows.scale=F;var Z;f>0?Z=this.columns.stretch>0?f/this.columns.stretch:0:Z=0;var tt;C>0?tt=this.rows.stretch>0?C/this.rows.stretch:0:tt=0;var nt,st,ht,ft,dt,gt=0,Et=0,yt;this._beginDraw();for(var Dt=0,Wt=this.rows.count;Dt<Wt;Dt++){ht=this.rows.data[Dt],dt=ht.stretch===0?ht.height*F:tt*ht.stretch,gt=0;for(var qt=0,re=this.columns.count;qt<re;qt++)st=this.columns.data[qt],ft=st.stretch===0?st.width*w:Z*st.stretch,nt=this.getFrameNameCallback(qt,Dt,this.baseFrameName),e.has(nt)&&ft>0&&dt>0&&(ht.stretch===0&&st.stretch===0||this.getStretchMode(qt,Dt)===0?yt=0:yt=1,yt===0?this._drawImage(this.textureKey,nt,gt,Et,ft,dt):this._drawTileSprite(this.textureKey,nt,gt,Et,ft,dt)),gt+=ft;Et+=dt}this._endDraw()};const i=Phaser.Utils.Objects.IsPlainObject,d=Phaser.Utils.Objects.GetValue;var S=function(e){return i(e)?(this.stretchMode.edge=u(d(e,"edge",0)),this.stretchMode.internal=u(d(e,"internal",0))):(e=u(e),this.stretchMode.edge=e,this.stretchMode.internal=e),this},u=function(e){return typeof e=="string"&&(e=l[e]),e};const l={scale:0,repeat:1};var h=function(e,t){return e===0||e===this.columns.count-1||t===0||t===this.rows.count-1},r=function(e,t){return h.call(this,e,t)?this.stretchMode.edge:this.stretchMode.internal},o=function(e){return e==null&&(e=!0),this.preserveRatio=e,this},p=function(e,t){return t===void 0&&(t=e),this.maxFixedPartScaleX=e,this.maxFixedPartScaleY=t,this},a=function(){},v={_beginDraw:a,_drawImage:a,_drawTileSprite:a,_endDraw:a,setGetFrameNameCallback:M,setBaseTexture:m,updateTexture:E,setStretchMode:S,getStretchMode:r,setPreserveRatio:o,setMaxFixedPartScale:p};const x=Phaser.Utils.Objects.IsPlainObject,g=Phaser.Utils.Objects.GetValue;var y=function(e,t){class s extends e{constructor(C,w,F,N,z,H,Z,tt,nt,st){if(x(w)?(st=w,w=g(st,"x",0),F=g(st,"y",0),N=g(st,"width",1),z=g(st,"height",1),H=g(st,"key",void 0),Z=g(st,"baseFrame",void 0),tt=g(st,"columns",void 0),nt=g(st,"rows",void 0)):x(N)?(st=N,N=g(st,"width",1),z=g(st,"height",1),H=g(st,"key",void 0),Z=g(st,"baseFrame",void 0),tt=g(st,"columns",void 0),nt=g(st,"rows",void 0)):x(H)?(st=H,H=g(st,"key",void 0),Z=g(st,"baseFrame",void 0),tt=g(st,"columns",void 0),nt=g(st,"rows",void 0)):x(Z)?(st=Z,Z=g(st,"baseFrame",void 0),tt=g(st,"columns",void 0),nt=g(st,"rows",void 0)):Array.isArray(Z)?(st=nt,nt=tt,tt=Z,Z=g(st,"baseFrame",void 0)):x(tt)&&(st=tt,tt=g(st,"columns",void 0),nt=g(st,"rows",void 0)),Z===void 0&&(Z=g(st,"frame",void 0)),tt===void 0){var ht=g(st,"leftWidth",void 0),ft=g(st,"rightWidth",void 0);ht!==void 0&&ft!==void 0&&(tt=[ht,void 0,ft])}if(nt===void 0){var dt=g(st,"topHeight",void 0),gt=g(st,"bottomHeight",void 0);dt!==void 0&&gt!==void 0&&(nt=[dt,void 0,gt])}super(C),this.type=t,this.setPosition(w,F).setSize(N,z).setOrigin(.5,.5),this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setGetFrameNameCallback(g(st,"getFrameNameCallback",void 0)),this.setStretchMode(g(st,"stretchMode",0)),this.setPreserveRatio(g(st,"preserveRatio",!0));var Et=g(st,"maxFixedPartScale",1),yt=g(st,"maxFixedPartScaleX",Et),Dt=g(st,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(yt,Dt),this.setBaseTexture(H,Z,tt,nt)}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(C,w){return this.width===C&&this.height===w?this:(super.resize?super.resize(C,w):super.setSize(C,w),this.updateTexture(),this)}get leftWidth(){return this.columns.data[0]}get rightWidth(){return this.columns.data[this.columns.count-1]}get topHeight(){return this.rows.data[0]}get bottomHeight(){return this.rows.data[this.rows.count-1]}}return Object.assign(s.prototype,v),s};const T=Phaser.Game;var P=function(e){return e instanceof T};const A=Phaser.Scene;var b=function(e){return e instanceof A},O=function(e){if(e==null||typeof e!="object")return null;if(P(e))return e;if(P(e.game))return e.game;if(b(e))return e.sys.game;if(b(e.scene))return e.scene.sys.game};const D=Phaser.GameObjects;var B=void 0,G=function(e,t){if(B||(B={},O(e).events.once("destroy",function(){for(var f in B)B[f].destroy();B=void 0})),!B.hasOwnProperty(t)){var s=O(e).scene.systemScene,e=new D[t](s);e.setOrigin(0),B[t]=e}return B[t]},V=function(e,t,s,f,C,w){var F=G(this,"Image").setTexture(e,t).setDisplaySize(C,w);this.draw(F,s,f)},k=function(e,t,s,f,C,w){var F=G(this,"TileSprite").setTexture(e,t).setSize(C,w);this.draw(F,s,f)};const U=Phaser.GameObjects.RenderTexture;let W=class extends y(U,"rexNinePatch"){};var X={_drawImage:V,_drawTileSprite:k};Object.assign(W.prototype,X);var _=function(e){return e==null||e===""||e.length===0},Q=function(e,t,s){var f=e;if(!_(t)){typeof t=="string"&&(t=t.split("."));for(var C,w=0,F=t.length;w<F;w++){if(C=t[w],f[C]==null||typeof f[C]!="object"){var N;w===F-1?N={}:N={},f[C]=N}f=f[C]}}return f},j=function(e,t,s,f){if(f===void 0&&(f="."),typeof e=="object"){if(_(t)){if(s==null)return;typeof s=="object"&&(e=s)}else{typeof t=="string"&&(t=t.split(f));var C=t.pop(),w=Q(e,t);w[C]=s}return e}};c.register("ninePatch",function(e,t,s,f,C,w,F,N){var z=new W(this.scene,e,t,s,f,C,w,F,N);return this.scene.add.existing(z),z}),j(window,"RexPlugins.UI.NinePatch",W);const it=Phaser.GameObjects.GetCalcMatrix;var K=function(e,t,s,f){var C=t.getRenderList();if(C.length!==0){s.addToRenderList(t);var w=e.pipelines.set(t.pipeline),F=t.frame.glTexture,N=w.setGameObject(t),z=s.roundPixels,H=it(t,s,f),Z=w.calcMatrix.copyFrom(H.calc),tt=t._displayOriginX,nt=t._displayOriginY,st=s.alpha*t.alpha;e.pipelines.preBatch(t);for(var ht=0,ft=C.length;ht<ft;ht++)C[ht].webglRender(w,Z,st,tt,nt,F,N,z);e.pipelines.postBatch(t)}};const J=Phaser.Renderer.Canvas.SetTransform;var Y=function(e,t,s,f){var C=e.currentContext,w=t.getRenderList();if(!(w.length===0||!J(e,C,t,s,f))){s.addToRenderList(t);var F=s.roundPixels,N=-t._displayOriginX,z=-t._displayOriginY;C.translate(N,z);for(var H=0,Z=w.length;H<Z;H++)w[H].canvasRender(C,N,z,F);C.restore()}},q={renderWebGL:K,renderCanvas:Y},$=function(e,t){return this.texture=this.scene.sys.textures.get(e),this.frame=this.texture.get(t),this},et=function(e,t){if(this.width===e&&this.height===t)return this;this.width=e,this.height=t,this.updateDisplayOrigin();var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=e,s.hitArea.height=t),this},rt=function(e){return this.lastAppendedChildren.length=0,Array.isArray(e)?(this.children.add(e),this.lastAppendedChildren.push(...e)):(this.children.add(e),this.lastAppendedChildren.push(e)),this};const at=Phaser.Utils.Array.Remove;var lt=function(e){return this.poolManager&&this.poolManager.free(e),at(this.children.list,e),this.lastAppendedChildren.length=0,this.dirty=!0,this},vt=function(){return this.poolManager&&this.poolManager.freeMultiple(this.children.list),this.children.list.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},xt=function(){return this.lastAppendedChildren},ut=function(){return this.children.list},mt={setTint(e){return this.tint=e,this.tintFill=!1,this},setTintFill(e){return this.tint=e,this.tintFill=!0,this},clearTint(){return this.setTint(16777215),this}},Tt={setTexture:$,resize:et,setSize:et,addChild:rt,removeChild:lt,removeChildren:vt,clear:vt,getLastAppendedChildren:xt,getChildren:ut};Object.assign(Tt,mt);class bt{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(t){return this.items.push(t),this}pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}clear(){return this.items.length=0,this}}const St=Phaser.Utils.Objects.GetValue;var Gt={};let Nt=class{constructor(t){this.pools=St(t,"pools",Gt)}destroy(){this.pools=void 0}free(t){if(!this.pools)return this;var s=t.type;return this.pools.hasOwnProperty(s)||(this.pools[s]=new bt),this.pools[s].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var s=0,f=t.length;s<f;s++)this.free(t[s]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}};const zt=60;var Lt=!1,ct=function(e){if(!Lt){e===void 0&&(e=zt);var t=Phaser.VERSION.split("."),s=parseInt(t[0]);if(s===3){var f=parseInt(t[1]);f<e&&console.error(`Minimum supported version : ${s}.${f}`)}else console.error(`Can't supported version : ${s}`);Lt=!0}};ct();const ot=Phaser.GameObjects.GameObject,Mt=Phaser.Utils.Objects.IsPlainObject,Ot=Phaser.Utils.Objects.GetValue,Ut=Phaser.Structs.List,Rt=Phaser.Utils.Array.StableSort;class _t extends ot{constructor(t,s,f,C,w,F){Mt(s)&&(F=s,s=Ot(F,"x",0),f=Ot(F,"y",0),C=Ot(F,"texture"),w=Ot(F,"frame")),s===void 0&&(s=0),f===void 0&&(f=0),super(t,"rexBlitter"),this.children=new Ut,this.renderList=[],this.displayListDirty=!1,this.lastAppendedChildren=[];var N=Ot(F,"reuseBob",!0);this.poolManager=N?new Nt(F):void 0,this.setTexture(C,w),this.setPosition(s,f),this.setOrigin(0,0),this.clearTint(),this.initPipeline(),this.initPostPipeline()}preDestroy(){this.removeChildren(),this.children.destroy(),this.renderList.length=0,this.poolManager&&this.poolManager.destroy()}getRenderList(){if(this.displayListDirty){this.renderList.length=0;for(var t=!1,s=this.children.list,f=0,C=s.length;f<C;f++){var w=s[f];Yt(w)&&(this.renderList.push(w),t||(t=w.depth!==0))}t&&Rt(this.renderList,ee),this.displayListDirty=!1}return this.renderList}}var Yt=function(e){return e.active&&e.visible&&e.alpha>0},ee=function(e,t){return e._depth-t._depth};const $t=Phaser.GameObjects.Components;Phaser.Class.mixin(_t,[$t.Alpha,$t.BlendMode,$t.ComputedSize,$t.Depth,$t.GetBounds,$t.Mask,$t.Origin,$t.Pipeline,$t.PostPipeline,$t.ScrollFactor,$t.Transform,$t.Visible,q,Tt]);const kt="image";var Vt=function(e,t,s){if(!e||typeof e=="number")return s;if(typeof t=="string"){if(e.hasOwnProperty(t))return e[t];if(t.indexOf(".")!==-1)t=t.split(".");else return s}for(var f=t,C=e,w=s,F=0;F<f.length;F++)if(t=f[F],C.hasOwnProperty(t))w=C[t],C=w;else{w=s;break}return w},ne=function(e){if(typeof e!="object"||e===null)return e;if(Array.isArray(e))e.length=0;else for(var t in e)delete e[t];return e},le={enableData(){return this.data===void 0&&(this.data={}),this},setData(e,t){if(this.enableData(),arguments.length===1){var s=e;for(e in s)this.data[e]=s[e]}else this.data[e]=t;return this},getData(e,t){return this.enableData(),e===void 0?this.data:Vt(this.data,e,t)},incData(e,t,s){return s===void 0&&(s=0),this.enableData(),this.setData(e,this.getData(e,s)+t),this},mulData(e,t,s){return s===void 0&&(s=0),this.enableData(),this.setData(e,this.getData(e,s)*t),this},clearData(){return this.data&&ne(this.data),this}};let te=class{constructor(t,s){this.type=s,this.data=void 0,this.setParent(t).reset().setActive()}destroy(){this.parent&&this.parent.removeChild(this)}setParent(t){return this.parent=t,this}setDisplayListDirty(t){return t&&this.parent&&(this.parent.displayListDirty=!0),this}get active(){return this._active}set active(t){this.setDisplayListDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}reset(){this.clearData()}onFree(){this.reset().setActive(!1).setParent()}};Object.assign(te.prototype,le);const xe=Phaser.Math.DegToRad,Ct=Phaser.Math.RadToDeg,jt=Phaser.Utils.Objects.GetValue;let Zt=class extends te{get visible(){return this._visible}set visible(t){this.setDisplayListDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDisplayListDirty(!!this._alpha!=!!t),this._alpha=t}setAlpha(t){return this.alpha=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setPosition(t,s){return this.x=t,this.y=s,this}setRotation(t){return this.rotation=t,this}get angle(){return Ct(this.rotation)}set angle(t){this.rotation=xe(t)}setAngle(t){return this.angle=t,this}setScaleX(t){return this.scaleX=t,this}get width(){return this._width}set width(t){this._width=t}setWidth(t,s){return s===void 0&&(s=!1),this.width=t,s&&(this.scaleY=this.scaleX),this}setScaleY(t){return this.scaleY=t,this}setScale(t,s){return s===void 0&&(s=t),this.scaleX=t,this.scaleY=s,this}get height(){return this._height}set height(t){this._height=t}setHeight(t,s){return s===void 0&&(s=!1),this.height=t,s&&(this.scaleX=this.scaleY),this}setScale(t,s){return s===void 0&&(s=t),this.scaleX=t,this.scaleY=s,this}get displayWidth(){return this._width*this.scaleX}set displayWidth(t){this.scaleX=t/this._width}setDisplayWidth(t,s){return s===void 0&&(s=!1),this.displayWidth=t,s&&(this.scaleY=this.scaleX),this}get displayHeight(){return this._height*this.scaleY}set displayHeight(t){this.scaleY=t/this._height}setDisplayHeight(t,s){return s===void 0&&(s=!1),this.displayHeight=t,s&&(this.scaleX=this.scaleY),this}setOriginX(t){return this.originX=t,this._displayOriginX=this.width*t,this}setOriginY(t){return this.originY=t,this._displayOriginY=this.height*t,this}setOrigin(t,s){return s===void 0&&(s=t),this.setOriginX(t).setOriginY(s),this}get depth(){return this._depth}set depth(t){this.setDisplayListDirty(this._depth!=t),this._depth=t}setDepth(t){return t===void 0&&(t=0),this.depth=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var s=jt(t,"width",void 0),f=jt(t,"height",void 0),C=jt(t,"scale",void 0),w=jt(t,"scaleX",C),F=jt(t,"scaleY",C);s!==void 0?f===void 0&&F===void 0?this.setWidth(s,!0):this.setWidth(s):w!==void 0?this.setScaleX(w):t.hasOwnProperty("displayWidth")&&this.setDisplayWidth(t.displayWidth),f!==void 0?s===void 0&&w===void 0?this.setHeight(f,!0):this.setHeight(f):F!==void 0?this.setScaleY(F):t.hasOwnProperty("displayHeight")&&this.setDisplayHeight(t.displayHeight);var N=jt(t,"origin",void 0);return N!==void 0?this.setOrigin(N):(t.hasOwnProperty("originX")&&this.setOriginX(t.originX),t.hasOwnProperty("originY")&&this.setOriginY(t.originY)),t.hasOwnProperty("depth")&&this.setDepth(t.depth),this}reset(){return super.reset(),this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setOrigin(0).setDepth(0),this}webglRender(t,s,f,C,w,F,N,z){}canvasRender(t,s,f,C){}};const oe=Phaser.GameObjects.Components.TransformMatrix,Jt=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;var Xt=new oe,ue=function(e,t,s,f,C,w,F,N){var z=this.frame;if(z){var H=this._width,Z=this._height,tt=H*this.originX,nt=Z*this.originY,st=this.x-f,ht=this.y-C,ft,dt,gt,Et,yt,Dt,Wt,qt;if(this.isCropped){var re=this._crop;(re.flipX!==this.flipX||re.flipY!==this.flipY)&&z.updateCropUVs(re,this.flipX,this.flipY),ft=re.u0,dt=re.v0,gt=re.u1,Et=re.v1,Wt=re.width,qt=re.height,yt=re.x,Dt=re.y}else ft=this.frame.u0,dt=this.frame.v0,gt=this.frame.u1,Et=this.frame.v1,Wt=H,qt=Z,yt=0,Dt=0;var ce=1,fe=1;this.flipX&&(st+=H-tt*2,ce=-1),this.flipY&&(ht+=Z-nt*2,fe=-1),Xt.applyITRS(st,ht,this.rotation,this.scaleX*ce,this.scaleY*fe),t.multiply(Xt,Xt);var ye=-tt+yt,ge=-nt+Dt,Ue=ye+Wt,ze=ge+qt,me=Xt.setQuad(ye,ge,Ue,ze,N),li=Jt(this.tint,this.alpha*s);e.batchQuad(this.parent,me[0],me[1],me[2],me[3],me[4],me[5],me[6],me[7],ft,dt,gt,Et,li,li,li,li,this.tintFill,w,F)}},Pe=function(e,t,s,f){var C=this.frame;if(C){e.save();var w=this._width,F=this._height,N=w*this.originX,z=F*this.originY,H=this.x-N,Z=this.y-z,tt,nt,st,ht;if(this.isCropped){var ft=this._crop;(ft.flipX!==this.flipX||ft.flipY!==this.flipY)&&C.updateCropUVs(ft,this.flipX,this.flipY),st=ft.cw,ht=ft.ch,tt=ft.cx,nt=ft.cy}else st=C.cutWidth,ht=C.cutHeight,tt=C.cutX,nt=C.cutY;var dt=1,gt=1;this.flipX&&(H+=w,dt=-1),this.flipY&&(Z+=F,gt=-1);var Et=C.source.resolution,yt=st/Et,Dt=ht/Et;f&&(H=Math.floor(H+.5),Z=Math.floor(Z+.5),yt+=.5,Dt+=.5),e.translate(H,Z),e.rotate(this.rotation),e.scale(this.scaleX*dt,this.scaleY*gt),e.drawImage(C.source.image,tt,nt,st,ht,0,0,yt,Dt),e.restore()}};const ai=Phaser.Utils.Objects.IsPlainObject;let Je=class extends Zt{constructor(t,s){super(t,kt),this._crop=on(),this.setFrame(s)}get width(){return this._width}set width(t){}get height(){return this._height}set height(t){}setFrame(t){return arguments.length>0&&!ai(t)&&(t=this.parent.texture.get(t)),this.frame=t,t?(this._width=t.realWidth,this._height=t.realHeight):(this._width=0,this._height=0),this}setFlipX(t){return t===void 0&&(t=!0),this.flipX=t,this}setFlipY(t){return t===void 0&&(t=!0),this.flipY=t,this}resetFlip(){return this.flipX=!1,this.flipY=!1,this}get tint(){return this._tint===void 0?this.parent.tint:this._tint}set tint(t){this._tint=t}setTint(t){return this.tint=t,this.tintFill=!1,this}setTintFill(t){return this.tint=t,this.tintFill=!0,this}clearTint(){return this.setTint(16777215),this}resetTint(){return this.tint=void 0,this.tintFill=void 0,this}get tintFill(){return this._tintFill===void 0?this.parent.tintFill:this._tintFill}set tintFill(t){this._tintFill=t}setCrop(t,s,f,C){return t===void 0?(this.isCropped=!1,this):this.frame?t===0&&s===0&&f===this._width&&C===this._height?(this.isCropped=!1,this):(this.frame.setCropUVs(this._crop,t,s,f,C,this.flipX,this.flipY),this.isCropped=!0,this):this}reset(){return super.reset(),this.resetFlip().resetTint().setFrame().setCrop(),this}modifyPorperties(t){return t?(t.hasOwnProperty("width")&&(t.displayWidth=t.width,delete t.width),t.hasOwnProperty("height")&&(t.displayHeight=t.height,delete t.height),t.hasOwnProperty("frame")&&this.setFrame(t.frame),super.modifyPorperties(t),t.hasOwnProperty("flipX")&&this.setFlipX(t.flipX),t.hasOwnProperty("flipY")&&this.setFlipY(t.flipY),t.hasOwnProperty("tint")&&this.setTint(t.tint),t.hasOwnProperty("tintFill")&&this.setTintFill(t.tintFill),this):this}};var on=function(e){return e===void 0&&(e={}),e.u0=0,e.v0=0,e.u1=0,e.v1=0,e.x=0,e.y=0,e.width=0,e.height=0,e.flipX=!1,e.flipY=!1,e.cx=0,e.cy=0,e.cw=0,e.ch=0,e},_n={webglRender:ue,canvasRender:Pe};Object.assign(Je.prototype,_n);var Yu=function(e,t){typeof t=="string"&&(t={frame:t});var s=e.poolManager?e.poolManager.allocate(kt):null;return s===null?s=new Je(e):s.setParent(e).setActive(),s.modifyPorperties(t),e.addChild(s),s},hc=function(e,t,s,f,C,w){Yu(this,{frame:t,x:s,y:f,width:C,height:w})},qr=function(e,t,s,f,C,w){var F=this.texture.get(t),N=F.width,z=F.height,H=C%N,Z=w%z;H===0&&(H=N),Z===0&&(Z=z);for(var tt=Math.ceil(C/N),nt=Math.ceil(w/z),st=tt-1,ht=nt-1,ft=0;ft<tt;ft++)for(var dt=0;dt<nt;dt++){let yt=Yu(this,{frame:t,x:s+ft*N,y:f+dt*z});var gt=ft===st?H:N,Et=dt===ht?Z:z;(gt!==N||Et!==z)&&yt.setCrop(0,0,gt,Et)}},$u={_drawImage:hc,_drawTileSprite:qr};class jh extends y(_t,"rexNinePatch2"){setBaseTexture(t,s,f,C){return this.setTexture(t,s),super.setBaseTexture(t,s,f,C),this}}Object.assign(jh.prototype,$u),c.register("ninePatch2",function(e,t,s,f,C,w,F,N){var z=new jh(this.scene,e,t,s,f,C,w,F,N);return this.scene.add.existing(z),z}),j(window,"RexPlugins.UI.NinePatch2",jh);var lc=Phaser.Renderer.WebGL.Utils,Vo=function(e,t,s,f,C,w){for(var F=lc.getTintAppendFloatAlpha(s.fillColor,s.fillAlpha*f),N=s.pathData,z=s.pathIndexes,H=0;H<z.length;H+=3){var Z=z[H]*2,tt=z[H+1]*2,nt=z[H+2]*2,st=N[Z+0]-C,ht=N[Z+1]-w,ft=N[tt+0]-C,dt=N[tt+1]-w,gt=N[nt+0]-C,Et=N[nt+1]-w,yt=t.getX(st,ht),Dt=t.getY(st,ht),Wt=t.getX(ft,dt),qt=t.getY(ft,dt),re=t.getX(gt,Et),ce=t.getY(gt,Et);e.batchTri(s,yt,Dt,Wt,qt,re,ce,0,0,1,1,F,F,F,2)}},uc=Phaser.Renderer.WebGL.Utils,ta=function(e,t,s,f,C){var w=e.strokeTint,F=uc.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*s);w.TL=F,w.TR=F,w.BL=F,w.BR=F;var N=t.pathData,z=N.length-1,H=t.lineWidth,Z=H/2,tt=N[0]-f,nt=N[1]-C;t.closePath||(z-=2);for(var st=2;st<z;st+=2){var ht=N[st]-f,ft=N[st+1]-C;e.batchLine(tt,nt,ht,ft,Z,Z,H,st-2,t.closePath?st===z-1:!1),tt=ht,nt=ft}};const dc=Phaser.GameObjects.GetCalcMatrix;var fc=function(e,t,s,f){t.dirty&&(t.updateData(),t.dirty=!1),s.addToRenderList(t);var C=e.pipelines.set(t.pipeline),w=dc(t,s,f),F=C.calcMatrix.copyFrom(w.calc),N=t._displayOriginX,z=t._displayOriginY,H=s.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&Vo(C,F,t,H,N,z),t.isStroked&&ta(C,t,H,N,z),e.pipelines.postBatch(t)},zo=function(e,t,s,f){var C=t.fillColor,w=t.fillAlpha,F=(C&16711680)>>>16,N=(C&65280)>>>8,z=C&255;e.fillStyle="rgba("+F+","+N+","+z+","+w+")"},Wo=function(e,t,s,f){var C=t.strokeColor,w=t.strokeAlpha,F=(C&16711680)>>>16,N=(C&65280)>>>8,z=C&255;e.strokeStyle="rgba("+F+","+N+","+z+","+w+")",e.lineWidth=t.lineWidth};const Sg=Phaser.Renderer.Canvas.SetTransform;var Tg=function(e,t,s,f){t.dirty&&(t.updateData(),t.dirty=!1),s.addToRenderList(t);var C=e.currentContext;if(Sg(e,C,t,s,f)){var w=t._displayOriginX,F=t._displayOriginY,N=t.pathData,z=N.length-1,H=N[0]-w,Z=N[1]-F;C.beginPath(),C.moveTo(H,Z),t.closePath||(z-=2);for(var tt=2;tt<z;tt+=2){var nt=N[tt]-w,st=N[tt+1]-F;C.lineTo(nt,st)}C.closePath(),t.isFilled&&(zo(C,t),C.fill()),t.isStroked&&(Wo(C,t),C.stroke()),C.restore()}},Cg={renderWebGL:fc,renderCanvas:Tg};const Mg=Phaser.GameObjects.Shape;class pt extends Mg{get fillColor(){return this._fillColor}set fillColor(t){this._fillColor=t,this.isFilled=t!=null&&this._fillAlpha>0}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this._fillAlpha=t,this.isFilled=t>0&&this._fillColor!=null}setFillStyle(t,s){return s===void 0&&(s=1),this.fillColor=t,this.fillAlpha=s,this}get strokeColor(){return this._strokeColor}set strokeColor(t){this._strokeColor=t,this.isStroked=t!=null&&this._strokeAlpha>0&&this._lineWidth>0}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this._strokeAlpha=t,this.isStroked=t>0&&this._strokeColor!=null&&this._lineWidth>0}get lineWidth(){return this._lineWidth}set lineWidth(t){this._lineWidth=t,this.isStroked=t>0&&this._strokeColor!=null}setStrokeStyle(t,s,f){return f===void 0&&(f=1),this.lineWidth=t,this.strokeColor=s,this.strokeAlpha=f,this}updateData(){return this}get width(){return this.geom.width}set width(t){this.resize(t,this.height)}get height(){return this.geom.height}set height(t){this.resize(this.width,t)}setSize(t,s){var f=this.input;return f&&!f.customHitArea&&(f.hitArea.width=t,f.hitArea.height=s),this}resize(t,s){return this.setSize(t,s),this}}Object.assign(pt.prototype,Cg);const Pt=Phaser.Utils.Objects.GetValue;let Ft=class{constructor(t,s,f,C,w){t===void 0&&(t=0),s===void 0&&(s=t),f===void 0&&(f=0),C===void 0&&(C=0),w===void 0&&(w=0),this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,s,f,C,w)}setTo(t,s,f,C,w){return this.setPosition(t,s),this.setRadius(w),this.setSize(f,C),this}setPosition(t,s){return this.x=t,this.y=s,this}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setSize(t,s){return this.width=t,this.height=s,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){t==null&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){t==null&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}set radius(t){var s,f;typeof t=="number"?(s=t,f=t):(s=Pt(t,"x",0),f=Pt(t,"y",0));var C=this.cornerRadius;C.tl=Bt(Pt(t,"tl",void 0),s,f),C.tr=Bt(Pt(t,"tr",void 0),s,f),C.bl=Bt(Pt(t,"bl",void 0),s,f),C.br=Bt(Pt(t,"br",void 0),s,f)}get radiusTL(){var t=this.cornerRadius.tl;return Math.max(t.x,t.y)}set radiusTL(t){At(this.cornerRadius.tl,t)}get radiusTR(){var t=this.cornerRadius.tr;return Math.max(t.x,t.y)}set radiusTR(t){At(this.cornerRadius.tr,t)}get radiusBL(){var t=this.cornerRadius.bl;return Math.max(t.x,t.y)}set radiusBL(t){At(this.cornerRadius.bl,t)}get radiusBR(){var t=this.cornerRadius.br;return Math.max(t.x,t.y)}set radiusBR(t){At(this.cornerRadius.br,t)}};var Bt=function(e,t,s){return e===void 0?e={x:t,y:s}:typeof e=="number"&&(e={x:e,y:e}),Qt(e),e},At=function(e,t){typeof t=="number"?(e.x=t,e.y=t):(e.x=Pt(t,"x",0),e.y=Pt(t,"y",0)),Qt(e)},Qt=function(e){e.convex=e.x>=0||e.y>=0,e.x=Math.abs(e.x),e.y=Math.abs(e.y)},Kt=function(e){return e.x>0&&e.y>0},ie=function(e,t,s){var f=s.length;if(f>=2){var C=s[f-2],w=s[f-1];if(e===C&&t===w)return s}return s.push(e,t),s};const ae=Phaser.Math.DegToRad;var he=function(e,t,s,f,C,w,F,N,z){F&&w>C?w-=360:!F&&w<C&&(w+=360);var H=w-C,Z=ae(H)/N;C=ae(C);for(var tt=0;tt<=N;tt++){var nt=C+Z*tt,st=e+s*Math.cos(nt),ht=t+f*Math.sin(nt);ie(st,ht,z)}return z};const Ee=Phaser.Utils.Objects.IsPlainObject,pe=Phaser.Utils.Objects.GetValue,Be=Phaser.Geom.Polygon.Earcut;let Ge=class extends pt{constructor(t,s,f,C,w,F,N,z){var H,Z,tt,nt;if(Ee(s)){var st=s;s=st.x,f=st.y,C=st.width,w=st.height,F=st.radius,N=st.color,z=st.alpha,H=st.strokeColor,Z=st.strokeAlpha,tt=st.strokeWidth,nt=st.shape}s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=1),w===void 0&&(w=C),F===void 0&&(F=0),nt===void 0&&(nt=0);var ht=new Ft;if(super(t,"rexRoundRectangleShape",ht),this.setShapeType(nt),this.shapeType===0){var ft=pe(F,"radius",F);ht.setTo(0,0,C,w,ft)}else{var ft={x:C/2,y:w/2};ht.setTo(0,0,C,w,ft)}this.setIteration(pe(F,"iteration",void 0)),this.setPosition(s,f),this.setFillStyle(N,z),tt===void 0&&(tt=2),this.setStrokeStyle(tt,H,Z),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var t=this.geom,s=this.pathData;s.length=0;var f=t.width,C=t.height,w=t.cornerRadius,F,N=this.iteration+1;if(F=w.tl,Kt(F))if(F.convex){var z=F.x,H=F.y;he(z,H,F.x,F.y,180,270,!1,N,s)}else{var z=0,H=0;he(z,H,F.x,F.y,90,0,!0,N,s)}else ie(0,0,s);if(F=w.tr,Kt(F))if(F.convex){var z=f-F.x,H=F.y;he(z,H,F.x,F.y,270,360,!1,N,s)}else{var z=f,H=0;he(z,H,F.x,F.y,180,90,!0,N,s)}else ie(f,0,s);if(F=w.br,Kt(F))if(F.convex){var z=f-F.x,H=C-F.y;he(z,H,F.x,F.y,0,90,!1,N,s)}else{var z=f,H=C;he(z,H,F.x,F.y,270,180,!0,N,s)}else ie(f,C,s);if(F=w.bl,Kt(F))if(F.convex){var z=F.x,H=C-F.y;he(z,H,F.x,F.y,90,180,!1,N,s)}else{var z=0,H=C;he(z,H,F.x,F.y,360,270,!0,N,s)}else ie(0,C,s);return s.push(s[0],s[1]),this.pathIndexes=Be(s),this}setShapeType(t){return typeof t=="string"&&(t=xi[t]),this.shapeType=t,this}setSize(t,s){return s===void 0&&(s=t),this.geom.width===t&&this.geom.height===s?this:(this.geom.setSize(t,s),this.shapeType===1&&this.setRadius({x:t/2,y:s/2}),this.updateDisplayOrigin(),this.dirty=!0,super.setSize(t,s),this)}get radius(){return this.geom.radius}set radius(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(t){this.geom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(t){this.geom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(t){this.geom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(t){this.geom.radiusBR=t,this.dirty=!0}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setRadiusTL(t){return t===void 0&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return t===void 0&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return t===void 0&&(t=0),this.radiusBL=t,this}setRadiusBR(t){return t===void 0&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}get iteration(){return this._iteration}set iteration(t){if(this._iteration===void 0){this._iteration=t;return}this._iteration!==t&&(this._iteration=t,this.dirty=!0)}setIteration(t){return t===void 0&&(t=6),this.iteration=t,this}};const xi={rectangle:0,circle:1};c.register("roundRectangle",function(e,t,s,f,C,w,F){var N=new Ge(this.scene,e,t,s,f,C,w,F);return this.scene.add.existing(N),N}),j(window,"RexPlugins.UI.RoundRectangle",Ge);const oi=Phaser.Renderer.WebGL.Utils;var qe=function(e,t,s,f){if(t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)){s.addToRenderList(t);var C=t.frame,w=C.width,F=C.height,N=oi.getTintAppendFloatAlpha,z=e.pipelines.set(t.pipeline,t),H=z.setTexture2D(C.glTexture,t);e.pipelines.preBatch(t),z.batchTexture(t,C.glTexture,w,F,t.x,t.y,w/t.resolution,F/t.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,w,F,N(t.tintTopLeft,s.alpha*t._alphaTL),N(t.tintTopRight,s.alpha*t._alphaTR),N(t.tintBottomLeft,s.alpha*t._alphaBL),N(t.tintBottomRight,s.alpha*t._alphaBR),t.tintFill,0,0,s,f,!1,H),e.pipelines.postBatch(t)}},Se=function(e,t,s,f){t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)&&(s.addToRenderList(t),e.batchSprite(t,t.frame,s,f))},vi={renderWebGL:qe,renderCanvas:Se};const He=Phaser.Display.Color;var Fs={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(e){return this.context.fillStyle=e,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},drawFrame(e,t,s,f,C,w,F,N,z,H){var Z=this.scene.sys.textures.getFrame(e,t);if(!Z)return this;var tt=Z.cutWidth,nt=Z.cutHeight;s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=tt),w===void 0&&(w=nt),F===void 0&&(F=0),N===void 0&&(N=0),z===void 0&&(z=tt),H===void 0&&(H=nt);var st=Z.cutX+F,ht=Z.cutY+N;return this.context.drawImage(Z.source.image,st,ht,z,H,s,f,C,w),this.dirty=!0,this},getDataURL(e,t){return this.canvas.toDataURL(e,t)},getPixel(e,t,s){s===void 0&&(s=new He);var f=this.context.getImageData(e,t,1,1);return s.setTo(f.data[0],f.data[1],f.data[2],f.data[3]),s},setPixel(e,t,s,f,C,w){if(typeof s!="number"){var F=s;s=F.red,f=F.green,C=F.blue,w=F.alpha}w===void 0&&(w=s!==0||f!==0||C!==0?255:0);var N=this.context.createImageData(1,1);return N.data[0]=s,N.data[1]=f,N.data[2]=C,N.data[3]=w,this.context.putImageData(N,e,t),this.dirty=!0,this}},ea=function(e,t,s,f,C,w,F){var N=e.sys.textures,z=e.renderer;f===void 0&&(f=0),C===void 0&&(C=0),w===void 0&&(w=t.width),F===void 0&&(F=t.height);var H;N.exists(s)?H=N.get(s):H=N.createCanvas(s,w,F);var Z=H.getSourceImage();Z.width!==w&&(Z.width=w),Z.height!==F&&(Z.height=F);var tt=Z.getContext("2d",{willReadFrequently:!0});tt.clearRect(0,0,w,F),tt.drawImage(t,f,C,w,F),z.gl&&H&&z.canvasToTexture(Z,H.source[0].glTexture,!0,0)},Ds={updateTexture(e,t){if(e){var s=this.resolution;s!==1&&(this.context.save(),this.context.scale(s,s)),t?e.call(t,this.canvas,this.context):e(this.canvas,this.context),s!==1&&this.context.restore()}(this.canvas.width!==this.frame.width||this.canvas.height!==this.frame.height)&&this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture.spectorMetadata={textureKey:"Canvas Game Object"}),this.dirty=!1;var f=this.input;return f&&!f.customHitArea&&(f.hitArea.width=this.width,f.hitArea.height=this.height),this},generateTexture(e,t,s,f,C){var w=this.canvas;return f===void 0?f=w.width:f*=this.resolution,C===void 0?C=w.height:C*=this.resolution,ea(this.scene,w,e,t,s,f,C),this},loadTexture(e,t){var s=this.scene.sys.textures.getFrame(e,t);return s?(this.width!==s.cutWidth||this.height!==s.cutHeight?this.setSize(s.cutWidth,s.cutHeight):this.clear(),this.drawFrame(e,t),this.dirty=!0,this):this}};ct();const Va=Phaser.Display.Canvas.CanvasPool,ui=Phaser.GameObjects.GameObject,Zs=Phaser.Utils.String.UUID;let Ni=class extends ui{constructor(t,s,f,C,w,F){s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=1),w===void 0&&(w=1),F===void 0&&(F=1),super(t,"rexCanvas"),this.renderer=t.sys.game.renderer,this._width=C,this._height=w,this.resolution=F,C=Math.max(Math.ceil(C*this.resolution),1),w=Math.max(Math.ceil(w*this.resolution),1),this.canvas=Va.create(this,C,w),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.dirty=!1,this.setPosition(s,f),this.setOrigin(.5,.5),this.initPipeline(),this.initPostPipeline(!0),this._crop=this.resetCropObject(),this._textureKey=Zs(),this.texture=t.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0}preDestroy(){Va.remove(this.canvas),this.canvas=null,this.context=null;var t=this.texture;t&&t.destroy()}setResolution(t){if(this.resolution===t)return this;this.resolution=t;var s=Math.max(Math.ceil(this.width*t),1),f=Math.max(Math.ceil(this.height*t),1);return this.canvas.width=s,this.canvas.height=f,this.frame.source.resolution=t,this.dirty=!0,this}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setCanvasSize(t,s){return this._width===t&&this._height===s?this:(this._width=t,this._height=s,this.updateDisplayOrigin(),t=Math.max(Math.ceil(t*this.resolution),1),s=Math.max(Math.ceil(s*this.resolution),1),this.canvas.width=t,this.canvas.height=s,this.frame.setSize(t,s),this.dirty=!0,this)}setSize(t,s){return this.setCanvasSize(t,s),this}get displayWidth(){return this.scaleX*this._width}set displayWidth(t){this.scaleX=t/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(t){this.scaleY=t/this._height}setDisplaySize(t,s){return this.displayWidth=t,this.displayHeight=s,this}getCanvas(t){return t||(this.dirty=!0),this.canvas}getContext(t){return t||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(t,s){return this.setSize(t,s),this}};const je=Phaser.GameObjects.Components;Phaser.Class.mixin(Ni,[je.Alpha,je.BlendMode,je.Crop,je.Depth,je.Flip,je.GetBounds,je.Mask,je.Origin,je.Pipeline,je.PostPipeline,je.ScrollFactor,je.Tint,je.Transform,je.Visible,vi,Fs,Ds]);const Ts=Phaser.Utils.String.Pad;var Ce=function(e,t,s){if(e==null)return e;switch(typeof e){case"string":return e;case"number":return`#${Ts(Math.floor(e).toString(16),6,"0",1)}`;case"function":return e(t,s);case"object":return e.hasOwnProperty("r")?e.hasOwnProperty("a")?`rgba(${e.r},${e.g},${e.b},${e.a})`:`rgb(${e.r},${e.g},${e.b})`:e.hasOwnProperty("h")?e.hasOwnProperty("a")?`hsla(${e.h},${e.s},${e.l},${e.a})`:`hsl(${e.h},${e.s},${e.l})`:e;default:return e}};const Mr=Phaser.Math.DegToRad;var a1=function(e,t,s,f,C,w,F){var N=new Ft(t,s,f,C,w),z=N.minWidth,H=N.minHeight,Z=f>=z?1:f/z,tt=C>=H?1:C/H,nt=N.cornerRadius,st,ht,ft,dt,gt,Et,yt;e.save(),e.beginPath(),e.translate(t,s),st=nt.tl,pc(st)?(ht=st.x*Z,ft=st.y*tt,cc(st)?(dt=ht,gt=ft,za(e,dt,gt,ht,ft,180,270,!1,F)):(dt=0,gt=0,za(e,dt,gt,ht,ft,90,0,!0,F)),Et=0,yt=ft):(e.lineTo(0,0),Et=0,yt=0),st=nt.tr,pc(st)?(ht=st.x*Z,ft=st.y*tt,cc(st)?(dt=f-ht,gt=ft,za(e,dt,gt,ht,ft,270,360,!1,F)):(dt=f,gt=0,za(e,dt,gt,ht,ft,180,90,!0,F))):e.lineTo(f,0),st=nt.br,pc(st)?(ht=st.x*Z,ft=st.y*tt,cc(st)?(dt=f-ht,gt=C-ft,za(e,dt,gt,ht,ft,0,90,!1,F)):(dt=f,gt=C,za(e,dt,gt,ht,ft,270,180,!0,F))):e.lineTo(f,C),st=nt.bl,pc(st)?(ht=st.x*Z,ft=st.y*tt,cc(st)?(dt=ht,gt=C-ft,za(e,dt,gt,ht,ft,90,180,!1,F)):(dt=0,gt=C,za(e,dt,gt,ht,ft,360,270,!0,F))):e.lineTo(0,C),e.lineTo(Et,yt),e.closePath(),e.restore()},cc=function(e){return!e.hasOwnProperty("convex")||e.convex},pc=function(e){return e.x>0&&e.y>0},za=function(e,t,s,f,C,w,F,N,z){if(N&&F>w?F-=360:!N&&F<w&&(F+=360),w=Mr(w),F=Mr(F),z==null)e.ellipse(t,s,f,C,0,w,F,N);else{z+=1;for(var H,Z,tt,nt=(F-w)/z,st=0;st<=z;st++)tt=w+nt*st,H=t+f*Math.cos(tt),Z=s+C*Math.sin(tt),e.lineTo(H,Z)}},gD=function(e,t,s,f,C,w,F,N,z,H,Z,tt,nt){if(a1(t,s,f,C,w,F,nt),N!=null){if(Z!=null){var st;tt?st=t.createLinearGradient(0,0,C,0):st=t.createLinearGradient(0,0,0,w),st.addColorStop(0,N),st.addColorStop(1,Z),N=st}t.fillStyle=N,t.fill()}z!=null&&H>0&&(t.strokeStyle=z,t.lineWidth=H,t.stroke())},Eg=function(e,t,s,f,C,w,F,N){if(!(t==null&&s==null)){var z=e.canvas.width,H=e.canvas.height;s==null&&(f=0);var Z=f/2;z=Math.max(1,z-f),H=Math.max(1,H-f),gD(e.canvas,e.context,Z,Z,z,H,C,t,s,f,w,F,N)}},xD=function(){Eg(this,this.fillStyle,this.strokeStyle,this.lineWidth,this.radius,this.fillColor2,this.isHorizontalGradient,this.iteration)};const o1=Phaser.Utils.Objects.GetValue;let h1=class extends Ni{constructor(t,s,f,C,w,F,N,z,H,Z,tt,nt){s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=1),w===void 0&&(w=C),F===void 0&&(F=0),nt===void 0&&(nt=1),super(t,s,f,C,w,nt),this.type="rexRoundRectangleCanvas";var st=o1(F,"radius",F),ht=o1(F,"iteration",void 0);this.setRadius(st),this.setIteration(ht),this.setFillStyle(N,Z,tt),this.setStrokeStyle(z,H)}get radius(){return this._radius}set radius(t){this.dirty|=this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this}get iteration(){return this._iteration}set iteration(t){this.dirty|=this._iteration!=t,this._iteration=t}setIteration(t){return this.iteration=t,this}get fillStyle(){return this._fillStyle}set fillStyle(t){t=Ce(t,this.canvas,this.context),this.dirty|=this._fillStyle!=t,this._fillStyle=t}get fillColor2(){return this._fillColor2}set fillColor2(t){t=Ce(t,this.canvas,this.context),this.dirty|=this._fillColor2!=t,this._fillColor2=t}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setFillStyle(t,s,f){return f===void 0&&(f=!0),this.fillStyle=t,this.fillColor2=s,this.isHorizontalGradient=f,this}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){t=Ce(t,this.canvas,this.context),this.dirty|=this._strokeStyle!=t,this._strokeStyle=t}get lineWidth(){return this._lineWidth}set lineWidth(t){this.dirty|=this._lineWidth!=t,this._lineWidth=t}setStrokeStyle(t,s){return this.strokeStyle=t,this.lineWidth=s,this}updateTexture(){return super.updateTexture(function(){this.clear(),xD.call(this)},this),this}};c.register("roundRectangleCanvas",function(e,t,s,f,C,w,F,N,z,H){var Z=new h1(this.scene,e,t,s,f,C,w,F,N,z,H);return this.scene.add.existing(Z),Z}),j(window,"RexPlugins.UI.RoundRectangleCanvas",h1);var _e=function(e,t){if(!e)return!1;if(e.hasOwnProperty(t))return!0;for(;e;){if(Object.getOwnPropertyDescriptor(e,t))return!0;e=e.__proto__}return!1},Wa=function(e,t,s){!t||_e(e,`${t}X`)||(Object.defineProperty(e,`${t}X`,{get:function(){return s.x},set:function(f){s.x=f,e.dirty=!0}}),Object.defineProperty(e,`${t}Y`,{get:function(){return s.y},set:function(f){s.y=f,e.dirty=!0}}),Object.defineProperty(e,`${t}T`,{get:function(){return s.t},set:function(f){s.t=f,e.dirty=!0}}))},yD={setTLPosition(e,t){return this.geom.setTLPosition(e,t),this.dirty=!0,this},setTRPosition(e,t){return this.geom.setTRPosition(e,t),this.dirty=!0,this},setBLPosition(e,t){return this.geom.setBLPosition(e,t),this.dirty=!0,this},setBRPosition(e,t){return this.geom.setBRPosition(e,t),this.dirty=!0,this},resetCornerPosition(){return this.geom.resetCornerPosition(),this.dirty=!0,this},insertTopSidePoint(e,t,s,f){var C=this.geom.topSidePoints;if(Array.isArray(e))for(var C=e,w,F=0,N=C.length;F<N;F++)w=C[F],this.geom.insertTopSidePoint(w.t,w.x,w.y),Wa(this,w.key,C[C.length-1]);else this.geom.insertTopSidePoint(e,t,s),Wa(this,f,C[C.length-1]);return this.dirty=!0,this},insertRightSidePoint(e,t,s,f){var C=this.geom.rightSidePoints;if(Array.isArray(e))for(var C=e,w,F=0,N=C.length;F<N;F++)w=C[F],this.geom.insertRightSidePoint(w.t,w.x,w.y),Wa(this,w.key,C[C.length-1]);else this.geom.insertRightSidePoint(e,t,s),Wa(this,f,C[C.length-1]);return this.dirty=!0,this},insertBottomSidePoint(e,t,s,f){var C=this.geom.bottomSidePoints;if(Array.isArray(e))for(var C=e,w,F=0,N=C.length;F<N;F++)w=C[F],this.geom.insertBottomSidePoint(w.t,w.x,w.y),Wa(this,w.key,C[C.length-1]);else this.geom.insertBottomSidePoint(e,t,s),Wa(this,f,C[C.length-1]);return this.dirty=!0,this},insertLeftSidePoint(e,t,s,f){var C=this.geom.leftSidePoints;if(Array.isArray(e))for(var C=e,w,F=0,N=C.length;F<N;F++)w=C[F],this.geom.insertLeftSidePoint(w.t,w.x,w.y),Wa(this,w.key,C[C.length-1]);else this.geom.insertLeftSidePoint(e,t,s),Wa(this,f,C[C.length-1]);return this.dirty=!0,this},clearTopSidePoints(){return this.geom.clearTopSidePoints(),this.dirty=!0,this},clearRightSidePoints(){return this.geom.clearRightSidePoints(),this.dirty=!0,this},clearBottomSidePoints(){return this.geom.clearBottomSidePoints(),this.dirty=!0,this},clearLeftSidePoints(){return this.geom.clearLeftSidePoints(),this.dirty=!0,this},clearAllSidesPoints(){return this.geom.clearAllSidesPoints(),this.dirty=!0,this}};class SD{constructor(t,s,f,C){t===void 0&&(t=0),s===void 0&&(s=t),f===void 0&&(f=0),C===void 0&&(C=0),this.setTo(t,s,f,C),this.tlx=0,this.tly=0,this.trx=0,this.try=0,this.blx=0,this.bly=0,this.brx=0,this.bry=0,this.topSidePoints=[],this.rightSidePoints=[],this.bottomSidePoints=[],this.leftSidePoints=[]}setTo(t,s,f,C){return this.setPosition(t,s),this.setSize(f,C),this}setPosition(t,s){return this.x=t,this.y=s,this}setSize(t,s){return this.width=t,this.height=s,this}setTLPosition(t,s){return this.tlx=t,this.tly=s,this}setTRPosition(t,s){return this.trx=t,this.try=s,this}setBLPosition(t,s){return this.blx=t,this.bly=s,this}setBRPosition(t,s){return this.brx=t,this.bry=s,this}resetCornerPosition(){return this.setTLPosition(0,0).setTRPosition(0,0).setBLPosition(0,0).setBRPosition(0,0),this}insertTopSidePoint(t,s,f){return vc(this.topSidePoints,t,s,f),this}insertRightSidePoint(t,s,f){return vc(this.rightSidePoints,t,s,f),this}insertBottomSidePoint(t,s,f){return vc(this.bottomSidePoints,t,s,f),this}insertLeftSidePoint(t,s,f){return vc(this.leftSidePoints,t,s,f),this}clearTopSidePoints(){return this.topSidePoints.length=0,this}clearRightSidePoints(){return this.rightSidePoints.length=0,this}clearBottomSidePoints(){return this.bottomSidePoints.length=0,this}clearLeftSidePoints(){return this.leftSidePoints.length=0,this}clearAllSidesPoints(){return this.clearTopSidePoints().clearRightSidePoints().clearBottomSidePoints().clearLeftSidePoints(),this}}var vc=function(e,t,s,f){if(typeof t!="number"){var C=t;t=C.t,s=C.x,f=C.y}e.push({t,x:s,y:f})};const TD=Phaser.Utils.Objects.IsPlainObject,Mn=Phaser.Utils.Objects.GetValue,Xa=Phaser.Math.Linear,CD=Phaser.Geom.Polygon.Earcut;class Pg extends pt{constructor(t,s,f,C,w,F,N){var z,H,Z;if(TD(s)){var tt=s;s=tt.x,f=tt.y,C=tt.width,w=tt.height,F=tt.color,N=tt.alpha,z=tt.strokeColor,H=tt.strokeAlpha,Z=tt.strokeWidth}s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=1),w===void 0&&(w=C);var nt=new SD;super(t,"rexQuadShape",nt),nt.setTo(0,0,C,w),this.setPosition(s,f),this.setFillStyle(F,N),z!==void 0&&Z===void 0&&(Z=2),this.setStrokeStyle(Z,z,H),this.setTLPosition(Mn(tt,"tlx",0),Mn(tt,"tly",0)).setTRPosition(Mn(tt,"trx",0),Mn(tt,"try",0)).setBLPosition(Mn(tt,"blx",0),Mn(tt,"bly",0)).setBRPosition(Mn(tt,"brx",0),Mn(tt,"bry",0));var st=Mn(tt,"leftSidePoints");st&&this.insertLeftSidePoint(st);var ht=Mn(tt,"topSidePoints");ht&&this.insertTopSidePoint(ht);var ft=Mn(tt,"rightSidePoints");ft&&this.insertRightSidePoint(ft);var dt=Mn(tt,"bottomSidePoints");dt&&this.insertBottomSidePoint(dt),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var t=this.geom,s=this.pathData;s.length=0;var f=t.width,C=t.height,w=0+t.tlx,F=0+t.tly,N=f+t.trx,z=0+t.try,H=f+t.brx,Z=C+t.bry,tt=0+t.blx,nt=C+t.bly,st=t.topSidePoints,ht=t.rightSidePoints,ft=t.bottomSidePoints,dt=t.leftSidePoints;ie(w,F,s),mc(st);for(var gt=0,Et=st.length;gt<Et;gt++){var yt=st[gt],Dt=Xa(w,N,yt.t)+yt.x,Wt=Xa(F,z,yt.t)+yt.y;ie(Dt,Wt,s)}ie(N,z,s),mc(ht);for(var gt=0,Et=ht.length;gt<Et;gt++){var yt=ht[gt],Dt=Xa(N,H,yt.t)+yt.x,Wt=Xa(z,Z,yt.t)+yt.y;ie(Dt,Wt,s)}ie(H,Z,s),mc(ft);for(var gt=ft.length-1;gt>=0;gt--){var yt=ft[gt],Dt=Xa(tt,H,yt.t)+yt.x,Wt=Xa(nt,Z,yt.t)+yt.y;ie(Dt,Wt,s)}ie(tt,nt,s),mc(dt);for(var gt=dt.length-1;gt>=0;gt--){var yt=dt[gt],Dt=Xa(w,tt,yt.t)+yt.x,Wt=Xa(F,nt,yt.t)+yt.y;ie(Dt,Wt,s)}return s.push(s[0],s[1]),this.pathIndexes=CD(s),this}get tlx(){return this.geom.tlx}set tlx(t){this.geom.tlx=t,this.dirty=!0}get tly(){return this.geom.tly}set tly(t){this.geom.tly=t,this.dirty=!0}get trx(){return this.geom.trx}set trx(t){this.geom.trx=t,this.dirty=!0}get try(){return this.geom.try}set try(t){this.geom.try=t,this.dirty=!0}get blx(){return this.geom.blx}set blx(t){this.geom.blx=t,this.dirty=!0}get bly(){return this.geom.bly}set bly(t){this.geom.bly=t,this.dirty=!0}get brx(){return this.geom.brx}set brx(t){this.geom.brx=t,this.dirty=!0}get bry(){return this.geom.bry}set bry(t){this.geom.bry=t,this.dirty=!0}get leftSidePoints(){return this.geom.leftSidePoints}get topSidePoints(){return this.geom.topSidePoints}get bottomSidePoints(){return this.geom.bottomSidePoints}get rightSidePoints(){return this.geom.rightSidePoints}}var mc=function(e){e.length<=1||e.sort(function(t,s){return t.t-s.t})};Object.assign(Pg.prototype,yD),c.register("QuadShape",function(e,t,s,f,C,w){var F=new Pg(this.scene,e,t,s,f,C,w);return this.scene.add.existing(F),F}),j(window,"RexPlugins.UI.QuadShape",Pg);var MD=Phaser.Renderer.WebGL.Utils,ED=function(e,t,s,f){if(!(t.width===0||t.height===0)){s.addToRenderList(t);var C=t.frame,w=C.width,F=C.height,N=MD.getTintAppendFloatAlpha,z=e.pipelines.set(t.pipeline,t),H=z.setTexture2D(C.glTexture,t);e.pipelines.preBatch(t),z.batchTexture(t,C.glTexture,w,F,t.x,t.y,w/t.style.resolution,F/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,w,F,N(t.tintTopLeft,s.alpha*t._alphaTL),N(t.tintTopRight,s.alpha*t._alphaTR),N(t.tintBottomLeft,s.alpha*t._alphaBL),N(t.tintBottomRight,s.alpha*t._alphaBR),t.tintFill,0,0,s,f,!1,H),e.pipelines.postBatch(t)}},PD=function(e,t,s,f){t.width===0||t.height===0||(s.addToRenderList(t),e.batchSprite(t,t.frame,s,f))},wD={renderWebGL:ED,renderCanvas:PD};const wg=Phaser.Display.Canvas.CanvasPool;var bD=function(e,t,s){s===void 0&&(s={});var f=wg.create(this),C=f.getContext("2d",{willReadFrequently:!0});e.syncFont(f,C);var w=C.measureText(t),F=Math.ceil(w.width*e.baselineX),N=F,z=2*N;if(N=N*e.baselineY|0,f.width=F,f.height=z,C.fillStyle="#f00",C.fillRect(0,0,F,z),C.font=e._font,C.textBaseline="alphabetic",C.fillStyle="#000",C.fillText(e.testString,0,N),s.left=0,F===0||z===0||!C.getImageData(0,0,F,z))return wg.remove(f),s;for(var H=C.getImageData(0,0,F,z).data,Z=!1,tt=0;tt<F;tt++){for(var nt=0;nt<z;nt++){var st=(nt*F+tt)*4;if(H[st]!==255){s.left=tt,Z=!0;break}}if(Z)break}return wg.remove(f),s};ct();const AD=Phaser.GameObjects.GameObject;class l1 extends AD{setStyle(t){return this.style.setStyle(t)}setFont(t){return this.style.setFont(t)}setFontFamily(t){return this.style.setFontFamily(t)}setFontSize(t){return this.style.setFontSize(t)}setFontStyle(t){return this.style.setFontStyle(t)}setTestString(t){return this.style.setTestString(t)}setFixedSize(t,s){return this.style.setFixedSize(t,s)}setBackgroundColor(t,s,f){return this.style.setBackgroundColor(t,s,f)}setBackgroundStrokeColor(t,s){return this.style.setBackgroundStrokeColor(t,s)}setBackgroundCornerRadius(t,s){return this.style.setBackgroundCornerRadius(t,s)}setFill(t){return this.style.setFill(t)}setColor(t){return this.style.setColor(t)}setStroke(t,s){return this.style.setStroke(t,s)}setShadow(t,s,f,C,w,F){return this.style.setShadow(t,s,f,C,w,F)}setShadowOffset(t,s){return this.style.setShadowOffset(t,s)}setShadowColor(t){return this.style.setShadowColor(t)}setShadowBlur(t){return this.style.setShadowBlur(t)}setShadowStroke(t){return this.style.setShadowStroke(t)}setShadowFill(t){return this.style.setShadowFill(t)}setUnderline(t,s,f){return this.style.setUnderline(t,s,f)}setUnderlineColor(t){return this.style.setUnderlineColor(t)}setUnderlineThickness(t){return this.style.setUnderlineThickness(t)}setUnderlineOffset(t){return this.style.setUnderlineOffset(t)}setStrikethrough(t,s,f){return this.style.setStrikethrough(t,s,f)}setStrikethroughColor(t){return this.style.setStrikethroughColor(t)}setStrikethroughThickness(t){return this.style.setStrikethroughThickness(t)}setStrikethroughOffset(t){return this.style.setStrikethroughOffset(t)}setWrapMode(t){return this.style.setWrapMode(t)}setWrapWidth(t){return this.style.setWrapWidth(t)}setWordWrapWidth(t){return this.style.setWrapWidth(t)}setAlign(t){return this.style.setHAlign(t)}setHAlign(t){return this.style.setHAlign(t)}setVAlign(t){return this.style.setVAlign(t)}get lineSpacing(){return this.style.lineSpacing}set lineSpacing(t){this.style.lineSpacing=t}setLineSpacing(t){return this.style.lineSpacing=t,this.updateText(!0),this}setXOffset(t){return this.style.setXOffset(t)}setMaxLines(t){return this.style.setMaxLines(t)}setResolution(t){return this.style.setResolution(t)}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(t,s){return this.style.setTextMetrics(t,s)}measureTextMargins(t,s){return bD(this.style,t,s)}}const Is=Phaser.GameObjects.Components;Phaser.Class.mixin(l1,[Is.Alpha,Is.BlendMode,Is.ComputedSize,Is.Crop,Is.Depth,Is.Flip,Is.GetBounds,Is.Mask,Is.Origin,Is.Pipeline,Is.PostPipeline,Is.ScrollFactor,Is.Tint,Is.Transform,Is.Visible,wD]);var RD={backgroundColor:["backgroundColor",null,Ce],backgroundColor2:["backgroundColor2",null,Ce],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,Ce],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",Ce],stroke:["stroke","#fff",Ce],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",Ce],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",Ce],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],strikethroughColor:["strikethrough.color","#000",Ce],strikethroughThickness:["strikethrough.thickness",0,null],strikethroughOffset:["strikethrough.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|MÃ‰qgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */const gc=Phaser.Display.Canvas.CanvasPool;var u1=function(e){var t=gc.create(this),s=t.getContext("2d",{willReadFrequently:!0});e.syncFont(t,s);var f=s.measureText(e.testString);if("actualBoundingBoxAscent"in f){var C=f.actualBoundingBoxAscent,w=f.actualBoundingBoxDescent,H={ascent:C,descent:w,fontSize:C+w};return gc.remove(t),H}var F=Math.ceil(f.width*e.baselineX),N=F,z=2*N;N=N*e.baselineY|0,t.width=F,t.height=z,s.fillStyle="#f00",s.fillRect(0,0,F,z),s.font=e._font,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(e.testString,0,N);var H={ascent:0,descent:0,fontSize:0};if(!s.getImageData(0,0,F,z))return H.ascent=N,H.descent=N+6,H.fontSize=H.ascent+H.descent,gc.remove(t),H;var Z=s.getImageData(0,0,F,z).data,tt=Z.length,nt=F*4,st,ht,ft=0,dt=!1;for(st=0;st<N;st++){for(ht=0;ht<nt;ht+=4)if(Z[ft+ht]!==255){dt=!0;break}if(!dt)ft+=nt;else break}for(H.ascent=N-st,ft=tt-nt,dt=!1,st=z;st>N;st--){for(ht=0;ht<nt;ht+=4)if(Z[ft+ht]!==255){dt=!0;break}if(!dt)ft-=nt;else break}return H.descent=st-N,H.fontSize=H.ascent+H.descent,gc.remove(t),H},Gi={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,MIX_WRAP:3,SPLITREGEXP:/(?:\r\n|\r|\n)/};const xc={none:Gi.NO_WRAP,word:Gi.WORD_WRAP,char:Gi.CHAR_WRAP,character:Gi.CHAR_WRAP,mix:Gi.MIX_WRAP},LD=Phaser.Utils.Objects.GetAdvancedValue,hn=Phaser.Utils.Objects.GetValue;let bg=class{constructor(t,s,f){this.parent=t,f===void 0&&(f=RD),this.propertyMap=f,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.strikethroughColor,this.strikethroughThickness,this.strikethroughOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(s,!1,!0)}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==Gi.NO_WRAP&&this.wrapWidth===0}setStyle(t,s,f){if(s===void 0&&(s=!0),f===void 0&&(f=!1),t&&t.hasOwnProperty("wordWrap")){var C=t.wordWrap;C.hasOwnProperty("width")&&(t.wrap={mode:"word",width:C.width})}if(t&&t.hasOwnProperty("wrap")){var w=t.wrap;if(w.hasOwnProperty("mode")){var F=w.mode;typeof F=="string"&&(w.mode=xc[F])}else w.hasOwnProperty("width")&&(w.mode=1)}t&&t.rtl&&f&&!t.hasOwnProperty("halign")&&(t.halign="right"),t&&t.hasOwnProperty("fontSize")&&typeof t.fontSize=="number"&&(t.fontSize=t.fontSize.toString()+"px");var N=this.propertyMap;for(var z in N){var H=N[z],Z=H[0],tt=f?H[1]:this[z],nt=H[2];if(z==="wrapCallback"||z==="wrapCallbackScope")this[z]=hn(t,Z,tt);else{var st=LD(t,Z,tt);nt&&(st=nt(st)),this[z]=st}}var ht=hn(t,"font",null);ht===null?this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily:this._font=ht;var ft=hn(t,"fill",null);ft!==null&&(this.color=Ce(ft));var dt=hn(t,"metrics",!1);return dt?this.metrics={ascent:hn(dt,"ascent",0),descent:hn(dt,"descent",0),fontSize:hn(dt,"fontSize",0)}:(s||!this.metrics)&&(this.metrics=u1(this)),s?this.parent.updateText():this.parent}syncFont(t,s){s.font=this._font}syncStyle(t,s){s.textBaseline="alphabetic",s.fillStyle=this.color,s.strokeStyle=this.stroke,s.lineWidth=this.strokeThickness,s.lineCap="round",s.lineJoin="round"}syncShadow(t,s){s?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)}update(t){return t&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=u1(this)),this.parent.updateText(t)}buildFont(){var t=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return t!==this._font&&(this._font=t),this}setFont(t){return typeof t=="string"?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=hn(t,"fontFamily","Courier"),this.fontSize=hn(t,"fontSize","16px"),this.fontStyle=hn(t,"fontStyle","")),this.update(!0)}setFontFamily(t){return this.fontFamily=t,this.update(!0)}setFontStyle(t){return this.fontStyle=t,this.update(!0)}setFontSize(t){return typeof t=="number"&&(t=t.toString()+"px"),this.fontSize=t,this.update(!0)}setTestString(t){return this.testString=t,this.update(!0)}setFixedSize(t,s){return this.fixedWidth=t,this.fixedHeight=s,t&&(this.parent.width=t),s&&(this.parent.height=s),this.update(this.isWrapFitMode)}setResolution(t){return this.resolution=t,this.update(!1)}setXOffset(t){return this.xOffset=t,this.update(!1)}setBackgroundColor(t,s,f){return f===void 0&&(f=!0),this.backgroundColor=Ce(t,this.parent.canvas,this.parent.context),this.backgroundColor2=Ce(s,this.parent.canvas,this.parent.context),this.backgroundHorizontalGradient=f,this.update(!1)}setBackgroundStrokeColor(t,s){return this.backgroundStrokeColor=Ce(t,this.parent.canvas,this.parent.context),this.backgroundStrokeLineWidth=s,this.update(!1)}setBackgroundCornerRadius(t,s){return this.backgroundCornerRadius=t,this.backgroundCornerIteration=s,this.update(!1)}setFill(t){return this.color=Ce(t,this.parent.canvas,this.parent.context),this.update(!1)}setColor(t){return this.color=Ce(t,this.parent.canvas,this.parent.context),this.update(!1)}setStroke(t,s){return t===void 0?this.strokeThickness=0:(s===void 0&&(s=this.strokeThickness),this.stroke=Ce(t,this.parent.canvas,this.parent.context),this.strokeThickness=s),this.update(!0)}setShadow(t,s,f,C,w,F){return t===void 0&&(t=0),s===void 0&&(s=0),f===void 0&&(f="#000"),C===void 0&&(C=0),w===void 0&&(w=!1),F===void 0&&(F=!0),this.shadowOffsetX=t,this.shadowOffsetY=s,this.shadowColor=Ce(f,this.parent.canvas,this.parent.context),this.shadowBlur=C,this.shadowStroke=w,this.shadowFill=F,this.update(!1)}setShadowOffset(t,s){return t===void 0&&(t=0),s===void 0&&(s=t),this.shadowOffsetX=t,this.shadowOffsetY=s,this.update(!1)}setShadowColor(t){return t===void 0&&(t="#000"),this.shadowColor=Ce(t,this.parent.canvas,this.parent.context),this.update(!1)}setShadowBlur(t){return t===void 0&&(t=0),this.shadowBlur=t,this.update(!1)}setShadowStroke(t){return this.shadowStroke=t,this.update(!1)}setShadowFill(t){return this.shadowFill=t,this.update(!1)}setUnderline(t,s,f){return t===void 0&&(t="#000"),s===void 0&&(s=0),f===void 0&&(f=0),this.underlineColor=Ce(t,this.parent.canvas,this.parent.context),this.underlineThickness=s,this.underlineOffset=f,this.update(!1)}setUnderlineColor(t){return t===void 0&&(t="#000"),this.underlineColor=Ce(t,this.parent.canvas,this.parent.context),this.update(!1)}setUnderlineThickness(t){return t===void 0&&(t=0),this.underlineThickness=t,this.update(!1)}setUnderlineOffset(t){return t===void 0&&(t=0),this.underlineOffset=t,this.update(!1)}setStrikethrough(t,s,f){return t===void 0&&(t="#000"),s===void 0&&(s=0),f===void 0&&(f=0),this.strikethroughColor=Ce(t,this.parent.canvas,this.parent.context),this.strikethroughThickness=s,this.strikethroughOffset=f,this.update(!1)}setStrikethroughColor(t){return t===void 0&&(t="#000"),this.strikethroughColor=Ce(t,this.parent.canvas,this.parent.context),this.update(!1)}setStrikethroughThickness(t){return t===void 0&&(t=0),this.strikethroughThickness=t,this.update(!1)}setStrikethroughOffset(t){return t===void 0&&(t=0),this.strikethroughOffset=t,this.update(!1)}setWrapMode(t){return typeof t=="string"&&(t=xc[t.toLowerCase()]||0),this.wrapMode=t,this.update(!0)}setWrapWidth(t){return this.wrapWidth=t,this.update(!1)}setAlign(t,s){return t===void 0&&(t="left"),s===void 0&&(s="top"),this.halign=t,this.valign=s,this.update(!1)}setHAlign(t){return t===void 0&&(t="left"),this.halign=t,this.update(!1)}setVAlign(t){return t===void 0&&(t="top"),this.valign=t,this.update(!1)}setMaxLines(t){return t===void 0&&(t=0),this.maxLines=t,this.update(!1)}getTextMetrics(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}}setTextMetrics(t,s){return this.metrics.ascent=t.ascent,this.metrics.descent=t.descent,this.metrics.fontSize=t.fontSize,s&&(typeof s=="string"?(this.fontFamily=s,this.fontSize="",this.fontStyle=""):(this.fontFamily=hn(s,"fontFamily",this.fontFamily),this.fontSize=hn(s,"fontSize",this.fontSize),this.fontStyle=hn(s,"fontStyle",this.fontStyle))),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.parent.lineSpacing}toJSON(){var t={},s=this.propertyMap;for(var f in s)t[f]=this[f];return t.metrics=this.getTextMetrics(),t}destroy(){this.parent=void 0}};var qh=function(e){return e==null?e="":Array.isArray(e)?e=e.join(`
`):typeof e=="number"&&(e=e.toString()),e},OD={draw(e,t,s,f){var C=this.penManager;this.hitAreaManager.clear();var w=this.context;w.save();var F=this.defaultStyle;this.clear(),Eg(this,F.backgroundColor,F.backgroundStrokeColor,F.backgroundStrokeLineWidth,F.backgroundCornerRadius,F.backgroundColor2,F.backgroundHorizontalGradient,F.backgroundCornerIteration),e+=this.startXOffset,t+=this.startYOffset;var N=F.halign,z=F.valign,H,Z=F.lineHeight,tt=C.lines,nt=tt.length,st=F.maxLines,ht,ft,dt;st>0&&nt>st?(ht=st,z==="center"?ft=Math.floor((nt-ht)/2):z==="bottom"?ft=nt-ht:ft=0):(ht=nt,ft=0),dt=ft+ht;var gt,Et,yt=this.rtl,Dt=yt?this.parent.width:void 0;z==="center"?Et=Math.max((f-ht*Z)/2,0):z==="bottom"?Et=Math.max(f-ht*Z-2,0):Et=0,Et+=t;for(var Wt=ft;Wt<dt;Wt++)if(H=C.getLineWidth(Wt),H!==0){for(var qt=tt[Wt],re=qt.length,ce=N,fe=0;fe<re;fe++){var ye=qt[fe].prop.align;if(ye!==void 0){ce=ye;break}}ce==="center"?gt=(s-H)/2:ce==="right"?gt=yt?0:s-H:gt=yt?s-H:0,gt+=e;for(var fe=0;fe<re;fe++)this.drawPen(qt[fe],gt,Et,Dt)}w.restore()},drawPen(e,t,s,f){t+=e.x,s+=e.y+(e.prop.y||0),f!==void 0&&(t=f-t);var C=this.canvas,w=this.context;w.save();var F=this.parser.propToContextStyle(this.defaultStyle,e.prop);if(F.bgcolor!==null&&e.width>0){var N=this.defaultStyle.metrics,z=s-N.ascent,H=N.fontSize;this.drawRectangle(t,z,e.width,H,F.bgcolor,F)}if(F.underlineThickness>0&&e.width>0){var Z=s+F.underlineOffset-F.underlineThickness/2;this.drawLine(t,Z,e.width,F.underlineThickness,F.underlineColor,F)}if(e.isTextPen&&(F.buildFont(),F.syncFont(C,w),F.syncStyle(C,w),this.drawText(t,s,e.text,F)),e.isImagePen&&this.drawImage(t,s,e.prop.img,e.prop.color,F),F.strikethroughThickness>0&&e.width>0){var Z=s+F.strikethroughOffset-F.strikethroughThickness/2;this.drawLine(t,Z,e.width,F.strikethroughThickness,F.strikethroughColor,F)}if(w.restore(),e.hasAreaMarker&&e.width>0){var tt,nt=e.prop.area;if(nt)tt={key:nt};else{var st=e.prop.url;tt={key:`url:${st}`,url:st}}this.hitAreaManager.add(t,s-this.startYOffset,e.width,this.defaultStyle.lineHeight,tt)}},clear(){var e=this.canvas;this.context.clearRect(0,0,e.width,e.height)},drawRectangle(e,t,s,f,C,w){this.autoRound&&(e=Math.round(e),t=Math.round(t));var F=this.context;F.fillStyle=C,F.fillRect(e,t,s,f)},drawLine(e,t,s,f,C,w){this.autoRound&&(e=Math.round(e),t=Math.round(t));var F=this.context;w.syncShadow(F,w.shadowStroke);var N=F.lineCap;F.lineCap="butt",F.strokeStyle=C,F.lineWidth=f,F.beginPath(),F.moveTo(e,t),F.lineTo(e+s,t),F.stroke(),F.lineCap=N},drawText(e,t,s,f){this.autoRound&&(e=Math.round(e),t=Math.round(t));var C=this.context;f.stroke&&f.stroke!=="none"&&f.strokeThickness>0&&(f.syncShadow(C,f.shadowStroke),C.strokeText(s,e,t)),f.color&&f.color!=="none"&&(f.syncShadow(C,f.shadowFill),C.fillText(s,e,t))},drawImage(e,t,s,f,C){t-=this.startYOffset,this.parent.imageManager.draw(s,this.context,e,t,f,this.autoRound)}};const Xo=Phaser.Utils.Objects.GetValue,FD=Gi.NO_NEWLINE,d1=Gi.RAW_NEWLINE;class DD{constructor(t){this.prop={},this.resetFromJSON(t)}resetFromJSON(t){this.text=Xo(t,"text",""),this.x=Xo(t,"x",0),this.y=Xo(t,"y",0),this.width=Xo(t,"width",0);var s=Xo(t,"prop",null);s===null&&(s={}),this.prop=s,this.newLineMode=Xo(t,"newLineMode",0),this.startIndex=Xo(t,"startIndex",0)}get plainText(){var t=this.text;return this.newLineMode===d1&&(t+=`
`),t}get wrapText(){var t=this.text;return this.newLineMode!==FD&&(t+=`
`),t}get rawTextLength(){var t=this.text.length;return this.newLineMode===d1&&(t+=1),t}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area||!!this.prop.url}}var Zn=function(e,t){var s=Array.isArray(e);if(t===void 0?t=s?[]:{}:ne(t),s){t.length=e.length;for(var f=0,C=e.length;f<C;f++)t[f]=e[f]}else for(var w in e)t[w]=e[w];return t};const f1=Phaser.Utils.Objects.GetFastValue,c1=Gi.NO_NEWLINE,ID=Gi.WRAPPED_NEWLINE;class Ag{constructor(t){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.tagToText=f1(t,"tagToText",a),this.tagToTextScope=f1(t,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var t=0,s=this.lines.length;t<s;t++)this.lines[t].length=0;this.pensPool.pushMultiple(this.pens),this.linesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(t,s,f,C,w,F){var N=this.pensPool.pop();return N==null&&(N=new DD),Ho.text=t,Ho.x=s,Ho.y=f,Ho.width=C,Ho.prop=w,Ho.newLineMode=F,N.resetFromJSON(Ho),this.addPen(N),this}addImagePen(t,s,f,C){return this.addTextPen("",t,s,f,C,c1),this}addNewLinePen(){var t=this.lastPen,s=t?t.lastX:0,f=t?t.y:0,C=t?Zn(t.prop):null;return this.addTextPen("",s,f,0,C,ID),this}addPen(t){var s=this.lastPen;s==null?t.startIndex=0:t.startIndex=s.endIndex,this.pens.push(t);var f=this.lastLine;f==null&&(f=this.linesPool.pop()||[],this.lines.push(f)),f.push(t),t.newLineMode!==c1&&(f=this.linesPool.pop()||[],this.lines.push(f)),this.maxLinesWidth=void 0}clone(t){t==null&&(t=new Ag),t.clear();for(var s=0,f=this.lines.length;s<f;s++)for(var C=this.lines[s],w=0,F=C.length;w<F;w++){var N=C[w];t.addPen(N.text,N.x,N.y,N.width,Zn(N.prop),N.newLineMode)}return t}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var s=this.lines[t];return s&&s[0]?s[0].startIndex:0}getLineEndIndex(t){t>=this.lines.length&&(t=this.lines.length-1);var s,f=!1,C;for(s=t;s>=0&&(C=this.lines[s],f=C!=null&&C.length>0,!f);s--);if(!f)return 0;var w=C[C.length-1];return w.endIndex}getLineWidth(t){var s=this.lines[t];if(!s)return 0;var f=s[s.length-1];if(f==null)return 0;var C=f.lastX;return C}getMaxLineWidth(){if(this.maxLinesWidth!==void 0)return this.maxLinesWidth;for(var t,s=0,f=0,C=this.lines.length;f<C;f++)t=this.getLineWidth(f),t>s&&(s=t);return this.maxLinesWidth=s,s}getLineWidths(){for(var t=[],s=0,f=this.lines.length;s<f;s++)t.push(this.getLineWidth(s));return t}get linesCount(){return this.lines.length}get plainText(){for(var t="",s=this.pens,f=0,C=s.length;f<C;f++)t+=s[f].plainText;return t}get rawTextLength(){for(var t=0,s=this.pens,f=0,C=this.pens.length;f<C;f++)t+=s[f].rawTextLength;return t}getSliceTagText(t,s,f){var C=this.lastPen;if(C==null)return"";var w=C.endIndex;(t===void 0||t===0)&&(t=-1),(s===void 0||s===w)&&(s=w+1),f===void 0&&(f=!1);for(var F="",N,z,H,Z,tt,nt,st,ht=0,ft=this.pens.length;ht<ft&&(N=this.pens[ht],Z=N.endIndex,!(!(Z<=t)&&(N=this.pens[ht],z=f?N.wrapText:N.plainText,nt=N.prop,H=N.startIndex,tt=H>=t&&Z<=s,tt||(z=z.substring(t-H,s-H)),this.tagToTextScope?F+=this.tagToText.call(this.tagToTextScope,z,nt,st):F+=this.tagToText(z,nt,st),st=nt,Z>=s)));ht++);return F}get length(){return this.lines.length}set length(t){this.clear()}}var Ho={};const BD=Phaser.Geom.Rectangle;var p1=new bt;class ND{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){for(var t=0,s=this.hitAreas.length;t<s;t++)this.hitAreas[t].data=null;return p1.pushMultiple(this.hitAreas),this}add(t,s,f,C,w){w===void 0&&(w={});var F=p1.pop();return F===null?F=new BD(t,s,f,C):F.setTo(t,s,f,C),F.data=w,this.hitAreas.push(F),this}getFirst(t,s){for(var f=0,C=this.hitAreas.length;f<C;f++){var w=this.hitAreas[f];if(w.contains(t,s))return w}return null}getByKey(t){for(var s=0,f=this.hitAreas.length;s<f;s++){var C=this.hitAreas[s];if(C.data.key===t)return C}return null}drawBounds(t,s,f){s===void 0&&(s=16777215),f&&t.save().translateCanvas(f.x,f.y).rotateCanvas(f.rotation).scaleCanvas(f.scaleX,f.scaleY);for(var C=0,w=this.hitAreas.length;C<w;C++){var F=this.hitAreas[C];t.lineStyle(1,s).strokeRect(F.x,F.y,F.width,F.height)}return f&&t.restore(),this}}var GD=function(){this.parent.on("pointerdown",UD,this).on("pointerup",kD,this).on("pointermove",Rg,this).on("pointerover",Rg,this).on("pointerout",function(e,t){Rg.call(this,e,null,null,t)},this)},UD=function(e,t,s,f){var C=this.hitAreaManager.getFirst(t,s);if(C!==null){var w=C.data.key;tl.call(this,"areadown",w,e,t,s,f),C.data&&(C.data.isDown=!0)}},kD=function(e,t,s,f){var C=this.hitAreaManager.getFirst(t,s);if(C!==null){var w=C.data.key;if(tl.call(this,"areaup",w,e,t,s,f),!!C.data){if(C.data.isDown){if(tl.call(this,"areaclick",w,e,t,s,f),!C.data)return;var F=C.data.url;F&&window.open(F,"_blank")}C.data.isDown=!1}}},Rg=function(e,t,s,f){if(t===null){if(this.lastHitAreaKey!==null){tl.call(this,"areaout",this.lastHitAreaKey,e,t,s,f);var C=this.hitAreaManager.getByKey(this.lastHitAreaKey);C&&C.data&&(C.data.isDown=!1),this.lastHitAreaKey=null}return}var C=this.hitAreaManager.getFirst(t,s),w=C?C.data.key:null;if(this.lastHitAreaKey!==w){if(this.lastHitAreaKey!==null){tl.call(this,"areaout",this.lastHitAreaKey,e,t,s,f);var F=this.hitAreaManager.getByKey(this.lastHitAreaKey);F&&(this.urlTagCursorStyle&&v1(this.scene,F,""),F.data.isDown=!1)}w!==null&&(tl.call(this,"areaover",w,e,t,s,f),C.data&&this.urlTagCursorStyle&&v1(this.scene,C,this.urlTagCursorStyle)),this.lastHitAreaKey=w}},tl=function(e,t,s,f,C,w){this.parent.emit(`${e}-${t}`,s,f,C,w),this.parent.emit(e,t,s,f,C,w)},v1=function(e,t,s){!t||!t.data||!t.data.url||(e.input.manager.canvas.style.cursor=s)};const m1=Phaser.GameObjects.Components.TransformMatrix,VD=Phaser.Math.TransformXY;var g1=function(e,t,s,f,C){f===void 0&&(f=e.scene.cameras.main),C===void 0?C={}:C===!0&&(C=zD);var w=f.scrollX,F=f.scrollY,N=t+w*e.scrollFactorX-w,z=s+F*e.scrollFactorY-F;return e.parentContainer?(yc===void 0&&(yc=new m1,x1=new m1),e.getWorldTransformMatrix(yc,x1),yc.applyInverse(N,z,C)):VD(N,z,e.x,e.y,e.rotation,e.scaleX,e.scaleY,C),C.x+=e.displayOriginX,C.y+=e.displayOriginY,C},yc,x1,zD={},WD=function(e,t,s){var f=g1(this.parent,e,t,s,!0),C=this.hitAreaManager.getFirst(f.x,f.y);if(C!==null)return C.data.key},XD=/^[\x00-\x7F]+$/,_u=function(e){return XD.test(e)};const HD=Gi.NO_NEWLINE,YD=Gi.RAW_NEWLINE,Lg=Gi.WRAPPED_NEWLINE,y1=Gi.NO_WRAP,$D=Gi.WORD_WRAP,S1=Gi.CHAR_WRAP,_D=Gi.SPLITREGEXP;var T1=function(e,t,s,f,C,w){f<=0&&(s=y1);var F=[];if(!e||!e.length)return F;for(var N=s===y1,z=e.split(_D),H,Z,tt,nt=0,st=z.length;nt<st;nt++){if(H=z[nt],tt=nt===st-1?HD:YD,N){var ht=t.measureText(H).width;F.push(w.getLine(H,ht,tt));continue}if(Z=nt===0?f-C:f,H.length<=100){var ht=t.measureText(H).width;if(ht<=Z){F.push(w.getLine(H,ht,tt));continue}}for(var ft=ZD(H,s),dt,gt,Et="",yt=0,Dt,Wt=0,qt=ft.length;Wt<qt;Wt++){if(dt=ft[Wt],gt=t.measureText(dt).width,gt>f&&KD(dt)){Et!==""?F.push(w.getLine(Et,yt,Lg)):Wt===0&&C>0&&F.push(w.getLine("",0,Lg)),F.push(...T1(dt,t,S1,f,0,w));var re=F.pop();Et=re.text,yt=re.width,w.freeLine(re),Et===" "&&(Et="",yt=0);continue}Dt=yt+gt,Dt>Z?(F.push(w.getLine(Et,yt,Lg)),Et=dt,yt=gt,Z=f):(Et+=dt,yt=Dt),Wt===qt-1&&F.push(w.getLine(Et,yt,tt))}}return F},ZD=function(e,t){var s;switch(t){case $D:s=[],e=e.split(" ");for(var f=0,C=e.length;f<C;f++){var w=e[f];f<C-1?s.push(w+" "):w!==""&&s.push(w)}break;case S1:s=e.split("");break;default:s=[],e=e.split(" ");for(var f=0,C=e.length;f<C;f++){var w=e[f];f<C-1?_u(w)?s.push(w+" "):(s.push(...w.split("")),s.push(" ")):w!==""&&(_u(w)?s.push(w):s.push(...w.split("")))}break}return s},KD=function(e){switch(e.length){case 1:return!1;case 2:return e.charAt(1)!==" ";default:return!0}};const Og=Phaser.Utils.Objects.GetValue,JD=Gi.NO_WRAP,C1=Gi.NO_NEWLINE,QD=Gi.WRAPPED_NEWLINE;class M1{constructor(t){this.parent=t.parent,this.scene=this.parent.scene,this.context=Og(t,"context",null),this.canvas=this.context.canvas,this.parser=Og(t,"parser",null),this.defaultStyle=Og(t,"style",null),this.autoRound=!0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.wrapTextLinesPool=t.wrapTextLinesPool,this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new ND,this.lastHitAreaKey=null,this.urlTagCursorStyle=null}destroy(){this.parent=void 0,this.scene=void 0,this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0),this.pensPool=void 0,this.linesPool=void 0,this.wrapTextLinesPool=void 0}updatePenManager(t,s,f,C,w){if(w===void 0&&(w=this.penManager),w.clear(),t==="")return w;var F=this.parent.style;if(F.isWrapFitMode){var N=this.parent.padding;f=F.fixedWidth-N.left-N.right}for(var z=this.canvas,H=this.context,Z=0,tt=0,nt=F.wrapCallback,st=F.wrapCallbackScope,ht=!0,ft,dt,gt,Et=this.parser.splitText(t),yt,Dt,Wt=this.wrapTextLinesPool,qt=0,re=Et.length;qt<re;qt++)if(yt=this.parser.tagTextToProp(Et[qt],dt),ft=yt.plainText,dt=yt.prop,dt.img){var ce=this.imageManager.getOuterWidth(dt.img);f>0&&s!==JD&&f<Z+ce&&(w.addNewLinePen(),tt+=C,Z=0),w.addImagePen(Z,tt,ce,Zn(dt)),Z+=ce}else if(ft!==""){if(H.save(),gt=this.parser.propToContextStyle(this.defaultStyle,dt),gt.buildFont(),gt.syncFont(z,H),gt.syncStyle(z,H),!nt)Dt=T1(ft,H,s,f,Z,Wt);else{Dt=nt.call(st,ft,H,f,Z),typeof Dt=="string"&&(Dt=Dt.split(`
`));for(var ge,fe=0,ye=Dt.length;fe<ye;fe++)ge=Dt[fe],typeof ge=="string"?Dt[fe]=Wt.getLine(ge,H.measureText(ge).width,fe<ye-1?QD:C1):ht=!1}for(var ge,fe=0,ye=Dt.length;fe<ye;fe++)ge=Dt[fe],w.addTextPen(ge.text,Z,tt,ge.width,Zn(dt),ge.newLineMode),ge.newLineMode!==C1?(Z=0,tt+=C):Z+=ge.width;ht&&Wt.freeLines(Dt),Dt=null,H.restore()}for(var qt=0,re=this.lines.length;qt<re;qt++){var Ue=this.lines[qt],ze=Ue[Ue.length-1];ze&&(ze.width+=this.parser.getStrokeThinkness(this.defaultStyle,ze.prop))}return w}get startXOffset(){return this.defaultStyle.xOffset}get startYOffset(){return this.defaultStyle.metrics.ascent}get lines(){return this.penManager.lines}get displayLinesCount(){var t=this.penManager.linesCount,s=this.defaultStyle.maxLines;return s>0&&t>s&&(t=s),t}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var t=this.displayLinesCount,s=this.defaultStyle.lineHeight*t;return t>0&&(s-=this.defaultStyle.lineSpacing),s}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new Ag({pensPool:this.pensPool,linesPool:this.linesPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(t,s,f){var C;if(t==null)C=this.penManager.plainText;else{var w=this.parser.splitText(t,1);C="";for(var F=0,N=w.length;F<N;F++)C+=w[F]}return(s!=null||f!=null)&&(s==null&&(s=0),f==null&&(f=C.length),C=C.substring(s,f)),C}getPenManager(t,s){if(t===void 0)return this.copyPenManager(s,this.penManager);s===void 0&&(s=this.newPenManager());var f=this.defaultStyle;return this.updatePenManager(t,f.wrapMode,f.wrapWidth,f.lineHeight,s),s}getText(t,s,f,C){if(t==null)return this.penManager.getSliceTagText(s,f,C);var w=this.tmpPenManager,F=this.defaultStyle;return this.updatePenManager(t,F.wrapMode,F.wrapWidth,F.lineHeight,w),w.getSliceTagText(s,f,C)}copyPenManager(t,s){return s===void 0&&(s=this.penManager),s.copy(t)}getTextWidth(t){return t===void 0&&(t=this.penManager),t.getMaxLineWidth()}getLastPen(t){return t===void 0&&(t=this.penManager),t.lastPen}}var jD={setInteractive:GD,getHitArea:WD};Object.assign(M1.prototype,OD,jD);class E1 extends bt{freeLine(t){if(t)return this.push(t),this}freeLines(t){if(t)return this.pushMultiple(t),this}getLine(t,s,f){var C=this.pop();return C===null&&(C={}),C.text=t,C.width=s,C.newLineMode=f,C}}const qD=Phaser.Utils.Objects.IsPlainObject,el=Phaser.Utils.Objects.GetValue;var Fg=function(e,t){qD(e)?(t=e,e=t.key):t===void 0&&(t={key:e}),t.hasOwnProperty("key")||(t.key=e);var s=t.key,f=t.frame,C=t.width,w=t.height;if(C===void 0||w===void 0){var F=this.textureManager.getFrame(s,f),N=F?F.cutWidth:0,z=F?F.cutHeight:0;C===void 0&&w===void 0?(C=N,w=z):C===void 0?C=N*(w/z):w===void 0&&(w=z*(C/N))}this.images[e]={key:s,frame:f,width:C,height:w,y:el(t,"y",0),left:el(t,"left",0),right:el(t,"right",0),originX:el(t,"originX",0),originY:el(t,"originY",0),tintFill:el(t,"tintFill",!1)}};const P1=Phaser.Display.Canvas.CanvasPool;var w1=function(e,t,s,f,C,w,F,N){s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=e.cutWidth),w===void 0&&(w=e.cutHeight),N===void 0&&(N=!1),N&&(s=Math.round(s),f=Math.round(f));var z=t.getContext("2d",{willReadFrequently:!0});if(F){var H=P1.create(null,C,w,Phaser.CANVAS,!0),Z=H.getContext("2d",{willReadFrequently:!0});Z.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,0,0,C,w),Z.globalCompositeOperation="source-in",Z.fillStyle=F,Z.fillRect(0,0,C,w),z.drawImage(H,0,0,C,w,s,f,C,w),P1.remove(H)}else z.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,s,f,C,w)},tI=function(e,t,s,f,C,w){var F=this.get(e);if(F){var N=this.textureManager.getFrame(F.key,F.frame),z=F.width,H=F.height;s+=F.left-F.originX*z,f+=F.y-F.originY*H,F.tintFill||(C=void 0),w1(N,t.canvas,s,f,z,H,C,w)}};class Dg{constructor(t){this.textureManager=t.sys.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(t,s){if(typeof t=="string")Fg.call(this,t,s);else if(Array.isArray(t))for(var f=t,C=0,w=f.length;C<w;C++)Fg.call(this,f[C]);else{var f=t;for(var t in f)Fg.call(this,t,f[t])}return this}has(t){return this.images.hasOwnProperty(t)}remove(t){return this.has(t)&&delete this.images[t],this}get(t){return this.has(t)||this.textureManager.exists(t)&&this.add(t),this.images[t]}getOuterWidth(t){var s=this.get(t);return s?s.width+s.left+s.right:0}getFrame(t){var s=this.get(t);return s?this.textureManager.getFrame(s.key,s.frame):void 0}hasTexture(t){return!!this.getFrame(t)}}var eI={draw:tI};Object.assign(Dg.prototype,eI);var b1=function(e,t){!e&&e!==0&&(e=""),t===void 0&&(t=!0),Array.isArray(e)&&(e=e.join(`
`));var s;return t?s=`${this.text}
${e}`:s=`${this.text}${e}`,s!=this.text&&this.setText(s),this};const iI=Phaser.Utils.Objects.IsPlainObject,A1=Phaser.DOM.AddToDOM,R1=Phaser.Display.Canvas.CanvasPool,sI=Phaser.GameObjects.GameObject,Ks=Phaser.Utils.Objects.GetValue,nI=Phaser.DOM.RemoveFromDOM,rI=Gi.SPLITREGEXP,aI=Phaser.Utils.String.UUID;var il=null,Ig=null,Bg=null;class Ng extends l1{constructor(t,s,f,C,w,F,N){if(iI(s)){var z=s;s=Ks(z,"x",0),f=Ks(z,"y",0),C=Ks(z,"text",""),w=Ks(z,"style")}if(s===void 0&&(s=0),f===void 0&&(f=0),super(t,F),this.renderer=t.sys.game.renderer,this.setPosition(s,f),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=R1.create(this),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this._imageManager=void 0,w){if(w.hasOwnProperty("align")){var H=w.align;delete w.align,w.halign=H}w.hasOwnProperty("stroke")&&!w.hasOwnProperty("strokeThickness")&&(w.strokeThickness=1)}this.style=new bg(this,w);var Z=Ks(w,"images",void 0);Z&&this.addImage(Z),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=aI(),this.texture=t.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null);var tt=Ks(w,"sharedPool",!0),nt,st,ht;tt?(il||(il={},Ig=new bt,Bg=new E1,this.scene.game.events.once("destroy",function(){il=null,Ig=null,Bg=null})),il.hasOwnProperty(F)||(il[F]=new bt),nt=il[F],st=Ig,ht=Bg):(nt=new bt,st=new bt,ht=new E1),this.canvasText=new M1({parent:this,context:this.context,parser:N,style:this.style,pensPool:nt,linesPool:st,wrapTextLinesPool:ht}),this.parser=N,this.initRTL(),w&&w.padding&&this.setPadding(w.padding),this.setText(C),this.setUrlTagCursorStyle(Ks(w,"urlTagCursorStyle","pointer")),Ks(w,"interactive",!1)&&this.setInteractive()}preDestroy(){nI(this.canvas),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0),R1.remove(this.canvas);var t=this.texture;t&&t.destroy()}set text(t){this.setText(t)}get text(){return this._text}initRTL(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",A1(this.canvas,this.scene.sys.canvas),this.originX=1)}setRTL(t){t===void 0&&(t=!0);var s=this.style;if(s.rtl===t)return this;if(s.rtl=t,t?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",A1(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),s.halign==="left"?s.halign="right":s.halign==="right"&&(s.halign="left"),this._imageManager){var f=this._imageManager.images;for(var C in f)f[C].originX=1-f[C].originX}return this}setText(t){return t=qh(t),t===this._text?this:(this._text=t,this.updateText(),this)}setPadding(t,s,f,C){if(typeof t=="object"){var w=t,F=Ks(w,"x",null);F!==null?(t=F,f=F):(t=Ks(w,"left",0),f=Ks(w,"right",t));var N=Ks(w,"y",null);N!==null?(s=N,C=N):(s=Ks(w,"top",0),C=Ks(w,"bottom",s))}else t===void 0&&(t=0),s===void 0&&(s=t),f===void 0&&(f=t),C===void 0&&(C=s);return this.padding.left=t,this.padding.top=s,this.padding.right=f,this.padding.bottom=C,this.updateText(!1)}updateText(t){t===void 0&&(t=!0);var s=this.canvasText,f=this.style;t&&s.updatePenManager(this._text,f.wrapMode,f.wrapWidth,f.lineHeight);var C=this.padding,w,F,N=Math.ceil(s.linesWidth);f.fixedWidth===0?(this.width=N+C.left+C.right,w=N):(this.width=f.fixedWidth,w=this.width-C.left-C.right,w<N&&(w=N)),f.fixedHeight===0?(this.height=s.linesHeight+C.top+C.bottom,F=s.linesHeight):(this.height=f.fixedHeight,F=this.height-C.top-C.bottom,F<s.linesHeight&&(F=s.linesHeight));var z=this.width,H=this.height;this.updateDisplayOrigin();var Z=f.resolution;z*=Z,H*=Z,z=Math.max(Math.ceil(z),1),H=Math.max(Math.ceil(H),1);var tt=this.canvas,nt=this.context;tt.width!==z||tt.height!==H?(tt.width=z,tt.height=H,this.frame.setSize(z,H)):nt.clearRect(0,0,z,H),nt.save(),nt.scale(Z,Z);var st=this.style.rtl?C.right:C.left,ht=C.top;s.draw(st,ht,w,F),nt.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(tt,this.frame.source.glTexture,!0),this.frame.glTexture.spectorMetadata={textureKey:"BBCodeText Game Object"}),this.dirty=!0;var ft=this.input;return ft&&!ft.customHitArea&&(ft.hitArea.width=this.width,ft.hitArea.height=this.height),this}toJSON(){var t=Components.ToJSON(this),s={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=s,t}setInteractive(t,s,f){var C=!!this.input;return sI.prototype.setInteractive.call(this,t,s,f),C||this.canvasText.setInteractive(),this}setUrlTagCursorStyle(t){return this.urlTagCursorStyle=t,this}get urlTagCursorStyle(){return this.canvasText.urlTagCursorStyle}set urlTagCursorStyle(t){this.canvasText.urlTagCursorStyle=t}getWrappedText(t,s,f){return typeof t=="number"&&(f=s,s=t,t=void 0),t=this.canvasText.getText(t,s,f,!0),t.split(rI)}getPlainText(t,s,f){return typeof t=="number"&&(f=s,s=t,t=void 0),this.canvasText.getPlainText(t,s,f)}getText(t,s,f,C){return typeof t=="number"&&(C=f,f=s,s=t,t=void 0),C===void 0&&(C=!1),this.canvasText.getText(t,s,f,C)}getSubString(t,s,f){return typeof t=="number"&&(f=s,s=t,t=void 0),this.getText(t,s,f)}copyPenManager(t){return this.canvasText.copyPenManager(t)}getPenManager(t,s){return this.canvasText.getPenManager(t,s)}setSize(t,s){return this.setFixedSize(t,s)}resize(t,s){return this.setFixedSize(t,s)}get imageManager(){return this._imageManager||(this._imageManager=new Dg(this.scene)),this._imageManager}addImage(t,s){return this.imageManager.add(t,s),this}drawAreaBounds(t,s){return this.canvasText.hitAreaManager.drawBounds(t,s,this),this}generateTexture(t,s,f,C,w){var F=this.canvas;return C===void 0?C=F.width:C*=this.resolution,w===void 0?w=F.height:w*=this.resolution,ea(this.scene,F,t,s,f,C,w),this}getHitArea(t,s,f){return this.canvasText.getHitArea(t,s,f)}}var oI={appendText:b1};Object.assign(Ng.prototype,oI);var hI=function(e,t){for(var s=this.tagRegex,f=[],C=0,w=!1,F=!1;;){var N=s.RE_SPLITTEXT.exec(e);if(!N)break;var z=N[0];if(F)if(s.RE_ESC_CLOSE.test(z))F=!1;else continue;else if(w)if(s.RE_RAW_CLOSE.test(z))w=!1;else continue;else s.RE_ESC_OPEN.test(z)?F=!0:s.RE_RAW_OPEN.test(z)&&(w=!0);var H=s.RE_SPLITTEXT.lastIndex,Z=H-z.length;if(C<Z){var tt=e.substring(C,Z);f.push(tt)}t===void 0&&f.push(z),C=H}var nt=e.length;return C<nt&&f.push(e.substring(C,nt)),f};const Ai=!1,yi=!0;var lI={plainText:null,prevProp:null},uI=function(e,t){var s=this.tagRegex;t==null&&(t={});var f="";if(t.img&&we(t,Ai,"img"),t.esc)s.RE_ESC_CLOSE.test(e)?we(t,Ai,"esc"):f=e;else if(t.raw)s.RE_RAW_CLOSE.test(e)?we(t,Ai,"raw"):f=e;else if(s.RE_ESC_OPEN.test(e))we(t,yi,"esc",!0);else if(s.RE_ESC_CLOSE.test(e))we(t,Ai,"esc");else if(s.RE_RAW_OPEN.test(e))we(t,yi,"raw",!0);else if(s.RE_RAW_CLOSE.test(e))we(t,Ai,"raw");else if(s.RE_BLOD_OPEN.test(e))we(t,yi,"b",!0);else if(s.RE_BLOD_CLOSE.test(e))we(t,Ai,"b");else if(s.RE_ITALICS_OPEN.test(e))we(t,yi,"i",!0);else if(s.RE_ITALICS_CLOSE.test(e))we(t,Ai,"i");else if(s.RE_WEIGHT_OPEN.test(e)){var C=e.match(s.RE_WEIGHT_OPEN);we(t,yi,"weight",C[1])}else if(s.RE_WEIGHT_CLOSE.test(e))we(t,Ai,"weight");else if(s.RE_SIZE_OPEN.test(e)){var C=e.match(s.RE_SIZE_OPEN);we(t,yi,"size",`${C[1]}px`)}else if(s.RE_SIZE_CLOSE.test(e))we(t,Ai,"size");else if(s.RE_FAMILY_OPEN.test(e)){var C=e.match(s.RE_FAMILY_OPEN);we(t,yi,"family",C[1])}else if(s.RE_FAMILY_CLOSE.test(e))we(t,Ai,"family");else if(s.RE_COLOR_OPEN.test(e)){var C=e.match(s.RE_COLOR_OPEN);we(t,yi,"color",C[1])}else if(s.RE_COLOR_CLOSE.test(e))we(t,Ai,"color");else if(s.RE_UNDERLINE_OPEN.test(e))we(t,yi,"u",!0);else if(s.RE_UNDERLINE_OPENC.test(e)){var C=e.match(s.RE_UNDERLINE_OPENC);we(t,yi,"u",C[1])}else if(s.RE_UNDERLINE_CLOSE.test(e))we(t,Ai,"u");else if(s.RE_STRIKETHROUGH_OPEN.test(e))we(t,yi,"s",!0);else if(s.RE_STRIKETHROUGH_OPENC.test(e)){var C=e.match(s.RE_STRIKETHROUGH_OPENC);we(t,yi,"s",C[1])}else if(s.RE_STRIKETHROUGH_CLOSE.test(e))we(t,Ai,"s");else if(s.RE_SHADOW_OPEN.test(e))we(t,yi,"shadow",!0);else if(s.RE_SHADOW_OPENC.test(e)){var C=e.match(s.RE_SHADOW_OPENC);we(t,yi,"shadow",C[1])}else if(s.RE_SHADOW_CLOSE.test(e))we(t,Ai,"shadow");else if(s.RE_STROKE_OPEN.test(e))we(t,yi,"stroke",!0);else if(s.RE_STROKE_OPENC.test(e)){var C=e.match(s.RE_STROKE_OPENC);we(t,yi,"stroke",C[1])}else if(s.RE_STROKE_CLOSE.test(e))we(t,Ai,"stroke");else if(s.RE_BGCOLOR_OPEN.test(e)){var C=e.match(s.RE_BGCOLOR_OPEN);we(t,yi,"bgcolor",C[1])}else if(s.RE_BGCOLOR_CLOSE.test(e))we(t,Ai,"bgcolor");else if(s.RE_OFFSETY_OPEN.test(e)){var C=e.match(s.RE_OFFSETY_OPEN);we(t,yi,"y",parseFloat(C[1]))}else if(s.RE_OFFSETY_CLOSE.test(e))we(t,Ai,"y");else if(s.RE_IMAGE_OPEN.test(e)){var C=e.match(s.RE_IMAGE_OPEN);we(t,yi,"img",C[1])}else if(s.RE_IMAGE_CLOSE.test(e))we(t,Ai,"img");else if(s.RE_AREA_OPEN.test(e)){var C=e.match(s.RE_AREA_OPEN);we(t,yi,"area",C[1])}else if(s.RE_AREA_CLOSE.test(e))we(t,Ai,"area");else if(s.RE_URL_OPEN.test(e)){var C=e.match(s.RE_URL_OPEN);we(t,yi,"url",C[1])}else if(s.RE_URL_CLOSE.test(e))we(t,Ai,"url");else if(s.RE_ALIGN_OPEN.test(e)){var C=e.match(s.RE_ALIGN_OPEN);we(t,yi,"align",C[1])}else if(s.RE_ALIGN_CLOSE.test(e))we(t,Ai,"align");else if(s.RE_ID_OPEN.test(e)){var C=e.match(s.RE_ID_OPEN);we(t,yi,"id",C[1])}else s.RE_ID_CLOSE.test(e)?we(t,Ai,"id"):f=e;var w=lI;return w.plainText=f,w.prop=t,w},we=function(e,t,s,f){return t===yi?e[s]=f:e.hasOwnProperty(s)&&delete e[s],e},dI=function(e,t){var s=cI;if(t.hasOwnProperty("img"))s.image=t.img;else{if(s.image=null,t.hasOwnProperty("family")?s.fontFamily=t.family:s.fontFamily=e.fontFamily,t.hasOwnProperty("size")){var f=t.size;typeof f=="number"&&(f=`${f}px`),s.fontSize=f}else s.fontSize=e.fontSize;s.fontStyle=fI(t),t.hasOwnProperty("color")?s.color=t.color:s.color=e.color,t.hasOwnProperty("stroke")?t.stroke===!0?(s.stroke=e.stroke,s.strokeThickness=e.strokeThickness):(s.stroke=t.stroke,s.strokeThickness=e.strokeThickness):(s.stroke=e.stroke,s.strokeThickness=0)}return t.hasOwnProperty("shadow")?t.shadow===!0?(s.shadowColor=e.shadowColor,s.shadowOffsetX=e.shadowOffsetX,s.shadowOffsetY=e.shadowOffsetY,s.shadowBlur=e.shadowBlur,s.shadowStroke=!0,s.shadowFill=!0):(s.shadowColor=t.shadow,s.shadowOffsetX=e.shadowOffsetX,s.shadowOffsetY=e.shadowOffsetY,s.shadowBlur=e.shadowBlur,s.shadowStroke=!0,s.shadowFill=!0):(s.shadowColor="#000",s.shadowOffsetX=0,s.shadowOffsetY=0,s.shadowBlur=0,s.shadowStroke=!1,s.shadowFill=!1),t.hasOwnProperty("u")?t.u===!0?(s.underlineColor=e.underlineColor,s.underlineThickness=e.underlineThickness,s.underlineOffset=e.underlineOffset):(s.underlineColor=t.u,s.underlineThickness=e.underlineThickness,s.underlineOffset=e.underlineOffset):(s.underlineColor="#000",s.underlineThickness=0,s.underlineOffset=0),t.hasOwnProperty("s")?t.s===!0?(s.strikethroughColor=e.strikethroughColor,s.strikethroughThickness=e.strikethroughThickness,s.strikethroughOffset=e.strikethroughOffset):(s.strikethroughColor=t.s,s.strikethroughThickness=e.strikethroughThickness,s.strikethroughOffset=e.strikethroughOffset):(s.strikethroughColor="#000",s.strikethroughThickness=0,s.strikethroughOffset=0),t.hasOwnProperty("bgcolor")?s.bgcolor=t.bgcolor:s.bgcolor=null,s},fI=function(e){var t=e.b,s=e.weight,f=e.i;return t||s||f?f?t?"bold italic":s?`${s} italic`:"italic":t?"bold":s.toString():""},cI=new bg,pI=function(e,t,s){s==null&&(s=vI);var f=this.delimiters[0],C=this.delimiters[1],w=[];for(var F in s)t.hasOwnProperty(F)||w.push(`${f}/${F}${C}`);for(var F in t){var N=t[F];if(F!=="img"){if(s[F]===N)continue}switch(F){case"size":w.push(`${f}size=${N.replace("px","")}${C}`);break;case"color":case"weight":case"family":case"stroke":case"bgcolor":case"y":case"img":case"area":case"url":case"align":case"id":w.push(`${f}${F}=${N}${C}`);break;case"u":case"s":N===!0?w.push(`${f}${F}${C}`):w.push(`${f}${F}=${N}${C}`);break;default:w.push(`${f}${F}${C}`);break}}return w.push(e),w.join("")},vI={},sl=function(e){return e.replace(mI,"\\$&").replace(gI,"\\x2d")},mI=/[|\\{}()[\]^$+*?.]/g,gI=/-/g,L1,O1,be={},Mi=function(e,t,s,f){return f===void 0?`${e}${s}${t}`:`${e}${s}=(${f})${t}`},Ji=function(e,t,s){return`${e}/${s}${t}`},xI=function(e){return`[^${e}]+`},Gg="[-.0-9]+",yI=["[a-zA-Z]+","#[0-9abcdef]+","rgba?\\(s*[.0-9]+s*(,s*[.0-9]+s*){2,3}\\)"],nl=yI.join("|"),F1=function(e,t){if(t===void 0){var s=e;e=s[0],t=s[1]}if(L1===e&&O1===t)return!1;L1=e,O1=t,e=sl(e),t=sl(t);var f=xI(t),C="esc",w=Mi(e,t,C),F=Ji(e,t,C),N="raw",z=Mi(e,t,N),H=Ji(e,t,N),Z="b",tt=Mi(e,t,Z),nt=Ji(e,t,Z),st="i",ht=Mi(e,t,st),ft=Ji(e,t,st),dt="weight",gt=Mi(e,t,dt,Gg),Et=Ji(e,t,dt),yt="size",Dt=Mi(e,t,yt,Gg),Wt=Ji(e,t,yt),qt="family",re=Mi(e,t,qt,f),ce=Ji(e,t,qt),fe="color",ye=Mi(e,t,fe,nl),ge=Ji(e,t,fe),Ue="u",ze=Mi(e,t,Ue),me=Mi(e,t,Ue,nl),li=Ji(e,t,Ue),mi="s",wi=Mi(e,t,mi),qi=Mi(e,t,mi,nl),Hi=Ji(e,t,mi),Us="shadow",Nn=Mi(e,t,Us),Gn=Mi(e,t,Us,nl),Vr=Ji(e,t,Us),Th="stroke",kv=Mi(e,t,Th),ks=Mi(e,t,Th,nl),pf=Ji(e,t,Th),vf="bgcolor",Vv=Mi(e,t,vf,nl),Sa=Ji(e,t,vf),iR="y",sR=Mi(e,t,iR,Gg),nR=Ji(e,t,iR),rR="img",aR=Mi(e,t,rR,f),oR=Ji(e,t,rR),hR="area",lR=Mi(e,t,hR,f),uR=Ji(e,t,hR),dR="url",fR=Mi(e,t,dR,f),cR=Ji(e,t,dR),pR="align",vR=Mi(e,t,pR,f),mR=Ji(e,t,pR),gR="id",xR=Mi(e,t,gR,f),yR=Ji(e,t,gR);return be.RE_ESC_OPEN=new RegExp(w,"i"),be.RE_ESC_CLOSE=new RegExp(F,"i"),be.RE_RAW_OPEN=new RegExp(z,"i"),be.RE_RAW_CLOSE=new RegExp(H,"i"),be.RE_BLOD_OPEN=new RegExp(tt,"i"),be.RE_BLOD_CLOSE=new RegExp(nt,"i"),be.RE_ITALICS_OPEN=new RegExp(ht,"i"),be.RE_ITALICS_CLOSE=new RegExp(ft,"i"),be.RE_WEIGHT_OPEN=new RegExp(gt,"i"),be.RE_WEIGHT_CLOSE=new RegExp(Et,"i"),be.RE_SIZE_OPEN=new RegExp(Dt,"i"),be.RE_SIZE_CLOSE=new RegExp(Wt,"i"),be.RE_FAMILY_OPEN=new RegExp(re,"i"),be.RE_FAMILY_CLOSE=new RegExp(ce,"i"),be.RE_COLOR_OPEN=new RegExp(ye,"i"),be.RE_COLOR_CLOSE=new RegExp(ge,"i"),be.RE_UNDERLINE_OPEN=new RegExp(ze,"i"),be.RE_UNDERLINE_OPENC=new RegExp(me,"i"),be.RE_UNDERLINE_CLOSE=new RegExp(li,"i"),be.RE_STRIKETHROUGH_OPEN=new RegExp(wi,"i"),be.RE_STRIKETHROUGH_OPENC=new RegExp(qi,"i"),be.RE_STRIKETHROUGH_CLOSE=new RegExp(Hi,"i"),be.RE_SHADOW_OPEN=new RegExp(Nn,"i"),be.RE_SHADOW_OPENC=new RegExp(Gn,"i"),be.RE_SHADOW_CLOSE=new RegExp(Vr,"i"),be.RE_STROKE_OPEN=new RegExp(kv,"i"),be.RE_STROKE_OPENC=new RegExp(ks,"i"),be.RE_STROKE_CLOSE=new RegExp(pf,"i"),be.RE_BGCOLOR_OPEN=new RegExp(Vv,"i"),be.RE_BGCOLOR_CLOSE=new RegExp(Sa,"i"),be.RE_OFFSETY_OPEN=new RegExp(sR,"i"),be.RE_OFFSETY_CLOSE=new RegExp(nR,"i"),be.RE_IMAGE_OPEN=new RegExp(aR,"i"),be.RE_IMAGE_CLOSE=new RegExp(oR,"i"),be.RE_AREA_OPEN=new RegExp(lR,"i"),be.RE_AREA_CLOSE=new RegExp(uR,"i"),be.RE_URL_OPEN=new RegExp(fR,"i"),be.RE_URL_CLOSE=new RegExp(cR,"i"),be.RE_ALIGN_OPEN=new RegExp(vR,"i"),be.RE_ALIGN_CLOSE=new RegExp(mR,"i"),be.RE_ID_OPEN=new RegExp(xR,"i"),be.RE_ID_CLOSE=new RegExp(yR,"i"),be.RE_SPLITTEXT=new RegExp([z,H,w,F,tt,nt,ht,ft,gt,Et,Dt,Wt,re,ce,ye,ge,ze,me,li,wi,qi,Hi,Nn,Gn,Vr,kv,ks,pf,Vv,Sa,sR,nR,aR,oR,lR,uR,fR,cR,vR,mR,xR,yR].join("|"),"ig"),!0},D1=function(e,t){return e!==void 0&&F1(e,t),Object.assign({},be)};const SI=Phaser.Utils.Objects.GetValue;let I1=class{constructor(t){var s=SI(t,"delimiters","[]");this.tagRegex=D1(s),this.delimiters=s}getStrokeThinkness(t,s){var f;return s.hasOwnProperty("stroke")?f=t.strokeThickness:f=0,f}setDelimiters(t,s){return F1(t,s)&&(this.tagRegex=D1()),this}};var TI={splitText:hI,tagTextToProp:uI,propToContextStyle:dI,propToTagText:pI};Object.assign(I1.prototype,TI);class Ug extends Ng{constructor(t,s,f,C,w){var F=new I1(w);super(t,s,f,C,w,"rexBBCodeText",F)}setDelimiters(t,s){return this.parser.setDelimiters(t,s),this}}c.register("BBCodeText",function(e,t,s,f){var C=new Ug(this.scene,e,t,s,f);return this.scene.add.existing(C),C}),j(window,"RexPlugins.UI.BBCodeText",Ug);var CI={plainText:null,prevProp:null},MI=new bg;let EI=class{constructor(t){t===void 0&&(t={}),this.tags=t}addTag(t,s){this.tags[t]=s}getTag(t){return this.tags[t]}splitText(t,s){for(var f=[],C=0;;){var w=kg.exec(t);if(!w)break;var F=w[0],N=kg.lastIndex-F.length;if(C<N&&f.push(t.substring(C,N)),s===void 0)f.push(F);else if(s===1){if(N1.test(F)){var z=F.match(G1);f.push(z[2])}else if(U1.test(F)){var z=F.match(k1);f.push(z[2])}}C=kg.lastIndex}var H=t.length;return C<H&&f.push(t.substring(C,H)),f}tagTextToProp(t,s){var f,C;if(N1.test(t)){var w=t.match(G1);if(w!=null){var F=w[1],N=this.tags;N.hasOwnProperty(F)?C=N[F]:C={},C._class=F,f=w[2]}}else if(U1.test(t)){var w=t.match(k1);if(w!=null){var z=w[1];C=PI(z),C._style=z,f=w[2]}}f==null&&(f=t),C==null&&(C={});var H=CI;return H.plainText=f,H.prop=C,H}propToContextStyle(t,s){var f=MI;if(s.hasOwnProperty("img"))f.image=s.img;else{if(f.image=null,s.hasOwnProperty("family")||s.hasOwnProperty("fontFamily")||s.hasOwnProperty("font-family")){var C=s.hasOwnProperty("family")?s.family:s.hasOwnProperty("fontFamily")?s.fontFamily:s["font-family"];f.fontFamily=C}else f.fontFamily=t.fontFamily;if(s.hasOwnProperty("size")||s.hasOwnProperty("fontSize")||s.hasOwnProperty("font-size")){var w=s.hasOwnProperty("size")?s.size:s.hasOwnProperty("fontSize")?s.fontSize:s["font-size"];typeof w=="number"&&(w=`${w}px`),f.fontSize=w}else f.fontSize=t.fontSize;if(s.hasOwnProperty("style")||s.hasOwnProperty("fontStyle")||s.hasOwnProperty("font-style")){var F=s.hasOwnProperty("style")?s.style:s.hasOwnProperty("fontStyle")?s.fontStyle:s["font-style"];f.fontStyle=F}else f.fontStyle=t.fontStyle;if(s.hasOwnProperty("color")||s.hasOwnProperty("font-color")){var N=s.hasOwnProperty("color")?s.color:s["font-color"];f.color=N}else f.color=t.color;if(s.hasOwnProperty("stroke")){var z=s.stroke;f.stroke=z.hasOwnProperty("color")?z.color:t.stroke,f.strokeThickness=z.hasOwnProperty("thickness")?z.thickness:t.strokeThickness}else f.stroke=t.stroke,f.strokeThickness=t.strokeThickness}if(s.hasOwnProperty("shadow")){var H=s.shadow;f.shadowColor=H.hasOwnProperty("color")?H.color:t.shadowColor,f.shadowOffsetX=H.hasOwnProperty("offsetX")?H.offsetX:t.shadowOffsetX,f.shadowOffsetY=H.hasOwnProperty("offsetY")?H.offsetY:t.shadowOffsetY,f.shadowBlur=H.hasOwnProperty("blur")?H.blur:t.shadowBlur,f.shadowStroke=!0,f.shadowFill=!0}else f.shadowColor=t.shadowColor,f.shadowOffsetX=t.shadowOffsetX,f.shadowOffsetY=t.shadowOffsetY,f.shadowBlur=t.shadowBlur,f.shadowStroke=t.shadowStroke,f.shadowFill=t.shadowFill;if(s.hasOwnProperty("u")||s.hasOwnProperty("underline")){var Z=s.hasOwnProperty("u")?s.u:s.underline;f.underlineColor=Z.hasOwnProperty("color")?Z.color:t.underlineColor,f.underlineThickness=Z.hasOwnProperty("thickness")?Z.thickness:t.underlineThickness,f.underlineOffset=Z.hasOwnProperty("offset")?Z.offset:t.underlineOffset}else f.underlineColor=t.underlineColor,f.underlineThickness=t.underlineThickness,f.underlineOffset=t.underlineOffset;if(s.hasOwnProperty("s")||s.hasOwnProperty("strikethrough")){var tt=s.hasOwnProperty("s")?s.s:s.strikethrough;f.strikethroughColor=tt.hasOwnProperty("color")?tt.color:t.strikethroughColor,f.strikethroughThickness=tt.hasOwnProperty("thickness")?tt.thickness:t.strikethroughThickness,f.strikethroughOffset=tt.hasOwnProperty("offset")?tt.offset:t.strikethroughOffset}else f.strikethroughColor=t.strikethroughColor,f.strikethroughThickness=t.strikethroughThickness,f.strikethroughOffset=t.strikethroughOffset;return f}getStrokeThinkness(t,s){var f;if(s.hasOwnProperty("stroke")){var C=s.stroke;f=C.hasOwnProperty("thickness")?C.thickness:t.strokeThickness}else f=t.strokeThickness;return f}propToTagText(t,s,f){return s.hasOwnProperty("_class")?t===""&&this.isTextTag(s._class)?"":`<class='${s._class}'>${t}</class>`:s.hasOwnProperty("_style")?`<style='${s._style}'>${t}</style>`:t}destroy(){this.tags=void 0}isTextTag(t){var s=this.tags[t];return s?s.img==null:!1}};var PI=function(e){e=e.split(";");for(var t={},s,f,C,w=0,F=e.length;w<F;w++)if(s=e[w].split(":"),f=s[0],C=s[1],!(B1(f)||B1(C))){switch(f){case"stroke":var N=C.split(" "),z=N.length;C={},z>=1&&(C.color=N[0]),z>=2&&(C.thickness=parseInt(N[1].replace("px","")));break;case"shadow":var N=C.split(" "),z=N.length;C={},z>=1&&(C.color=N[0]),z>=2&&(C.offsetX=parseInt(N[1].replace("px",""))),z>=3&&(C.offsetY=parseInt(N[2].replace("px",""))),z>=4&&(C.blur=parseInt(N[3].replace("px","")));break;case"u":case"underline":case"s":case"strikethrough":var N=C.split(" "),z=N.length;C={},z>=1&&(C.color=N[0]),z>=2&&(C.thickness=parseInt(N[1].replace("px",""))),z>=3&&(C.offset=parseInt(N[2].replace("px",""))),f==="underline"?f="u":f==="strikethrough"&&(f="s");break;case"y":C=parseFloat(C);break}t[f]=C}return t},B1=function(e){return e=e.replace(wI,""),e.length===0},kg=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,N1=/<\s*class=/i,G1=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,U1=/<\s*style=/i,k1=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,wI=/^\s+|\s+$/;const bI=Phaser.Utils.Objects.GetValue;class V1 extends Ng{constructor(t,s,f,C,w){var F=bI(w,"tags",void 0),N=new EI(F);super(t,s,f,C,w,"rexTagText",N)}addTag(t,s){return this.parser.addTag(t,s),this.updateText(!0)}addTags(t){for(var s in t)this.parser.addTag(s,t[s]);return this.updateText(!0)}getTag(t){return this.parser.getTag(t)}preDestroy(){super.preDestroy(),this.parser.destroy(),this.parser=void 0}}c.register("tagText",function(e,t,s,f){var C=new V1(this.scene,e,t,s,f);return this.scene.add.existing(C),C}),j(window,"RexPlugins.UI.TagText",V1);const Sc=Phaser.Utils.Objects.GetValue;var Tc=function(e,t){return t===void 0?e:e[t]},Ha=function(e,t,s){e===void 0&&(e={}),t===void 0&&(t=0);var f=typeof t;return f==="string"?e[t]=s:f==="number"?(e.left=t,e.right=t,e.top=t,e.bottom=t):(e.left=Sc(t,"left",0),e.right=Sc(t,"right",0),e.top=Sc(t,"top",0),e.bottom=Sc(t,"bottom",0)),e};let Vg=class{constructor(t,s){this.setParent(t),this.type=s,this.renderable=!1,this.reset().setActive()}destroy(){this.parent.removeChild(this)}setParent(t){return this.parent=t,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(t){return t&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(t){this.setDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}onFree(){this.reset().setParent()}reset(){return this}render(){}contains(t,s){return!1}};Object.assign(Vg.prototype,le);var AI={renderContent(){},render(){if(!this.willRender)return this;var e=this.context;if(e.save(),e.globalAlpha=this.alpha,this.toLocalPosition){var t=this.drawX,s=this.drawY;this.autoRound&&(t=Math.round(t),s=Math.round(s)),e.translate(t,s),e.scale(this.scaleX,this.scaleY),e.rotate(this.rotation)}return this.drawBelowCallback&&this.drawBelowCallback(this),this.renderContent(),this.drawAboveCallback&&this.drawAboveCallback(this),e.restore(),this}};const RI=Phaser.Math.RotateAround;var LI=function(e,t,s,f){return f===void 0?f={}:f===!0&&(zg===void 0&&(zg={}),f=zg),f.x=(e-s.drawX)/s.scaleX,f.y=(t-s.drawY)/s.scaleY,s.rotation!==0&&RI(f,0,0,-s.rotation),f},zg;const OI=Phaser.Geom.Rectangle;var FI=function(e,t){if(this.width===0||this.height===0)return!1;var s=LI(e,t,this,!0);return DI(this).contains(s.x,s.y)},DI=function(e){Cc===void 0&&(Cc=new OI);var t=e.drawTLX,s=e.drawTLY;return Cc.setTo(t,s,e.drawTRX-t,e.drawBLY-s),Cc},Cc;const II=Phaser.Math.RotateAround;var z1=function(e,t,s,f){return f===void 0?f={}:f===!0&&(Wg===void 0&&(Wg={}),f=Wg),f.x=t,f.y=s,e.rotation!==0&&II(f,0,0,e.rotation),f.x=f.x*e.scaleX+e.drawX,f.y=f.y*e.scaleY+e.drawY,f},Wg;const W1=Phaser.GameObjects.Components.TransformMatrix;var BI=function(e,t,s,f){f===void 0?f={}:f===!0&&(f=NI);var C=t-e.width*e.originX,w=s-e.height*e.originY;return Zu===void 0&&(Zu=new W1,X1=new W1),e.parentContainer?e.getWorldTransformMatrix(Zu,X1):Zu.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),Zu.transformPoint(C,w,f),f},Zu,X1,NI={},GI=function(e,t,s,f,C){var w=z1(t,s,f,!0),F=BI(e,w.x,w.y,C);return F},H1=function(e,t,s,f,C){typeof s!="number"&&(C=s,s=0,f=0);var w=t.drawCenterX+s,F=t.drawCenterY+f;return GI(e,t,w,F,C)},UI=function(e,t,s){return H1(this.parent,this,e,t,s)},Y1={contains:FI,getWorldPosition:UI};Object.assign(Y1,AI);const kI=Phaser.Math.DegToRad,VI=Phaser.Math.RadToDeg,Mc=Phaser.Utils.Objects.GetValue;class Yo extends Vg{constructor(t,s){super(t,s),this.renderable=!0,this.scrollFactorX=1,this.scrollFactorY=1,this.toLocalPosition=!0,this.originX=0,this.offsetX=0,this.offsetY=0}get visible(){return this._visible}set visible(t){this.setDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDirty(this._alpha!=t),this._alpha=t}setAlpha(t){return this.alpha=t,this}get x(){return this._x}set x(t){this.setDirty(this._x!=t),this._x=t}setX(t){return this.x=t,this}get y(){return this._y}set y(t){this.setDirty(this._y!=t),this._y=t}setY(t){return this.y=t,this}setPosition(t,s){return this.x=t,this.y=s,this}setInitialPosition(t,s){return this.x0=t,this.y0=s,this}setScrollFactorX(t){return this.scrollFactorX=t,this}setScrollFactorY(t){return this.scrollFactorY=t,this}setScrollFactor(t,s){return s===void 0&&(s=t),this.scrollFactorX=t,this.scrollFactorY=s,this}get rotation(){return this._rotation}set rotation(t){this.setDirty(this._rotation!=t),this._rotation=t}setRotation(t){return this.rotation=t,this}get angle(){return VI(this._rotation)}set angle(t){this.rotation=kI(t)}setAngle(t){return this.angle=t,this}get scaleX(){return this._scaleX}set scaleX(t){this.setDirty(this._scaleX!==t),this._scaleX=t}setScaleX(t){return this.scaleX=t,this}get width(){return 0}set width(t){}setWidth(t,s){return s===void 0&&(s=!1),this.width=t,s&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(t){this.setDirty(this._leftSpace!==t),this._leftSpace=t}setLeftSpace(t){return this.leftSpace=t,this}get rightSpace(){return this._rightSpace}set rightSpace(t){this.setDirty(this._rightSpace!==t),this._rightSpace=t}setRightSpace(t){return this.rightSpace=t,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(t){this.setDirty(this._scaleY!==t),this._scaleY=t}setScaleY(t){return this.scaleY=t,this}get height(){return 0}set height(t){}setHeight(t,s){return s===void 0&&(s=!1),this.height=t,s&&(this.scaleX=this.scaleY),this}setScale(t,s){return s===void 0&&(s=t),this.scaleX=t,this.scaleY=s,this}setOrigin(t){return this.originX=t,this}setAlign(t){return this.align=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var s=Mc(t,"width",void 0),f=Mc(t,"height",void 0),C=Mc(t,"scaleX",void 0),w=Mc(t,"scaleY",void 0);return s!==void 0?f===void 0&&w===void 0?this.setWidth(s,!0):this.setWidth(s):C!==void 0&&this.setScaleX(C),f!==void 0?s===void 0&&C===void 0?this.setHeight(f,!0):this.setHeight(f):w!==void 0&&this.setScaleY(w),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),this}setDrawBelowCallback(t){return this.drawBelowCallback=t,this}setDrawAboveCallback(t){return this.drawAboveCallback=t,this}reset(){return this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setAlign().setDrawBelowCallback().setDrawAboveCallback(),this}get willRender(){return this.visible&&this.alpha>0}get drawX(){var t=this.x+this.leftSpace+this.offsetX-this.originX*this.width;return this.parent._textOX*this.scrollFactorX+t}get drawY(){var t=this.y+this.offsetY;return this.parent._textOY*this.scrollFactorY+t}get drawTLX(){return 0}get drawTLY(){return 0}get drawBLX(){return 0}get drawBLY(){return 0}get drawTRX(){return 0}get drawTRY(){return 0}get drawBRX(){return 0}get drawBRY(){return 0}get drawCenterX(){return(this.drawTRX+this.drawTLX)/2}get drawCenterY(){return(this.drawBLY+this.drawTLY)/2}}Object.assign(Yo.prototype,Y1);var Ya=function(e,t,s){return t.hasOwnProperty(e)?t[e]:s[e]};const $o=Phaser.Utils.Objects.GetValue;class zI extends Yo{constructor(t,s){super(t,"background"),this.setScrollFactor(0),this.setColor($o(s,"color",null),$o(s,"color2",null),$o(s,"horizontalGradient",!0)),this.setStroke($o(s,"stroke",null),$o(s,"strokeThickness",2)),this.setCornerRadius($o(s,"cornerRadius",0),$o(s,"cornerIteration",null))}set color(t){t=Ce(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=Ce(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,s,f){return f===void 0&&(f=!0),this.color=t,this.color2=s,this.horizontalGradient=f,this}set stroke(t){t=Ce(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,s){return t!=null&&s===void 0&&(s=2),this.stroke=t,this.strokeThickness=s,this}set cornerRadius(t){this.setDirty(this._cornerRadius!=t),this._cornerRadius=t}get cornerRadius(){return this._cornerRadius}set cornerIteration(t){this.setDirty(this._cornerIteration!=t),this._cornerIteration=t}get cornerIteration(){return this._cornerIteration}modifyStyle(t){return t.hasOwnProperty("color")&&this.setColor(t.color,Ya("color2",t,this),Ya("horizontalGradient",t,this)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,Ya("strokeThickness",t,this)),t.hasOwnProperty("cornerRadius")&&this.setCornerRadius(t.cornerRadius,Ya("cornerIteration",t,this)),this}modifyPorperties(t){return super.modifyPorperties(t),this.modifyStyle(t),this}setCornerRadius(t,s){return this.cornerRadius=t,this.cornerIteration=s,this}renderContent(){Eg(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}}const $a=Phaser.Utils.Objects.GetValue;class WI extends Yo{constructor(t,s){super(t,"innerbounds"),this.setScrollFactor(0),this.setColor($a(s,"color",null),$a(s,"color2",null),$a(s,"horizontalGradient",!0)),this.setStroke($a(s,"stroke",null),$a(s,"strokeThickness",2))}set color(t){t=Ce(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=Ce(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,s,f){return f===void 0&&(f=!0),this.color=t,this.color2=s,this.horizontalGradient=f,this}set stroke(t){t=Ce(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,s){return t!=null&&s===void 0&&(s=2),this.stroke=t,this.strokeThickness=s,this}modifyPorperties(t){super.modifyPorperties(t),t.hasOwnProperty("color")&&this.setColor(t.color,$a(t,"color2",null),$a(t,"horizontalGradient",!0)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,$a(t,"strokeThickness",2))}renderContent(){var t=this.parent.padding,s=t.left,f=t.top,C=this.parent.width-t.left-t.right,w=this.parent.height-t.top-t.bottom,F=this.context;if(this.color!=null){var N;if(this.color2!=null){var z;this.horizontalGradient?z=F.createLinearGradient(0,0,C,0):z=F.createLinearGradient(0,0,0,w),z.addColorStop(0,this.color),z.addColorStop(1,this.color2),N=z}else N=this.color;F.fillStyle=N,F.fillRect(s,f,C,w)}this.stroke!=null&&this.strokeThickness>0&&(F.strokeStyle=this.stroke,F.lineWidth=this.strokeThickness,F.strokeRect(s,f,C,w))}}const Ui=Phaser.Utils.Objects.GetValue;class Ec{constructor(t,s){this.parent=t,this.set(s)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY,leftSpace:this.leftSpace,rightSpace:this.rightSpace,backgroundHeight:this.backgroundHeight,backgroundBottomY:this.backgroundBottomY,align:this.align}}set(t){return this.setBold(Ui(t,"bold",!1)),this.setItalic(Ui(t,"italic",!1)),this.setFontSize(Ui(t,"fontSize","16px")),this.setFontFamily(Ui(t,"fontFamily","Courier")),this.setColor(Ui(t,"color","#fff")),this.setStrokeStyle(Ui(t,"stroke",null),Ui(t,"strokeThickness",0)),this.setShadow(Ui(t,"shadowColor",null),Ui(t,"shadowOffsetX",0),Ui(t,"shadowOffsetY",0),Ui(t,"shadowBlur",0)),this.setOffset(Ui(t,"offsetX",0),Ui(t,"offsetY",0)),this.setSpace(Ui(t,"leftSpace",0),Ui(t,"rightSpace",0)),this.setAlign(Ui(t,"align",void 0)),this.setBackgroundColor(Ui(t,"backgroundColor",null)),this.setBackgroundHeight(Ui(t,"backgroundHeight",void 0)),this.setBackgroundBottomY(Ui(t,"backgroundBottomY",void 0)),this.setBackgroundLeftX(Ui(t,"backgroundLeftX",0)),this.setBackgroundRightX(Ui(t,"backgroundRightX",0)),this}modify(t){return t.hasOwnProperty("bold")&&this.setBold(t.bold),t.hasOwnProperty("italic")&&this.setItalic(t.italic),t.hasOwnProperty("fontSize")&&this.setFontSize(t.fontSize),t.hasOwnProperty("fontFamily")&&this.setFontFamily(t.fontFamily),t.hasOwnProperty("color")&&this.setColor(t.color),(t.hasOwnProperty("stroke")||t.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle(Ya("stroke",t,this),Ya("strokeThickness",t,this)),t.hasOwnProperty("shadowColor")&&this.setShadowColor(t.shadowColor),(t.hasOwnProperty("shadowOffsetX")||t.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset(Ya("shadowOffsetX",t,this),Ya("shadowOffsetY",t,this)),t.hasOwnProperty("shadowBlur")&&this.setShadowBlur(t.shaodwBlur),t.hasOwnProperty("offsetX")&&this.setOffsetX(t.offsetX),t.hasOwnProperty("offsetY")&&this.setOffsetY(t.offsetY),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),t.hasOwnProperty("backgroundColor")&&this.setBackgroundColor(t.backgroundColor),t.hasOwnProperty("backgroundHeight")&&this.setBackgroundHeight(t.backgroundHeight),t.hasOwnProperty("backgroundBottomY")&&this.setBackgroundBottomY(t.backgroundBottomY),t.hasOwnProperty("backgroundLeftX")&&this.setBackgroundLeftX(t.backgroundLeftX),t.hasOwnProperty("backgroundRightX")&&this.setBackgroundRightX(t.backgroundRightX),this}setUpdateTextFlag(){return this.parent&&(this.parent.updateTextFlag=!0),this}clone(){return new Ec(null,this.toJSON())}copyFrom(t){return this.set(t.toJSON()),this}copyTo(t){return t.set(this.toJSON()),this}setBold(t){return t===void 0&&(t=!0),this.bold=t,this.setUpdateTextFlag(),this}setItalic(t){return t===void 0&&(t=!0),this.italic=t,this.setUpdateTextFlag(),this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(t){return typeof t=="number"&&(t=`${t}px`),this.fontSize=t,this.setUpdateTextFlag(),this}setFontFamily(t){return this.fontFamily=t,this.setUpdateTextFlag(),this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(t){return this.color=Ce(t),this}get hasFill(){return this.color!=null}setStrokeStyle(t,s){return this.stroke=Ce(t),s!==void 0&&(this.strokeThickness=s),this}setStrokeThickness(t){return this.strokeThickness=t,this}get hasStroke(){return this.stroke!=null&&this.strokeThickness>0}setShadowColor(t){return this.shadowColor=Ce(t),this}setShadowOffset(t,s){return t===void 0&&(t=0),s===void 0&&(s=0),this.shadowOffsetX=t,this.shadowOffsetY=s,this}setShadowBlur(t){return t===void 0&&(t=0),this.shaodwBlur=t,this}setShadow(t,s,f,C){return this.setShadowColor(t).setShadowOffset(s,f).setShadowBlur(C),this}setBackgroundColor(t){return this.backgroundColor=Ce(t),this}get hasBackgroundColor(){return this.backgroundColor!=null}setBackgroundHeight(t){return this.backgroundHeight=t,this}setBackgroundBottomY(t){return this.backgroundBottomY=t,this}setBackgroundLeftX(t){return this.backgroundLeftX=t,this}setBackgroundRightX(t){return this.backgroundRightX=t,this}setOffsetX(t){return t===void 0&&(t=0),this.offsetX=t,this}setOffsetY(t){return t===void 0&&(t=0),this.offsetY=t,this}setOffset(t,s){return this.setOffsetX(t).setOffsetY(s),this}setLeftSpace(t){return t===void 0&&(t=0),this.leftSpace=t,this}setRightSpace(t){return t===void 0&&(t=0),this.rightSpace=t,this}setSpace(t,s){return this.setLeftSpace(t).setRightSpace(s),this}setAlign(t){return this.align=t,this}syncFont(t){return t.font=this.font,this}syncStyle(t){t.textBaseline="alphabetic";var s=this.hasFill,f=this.hasStroke;return t.fillStyle=s?this.color:"#000",t.strokeStyle=f?this.stroke:"#000",t.lineWidth=f?this.strokeThickness:0,t.lineCap="round",t.lineJoin="round",this}syncShadow(t){t.shadowColor!=null?(t.shadowColor=this.shadowColor,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur):(t.shadowColor=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0)}getTextMetrics(t,s){return this.syncFont(t).syncStyle(t),t.measureText(s)}}var XI=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=0),this.fixedWidth===e&&this.fixedHeight===t?this:(this.fixedWidth=e,this.fixedHeight=t,this.dirty=!0,this.setCanvasSize(e>0?e:this.width,t>0?t:this.height),this)},HI=function(e,t){var s=this.padding,f=s.left,C=s.right,w=s.top,F=s.bottom;return Ha(s,e,t),this.dirty=this.dirty||f!=s.left||C!=s.right||w!=s.top||F!=s.bottom,this},YI=function(e){return Tc(this.padding,e)},$I=function(e){return this.textStyle.modify(e),this},_I=function(e){return this.defaultTextStyle.modify(e),this},ZI=function(){return this.textStyle.copyFrom(this.defaultTextStyle),this},KI=function(e){return this.testString=e,this};const JI=Phaser.Utils.Array.Remove;var QI=function(e){return this.poolManager.free(e),JI(this.children,e),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},jI=function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this};const qI=Phaser.Utils.Array.Remove;var t3=function(e){return qI(this.children,e),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},e3=function(){return this.setText(),this},i3=function(e,t){var s=Array.isArray(e);return t===void 0||t===this.children.length?s?this.children.push(...e):this.children.push(e):s?this.children.splice(t,0,...e):this.children.splice(t,0,e),this.lastAppendedChildren.length=0,s?this.lastAppendedChildren.push(...e):this.lastAppendedChildren.push(e),this};const ia="text",$1="image",_1="drawer",Z1="space",Xg="command";var K1=function(e){return e.type===ia&&e.text===`
`},J1=function(e){return e.type===ia&&e.text==="\f"},s3=function(e){return e.type===ia&&e.text===" "},_o=function(e){return e.type===ia},n3=function(e){return e.type===Xg};class Q1 extends Yo{constructor(t,s,f){super(t,ia),this.updateTextFlag=!1,this.style=new Ec(this,f),this.setText(s)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(t){this.style&&(this.style.offsetX=t)}get offsetY(){return this.style.offsetY}set offsetY(t){this.style&&(this.style.offsetY=t)}get leftSpace(){return this.style.leftSpace*this.scaleX}set leftSpace(t){this.style&&(this.style.leftSpace=t),super.leftSpace=t}get rightSpace(){return this.style.rightSpace*this.scaleX}set rightSpace(t){this.style&&(this.style.rightSpace=t),super.rightSpace=t}get align(){return this.style.align}set align(t){this.style&&(this.style.align=t)}modifyStyle(t){return this.setDirty(!0),this.style.modify(t),this.updateTextFlag&&this.updateTextSize(),this}modifyPorperties(t){return t?(this.modifyStyle(t),super.modifyPorperties(t),this):this}setText(t){return this.setDirty(this.text!=t),this.text=t,this.updateTextSize(),this}updateTextSize(){var t=this.text;if(t===`
`||t==="\f"||t==="")this.clearTextSize();else{var s=this.style.getTextMetrics(this.context,this.text);this.textWidth=s.width;var f,C;"actualBoundingBoxAscent"in s?(f=s.actualBoundingBoxAscent,C=s.actualBoundingBoxDescent):(f=0,C=0),this.textHeight=f+C,this.ascent=f,this.descent=C}return this.updateTextFlag=!1,this}clearTextSize(){return this.textWidth=0,this.textHeight=0,this.ascent=0,this.descent=0,this}copyTextSize(t){return this.textWidth=t.textWidth,this.textHeight=t.textHeight,this.ascent=t.ascent,this.descent=t.descent,this}get width(){return this.textWidth*this.scaleX}set width(t){this.textWidth>0?this.scaleX=t/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(t){this.textHeight>0?this.scaleY=t/this.textHeight:this.scaleY=1}get willRender(){return this.textWidth===0?!1:super.willRender}renderContent(){var t=this.context,s=this.style;if(s.hasBackgroundColor){t.fillStyle=s.backgroundColor;var f=this.drawTLX+s.backgroundLeftX,C=this.drawTRX+s.backgroundRightX,w=f,F=C-f+1;if(F>0){var N=s.backgroundBottomY;N==null&&(N=this.drawBLY);var z=s.backgroundHeight;z==null&&(z=N-this.drawTLY);var H=N-z;t.fillRect(w,H,F,z)}}var Z=s.hasFill,tt=s.hasStroke;!Z&&!tt||(s.syncFont(t).syncStyle(t),tt&&(s.syncShadow(t),t.strokeText(this.text,0,0)),Z&&(s.syncShadow(t),t.fillText(this.text,0,0)))}get drawTLX(){return-this.leftSpace}get drawTLY(){return-this.ascent}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.descent}get drawTRX(){return this.textWidth+this.rightSpace}get drawTRY(){return-this.ascent}get drawBRX(){return this.textWidth+this.rightSpace}get drawBRY(){return this.descent}}var r3=function(e,t){t&&this.textStyle.modify(t);var s=this.poolManager.allocate(ia);return s===null?s=new Q1(this,e,this.textStyle):s.setParent(this).setActive().modifyStyle(this.textStyle).setText(e),s},a3=function(e,t){t&&this.textStyle.modify(t);for(var s=[],f=0,C=e.length;f<C;f++){var w=e.charAt(f),F=this.poolManager.allocate(ia);F===null?F=new Q1(this,w,this.textStyle):F.setParent(this).setActive().modifyStyle(this.textStyle).setText(w),s.push(F)}return s},Ku=function(e,t){var s=this.createCharChildren(e,t);return this.addChild(s),this},o3=function(e,t){return e===void 0&&(e=""),this.removeChildren(),Ku.call(this,e,t),this.dirty=!0,this},h3=function(e,t,s){var f=this.createCharChildren(t,s);return e=this.getCharChildIndex(e,!0),this.addChild(f,e),this},l3=function(e,t){t===void 0&&(t=1);for(var s=0;s<t;s++){var f=this.getCharChildIndex(e,!0);if(f===void 0)break;this.removeChild(this.children[f])}return this},u3=function(e){var t="";return this.forEachCharChild(function(s){t+=s.text},void 0,e),t};Phaser.Display.Canvas.CanvasPool;class d3 extends Yo{constructor(t,s,f){super(t,$1),this.setTexture(s,f),this.color=void 0}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(t){}get key(){return this._key}set key(t){this.setDirty(this._key!=t),this._key=t}get frame(){return this._frame}set frame(t){this.setDirty(this._frame!=t),this._frame=t}setTexture(t,s){return this.key=t,this.frame=s,this.frameObj=this.scene.sys.textures.getFrame(t,s),this}get width(){return this.frameWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=t/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=t/this.frameHeight}setHeight(t,s){return s===void 0&&(s=!1),this.height=t,s&&(this.scaleX=this.scaleY),this}setColor(t){return this.color=t,this}modifyPorperties(t){return t.hasOwnProperty("color")&&this.setColor(t.color),super.modifyPorperties(t),this}renderContent(){w1(this.frameObj,this.canvas,0,0,this.frameWidth,this.frameHeight,this.color,!1)}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.frameHeight}get drawTRX(){return this.frameWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.frameWidth+this.rightSpace}get drawBRY(){return this.frameHeight}}var f3=function(e,t,s){var f=this.poolManager.allocate($1);return f===null?f=new d3(this,e,t):f.setParent(this).setActive().setTexture(e,t),f.modifyPorperties(s),f},j1=function(e,t,s){var f=this.createImageChild(e,t,s);return this.addChild(f),this};class c3 extends Yo{constructor(t,s,f,C){super(t,_1),this.setRenderCallback(s),this.setDrawerSize(f,C)}setRenderCallback(t){return t?this.renderContent=t.bind(this):delete this.renderContent,this}setDrawerSize(t,s){return t===!0?(this.toLocalPosition=!1,t=void 0,s=void 0):this.toLocalPosition=!0,t===void 0&&(t=0),s===void 0&&(s=t),this.drawerWidth=t,this.drawerHeight=s,this}onFree(){super.onFree(),this.setRenderCallback()}get width(){return this.drawerWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=this.drawerWidth>0?t/this.drawerWidth:1}get height(){return this.drawerHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=this.drawerHeight>0?t/this.drawerHeight:1}get offsetY(){return-this.height}set offsetY(t){}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.drawerHeight}get drawTRX(){return this.drawerWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.drawerWidth+this.rightSpace}get drawBRY(){return this.drawerHeight}}var p3=function(e,t,s){var f=this.poolManager.allocate(_1);return f===null?f=new c3(this,e,t,s):f.setParent(this).setActive().setRenderCallback(e).setDrawerSize(t,s),f},v3=function(e,t,s){var f=this.createDrawerChild(e,t,s);return this.addChild(f),this};let m3=class extends Yo{constructor(t,s){super(t,Z1),this.setSpaceWidth(s)}get width(){return this.spaceWidth*this.scaleX}set width(t){this.spaceWidth>0?this.scaleX=t/this.spaceWidth:this.scaleX=1}setSpaceWidth(t){return this.spaceWidth=t,this}};var g3=function(e){var t=this.poolManager.allocate(Z1);return t===null?t=new m3(this,e):t.setParent(this).setActive().setSpaceWidth(e),t},q1=function(e){var t=this.createSpaceChild(e);return this.addChild(t),this};class x3 extends Vg{constructor(t,s,f,C,w){super(t,Xg),this.setName(s).setParameter(C).setCallback(f,w)}setName(t){return this.name=t,this}setParameter(t){return this.param=t,this}setCallback(t,s){return this.callback=t,this.scope=s,this}exec(){var t;return this.scope?t=this.callback.call(this.scope,this.param,this.name):t=this.callback(this.param,this.name),t}onFree(){super.onFree(),this.setName().setCallback().setParameter()}}var y3=function(e,t,s,f){var C=this.poolManager.allocate(Xg);return C===null?C=new x3(this,e,t,s,f):C.setParent(this).setActive().setName(e).setCallback(t,f).setParameter(s),C},ve=function(e,t,s,f){var C=this.createCommandChild(e,t,s,f);return this.addChild(C),this},S3=function(e){return e===void 0?e={}:typeof e=="object"&&(e=I(e)),this.wrapConfig=e,this},tM=function(e){var t={callback:void 0,start:0,isLastPage:!1,maxLines:void 0,padding:void 0,letterSpacing:void 0,hAlign:void 0,vAlign:void 0,children:[],lines:[],maxLineWidth:0,linesHeight:0,lineHeight:void 0,maxLineHeight:0,linesWidth:0,lineWidth:void 0};return Object.assign(t,e)};const T3={none:0,word:1,char:2,character:2,mix:3};var C3=function(e,t,s,f){f===void 0&&(f={word:[],width:0}),f.word.length=0;for(var C=s===2,w=s===3,F=!C&&!w,N=e.length,z=t,H=f.word,Z=0,tt=!1;z<N;){var nt=e[z];if(!nt.renderable){H.push(nt),z++;continue}var st=nt.type===ia?nt.text:null;if(st===null||st===`
`||st==="\f"){z===t&&(H.push(nt),Z+=nt.outerWidth);break}if(F){if(H.push(nt),Z+=nt.outerWidth,st===" ")break;z++}else if(C){H.push(nt),Z+=nt.outerWidth;break}else if(w)if(_u(st)){if(H.push(nt),Z+=nt.outerWidth,st===" ")break;z++,tt=!0}else{if(tt)break;H.push(nt),Z+=nt.outerWidth;var ht=e[z+1];ht&&ht.type===ia&&ht.text===" "&&(H.push(ht),Z+=ht.outerWidth);break}}return f.width=Z,f},eM=function(e){for(var t=0,s=e.length;t<s;t++){var f=e[t];if(f.align!==void 0)return f.align}},iM=function(e,t,s){if(!(t===0&&s===0))for(var f=0,C=e.length;f<C;f++){var w=e[f];w.renderable&&(w.x+=t,w.y+=s)}},M3=function(e,t,s){for(var f=e.hAlign,C=e.vAlign,w=e.justifyPercentage,F=e.lines,N,z,H=0,Z=F.length;H<Z;H++){var tt=F[H],nt=tt.width,st=tt.children,ht=eM(st);switch(ht===void 0&&(ht=f),ht){case 0:case"left":N=0;break;case 1:case"center":var ft=t-nt;N=ft/2;break;case 2:case"right":var ft=t-nt;N=ft;break;case 3:case"justify":case"justify-left":var ft=t-nt,dt=ft/t;dt<w&&Hg(st,ft),N=0;break;case 4:case"justify-center":var ft=t-nt,dt=ft/t;dt<w?(Hg(st,ft),N=0):N=ft/2;break;case 5:case"justify-right":var ft=t-nt,dt=ft/t;dt<w?(Hg(st,ft),N=0):N=ft;break;default:N=0;break}var gt=e.linesHeight;switch(C){case 1:case"center":z=(s-gt)/2;break;case 2:case"bottom":z=s-gt;break;default:z=0;break}iM(st,N,z)}},Hg=function(e,t){for(var s=t/e.length,f=0,C=e.length;f<C;f++){var w=e[f];w.renderable&&(w.x+=s*f)}},sM=function(){var e=this.defaultTextStyle.getTextMetrics(this.context,this.testString),t,s;return"actualBoundingBoxAscent"in e?(t=e.actualBoundingBoxAscent,s=e.actualBoundingBoxDescent):(t=0,s=0),Pc.ascent=t,Pc.descent=s,Pc.height=t+s,Pc},Pc={};const Bs=Phaser.Utils.Objects.GetValue;var E3=function(e){var t=Bs(e,"start",0);Ha(this.wrapPadding,Bs(e,"padding",0));var s=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,f=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,C=Bs(e,"lineHeight"),w=Bs(e,"ascent",C),F;if(C===void 0){var N=Bs(e,"useDefaultTextHeight",!1);if(F=Bs(e,"maxLines",0),this.fixedHeight>0&&!N){var Sa=this.fixedHeight-s;if(F>0)C=Sa/F;else{var z=sM.call(this);C=z.height,w=z.ascent,F=Math.floor((Sa-w)/C)}}else{var z=sM.call(this);C=z.height,w=z.ascent}}else if(this.fixedHeight>0){if(F=Bs(e,"maxLines"),F===void 0){var Sa=this.fixedHeight-s;F=Math.floor(Sa/C)}}else F=Bs(e,"maxLines",0);w===void 0&&(w=C);var H=F===0,Z=Bs(e,"wrapMode");if(Z===void 0){var tt=Bs(e,"charWrap",!1);Z=tt?"char":"word"}typeof Z=="string"&&(Z=T3[Z]);var nt=Bs(e,"wrapWidth",void 0);nt===void 0&&(this.fixedWidth>0?nt=this.fixedWidth-f:(nt=1/0,Z=0));for(var st=Bs(e,"letterSpacing",0),ht=Bs(e,"hAlign",0),ft=Bs(e,"vAlign",0),dt=Bs(e,"justifyPercentage",.25),gt=tM({callback:"runWordWrap",start:t,padding:this.wrapPadding,letterSpacing:st,maxLines:F,hAlign:ht,vAlign:ft,justifyPercentage:dt,ascent:w,lineHeight:C,wrapWidth:nt,wrapMode:Z}),Et=this.children,yt=0,Dt=Et.length;yt<Dt;yt++)Et[yt].setActive(!1);nt+=st;for(var Wt=this.padding.left+this.wrapPadding.left,qt=this.padding.top+this.wrapPadding.top+w,re=Wt,ce=qt,fe=nt,ye=t,ge=Et.length,Ue=gt.children,ze=gt.lines,me=[],li=0,mi=0,wi,qi=!1;ye<ge;){wi=C3(Et,ye,Z,wi);var Hi=wi.word,Us=Hi.length,Nn=wi.width+Us*st;ye+=Us;var Gn=K1(Hi[0]);qi=J1(Hi[0]);var Vr=Gn||qi;if(fe<Nn||Vr){if(Vr){var Th=Hi[0];Th.setActive().setPosition(re,ce),Ue.push(Th),me.push(Th)}re=Wt,ce+=C,fe=nt,ze.push({children:me,width:li}),mi=Math.max(mi,li),li=0,me=[];var kv=qi||!H&&ze.length===F;if(kv)break;if(Vr)continue}fe-=Nn,li+=Nn;for(var yt=0,Dt=Hi.length;yt<Dt;yt++){var ks=Hi[yt];ks.setActive(),Ue.push(ks),me.push(ks),ks.renderable&&(ks.setPosition(re,ce),re+=ks.outerWidth+st)}}me.length>0&&(ze.push({children:me,width:li}),mi=Math.max(mi,li)),gt.start+=Ue.length,gt.isLastPage=!qi&&gt.start===ge,gt.maxLineWidth=mi,gt.linesHeight=ze.length*C;var pf=this.fixedWidth>0?this.fixedWidth:gt.maxLineWidth+f,vf=this.fixedHeight>0?this.fixedHeight:gt.linesHeight+s,Vv=pf-f,Sa=vf-s;M3(gt,Vv,Sa),this.setCanvasSize(pf,vf);for(var yt=0,Dt=Ue.length;yt<Dt;yt++){var ks=Ue[yt];ks.renderable&&(ks.x0=ks.x,ks.y0=ks.y)}return gt};const P3=Phaser.Utils.Objects.Merge;var w3=function(e){return e===void 0&&(e={}),E3.call(this,P3(e,this.wrapConfig))},b3=function(e,t,s){var f=e.hAlign,C=e.vAlign,w,F,N=e.rtl,z=e.lines,H=e.lineWidth,Z=e.linesWidth;switch(f){case 1:case"center":w=(t-Z)/2;break;case 2:case"right":w=t-Z;break;default:w=0;break}N&&(w+=H);for(var tt=0,nt=z.length;tt<nt;tt++){var st=z[N?nt-tt-1:tt],ht=st.children,ft=st.height,dt=eM(ht);switch(dt===void 0&&(dt=C),dt){case 1:case"center":F=(s-ft)/2;break;case 2:case"bottom":F=s-ft;break;default:F=0;break}iM(ht,w,F),w+=H}};const ln=Phaser.Utils.Objects.GetValue;var A3=function(e){var t=ln(e,"start",0);Ha(this.wrapPadding,ln(e,"padding",0));var s=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,f=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,C=ln(e,"lineWidth",void 0),w;if(C===void 0)if(w=ln(e,"maxLines",0),this.fixedWidth>0){var Gn=this.fixedWidth-f;C=Gn/w}else C=0;else if(this.fixedWidth>0){if(w=ln(e,"maxLines",void 0),w===void 0){var Gn=this.fixedWidth-f;w=Math.floor(Gn/C)+1}}else w=ln(e,"maxLines",0);var F=w===0,N=ln(e,"fixedCharacterHeight",void 0);if(N===void 0){var z=ln(e,"charPerLine",void 0);if(z!==void 0){var Vr=this.fixedHeight-s;N=Math.floor(Vr/z)}}var H=ln(e,"wrapHeight",void 0);H===void 0&&(this.fixedHeight>0?H=this.fixedHeight-s:H=1/0);for(var Z=ln(e,"letterSpacing",0),tt=ln(e,"rtl",!0),nt=ln(e,"hAlign",tt?2:0),st=ln(e,"vAlign",0),ht=tM({callback:"runVerticalWrap",start:t,padding:this.wrapPadding,letterSpacing:Z,maxLines:w,hAlign:nt,vAlign:st,lineWidth:C,fixedCharacterHeight:N,wrapHeight:H,rtl:tt}),ft=this.children,dt=0,gt=ft.length;dt<gt;dt++)ft[dt].setActive(!1);H+=Z;for(var Et=this.padding.left+this.wrapPadding.left,yt=this.padding.top+this.wrapPadding.top,Dt=Et,Wt=yt,qt=H,re=t,ce=ft.length,fe=ht.children,ye=ht.lines,ge=[],Ue=0,ze=0;re<ce;){var me=ft[re];if(re++,!me.renderable){me.setActive(),fe.push(me),ge.push(me);continue}var li=(N!==void 0?N:me.height)+Z,mi=K1(me),wi=J1(me),qi=mi||wi;if(qt<li||qi){mi&&(me.setActive().setPosition(Dt,Wt).setOrigin(.5),fe.push(me),ge.push(me)),Dt=Et,Wt=yt,qt=H,ye.push({children:ge,height:Ue}),ze=Math.max(ze,Ue),Ue=0,ge=[];var Hi=wi||!F&&ye.length===w;if(Hi)break;if(qi)continue}qt-=li,Ue+=li,me.setActive().setPosition(Dt,Wt).setOrigin(.5),fe.push(me),ge.push(me),Wt+=li}ge.length>0&&(ye.push({children:ge,height:Ue}),ze=Math.max(ze,Ue)),ht.start+=fe.length,ht.isLastPage=ht.start===ce,ht.maxLineHeight=ze,ht.linesWidth=ye.length*C;var Us=this.fixedWidth>0?this.fixedWidth:ht.linesWidth+f,Nn=this.fixedHeight>0?this.fixedHeight:ht.maxLineHeight+s,Gn=Us-f,Vr=Nn-s;b3(ht,Gn,Vr),this.setCanvasSize(Us,Nn);for(var dt=0,gt=fe.length;dt<gt;dt++){var me=fe[dt];me.renderable&&(me.x0=me.x,me.y0=me.y)}return ht};const R3=Phaser.Utils.Objects.Merge;var L3=function(e){return e===void 0&&(e={}),A3.call(this,R3(e,this.wrapConfig))};const nM=Phaser.Utils.Objects.GetValue;var O3=function(e){var t=nM(this.wrapConfig,"callback");return t||(t=nM(e,"callback",this.runWordWrap)),typeof t=="string"&&(t=this[t]),t.call(this,e)},F3={setVAlign(e){return this.wrapConfig.vAlign=e,this},setHAlign(e){return this.wrapConfig.hAlign=e,this}},D3={setTextOX(e){return e===this._textOX?this:(this._textOX=e,this)},setTextOY(e){return e===this._textOY?this:(this._textOY=e,this)},setTextOXY(e,t){if(!(e===this._textOX&&t===this._textOY))return this._textOX=e,this._textOY=t,this},addTextOX(e){return this.setTextOX(this._textOX+e),this},addTextOY(e){return this.setTextOY(this._textOY+e),this},addTextOXY(e,t){return this.setTextOXY(this._textOX+e,this._textOY+t),this}},I3=function(){this.clear(),this.setCanvasSize(this.width,this.height),this.background.active&&this.background.render();for(var e,t=0,s=this.children.length;t<s;t++)e=this.children[t],e.active&&e.render();this.innerBounds.active&&this.innerBounds.render()},B3=function(e,t,s){s===void 0&&(s=!0);for(var f=this.children.filter(function(z){return!(s&&!z.active)}),C=0,w=f.length;C<w;C++){var F=f[C],N;if(t?N=e.call(this,F,C,f):N=e(F,C,f),N)break}return this},N3=function(e,t,s){s===void 0&&(s=!0);for(var f=this.children.filter(function(z){return!(s&&!z.active||!z.renderable||z.removed)}),C=0,w=f.length;C<w;C++){var F=f[C],N;if(t?N=e.call(this,F,C,f):N=e(F,C,f),N)break}return this},G3=function(e,t,s){s===void 0&&(s=!0);for(var f=this.children.filter(function(z){return!(s&&!z.active||!_o(z)||z.removed)}),C=0,w=f.length;C<w;C++){var F=f[C],N;if(t?N=e.call(this,F,C,f):N=e(F,C,f),N)break}return this},U3=function(){return this.children};const k3=Phaser.Utils.Array.GetAll;var V3=function(){return k3(this.children,"active",!0)},z3=function(e,t){return t===void 0&&(t=[]),this.forEachCharChild(function(s){t.push(s)},void 0,e),t},W3=function(){return this.lastAppendedChildren},X3=function(e,t,s,f){typeof t!="number"&&(f=t,t=0,s=0);var C=e.drawCenterX+t,w=e.drawCenterY+s;return z1(e,C,w,f)};const H3=Phaser.Math.Distance.BetweenPointsSquared;var Y3=function(e,t){var s={x:e,y:t},f=1/0,C=null;return this.forEachRenderableChild(function(w){var F=H3(s,X3(w,!0));f>F&&(f=F,C=w)}),C},$3=function(e,t,s,f){return typeof e=="number"&&(e=this.getCharChild(e,!0)),H1(this,e,t,s,f)},_3=function(){for(var e=this.children,t=0,s=0,f=0,C=e.length;f<C;f++){var w=e[f];if(!(!w.renderable||!w.active||!w.visible)){var F=w.x0!==void 0?w.x0:w.x,N=w.y0!==void 0?w.y0:w.y;t=Math.max(t,F),s=Math.max(s,N)}}var z=t+this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,H=s+this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom;return(this.width!==z||this.height!==H)&&(this.dirty=!0,this.setCanvasSize(z,H)),this},Z3=function(e,t){t===void 0&&(t=!0);for(var s=this.children,f=0,C=s.length;f<C;f++){var w=s[f];if(!(t&&!w.active)&&_o(w)&&!w.removed){if(e===0)return f;e--}}},K3=function(e,t){t===void 0&&(t=!0);for(var s=this.children,f=0,C=s.length;f<C;f++){var w=s[f];if(!(t&&!w.active)&&_o(w)&&!w.removed){if(e===0)return w;e--}}},J3=function(e,t){if(typeof e!="number"&&(e=this.children.indexOf(e),e<0))return null;t===void 0&&(t=!0);var s=this.children;e>=s.length&&(e=s.length);for(var f=0,C=0;C<e;C++){var w=s[C];t&&!w.active||_o(w)&&!w.removed&&f++}return f},Q3=function(e){return e===void 0&&(e=!0),this.childrenInteractiveEnable!==e&&(this.lastOverChild=null),this.childrenInteractiveEnable=e,this},Yg=function(f,t,s){for(var f=f,C=0,w=f.length;C<w;C++){var F=f[C];if(!(!F.active||!F.renderable)&&F.contains(t,s))return F}return null},j3=function(){return this.on("pointerdown",q3,this).on("pointerdown",tB,this).on("pointermove",$g,this).on("pointerover",$g,this).on("pointerout",function(e,t){$g.call(this,e,null,null,t)},this),this},q3=function(e,t,s,f){if(this.childrenInteractiveEnable){var C=Yg(this.children,t,s);C&&this.emit("child.pointerdown",C,e,t,s,f)}},tB=function(e,t,s,f){if(this.childrenInteractiveEnable){var C=Yg(this.children,t,s);C&&this.emit("child.pointerup",C,e,t,s,f)}},$g=function(e,t,s,f){if(this.childrenInteractiveEnable){if(t===null){this.lastOverChild!==null&&(this.emit("child.pointerout",this.lastOverChild,e,t,s,f),this.lastOverChild=null);return}var C=Yg(this.children,t,s);C!==this.lastOverChild&&(this.lastOverChild!==null&&this.emit("child.pointerout",this.lastOverChild,e,t,s,f),C!==null&&this.emit("child.pointerover",C,e,t,s,f),this.lastOverChild=C)}};const eB=Phaser.GameObjects.GameObject;var iB=function(e,t,s){var f=!!this.input;return eB.prototype.setInteractive.call(this,e,t,s),f||j3.call(this),this};const sB=Phaser.Utils.Array.BringToTop,nB=Phaser.Utils.Array.SendToBack,rB=Phaser.Utils.Array.MoveUp,aB=Phaser.Utils.Array.MoveDown,oB=Phaser.Utils.Array.MoveAbove,hB=Phaser.Utils.Array.MoveBelow;var lB={moveChildToFist(e){return nB(this.children,e),this},moveChildToLast(e){return sB(this.children,e),this},movechildUp(e){return rB(this.children,e),this},movechildDown(e){return aB(this.children,e),this},movechildAbove(e,t){return oB(this.children,e,t),this},movechildBelow(e,t){return hB(this.children,e,t),this}},uB={setBackgroundColor(e,t,s){return this.background.setColor(e,t,s),this},setBackgroundStroke(e,t){return this.background.setStroke(e,t),this},setBackgroundCornerRadius(e,t){return this.background.setCornerRadius(e,t),this}},dB={setInnerBoundsColor(e,t,s){return this.innerBounds.setColor(e,t,s),this},setInnerBoundsStroke(e,t){return this.innerBounds.setStroke(e,t),this}},rM={setFixedSize:XI,setPadding:HI,getPadding:YI,modifyTextStyle:$I,modifyDefaultTextStyle:_I,resetTextStyle:ZI,setTestString:KI,removeChild:QI,removeChildren:jI,popChild:t3,clearContent:e3,addChild:i3,createCharChild:r3,createCharChildren:a3,setText:o3,appendText:Ku,insertText:h3,removeText:l3,getText:u3,createImageChild:f3,appendImage:j1,createDrawerChild:p3,appendDrawer:v3,createSpaceChild:g3,appendSpace:q1,createCommandChild:y3,appendCommand:ve,setWrapConfig:S3,runWordWrap:w3,runVerticalWrap:L3,runWrap:O3,renderContent:I3,forEachChild:B3,forEachRenderableChild:N3,forEachCharChild:G3,getChildren:U3,getActiveChildren:V3,getCharChildren:z3,getLastAppendedChildren:W3,getNearestChild:Y3,getCharWorldPosition:$3,setToMinSize:_3,getCharChildIndex:Z3,getCharChild:K3,getCharIndex:J3,setChildrenInteractiveEnable:Q3,setInteractive:iB};Object.assign(rM,lB,uB,dB,F3,D3);const fB=Phaser.Utils.Objects.GetFastValue;var cB={};class pB{constructor(t){this.pools=fB(t,"pools",cB)}free(t){if(!this.pools)return this;var s=t.type;return this.pools.hasOwnProperty(s)||(this.pools[s]=new bt),this.pools[s].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var s=0,f=t.length;s<f;s++)this.free(t[s]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}}const _g=Phaser.Utils.Objects.IsPlainObject,fs=Phaser.Utils.Objects.GetValue;class rl extends Ni{constructor(t,s,f,C,w,F,N){_g(s)?(N=s,s=fs(N,"x",0),f=fs(N,"y",0),C=fs(N,"width",0),w=fs(N,"height",0),F=fs(N,"resolution",1)):_g(C)?(N=C,C=fs(N,"width",0),w=fs(N,"height",0),F=fs(N,"resolution",1)):_g(F)&&(N=F,F=fs(N,"resolution",1));var z=C===0?1:C,H=w===0?1:w;super(t,s,f,z,H,F),this.type="rexDynamicText",this.autoRound=!0,this.padding=Ha(),this.wrapPadding=Ha();var Z=fs(N,"style",void 0);this.defaultTextStyle=new Ec(null,Z),this.textStyle=this.defaultTextStyle.clone(),this.setTestString(fs(N,"testString","|MÉqgy")),this._textOX=0,this._textOY=0,this.background=new zI(this,fs(N,"background",void 0)),this.innerBounds=new WI(this,fs(N,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.lastOverChild=null,this.poolManager=new pB(N),this.setFixedSize(C,w),this.setPadding(fs(N,"padding",0)),this.setWrapConfig(fs(N,"wrap",void 0)),this.setChildrenInteractiveEnable(fs(N,"childrenInteractive",!1));var tt=fs(N,"text",void 0);tt&&this.setText(tt)}updateTexture(){return super.updateTexture(function(){this.renderContent()},this),this}get text(){return this.getText(!0)}set text(t){this.setText(t)}setSize(t,s){return this.setFixedSize(t,s),this}get textOX(){return this._textOX}set textOX(t){this.setTextOX(t)}get textOY(){return this._textOY}set textOY(t){this.setTextOY(t)}}Object.assign(rl.prototype,rM),c.register("dynamicText",function(e,t,s,f,C){var w=new rl(this.scene,e,t,s,f,C);return this.scene.add.existing(w),w}),j(window,"RexPlugins.UI.DynamicText",rl);var Ju={setEventEmitter(e,t){return t===void 0&&(t=Phaser.Events.EventEmitter),this._privateEE=e===!0||e===void 0,this._eventEmitter=this._privateEE?new t:e,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit(e){return this._eventEmitter&&e&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},vB={hasProperty(e){var t=this.gameObject;if(t.hasOwnProperty(e))return!0;var s=t[e];return s!==void 0},getProperty(e){return this.gameObject[e]},setProperty(e,t){return this.gameObject[e]=t,this},easeProperty(nt){var t=nt.property,s=nt.value,f=nt.duration,C=nt.delay,w=nt.ease,F=nt.repeat,N=nt.yoyo,z=nt.from,H=nt.complete,Z=nt.target;if(f===void 0&&(f=1e3),C===void 0&&(C=0),w===void 0&&(w="Linear"),F===void 0&&(F=0),N===void 0&&(N=!1),Z===void 0&&(Z=this.gameObject),z){var tt=s;s=Z[t],Z[t]=tt}var nt={targets:Z,duration:f,delay:C,ease:w,repeat:F,yoyo:N,onComplete:H};return nt[t]=s,this.addTweenTask(t,nt),this},addTweenTask(e,t){var s=this.tweens,f=s[e];f&&f.remove();var C=t.onComplete;return t.onComplete=function(){s[e].remove(),s[e]=null,C&&C(t.targets,e)},f=this.scene.tweens.add(t),f.timeScale=this.timeScale,s[e]=f,this},getTweenTask(e){return this.tweens[e]},freeTweens(){var e=this.tweens,t;for(var s in e)t=e[s],t&&t.remove(),e[s]=null;return this}},mB={hasMethod(e){return typeof this.gameObject[e]=="function"},call(e,...t){if(!this.hasMethod(e))return console.warn(`[GameObjectManager] Game object '${this.name}' does not have method '${e}'`),this;var s=this.gameObject;return s[e].apply(s,t),this}},gB={hasData(e){var t=this.gameObject;return t.data?t.data.has(e):!1},getData(e){return this.gameObject.getData(e)},setData(e,t){return this.gameObject.setData(e,t),this}};class Zg{constructor(t,s,f){this.GOManager=t,this.tweens={},this.effects={},this.setGO(s,f)}get scene(){return this.GOManager.scene}get timeScale(){return this.GOManager.timeScale}destroy(){this.freeGO(),this.GOManager=void 0}freeGO(){return this.freeTweens(),this.gameObject.bob=void 0,this.gameObject.destroy(),this.gameObject=void 0,this}setGO(t,s){return t.goName=s,t.goType=this.GOManager.name,t.bob=this,this.gameObject=t,this.name=s,this.freeTweens(),this}setTimeScale(t){var s=this.tweens;for(var f in s){var C=s[f];C&&(C.timeScale=t)}return this}}Object.assign(Zg.prototype,vB,mB,gB);var Qu=function(e){for(var t in e)return!1;return!0},Zo=function(e){return e&&e.charAt(0)!=="!"},xB={has(e){return this.bobs.hasOwnProperty(e)},exists(e){return this.bobs.hasOwnProperty(e)},get(e,t){if(Zo(e))return this.bobs[e];t===void 0&&(t=[]),e&&(e=e.substring(1));for(var s in this.bobs)e&&s===e||t.push(this.bobs[s]);return t},getFitst(e){e&&e.charAt(0)==="!"&&(e=e.substring(1));for(var t in this.bobs)if(!(e&&e===t))return this.bobs[t];return null},getGO(e,t){var s=this.get(e);if(s)if(Array.isArray(s)){t===void 0&&(t=[]);var f=s;return f.forEach(function(C){t.push(C.gameObject)}),t}else return s.gameObject;else return null},forEachGO(e,t){for(var s in this.bobs){var f=this.bobs[s].gameObject,C;if(t?C=e.call(t,f,s,this):C=e(f,s,this),C)break}return this},getAllGO(e){e===void 0&&(e=[]);for(var t in this.bobs){var s=this.bobs[t].gameObject;e.push(s)}return e}},ju=function(e){return e>>16&255},qu=function(e){return e>>8&255},td=function(e){return e&255},aM=function(e,t){return t===void 0&&(t={}),t.r=e>>16&255,t.g=e>>8&255,t.b=e&255,t};const yB=65535,SB=16711935,TB=16776960;var CB=function(e,t){return(t&255)<<16|e&yB},MB=function(e,t){return(t&255)<<8|e&SB},EB=function(e,t){return t&255|e&TB},PB=function(e,t,s,f){return(t&255)<<16|(s&255)<<8|f&255},wB=function(e,t){if(e.hasOwnProperty("tintR"))return e;t===void 0&&(t=16777215);var s=ju(t),f=qu(t),C=td(t);return Object.defineProperty(e,"tint",{get:function(){return t},set:function(w){w=Math.floor(w)&16777215,e.setTint&&e.setTint(w),t!==w&&(t=w,s=ju(t),f=qu(t),C=td(t))}}),Object.defineProperty(e,"tintR",{get:function(){return s},set:function(w){w=Math.floor(w)&255,s!==w&&(s=w,e.tint=CB(t,w))}}),Object.defineProperty(e,"tintG",{get:function(){return f},set:function(w){w=Math.floor(w)&255,f!==w&&(f=w,e.tint=MB(t,w))}}),Object.defineProperty(e,"tintB",{get:function(){return C},set:function(w){w=Math.floor(w)&255,C!==w&&(C=w,e.tint=EB(t,w))}}),Object.defineProperty(e,"tintGray",{get:function(){return Math.floor((s+f+C)/3)},set:function(w){w=Math.floor(w)&255,(s!==w||f!==w||C!==w)&&(s=w,f=w,C=w,e.tint=PB(t,w,w,w))}}),e.tint=t,e};const bB=Phaser.Events.EventEmitter;var AB=function(e){if(e.events)return e;var t=new bB,s=e.x;Object.defineProperty(e,"x",{get:function(){return s},set:function(F){s!==F&&(s=F,t.emit("update",e))}});var f=e.y;Object.defineProperty(e,"y",{get:function(){return f},set:function(F){f!==F&&(f=F,t.emit("update",e))}});var C=e.width;Object.defineProperty(e,"width",{get:function(){return C},set:function(F){C!==F&&(C=F,t.emit("update",e))}});var w=e.height;return Object.defineProperty(e,"height",{get:function(){return w},set:function(F){w!==F&&(w=F,t.emit("update",e))}}),e.events=t,e},RB=function(e,t,s,f,C,w){return w===void 0?w={}:w===!0&&(w=LB),typeof s!="number"&&(s=0,f=0),w.x=C.x+C.width*e+s,w.y=C.y+C.height*t+f,w},LB={},OB=function(e,t,s,f,C,w,F){if(e.hasOwnProperty("vp"))return e;typeof s=="function"&&(F=s,s=void 0),typeof C=="function"&&(F=C,C=void 0),s===void 0&&(s=.5),f===void 0&&(f=.5),C===void 0&&(C=0),w===void 0&&(w=0),F===void 0&&(F=RB),AB(t);var N=t.events;e.vp=t;var z=function(){F(s,f,C,w,t,e)};N.on("update",z),e.once("destroy",function(){N.off("update",z),e.vp=void 0}),Object.defineProperty(e,"vpx",{get:function(){return s},set:function(H){s!==H&&(s=H,z())}}),Object.defineProperty(e,"vpy",{get:function(){return f},set:function(H){f!==H&&(f=H,z())}}),Object.defineProperty(e,"vpxOffset",{get:function(){return C},set:function(H){C!==H&&(C=H,z())}}),Object.defineProperty(e,"vpyOffset",{get:function(){return w},set:function(H){w!==H&&(w=H,z())}}),z()},Cs=function(e){return e.preFX?e.preFX:e.postFX?e.postFX:null},Ri=function(e,t){e._effectSwitchNames||(e._effectSwitchNames=[],e.clearAllEffects=function(){for(var s=e._effectSwitchNames,f=0,C=s.length;f<C;f++)e[s[f]]=null;return e},e.on("destroy",e.clearAllEffects,e)),e._effectSwitchNames.push(t)},FB=function(e){if(_e(e,"barrel"))return e;var t=Cs(e);if(!t)return e;var s;return Object.defineProperty(e,"barrel",{get:function(){return s},set:function(f){s!==f&&(s=f,s===null||s===!1?e._barrelEffect&&(t.remove(e._barrelEffect),e._barrelEffect=void 0):(e._barrelEffect||(e._barrelEffect=t.addBarrel()),e._barrelEffect.amount=s))}}),e.barrel=null,Ri(e,"barrel"),e},cs=function(e,t,s){if(_e(e,t))return e;var f=Cs(e);if(!f)return e;var C=`_${t}Effect`,w;return Object.defineProperty(e,t,{get:function(){return w},set:function(F){if(w!==F)if(w=F,w===null||w===!1)e[C]&&(f.remove(e[C]),e[C]=void 0);else{e[C]||(e[C]=f.addColorMatrix());var N=e[C];N[t](s===1?F:void 0)}}}),e[t]=null,Ri(e,t),e},DB=function(e){return cs(e,"blackWhite"),e},IB=function(e){if(_e(e,"bloomColor"))return e;var t=Cs(e);if(!t)return e;var s,f=1,C=1,w=1,F=1,N=4;return Object.defineProperty(e,"bloomColor",{get:function(){return s},set:function(z){s!==z&&(s=z,s===null||s===!1?e._bloom&&(t.remove(e._bloom),e._bloom=void 0,t.setPadding(0)):(e._bloom||(e._bloom=t.addBloom(s,f,C,w,F,N),t.setPadding(Math.max(f,C)+1)),e._bloom.color=s))}}),Object.defineProperty(e,"bloomOffsetX",{get:function(){return f},set:function(z){if(f!==z&&(f=z,e._bloom)){var H=Math.max(f,C);t.setPadding(H+1),e._bloom.offsetX=f}}}),Object.defineProperty(e,"bloomOffsetY",{get:function(){return C},set:function(z){if(C!==z&&(C=z,e._bloom)){var H=Math.max(f,C);t.setPadding(H+1),e._bloom.offsetY=C}}}),Object.defineProperty(e,"bloomBlurStrength",{get:function(){return w},set:function(z){w!==z&&(w=z,e._bloom&&(e._bloom.blurStrength=w))}}),Object.defineProperty(e,"bloomStrength",{get:function(){return F},set:function(z){F!==z&&(F=z,e._bloom&&(e._bloom.strength=F))}}),Object.defineProperty(e,"bloomSteps",{get:function(){return N},set:function(z){N!==z&&(N=z,e._bloom&&(e._bloom.steps=N))}}),e.bloomColor=null,Ri(e,"bloomColor"),e},BB=function(e){if(_e(e,"blurColor"))return e;var t=Cs(e);if(!t)return e;var s,f=0,C=1,w=1,F=1,N=4;return Object.defineProperty(e,"blurColor",{get:function(){return s},set:function(z){s!==z&&(s=z,s===null||s===!1?e._blur&&(t.remove(e._blur),e._blur=void 0,t.setPadding(0)):(e._blur||(e._blur=t.addBlur(f,C,w,F,s,N),t.setPadding(Math.max(C,w)+1)),e._blur.color=s))}}),Object.defineProperty(e,"blurQuality",{get:function(){return f},set:function(z){f!==z&&(f=z,e._blur&&(e._blur.quality=f))}}),Object.defineProperty(e,"blurX",{get:function(){return C},set:function(z){if(C!==z&&(C=z,e._blur)){var H=Math.max(C,w);t.setPadding(H+1),e._blur.x=C}}}),Object.defineProperty(e,"blurY",{get:function(){return w},set:function(z){if(w!==z&&(w=z,e._blur)){var H=Math.max(C,w);t.setPadding(H+1),e._blur.y=w}}}),Object.defineProperty(e,"blurStrength",{get:function(){return F},set:function(z){F!==z&&(F=z,e._blur&&(e._blur.strength=F))}}),Object.defineProperty(e,"blurSteps",{get:function(){return N},set:function(z){N!==z&&(N=z,e._blur&&(e._blur.steps=N))}}),e.blurColor=null,Ri(e,"blurColor"),e},NB=function(e){if(_e(e,"bokehRadius"))return e;var t=Cs(e);if(!t)return e;var s,f=1,C=.2;return Object.defineProperty(e,"bokehRadius",{get:function(){return s},set:function(w){s!==w&&(s=w,s===null||s===!1?e._bokeh&&(t.remove(e._bokeh),e._bokeh=void 0):(e._bokeh||(e._bokeh=t.addBokeh(s,f,C)),e._bokeh.radius=s))}}),Object.defineProperty(e,"bokehAmount",{get:function(){return f},set:function(w){f!==w&&(f=w,e._bokeh&&(e._bokeh.amount=f))}}),Object.defineProperty(e,"bokehContrast",{get:function(){return C},set:function(w){C!==w&&(C=w,e._bokeh&&(e._bokeh.contrast=C))}}),e.bokehRadius=null,Ri(e,"bokehRadius"),e},GB=function(e){return cs(e,"brightness",1),e},UB=function(e){return cs(e,"brown"),e},kB=function(e){if(_e(e,"circleColor"))return e;var t=Cs(e);if(!t)return e;var s,f=8,C=0,w=.4,F=1,N=.005;return Object.defineProperty(e,"circleColor",{get:function(){return s},set:function(z){s!==z&&(s=z,s===null||s===!1?e._circle&&(t.remove(e._circle),e._circle=void 0):(e._circle||(e._circle=t.addCircle(f,s,C,F,N),e.circleBackgroundAlpha=w),e._circle.color=s))}}),Object.defineProperty(e,"circleThickness",{get:function(){return f},set:function(z){f!==z&&(f=z,e._circle&&(e._circle.thickness=f))}}),Object.defineProperty(e,"circleBackgroundColor",{get:function(){return C},set:function(z){C!==z&&(C=z,e._circle&&(e._circle.backgroundColor=C))}}),Object.defineProperty(e,"circleBackgroundAlpha",{get:function(){return w},set:function(z){w!==z&&(w=z,e._circle&&(e._circle.glcolor2[3]=w))}}),Object.defineProperty(e,"circleScale",{get:function(){return F},set:function(z){F!==z&&(F=z,e._circle&&(e._circle.scale=F))}}),Object.defineProperty(e,"circleFeather",{get:function(){return N},set:function(z){N!==z&&(N=z,e._circle&&(e._circle.feather=N))}}),e.circleColor=null,Ri(e,"circleColor"),e},VB=function(e){return cs(e,"contrast",1),e},zB=function(e){return cs(e,"desaturate",1),e},WB=function(e){return cs(e,"desaturateLuminance"),e},XB=function(e){if(_e(e,"displacementKey"))return e;var t=Cs(e);if(!t)return e;var s,f=.005,C=.005;return Object.defineProperty(e,"displacementKey",{get:function(){return s},set:function(w){s!==w&&(s=w,s===null||s===!1?e._displacement&&(t.remove(e._displacement),e._displacement=void 0):(e._displacement||(e._displacement=t.addDisplacement(s,f,C)),e._displacement.setTexture(s)))}}),Object.defineProperty(e,"displacementX",{get:function(){return f},set:function(w){f!==w&&(f=w,e._displacement&&(e._displacement.x=f))}}),Object.defineProperty(e,"displacementY",{get:function(){return C},set:function(w){C!==w&&(C=w,e._displacement&&(e._displacement.y=C))}}),e.displacementKey=null,Ri(e,"displacementKey"),e},HB=function(e){if(_e(e,"glowColor"))return e;var t=Cs(e);if(!t)return e;var s,f=4,C=0;return Object.defineProperty(e,"glowColor",{get:function(){return s},set:function(w){s!==w&&(s=w,s===null||s===!1?e._glow&&(t.remove(e._glow),e._glow=void 0,t.setPadding(0)):(e._glow||(e._glow=t.addGlow(s,f,C),t.setPadding(f+1)),e._glow.color=s))}}),Object.defineProperty(e,"glowOuterStrength",{get:function(){return f},set:function(w){f!==w&&(f=w,e._glow&&(t.setPadding(f+1),e._glow.outerStrength=f))}}),Object.defineProperty(e,"glowInnerStrength",{get:function(){return C},set:function(w){C!==w&&(C=w,e._glow&&(e._glow.innerStrength=C))}}),e.glowColor=null,Ri(e,"glowColor"),e},YB=function(e){if(_e(e,"gradientColor"))return e;var t=Cs(e);if(!t)return e;var s,f,C=.5,w=0,F=0,N=0,z=1,H=0;return Object.defineProperty(e,"gradientColor",{get:function(){return[s,f]},set:function(Z){var tt,nt;Z===null||Z===!1?(tt=null,nt=null):(tt=Z[0],nt=Z[1]),!(s===tt&&f===nt)&&(s=tt,f=nt,s===null||s===!1?e._gradient&&(t.remove(e._gradient),e._gradient=void 0):(e._gradient||(e._gradient=t.addGradient(s,f,C,w,F,N,z,H)),e._gradient.color1=s,e._gradient.color2=f))}}),Object.defineProperty(e,"gradientColor1",{get:function(){return s},set:function(Z){if(Z===null||Z===!1){e.gradientColor=Z;return}s!==Z&&(s=Z,e._gradient&&(e._gradient.color1=s))}}),Object.defineProperty(e,"gradientColor2",{get:function(){return f},set:function(Z){if(Z===null||Z===!1){e.gradientColor=Z;return}f!==Z&&(f=Z,e._gradient&&(e._gradient.color2=f))}}),Object.defineProperty(e,"gradientAlpha",{get:function(){return C},set:function(Z){C!==Z&&(C=Z,e._gradient&&(e._gradient.alpha=C))}}),Object.defineProperty(e,"gradientFromX",{get:function(){return w},set:function(Z){w!==Z&&(w=Z,e._gradient&&(e._gradient.fromX=w))}}),Object.defineProperty(e,"gradientFromY",{get:function(){return F},set:function(Z){F!==Z&&(F=Z,e._gradient&&(e._gradient.fromY=F))}}),Object.defineProperty(e,"gradientToX",{get:function(){return N},set:function(Z){N!==Z&&(N=Z,e._gradient&&(e._gradient.toX=N))}}),Object.defineProperty(e,"gradientToY",{get:function(){return z},set:function(Z){z!==Z&&(z=Z,e._gradient&&(e._gradient.toY=z))}}),Object.defineProperty(e,"gradientSize",{get:function(){return H},set:function(Z){H!==Z&&(H=Z,e._gradient&&(e._gradient.size=H))}}),e.gradientColor=null,Ri(e,"gradientColor"),e},$B=function(e){return cs(e,"grayscale",1),e},_B=function(e){return cs(e,"hue",1),e},ZB=function(e){return cs(e,"kodachrome"),e},KB=function(e){return cs(e,"lsd"),e},JB=function(e){return cs(e,"negative"),e},QB=function(e){if(_e(e,"pixelate"))return e;var t=Cs(e);if(!t)return e;var s;return Object.defineProperty(e,"pixelate",{get:function(){return s},set:function(f){s!==f&&(s=f,s===null||s===!1?e._pixelateEffect&&(t.remove(e._pixelateEffect),e._pixelateEffect=void 0):(e._pixelateEffect||(e._pixelateEffect=t.addPixelate()),e._pixelateEffect.amount=s))}}),e.pixelate=null,Ri(e,"pixelate"),e},jB=function(e){return cs(e,"polaroid"),e},qB=function(e){if(_e(e,"revealLeft"))return e;var t=Cs(e);if(!t)return e;var s,f,C,w,F=.1,N=function(){s=null,f=null,C=null,w=null},z=function(H){H._revealEffect&&(t.remove(H._revealEffect),H._revealEffect=void 0)};return Object.defineProperty(e,"revealLeft",{get:function(){return s},set:function(H){s!==H&&(N(),s=H,s===null||s===!1?z(e):(e._revealEffect||(e._revealEffect=t.addReveal(F,0,0)),e._revealEffect.direction=1,e._revealEffect.axis=0,e._revealEffect.progress=s))}}),Object.defineProperty(e,"revealRight",{get:function(){return f},set:function(H){f!==H&&(N(),f=H,f===null||f===!1?z(e):(e._revealEffect||(e._revealEffect=t.addReveal(F,0,0)),e._revealEffect.direction=0,e._revealEffect.axis=0,e._revealEffect.progress=f))}}),Object.defineProperty(e,"revealUp",{get:function(){return C},set:function(H){C!==H&&(N(),C=H,C===null||C===!1?z(e):(e._revealEffect||(e._revealEffect=t.addReveal(F,0,0)),e._revealEffect.direction=1,e._revealEffect.axis=1,e._revealEffect.progress=C))}}),Object.defineProperty(e,"revealDown",{get:function(){return w},set:function(H){w!==H&&(N(),w=H,w===null||w===!1?z(e):(e._revealEffect||(e._revealEffect=t.addReveal(F,0,0)),e._revealEffect.direction=0,e._revealEffect.axis=1,e._revealEffect.progress=w))}}),Object.defineProperty(e,"revealWidth",{get:function(){return F},set:function(H){F!==H&&(F=H,e._revealEffect&&(e._revealEffect.wipeWidth=F))}}),e.revealLeft=null,Ri(e,"revealLeft"),Ri(e,"revealRight"),Ri(e,"revealUp"),Ri(e,"revealDown"),e},t4=function(e){return cs(e,"saturate",1),e},e4=function(e){return cs(e,"sepia"),e},i4=function(e){if(_e(e,"shadowColor"))return e;var t=Cs(e);if(!t)return e;var s,f=0,C=0,w=.1,F=1,N=6,z=1;return Object.defineProperty(e,"shadowColor",{get:function(){return s},set:function(H){s!==H&&(s=H,s===null||s===!1?e._shadow&&(t.remove(e._shadow),e._shadow=void 0):(e._shadow||(e._shadow=t.addShadow(f,C,w,F,s,N,z)),e._shadow.color=s))}}),Object.defineProperty(e,"shadowX",{get:function(){return f},set:function(H){f!==H&&(f=H,e._shadow&&(e._shadow.x=f))}}),Object.defineProperty(e,"shadowY",{get:function(){return C},set:function(H){C!==H&&(C=H,e._shadow&&(e._shadow.y=C))}}),Object.defineProperty(e,"decay",{get:function(){return w},set:function(H){w!==H&&(w=H,e._shadow&&(e._shadow.decay=w))}}),Object.defineProperty(e,"shadowPower",{get:function(){return F},set:function(H){F!==H&&(F=H,e._shadow&&(e._shadow.power=F))}}),Object.defineProperty(e,"shadowSamples",{get:function(){return N},set:function(H){N!==H&&(N=H,e._shadow&&(e._shadow.samples=N))}}),Object.defineProperty(e,"shadowIntensity",{get:function(){return z},set:function(H){z!==H&&(z=H,e._shadow&&(e._shadow.intensity=z))}}),e.shadowColor=null,Ri(e,"shadowColor"),e},s4=function(e){return cs(e,"shiftToBGR"),e},n4=function(e){if(_e(e,"shineSpeed"))return e;var t=Cs(e);if(!t)return e;var s,f=.5,C=3;return Object.defineProperty(e,"shineSpeed",{get:function(){return s},set:function(w){s!==w&&(s=w,s===null||s===!1?e._shine&&(t.remove(e._shine),e._shine=void 0):(e._shine||(e._shine=t.addShine(s,f,C)),e._shine.speed=s))}}),Object.defineProperty(e,"shineLineWidth",{get:function(){return f},set:function(w){f!==w&&(f=w,e._shine&&(e._shine.lineWidth=f))}}),Object.defineProperty(e,"shineGradient",{get:function(){return C},set:function(w){C!==w&&(C=w,e._shine&&(e._shine.gradient=C))}}),e.shineSpeed=null,Ri(e,"shineSpeed"),e},r4=function(e){return cs(e,"technicolor"),e},a4=function(e){if(_e(e,"tiltShiftRadius"))return e;var t=Cs(e);if(!t)return e;var s,f=1,C=.2,w=1,F=1,N=1;return Object.defineProperty(e,"tiltShiftRadius",{get:function(){return s},set:function(z){s!==z&&(s=z,s===null||s===!1?e._tiltShift&&(t.remove(e._tiltShift),e._tiltShift=void 0):(e._tiltShift||(e._tiltShift=t.addTiltShift(s,f,C,w,F,N)),e._tiltShift.radius=s))}}),Object.defineProperty(e,"tiltShiftAmount",{get:function(){return f},set:function(z){f!==z&&(f=z,e._tiltShift&&(e._tiltShift.amount=f))}}),Object.defineProperty(e,"tiltShiftContrast",{get:function(){return C},set:function(z){C!==z&&(C=z,e._tiltShift&&(e._tiltShift.contrast=C))}}),Object.defineProperty(e,"tiltShiftBlurX",{get:function(){return w},set:function(z){w!==z&&(w=z,e._tiltShift&&(e._tiltShift.blurX=w))}}),Object.defineProperty(e,"tiltShiftBlurY",{get:function(){return F},set:function(z){F!==z&&(F=z,e._tiltShift&&(e._tiltShift.blurY=F))}}),Object.defineProperty(e,"tiltShiftStrength",{get:function(){return N},set:function(z){N!==z&&(N=z,e._tiltShift&&(e._tiltShift.strength=N))}}),e.tiltShiftRadius=null,Ri(e,"tiltShiftRadius"),e},o4=function(e){if(_e(e,"vignetteRadius"))return e;var t=Cs(e);if(!t)return e;var s,f=.5,C=.5,w=.5;return Object.defineProperty(e,"vignetteRadius",{get:function(){return s},set:function(F){s!==F&&(s=F,s===null||s===!1?e._vignette&&(t.remove(e._vignette),e._vignette=void 0):(e._vignette||(e._vignette=t.addVignette(f,C,s,w)),e._vignette.radius=s))}}),Object.defineProperty(e,"vignetteX",{get:function(){return f},set:function(F){f!==F&&(f=F,e._vignette&&(e._vignette.x=f))}}),Object.defineProperty(e,"vignetteY",{get:function(){return C},set:function(F){C!==F&&(C=F,e._vignette&&(e._vignette.y=C))}}),Object.defineProperty(e,"vignetteStrength",{get:function(){return w},set:function(F){w!==F&&(w=F,e._vignette&&(e._vignette.strength=w))}}),e.vignetteRadius=null,Ri(e,"vignetteRadius"),e},h4=function(e){return cs(e,"vintagePinhole"),e},l4=function(e){if(_e(e,"wipeLeft"))return e;var t=Cs(e);if(!t)return e;var s,f,C,w,F=.1,N=function(){s=null,f=null,C=null,w=null},z=function(H){H._wipeEffect&&(t.remove(H._wipeEffect),H._wipeEffect=void 0)};return Object.defineProperty(e,"wipeLeft",{get:function(){return s},set:function(H){s!==H&&(N(),s=H,s===null||s===!1?z(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(F,0,0)),e._wipeEffect.direction=1,e._wipeEffect.axis=0,e._wipeEffect.progress=s))}}),Object.defineProperty(e,"wipeRight",{get:function(){return f},set:function(H){f!==H&&(N(),f=H,f===null||f===!1?z(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(F,0,0)),e._wipeEffect.direction=0,e._wipeEffect.axis=0,e._wipeEffect.progress=f))}}),Object.defineProperty(e,"wipeUp",{get:function(){return C},set:function(H){C!==H&&(N(),C=H,C===null||C===!1?z(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(F,0,0)),e._wipeEffect.direction=1,e._wipeEffect.axis=1,e._wipeEffect.progress=C))}}),Object.defineProperty(e,"wipeDown",{get:function(){return w},set:function(H){w!==H&&(N(),w=H,w===null||w===!1?z(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(F,0,0)),e._wipeEffect.direction=0,e._wipeEffect.axis=1,e._wipeEffect.progress=w))}}),Object.defineProperty(e,"wipeWidth",{get:function(){return F},set:function(H){F!==H&&(F=H,e._wipeEffect&&(e._wipeEffect.wipeWidth=F))}}),e.wipeLeft=null,Ri(e,"wipeLeft"),Ri(e,"wipeRight"),Ri(e,"wipeUp"),Ri(e,"wipeDown"),e};const wc={barrel:FB,blackWhite:DB,bloom:IB,blur:BB,bokeh:NB,brightness:GB,brown:UB,circle:kB,contrast:VB,desaturate:zB,desaturateLuminance:WB,displacement:XB,glow:HB,gradient:YB,grayscale:$B,hue:_B,kodachrome:ZB,lsd:KB,negative:JB,pixelate:QB,polaroid:jB,reveal:qB,saturate:t4,sepia:e4,shadow:i4,shiftToBGR:s4,shine:n4,technicolor:r4,tiltShift:a4,vignette:o4,vintagePinhole:h4,wipe:l4};var al=function(e,t){if(t===void 0)t=!0;else if(typeof t=="string")t={config:!0};else if(Array.isArray(t))for(var s=t,t={},f=0,C=s.length;f<C;f++)t[s[f]]=!0;if(t===!0)for(var w in wc)wc[w](e);else for(var w in t)t[w]&&wc[w]&&wc[w](e);return e};const u4=Phaser.Utils.Array.Remove;var d4={addGO(e,t){this.remove(e,!0),this.useTintFadeEffect(t)&&wB(t),this.viewportCoordinateEnable&&OB(t,this.viewport),this.effectPropertiesConfig&&al(t,this.effectPropertiesConfig),t.setName(e).once("destroy",function(){u4(this.removedGOs,t),this.isEmpty&&this.emit("empty")},this);var s=new this.BobClass(this,t,e);return this.bobs[e]=s,this},add(e,...t){var s=this.createGameObjectCallback,f=this.createGameObjectScope,C=s.call(f,this.scene,...t);this.addGO(e,C),this.gameObjectDepth!=null&&C.setDepth(this.gameObjectDepth);var w=this.get(e);return this.fadeBob(w,0,1),this}},f4={remove(e,t){var s=this.get(e);if(s)Array.isArray(s)||(s=[s]);else return this;var f=this;return s.forEach(function(C){delete f.bobs[C.name];var w=C.gameObject;f.removedGOs.push(w),w.setName(),t?C.destroy():f.fadeBob(C,void 0,0,function(){C.destroy()})}),this},removeAll(){var e=this.bobs;for(var t in e)this.remove(t);return this},clear(e){e===void 0&&(e=!0);var t=this.bobs;for(var s in t)e&&t[s].destroy(),delete t[s];return this.removedGOs.length=0,this}},c4={hasProperty(e,t){var s=Zo(e)?this.get(e):this.getFitst(e);return s?s.hasProperty(t):!1},getProperty(e,t){var s=Zo(e)?this.get(e):this.getFitst(e);if(s)return s.getProperty(t)},isNumberProperty(e,t){var s=this.getProperty(e,t);return typeof s=="number"},setProperty(e,t,s){var f=this.get(e);if(f)Array.isArray(f)||(f=[f]);else return this;return this.symbols&&typeof s=="string"&&this.isNumberProperty(e,t)&&(s in this.symbols?s=this.symbols[s]:console.warn(`Can't find symbol ${s}`)),f.forEach(function(C){C.setProperty(t,s)}),this},easeProperty(e,t){var s=this.get(e);if(s)Array.isArray(s)||(s=[s]);else return this;var f=t.value,C=t.property;return this.symbols&&typeof f=="string"&&this.isNumberProperty(e,C)&&f in this.symbols&&(t.value=this.symbols[f]),s.forEach(function(w){w.easeProperty(t)}),this},hasTweenTask(e,t){var s=Zo(e)?this.get(e):this.getFitst(e);return s?s.tweens.hasOwnProperty(t):!1},getTweenTask(e,t){var s=Zo(e)?this.get(e):this.getFitst(e);return s&&s.tweens[t]||null}},p4={hasMethod(e,t){var s=Zo(e)?this.get(e):this.getFitst(e);return s?s.hasMethod(t):!1},call(e,t,...s){var f=this.get(e);if(f)Array.isArray(f)||(f=[f]);else return this;return f.forEach(function(C){C.call(t,...s)}),this}},v4={hasData(e,t){var s=Zo(e)?this.get(e):this.getFitst(e);return s?s.hasData(t):!1},getData(e,t){if(this.has(e))return this.get(e).getData(t)},setData(e,t,s){var f=this.get(e);if(f)Array.isArray(f)||(f=[f]);else return this;return f.forEach(function(C){C.setData(t,s)}),this}};const oM=0,hM=1,Kg=2,lM=3,uM=4,Jg=5,m4={tint:oM,alpha:hM,revealUp:Kg,revealDown:lM,revealLeft:uM,revealRight:Jg};var g4={setGOFadeMode(e){return typeof e=="string"&&(e=m4[e]),this.fadeMode=e,this},setGOFadeTime(e){return this.fadeTime=e,this},useTintFadeEffect(e){return(this.fadeMode===void 0||this.fadeMode===oM)&&this.fadeTime>0&&e.setTint!==void 0},useAlphaFadeEffect(e){return(this.fadeMode===void 0||this.fadeMode===hM)&&this.fadeTime>0&&e.setAlpha!==void 0},useRevealEffect(e){return this.fadeMode>=Kg&&this.fadeMode<=Jg&&this.fadeTime>0&&(e.preFX||e.postFX)},fadeBob(e,t,s,f){var C=e.gameObject;if(this.useTintFadeEffect(C))t!==void 0&&e.setProperty("tintGray",255*t),e.easeProperty({property:"tintGray",value:Math.floor(255*s),duration:this.fadeTime,delay:0,ease:"Linear",repeat:0,yoyo:!1,from:!1,complete:f});else if(this.useAlphaFadeEffect(C))t!==void 0&&e.setProperty("alpha",t),e.easeProperty({property:"alpha",value:s,duration:this.fadeTime,delay:0,ease:"Linear",repeat:0,yoyo:!1,from:!1,complete:f});else if(this.useRevealEffect(C)){al(C,"reveal");var w;switch(this.fadeMode){case Kg:w="revealUp";break;case lM:w="revealDown";break;case uM:w="revealLeft";break;case Jg:w="revealRight";break}t===void 0&&(t=0),C[w]=t,e.easeProperty({property:w,value:s,duration:this.fadeTime,delay:0,ease:"Linear",repeat:0,yoyo:!1,from:!1,complete:f}),e.getTweenTask(w).once("complete",function(){C[w]=null})}else f&&f(C);return this}},Ze=function(e){return e.displayWidth!==void 0?e.displayWidth:e.width},Ke=function(e){return e.displayHeight!==void 0?e.displayHeight:e.height};const dM=Phaser.Geom.Rectangle,Er=Phaser.Math.Vector2,x4=Phaser.Math.RotateAround,y4=Phaser.GameObjects.Container;var Qg=function(e,t){if(t===void 0?t=new dM:t===!0&&(jg===void 0&&(jg=new dM),t=jg),e.getBounds&&!(e instanceof y4))return e.getBounds(t);var s,f,C,w,F,N,z,H;if(e.parentContainer){var Z=e.parentContainer.getBoundsTransformMatrix();Ko(e,t),Z.transformPoint(t.x,t.y,t),s=t.x,f=t.y,ed(e,t),Z.transformPoint(t.x,t.y,t),C=t.x,w=t.y,id(e,t),Z.transformPoint(t.x,t.y,t),F=t.x,N=t.y,qg(e,t),Z.transformPoint(t.x,t.y,t),z=t.x,H=t.y}else Ko(e,t),s=t.x,f=t.y,ed(e,t),C=t.x,w=t.y,id(e,t),F=t.x,N=t.y,qg(e,t),z=t.x,H=t.y;return t.x=Math.min(s,C,F,z),t.y=Math.min(f,w,N,H),t.width=Math.max(s,C,F,z)-t.x,t.height=Math.max(f,w,N,H)-t.y,t},jg=void 0,Ko=function(e,t,s){return t===void 0?t=new Er:t===!0&&(Ns===void 0&&(Ns=new Er),t=Ns),e.getTopLeft?e.getTopLeft(t):(t.x=e.x-Ze(e)*e.originX,t.y=e.y-Ke(e)*e.originY,sd(e,t,s))},ed=function(e,t,s){return t===void 0?t=new Er:t===!0&&(Ns===void 0&&(Ns=new Er),t=Ns),e.getTopRight?e.getTopRight(t):(t.x=e.x-Ze(e)*e.originX+Ze(e),t.y=e.y-Ke(e)*e.originY,sd(e,t,s))},id=function(e,t,s){return t===void 0?t=new Er:t===!0&&(Ns===void 0&&(Ns=new Er),t=Ns),e.getBottomLeft?e.getBottomLeft(t):(t.x=e.x-Ze(e)*e.originX,t.y=e.y-Ke(e)*e.originY+Ke(e),sd(e,t,s))},qg=function(e,t,s){return t===void 0?t=new Er:t===!0&&(Ns===void 0&&(Ns=new Er),t=Ns),e.getBottomRight?e.getBottomRight(t):(t.x=e.x-Ze(e)*e.originX+Ze(e),t.y=e.y-Ke(e)*e.originY+Ke(e),sd(e,t,s))},fM=function(e,t,s){t===void 0?t=new Er:t===!0&&(Ns===void 0&&(Ns=new Er),t=Ns);var f=Ze(e),C=Ke(e);return t.x=e.x+f*(.5-e.originX),t.y=e.y+C*(.5-e.originY),sd(e,t,s)},Ns=void 0,sd=function(e,t,s){if(s===void 0&&(s=!1),e.rotation!==0&&x4(t,e.x,e.y,e.rotation),s&&e.parentContainer){var f=e.parentContainer.getBoundsTransformMatrix();f.transformPoint(t.x,t.y,t)}return t};const nd=Phaser.Utils.Objects.GetValue;var cM=function(e,t,s){var f,C,w,F,N;if(typeof s=="number"?f=s:(f=nd(s,"color"),C=nd(s,"lineWidth"),w=nd(s,"fillColor"),F=nd(s,"fillAlpha",1),N=nd(s,"padding",0)),Array.isArray(e))for(var z=0,H=e.length;z<H;z++)pM(e[z],t,f,C,w,F,N);else pM(e,t,f,C,w,F,N)},pM=function(e,t,s,f,C,w,F){var N=e.getBounds||e.width!==void 0&&e.height!==void 0;if(N){s===void 0&&(s=16777215),f===void 0&&(f=1),C===void 0&&(C=null),w===void 0&&(w=1),F===void 0&&(F=0);var z=Ko(e,ol[0]);z.x-=F,z.y-=F;var H=ed(e,ol[1]);H.x+=F,H.y-=F;var Z=qg(e,ol[2]);Z.x+=F,Z.y+=F;var tt=id(e,ol[3]);tt.x-=F,tt.y+=F,C!==null&&t.fillStyle(C,w).fillPoints(ol,!0,!0),s!==null&&t.lineStyle(f,s).strokePoints(ol,!0,!0)}},ol=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],S4=function(e,t){return this.forEachGO(function(s){s.drawBounds?s.drawBounds(e,t):cM(s,e,t)}),this},vM=function(e,t){var s=e.cameras,f;if(t===void 0)f=s.main;else{var C=typeof t;switch(C){case"string":f=s.getCamera(t);break;case"number":f=s.cameras[t];break;default:f=t;break}}return f},T4={setCamera(e,t){var s=this.get(e);if(!s)return this;var f=vM(this.scene,t);return f?(s.gameObject.cameraFilter=4294967295^f.id,s.camera=f,this):this},getCamera(e){var t=this.get(e);return t?t.camera:null}},mM={drawGameObjectsBounds:S4};Object.assign(mM,xB,d4,f4,c4,p4,v4,g4,T4);const C4=Phaser.Cameras.Scene2D.BaseCamera;var M4=function(e){return e instanceof C4};const gM=Phaser.Geom.Rectangle;var hl=function(e,t,s){return M4(t)||(s=t,t=void 0),s===void 0?s=new gM:s===!0&&(s=E4),t?e.scale.getViewPort(t,s):e.scale.getViewPort(s)},E4=new gM;const Js=Phaser.Utils.Objects.GetValue;class ll{constructor(t,s){this.scene=t,this.BobClass=Js(s,"BobClass",Zg),this.setCreateGameObjectCallback(Js(s,"createGameObject"),Js(s,"createGameObjectScope")),this.setEventEmitter(Js(s,"eventEmitter",void 0)),this.setGameObjectDepth(Js(s,"depth",void 0));var f=Js(s,"fade",500);typeof f=="number"?(this.setGOFadeMode(),this.setGOFadeTime(f)):(this.setGOFadeMode(Js(f,"mode")),this.setGOFadeTime(Js(f,"time",500)));var C=Js(s,"viewportCoordinate",!1);C!==!1?(this.setViewportCoordinateEnable(Js(s,"enable",!0)),this.setViewport(Js(C,"viewport"))):this.setViewportCoordinateEnable(!1);var w=Js(s,"effectProperties",!1);this.setEffectPropertiesConfig(w),this.setSymbols(Js(s,"symbols")),this.bobs={},this.removedGOs=[],this._timeScale=1,this.name=Js(s,"name")}destroy(t){this.clear(!t),this.createGameObjectCallback=void 0,this.viewport=void 0,this.scene=void 0}set timeScale(t){if(this._timeScale!==t){this._timeScale=t;var s=this.bobs;for(var f in s)s[f].setTimeScale(t)}}get timeScale(){return this._timeScale}setTimeScale(t){return this.timeScale=t,this}setCreateGameObjectCallback(t,s){return this.createGameObjectCallback=t,this.createGameObjectScope=s,this}setGameObjectDepth(t){return this.gameObjectDepth=t,this}setViewportCoordinateEnable(t){return t===void 0&&(t=!0),this.viewportCoordinateEnable=t,this}setEffectPropertiesConfig(t){return t===void 0&&(t=!0),this.effectPropertiesConfig=t,this}setViewport(t){return t===void 0&&(t=hl(this.scene,this.scene.cameras.main)),this.viewport=t,this}setSymbols(t){return this.symbols=t,this}get isEmpty(){return Qu(this.bobs)&&this.removedGOs.length===0}}Object.assign(ll.prototype,Ju,mM);const P4=Phaser.GameObjects.GameObject,w4=Phaser.GameObjects.Layer;var Qs=function(e){return e instanceof P4||e instanceof w4};const b4=Phaser.GameObjects.Layer;var rd=function(e){return e instanceof b4},xM=function(e){var t=e.displayList;return rd(t)?t:null},En=function(e,t){if(e.length<=1)return e;t===void 0&&(t=!1);for(var s,f=0,C=e.length;f<C;f++){var w=e[f];if(w.displayList?s=w.displayList:w.parentContainer&&(s=w.parentContainer.list),s)break}return s||(s=w.scene.sys.displayList),s.depthSort&&(s.depthSort(),s=s.list),t?e.sort(function(F,N){return s.indexOf(N)-s.indexOf(F)}):e.sort(function(F,N){return s.indexOf(F)-s.indexOf(N)}),e},A4={getLayer(e){return this.getGO(e)},getLayers(e){return e===void 0&&(e=[]),this.forEachGO(function(t){e.push(t)}),En(e,!1),e},addToLayer(e,t){var s=this.getGO(e);if(!s){console.warn(`[LayerManager] Can't get layer "${e}"`);return}Array.isArray(t)||(t=[t]);for(var f=0,C=t.length;f<C;f++){var w=t[f];w.isRexContainerLite?w.addToLayer(s):s.add(w)}return s.scrollFactorX!==void 0&&w.setScrollFactor(s.scrollFactorX,s.scrollFactorY),this},addToBottomLayer(e){var t=this.getLayers()[0];return this.addToLayer(t.goName,e),this},addToTopLayer(e){var t=this.getLayers(),s=t[t.length-1];return this.addToLayer(s.goName,e),this},removeFromLayer(e,t,s){var f=this.getGO(e);if(!f){console.warn(`[LayerManager] Can't get layer "${e}"`);return}return s===void 0&&(s=!0),t.isRexContainerLite?t.removeFromLayer(f,s):(f.remove(t),s&&t.addToDisplayList()),this},clearLayer(e,t){t===void 0&&(t=!0);var s=this.getGO(e);if(!s){console.warn(`Can't get layer "${e}"`);return}if(t)for(var f=s.getAll(),C=0,w=f.length;C<w;C++)f[C].destroy();else s.removeAll();return this}},R4={setScrollFactor(e,t,s){s===void 0&&(s=t);var f=this.getLayer(e);if(!f)return this;f.scrollFactorX=t,f.scrollFactorY=s;for(var C=f.getAll(),w=0,F=C.length;w<F;w++)C[w].setScrollFactor(t,s);return this}};const bc=Phaser.Utils.Array,L4=function(){var e;return this.parentContainer?e=this.parentContainer.list:this.displayList&&(e=this.displayList.list),e?(bc.BringToTop(e,this),this):this},O4=function(){var e;return this.parentContainer?e=this.parentContainer.list:this.displayList&&(e=this.displayList.list),e?(bc.SendToBack(e,this),this):this},yM=function(e){var t;return e.parentContainer?(t=e.parentContainer.list,t.indexOf(this)===-1&&e.parentContainer.add(this)):e.displayList&&(t=e.displayList.list,t.indexOf(this)===-1&&e.displayList.add(this)),t?(bc.MoveBelow(t,this,e),this):this},SM=function(e){var t;return e.parentContainer?(t=e.parentContainer.list,t.indexOf(this)===-1&&(e.isRexContainerLite?e.addToContainer(e.parentContainer):e.parentContainer.add(e))):e.displayList&&(t=e.displayList.list,t.indexOf(this)===-1&&(e.isRexContainerLite?e.addToLayer(e.displayList):e.displayList.add(e))),t?(bc.MoveAbove(t,this,e),this):this};var Ac={bringMeToTop:L4,sendMeToBack:O4,moveMyDepthBelow:yM,moveMyDepthAbove:SM},F4={bringLayerToTop(e){var t=this.getLayer(e);return t?(Ac.bringMeToTop.call(t),this):this},sendLayerToBack(e){var t=this.getLayer(e);return t?(Ac.sendMeToBack.call(t),this):this},moveLayerBelow(e,t){if(e===t)return this;var s=this.getLayer(e),f=this.getLayer(t);return!s||!f?this:(Ac.moveMyDepthBelow.call(s,f),this)},moveLayerAbove(e,t){if(e===t)return this;var s=this.getLayer(e),f=this.getLayer(t);return!s||!f?this:(Ac.moveMyDepthAbove.call(s,f),this)}};const D4=ll.prototype.setCamera;var I4={setCamera(e,t){var s=vM(this.scene,t);return s||(s=this.scene.cameras.add(void 0,void 0,void 0,void 0,!1,t)),D4.call(this,e,s),this}},TM={};Object.assign(TM,A4,R4,F4,I4);const Rc=Phaser.Utils.Objects.GetValue;class Lc extends ll{constructor(t,s){s===void 0?s={}:Array.isArray(s)&&(s={layers:s}),s.hasOwnProperty("fade")||(s.fade=0),s.viewportCoordinate=!1,super(t,s);var f=Rc(s,"rootLayer");this.setRootLayer(f);var C=Rc(s,"layers");if(C)for(var w=0,F=C.length;w<F;w++){var N=C[w];if(typeof N=="string")this.add(N);else{var z=N.name;this.add(z);var H=N.scrollFactor,Z=Rc(N,"scrollFactorX",H),tt=Rc(N,"scrollFactorY",H);Z!==void 0&&this.setScrollFactor(z,Z,tt),this.setCamera(z,N.cameraName)}}}setCreateGameObjectCallback(t,s){return t||(t=B4),super.setCreateGameObjectCallback(t,s),this}setRootLayer(t){if(t===this.rootLayer)return this;var s=this.getAllGO();return t?t.add(s):this.scene.displayList.add(s),this.rootLayer=t,this}addGO(t,s){return super.addGO(t,s),s.name=t,this.rootLayer&&this.rootLayer.add(s),this}get(t,s){if(Qs(t)){var f=xM(t);if(!f||(t=f.name,!t))return}return super.get(t,s)}}var B4=function(e,t){var s=e.add.layer();return t!==void 0&&s.setDepth(t),s};Object.assign(Lc.prototype,TM);var N4=function(e){return b(e)?e.sys.sound:e.sound},G4=function(e){return this.sound.game.cache.audio.has(e)},ul=function(e){return e==null||typeof e!="object"?null:b(e)?e:e.scene&&b(e.scene)?e.scene:e.parent&&e.parent.scene&&b(e.parent.scene)?e.parent.scene:null};const U4=Phaser.Utils.Objects.GetValue;class Si{constructor(t,s){this.setParent(t),this.isShutdown=!1,this.setEventEmitter(U4(s,"eventEmitter",!0)),this.parent&&(this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.once("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this))}shutdown(t){this.isShutdown||(this.parent&&(this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.off("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this)),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.game=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onEnvDestroy(){this.destroy(!0)}onParentDestroy(t,s){this.destroy(s)}setParent(t){return this.parent=t,this.scene=ul(t),this.game=O(t),this}}Object.assign(Si.prototype,Ju);const k4=Phaser.Utils.Objects.GetValue;class Oc extends Si{constructor(t,s){super(t,s),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(k4(s,"tickingMode",1))}boot(){this.tickingMode===2&&!this.tickingState&&this.startTicking()}shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(t))}setTickingMode(t){typeof t=="string"&&(t=V4[t]),this.tickingMode=t}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(t){this._isRunning!==t&&(this._isRunning=t,this.tickingMode===1&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isPaused=!1,this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}}const V4={no:0,lazy:1,always:2},z4=Phaser.Utils.Objects.GetValue;class W4 extends Oc{constructor(t,s){super(t,s);var f=this.scene?"update":"step";this.tickEventName=z4(s,"tickEventName",f),this.isSceneTicker=!X4(this.tickEventName)}startTicking(){super.startTicking(),this.isSceneTicker?this.scene.sys.events.on(this.tickEventName,this.update,this):this.game.events.on(this.tickEventName,this.update,this)}stopTicking(){super.stopTicking(),this.isSceneTicker&&this.scene?this.scene.sys.events.off(this.tickEventName,this.update,this):this.game&&this.game.events.off(this.tickEventName,this.update,this)}}var X4=function(e){return e==="step"||e==="poststep"};const sa=Phaser.Utils.Objects.GetValue,CM=Phaser.Math.Clamp;let MM=class{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.state=sa(t,"state",ad),this.timeScale=sa(t,"timeScale",1),this.delay=sa(t,"delay",0),this.repeat=sa(t,"repeat",0),this.repeatCounter=sa(t,"repeatCounter",0),this.repeatDelay=sa(t,"repeatDelay",0),this.duration=sa(t,"duration",0),this.nowTime=sa(t,"nowTime",0),this.justRestart=sa(t,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,repeatDelay:this.repeatDelay,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(t){return this.timeScale=t,this}setDelay(t){return t===void 0&&(t=0),this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatInfinity(){return this.repeat=-1,this}setRepeatDelay(t){return this.repeatDelay=t,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?dl:od,this.repeatCounter=0,this}stop(){return this.state=ad,this}update(t,s){this.state===ad||this.state===Fc||s===0||this.timeScale===0||(this.nowTime+=s*this.timeScale,this.justRestart=!1,this.nowTime>=this.duration?this.repeat===-1||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration,this.repeatDelay>0&&(this.nowTime-=this.repeatDelay,this.state=EM)):(this.nowTime=this.duration,this.state=Fc):this.nowTime>=0&&(this.state=dl))}get t(){var t;switch(this.state){case ad:case od:case EM:t=0;break;case dl:t=this.nowTime/this.duration;break;case Fc:t=1;break}return CM(t,0,1)}set t(t){t=CM(t,-1,1),t<0?(this.state=od,this.nowTime=-this.delay*t):(this.state=dl,this.nowTime=this.duration*t,t===1&&this.repeat!==0&&this.repeatCounter++)}setT(t){return this.t=t,this}get isIdle(){return this.state===ad}get isDelay(){return this.state===od}get isCountDown(){return this.state===dl}get isRunning(){return this.state===od||this.state===dl}get isDone(){return this.state===Fc}get isOddIteration(){return(this.repeatCounter&1)===1}get isEvenIteration(){return(this.repeatCounter&1)===0}};const ad=0,od=1,dl=2,EM=3,Fc=-1;class H4 extends W4{constructor(t,s){super(t,s),this.timer=new MM}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}}const hd=Phaser.Utils.Objects.GetValue,PM=Phaser.Utils.Objects.GetAdvancedValue,Y4=Phaser.Tweens.Builders.GetEaseFunction;class Jo extends H4{resetFromJSON(t){return this.timer.resetFromJSON(hd(t,"timer")),this.setEnable(hd(t,"enable",!0)),this.setTarget(hd(t,"target",this.parent)),this.setDelay(PM(t,"delay",0)),this.setDuration(PM(t,"duration",1e3)),this.setEase(hd(t,"ease","Linear")),this.setRepeat(hd(t,"repeat",0)),this}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setTarget(t){return t===void 0&&(t=this.parent),this.target=t,this}setDelay(t){return this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatDelay(t){return this.repeatDelay=t,this}setEase(t){return t===void 0&&(t="Linear"),this.ease=t,this.easeFn=Y4(t),this}start(){return this.timer.isRunning?this:(super.start(),this)}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}stop(t){return t===void 0&&(t=!1),super.stop(),t&&(this.timer.setT(1),this.updateTarget(this.target,this.timer),this.complete()),this}update(t,s){if(!this.isRunning||!this.enable||this.parent.hasOwnProperty("active")&&!this.parent.active)return this;var f=this.target,C=this.timer;return C.update(t,s),C.isDelay||this.updateTarget(f,C),this.emit("update",f,this),C.isDone&&this.complete(),this}updateTarget(t,s){}}const $4=Phaser.Sound.BaseSound;var t0=function(e){return e instanceof $4};const wM=Phaser.Utils.Objects.GetValue,bM=Phaser.Utils.Objects.GetAdvancedValue,_4=Phaser.Math.Linear;let AM=class extends Jo{constructor(t,s,f){t0(t)&&(f=s,s=t,t=void 0),s.active=!0,s.scene=t,s.game=s.manager.game,super(s,f),this.volume={},this.resetFromJSON(f)}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(wM(t,"mode",0)),this.setEnable(wM(t,"enable",!0)),this.setVolumeRange(bM(t,"volume.start",this.parent.volume),bM(t,"volume.end",0)),this}setMode(t){return typeof t=="string"&&(t=Z4[t]),this.mode=t,this}setVolumeRange(t,s){return this.volume.start=t,this.volume.end=s,this}start(){return this.timer.isRunning?this:(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start(),this)}updateTarget(t,s){t.volume=_4(this.volume.start,this.volume.end,s.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.stop(),this.parent.destroy();break}return this}};const Z4={stop:1,destroy:2};var Dc=function(e,t,s,f,C){t0(e)&&(C=f,f=s,s=t,t=e,e=void 0),f===void 0&&(f=1),C===void 0&&(C=0);var w={mode:0,volume:{start:C,end:f},duration:s};typeof t=="string"&&(t=e.sys.sound.add(t));var F;return t.hasOwnProperty("_fade")?(F=t._fade,F.stop().resetFromJSON(w)):(F=new AM(e,t,w),t._fade=F),F.start(),t.isPlaying||t.setVolume(C).play(),t},fl=function(e,t,s,f){t0(e)&&(f=s,s=t,t=e,e=void 0),f===void 0&&(f=!0);var C={mode:f?2:1,volume:{start:t.volume,end:0},duration:s},w;return t.hasOwnProperty("_fade")?(w=t._fade,w.stop().resetFromJSON(C)):(w=new AM(e,t,C),t._fade=w),w.start(),t.isPlaying||t.play(),t};const ld=Phaser.Utils.Objects.GetValue;var K4={setBackgroundMusicLoop(e){return e===void 0&&(e=!0),this.backgroundMusicLoop=e,this},setBackgroundMusicFadeTime(e){return this.backgroundMusicFadeTime=e,this},getBackgroundMusic(){return this.backgroundMusic},setCurrentBackgroundMusic(e){return this.backgroundMusic=e,e&&(e.once("complete",function(){this.backgroundMusic===e&&(this.backgroundMusic.destroy(),this.backgroundMusic=void 0)},this).once("destroy",function(){this.backgroundMusic===e&&(this.backgroundMusic=void 0)},this),e.isPlaying||e.play()),this},playBackgroundMusic(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;if(this.backgroundMusic&&this.backgroundMusic.key===e)return this;this.stopBackgroundMusic();var s=this.sound.add(e,{loop:ld(t,"loop",this.backgroundMusicLoop),mute:ld(t,"mute",this.backgroundMusicMute),volume:ld(t,"volume",this.backgroundMusicVolume),detune:ld(t,"detune",0),rate:ld(t,"rate",1)});return this.setCurrentBackgroundMusic(s),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime),this},pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this},resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this},stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this},fadeInBackgroundMusic(e){return this.backgroundMusic&&Dc(this.backgroundMusic,e,this.backgroundMusicVolume,0),this},fadeOutBackgroundMusic(e,t){return this.backgroundMusic&&fl(this.backgroundMusic,e,t),this},crossFadeBackgroundMusic(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var s=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(t,!0).playBackgroundMusic(e).fadeInBackgroundMusic(t),this.backgroundMusicFadeTime=s,this},setBackgroundMusicMute(e){return e===void 0&&(e=!0),this.backgroundMusicMute=e,this},setBackgroundMusicVolume(e){return this.backgroundMusicVolume=e,this},setBackgroundMusicRate(e){return this.backgroundMusic&&this.backgroundMusic.setRate(e),this},setBackgroundMusicDetune(e){return this.backgroundMusic&&this.backgroundMusic.setDetune(e),this}};const ud=Phaser.Utils.Objects.GetValue;var J4={setBackgroundMusic2Loop(e){return e===void 0&&(e=!0),this.backgroundMusic2Loop=e,this},setBackgroundMusic2FadeTime(e){return this.backgroundMusic2FadeTime=e,this},getBackgroundMusic2(){return this.backgroundMusic2},setCurrentBackgroundMusic2(e){return this.backgroundMusic2=e,e&&(e.once("complete",function(){this.backgroundMusic2===e&&(this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)},this).once("destroy",function(){this.backgroundMusic2===e&&(this.backgroundMusic2=void 0)},this),e.isPlaying||e.play()),this},playBackgroundMusic2(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;if(this.backgroundMusic2&&this.backgroundMusic2.key===e)return this;this.stopBackgroundMusic2();var s=this.sound.add(e,{loop:ud(t,"loop",this.backgroundMusicLoop),mute:ud(t,"mute",this.backgroundMusic2Mute),volume:ud(t,"volume",this.backgroundMusic2Volume),detune:ud(t,"detune",0),rate:ud(t,"rate",1)});return this.setCurrentBackgroundMusic2(s),this.backgroundMusic2FadeTime>0&&this.fadeInBackgroundMusic2(this.backgroundMusic2FadeTime),this},pauseBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.pause(),this},resumeBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.resume(),this},stopBackgroundMusic2(){return this.backgroundMusic2&&(this.backgroundMusic2FadeTime>0?this.fadeOutBackgroundMusic2(this.backgroundMusic2FadeTime,!0):(this.backgroundMusic2.stop(),this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)),this},fadeInBackgroundMusic2(e){return this.backgroundMusic2&&Dc(this.backgroundMusic2,e,this.backgroundMusic2Volume,0),this},fadeOutBackgroundMusic2(e,t){return this.backgroundMusic2&&fl(this.backgroundMusic2,e,t),this},crossFadeBackgroundMusic2(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var s=this.backgroundMusic2FadeTime;return this.backgroundMusic2FadeTime=0,this.fadeOutBackgroundMusic2(t,!0).playBackgroundMusic2(e).fadeInBackgroundMusic2(t),this.backgroundMusic2FadeTime=s,this},setBackgroundMusic2Mute(e){return e===void 0&&(e=!0),this.backgroundMusic2Mute=e,this},setBackgroundMusic2Volume(e){return this.backgroundMusic2Volume=e,this},setBackgroundMusic2Rate(e){return this.backgroundMusic2&&this.backgroundMusic2.setRate(e),this},setBackgroundMusic2Detune(e){return this.backgroundMusic2&&this.backgroundMusic2.setDetune(e),this}};const RM=Phaser.Utils.Array.Remove,Ic=Phaser.Utils.Objects.GetValue;var Q4={getSoundEffects(){return this.soundEffects},getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]},playSoundEffect(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var s=this.sound.add(e,{mute:Ic(t,"mute",this.soundEffectsMute),volume:Ic(t,"volume",this.soundEffectsVolume),detune:Ic(t,"detune",0),rate:Ic(t,"rate",1)});return this.soundEffects.push(s),s.once("complete",function(){s.destroy(),this.sound&&RM(this.soundEffects,s)},this).once("destroy",function(){this.sound&&RM(this.soundEffects,s)},this).play(),this},stopAllSoundEffects(){for(var e=this.soundEffects.length-1;e>=0;e--){var t=this.soundEffects[e];t.stop(),t.destroy()}return this},fadeInSoundEffect(e){var t=this.getLastSoundEffect();return t&&Dc(t,e,this.soundEffectsVolume,0),this},fadeOutSoundEffect(e,t){var s=this.getLastSoundEffect();return s&&fl(s,e,t),this},fadeOutAllSoundEffects(e,t){for(var s=this.soundEffects.length-1;s>=0;s--)fl(this.soundEffects[s],e,t);return this},setSoundEffectMute(e,t){if(e===void 0&&(e=!0),t===void 0&&(t=!1),t){var s=this.getLastSoundEffect();s&&s.setMute(e)}else this.soundEffectsMute=e;return this},setSoundEffectVolume(e,t){if(t===void 0&&(t=!1),t){var s=this.getLastSoundEffect();s&&s.setVolume(e)}else this.soundEffectsVolume=e;return this},setSoundEffectDetune(e,t){t===void 0&&(t=!1);var s;t?s=[this.getLastSoundEffect()]:s=this.soundEffects;for(var f=0,C=s.length;f<C;f++)s[f].setDetune(e);return this},setSoundEffectRate(e,t){t===void 0&&(t=!1);var s;t?s=[this.getLastSoundEffect()]:s=this.soundEffects;for(var f=0,C=s.length;f<C;f++)s[f].setRate(e);return this}};const LM=Phaser.Utils.Array.Remove,Bc=Phaser.Utils.Objects.GetValue;var j4={getSoundEffects2(){return this.soundEffects2},getLastSoundEffect2(){return this.soundEffects2[this.soundEffects2.length-1]},playSoundEffect2(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var s=this.sound.add(e,{mute:Bc(t,"mute",this.soundEffects2Mute),volume:Bc(t,"volume",this.soundEffects2Volume),detune:Bc(t,"detune",0),rate:Bc(t,"rate",1)});return this.soundEffects2.push(s),s.once("complete",function(){s.destroy(),this.sound&&LM(this.soundEffects2,s)},this).once("destroy",function(){this.sound&&LM(this.soundEffects2,s)},this).play(),this},stopAllSoundEffects2(){for(var e=this.soundEffects.length-1;e>=0;e--){var t=this.soundEffects[e];t.stop(),t.destroy()}return this},fadeInSoundEffect2(e){var t=this.getLastSoundEffect2();return t&&Dc(t,e,this.soundEffects2Volume,0),this},fadeOutSoundEffect2(e,t){var s=this.getLastSoundEffect2();return s&&fl(s,e,t),this},fadeOutAllSoundEffects2(e,t){for(var s=this.soundEffects2.length-1;s>=0;s--)fl(this.soundEffects2[s],e,t);return this},setSoundEffect2Mute(e,t){if(e===void 0&&(e=!0),t===void 0&&(t=!1),t){var s=this.getLastSoundEffect2();s&&s.setMute(e)}else this.soundEffects2Mute=e;return this},setSoundEffect2Volume(e,t){if(t===void 0&&(t=!1),t){var s=this.getLastSoundEffect2();s&&s.setVolume(e)}else this.soundEffects2Volume=e;return this},setSoundEffect2Detune(e,t){t===void 0&&(t=!1);var s;t?s=[this.getLastSoundEffect2()]:s=this.soundEffects2;for(var f=0,C=s.length;f<C;f++)s[f].setDetune(e);return this},setSoundEffect2Rate(e,t){t===void 0&&(t=!1);var s;t?s=[this.getLastSoundEffect2()]:s=this.soundEffects2;for(var f=0,C=s.length;f<C;f++)s[f].setRate(e);return this}},OM={hasAudio:G4};Object.assign(OM,K4,J4,Q4,j4);const Pn=Phaser.Utils.Objects.GetValue;class FM{constructor(t,s){this.sound=N4(t),this.backgroundMusic=void 0,this._backgroundMusicVolume=Pn(s,"bgm.volume",1),this._backgroundMusicMute=Pn(s,"bgm.mute",!1),this.setBackgroundMusicLoop(Pn(s,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(Pn(s,"bgm.fade",500)),this.backgroundMusic2=void 0,this._backgroundMusic2Volume=Pn(s,"bgm2.volume",1),this._backgroundMusic2Mute=Pn(s,"bgm2.mute",!1),this.setBackgroundMusic2Loop(Pn(s,"bgm2.loop",!0)),this.setBackgroundMusic2FadeTime(Pn(s,"bgm2.fade",500)),this.soundEffects=[],this._soundEffectsVolume=Pn(s,"soundEffect.volume",1),this.soundEffects2=[],this._soundEffects2Volume=Pn(s,"soundEffect2.volume",1);var f=Pn(s,"bgm.initial",void 0);f&&this.setCurrentBackgroundMusic(f);var C=Pn(s,"bgm2.initial",void 0);C&&this.setCurrentBackgroundMusic2(C)}destroy(){if(this.backgroundMusic&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.backgroundMusic2&&this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0,this.soundEffects.length)for(var t=this.soundEffects.length-1;t>=0;t--)this.soundEffects[t].destroy();if(this.soundEffects.length=0,this.soundEffects2.length)for(var t=this.soundEffects2.length-1;t>=0;t--)this.soundEffects2[t].destroy();return this.soundEffects2.length=0,this.sound=void 0,this}get backgroundMusicMute(){return this._backgroundMusicMute}set backgroundMusicMute(t){this._backgroundMusicMute=t,this.backgroundMusic&&this.backgroundMusic.setMute(mute)}get backgroundMusicVolume(){return this._backgroundMusicVolume}set backgroundMusicVolume(t){this._backgroundMusicVolume=t,this.backgroundMusic&&this.backgroundMusic.setVolume(t)}get backgroundMusic2Mute(){return this._backgroundMusic2Mute}set backgroundMusic2Mute(t){this._backgroundMusic2Mute=t,this.backgroundMusic2&&this.backgroundMusic2.setMute(mute)}get backgroundMusic2Volume(){return this._backgroundMusic2Volume}set backgroundMusic2Volume(t){this._backgroundMusic2Volume=t,this.backgroundMusic2&&this.backgroundMusic2.setVolume(t)}get soundEffectsMute(){return this._soundEffectsMute}set soundEffectsMute(t){this._soundEffectsMute=t;for(var s=this.soundEffects,f=0,C=s.length;f<C;f++)s[f].setMute(t)}get soundEffectsVolume(){return this._soundEffectsVolume}set soundEffectsVolume(t){this._soundEffectsVolume=t;for(var s=this.soundEffects,f=0,C=s.length;f<C;f++)s[f].setVolume(t)}get soundEffects2Mute(){return this._soundEffects2Mute}set soundEffects2Mute(t){this._soundEffects2Mute=t;for(var s=this.soundEffects,f=0,C=soundEffects2.length;f<C;f++)s[f].setMute(t)}get soundEffects2Volume(){return this._soundEffects2Volume}set soundEffects2Volume(t){this._soundEffects2Volume=t;for(var s=this.soundEffects2,f=0,C=s.length;f<C;f++)s[f].setVolume(t)}}Object.assign(FM.prototype,OM);const e0=Phaser.Utils.Objects.GetValue;class q4 extends Oc{constructor(t,s){super(t,s),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.isRunning=e0(t,"isRunning",!1),this.timeScale=e0(t,"timeScale",1),this.now=e0(t,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(t){return t===void 0&&(t=0),this.delta=0,this.now=t,super.start(),this}seek(t){return this.now=t,this}setTimeScale(t){return this.timeScale=t,this}tick(t){return t*=this.timeScale,this.now+=t,this.delta=t,this.emit("update",this.now,this.delta),this}}class DM extends q4{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}update(t,s){return!this.isRunning||this.timeScale===0?this:(this.tick(s),this)}}var hi=function(e,t){return t===void 0&&(t=.5),e<=t?e=e/t:e=1-(e-t)/(1-t),e};const IM=Phaser.Math.Clamp;class t5{constructor(t,s){this.setTimeline(t).reset(s)}setTimeline(t){return this.timeline=t,this}setName(t){return this.name=t,this}setCallbacks(t,s,f,C){return this.target=t,this.onStart=s,this.onProgress=f,this.onComplete=C,this}setDuration(t,s){return s===void 0&&(s=!1),this.duration=t,this.remainder=t,this.t=0,this.yoyo=s,this}setPaused(t){return this.isPaused=t,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(t){return this.removed=t,this}remove(){return this.removed=!0,this}seek(t){return this.remainder=this.duration*(1-t),this}reset(t){return this.setName(t.name).setDuration(t.duration,t.yoyo).setCallbacks(t.target,t.onStart,t.onProgress,t.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var t=1-this.remainder/this.duration;return t=IM(t,0,1),this.yoyo&&(t=hi(t)),t}setProgress(t){t=IM(t,0,1),this.remainder=this.duration*(1-t)}runCallback(t){t&&t(this.target,this.t,this)}update(t,s){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=s,this.t=this.getProgress(),this.runCallback(this.onProgress);var f=this.remainder<=0;return f&&this.runCallback(this.onComplete),f}}let e5=class extends bt{allocate(){return this.pop()}free(t){t.onFree(),this.push(t)}freeMultiple(t){for(var s=0,f=t.length;s<f;s++)this.free(t[s]);return this}};const i5=Phaser.Utils.Objects.GetValue,s5=new e5;class n5 extends DM{constructor(t,s){super(t,s),this.addedTimers=[],this.timers=[],this.timerPool=i5(s,"pool",s5)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(t){var s=this.timerPool.allocate();return s?s.setTimeline(this).reset(t):s=new t5(this,t),this.addedTimers.push(s),s.runCallback(s.onStart),this.isRunning||this.start(),s}delayCall(t,s,f,C){var w=this.addTimer({duration:t,onComplete:function(F,N,z){f===void 0&&(f=[]),f.push(z),s.apply(C,f)}});return w}delayEvent(t,s){this.removeDelayEvent(s);var f=this.delayCall(t,function(){this.removeDelayEvent(s),this.emit(s)},[],this);return this.once(`_remove.${s}`,function(){f.remove(),f=void 0}),this}removeDelayEvent(t){return this.emit(`_remove.${t}`),this}getTimers(t){for(var s=[],f=[this.addedTimers,this.timers],C=0,w=f.length;C<w;C++)for(var F=f[C],N=0,z=F.length;N<z;N++){var H=F[N];H.name===t&&s.push(H)}return s}update(t,s){if(super.update(t,s),!!this.isRunning){this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var f=[],C=0,w=this.timers.length;C<w;C++){var F=this.timers[C],N=F.update(this.now,this.delta);N?this.timerPool.free(F):f.push(F)}this.timers=f,this.timers.length===0&&this.addedTimers.length===0&&this.complete()}}}const r5="_wait.complete",a5="_remove.wait";var o5=function(e,t,s,f,C){var w=ul(e),F=w.time.delayedCall(t,function(){w.sys.events.once("preupdate",function(){s.call(f,C)})});return F};let BM=class{constructor(t){t||(this.setEventEmitter(!0),t=this),this.parent=t,this.waitId=0,this.waitCompleteEventName=r5,this.removeWaitEventsEventName=a5}destroy(){this.removeWaitEvents(),this.clearWaitCompleteCallbacks(),this.parent=null}waitEvent(t,s,f){var C=this.getWaitCompleteTriggerCallback(f);return t.once(s,C,this),this.parent.once(this.removeWaitEventsEventName,function(){t.off(s,C,this)}),this.parent}getWaitCompleteTriggerCallback(t){t===void 0&&(t=!0);var s=this.waitId,f=this,C=function(){s<f.waitId||(f.waitId++,f.removeWaitEvents(),f.parent.emit(f.waitCompleteEventName))};if(t){var w=function(){o5(f.parent,0,C)};return w}else return C}removeWaitEvents(){return this.parent.emit(this.removeWaitEventsEventName),this}addWaitCompleteCallback(t,s){return this.parent.on(this.waitCompleteEventName,t,s),this}clearWaitCompleteCallbacks(){return this.parent.off(this.waitCompleteEventName),this}};Object.assign(BM.prototype,Ju);var h5={waitTime(e){var t=this.parent.timeline;return t.delayEvent(e,"delay"),this.parent.once(this.removeWaitEventsEventName,function(){t.removeDelayEvent("delay")}),this.waitEvent(t,"delay")}},l5=function(e,t){var s=`(?<!\\\\)\\${t}`,f=`\\${t}`;return e.split(new RegExp(s,"g")).map(function(C){return C.replace(f,t)})},u5={setClickTarget(e){return this.clickTarget=e,e?b(e)?this.touchEE=e.input:this.touchEE=e.setInteractive():this.touchEE=null,this},clearClickTarget(){return this.setClickTarget(),this},setClickShortcutKeys(e){return this.clickShortcutKeys=e,this},clearClickShortcutKeys(){return this.setClickShortcutKeys(),this},waitClick(){var e=this.touchEE,t=this.clickShortcutKeys;return e||t?(e&&this.waitEvent(e,"pointerdown"),t&&this.waitKeyDown(t)):this.waitTime(0),this},waitKeyDown(e){var t=this.scene.input.keyboard;if(typeof e=="string"){if(e.indexOf("|")===-1)return this.waitEvent(t,`keydown-${e.toUpperCase()}`);for(var s=l5(e,"|"),f=0,C=s.length;f<C;f++)this.waitEvent(t,`keydown-${s[f].toUpperCase()}`);return this.parent}else return this.waitEvent(t,"keydown")}},d5={waitGameObjectTweenComplete(e,t,s){var f=this.parent.getGameObjectTweenTask(e,t,s);return f?this.waitEvent(f,"complete"):this.waitTime(0)},waitGameObjectDataFlag(e,t,s,f){var C=this.parent.getGameObject(e,t);if(!C)return this.waitTime(0);if(C.getData(s)===f)return this.waitTime(0);var w=`changedata-${s}`,F=function(N,z,H){z=!!z,z===f&&N.emit("_dataFlagMatch")};return C.on(w,F),this.parent.once(this.removeWaitEventsEventName,function(){C.off(w,F)}),this.waitEvent(C,"_dataFlagMatch")},waitGameObjectDestroy(e,t){var s=this.parent.getGameObject(e,t);return s?this.waitEvent(s,"destroy"):this.waitTime(0)},waitGameObjectManagerEmpty(e){if(e){var t=this.parent.getGameObjectManager(e);return t?this.waitEvent(t,"empty"):this.waitTime(0)}else{var s=this.parent.gameObjectManagers,f=!1;for(var C in s)f=!0,this.waitEvent(s[C],"empty");return f?this.parent:this.waitTime(0)}}},f5={setCameraTarget(e){return this.cameraTarget=e,this},clearCameraTarget(){return this.setCameraTarget(),this},waitCameraEffectComplete(e,t){var s;if(t?s=this.scene.cameras.getCamera(t):s=this.cameraTarget,!s)return this.waitTime(0);var f,C;switch(e){case"camera.fadein":f=s.fadeEffect,C="camerafadeincomplete";break;case"camera.fadeout":f=s.fadeEffect,C="camerafadeoutcomplete";break;case"camera.flash":f=s.flashEffect,C="cameraflashcomplete";break;case"camera.shake":f=s.shakeEffect,C="camerashakecomplete";break;case"camera.zoom":f=s.zoomEffect,C="camerazoomcomplete";break;case"camera.rotate":f=s.rotateToEffect,C="camerarotatecomplete";break;case"camera.scroll":f=s.panEffect,C="camerapancomplete";break}return f.isRunning?this.waitEvent(s,C):this.waitTime(0)}},c5={waitSoundEffectComplete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getLastSoundEffect();return e?this.waitEvent(e,"complete"):this.waitTime(0)},waitSoundEffect2Complete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getLastSoundEffect2();return e?this.waitEvent(e,"complete"):this.waitTime(0)},waitBackgroundMusicComplete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getBackgroundMusic();return e?this.waitEvent(e,"complete"):this.waitTime(0)},waitBackgroundMusic2Complete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getBackgroundMusic2();return e?this.waitEvent(e,"complete"):this.waitTime(0)}},p5=function(e){if(!e)return this.waitTime(0);var t=!1;for(var s in e)switch(s){case"time":t=!0,this.waitTime(e.time);break;case"click":t=!0,this.waitClick();break;case"key":t=!0,this.waitKeyDown(e.key);break;case"bgm":t=!0,this.waitBackgroundMusicComplete();break;case"bgm2":t=!0,this.waitBackgroundMusic2Complete();break;case"se":t=!0,this.waitSoundEffectComplete();break;case"se2":t=!0,this.waitSoundEffect2Complete();break;case"camera":t=!0,this.waitCameraEffectComplete(`camera.${e.camera.toLowerCase()}`,e.cameraName);break;default:var f=s.split(".");if(f.length===2){var C=f[0],w=f[1],F=this.parent.getGameObjectManager(void 0,C);if(!F)continue;if(w==="destroy")return this.waitGameObjectDestroy(void 0,C);var N=F.getProperty(C,w);if(typeof N=="number"){t=!0,this.waitGameObjectTweenComplete(void 0,C,w);continue}var z=w,H=z.startsWith("!");if(H&&(z=z.substring(1)),F.hasData(C,w)){t=!0,this.waitGameObjectDataFlag(void 0,C,z,!H);continue}this.waitEvent(gameObject,w);continue}else f.length;break}return t||this.waitTime(0),this.parent},NM={waitAny:p5};Object.assign(NM,h5,u5,d5,f5,c5);class GM extends BM{constructor(t,s){super(t),this.waitCompleteEventName=Vt(s,"completeEventName",this.waitCompleteEventName),this.setClickTarget(Vt(s,"clickTarget",this.scene)),this.setClickShortcutKeys(Vt(s,"clickShortcutKeys",void 0)),this.setCameraTarget(Vt(s,"camera",this.scene.cameras.main))}get clickTarget(){return this.parent.clickTarget}set clickTarget(t){this.parent.clickTarget=t}get clickShortcutKeys(){return this.parent.clickShortcutKeys}set clickShortcutKeys(t){this.parent.clickShortcutKeys=t}get cameraTarget(){return this.parent.cameraTarget}set cameraTarget(t){this.parent.cameraTarget=t}destroy(){this.clearClickTarget(),this.clearClickShortcutKeys(),this.clearCameraTarget(),super.destroy()}get scene(){return this.parent.managersScene}}Object.assign(GM.prototype,NM);const Nc=Phaser.Utils.Objects.GetValue;var v5=function(e,t){this.clickTarget=void 0,this.clickShortcutKeys=void 0,this.cameraTarget=void 0,this.managersScene=e,this.gameObjectManagers={};var s=Nc(t,"layers",!1);if(s!==!1){var f=new Lc(e,{name:"LAYER",layers:s,rootLayer:Nc(t,"rootLayer",void 0),depth:Nc(t,"layerDepth",void 0)});this.addGameObjectManager(f),this.layerManager=f}var C=Nc(t,"sounds");return C!==!1&&(this.soundManager=new FM(e,C)),this.timeline=new n5(this),this.waitEventManager=new GM(this,t),this},m5=function(e){this.timeline.timeScale=e;for(var t in this.gameObjectManagers)this.gameObjectManagers[t].setTimeScale(e);return this},g5=function(){return this.timeline.timeScale},x5=function(e){this.waitEventManager.destroy(),this.waitEventManager=void 0,delete this.gameObjectManagers.layer;for(var t in this.gameObjectManagers)this.gameObjectManagers[t].destroy(e),delete this.gameObjectManagers[t];this.layerManager&&(this.layerManager.destroy(e),this.layerManager=void 0),this.soundManager&&(this.soundManager.destroy(),this.soundManager=void 0),this.timeline&&(this.timeline.destroy(),this.timeline=void 0),this.clickTarget=void 0,this.clickShortcutKeys=void 0,this.cameraTarget=void 0,this.managersScene=void 0},UM={addGameObjectManager(e,t){var s;return e instanceof ll?s=e:typeof e=="string"?(s=t,s.name=e):(e===void 0&&(e={}),t===void 0&&(t=ll),e.createGameObjectScope||(e.createGameObjectScope=this),s=new t(this.managersScene,e)),this.gameObjectManagers[s.name]=s,this},getGameObjectManager(e,t){if(e){var s=this.gameObjectManagers[e];return s}else{t&&t.charAt(0)==="!"&&(t=t.substring(1));for(var e in this.gameObjectManagers){var s=this.gameObjectManagers[e];if(s.has(t))return s}}},getGameObjectManagerNames(){var e=[];for(var t in this.gameObjectManagers)e.push(t);return e},getGameObjectManagerName(e){var t=this.getGameObjectManager(void 0,e);if(t)return t.name},hasGameObjectMananger(e){return e in this.gameObjectManagers}},y5={createGameObject(e,t,...s){return this.getGameObjectManager(e,t).add(t,...s),this},destroyGameObject(e,t){var s=this.getGameObjectManager(e,t);return t===void 0?s.removeAll():s.remove(t),this},hasGameObject(e,t){return!!this.getGameObjectManager(e,t)},callGameObjectMethod(e,t,s,...f){return this.getGameObjectManager(e,t).call(t,s,...f),this},setGameObjectProperty(e,t,s,f){return this.getGameObjectManager(e,t).setProperty(t,s,f),this},easeGameObjectProperty(e,t,s){return this.getGameObjectManager(e,t).easeProperty(t,s),this},getGameObjectTweenTask(e,t,s){return this.getGameObjectManager(e,t).getTweenTask(t,s)},getGameObject(e,t,s){var f=this.getGameObjectManager(e,t);if(!f)return s;if(typeof t=="string")return f.getGO(t);s===void 0&&(s=[]);var C=t;C===void 0&&(C=Object.keys(f.bobs));for(var w=Array.isArray(s),F=0,N=C.length;F<N;F++){t=C[F];var z=f.getGO(t);z&&(w?s.push(z):s[t]=z)}return s},addGameObject(e,t,s){var f=this.getGameObjectManager(e,t);if(typeof t=="string")f.addGO(t,s);else{var C=t;for(t in C)f.addGO(t,C[t])}return this},drawGameObjectsBounds(e,t,s){e instanceof Phaser.GameObjects.Graphics&&(s=t,t=e,e=void 0),e===void 0&&(e=this.getGameObjectManagerNames()),Array.isArray(e)||(e=[e]);for(var f=0,C=e.length;f<C;f++)this.getGameObjectManager(e[f]).drawGameObjectsBounds(t,s);return this}},S5=function(e){class t extends e{}var s={initManagers:v5,setTimeScale:m5,getTimeScale:g5,destroyManagers:x5};return Object.assign(t.prototype,s,UM,y5),t};function T5(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var kM={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,s="~";function f(){}Object.create&&(f.prototype=Object.create(null),new f().__proto__||(s=!1));function C(z,H,Z){this.fn=z,this.context=H,this.once=Z||!1}function w(z,H,Z,tt,nt){if(typeof Z!="function")throw new TypeError("The listener must be a function");var st=new C(Z,tt||z,nt),ht=s?s+H:H;return z._events[ht]?z._events[ht].fn?z._events[ht]=[z._events[ht],st]:z._events[ht].push(st):(z._events[ht]=st,z._eventsCount++),z}function F(z,H){--z._eventsCount===0?z._events=new f:delete z._events[H]}function N(){this._events=new f,this._eventsCount=0}N.prototype.eventNames=function(){var H=[],Z,tt;if(this._eventsCount===0)return H;for(tt in Z=this._events)t.call(Z,tt)&&H.push(s?tt.slice(1):tt);return Object.getOwnPropertySymbols?H.concat(Object.getOwnPropertySymbols(Z)):H},N.prototype.listeners=function(H){var Z=s?s+H:H,tt=this._events[Z];if(!tt)return[];if(tt.fn)return[tt.fn];for(var nt=0,st=tt.length,ht=new Array(st);nt<st;nt++)ht[nt]=tt[nt].fn;return ht},N.prototype.listenerCount=function(H){var Z=s?s+H:H,tt=this._events[Z];return tt?tt.fn?1:tt.length:0},N.prototype.emit=function(H,Z,tt,nt,st,ht){var ft=s?s+H:H;if(!this._events[ft])return!1;var dt=this._events[ft],gt=arguments.length,Et,yt;if(dt.fn){switch(dt.once&&this.removeListener(H,dt.fn,void 0,!0),gt){case 1:return dt.fn.call(dt.context),!0;case 2:return dt.fn.call(dt.context,Z),!0;case 3:return dt.fn.call(dt.context,Z,tt),!0;case 4:return dt.fn.call(dt.context,Z,tt,nt),!0;case 5:return dt.fn.call(dt.context,Z,tt,nt,st),!0;case 6:return dt.fn.call(dt.context,Z,tt,nt,st,ht),!0}for(yt=1,Et=new Array(gt-1);yt<gt;yt++)Et[yt-1]=arguments[yt];dt.fn.apply(dt.context,Et)}else{var Dt=dt.length,Wt;for(yt=0;yt<Dt;yt++)switch(dt[yt].once&&this.removeListener(H,dt[yt].fn,void 0,!0),gt){case 1:dt[yt].fn.call(dt[yt].context);break;case 2:dt[yt].fn.call(dt[yt].context,Z);break;case 3:dt[yt].fn.call(dt[yt].context,Z,tt);break;case 4:dt[yt].fn.call(dt[yt].context,Z,tt,nt);break;default:if(!Et)for(Wt=1,Et=new Array(gt-1);Wt<gt;Wt++)Et[Wt-1]=arguments[Wt];dt[yt].fn.apply(dt[yt].context,Et)}}return!0},N.prototype.on=function(H,Z,tt){return w(this,H,Z,tt,!1)},N.prototype.once=function(H,Z,tt){return w(this,H,Z,tt,!0)},N.prototype.removeListener=function(H,Z,tt,nt){var st=s?s+H:H;if(!this._events[st])return this;if(!Z)return F(this,st),this;var ht=this._events[st];if(ht.fn)ht.fn===Z&&(!nt||ht.once)&&(!tt||ht.context===tt)&&F(this,st);else{for(var ft=0,dt=[],gt=ht.length;ft<gt;ft++)(ht[ft].fn!==Z||nt&&!ht[ft].once||tt&&ht[ft].context!==tt)&&dt.push(ht[ft]);dt.length?this._events[st]=dt.length===1?dt[0]:dt:F(this,st)}return this},N.prototype.removeAllListeners=function(H){var Z;return H?(Z=s?s+H:H,this._events[Z]&&F(this,Z)):(this._events=new f,this._eventsCount=0),this},N.prototype.off=N.prototype.removeListener,N.prototype.addListener=N.prototype.on,N.prefixed=s,N.EventEmitter=N,e.exports=N})(kM);var C5=kM.exports,M5=T5(C5);class VM extends M5{shutdown(){this.removeAllListeners()}destroy(){this.removeAllListeners()}}var zM={setEventEmitter(e,t){return t===void 0&&(t=VM),this._privateEE=e===!0||e===void 0,this._eventEmitter=this._privateEE?new t:e,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(e){return this._eventEmitter&&e&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},E5=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,P5=/^0x[0-9A-F]+$/i,i0=function(e){if(typeof e!="string")return e;if(e==="")e=null;else if(E5.test(e))e=parseFloat(e);else if(P5.test(e))e=parseInt(e,16);else switch(e){case"false":e=!1;break;case"true":e=!0;break;case"null":e=null;break;case"undefined":e=void 0;break}return e};let WM=class{constructor(t){this.setEventEmitter(Vt(t,"eventEmitter",void 0)),this.setValueConverter(Vt(t,"valueConvert",!0)),this.setLoopEnable(Vt(t,"loop",!1)),this.setMultipleLinesTagEnable(Vt(t,"multipleLinesTag",!1));var s=Vt(t,"delimiters","<>");this.setDelimiters(s[0],s[1]),this.setTranslateTagNameCallback(Vt(t,"translateTagNameCallback")),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.justCompleted=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setMultipleLinesTagEnable(t){return t===void 0&&(t=!0),this.multipleLinesTagEnable=t,this}setDelimiters(t,s){s===void 0&&(s=t[1],t=t[0]),this.delimiterLeft=t,this.delimiterRight=s,t=sl(this.delimiterLeft),s=sl(this.delimiterRight);var f=this.multipleLinesTagEnable?"gs":"gi";return this.reSplit=RegExp(`${t}(.+?)${s}`,f),this}setTranslateTagNameCallback(t){return this.translateTagNameCallback=t,this}setValueConverter(t){return t===!0?t=i0:t||(t=w5),this.valueConverter=t,this}setLoopEnable(t){return t===void 0&&(t=!0),this.loopEnable=t,this}setSource(t){return this.source=t,this}resetIndex(t){return t===void 0&&(t=0),this.progressIndex=t,this.reSplit.lastIndex=t,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this.justCompleted=!1,this.isRunning=!1,this}start(t){return this.setSource(t).restart(),this}restart(){this.resetIndex().next()}next(){if(this.isPaused&&this.onResume(),this.isRunning)return this;if(this.isRunning=!0,this.justCompleted)return this.isRunning=!1,this;this.reSplit.lastIndex===0&&this.onStart();var t=this.source,s=t.length;for(this.reSplit.lastIndex=this.progressIndex;;){var f=this.reSplit.exec(t);if(!f){if(this.progressIndex<s&&(this.onContent(t.substring(this.progressIndex,s)),this.isPaused)){this.progressIndex=s;break}this.onComplete(),this.isRunning=!1;return}var C=this.reSplit.lastIndex,w=C-f[0].length;if(this.progressIndex<w&&(this.onContent(t.substring(this.progressIndex,w)),this.isPaused)){this.progressIndex=w;break}if(this.lastTagSource=f[0],this.onTag(f[1]),this.lastTagSource=void 0,this.progressIndex=C,this.isPaused)break}return this.isRunning=!1,this}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}pauseUntilEvent(t,s){return this.isPaused?this:(this.pause(),t.once(s,function(){this.next()},this),this)}onContent(t){this.skipEventFlag=!1,this.emit("content",t),this.lastContent=t}onTag(t){}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.justCompleted=!0,this.emit("complete",this),this.loopEnable&&this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}};const w5=function(e){return e};Object.assign(WM.prototype,zM);var b5=function(e,t,s){if(e==null)return[];t===void 0&&(t=i0),s===void 0&&(s=",");for(var f=e.split(s),C=0,w=f.length;C<w;C++)f[C]=t(f[C]);return f};class A5 extends WM{constructor(t){t===void 0&&(t={}),t.hasOwnProperty("multipleLinesTag")||(t.multipleLinesTag=!1),super(t),this.setTagExpression(Vt(t,"regex.tag",void 0)),this.setValueExpression(Vt(t,"regex.value",void 0));var s=Vt(t,"delimiters","<>");this.setDelimiters(s[0],s[1])}setTagExpression(t){return t||(t=Gc),this.tagExpression=t,this}setValueExpression(t){return t||(t=Gc),this.valueExpression=t,this}setDelimiters(t,s){super.setDelimiters(t,s);var f=`(${this.tagExpression})(=(${this.valueExpression}))?`;if(this.reTag=RegExp(f,"i"),this.tagExpression!==Gc||this.valueExpression!==Gc){var C=`${this.tagExpression}(=${this.valueExpression})?`,w=`/${this.tagExpression}`;t=sl(this.delimiterLeft),s=sl(this.delimiterRight);var F=this.multipleLinesTagEnable?"gs":"gi";this.reSplit=RegExp(`${t}((${C})|(${w}))${s}`,F)}return this}onTag(t){var s=t.match(this.reTag),f=s[1],C=f.charAt(0)==="/";if(C&&(f=f.substring(1,f.length)),this.translateTagNameCallback&&(f=this.translateTagNameCallback(f)),this.skipEventFlag=!1,C)this.emit(`-${f}`),this.skipEventFlag||this.emit("-",f),this.lastTagEnd=f;else{var w=b5(s[3],this.valueConverter);this.emit(`+${f}`,...w),this.skipEventFlag||this.emit("+",f,...w),this.lastTagStart=f}}}const Gc="[^=]+";var R5=function(e,t,s){var f="color",C;t.on("start",function(){C=e.textStyle.color}).on(`+${f}`,function(w){e.textStyle.setColor(w),t.skipEvent()}).on(`-${f}`,function(){e.textStyle.setColor(C),t.skipEvent()}).on("complete",function(){e.textStyle.setColor(C)})},L5=function(e,t,s){var f="stroke",C;t.on("start",function(){C=e.textStyle.stroke,e.textStyle.setStrokeStyle(null)}).on(`+${f}`,function(w){w===void 0&&(w=C),e.textStyle.setStrokeStyle(w),t.skipEvent()}).on(`-${f}`,function(){e.textStyle.setStrokeStyle(null),t.skipEvent()}).on("complete",function(){e.textStyle.setStrokeStyle(C)})},O5=function(e,t,s){var f="b";t.on("start",function(){e.textStyle.setBold(!1)}).on(`+${f}`,function(){e.textStyle.setBold(!0),t.skipEvent()}).on(`-${f}`,function(){e.textStyle.setBold(!1),t.skipEvent()})},F5=function(e,t,s){var f="i";t.on("start",function(){e.textStyle.setItalic(!1)}).on(`+${f}`,function(){e.textStyle.setItalic(!0),t.skipEvent()}).on(`-${f}`,function(){e.textStyle.setItalic(!1),t.skipEvent()})},D5=function(e,t,s){var f="size",C;t.on("start",function(){C=e.textStyle.fontSize}).on(`+${f}`,function(w){e.textStyle.setFontSize(w),t.skipEvent()}).on(`-${f}`,function(){e.textStyle.setFontSize(C),t.skipEvent()}).on("complete",function(){e.textStyle.setFontSize(C)})},I5=function(e,t,s){var f="y",C;t.on("start",function(){C=e.textStyle.offsetY,e.textStyle.setOffsetY(0)}).on(`+${f}`,function(w){w===void 0&&(w=C),e.textStyle.setOffsetY(w),t.skipEvent()}).on(`-${f}`,function(){e.textStyle.setOffsetY(0),t.skipEvent()}).on("complete",function(){e.textStyle.setOffsetY(0)})},B5=function(e,t,s){var f="x",C;t.on("start",function(){C=e.textStyle.offsetY,e.textStyle.setOffsetX(0)}).on(`+${f}`,function(w){w===void 0&&(w=C),e.textStyle.setOffsetX(w),t.skipEvent()}).on(`-${f}`,function(){e.textStyle.setOffsetX(0),t.skipEvent()}).on("complete",function(){e.textStyle.setOffsetX(0)})},N5=function(e,t,s){var f="left",C;t.on("start",function(){C=e.textStyle.leftSpace,e.textStyle.setLeftSpace(0)}).on(`+${f}`,function(w){w===void 0&&(w=C),e.textStyle.setLeftSpace(w),t.skipEvent()}).on(`-${f}`,function(){e.textStyle.setLeftSpace(0),t.skipEvent()}).on("complete",function(){e.textStyle.setLeftSpace(0)})},G5=function(e,t,s){var f="right",C;t.on("start",function(){C=e.textStyle.rightSpace,e.textStyle.setRightSpace(0)}).on(`+${f}`,function(w){w===void 0&&(w=C),e.textStyle.setRightSpace(w),t.skipEvent()}).on(`-${f}`,function(){e.textStyle.setRightSpace(0),t.skipEvent()}).on("complete",function(){e.textStyle.setRightSpace(0)})},U5=function(e,t,s){var f="shadow",C;t.on("start",function(){C=e.textStyle.shadowColor,e.textStyle.setShadowColor(null)}).on(`+${f}`,function(w){w===void 0&&(w=C),e.textStyle.setShadowColor(w),t.skipEvent()}).on(`-${f}`,function(){e.textStyle.setShadowColor(null),t.skipEvent()}).on("complete",function(){e.textStyle.setShadowColor(C)})},k5=function(e,t,s){var f="align";t.on(`+${f}`,function(C){e.textStyle.setAlign(C),t.skipEvent()}).on(`-${f}`,function(){e.textStyle.setAlign(),t.skipEvent()}).on("complete",function(){e.textStyle.setAlign()})},V5=function(e,t,s){var f="img";t.on(`+${f}`,function(C){var w=e.imageManager.get(C);w&&j1.call(e,w.key,w.frame,{width:w.width,hieght:w.height,leftSpace:w.left,rightSpace:w.right,color:w.tintFill?e.textStyle.color:void 0}),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},z5=function(e,t,s){var f="space";t.on(`+${f}`,function(C){q1.call(e,C),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},W5=function(e,t,s){var f="speed";t.on(`+${f}`,function(C){XM(e,C),t.skipEvent()}).on(`-${f}`,function(){XM(e,void 0),t.skipEvent()})},X5=function(e){this.typeWriter.setTypingSpeed(e)},XM=function(e,t){ve.call(e,"speed",X5,t,e)},H5=function(e,t,s){var f="se";t.on(`+${f}`,function(C,w){ve.call(e,f,Y5,[C,w],e),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="se2";t.on(`+${f}`,function(C,w){ve.call(e,f,$5,[C,w],e),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},Y5=function(e){if(!this.skipSoundEffect){var t=e[0],s=e[1];this.soundManager.playSoundEffect(t),s&&this.soundManager.fadeInSoundEffect(s)}},$5=function(e){if(!this.skipSoundEffect){var t=e[0],s=e[1];this.soundManager.playSoundEffect2(t),s&&this.soundManager.fadeInSoundEffect2(s)}},_5=function(e,t,s){var f="se.fadein";t.on(`+${f}`,function(C){ve.call(e,f,Z5,C,e),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="se2.fadein";t.on(`+${f}`,function(C){ve.call(e,f,K5,C,e),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},Z5=function(e){this.soundManager.fadeInSoundEffect(e)},K5=function(e){this.soundManager.fadeInSoundEffect2(e)},J5=function(e,t,s){var f="se.fadeout";t.on(`+${f}`,function(C,w){w=w==="stop",ve.call(e,f,Q5,[C,w],e),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="se2.fadeout";t.on(`+${f}`,function(C,w){w=w==="stop",ve.call(e,f,j5,[C,w],e),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},Q5=function(e){this.soundManager.fadeOutSoundEffect(...e)},j5=function(e){this.soundManager.fadeOutSoundEffect2(...e)},q5=function(e,t,s){var f="se.volume";t.on(`+${f}`,function(C){ve.call(e,f,tN,C,e),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="se2.volume";t.on(`+${f}`,function(C){ve.call(e,f,eN,C,e),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},tN=function(e){this.soundManager.setSoundEffectVolume(e,!0)},eN=function(e){this.soundManager.setSoundEffectVolume2(e,!0)},iN=function(e,t,s){var f="se.mute";t.on(`+${f}`,function(){ve.call(e,f,sN,void 0,e),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="se2.mute";t.on(`+${f}`,function(){ve.call(e,f,nN,void 0,e),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="se.unmute";t.on(`+${f}`,function(){ve.call(e,f,rN,void 0,e),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="se2.unmute";t.on(`+${f}`,function(){ve.call(e,f,aN,void 0,e),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},sN=function(){this.soundManager.setSoundEffectMute(!0)},nN=function(){this.soundManager.setSoundEffect2Mute(!0)},rN=function(){this.soundManager.setSoundEffectMute(!1)},aN=function(){this.soundManager.setSoundEffect2Mute(!1)},oN=function(e,t,s){var f="bgm";t.on(`+${f}`,function(C,w){ve.call(e,f,hN,[C,w],e),t.skipEvent()}).on(`-${f}`,function(){ve.call(e,"bgm.stop",lN,void 0,e),t.skipEvent()});var f="bgm2";t.on(`+${f}`,function(C,w){ve.call(e,f,uN,[C,w],e),t.skipEvent()}).on(`-${f}`,function(){ve.call(e,"bgm2.stop",dN,void 0,e),t.skipEvent()})},hN=function(e){var t=e[0],s=e[1];this.soundManager.playBackgroundMusic(t),s&&this.soundManager.fadeInBackgroundMusic(s)},lN=function(){this.soundManager.stopBackgroundMusic()},uN=function(e){var t=e[0],s=e[1];this.soundManager.playBackgroundMusic2(t),s&&this.soundManager.fadeInBackgroundMusic2(s)},dN=function(){this.soundManager.stopBackgroundMusic2()},fN=function(e,t,s){var f="bgm.fadein";t.on(`+${f}`,function(C){ve.call(e,f,cN,C,e),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="bgm2.fadein";t.on(`+${f}`,function(C){ve.call(e,f,pN,C,e),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},cN=function(e){this.soundManager.fadeInBackgroundMusic(e)},pN=function(e){this.soundManager.fadeInBackgroundMusic2(e)},vN=function(e,t,s){var f="bgm.fadeout";t.on(`+${f}`,function(C,w){w=w==="stop",ve.call(e,f,mN,[C,w],e),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="bgm2.fadeout";t.on(`+${f}`,function(C,w){w=w==="stop",ve.call(e,f,gN,[C,w],e),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},mN=function(e){this.soundManager.fadeOutBackgroundMusic(...e)},gN=function(e){this.soundManager.fadeOutBackgroundMusic2(...e)},xN=function(e,t,s){var f="bgm.cross";t.on(`+${f}`,function(C,w){ve.call(e,f,yN,[C,w],e),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="bgm2.cross";t.on(`+${f}`,function(C,w){ve.call(e,f,SN,[C,w],e),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},yN=function(e){this.soundManager.crossFadeBackgroundMusic(...e)},SN=function(e){this.soundManager.crossFadeBackgroundMusic2(...e)},TN=function(e,t,s){var f="bgm.pause";t.on(`+${f}`,function(){ve.call(e,f,CN,void 0,e),t.skipEvent()}).on(`-${f}`,function(){ve.call(e,"bgm.resume",MN,void 0,e),t.skipEvent()});var f="bgm2.pause";t.on(`+${f}`,function(){ve.call(e,f,EN,void 0,e),t.skipEvent()}).on(`-${f}`,function(){ve.call(e,"bgm2.resume",PN,void 0,e),t.skipEvent()})},CN=function(){this.soundManager.pauseBackgroundMusic()},MN=function(){this.soundManager.resumeBackgroundMusic()},EN=function(){this.soundManager.pauseBackgroundMusic2()},PN=function(){this.soundManager.resumeBackgroundMusic2()},wN=function(e,t,s){var f="bgm.volume";t.on(`+${f}`,function(C){ve.call(e,f,bN,C,e),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="bgm2.volume";t.on(`+${f}`,function(C){ve.call(e,f,AN,C,e),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},bN=function(e){this.soundManager.setBackgroundMusicVolume(e)},AN=function(e){this.soundManager.setBackgroundMusicVolume2(e)},RN=function(e,t,s){var f="bgm.mute";t.on(`+${f}`,function(){ve.call(e,f,LN,void 0,e),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="bgm2.mute";t.on(`+${f}`,function(){ve.call(e,f,ON,void 0,e),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="bgm.unmute";t.on(`+${f}`,function(){ve.call(e,f,FN,void 0,e),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="bgm2.unmute";t.on(`+${f}`,function(){ve.call(e,f,DN,void 0,e),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},LN=function(){this.soundManager.setBackgroundMusicMute(!0)},ON=function(){this.soundManager.setBackgroundMusic2Mute(!0)},FN=function(){this.soundManager.setBackgroundMusicMute(!1)},DN=function(){this.soundManager.setBackgroundMusic2Mute(!1)},IN=function(e,t,s){var f="camera.fadein";t.on(`+${f}`,function(C,w,F,N){ve.call(e,f,BN,[C,w,F,N],e),t.skipEvent()})},BN=function(e){this.cameraTarget.fadeIn(...e)},NN=function(e,t,s){var f="camera.fadeout";t.on(`+${f}`,function(C,w,F,N){ve.call(e,f,GN,[C,w,F,N],e),t.skipEvent()})},GN=function(e){this.cameraTarget.fadeOut(...e)},UN=function(e,t,s){var f="camera.shake";t.on(`+${f}`,function(C,w){ve.call(e,f,kN,[C,w],e),t.skipEvent()})},kN=function(e){this.cameraTarget.shake(...e)},VN=function(e,t,s){var f="camera.flash";t.on(`+${f}`,function(C,w,F,N){ve.call(e,f,zN,[C,w,F,N],e),t.skipEvent()})},zN=function(e){this.cameraTarget.flash(...e)},WN=function(e,t,s){var f="camera.zoom";t.on(`+${f}`,function(C){ve.call(e,f,XN,C,e),t.skipEvent()}).on(`+${f}.to`,function(C,w,F){ve.call(e,"camera.zoom.to",HN,[C,w,F],e),t.skipEvent()})},XN=function(e){this.cameraTarget.setZoom(e)},HN=function(e){this.cameraTarget.zoomTo(...e)};const HM=Phaser.Math.DegToRad;var YN=function(e,t,s){var f="camera.rotate";t.on(`+${f}`,function(C){C=HM(C),ve.call(e,f,$N,C,e),t.skipEvent()}).on(`+${f}.to`,function(C,w,F){C=HM(C),ve.call(e,"camera.rotate.to",_N,[C,w,F],e),t.skipEvent()})},$N=function(e){this.cameraTarget.setRotation(e)},_N=function(e){var t=e[0],s=e[1],f=e[2];this.cameraTarget.rotateTo(t,!1,s,f)},ZN=function(e,t,s){var f="camera.scroll";t.on(`+${f}`,function(C,w){ve.call(e,f,KN,[C,w],e),t.skipEvent()}).on(`+${f}.to`,function(C,w,F,N){ve.call(e,"camera.scroll.to",JN,[C,w,F,N],e),t.skipEvent()})},KN=function(e){this.cameraTarget.setScroll(...e)},JN=function(e){var t=e[0],s=e[1],f=e[2],C=e[3],w=this.cameraTarget,F=w.scrollX,N=w.scrollY;w.setScroll(t,s),t+=w.centerX,s+=w.centerY,w.setScroll(F,N),w.pan(t,s,f,C)},QN=function(e,t,s){var f="wait",C="click";t.on(`+${f}`,function(w){YM(e,w),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()}).on(`+${C}`,function(){YM(e,"click"),t.skipEvent()}).on(`-${C}`,function(){t.skipEvent()})},jN=function(e){this.typeWriter.wait(e)},YM=function(e,t){ve.call(e,"wait",jN,t,e)},qN=function(e,t,s){var f="r";t.on(`+${f}`,function(){Ku.call(e,`
`),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},tG=function(e,t,s){for(var f=["pagebreak","pb"],C=0,w=f.length;C<w;C++){var F=f[C];t.on(`+${F}`,function(){Ku.call(e,"\f"),t.skipEvent()}).on(`-${F}`,function(){t.skipEvent()})}},eG=function(e,t,s){var f="content.off";t.on(`+${f}`,function(){t.setContentOutputEnable(!1),t.skipEvent()})},iG=function(e,t,s){var f="content.on";t.on(`+${f}`,function(){t.setContentOutputEnable(),t.skipEvent()})},sG=function(e,t,s){t.on("content",function(f){if(t.contentOutputEnable)Ku.call(e,f);else{var C=`+${t.lastTagStart}`;e.emit(`parser.${C}#content`,t,f)}})},nG=function(e,t,s){t.on("start",function(){e.emit("parser.start",t)}).on("+",function(f,...C){if(!t.skipEventFlag){var w=`+${f}`,F=C;e.emit(`parser.${w}`,t,...C,F),$M(e,w,F)}}).on("-",function(f){if(!t.skipEventFlag){var C=`-${f}`,w=[];e.emit(`parser.${C}`,t,w),$M(e,C,w)}}).on("complete",function(){e.emit("parser.complete",t)})},rG=function(e,t){var s=`tag.${t}`;e==null?this.emit(s):this.emit(s,...e)},$M=function(e,t,s){ve.call(e,t,rG,s,e)};const _M=[R5,L5,O5,F5,D5,U5,k5,I5,B5,N5,G5,V5,z5,W5,H5,_5,J5,q5,iN,oN,fN,vN,xN,TN,wN,RN,IN,NN,UN,VN,WN,YN,ZN,QN,qN,tG,eG,iG,sG,nG];var aG=function(e,t,s){for(var f=0,C=_M.length;f<C;f++)_M[f](e,t,s)},oG=function(e,t){for(var s=e.commentLineStart,f=t.split(`
`),C=0,w=f.length;C<w;C++){var F=f[C];F===""||(F.trim().length===0||s&&F.startsWith(s))&&(f[C]="")}return f.join("")};const hG=Phaser.Utils.Objects.GetValue;class lG extends A5{constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("delimiters")||(s.delimiters="[]"),super(s),aG(t,this,s),this.setCommentLineStartSymbol(hG(s,"comment","//")),this.setContentOutputEnable()}setCommentLineStartSymbol(t){return this.commentLineStart=t,this}setContentOutputEnable(t){return t===void 0&&(t=!0),this.contentOutputEnable=t,this}start(t){return super.start(oG(this,t)),this}}var uG={setDefaultTypingSpeed(e){return this.defaultSpeed=e,this},setTypingSpeed(e){return e===void 0&&(e=this.defaultSpeed),this.speed=e,this}};const Qo="page.fadeout",s0="_remove.play",ZM=[Qo,s0];var dG=function(){if(!this.fadeOutPageCallback||!this.children)return this.emit(Qo),this;var e=this.children.filter(function(f){return f.renderable}),t=this.fadeOutPageCallback(e,this.fadeOutPageDuration);if(!t)this.emit(Qo);else if(t.once)t.once("complete",function(){this.emit(Qo)},this);else if(t.then){var s=this;t.then(function(){s.emit(Qo)})}else this.emit(Qo);return this},Uc=function(e,t){return new Promise(function(s,f){e.once(t,function(){s()})})},ps=function(e){return Uc(e,"complete")},fG=function(e){return this.children=e,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(e),this.typing(),ps(this)};const cG="delay",KM="anim";var JM=function(e){e===void 0&&(e=0);var t=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var s=this.getNextChild();if(!s){this.timeline.isRunning?this.timeline.once("complete",function(){this.isPageTyping=!1,this.emit("complete")},this):(this.isPageTyping=!1,this.emit("complete"));break}if(s.renderable){var f=this.animationConfig;if(f.duration>0){var C=this.timeline.addTimer({name:KM,target:s,duration:f.duration,yoyo:f.yoyo,onStart:f.onStart,onProgress:f.onProgress,onComplete:f.onComplete});this.skipTypingAnimation&&C.seek(1)}else f.onStart&&f.onStart(s,0);this.minSizeEnable&&this.textPlayer.setToMinSize(),this.textPlayer.emit("typing",s);var w=this.nextChild;if(w&&!(this.skipSpaceEnable&&s3(w))){if(t+=this.speed+e,e=0,t>0){this.typingTimer=this.timeline.addTimer({name:cG,target:this,duration:t,onComplete:function(F,N,z){F.typingTimer=void 0,JM.call(F,z.remainder)}});break}}}else n3(s)&&s.exec()}this.minSizeEnable&&this.textPlayer.setToMinSize(),this.inTypingProcessLoop=!1},pG=function(){return this.timeline.pause(),this},vG=function(){return this.timeline.resume(),this},mG=function(){return this.isTypingPaused?this:(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0),this)},gG=function(e){return this.isTypingPaused?(e===void 0&&(e=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=e):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(e)),this):this},xG=function(e){switch(e){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}},yG=function(e,t){var s=t.split(".");return e.gameObjectManagers.hasOwnProperty(s[0])},SG=function(e,t,s,f){var C=e.waitEventManager,w=t.split("."),F=w[0],N=e.getGameObjectManager(F),z=`wait.${F}`;switch(w.length){case 1:C.waitGameObjectManagerEmpty(F),e.emit(z);return;case 2:var H=w[1];C.waitGameObjectDestroy(F,H),e.emit(z,H);return;case 3:var H=w[1],Z=w[2],tt=N.getProperty(H,Z);if(typeof tt=="number"){C.waitGameObjectTweenComplete(F,H,Z),e.emit(z,H,Z);return}var nt=Z,st=nt.startsWith("!");if(st&&(nt=nt.substring(1)),N.hasData(H,nt)){C.waitGameObjectDataFlag(F,H,nt,!st),e.emit(z,H,nt);return}else{C.waitTime(0);return}}};const TG=Phaser.Input.Keyboard.KeyCodes;var QM=function(e,t,s,f){var C=e.waitEventManager;C.clearWaitCompleteCallbacks().addWaitCompleteCallback(s,f),typeof t=="string"&&t.length>1&&t.indexOf("|")!==-1?t=t.split("|"):t=[t];for(var w=0,F=t.length;w<F;w++){var N=t[w];if(N==null||N==="wait"){var z=e.waitEventManager.getWaitCompleteTriggerCallback();e.emit("wait",z)}else if(typeof N=="number"||!isNaN(N)){var H=parseFloat(N);C.waitTime(H),e.emit("wait.time",H)}else if(N==="click")C.waitClick(),e.emit("wait.click");else if(N==="se"){C.waitSoundEffectComplete();var Z=e.soundManager.getLastSoundEffect();e.emit("wait.music",Z)}else if(N==="se2"){C.waitSoundEffect2Complete();var Z=e.soundManager.getLastSoundEffect2();e.emit("wait.music",Z)}else if(N==="bgm"){C.waitBackgroundMusicComplete();var Z=e.soundManager.getBackgroundMusic();e.emit("wait.music",Z)}else if(N==="bgm2"){C.waitBackgroundMusic2Complete();var Z=e.soundManager.getBackgroundMusic2();e.emit("wait.music",Z)}else if(TG.hasOwnProperty(N.toUpperCase()))C.waitKeyDown(N),e.emit("wait.keydown",N);else if(xG(N))C.waitCameraEffectComplete(N),e.emit("wait.camera",N);else if(yG(e,N))SG(e,N);else{var z=e.waitEventManager.getWaitCompleteTriggerCallback();e.emit(`wait.${N}`,z)}}},CG=function(e){return this.ignoreWait?this:(this.pauseTyping(),QM(this.textPlayer,e,this.resumeTyping,this),this)},MG=function(e){return e===void 0&&(e=!0),this.ignoreWait=e,this},EG=function(e){return e===void 0&&(e=!0),this.skipSpaceEnable=e,this},PG=function(e){if(e===void 0&&(e=!0),this.skipTypingAnimation=e,e)for(var t=this.timeline.getTimers(KM),s=0,f=t.length;s<f;s++)t[s].seek(1);return this},wG=function(e){if(e===void 0&&(e=!0),this.skipSoundEffect=e,e){var t=this.textPlayer._soundManager;t&&t.fadeOutAllSoundEffects(100,!0)}return this},bG=function(){return this.typingTimer&&this.typingTimer.seek(1),this},jM={fadeOutPage:dG,start:fG,typing:JM,pause:pG,resume:vG,pauseTyping:mG,resumeTyping:gG,wait:CG,setIgnoreWait:MG,setSkipSpaceEnable:EG,setSkipTypingAnimation:PG,setSkipSoundEffect:wG,skipCurrentTypingDelay:bG};Object.assign(jM,uG);const cl=Phaser.Utils.Objects.GetValue;class qM{constructor(t,s){this.setEventEmitter(),this.textPlayer=t,this.isPageTyping=!1,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback(cl(s,"onTypingStart",RG)),this.setDefaultTypingSpeed(cl(s,"speed",250)),this.setTypingSpeed(),this.setSkipSpaceEnable(cl(s,"skipSpace",!1)),this.setAnimationConfig(cl(s,"animation",void 0)),this.setMinSizeEnable(cl(s,"minSizeEnable",!1)),this.setFadeOutPageCallback(cl(s,"fadeOutPage"))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}get timeline(){return this.textPlayer.timeline}setTypingStartCallback(t){return this.onTypeStart=t,this}setAnimationConfig(t){return t||(t={}),t.hasOwnProperty("duration")||(t.duration=0),t.hasOwnProperty("onStart")||(t.onStart=AG),this.animationConfig=t,this}setFadeOutPageCallback(t){return this.fadeOutPageCallback=t,this}setMinSizeEnable(t){return t===void 0&&(t=!0),this.minSizeEnable=t,this}getNextChild(){var t=this.nextChild;return this.index=Math.min(this.index+1,this.children.length),this._nextChild=void 0,t}get nextChild(){return this._nextChild||(this._nextChild=this.children[this.index]),this._nextChild}}var AG=function(e){e.setVisible&&e.setVisible()},RG=function(e){for(var t=0,s=e.length;t<s;t++){var f=e[t];f.setVisible&&f.setVisible(!1)}};Object.assign(qM.prototype,Ju,jM);class LG extends Zg{playAnimation(t){return this.gameObject.anims.timeScale=this.timeScale,this.gameObject.play(t),this}stopAnimation(){return this.gameObject.stop(),this}chainAnimation(t){return this.gameObject.chain(t),this}pauseAnimation(){return this.gameObject.anims.pause(),this}setTimeScale(t){return super.setTimeScale(t),this.gameObject.anims&&(this.gameObject.anims.timeScale=t),this}}var OG={playAnimation(e,t){return this.has(e)||this.add(e),this.get(e).playAnimation(t),this},stopAnimation(e){return this.has(e)?(this.get(e).stopAnimation(),this):this},chainAnimation(e,t){return this.has(e)?(this.get(e).chainAnimation(t),this):this},pauseAnimation(e){return this.has(e)?(this.get(e).pauseAnimation(),this):this}},tE={};Object.assign(tE,OG);var eE=function(e){return!e||e==="sprite"?e=FG:e==="image"&&(e=DG),e},FG=function(e,t,s){return typeof s!="string"&&typeof s!="number"&&(s=void 0),e.add.sprite(0,0,t,s)},DG=function(e,t,s){return typeof s!="string"&&typeof s!="number"&&(s=void 0),e.add.image(0,0,t,s)};class iE extends ll{constructor(t,s){s===void 0&&(s={}),s.BobClass=LG,super(t,s)}setCreateGameObjectCallback(t,s){return t=eE(t),super.setCreateGameObjectCallback(t,s),this}}Object.assign(iE.prototype,tE);var sE=function(e,t){return e.length===3&&e[0]===t&&e[2]==="play"},IG=function(e,t){return e.length===3&&e[0]===t&&e[2]==="stop"},BG=function(e,t,s){var f=s.name;t.on("+",function(C,...w){if(!t.skipEventFlag){var F=C.split("."),N;if(sE(F,f))N=F[1];else return;ve.call(e,`${f}.play`,NG,[f,N,w],e),t.skipEvent()}}).on("+",function(C){if(!t.skipEventFlag){var w=C.split("."),F;if(IG(w,f))F=w[1];else return;ve.call(e,`${f}.stop`,nE,[f,F],e),t.skipEvent()}}).on("-",function(C){if(!t.skipEventFlag){var w=C.split("."),F;if(sE(w,f))F=w[1];else return;ve.call(e,`${f}.stop`,nE,[f,F],e),t.skipEvent()}})},NG=function(e){var t,s,f;[t,s,f]=e;var C=f.shift(),w=this.getGameObjectManager(t);w.playAnimation(s,C),f.length>0&&w.chainAnimation(s,f)},nE=function(e){var t,s;[t,...s]=e;var f=this.getGameObjectManager(t);f.stopAnimation(...s)},GG=function(e,t){return e.length===3&&e[0]===t&&e[2]==="pause"},UG=function(e,t,s){var f=s.name;t.on("+",function(C){if(!t.skipEventFlag){var w=C.split("."),F;if(GG(w,f))F=w[1];else return;ve.call(e,`${f}.pause`,kG,[f,F],e),t.skipEvent()}})},kG=function(e){var t,s;[t,...s]=e;var f=this.getGameObjectManager(t);f.pauseAnimation(...s)},VG=function(e,t){return e.length===3&&e[0]===t&&e[2]==="chain"},zG=function(e,t,s){var f=s.name;t.on("+",function(C){if(!t.skipEventFlag){var w=C.split("."),F;if(VG(w,f))F=w[1];else return;var N=Array.prototype.slice.call(arguments,1);ve.call(e,`${f}.chain`,WG,[f,F,N],e),t.skipEvent()}})},WG=function(e){var t,s;[t,...s]=e;var f=this.getGameObjectManager(t);f.chainAnimation(...s)};const XG=[BG,UG,zG];var HG=function(e){e===void 0&&(e={}),e.name="sprite",e.parseCallbacks=XG,e.createGameObject=eE(e.createGameObject),this.addGameObjectManager(e,iE)},rE=function(e,t){return e.length===2&&e[0]===t},YG=function(e,t,s){var f=s.name;t.on("+",function(C,...w){if(!t.skipEventFlag){var F=C.split("."),N;if(rE(F,f))N=F[1];else return;ve.call(e,`${f}.add`,$G,[f,N,...w],e),t.skipEvent()}}).on("-",function(C){if(!t.skipEventFlag){var w=C.split("."),F;if(rE(w,f))F=w[1];else return;ve.call(e,`${f}.remove`,_G,[f,F],e),t.skipEvent()}})},$G=function(e){var t,s;[t,...s]=e;var f=this.getGameObjectManager(t);f.add(...s)},_G=function(e){var t,s;[t,...s]=e;var f=this.getGameObjectManager(t);f.remove(...s)},ZG=function(e,t,s){var f=s.name;t.on("-",function(C){t.skipEventFlag||C===f&&(ve.call(e,`${f}.removeall`,KG,f,e),t.skipEvent())})},KG=function(e){var t=this.getGameObjectManager(e);t.removeAll()},JG=function(e,t){return e.length===3&&e[0]===t},QG=function(e,t,s){var f=s.name;t.on("+",function(C,...w){if(!t.skipEventFlag){var F=C.split("."),N,z;if(JG(F,f))N=F[1],z=F[2];else return;ve.call(e,`${f}.call`,jG,[f,N,z,...w],e),t.skipEvent()}})},jG=function(e){var t,s,f,C;[t,s,f,...C]=e;var w=`${t}.${f}`;if(this.emit(w,s,...C),!(this.listenerCount(w)>0)){var F=this.getGameObjectManager(t);F.hasMethod(s,f)?F.call(s,f,...C):F.setProperty(s,f,C[0])}},qG={to:!0,yoyo:!0,from:!0,toLeft:!0,toRight:!0,toUp:!0,toDown:!0,yoyoLeft:!0,yoyoRight:!0,yoyoUp:!0,yoyoDown:!0,fromLeft:!0,fromRight:!0,fromUp:!0,fromDown:!0},tU=function(e,t){return e.length===4&&e[0]===t&&qG[e[3]]},eU=function(e,t,s){var f=s.name;e.getGameObjectManager(f),t.on("+",function(C,w,F,N,z){if(!t.skipEventFlag){var H=C.split("."),Z,tt,nt;if(tU(H,f))Z=H[1],tt=H[2],nt=H[3];else return;typeof N=="number"&&(z=N,N=void 0),ve.call(e,`${f}.ease`,iU,[f,Z,tt,w,F,N,z,nt],e),t.skipEvent()}})},iU=function(e){var t,s,f,C,w,F,N,z;[t,s,f,C,w,F,N,z]=e;var H=this.getGameObjectManager(t),Z=H.getProperty(s,f);if(typeof Z=="number"){z.endsWith("Left")||z.endsWith("Up")?z.startsWith("to")||z.startsWith("yoyo")?C=Z-C:z.startsWith("from")&&(H.setProperty(s,f,Z-C),C=Z):z.endsWith("Right")||z.endsWith("Down")?z.startsWith("to")||z.startsWith("yoyo")?C=Z+C:z.startsWith("from")&&(H.setProperty(s,f,Z+C),C=Z):z==="from"&&(H.setProperty(s,f,C),C=Z);var tt=z.startsWith("yoyo");H.easeProperty(s,{property:f,value:C,duration:w,ease:F,repeat:N,yoyo:tt})}};const aE=[YG,ZG,QG,eU],sU=UM.addGameObjectManager;var nU={addGameObjectManager(e,t){e=e?Zn(e):{};var s=e.name;s||console.warn("[TextPlayer] Parameter 'name' is required in addGameObjectManager(config) method");var f=e.defaultLayer,C=e.createGameObject,w=this.layerManager;e.createGameObject=function(H,...Z){var tt=C.call(this,H,...Z);return f&&w&&w.addToLayer(f,tt),tt},sU.call(this,e,t);var F=e.parseCallbacks;F?F=[...F,...aE]:F=aE;for(var N=0,z=F.length;N<z;N++)F[N](this,this.parser,e);return this}},rU=function(e){return this.waitEventManager.setClickTarget(e),this},aU=function(e){return this.waitEventManager.setCameraTarget(e),this},oU=function(e){var t=this;e?typeof e=="function"?this.nextPageInput=function(s,f){var C=t.waitEventManager;C.clearWaitCompleteCallbacks().addWaitCompleteCallback(s,f);var w=C.getWaitCompleteTriggerCallback();e.call(t,w)}:this.nextPageInput=function(s,f){QM(t,e,s,f)}:this.nextPageInput=null},hU=function(e,t){return this.imageManager.add(e,t),this},lU={play(e){return this.isPlaying?this:(this.removeChildren(),this.parser.start(e),this.isPlaying=!0,this.once("complete",function(){this.isPlaying=!1},this),this.lastWrapResult=void 0,this.typingNextPage(),this)},playPromise(e){var t=ps(this);return this.play(e),t}},n0=function(){return!this.isPlaying||this.isPageTyping?this:(this.typeWriter.once(Qo,uU,this).fadeOutPage(),this)},uU=function(){var e=this.runWrap(this.lastWrapResult);this.lastWrapResult=e,this.emit("page.start");var t=function(){this.emit(s0),e.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.ignoreNextPageInput?n0.call(this):this.nextPageInput&&this.nextPageInput(n0,this))};this.once(s0,function(){this.typeWriter.off("complete",t,this)},this),this.typeWriter.once("complete",t,this).start(e.children)},dU={pauseTyping(){return this.typeWriter.pauseTyping(),this},pause(){return this.pauseTyping(),this.timeline.pause(),this}},fU={resumeTyping(e){return this.typeWriter.resumeTyping(e),this},resume(){return this.resumeTyping(),this.timeline.resume(),this}},cU=function(e){return this.typeWriter.wait(e),this},pU={setDefaultTypingSpeed(e){return this.defaultTypingSpeed=e,this},setTypingSpeed(e){return this.typingSpeed=e,this}},vU=function(e){return this.typeWriter.setIgnoreWait(e),this},mU=function(e){return e===void 0&&(e=!0),this.ignoreNextPageInput=e,this},gU=function(){if(!this.isPlaying||!this.isPageTyping)return this;var e=this.typeWriter.speed,t=this.typeWriter.ignoreWait,s=this.typeWriter.skipTypingAnimation,f=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",function(){this.typeWriter.setTypingSpeed(e).setIgnoreWait(t).setSkipTypingAnimation(s).setSkipSoundEffect(f)},this).setTypingSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this},xU={getSprite(e){return this.getGameObject("sprite",e)},addSprite(e,t){return this.addGameObject("sprite",e,t),this}},yU={setContentOutputEnable(e){return this.parser.setContentOutputEnable(e),this},setContentCallback(e,t){return this.contentCallback=e,this.contentCallbackScope=t,this}},oE={setClickTarget:rU,setCameraTarget:aU,setNextPageInput:oU,addImage:hU,typingNextPage:n0,wait:cU,setIgnoreWait:vU,setIgnoreNextPageInput:mU,showPage:gU};Object.assign(oE,nU,lU,dU,fU,pU,xU,yU);var SU=function(e){for(var t=0,s=ZM.length;t<s;t++)e.emit(ZM[t])};const hE=Phaser.Utils.Objects.IsPlainObject,pl=Phaser.Utils.Objects.GetValue;class r0 extends S5(rl){constructor(t,s,f,C,w,F){hE(s)?F=s:hE(C)&&(F=C),F===void 0&&(F={});var N=F.text;delete F.text,super(t,s,f,C,w,F),this.type="rexTextPlayer",this.initManagers(t,F),this.parser=new lG(this,pl(F,"parser",void 0)),this.typeWriter=new qM(this,pl(F,"typing",void 0)),this._imageManager=void 0;var z=pl(F,"images",void 0);z&&this.addImage(z);var H=pl(F,"sprites");H!==!1&&H!==null&&HG.call(this,H),this.setIgnoreNextPageInput(pl(F,"ignoreNextPageInput",!1)),this.setNextPageInput(pl(F,"nextPageInput",null)),this.isPlaying=!1,N&&this.play(N)}get imageManager(){return this._imageManager===void 0&&(this._imageManager=new Dg(this.scene)),this._imageManager}get spriteManager(){return this.getGameObjectManager("sprite")}destroy(t){!this.scene||this.ignoreDestroy||(SU(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(t),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(t),this._imageManager=void 0,this.destroyManagers(t),super.destroy(t))}get isPageTyping(){return this.typeWriter.isPageTyping}set defaultTypingSpeed(t){this.typeWriter.setDefaultTypingSpeed(t)}get defaultTypingSpeed(){return this.typeWriter.defaultTypingSpeed}set typingSpeed(t){this.typeWriter.setTypingSpeed(t)}get typingSpeed(){return this.typeWriter.speed}set timeScale(t){this.setTimeScale(t)}get timeScale(){return this.getTimeScale()}}Object.assign(r0.prototype,oE),c.register("textPlayer",function(e,t,s,f,C){var w=new r0(this.scene,e,t,s,f,C);return this.scene.add.existing(w),w}),j(window,"RexPlugins.UI.TextPlayer",r0);const lE={maxLength:["maxLength",void 0],minLength:["minLength",void 0],readOnly:["readOnly",!1]},uE={direction:["direction",void 0]};var _a=function(e,t,s){if(typeof s=="string")e.hasOwnProperty(s)&&(t[s]=e[s]);else{var f=s;if(Array.isArray(f))for(var C=0,w=f.length;C<w;C++)_a(e,t,f[C]);else for(var s in f)_a(e,t,s)}},TU=function(e){e===void 0&&(e={});var t={};return _a(e,t,"inputType"),_a(e,t,"type"),_a(e,t,"style"),_a(e,t,uE),_a(e,t,lE),t},a0=function(e,t,s,f,C){if(t)return!(s&&!s(e,t)||!dE(e,t)||f&&!f(e,t));C===void 0&&(C=!1);for(var w=e.scene.input.manager,F=w.pointersTotal,N=w.pointers,t,z=0;z<F;z++)if(t=N[z],!(s&&!s(e,t))&&dE(e,t)&&!(f&&!f(e,t)))return C?t:!0;return!1},dE=function(e,t){for(var s=e.scene,f=s.input.cameras.getCamerasBelowPointer(t),C=s.input.manager,w=[e],F=0,N=f.length;F<N;F++)if(C.hitTest(t,w,f[F],kc),kc.length>0)return kc.length=0,!0;return kc.length=0,!1},kc=[],vl=void 0,CU=function(e){e!==vl&&(vl!==void 0&&vl.close(),vl=e)},MU=function(e){e===vl&&(vl=void 0)};const EU=Phaser.Utils.Objects.GetValue;var Vc=function(e,t,s){s===void 0&&(s={});var f,C;for(var w in e)f=e[w],C=EU(t,w,f[1]),C!==void 0&&(s[f[0]]=C);return s},fE=function(e){e.addEventListener("touchstart",ml,!1),e.addEventListener("touchmove",ml,!1),e.addEventListener("touchend",ml,!1),e.addEventListener("mousedown",ml,!1),e.addEventListener("mouseup",ml,!1),e.addEventListener("mousemove",ml,!1)},ml=function(e){e.stopPropagation()},cE=function(){return this.close(),this.emit("keydown-ENTER",this.parent,this),this},PU=function(){this.isOpened=!0,this.initText(),this.enterCloseEnable&&this.scene.input.keyboard.once("keydown-ENTER",cE,this),this.scene.sys.events.on("postupdate",this.updateText,this),this.clickOutSideTarget?(SM.call(this.clickOutSideTarget,this.parent),yM.call(this.clickOutSideTarget,this.parent),this.clickOutSideTarget.setInteractive().on("pointerdown",this.onClickOutside,this)):this.scene.input.on("pointerdown",this.onClickOutside,this),this.onOpenCallback&&this.onOpenCallback(this.parent,this),this.emit("open",this)},wU=function(e){if(e){var t=e.parentElement;t&&t.removeChild(e)}},bU=function(){this.isOpened=!1,this.updateText(),this.enterCloseEnable&&this.scene.input.keyboard.off("keydown-ENTER",cE,this),this.scene.sys.events.off("postupdate",this.updateText,this),this.clickOutSideTarget?this.clickOutSideTarget.disableInteractive().off("pointerdown",this.onClickOutside,this):this.scene.input.off("pointerdown",this.onClickOutside,this),this.onCloseCallback&&this.onCloseCallback(this.parent,this),wU(this.node),this.node=void 0,this.emit("close",this)};const o0=Phaser.Utils.Objects.GetValue;var AU=function(e,t){var s,f=o0(t,"inputType",void 0);f===void 0&&(f=o0(t,"type","text")),f==="textarea"?(s=document.createElement("textarea"),s.style.resize="none"):(s=document.createElement("input"),s.type=f);var C=o0(t,"style",void 0),w=s.style;Vc(uE,C,w),w.position="absolute",w.opacity=0,w.pointerEvents="none",w.zIndex=0,w.transform="scale(0)",Vc(lE,t,s),fE(s);var F=e.scene.sys.scale,N=F.isFullscreen?F.fullscreenTarget:document.body;return N.appendChild(s),s.addEventListener("focus",function(z){PU.call(e)}),s.addEventListener("blur",function(z){bU.call(e)}),s},RU=function(){return this.isOpened?this:this.readOnly?this:(CU(this),this.node||(this.node=AU(this,this.nodeConfig)),this.setFocus(),this)},LU=function(){return this.isOpened?(MU(this),this.setBlur(),this):this},OU={open:RU,close:LU};const na=Phaser.Utils.Objects.GetValue;class h0 extends Si{constructor(t,s){super(t);var f=na(s,"inputType",void 0);f===void 0&&(f=na(s,"type","text")),this.setEnterCloseEnable(na(s,"enterClose",f!=="textarea"));var C=na(s,"onOpen",void 0);C||(C=na(s,"onFocus",void 0)),this.onOpenCallback=C,this.clickOutSideTarget=na(s,"clickOutSideTarget",void 0);var w=na(s,"onClose",void 0);w||(w=na(s,"onBlur",void 0)),this.onCloseCallback=w,this.onUpdateCallback=na(s,"onUpdate",void 0),this.isOpened=!1,t.on("pointerdown",function(){this.open()},this).setInteractive(),this.nodeConfig=TU(s),this.node=void 0}destroy(){this.close(),this.clickOutSideTarget&&this.clickOutSideTarget.destroy(),super.destroy()}onClickOutside(t){a0(this.parent,t)||this.close()}setEnterCloseEnable(t){return t===void 0&&(t=!0),this.enterCloseEnable=t,this}initText(){}updateText(){}get text(){return this.node?this.node.value:""}set text(t){this.node&&(this.node.value=t)}setText(t){return this.text=t,this}get maxLength(){return this.nodeConfig.maxLength}set maxLength(t){this.nodeConfig.maxLength=t,this.node&&(this.node.maxLength=t)}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.nodeConfig.minLength}set minLength(t){this.nodeConfig.minLength=t,this.node&&(this.node.minLength=t)}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node&&(this.node.placeholder=t)}setPlaceholder(t){return this.placeholder=t,this}selectText(t,s){return this.node?(t===void 0?this.node.select():this.node.setSelectionRange(t,s),this):this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node?this.node.selectionStart:0}get selectionEnd(){return this.node?this.node.selectionEnd:0}get selectedText(){if(!this.node)return"";var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node?this.node.selectionStart:0}set cursorPosition(t){this.node&&this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node?this.node.title:""}set tooltip(t){if(!this.node)return this;this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.nodeConfig.readOnly}set readOnly(t){this.nodeConfig.readOnly=t,this.node&&(this.node.readOnly=t)}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node?this.node.spellcheck:""}set spellCheck(t){this.node&&(this.node.spellcheck=t)}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){if(this.node)return this.node.style.color}set fontColor(t){this.node&&(this.node.style.color=t)}setFontColor(t){return this.fontColor=t,this}setStyle(t,s){return this.node?(this.node.style[t]=s,this):this}getStyle(t){if(this.node)return this.node.style[t]}scrollToBottom(){return this.node?(this.node.scrollTop=this.node.scrollHeight,this):this}setEnabled(t){return this.node?(t===void 0&&(t=!0),this.node.disabled=!t,this):this}setBlur(){return this.node?(this.node.blur(),this):this}setFocus(){return this.node?(this.node.focus(),this):this}get isFocused(){return this.isOpened}}Object.assign(h0.prototype,OU);var pE=function(e,t,s){e=e.replace(" ","");var f=s.previousText;if(e===f)return e;if(isNaN(e)){s.emit("nan",e,s),e=f;var C=s.cursorPosition-1;s.setText(e),s.setCursorPosition(C)}else s.previousText=e;return e},FU=function(e){var t=e.parent,s=e.isOpened?e.selectionStart:null,f=e.isOpened?e.selectionEnd:null,C=e.prevSelectionStart,w=e.prevSelectionEnd;if(!(C===s&&w===f)){var F,N;C===null?(F=s,N=f):s===null?(F=C,N=w):(F=Math.min(C,s),N=Math.max(w,f));for(var z=F;z<N;z++){var H;C===null?H=!1:H=z>=C&&z<w;var Z;if(s===null?Z=!1:Z=z>=s&&z<f,H!==Z){var tt=t.getCharChild(z);if(tt){var nt=H?"rangeout":"rangein";t.emit(nt,tt,z,t)}}}e.prevSelectionStart=s,e.prevSelectionEnd=f}},DU=function(e){var t=e.parent,s=0,f=t.width,C=0,w=t.height,F=e.drawX,N=e.drawY,z=F+e.drawTLX,H=F+e.drawTRX,Z=N+e.drawTLY,tt=N+e.drawBLY,nt;z<s?nt=s-z:H>f?nt=f-H:nt=0;var st;Z<C?st=C-Z:tt>w?st=w-tt:st=0,t._textOX+=nt,t._textOY+=st},IU=function(e){var t=e.parent,s=t.text;e.requestCursorPosition!==null&&(e.setCursorPosition(e.requestCursorPosition),e.requestCursorPosition=null);var f=e.cursorPosition;if(e.prevCursorPosition!==f){if(e.prevCursorPosition!==null&&e.prevCursorPosition>s.length&&(e.prevCursorPosition=null),e.prevCursorPosition!==null){var C=t.getCharChild(e.prevCursorPosition);C&&(C.text===`
`&&C.clearTextSize(),t.emit("cursorout",C,e.prevCursorPosition,t))}if(f!=null){var C=t.getCharChild(f);C&&(C.text===`
`&&C.copyTextSize(t.lastInsertCursor),DU(C),t.emit("cursorin",C,f,t))}t.emit("movecursor",f,e.prevCursorPosition,t),e.prevCursorPosition=f}},vE=function(e){var t=e.prevSelectionStart;if(t!==null){for(var s=e.prevSelectionEnd,f=e.parent,C=t;C<s;C++){var w=f.getCharChild(C);w&&f.emit("cursorout",w,C,f)}e.prevSelectionStart=null,e.prevSelectionEnd=null}},mE=function(e){var t=e.prevCursorPosition;if(t!==null){var s=e.parent,f=s.getCharChild(t);f&&s.emit("cursorout",f,t,s),e.prevCursorPosition=null}};const BU=Phaser.Utils.Objects.GetValue;let NU=class extends h0{constructor(t,s){super(t,s),this.setSelectAllWhenFocusEnable(BU(s,"selectAll",!1)),this.cursorMoveStartIndex=null,this.prevCursorPosition=null,this.prevSelectionStart=null,this.prevSelectionEnd=null,this.firstClickAfterOpen=!1,this.requestCursorPosition=null,t.on("pointerdown",function(f,C,w,F){var N=t.getNearestChild(C,w),z=t.getCharIndex(N);(!this.selectAllWhenFocus||!this.firstClickAfterOpen)&&this.setCursorPosition(z),this.cursorMoveStartIndex=z,this.firstClickAfterOpen=!1},this).on("pointermove",function(f,C,w,F){if(f.isDown){var N=t.getNearestChild(C,w),z=t.getCharIndex(N);this.cursorMoveStartIndex<z?this.selectText(this.cursorMoveStartIndex,z+1):this.selectText(z,this.cursorMoveStartIndex+1)}},this),this.on("open",function(){this.selectAllWhenFocus&&this.selectAll(),this.firstClickAfterOpen=!0,t.emit("open")},this).on("close",function(){t.emit("close")}).on("keydown-ENTER",function(){t.emit("keydown-ENTER")})}initText(){var t=this.parent;return this.prevCursorPosition=null,this.setText(t.text),this}updateText(){var t=this.parent,s=this.text;if(this.onUpdateCallback){var f=this.onUpdateCallback(s,t,this);f!=null&&(s=f)}return t.text!==s&&t.setText(s),this.isOpened?this.selectionStart!==this.selectionEnd?(mE(this),FU(this)):(vE(this),IU(this)):(vE(this),mE(this)),this}setNumberInput(){return this.onUpdateCallback=pE,this}setSelectAllWhenFocusEnable(t){return t===void 0&&(t=!0),this.selectAllWhenFocus=t,this}setRequestCursorPosition(t){return this.isOpened?(this.requestCursorPosition=t,this):this}};const GU=Phaser.Utils.Objects.GetValue,UU=["inputType","onOpen","clickOutSideTarget","onFocus","onClose","onBlur","onUpdate","enterClose","readOnly","maxLength","minLength","selectAll"];var kU=function(e,t){var s=GU(t,"edit");return s===void 0&&(s={}),_a(t,s,UU),new NU(e,s)},ra=function(e,t){if(!e||typeof e=="number")return!1;if(e.hasOwnProperty(t))return!0;if(t.indexOf(".")!==-1){for(var s=t.split("."),f=e,C=0;C<s.length;C++)if(f.hasOwnProperty(s[C]))f=f[s[C]];else return!1;return!0}else return!1},l0=function(e){if(e.parentContainer)return l0(e.parentContainer);var t=xM(e);return t?l0(t):e},VU=function(e){for(var t=l0(e).cameraFilter,s=e.scene.sys.cameras.cameras,f,C,w=0,F=s.length;w<F;w++)if(f=s[w],C=(t&f.id)>0,!C)return f;return null};class gE extends Si{constructor(t,s){super(t),this.targetCamera=void 0,this.boot()}boot(){this.scene.sys.events.on("prerender",this.resize,this)}destroy(){this.scene&&(this.scene.sys.events.off("prerender",this.resize,this),super.destroy())}resize(){var t=this.scene,s=this.parent,f=VU(s);if(f){s.setScrollFactor(0).setOrigin(.5);var C=t.sys.scale.gameSize,w=C.width,F=C.height,N=1/f.zoom,z=w/2,H=F/2,Z=w*N,tt=F*N;(s.x!==z||s.y!==H)&&s.setPosition(z,H),(s.width!==Z||s.height!==tt)&&s.setSize(Z,tt)}}}const zU=Phaser.GameObjects.Zone;let u0=class extends zU{constructor(t){super(t,0,0,2,2),this.fullWindow=new gE(this)}};var WU=function(e,t){var s=!t.textArea;if(!ra(t,"wrap.vAlign")){var f=s?"center":"top";j(t,"wrap.vAlign",f)}if(ra(t,"wrap.wrapMode")||j(t,"wrap.wrapMode","char"),!ra(t,"wrap.maxLines")){var f=s?1:void 0;j(t,"wrap.maxLines",f)}if(s&&j(t,"wrap.wrapWidth",1/0),ra(t,"wrap.useDefaultTextHeight")||j(t,"wrap.useDefaultTextHeight",!0),t.edit||(t.edit={}),!ra(t.edit,"inputType")){var f=s?"text":"textarea";j(t.edit,"inputType",f)}if(t.clickOutSideTarget===!0){var C=new u0(e);e.add.existing(C),t.clickOutSideTarget=C}return t},zc=function(e,t,s,f){if(s===void 0&&(s="."),f===void 0&&(f={}),!e)return f;if(t in e)return Object.assign(f,e[t]);t+=s;for(var C in e)C.startsWith(t)&&(f[C.replace(t,"")]=e[C]);return f},XU=function(){var e=this.scene.input.keyboard;this.textEdit.on("open",function(){e.on("keydown-UP",this.cursorMoveUp,this).on("keydown-DOWN",this.cursorMoveDown,this)},this).on("close",function(){e.off("keydown-UP",this.cursorMoveUp,this).off("keydown-DOWN",this.cursorMoveDown,this)},this)},Wc=function(e,t,s){if(s===void 0&&(s={}),Array.isArray(t))for(var f,C=0,w=t.length;C<w;C++)f=t[C],s[f]=e[f];else for(var f in t)s[f]=e[f];return s},dd=function(e,t){for(var s in e)if(!(s in t)||e[s]!==t[s])return!1;for(var s in t)if(!(s in e))return!1;return!0},HU=function(e){Qu(e)||this.setCursorStyle(e).on("cursorin",function(t){var s=this.cursorStyle,f=Wc(t.style,s);dd(s,f)||(t.styleSave=f,t.modifyStyle(s))},this).on("cursorout",function(t){t.styleSave&&(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},YU=function(e){Qu(e)||this.setRangeStyle(e).on("rangein",function(t){var s=this.rangeStyle,f=Wc(t.style,s);dd(s,f)||(t.styleSave=f,t.modifyStyle(s))},this).on("rangeout",function(t){t.styleSave&&(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},$U=function(e){Qu(e)||this.setFocusStyle(e).on("open",function(){var t=this.background,s=this.focusStyle,f=Wc(t,s);dd(s,f)||(t.styleSave=f,t.modifyStyle(s))},this).on("close",function(){var t=this.background;t.styleSave&&(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},_U=function(e){var t=e.createCharChild("|");return t.text="",t};function aa(){}aa.prototype={diff(e,t,s={}){let f=s.callback;typeof s=="function"&&(f=s,s={}),this.options=s;let C=this;function w(st){return f?(setTimeout(function(){f(void 0,st)},0),!0):st}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e)),t=this.removeEmpty(this.tokenize(t));let F=t.length,N=e.length,z=1,H=F+N;s.maxEditLength&&(H=Math.min(H,s.maxEditLength));let Z=[{newPos:-1,components:[]}],tt=this.extractCommon(Z[0],t,e,0);if(Z[0].newPos+1>=F&&tt+1>=N)return w([{value:this.join(t),count:t.length}]);function nt(){for(let st=-1*z;st<=z;st+=2){let ht,ft=Z[st-1],dt=Z[st+1],gt=(dt?dt.newPos:0)-st;ft&&(Z[st-1]=void 0);let Et=ft&&ft.newPos+1<F,yt=dt&&0<=gt&&gt<N;if(!Et&&!yt){Z[st]=void 0;continue}if(!Et||yt&&ft.newPos<dt.newPos?(ht=KU(dt),C.pushComponent(ht.components,void 0,!0)):(ht=ft,ht.newPos++,C.pushComponent(ht.components,!0,void 0)),gt=C.extractCommon(ht,t,e,st),ht.newPos+1>=F&&gt+1>=N)return w(ZU(C,ht.components,t,e,C.useLongestToken));Z[st]=ht}z++}if(f)(function st(){setTimeout(function(){if(z>H)return f();nt()||st()},0)})();else for(;z<=H;){let st=nt();if(st)return st}},pushComponent(e,t,s){let f=e[e.length-1];f&&f.added===t&&f.removed===s?e[e.length-1]={count:f.count+1,added:t,removed:s}:e.push({count:1,added:t,removed:s})},extractCommon(e,t,s,f){let C=t.length,w=s.length,F=e.newPos,N=F-f,z=0;for(;F+1<C&&N+1<w&&this.equals(t[F+1],s[N+1]);)F++,N++,z++;return z&&e.components.push({count:z}),e.newPos=F,N},equals(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty(e){let t=[];for(let s=0;s<e.length;s++)e[s]&&t.push(e[s]);return t},castInput(e){return e},tokenize(e){return e.split("")},join(e){return e.join("")}};function ZU(e,t,s,f,C){let w=0,F=t.length,N=0,z=0;for(;w<F;w++){let Z=t[w];if(Z.removed){if(Z.value=e.join(f.slice(z,z+Z.count)),z+=Z.count,w&&t[w-1].added){let tt=t[w-1];t[w-1]=t[w],t[w]=tt}}else{if(!Z.added&&C){let tt=s.slice(N,N+Z.count);tt=tt.map(function(nt,st){let ht=f[z+st];return ht.length>nt.length?ht:nt}),Z.value=e.join(tt)}else Z.value=e.join(s.slice(N,N+Z.count));N+=Z.count,Z.added||(z+=Z.count)}}let H=t[F-1];return F>1&&typeof H.value=="string"&&(H.added||H.removed)&&e.equals("",H.value)&&(t[F-2].value+=H.value,t.pop()),t}function KU(e){return{newPos:e.newPos,components:e.components.slice(0)}}const JU=new aa;function QU(e,t,s){return JU.diff(e,t,s)}const xE=/^[a-zA-Z\u{C0}-\u{FF}\u{D8}-\u{F6}\u{F8}-\u{2C6}\u{2C8}-\u{2D7}\u{2DE}-\u{2FF}\u{1E00}-\u{1EFF}]+$/u,yE=/\S/,SE=new aa;SE.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!yE.test(e)&&!yE.test(t)},SE.tokenize=function(e){let t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/);for(let s=0;s<t.length-1;s++)!t[s+1]&&t[s+2]&&xE.test(t[s])&&xE.test(t[s+2])&&(t[s]+=t[s+2],t.splice(s+1,2),s--);return t};const TE=new aa;TE.tokenize=function(e){let t=[],s=e.split(/(\n|\r\n)/);s[s.length-1]||s.pop();for(let f=0;f<s.length;f++){let C=s[f];f%2&&!this.options.newlineIsToken?t[t.length-1]+=C:(this.options.ignoreWhitespace&&(C=C.trim()),t.push(C))}return t};const jU=new aa;jU.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};const qU=new aa;qU.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};const t9=Object.prototype.toString,fd=new aa;fd.useLongestToken=!0,fd.tokenize=TE.tokenize,fd.castInput=function(e){const{undefinedReplacement:t,stringifyReplacer:s=(f,C)=>typeof C>"u"?t:C}=this.options;return typeof e=="string"?e:JSON.stringify(d0(e,null,null,s),s,"  ")},fd.equals=function(e,t){return aa.prototype.equals.call(fd,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function d0(e,t,s,f,C){t=t||[],s=s||[],f&&(e=f(C,e));let w;for(w=0;w<t.length;w+=1)if(t[w]===e)return s[w];let F;if(t9.call(e)==="[object Array]"){for(t.push(e),F=new Array(e.length),s.push(F),w=0;w<e.length;w+=1)F[w]=d0(e[w],t,s,f,C);return t.pop(),s.pop(),F}if(e&&e.toJSON&&(e=e.toJSON()),typeof e=="object"&&e!==null){t.push(e),F={},s.push(F);let N=[],z;for(z in e)e.hasOwnProperty(z)&&N.push(z);for(N.sort(),w=0;w<N.length;w+=1)z=N[w],F[z]=d0(e[z],t,s,f,z);t.pop(),s.pop()}else F=e;return F}const f0=new aa;f0.tokenize=function(e){return e.slice()},f0.join=f0.removeEmpty=function(e){return e};const e9=Phaser.Utils.Array.Remove;var i9=function(e,t){var s=e.text;if(t!==s){if(s==null&&(s=""),e9(e.children,e.lastInsertCursor),t==="")e.removeChildren();else for(var f=QU(s,t),C=0,w=0,F=f.length;w<F;w++){var N=f[w];N.removed?e.removeText(C,N.count):(N.added&&e.insertText(C,N.value),C+=N.count)}e.children.push(e.lastInsertCursor),e.runWrap(),e.isOpened&&e.textEdit.setText(t),e.emit("textchange",t,e)}},s9={setTextOYByPercentage(e){return this.setTextOY(-this.textVisibleHeight*e),this},getTextOYPercentage(){var e=this.textVisibleHeight;return e===0?0:this._textOY/-e},setTextOXByPercentage(e){return this.setTextOX(-this.textVisibleWidth*e),this},getTextOXPercentage(){var e=this.textVisibleWidth;return e===0?0:this._textOX/-e}};const Xc=Phaser.Math.Clamp;var CE=function(e,t){var s={lineIndex:0,position:0};if(t<0)return s;for(var f=0,C=e.length;f<C;f++){var w=e[f];if(t<=w){s.lineIndex=f;break}t-=w}return s.position=t,s},ME=function(e,t){var s=0,f=t.lineIndex;if(f<0)return s;for(var C=0,w=e.length;C<w;C++){var F=e[C];if(f>C)s+=F;else if(f===C)s+=Math.min(t.position,F);else break}return s},n9={cursorMoveLeft(){if(!this.isOpened)return this;var e=Xc(this.cursorPosition-1,0,this.inputText.length);return this.setCursorPosition(e),this},cursorMoveRight(){if(!this.isOpened)return this;var e=Xc(this.cursorPosition+1,0,this.inputText.length);return this.setCursorPosition(e),this},cursorMoveUp(){if(!this.isOpened)return this;var e=CE(this.characterCountOfLines,this.cursorPosition);e.lineIndex-=1;var t=Xc(ME(this.characterCountOfLines,e),0,this.inputText.length);return this.setCursorPosition(t),this},cursorMoveDown(){if(!this.isOpened)return this;var e=CE(this.characterCountOfLines,this.cursorPosition);e.lineIndex+=1;var t=Xc(ME(this.characterCountOfLines,e),0,this.inputText.length);return this.setCursorPosition(t),this}};const EE=Phaser.Utils.Objects.IsPlainObject;class cd extends rl{constructor(t,s,f,C,w,F){EE(s)?F=s:EE(C)&&(F=C),F===void 0&&(F={}),WU(t,F);var N=F.text;N&&delete F.text;var z=zc(F.background,"focus"),H=zc(F.style,"cursor"),Z=zc(F.style,"range");super(t,s,f,C,w,F),this.type="rexCanvasInput",this.contentWidth=void 0,this.contentHeight=void 0,this.lineHeight=void 0,this.linesCount=void 0,this.characterCountOfLines=[],this._text,this.textEdit=kU(this,F),XU.call(this),F.focusStyle&&Object.assign(z,F.focusStyle),$U.call(this,z),F.cursorStyle&&Object.assign(H,F.cursorStyle),HU.call(this,H),F.rangeStyle&&Object.assign(Z,F.rangeStyle),Qu(Z)&&Object.assign(Z,H),YU.call(this,Z);var tt=F.onAddChar;tt&&this.on("addchar",tt);var nt=F.onCursorIn;nt&&this.on("cursorin",nt);var st=F.onCursorOut;st&&this.on("cursorout",st);var ht=!F.onRangeIn&&!F.onRangeOut,ft=ht?F.onCursorIn:F.onRangeIn;ft&&this.on("rangein",ft);var dt=ht?F.onCursorOut:F.onRangeOut;dt&&this.on("rangeout",dt);var gt=F.onMoveCursor;gt&&this.on("movecursor",gt),this.setParseTextCallback(F.parseTextCallback),this.lastInsertCursor=_U(this),N||(N=""),this.setText(N)}addChild(t,s){if(super.addChild(t,s),Array.isArray(t))for(var f=t,C=0,w=f.length;C<w;C++){var t=f[C];_o(t)&&this.emit("addchar",t,s+C,this)}else _o(t)&&this.emit("addchar",t,s,this);return this}get text(){return this._text}set text(t){t==null?t="":t=t.toString(),this._text!==t&&(i9(this,t),this._text=t)}setText(t){return this.text=t,this}appendText(t){return this.setText(this.text+t),this}runWrap(t){var s=super.runWrap(t);this.contentWidth=s.maxLineWidth,this.contentHeight=s.linesHeight,this.lineHeight=s.lineHeight,this.linesCount=s.lines.length,this.characterCountOfLines.length=0;for(var f=s.lines,C=0,w=f.length;C<w;C++){for(var F=f[C].children,N=0,z=0,H=F.length;z<H;z++){var Z=F[z];Z.active&&!Z.removed&&_o(Z)&&N++}this.characterCountOfLines.push(N)}return s}setSize(t,s){return this.width===t&&this.height===s?this:(super.setSize(t,s),this.runWrap(),this)}get displayText(){return this.text}set displayText(t){this.text=t}setDisplayText(t){return this.displayText=t,this}get inputText(){return this.textEdit.text}set inputText(t){this.textEdit.text=t}setInputText(t){return this.inputText=t,this}setParseTextCallback(t){return t||(t=r9),this.parseTextCallback=t,this}get value(){return this.parseTextCallback(this.text)}set value(t){this.setText(t)}getValue(){return this.value}setValue(t){return this.value=t,this}get readOnly(){return this.textEdit.readOnly}set readOnly(t){this.textEdit.readOnly=t}setReadOnly(t){return this.textEdit.setReadOnly(t),this}open(t){return t&&this.textEdit.once("close",t),this.textEdit.open(),this}close(){return this.textEdit.close(),this}get isOpened(){return this.textEdit.isOpened}setFocusStyle(t){return this.focusStyle=t,this}setCursorStyle(t){return this.cursorStyle=t,this}setRangeStyle(t){return this.rangeStyle=t,this}setNumberInput(){return this.textEdit.setNumberInput().setSelectAllWhenFocusEnable(),this.parseTextCallback=Number,this}get maxLength(){return this.textEdit.maxLength}set maxLength(t){this.textEdit.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.textEdit.minLength}set minLength(t){this.textEdit.minLength=t}setMinLength(t){return this.minLength=t,this}get cursorPosition(){return this.textEdit.cursorPosition}set cursorPosition(t){this.isOpened&&(this.textEdit.cursorPosition=t,this.textEdit.requestCursorPosition=t)}setCursorPosition(t){return this.cursorPosition=t,this}get topTextOY(){return 0}get bottomTextOY(){return-this.tableVisibleHeight}get leftTextOX(){return 0}get rightTextOX(){return-this.textVisibleWidth}get textVisibleHeight(){var t=this.contentHeight-this.height;return t<0&&(t=0),t}get textVisibleWidth(){var t=this.contentWidth-this.width;return t<0&&(t=0),t}set t(t){this.setTextOYByPercentage(t).updateTexture()}get t(){return this.getTextOYPercentage()}set s(t){this.setTextOXByPercentage(t).updateTexture()}get s(){return this.getTextOXPercentage()}}var r9=function(e){return e};Object.assign(cd.prototype,s9,n9),c.register("canvasInput",function(e,t,s,f,C){var w=new cd(this.scene,e,t,s,f,C);return this.scene.add.existing(w),w}),j(window,"RexPlugins.UI.CanvasInput",cd);var c0=function(e){return O(e).loop.delta};const PE=Phaser.Utils.Objects.GetValue,a9=Phaser.Math.Wrap;class wE extends h0{constructor(t,s){s===void 0&&(s={}),s.onUpdate==="number"&&(s.onUpdate=pE),super(t,s),this.setCursor(PE(s,"cursor","|")),this.setCursorFlashDuration(PE(s,"cursorFlashDuration",1e3)),this.cursorFlashTimer=0}initText(){return this.cursorFlashTimer=0,this.prevCursorPosition=void 0,this.setText(this.parent.text),this.setCursorPosition(),this}updateText(){var t=this.parent,s=this.text;if(this.onUpdateCallback){var f=this.onUpdateCallback(s,t,this);f!=null&&(s=f)}if(this.isOpened&&this.hasCursor){var C=this.cursorPosition;s=s.substring(0,C)+this.cursor+s.substring(C),this.prevCursorPosition!==C&&(this.prevCursorPosition=C)}return t.text!==s&&(t.setText(s),this.emit("textchange",s,t,this)),this}setCursor(t){return this._cursor=t,this.hasCursor=t&&t!=="",t}setCursorFlashDuration(t){return this.cursorFlashDuration=t,this}get cursor(){if(!this._isFocused)return this._cursor;var t;this.cursorFlashTimer<this.cursorFlashDuration/2?t=this._cursor:t=" ";var s=this.cursorFlashTimer+c0(this.scene);return this.cursorFlashTimer=a9(s,0,this.cursorFlashDuration),t}}c.register("hiddenEdit",function(e,t){var s=new wE(e,t);return s}),j(window,"RexPlugins.UI.HiddenEdit",wE);const o9=Phaser.GameObjects.GetCalcMatrix;var h9=function(e,t,s,f){t.updateData(),s.addToRenderList(t);var C=e.pipelines.set(t.pipeline),w=o9(t,s,f),F=C.calcMatrix.copyFrom(w.calc),N=t._displayOriginX,z=t._displayOriginY,H=s.alpha*t.alpha;e.pipelines.preBatch(t);for(var Z=t.geom,tt,nt=0,st=Z.length;nt<st;nt++)tt=Z[nt],tt.visible&&tt.webglRender(C,F,H,N,z);e.pipelines.postBatch(t)};const l9=Phaser.Renderer.Canvas.SetTransform;var u9=function(e,t,s,f){t.updateData(),s.addToRenderList(t);var C=e.currentContext;if(l9(e,C,t,s,f)){for(var w=t._displayOriginX,F=t._displayOriginY,N=t.geom,z,H=0,Z=N.length;H<Z;H++)z=N[H],z.visible&&z.canvasRender(C,w,F);C.restore()}},d9={renderWebGL:h9,renderCanvas:u9};const f9=Phaser.GameObjects.Shape,c9=Phaser.Utils.Array.Remove;class oa extends f9{constructor(t,s,f,C,w){s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=2),w===void 0&&(w=C),super(t,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(s,f),this.setSize(C,w),this.updateDisplayOrigin()}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSize(t,s){this.isSizeChanged=this.isSizeChanged||this._width!==t||this._height!==s,this.dirty=this.dirty||this.isSizeChanged,this._width=t,this._height=s,this.updateDisplayOrigin();var f=this.input;return f&&!f.customHitArea&&(f.hitArea.width=t,f.hitArea.height=s),this}resize(t,s){return this.setSize(t,s),this}get fillColor(){return this._fillColor}set fillColor(t){this.setFillStyle(t,this._fillAlpha)}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this.setFillStyle(this._fillColor,t)}setFillStyle(t,s){return s===void 0&&(s=1),this.dirty=this.dirty||this.fillColor!==t||this.fillAlpha!==s,this._fillColor=t,this._fillAlpha=s,this}get lineWidth(){return this._lineWidth}set lineWidth(t){this.setStrokeStyle(t,this._strokeColor,this._strokeAlpha)}get strokeColor(){return this._strokeColor}set strokeColor(t){this.setStrokeStyle(this._lineWidth,t,this._strokeAlpha)}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this.setStrokeStyle(this._lineWidth,this._strokeColor,t)}setStrokeStyle(t,s,f){return f===void 0&&(f=1),this.dirty=this.dirty||this.lineWidth!==t||this.strokeColor!==s||this.strokeAlpha!==f,this._lineWidth=t,this._strokeColor=s,this._strokeAlpha=f,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var t=this.geom,s=0,f=t.length;s<f;s++){var C=t[s];C.dirty&&C.updateData()}return this.isSizeChanged=!1,this.dirty=!1,this}clear(){return this.geom.length=0,ne(this.shapes),this.dirty=!0,this}getShape(t){return this.shapes[t]}getShapes(){return this.geom}addShape(t){this.geom.push(t);var s=t.name;return s&&(this.shapes[s]=t),this.dirty=!0,this}deleteShape(t){var s=this.getShape(t);return s&&(delete this.shapes[t],c9(this.geom,s)),this}}Object.assign(oa.prototype,d9);var p9={setBoxFillStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.boxFillColor!==e||this.boxFillAlpha!==t,this.boxFillColor=e,this.boxFillAlpha=t,this},setUncheckedBoxFillStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.uncheckedBoxFillColor!==e||this.uncheckedBoxFillAlpha!==t,this.uncheckedBoxFillColor=e,this.uncheckedBoxFillAlpha=t,this},setBoxStrokeStyle(e,t,s){return s===void 0&&(s=1),this.dirty=this.dirty||this.boxLineWidth!==e||this.boxStrokeColor!==t||this.boxStrokeAlpha!==s,this.boxLineWidth=e,this.boxStrokeColor=t,this.boxStrokeAlpha=s,this},setUncheckedBoxStrokeStyle(e,t,s){return s===void 0&&(s=1),this.dirty=this.dirty||this.uncheckedBoxLineWidth!==e||this.uncheckedBoxStrokeColor!==t||this.uncheckedBoxStrokeAlpha!==s,this.uncheckedBoxLineWidth=e,this.uncheckedBoxStrokeColor=t,this.uncheckedBoxStrokeAlpha=s,this},setCheckerStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.checkerColor!==e||this.checkAlpha!==t,this.checkerColor=e,this.checkAlpha=t,this},setBoxShape(e){return e===void 0&&(e=!1),this.isCircleShape===e?this:(this.isCircleShape=e,this.isSizeChanged=!0,this.dirty=!0,this)}},v9={setBoxSize(e){return this.dirty=this.dirty||this.boxSize!==e,this.boxSize=e,this},setCheckerSize(e){return this.dirty=this.dirty||this.checkerSize!==e,this.checkerSize=e,this}},m9=function(e,t){return e==null?this.isFilled=!1:(t===void 0&&(t=1),this.isFilled=!0,this.fillColor=e,this.fillAlpha=t),this},g9=function(e,t,s){return e==null||t==null?this.isStroked=!1:(s===void 0&&(s=1),this.isStroked=!0,this.lineWidth=e,this.strokeColor=t,this.strokeAlpha=s),this},x9={fillStyle:m9,lineStyle:g9};class Hc{constructor(){this.name=void 0,this.dirty=!0,this.visible=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(t){return this.name=t,this}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}reset(){return this.setVisible().fillStyle().lineStyle(),this}webglRender(t,s,f,C,w){}canvasRender(t,s,f){}updateData(){this.dirty=!1}}Object.assign(Hc.prototype,x9,le);const y9=Phaser.Geom.Polygon.Earcut;class pd extends Hc{constructor(){super(),this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=y9(this.pathData),super.updateData(),this}webglRender(t,s,f,C,w){this.isFilled&&Vo(t,s,this,f,C,w),this.isStroked&&ta(t,this,f,C,w)}canvasRender(t,s,f){var C=this.pathData,w=C.length-1,F=C[0]-s,N=C[1]-f;t.beginPath(),t.moveTo(F,N),this.closePath||(w-=2);for(var z=2;z<w;z+=2){var H=C[z]-s,Z=C[z+1]-f;t.lineTo(H,Z)}this.closePath&&t.closePath(),this.isFilled&&(zo(t,this),t.fill()),this.isStroked&&(Wo(t,this),t.stroke())}}const bE=Phaser.Math.DegToRad;class gl extends pd{constructor(t,s,f,C,w,F,N,z){t===void 0&&(t=0),s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=0),w===void 0&&(w=0),F===void 0&&(F=360),N===void 0&&(N=!1),z===void 0&&(z=!1),super(),this.setCenterPosition(t,s),this.setRadius(f,C),this.setAngle(w,F,N),this.setPie(z),this.setIterations(32)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setCenterPosition(t,s){return s===void 0&&(s=t),this.x=t,this.y=s,this}get radiusX(){return this._radiusX}set radiusX(t){this.dirty=this.dirty||this._radiusX!==t,this._radiusX=t}get radiusY(){return this._radiusY}set radiusY(t){this.dirty=this.dirty||this._radiusY!==t,this._radiusY=t}setRadius(t,s){return s===void 0&&(s=t),this.radiusX=t,this.radiusY=s,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!==t,this._startAngle=t}get endAngle(){return this._endAngle}set endAngle(t){this.dirty=this.dirty||this._endAngle!==t,this._endAngle=t}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!==t,this._anticlockwise=t}setAngle(t,s,f){return f===void 0&&(f=!1),this.startAngle=t,this.endAngle=s,this.anticlockwise=f,this}get pie(){return this._pie}set pie(t){this.dirty=this.dirty||this._pie!==t,this._pie=t}setPie(t){return t===void 0&&(t=!0),this.pie=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),he(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(t,s,f){t.beginPath();var C=this.x-s,w=this.y-f,F=bE(this.startAngle),N=bE(this.endAngle);this.pie&&(t.moveTo(C,w),t.lineTo(C+Math.cos(F)*this.radiusX,w+Math.sin(F)*this.radiusY)),t.ellipse(C,w,this.radiusX,this.radiusY,0,F,N,this.anticlockwise),this.pie&&t.lineTo(C,w),this.isFilled&&(zo(t,this),t.fill()),this.isStroked&&(Wo(t,this),t.stroke())}}class wn extends gl{constructor(t,s,f){super(t,s,f,f,0,360)}}class S9 extends pd{constructor(t){super(),this.setCurve(t),this.setIterations(32)}get curve(){return this._curve}set curve(t){this.dirty=this.dirty||this._curve!==t,this._curve=t}setCurve(t){return this.curve=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){this.pathData.length=0;for(var t=this.curve.getPoints(this.iterations),s=0,f=t.length;s<f;s++)this.pathData.push(t[s].x,t[s].y);return this.pathData.push(t[0].x,t[0].y),super.updateData(),this}}class T9 extends gl{constructor(t,s,f,C){super(t,s,f,C,0,360)}}class Za extends pd{constructor(t,s,f,C){t===void 0&&(t=0),s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=0),super(),this.setP0(t,s),this.setP1(f,C)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,s){return this.x0=t,this.y0=s,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,s){return this.x1=t,this.y1=s,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}}var C9=function(e,t,s){return s.length=0,e!=null&&s.push(e,t),s};const AE=Phaser.Math.Interpolation.QuadraticBezier;var M9=function(e,t,s,f,C,w){for(var F=w.length,N=w[F-2],z=w[F-1],H=1,Z=C-1;H<=Z;H++){var tt=H/Z;w.push(AE(tt,N,e,s),AE(tt,z,t,f))}return w};const RE=Phaser.Math.Interpolation.CubicBezier;var E9=function(e,t,s,f,C,w,F,N){for(var z=N.length,H=N[z-2],Z=N[z-1],tt=1,nt=F-1;tt<=nt;tt++){var st=tt/nt;N.push(RE(st,H,e,s,C),RE(st,Z,t,f,w))}return N};const LE=Phaser.Math.Interpolation.CatmullRom;var P9=function(e,t,s){for(var f=s.length,C=s[f-2],w=s[f-1],F=[C],N=[w],z=0,H=e.length;z<H;z+=2)F.push(e[z]),N.push(e[z+1]);for(var z=1,Z=t-1;z<=Z;z++){var tt=z/Z;s.push(LE(F,tt),LE(N,tt))}return s},OE=function(e){var t=e.length;if(t<2)return e;var s=e[t-2],f=e[t-1];return e.push(s),e.push(f),e},w9={clear(){return this.start(),this},start(){return this.startAt(),this},startAt(e,t){return this.restorePathData(),this.accumulationLengths=void 0,C9(e,t,this.pathData),this.firstPointX=e,this.firstPointY=t,this.lastPointX=e,this.lastPointY=t,this},lineTo(e,t,s){return s===void 0&&(s=!1),s&&(e+=this.lastPointX,t+=this.lastPointY),ie(e,t,this.pathData),this.lastPointX=e,this.lastPointY=t,this},verticalLineTo(e,t){return this.lineTo(e,this.lastPointY,t),this},horizontalLineTo(e,t){return this.lineTo(this.lastPointX,e,t),this},ellipticalArc(e,t,s,f,C,w,F){return F===void 0&&(F=!1),he(e,t,s,f,C,w,F,this.iterations,this.pathData),this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this},arc(e,t,s,f,C,w){return this.ellipticalArc(e,t,s,s,f,C,w),this},quadraticBezierTo(e,t,s,f){return M9(e,t,s,f,this.iterations,this.pathData),this.lastPointX=s,this.lastPointY=f,this},cubicBezierTo(e,t,s,f,C,w){return E9(e,t,s,f,C,w,this.iterations,this.pathData),this.lastPointX=C,this.lastPointY=w,this},catmullRomTo(...e){return P9(e,this.iterations,this.pathData),this.lastPointX=e[e.length-2],this.lastPointY=e[e.length-1],this},close(){var e=this.pathData[0],t=this.pathData[1];return(e!==this.lastPointX||t!==this.lastPointY)&&this.lineTo(e,t),this.closePath=!0,this},end(){return OE(this.pathData),this}};const b9=Phaser.Math.RotateAround;var A9=function(e,t,s,f){for(var C={x:0,y:0},w=0,F=f.length-1;w<F;w+=2)C.x=f[w],C.y=f[w+1],b9(C,e,t,s),f[w]=C.x,f[w+1]=C.y;return f},R9=function(e,t,s,f,C){for(var w=0,F=C.length-1;w<F;w+=2){var N=C[w]-e,z=C[w+1]-t;N*=s,z*=f,C[w]=N+e,C[w+1]=z+t}return C},FE=function(e,t,s){for(var f=0,C=s.length-1;f<C;f+=2)s[f]+=e,s[f+1]+=t;return s};const L9=Phaser.Math.DegToRad;Phaser.Math.RotateAround;var O9={rotateAround(e,t,s){if(this.pathData.length===0)return this;s=L9(s),A9(e,t,s,this.pathData);var f=this.pathData.length;return this.lastPointX=this.pathData[f-2],this.lastPointY=this.pathData[f-1],this},scale(e,t,s,f){return this.pathData.length===0?this:(R9(e,t,s,f,this.pathData),this.lastPointX=this.pathData[pathDataCnt-2],this.lastPointY=this.pathData[pathDataCnt-1],this)},offset(e,t){return FE(e,t,this.pathData),this}},Yc=function(e,t,s,f){s===void 0&&(s=0),f===void 0&&(f=t.length),e.length=f-s;for(var C=0,w=e.length;C<w;C++)e[C]=t[C+s];return e},F9={savePathData(){return this.pathDataSaved?this:(this.pathDataSave=[...this.pathData],this.pathData.length=0,this.pathDataSaved=!0,this)},restorePathData(){return this.pathDataSaved?(Yc(this.pathData,this.pathDataSave),this.pathDataSave=void 0,this.pathDataSaved=!1,this):this}};const D9=Phaser.Math.Distance.Between,I9=Phaser.Math.Wrap,B9=Phaser.Math.Linear;var DE=function(e,t,s,f,C){if(f===void 0&&(f=s,s=0),s=IE(s),f=IE(f),s!==f){var w=t[t.length-1],F=w*s,N=w*f;s<f?p0(e,t,F,N,C):(p0(e,t,F,w,C),p0(e,t,0,N,C)),OE(C)}},p0=function(e,t,s,f,C){for(var w=s>0,F=0,N=t.length;F<N;F++){var z=F*2,H=t[F];if(w){if(H<s)continue;if(H==s)w=!1;else{var Z=H-t[F-1],tt=1-(H-s)/Z;C.push($c(e,z-2,z,tt)),C.push($c(e,z-1,z+1,tt)),w=!1}}if(H<=f){if(C.push(e[z]),C.push(e[z+1]),H===f)break}else{var Z=H-t[F-1],tt=1-(H-f)/Z;C.push($c(e,z-2,z,tt)),C.push($c(e,z-1,z+1,tt));break}}},$c=function(e,t,s,f){var C=e[t],w=e[s];return B9(C,w,f)},IE=function(e){return e===0?0:e%1===0?1:I9(e,0,1)},N9={updateAccumulationLengths(){if(this.accumulationLengths==null)this.accumulationLengths=[];else if(this.accumulationLengths.length===this.pathData.length/2)return this;for(var e=this.accumulationLengths,t=this.pathData,s,f,C,w,F,N=0,z=0,H=t.length;z<H;z+=2)C=t[z],w=t[z+1],F=s===void 0?0:D9(s,f,C,w),N+=F,e.push(N),s=C,f=w;return this.totalPathLength=N,this},setDisplayPathSegment(e,t){return this.pathDataSaved||(this.updateAccumulationLengths(),this.savePathData()),this.pathData.length=0,DE(this.pathDataSave,this.accumulationLengths,e,t,this.pathData),this},appendFromPathSegment(e,t,s){return t===void 0?this.pathData.push(...e.pathData):(e.updateAccumulationLengths(),DE(e.pathData,e.accumulationLengths,t,s,this.pathData)),this.firstPointX=this.pathData[0],this.firstPointY=this.pathData[1],this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this}},G9={draw(e,t,s){var f=this.toPoints();return t&&e.fillPoints(f,this.closePath,this.closePath),s&&e.strokePoints(f,this.closePath,this.closePath),this}},U9=function(e,t){t===void 0&&(t=[]);for(var s=0,f=e.length-1;s<f;s+=2)t.push({x:e[s],y:e[s+1]});return t};const k9=Phaser.Geom.Polygon;var V9=function(e,t){return t===void 0&&(t=new k9),t.setTo(e),t};class BE{constructor(t){t===void 0&&(t=[]),this.pathData=t,this.closePath=!1,this.setIterations(32),this.firstPointX=void 0,this.firstPointY=void 0,this.lastPointX=void 0,this.lastPointY=void 0,this.accumulationLengths=void 0}setIterations(t){return this.iterations=t,this}toPoints(){return U9(this.pathData)}toPolygon(t){return V9(this.pathData,t)}}Object.assign(BE.prototype,w9,O9,F9,N9,G9);class vs extends pd{constructor(){super(),this.builder=new BE(this.pathData)}get iterations(){return this.builder.iterations}set iterations(t){this.dirty=this.dirty||this.builder.iterations!==t,this.builder.setIterations(t)}setIterations(t){return this.iterations=t,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}start(){return this.builder.start(),this.dirty=!0,this}startAt(t,s){return this.builder.startAt(t,s),this.dirty=!0,this}lineTo(t,s,f){return this.builder.lineTo(t,s,f),this.dirty=!0,this}verticalLineTo(t,s){return this.builder.verticalLineTo(t,s),this.dirty=!0,this}horizontalLineTo(t,s){return this.builder.horizontalLineTo(t,s),this.dirty=!0,this}ellipticalArc(t,s,f,C,w,F,N){return this.builder.ellipticalArc(t,s,f,C,w,F,N),this.dirty=!0,this}arc(t,s,f,C,w,F){return this.builder.arc(t,s,f,C,w,F),this.dirty=!0,this}quadraticBezierTo(t,s,f,C){return this.builder.quadraticBezierTo(t,s,f,C),this.dirty=!0,this}cubicBezierTo(t,s,f,C,w,F){return this.builder.cubicBezierTo(t,s,f,C,w,F),this.dirty=!0,this}catmullRomTo(...t){return this.builder.catmullRomTo(...t),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(t,s,f){return this.builder.rotateAround(t,s,f),this.dirty=!0,this}scale(t,s,f,C){return this.builder.scale(t,s,f,C),this.dirty=!0,this}offset(t,s){return this.builder.offset(t,s),this.dirty=!0,this}toPolygon(t){return this.builder.toPolygon(t)}appendPathFrom(t,s,f){return this.builder.appendFromPathSegment(t.builder,s,f),this}copyPathFrom(t,s,f){return this.builder.clear().appendFromPathSegment(t.builder,s,f),this}setDisplayPathSegment(t,s){return this.builder.setDisplayPathSegment(t,s),this}}const z9=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;let W9=class extends Hc{constructor(t,s,f,C){t===void 0&&(t=0),s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=f),super(),this.pathData=[],this.closePath=!0,this.setTopLeftPosition(t,s),this.setSize(f,C)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,s){return this.x=t,this.y=s,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,s){return this.width=t,this.height=s,this}get centerX(){return this.x+this.width/2}set centerX(t){this.x=t-this.width/2}get centerY(){return this.y+this.height/2}set centerY(t){this.y=t-this.height/2}setCenterPosition(t,s){return this.centerX=t,this.centerY=s,this}updateData(){this.pathData.length=0;var t=this.x,s=t+this.width,f=this.y,C=f+this.height;return this.pathData.push(t,f),this.pathData.push(s,f),this.pathData.push(s,C),this.pathData.push(t,C),this.pathData.push(t,f),super.updateData(),this}webglRender(t,s,f,C,w){if(this.isFilled){var F=t.fillTint,N=z9(this.fillColor,this.fillAlpha*f);F.TL=N,F.TR=N,F.BL=N,F.BR=N,t.batchFillRect(-C+this.x,-w+this.y,this.width,this.height)}this.isStroked&&ta(t,this,f,C,w)}canvasRender(t,s,f){this.isFilled&&(zo(t,this),t.fillRect(-s,-f,this.width,this.height)),this.isStroked&&(Wo(t,this),t.beginPath(),t.rect(-s,-f,this.width,this.height),t.stroke())}};const _c=Phaser.Utils.Objects.GetValue;class Zc extends pd{constructor(t,s,f,C,w,F){t===void 0&&(t=0),s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=f),w===void 0&&(w=0),F===void 0&&(F=6),super(),this.setTopLeftPosition(t,s),this.setSize(f,C),this.setRadius(w),this.setIterations(F),this.closePath=!0}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,s){return this.x=t,this.y=s,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,s){return this.width=t,this.height=s,this}get centerX(){return this.x+this.width/2}set centerX(t){this.x=t-this.width/2}get centerY(){return this.y+this.height/2}set centerY(t){this.y=t-this.height/2}setCenterPosition(t,s){return this.centerX=t,this.centerY=s,this}get radiusTL(){return this._radiusTL}set radiusTL(t){var s=t>0;this.dirty=this.dirty||this._radiusTL!==t||this._convexTL!==s,this._convexTL=s,this._radiusTL=Math.abs(t)}get radiusTR(){return this._radiusTR}set radiusTR(t){var s=t>0;this.dirty=this.dirty||this._radiusTR!==t||this._convexTR!==s,this._convexTR=s,this._radiusTR=Math.abs(t)}get radiusBL(){return this._radiusBL}set radiusBL(t){var s=t>0;this.dirty=this.dirty||this._radiusBL!==t||this._convexBL!==s,this._convexBL=s,this._radiusBL=Math.abs(t)}get radiusBR(){return this._radiusBR}set radiusBR(t){var s=t>0;this.dirty=this.dirty||this._radiusBR!==t||this._convexBR!==s,this._convexBR=s,this._radiusBR=Math.abs(t)}get radius(){return Math.max(this.radiusTL,this.radiusTR,this.radiusBL,this.radiusBR)}set radius(t){typeof t=="number"?(this.radiusTL=t,this.radiusTR=t,this.radiusBL=t,this.radiusBR=t):(this.radiusTL=_c(t,"tl",0),this.radiusTR=_c(t,"tr",0),this.radiusBL=_c(t,"bl",0),this.radiusBR=_c(t,"br",0))}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){var t=this.pathData;t.length=0;var s=this.width,f=this.height,C,w=this.iterations+1;if(C=this.radiusTL,C>0)if(this._convexTL){var F=C,N=C;he(F,N,C,C,180,270,!1,w,t)}else{var F=0,N=0;he(F,N,C,C,90,0,!0,w,t)}else ie(0,0,t);if(C=this.radiusTR,C>0)if(this._convexTR){var F=s-C,N=C;he(F,N,C,C,270,360,!1,w,t)}else{var F=s,N=0;he(F,N,C,C,180,90,!0,w,t)}else ie(s,0,t);if(C=this.radiusBR,C>0)if(this._convexBR){var F=s-C,N=f-C;he(F,N,C,C,0,90,!1,w,t)}else{var F=s,N=f;he(F,N,C,C,270,180,!0,w,t)}else ie(s,f,t);if(C=this.radiusBL,C>0)if(this._convexBL){var F=C,N=f-C;he(F,N,C,C,90,180,!1,w,t)}else{var F=0,N=f;he(F,N,C,C,360,270,!0,w,t)}else ie(0,f,t);return t.push(t[0],t[1]),FE(this.x,this.y,t),super.updateData(),this}}const X9=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;let H9=class extends Hc{constructor(t,s,f,C,w,F){t===void 0&&(t=0),s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=0),w===void 0&&(w=0),F===void 0&&(F=0),super(),this.pathData=[],this.closePath=!0,this.setP0(t,s),this.setP1(f,C),this.setP2(w,F)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,s){return this.x0=t,this.y0=s,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,s){return this.x1=t,this.y1=s,this}get x2(){return this._x2}set x2(t){this.dirty=this.dirty||this._x2!==t,this._x2=t}get y2(){return this._y2}set y2(t){this.dirty=this.dirty||this._y2!==t,this._y2=t}setP2(t,s){return this.dirty=this.dirty||this.x2!==t||this.y2!==s,this.x2=t,this.y2=s,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),super.updateData(),this}webglRender(t,s,f,C,w){if(this.isFilled){var F=X9(this.fillColor,this.fillAlpha*f),N=this.x0-C,z=this.y0-w,H=this.x1-C,Z=this.y1-w,tt=this.x2-C,nt=this.y2-w,st=s.getX(N,z),ht=s.getY(N,z),ft=s.getX(H,Z),dt=s.getY(H,Z),gt=s.getX(tt,nt),Et=s.getY(tt,nt);t.batchTri(st,ht,ft,dt,gt,Et,F,F,F)}this.isStroked&&ta(t,this,f,C,w)}canvasRender(t,s,f){var C=this.x1-s,w=this.y1-f,F=this.x2-s,N=this.y2-f,z=this.x3-s,H=this.y3-f;t.beginPath(),t.moveTo(C,w),t.lineTo(F,N),t.lineTo(z,H),t.closePath(),this.isFilled&&(zo(t,this),t.fill()),this.isStroked&&(Wo(t,this),t.stroke())}};var Y9={buildShapes(){this.addShape(new Zc().setName("box")).addShape(new vs().setName("checker"))},updateShapes(){var e=this.width/2,t=this.height/2,s=Math.min(e,t),f=s*2,C=e-s,w=t-s,F=this.boxLineWidth,N=Math.max(f/10,2),z=this.getShape("box"),H=this.getShape("checker");if(this.isSizeChanged){var nt=f*(1-this.boxSize)/2,Z=F/2,tt=f*this.boxSize-F;z.setTopLeftPosition(C+Z+nt,w+Z+nt).setSize(tt,tt),this.isCircleShape?z.setRadius(tt/2):z.setRadius(0);var nt=f*(1-this.checkerSize)/2,st=f*this.checkerSize/4,ht=st*1,ft=st*2,dt=st*3;H.startAt(ht,ft).lineTo(ft,dt).lineTo(dt,ht).offset(C+nt,w+nt).end()}this.checked?(z.fillStyle(this.boxFillColor,this.boxFillAlpha).lineStyle(F,this.boxStrokeColor,this.boxStrokeAlpha),H.lineStyle(N,this.checkerColor)):(z.fillStyle(this.uncheckedBoxFillColor,this.uncheckedBoxFillAlpha).lineStyle(F,this.uncheckedBoxStrokeColor,this.uncheckedBoxStrokeAlpha),H.lineStyle()),this.checked&&H.setDisplayPathSegment(this.checkerAnimProgress)}};const Ka=Phaser.Utils.Objects.GetValue,$9=Phaser.Math.Linear;class Kn extends Jo{constructor(t,s){super(t,s),this.resetFromJSON(),this.boot()}start(t){if(this.timer.isRunning)return this;var s=this.target;this.propertyKey=Ka(t,"key","value");var f=s[this.propertyKey];return this.fromValue=Ka(t,"from",f),this.toValue=Ka(t,"to",f),this.setEase(Ka(t,"ease",this.ease)),this.setDuration(Ka(t,"duration",this.duration)),this.setRepeat(Ka(t,"repeat",0)),this.setDelay(Ka(t,"delay",0)),this.setRepeatDelay(Ka(t,"repeatDelay",0)),this.timer.setDuration(this.duration).setRepeat(this.repeat).setDelay(this.delay).setRepeatDelay(this.repeatDelay),s[this.propertyKey]=this.fromValue,super.start(),this}updateTarget(t,s){var f=s.t;f=this.easeFn(f),t[this.propertyKey]=$9(this.fromValue,this.toValue,f)}}var _9={setCheckerAnimationDuration(e){return e===void 0&&(e=0),this.checkerAnimDuration=e,this},playCheckerAnimation(){return this.checkerAnimProgressTask===void 0&&(this.checkerAnimProgressTask=new Kn(this,{eventEmitter:null})),this.checkerAnimProgressTask.restart({key:"checkerAnimProgress",from:0,to:1,duration:this.checkerAnimDuration}),this},stopCheckerAnimation(){return this.checkerAnimProgressTask===void 0?this:(this.checkerAnimProgressTask.stop(),this)}},NE={};Object.assign(NE,p9,v9,Y9,_9);const vd=23730,Z9=16777215,Li=Phaser.Utils.Objects.GetValue,GE=Phaser.Utils.Objects.IsPlainObject;class UE extends oa{constructor(t,s,f,C,w,F,N){GE(s)?(N=s,s=Li(N,"x",0),f=Li(N,"y",0),C=Li(N,"width",2),w=Li(N,"height",2),F=Li(N,"color",vd)):GE(F)&&(N=F,F=Li(N,"color",vd)),super(t,s,f,C,w),this.type="rexCheckbox",F===void 0&&(F=vd),this.setBoxShape(Li(N,"circleBox",!1)),this.setBoxFillStyle(F,Li(N,"boxFillAlpha",1)),this.setUncheckedBoxFillStyle(Li(N,"uncheckedColor",null),Li(N,"uncheckedBoxFillAlpha",1)),this.setBoxStrokeStyle(Li(N,"boxLineWidth",4),Li(N,"boxStrokeColor",F),Li(N,"boxStrokeAlpha",1)),this.setUncheckedBoxStrokeStyle(this.boxLineWidth,Li(N,"uncheckedBoxStrokeColor",this.boxStrokeColor),Li(N,"uncheckedBoxStrokeAlpha",this.boxStrokeAlpha)),this.setCheckerStyle(Li(N,"checkerColor",Z9),Li(N,"checkerAlpha",1)),this.setBoxSize(Li(N,"boxSize",1)),this.setCheckerSize(Li(N,"checkerSize",1)),this.setCheckerAnimationDuration(Li(N,"animationDuration",150)),this.buildShapes();var z=Li(N,"checked");z===void 0&&(z=Li(N,"value",!1)),this.setValue(z)}get value(){return this._value}set value(t){t=!!t,this._value!==t&&(this.dirty=!0,this._value=t,t?this.playCheckerAnimation():this.stopCheckerAnimation(),this.emit("valuechange",t))}setValue(t){return this.value=t,this}toggleValue(){return this.setValue(!this.value),this}get checked(){return this.value}set checked(t){this.value=t}setChecked(t){return t===void 0&&(t=!0),this.setValue(t),this}toggleChecked(){return this.toggleValue(),this}get checkerAnimProgress(){return this._checkerAnimProgress}set checkerAnimProgress(t){this._checkerAnimProgress!==t&&(this._checkerAnimProgress=t,this.dirty=!0)}}Object.assign(UE.prototype,NE);const md=Phaser.Utils.Objects.GetValue;class ha extends Si{constructor(t,s){super(t,s),this._enable=void 0,t.setInteractive(md(s,"inputConfig",void 0)),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.isDown=!1,this.isOver=!1,this.setEnable(md(t,"enable",!0)),this.setMode(md(t,"mode",1)),this.setClickInterval(md(t,"clickInterval",100)),this.setDragThreshold(md(t,"threshold",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPress,this),t.on("pointerup",this.onRelease,this),t.on("pointerout",this.onPointOut,this),t.on("pointermove",this.onMove,this),t.on("pointerover",this.onOver,this),t.on("pointerout",this.onOut,this)}shutdown(t){this.isShutdown||(this.pointer=null,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var s=t?"enable":"disable";this.emit(s,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=K9[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}onPress(t,s,f,C){this.pointer===void 0&&(this.pointer=t,this.isDown=!0,this.emit("down",this,this.parent,t,C),this.mode===0&&this.click(t.downTime,t,C))}onRelease(t,s,f,C){this.pointer===t&&(this.isDown=!1,this.emit("up",this,this.parent,t,C),this.mode===1&&this.click(t.upTime,t,C),this.pointer=void 0)}onPointOut(t,s){this.pointer===t&&this.cancel()}onMove(t,s,f,C){this.pointer===t&&this.dragThreshold!==void 0&&this.mode===1&&t.getDistance()>=this.dragThreshold&&this.cancel()}onOver(t,s,f,C){return this.enable?(this.isOver=!0,this.emit("over",this,this.parent,t,C),this):this}onOut(t,s){return this.enable?(this.isOver=!1,this.emit("out",this,this.parent,t,s),this):this}click(t,s,f){if(!this.enable)return this;if(t===void 0)return this.emit("click",this,this.parent,s,f),this;this.pointer=void 0;var C=this.lastClickTime;return C!==void 0&&t-C<=this.clickInterval?this:(this.lastClickTime=t,this.emit("click",this,this.parent,s,f),this)}cancel(){return this.pointer=void 0,this}}const K9={press:0,pointerdown:0,release:1,pointerup:1},Ja=Phaser.Utils.Objects.GetValue,kE=Phaser.Utils.Objects.IsPlainObject;class v0 extends UE{constructor(t,s,f,C,w,F,N){kE(s)?(N=s,s=Ja(N,"x",0),f=Ja(N,"y",0),C=Ja(N,"width",2),w=Ja(N,"height",2),F=Ja(N,"color",vd)):kE(F)&&(N=F,F=Ja(N,"color",vd)),super(t,s,f,C,w,F,N),this._click=new ha(this,Ja(N,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(Ja(N,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(t){this._click.enable=!t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}}c.register("checkbox",function(e,t,s,f,C,w){var F=new v0(this.scene,e,t,s,f,C,w);return this.scene.add.existing(F),F}),j(window,"RexPlugins.UI.Checkbox",v0);var J9={setTrackFillStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.trackFillColor!==e||this.trackFillAlpha!==t,this.trackFillColor=e,this.trackFillAlpha=t,this},setFalseValueTrackFillStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.falseValueTrackColor!==e||this.uncheckedTrackFillAlpha!==t,this.falseValueTrackColor=e,this.falseValueTrackFillAlpha=t,this},setThumbStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.thumbColor!==e||this.checkAlpha!==t,this.thumbColor=e,this.thumbAlpha=t,this}},Q9={setTrackSize(e,t){return this.dirty=this.dirty||this.trackWidth!==e||this.trackHeight!==t,this.trackWidth=e,this.trackHeight=t,this},setTrackRadius(e){return this.dirty=this.dirty||this.trackRadius!==e,this.trackRadius=e,this},setThumbSize(e,t){return t===void 0&&(t=e),this.dirty=this.dirty||this.thumbWidth!==e||this.thumbHeight!==t,this.thumbWidth=e,this.thumbHeight=t,this},setThumbRadius(e){return this.dirty=this.dirty||this.thumbRadius!==e,this.thumbRadius=e,this}},j9={setThumbPosition(e,t){return t===void 0&&(t=1-e),this.thumbLeftX=e,this.thumbRightX=t,this},setRTL(e){return e===void 0&&(e=!0),this.rtl=e,this}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var m0=function(e,t,s){return(t-e)*s+e},q9=function(e,t,s){var f=m0(ju(e),ju(t),s),C=m0(qu(e),qu(t),s),w=m0(td(e),td(t),s);return(f&255)<<16|(C&255)<<8|w&255};const VE=Phaser.Math.Linear;var tk={buildShapes(){this.addShape(new Zc().setName("track")).addShape(new Zc().setName("thumb"))},updateShapes(){var e=this.width,t=this.height,s=this.value?this.toggleAnimProgress:1-this.toggleAnimProgress,f=this.getShape("track");if(this.isSizeChanged){var C=e*this.trackWidth,w=t*this.trackHeight,F=(e-C)/2,N=(t-w)/2,z=t*this.trackRadius;f.setTopLeftPosition(F,N).setSize(C,w).setRadius(z)}var H=q9(this.falseValueTrackColor,this.trackFillColor,s),Z=VE(this.falseValueTrackFillAlpha,this.trackFillAlpha,s);f.fillStyle(H,Z);var tt=this.getShape("thumb");if(this.isSizeChanged){var nt=e*this.thumbWidth,st=t*this.thumbHeight,ht=t*this.thumbRadius;tt.setSize(nt,st).setRadius(ht)}var ft=VE(this.thumbLeftX,this.thumbRightX,s)*e;this.rtl&&(ft=e-ft);var dt=t/2;tt.setCenterPosition(ft,dt),tt.fillStyle(this.thumbColor,this.thumbAlpha)}},ek={setToggleAnimationDuration(e){return e===void 0&&(e=0),this.toggleAnimDuration=e,this},playToggleAnimation(){return this.toggleAnimProgressTask===void 0&&(this.toggleAnimProgressTask=new Kn(this,{eventEmitter:null})),this.toggleAnimProgressTask.restart({key:"toggleAnimProgress",from:0,to:1,duration:this.toggleAnimDuration}),this},stopToggleAnimation(){return this.toggleAnimProgressTask===void 0?this:(this.toggleAnimProgressTask.stop(),this)}},zE={};Object.assign(zE,J9,Q9,j9,tk,ek);var ik=function(e){var t=.3*ju(e)+.59*qu(e)+.11*td(e);return(t&255)<<16|(t&255)<<8|t&255};const Oi=Phaser.Utils.Objects.GetValue,WE=Phaser.Utils.Objects.IsPlainObject,g0=23730,sk=16777215;class XE extends oa{constructor(t,s,f,C,w,F,N){WE(s)?(N=s,s=Oi(N,"x",0),f=Oi(N,"y",0),C=Oi(N,"width",2),w=Oi(N,"height",2),F=Oi(N,"color",g0)):WE(F)&&(N=F,F=Oi(N,"color",g0)),super(t,s,f,C,w),this.type="rexToggleSwitch",F===void 0&&(F=g0),this.setTrackFillStyle(F,Oi(N,"trackFillAlpha",1)),this.setFalseValueTrackFillStyle(Oi(N,"falseValueTrackColor",ik(F)),Oi(N,"falseValueTrackFillAlpha",1)),this.setThumbStyle(Oi(N,"thumbColor",sk),Oi(N,"thumbAlpha",1)),this.setTrackSize(Oi(N,"trackWidth",.9),Oi(N,"trackHeight",.5)),this.setTrackRadius(Oi(N,"trackRadius",this.trackHeight*.5));var z=Oi(N,"thumbHeight",void 0),H=Oi(N,"thumbWidth",z);H===void 0&&(H=this.trackHeight*.9),this.setThumbSize(H,z),this.setThumbRadius(Oi(N,"thumbRadius",this.thumbHeight*.5)),this.setThumbPosition(Oi(N,"thumbLeft",.3),Oi(N,"thumbRight",void 0)),this.setRTL(Oi(N,"rtl",!1)),this.setToggleAnimationDuration(Oi(N,"animationDuration",150)),this.buildShapes(),this.setValue(Oi(N,"value",!1),0)}get value(){return this._value}set value(t){t=!!t,this._value!==t&&(this.dirty=!0,this._value=t,this.playToggleAnimation(),this.emit("valuechange",t))}setValue(t,s){s===void 0&&(s=this.toggleAnimDuration);var f=this.toggleAnimDuration;return this.toggleAnimDuration=s,this.value=t,this.toggleAnimDuration=f,this}toggleValue(t){return this.setValue(!this.value,t),this}get toggleAnimProgress(){return this._toggleAnimProgress}set toggleAnimProgress(t){this._toggleAnimProgress!==t&&(this._toggleAnimProgress=t,this.dirty=!0)}}Object.assign(XE.prototype,zE);const HE=Phaser.Utils.Objects.GetValue;class x0 extends XE{constructor(t,s,f,C,w,F,N){super(t,s,f,C,w,F,N),this._click=new ha(this,HE(N,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(HE(N,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(t){this._click.enable=!t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}}c.register("toggleSwitch",function(e,t,s,f,C,w){var F=new x0(this.scene,e,t,s,f,C,w);return this.scene.add.existing(F),F}),j(window,"RexPlugins.UI.ToggleSwitch",x0);var nk={loadFromURL(e,t){var s=this,f=new Image;return f.onload=function(){s.width!==f.width||s.height!==f.height?s.resize(f.width,f.height):s.clear(),s.context.drawImage(f,0,0),s.updateTexture(),t&&t(),f.onload=null,f.src="",f.remove()},f.src=e,this},loadFromURLPromise(e){var t=this;return new Promise(function(s,f){t.loadFromURL(e,s)})},loadFromFile(e,t){var s=URL.createObjectURL(e);return this.loadFromURL(s,function(){URL.revokeObjectURL(s),t&&t()}),this},loadFromFilePromise(e){var t=this;return new Promise(function(s,f){t.loadFromFile(e,s)})}};class jo extends Ni{}Object.assign(jo.prototype,nk),c.register("canvas",function(e,t,s,f){var C=new jo(this.scene,e,t,s,f);return this.scene.add.existing(C),C}),j(window,"RexPlugins.UI.Canvas",jo);const xl=Phaser.Utils.Objects.GetValue;class YE extends Ni{constructor(t,s,f,C,w,F){super(t,s,f),this.type="rexCircleMaskImage",this.setTexture(C,w,F)}setTexture(t,s,f){typeof s=="object"&&(f=s,s=void 0),typeof f=="string"&&(f={maskType:f});var C=xl(f,"maskType",0),w=xl(f,"backgroundColor",void 0),F=xl(f,"strokeColor",void 0),N=F!=null?10:0,z=xl(f,"strokeWidth",N);if(C===void 0?C=0:typeof C=="string"&&(C=rk[C]),this._textureKey=t,this._frameName=s,C===null)return this.loadTexture(t,s),this.dirty=!0,this;var H=this.scene.sys.textures.getFrame(t,s);if(!H)return this;H.cutWidth!==this.width||H.cutHeight!==this.height?this.setCanvasSize(H.cutWidth,H.cutHeight):this.clear();var Z=this.canvas,tt=this.context,nt=Z.width,st=Z.height;w!=null&&(tt.fillStyle=w,tt.fillRect(0,0,nt,st)),tt.save(),tt.beginPath();var ht=z/2;switch(C){case 1:var yt=Math.floor(nt/2),Dt=Math.floor(st/2),ft=yt-ht,dt=Dt-ht;tt.ellipse(yt,Dt,ft,dt,0,0,2*Math.PI);break;case 2:var gt=xl(f,"radius",0),Et=xl(f,"iteration",void 0);a1(tt,ht,ht,nt-z,st-z,gt,Et);break;default:var yt=Math.floor(nt/2),Dt=Math.floor(st/2),Wt=Math.min(yt,Dt)-ht;tt.arc(yt,Dt,Wt,0,2*Math.PI);break}return F!=null&&(tt.strokeStyle=F,tt.lineWidth=z,tt.stroke()),tt.clip(),this.loadTexture(t,s),tt.restore(),this.dirty=!0,this}resize(t,s){return this.setDisplaySize(t,s),this}}const rk={circle:0,ellipse:1,roundRectangle:2};c.register("circleMaskImage",function(e,t,s,f,C){var w=new YE(this.scene,e,t,s,f,C);return this.scene.add.existing(w),w}),j(window,"RexPlugins.UI.CircleMaskImage",YE);const gd=Phaser.Utils.Objects.GetValue;class $E extends Ni{constructor(t,s,f,C,w,F){super(t,s,f),this.type="rexAlphaMaskImage",this.maskFrame=null,this.setTexture(C,w,F)}setTexture(t,s,f){typeof s=="object"&&(f=s,s=void 0),typeof f=="string"&&(f={mask:{key:f}});var C=gd(f,"mask.key"),w=gd(f,"mask.frame"),F=gd(f,"mask.invertAlpha",!1),N=gd(f,"mask.scale"),z=gd(f,"backgroundColor");if(C){this._maskKey=C,this._maskFrame=w,this._maskScale=N;var H=C?this.scene.sys.textures.get(C):null;this.maskFrame=H?H.get(w):null}this._textureKey=t,this._frameName=s;var Z=this.maskFrame;if(Z===null)return this.loadTexture(t,s),this.dirty=!0,this;var tt=z!=null;this.loadTexture(t,s);var nt=this.canvas,st=this.context,ht=nt.width,ft=nt.height;st.save(),st.globalCompositeOperation=F?"destination-out":"destination-in";var dt,gt;this._maskScale!=null?(dt=Z.cutWidth*this._maskScale,gt=Z.cutHeight*this._maskScale):(dt=ht,gt=ft);var Et=(ht-dt)/2,yt=(ft-gt)/2;return this.drawFrame(this._maskKey,this._maskFrame,Et,yt,dt,gt),st.restore(),tt&&(st.save(),st.globalCompositeOperation="destination-over",st.fillStyle=z,st.fillRect(0,0,ht,ft),st.restore()),this.dirty=!0,this}resize(t,s){return this.setDisplaySize(t,s),this}}c.register("alphaMaskImage",function(e,t,s,f,C){var w=new $E(this.scene,e,t,s,f,C);return this.scene.add.existing(w),w}),j(window,"RexPlugins.UI.AlphaMaskImage",$E);const ak=Phaser.Math.Linear,_E=Phaser.Math.Percent;var ok={setValue(e,t,s){return e==null?this:(t!==void 0&&(e=_E(e,t,s)),this.value=e,this)},addValue(e,t,s){return t!==void 0&&(e=_E(e,t,s)),this.value+=e,this},getValue(e,t){var s=this.value;return e!==void 0&&t!==void 0&&(s=ak(e,t,s)),s}};const hk=Phaser.Math.Percent;var lk={setEaseValuePropName(e){return this.easeValuePropName=e,this},setEaseValueDuration(e){return this.easeValueDuration=e,this},setEaseValueFunction(e){return this.easeFunction=e,this},stopEaseValue(){return this.easeValueTask&&this.easeValueTask.stop(),this},easeValueTo(e,t,s){return e==null?this:(t!==void 0&&(e=hk(e,t,s)),this.easeValueTask===void 0&&(this.easeValueTask=new Kn(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:e,duration:this.easeValueDuration,ease:this.easeFunction}),this)},easeValueRepeat(e,t,s,f){return s===void 0&&(s=-1),f===void 0&&(f=0),this.easeValueTask===void 0&&(this.easeValueTask=new Kn(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,from:e,to:t,duration:this.easeValueDuration,ease:this.easeFunction,repeat:s,repeatDelay:f}),this}};const xd=Phaser.Utils.Objects.GetValue,uk=Phaser.Math.Clamp;function Qa(e){class t extends e{bootProgressBase(f){this.eventEmitter=xd(f,"eventEmitter",this);var C=xd(f,"valuechangeCallback",null);if(C!==null){var w=xd(f,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",C,w)}return this.setEaseValuePropName("value").setEaseValueDuration(xd(f,"easeValue.duration",0)).setEaseValueFunction(xd(f,"easeValue.ease","Linear")),this}get value(){return this._value}set value(f){f=uk(f,0,1);var C=this._value,w=C!=f;this.dirty=this.dirty||w,this._value=f,w&&this.eventEmitter.emit("valuechange",this._value,C,this.eventEmitter)}}return Object.assign(t.prototype,ok,lk),t}const dk=Phaser.Math.RadToDeg,ZE=Phaser.Math.DegToRad;var KE=function(e,t,s,f,C,w,F,N){var z=Math.abs(F-w)===360,H=ZE(w),Z=ZE(F),tt=Math.cos(H),nt=Math.sin(H),st=Math.cos(Z),ht=Math.sin(Z);return e.startAt(t+tt*f,s+nt*f),e.arc(t,s,f,w,F,N),z&&C===0||(e.lineTo(t+st*C,s+ht*C),C>0&&e.arc(t,s,C,F,w,!N)),e.close(),e},fk={buildShapes(){var e=this.iterations;this.addShape(new vs().setIterations(e).setName("track")).addShape(new vs().setIterations(e).setName("bar")).addShape(new wn().setIterations(e).setName("center"))},updateShapes(){var e=this.radius,t=this.thickness*this.radius,s=this.radius,f=s-t,C=this.getShape("track");this.trackColor!=null&&this.thickness>0?(C.fillStyle(this.trackColor),KE(C,e,e,s,f,0,360,!1)):C.reset();var w=this.getShape("bar");if(this.barColor!=null&&this.thickness>0){var F,N,z;if(this.value===1)F=!1,N=0,z=360;else{F=this.anticlockwise,N=dk(this.startAngle);var H=360*(F?1-this.value:this.value);z=H+N}w.fillStyle(this.barColor),KE(w,e,e,s+1,f-1,N,z,!1)}else w.reset();var Z=this.getShape("center");this.centerColor&&f>0?Z.setCenterPosition(e,e).setRadius(f).fillStyle(this.centerColor):Z.reset()}};const Jn=Phaser.Utils.Objects.GetValue,ck=Phaser.Utils.Objects.IsPlainObject,pk=Phaser.Math.Clamp,vk=Phaser.Math.DegToRad(270);let y0=class extends Qa(oa){constructor(t,s,f,C,w,F,N){ck(s)&&(N=s,s=Jn(N,"x",0),f=Jn(N,"y",0),C=Jn(N,"radius",1),w=Jn(N,"barColor",void 0),F=Jn(N,"value",0)),C===void 0&&(C=1);var z=C*2;super(t,s,f,z,z),this.type="rexCircularProgress",this.bootProgressBase(N),this.setRadius(C),this.setTrackColor(Jn(N,"trackColor",void 0)),this.setBarColor(w),this.setCenterColor(Jn(N,"centerColor",void 0)),this.setThickness(Jn(N,"thickness",.2)),this.setStartAngle(Jn(N,"startAngle",vk)),this.setAnticlockwise(Jn(N,"anticlockwise",!1)),this.iterations=Jn(N,"iterations",128),this.buildShapes(),this.setValue(F)}resize(t,s){return t=Math.floor(Math.min(t,s)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var s=t*2;this.resize(s,s)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=pk(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}setCenterColor(t){return this.centerColor=t,this}};Object.assign(y0.prototype,fk),c.register("circularProgress",function(e,t,s,f,C,w){var F=new y0(this.scene,e,t,s,f,C,w);return this.scene.add.existing(F),F}),j(window,"RexPlugins.UI.CircularProgress",y0);var S0=function(e,t,s,f,C,w,F,N,z,H,Z,tt){H===void 0&&(H=0),Z===void 0&&(Z=2*Math.PI),tt===void 0&&(tt=!1),t.beginPath(),t.ellipse(s,f,C,w,0,H,Z,tt),F!=null&&(t.fillStyle=F,t.fill()),N!=null&&(t.strokeStyle=N,t.lineWidth=z,t.stroke())};const JE=["AliceBlue","AntiqueWhite","Aqua","Aquamarine","Azure","Beige","Bisque","Black","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chartreuse","Chocolate","Coral","CornflowerBlue","Cornsilk","Crimson","Cyan","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGrey","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","DarkOrange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkSlateGrey","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DimGrey","DodgerBlue","FireBrick","FloralWhite","ForestGreen","Fuchsia","Gainsboro","GhostWhite","Gold","GoldenRod","Gray","Grey","Green","GreenYellow","HoneyDew","HotPink","IndianRed","Indigo","Ivory","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow","LightGray","LightGrey","LightGreen","LightPink","LightSalmon","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSlateGrey","LightSteelBlue","LightYellow","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","NavajoWhite","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","RebeccaPurple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","SlateGrey","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","White","WhiteSmoke","Yellow","YellowGreen"],mk=[15792383,16444375,65535,8388564,15794175,16119260,16770244,0,16772045,255,9055202,10824234,14596231,6266528,8388352,13789470,16744272,6591981,16775388,14423100,65535,139,35723,12092939,11119017,11119017,25600,12433259,9109643,5597999,16747520,10040012,9109504,15308410,9419919,4734347,3100495,3100495,52945,9699539,16716947,49151,6908265,6908265,2003199,11674146,16775920,2263842,16711935,14474460,16316671,16766720,14329120,8421504,8421504,32768,11403055,15794160,16738740,13458524,4915330,16777200,15787660,15132410,16773365,8190976,16775885,11393254,15761536,14745599,16448210,13882323,13882323,9498256,16758465,16752762,2142890,8900346,7833753,7833753,11584734,16777184,65280,3329330,16445670,16711935,8388608,6737322,205,12211667,9662683,3978097,8087790,64154,4772300,13047173,1644912,16121850,16770273,16770229,16768685,128,16643558,8421376,7048739,16753920,16729344,14315734,15657130,10025880,11529966,14381203,16773077,16767673,13468991,16761035,14524637,11591910,8388736,6697881,16711680,12357519,4286945,9127187,16416882,16032864,3050327,16774638,10506797,12632256,8900331,6970061,7372944,7372944,16775930,65407,4620980,13808780,32896,14204888,16737095,4251856,15631086,16113331,16777215,16119285,16776960,10145074];for(var T0={},QE,Kc=0,gk=JE.length;Kc<gk;Kc++)QE=JE[Kc].toLowerCase(),T0[QE]=mk[Kc];var xk=function(e){return e=e.toLowerCase(),T0.hasOwnProperty(e)?T0[e]:null},C0=function(e){return typeof e!="string"||(e.startsWith("#")?e=parseInt(e.substring(1),16):e.startsWith("0x")?e=parseInt(e.substring(2),16):e=xk(e)),e};const yk=Phaser.Math.DegToRad,M0=Phaser.Math.Linear;var Sk=function(e,t,s,f,C,w,F,N,z,H,Z,tt,nt){H===void 0&&(H=0),Z===void 0&&(Z=2*Math.PI),tt===void 0&&(tt=!1),nt===void 0&&(nt=2),F=C0(F),N=C0(N),yd=aM(F,yd),Sd=aM(N,Sd);var st=yk(nt),ht;tt?ht=H-Z:ht=Z-H,ht<0&&(ht+=2*Math.PI);var ft=Math.ceil(ht/st),dt=ht/ft;tt&&(dt=-dt);for(var gt=0;gt<ft;gt++){var Et=gt/ft,yt=Math.round(M0(yd.r,Sd.r,Et)),Dt=Math.round(M0(yd.g,Sd.g,Et)),Wt=Math.round(M0(yd.b,Sd.b,Et)),qt=H+gt*dt,re=qt+dt;gt<ft-1&&(re+=dt/2),t.beginPath(),t.ellipse(s,f,C,w,0,qt,re,tt),t.strokeStyle=`rgb(${yt},${Dt},${Wt})`,t.lineWidth=z,t.stroke()}},yd,Sd,Tk=function(e,t,s,f,C,w,F,N,z,H,Z){z===void 0&&N!=null&&(z=2),t.font=w,t.textAlign=H,t.textBaseline=Z,t.fillStyle=F,t.strokeStyle=N,t.lineWidth=z,t.lineCap="round",t.lineJoin="round",N!=null&&N!=="none"&&z>0&&t.strokeText(C,s,f),F!=null&&F!=="none"&&t.fillText(C,s,f)};const E0=Phaser.Math.PI2;var Ck=function(){var e=this.radius,t=this.thickness*this.radius,s=this.radius-t/2,f=this.radius-t,C=this.canvas,w=this.context,F=this.anticlockwise,N=this.startAngle,z=this.endAngle,H=this._deltaAngle;if(this.trackColor&&t>0&&(w.save(),S0(C,w,e,e,s,s,void 0,this.trackColor,t,N,z,F),w.restore()),this.barColor&&s>0){var Z;this.value>=1?Z=z:F?Z=(N-H*this.value+E0)%E0:Z=(N+H*this.value)%E0,w.save(),this.barColor2?Sk(C,w,e,e,s,s,this.barColor2,this.barColor,t,N,Z,F):S0(C,w,e,e,s,s,void 0,this.barColor,t,N,Z,F),w.restore()}if(this.centerColor&&f>0){var tt;this.centerColor2?(tt=this.context.createRadialGradient(e,e,0,e,e,f),tt.addColorStop(0,this.centerColor),tt.addColorStop(1,this.centerColor2)):tt=this.centerColor,w.save(),S0(C,w,e,e,f,f,tt),w.restore()}this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(w.save(),Tk(C,w,e,e,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness,"center","middle"),w.restore())};const Ei=Phaser.Utils.Objects.GetValue,Mk=Phaser.Utils.Objects.IsPlainObject,Ek=Phaser.Math.Clamp,Pk=Phaser.Math.DegToRad(270),Jc=Phaser.Math.PI2;class Qc extends Qa(Ni){constructor(t,s,f,C,w,F,N){Mk(s)&&(N=s,s=Ei(N,"x",0),f=Ei(N,"y",0),C=Ei(N,"radius",1),w=Ei(N,"barColor",void 0),F=Ei(N,"value",0));var z=C*2,H=Ei(N,"resolution",1);super(t,s,f,z,z,H),this.type="rexCircularProgressCanvas",this.bootProgressBase(N),this.setRadius(C),this.setTrackColor(Ei(N,"trackColor",void 0)),this.setBarColor(w),this.setBarColor2(Ei(N,"barColor2",void 0)),this.setCenterColor(Ei(N,"centerColor",void 0)),this.setThickness(Ei(N,"thickness",.2)),this.setAnticlockwise(Ei(N,"anticlockwise",!1)),this.setStartAngle(Ei(N,"startAngle",Pk));var Z=Ei(N,"endAngle");Z===void 0&&(this.anticlockwise?Z=this.startAngle-Jc:Z=this.startAngle+Jc),this.setEndAngle(Ei(N,"endAngle",Z)),this.setTextColor(Ei(N,"textColor",void 0)),this.setTextStrokeColor(Ei(N,"textStrokeColor",void 0),Ei(N,"textStrokeThickness",void 0));var tt=Ei(N,"textFont",void 0);tt?this.setTextFont(tt):this.setTextFont(Ei(N,"textSize","16px"),Ei(N,"textFamily","Courier"),Ei(N,"textStyle","")),this.setTextFormatCallback(Ei(N,"textFormatCallback",void 0),Ei(N,"textFormatCallbackScope",void 0)),this.setValue(F)}resize(t,s){return t=Math.floor(Math.min(t,s)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var s=t*2;this.resize(s,s)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){t=Ce(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){t=Ce(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get barColor2(){return this._barColor2}set barColor2(t){t=Ce(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor2!=t,this._barColor2=t}setBarColor2(t){return this.barColor2=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t,this._deltaAngle=P0(this._startAngle,this._endAngle,this._anticlockwise)}setStartAngle(t){return this.startAngle=t,this}get endAngle(){return this._endAngle}set endAngle(t){this.dirty=this.dirty||this._endAngle!=t,this._endAngle=t,this._deltaAngle=P0(this._startAngle,this._endAngle,this._anticlockwise)}setEndAngle(t){return this.endAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t,this._deltaAngle=P0(this._startAngle,this._endAngle,this._anticlockwise)}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=Ek(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){t=Ce(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}get centerColor2(){return this._centerColor2}set centerColor2(t){t=Ce(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=t,this._centerColor2=t}setCenterColor(t,s){return this.centerColor=t,this.centerColor2=s,this}get textColor(){return this._textColor}set textColor(t){t=Ce(t,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=t,this._textColor=t}setTextColor(t){return this.textColor=t,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(t){t=Ce(t,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=t,this._textStrokeColor=t}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(t){this.dirty=this.dirty||this._textStrokeThickness!=t,this._textStrokeThickness=t}setTextStrokeColor(t,s){return s===void 0&&(s=2),this.textStrokeColor=t,this.textStrokeThickness=s,this}get textFont(){return this._textFont}set textFont(t){this.dirty=this.dirty||this._textFont!=t,this._textFont=t}setTextFont(t,s,f){var C;return s===void 0?C=t:C=f+" "+t+" "+s,this.textFont=C,this}setTextFormatCallback(t,s){return this.textFormatCallback=t,this.textFormatCallbackScope=s,this}updateTexture(){return super.updateTexture(function(){this.clear(),Ck.call(this)},this),this}getFormatText(t){t===void 0&&(t=this.value);var s;return this.textFormatCallbackScope?s=this.textFormatCallback(t):s=this.textFormatCallback.call(this.textFormatCallbackScope,t),s}}var P0=function(e,t,s){return s?e<=t?Jc+e-t:e-t:e>=t?Jc+t-e:t-e};c.register("circularProgressCanvas",function(e,t,s,f,C,w){var F=new Qc(this.scene,e,t,s,f,C,w);return this.scene.add.existing(F),F}),j(window,"RexPlugins.UI.CircularProgressCanvas",Qc);var wk=function(){var e=this.skewX,t=this.width-Math.abs(e),s=this.height,f=this.getShape("trackFill");f.fillStyle(this.trackColor),f.isFilled&&w0(f,0,0,t,s,e);var C=this.getShape("bar");if(C.fillStyle(this.barColor),C.isFilled){var w,F;this.rtl?(w=t*(1-this.value),F=t):(w=0,F=t*this.value),w0(C,w,0,F,s,e)}var N=this.getShape("trackStroke");N.lineStyle(this.trackStrokeThickness,this.trackStrokeColor),N.isStroked&&w0(N,0,0,t,s,e)},w0=function(e,t,s,f,C,w){var F=(t+f)/2;return w>=0?e.startAt(F+w,s).lineTo(f+w,s).lineTo(f,C).lineTo(t,C).lineTo(t+w,s).lineTo(F+w,s):e.startAt(F,s).lineTo(f,s).lineTo(f-w,C).lineTo(t-w,C).lineTo(t,s).lineTo(F,s),e.close(),e};const Td=Phaser.Utils.Objects.GetValue,b0=Phaser.Utils.Objects.IsPlainObject;let jc=class extends Qa(oa){constructor(t,s,f,C,w,F,N,z){b0(s)?(z=s,s=z.x,f=z.y,C=z.width,w=z.height,F=z.barColor,N=z.value):b0(C)?(z=C,C=z.width,w=z.height,F=z.barColor,N=z.value):b0(F)&&(z=F,F=z.barColor,N=z.value),s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=2),w===void 0&&(w=C),N===void 0&&(N=0),super(t,s,f,C,w,z),this.type="rexLineProgress",this.bootProgressBase(z),this.addShape(new vs().setName("trackFill")).addShape(new vs().setName("bar")).addShape(new vs().setName("trackStroke")),this.setTrackColor(Td(z,"trackColor",void 0)),this.setBarColor(F),this.setTrackStroke(Td(z,"trackStrokeThickness",2),Td(z,"trackStrokeColor",void 0)),this.setSkewX(Td(z,"skewX",0)),this.setRTL(Td(z,"rtl",!1)),this.setValue(N)}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,s){return this.trackStrokeThickness=t,this.trackStrokeColor=s,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get skewX(){return this._skewX}set skewX(t){this.dirty=this.dirty||this._skewX!=t,this._skewX=t}setSkewX(t){return this.skewX=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}};var bk={updateShapes:wk};Object.assign(jc.prototype,bk),c.register("lineProgress",function(e,t,s,f,C,w,F){var N=new jc(this.scene,e,t,s,f,C,w,F);return this.scene.add.existing(N),N}),j(window,"RexPlugins.UI.LineProgress",jc);var A0=function(e,t,s,f,C){e.setIterations(C).start();var N=f.tl;if(Kt(N))if(N.convex){var w=N.x,F=N.y;e.ellipticalArc(w,F,N.x,N.y,180,270,!1)}else{var w=0,F=0;e.ellipticalArc(w,F,N.x,N.y,90,0,!0)}else e.lineTo(0,0);var N=f.tr;if(Kt(N))if(N.convex){var w=t-N.x,F=N.y;e.ellipticalArc(w,F,N.x,N.y,270,360,!1)}else{var w=t,F=0;e.ellipticalArc(w,F,N.x,N.y,180,90,!0)}else e.lineTo(t,0);var N=f.br;if(Kt(N))if(N.convex){var w=t-N.x,F=s-N.y;e.ellipticalArc(w,F,N.x,N.y,0,90,!1)}else{var w=t,F=s;e.ellipticalArc(w,F,N.x,N.y,270,180,!0)}else e.lineTo(t,s);var N=f.bl;if(Kt(N))if(N.convex){var w=N.x,F=s-N.y;e.ellipticalArc(w,F,N.x,N.y,90,180,!1)}else{var w=0,F=s;e.ellipticalArc(w,F,N.x,N.y,360,270,!0)}else e.lineTo(0,s);return e.close(),e},qc=Phaser.Math.RadToDeg,Ak=function(e,t,s,f,C){var w=t*C,H=f.tl;if(Kt(H)){var F;w>H.x?F=90:F=qc(Math.acos((H.x-w)/H.x));var N=H.x,z=H.y;e.ellipticalArc(N,z,H.x,H.y,180,180+F,!1)}else e.lineTo(0,0);var H=f.tr;if(Kt(H)&&w>t-H.x){var F=90-qc(Math.acos((w-(t-H.x))/H.x)),N=t-H.x,z=H.y;e.ellipticalArc(N,z,H.x,H.y,270,270+F,!1)}else e.lineTo(w,0);var H=f.br;if(Kt(H)&&w>t-H.x){var F=90-qc(Math.acos((w-(t-H.x))/H.x)),N=t-H.x,z=s-H.y;e.ellipticalArc(N,z,H.x,H.y,90-F,90,!1)}else e.lineTo(w,s);var H=f.bl;if(Kt(H)){var F;w>H.x?F=90:F=qc(Math.acos((H.x-w)/H.x));var N=H.x,z=s-H.y;e.ellipticalArc(N,z,H.x,H.y,180-F,180,!1)}else e.lineTo(0,s)},tp=Phaser.Math.RadToDeg,Rk=function(e,t,s,f,C){var w=s*C,H=f.tl;if(Kt(H)){var F;w>H.y?F=90:F=tp(Math.acos((H.y-w)/H.y));var N=H.x,z=H.y;e.ellipticalArc(N,z,H.x,H.y,270-F,270,!1)}else e.lineTo(0,0);var H=f.tr;if(Kt(H)){var F;w>H.y?F=90:F=tp(Math.acos((H.y-w)/H.y));var N=t-H.x,z=H.y;e.ellipticalArc(N,z,H.x,H.y,270,270+F,!1)}else e.lineTo(t,0);var H=f.br;if(Kt(H)&&w>s-H.y){var F=90-tp(Math.acos((w-(s-H.y))/H.y)),N=t-H.x,z=s-H.y;e.ellipticalArc(N,z,H.x,H.y,0,0+F,!1)}else e.lineTo(t,w);var H=f.bl;if(Kt(H)&&w>s-H.y){var F=90-tp(Math.acos((w-(s-H.y))/H.y)),N=H.x,z=s-H.y;e.ellipticalArc(N,z,H.x,H.y,180-F,180,!1)}else e.lineTo(0,w)},ep=Phaser.Math.RadToDeg,Lk=function(e,t,s,f,C){var w=t*C,H=f.tr;if(Kt(H)){var F;w>H.x?F=90:F=ep(Math.acos((H.x-w)/H.x));var N=t-H.x,z=H.y;e.ellipticalArc(N,z,H.x,H.y,360-F,360,!1)}else e.lineTo(t,0);var H=f.br;if(Kt(H)){var F;w>H.x?F=90:F=ep(Math.acos((H.x-w)/H.x));var N=t-H.x,z=s-H.y;e.ellipticalArc(N,z,H.x,H.y,0,0+F,!1)}else e.lineTo(t,s);var H=f.bl;if(Kt(H)&&w>t-H.x){var F=90-ep(Math.acos((w-(t-H.x))/H.x)),N=H.x,z=s-H.y;e.ellipticalArc(N,z,H.x,H.y,90,90+F,!1)}else e.lineTo(t-w,s);var H=f.tl;if(Kt(H)&&w>t-H.x){var F=90-ep(Math.acos((w-(t-H.x))/H.x)),N=H.x,z=H.y;e.ellipticalArc(N,z,H.x,H.y,270-F,270,!1)}else e.lineTo(t-w,0)},ip=Phaser.Math.RadToDeg,Ok=function(e,t,s,f,C){var w=s*C,H=f.br;if(Kt(H)){w>H.y?z=90:z=ip(Math.acos((H.y-w)/H.y));var F=t-H.x,N=s-H.y;e.ellipticalArc(F,N,H.x,H.y,90-z,90,!1)}else e.lineTo(t,s);var H=f.bl;if(Kt(H)){w>H.y?z=90:z=ip(Math.acos((H.y-w)/H.y));var F=H.x,N=s-H.y;e.ellipticalArc(F,N,H.x,H.y,90,90+z,!1)}else e.lineTo(0,s);var H=f.tl;if(Kt(H)&&w>s-H.y){var z=90-ip(Math.acos((w-(s-H.y))/H.y)),F=H.x,N=H.y;e.ellipticalArc(F,N,H.x,H.y,180,180+z,!1)}else e.lineTo(0,s-w);var H=f.tr;if(Kt(H)&&w>s-H.y){var z=90-ip(Math.acos((w-(s-H.y))/H.y)),F=t-H.x,N=H.y;e.ellipticalArc(F,N,H.x,H.y,360-z,360,!1)}else e.lineTo(t,s-w)},Fk=function(e,t,s,f,C,w,F,N){if(e.setIterations(N).start(),C===0)return e;if(C===1)return A0(e,t,s,f,N);var z;return w===0?z=F?Lk:Ak:z=F?Ok:Rk,z(e,t,s,f,C),e.close(),e},Dk=function(){var e=this.width,t=this.height,s=this.rrGeom.cornerRadius,f=this.value,C=this.orientation,w=this.rtl,F=this.iteration+1,N=this.getShape("trackFill");N.fillStyle(this.trackColor),N.isFilled&&A0(N,e,t,s,F);var z=this.getShape("bar");z.fillStyle(this.barColor),z.isFilled&&Fk(z,e,t,s,f,C,w,F);var H=this.getShape("trackStroke");H.lineStyle(this.trackStrokeThickness,this.trackStrokeColor),H.isStroked&&A0(H,e,t,s,F)},Ik={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},qo=function(e){return typeof e=="string"&&(e=Ik[e]),e};const yl=Phaser.Utils.Objects.GetValue,R0=Phaser.Utils.Objects.IsPlainObject;class L0 extends Qa(oa){constructor(t,s,f,C,w,F,N,z,H){R0(s)?(H=s,s=H.x,f=H.y,C=H.width,w=H.height,F=H.radius,N=H.barColor,z=H.value):R0(C)?(H=C,C=H.width,w=H.height,F=H.radius,N=H.barColor,z=H.value):R0(F)&&(H=F,F=H.radius,N=H.barColor,z=H.value),s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=1),w===void 0&&(w=C),F===void 0&&(F=0),z===void 0&&(z=0),super(t,s,f,C,w,H),this.type="rexRoundRectangleProgress",this.rrGeom=new Ft,this.bootProgressBase(H),this.addShape(new vs().setName("trackFill")).addShape(new vs().setName("bar")).addShape(new vs().setName("trackStroke")),this.setTrackColor(yl(H,"trackColor",void 0)),this.setBarColor(N),this.setTrackStroke(yl(H,"trackStrokeThickness",2),yl(H,"trackStrokeColor",void 0)),this.setOrientation(yl(H,"orientation",0)),this.setRTL(yl(H,"rtl",!1)),this.setRadius(F),this.setIteration(yl(F,"iteration",void 0)),this.setValue(z)}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,s){return this.trackStrokeThickness=t,this.trackStrokeColor=s,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get orientation(){return this._orientation}set orientation(t){t=qo(t),this.dirty=this.dirty||this._orientation!=t,this._orientation=t}setOrientation(t){return this.orientation=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get radius(){return this.rrGeom.radius}set radius(t){this.rrGeom.setRadius(t),this.dirty=!0}get radiusTL(){return this.rrGeom.radiusTL}set radiusTL(t){this.rrGeom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.rrGeom.radiusTR}set radiusTR(t){this.rrGeom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.rrGeom.radiusBL}set radiusBL(t){this.rrGeom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.rrGeom.radiusBR}set radiusBR(t){this.rrGeom.radiusBR=t,this.dirty=!0}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setRadiusTL(t){return t===void 0&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return t===void 0&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return t===void 0&&(t=0),this.radiusBL=t,this}setRadiusBR(t){return t===void 0&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.rrGeom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}get iteration(){return this._iteration}set iteration(t){if(this._iteration===void 0){this._iteration=t;return}this._iteration!==t&&(this._iteration=t,this.dirty=!0)}setIteration(t){return t===void 0&&(t=6),this.iteration=t,this}}var Bk={updateShapes:Dk};Object.assign(L0.prototype,Bk),c.register("roundRectanleProgress",function(e,t,s,f,C,w,F,N){var z=new L0(this.scene,e,t,s,f,C,w,F,N);return this.scene.add.existing(z),z}),j(window,"RexPlugins.UI.RoundRectangleProgress",L0);var Nk=function(e,t){e.save(),e.beginPath();var s=t[0];e.moveTo(s.x,s.y);for(var f=1,C=t.length;f<C;f++)s=t[f],e.lineTo(s.x,s.y);e.closePath(),e.restore()},O0=function(e,t,s,f,C,w,F){F===void 0&&(F="round"),Nk(t,s),t.lineJoin=F,f!=null&&(t.fillStyle=f,t.fill()),C!=null&&(t.strokeStyle=C,t.lineWidth=w,t.stroke())},Gk=function(){var e=this.skewX,t=this.width-Math.abs(e),s=this.height,f=this.canvas,C=this.context;(this.trackColor||this.trackStrokeColor)&&jE(0,0,t,s,e,this.trackPoints);var w,F;if(this.barColor&&(this.rtl?(w=t*(1-this.value),F=t):(w=0,F=t*this.value),jE(w,0,F,s,e,this.barPoints)),this.trackColor&&(C.save(),O0(f,C,this.trackPoints,this.trackColor),C.restore()),this.barColor){C.save();var N;if(this.barColor2){var z;if(this.isHorizontalGradient){var H=s/2;z=C.createLinearGradient(w,H,F,H)}else{var Z=t/2;z=C.createLinearGradient(Z,0,Z,s)}z.addColorStop(0,this.rtl?this.barColor:this.barColor2),z.addColorStop(1,this.rtl?this.barColor2:this.barColor),N=z}else N=this.barColor;O0(f,C,this.barPoints,N),C.restore()}this.trackStrokeColor&&this.trackStrokeThickness>0&&(C.save(),O0(f,C,this.trackPoints,void 0,this.trackStrokeColor,this.trackStrokeThickness),C.restore())},jE=function(e,t,s,f,C,w){w===void 0&&(w=[]),w.length=4;for(var F=0;F<4;F++)w[F]||(w[F]={});var N;return C>=0?(N=w[0],N.x=e+C,N.y=t,N=w[1],N.x=s+C,N.y=t,N=w[2],N.x=s,N.y=f,N=w[3],N.x=e,N.y=f):(N=w[0],N.x=e,N.y=t,N=w[1],N.x=s,N.y=t,N=w[2],N.x=s-C,N.y=f,N=w[3],N.x=e-C,N.y=f),w};const Wi=Phaser.Utils.Objects.GetValue,F0=Phaser.Utils.Objects.IsPlainObject;class D0 extends Qa(Ni){constructor(t,s,f,C,w,F,N,z){F0(s)?(z=s,s=Wi(z,"x",0),f=Wi(z,"y",0),C=Wi(z,"width",2),w=Wi(z,"height",2),F=Wi(z,"barColor",void 0),N=Wi(z,"value",0)):F0(C)?(z=C,C=Wi(z,"width",2),w=Wi(z,"height",2),F=Wi(z,"barColor",void 0),N=Wi(z,"value",0)):F0(F)&&(z=F,F=Wi(z,"barColor",void 0),N=Wi(z,"value",0));var H=Wi(z,"resolution",1);super(t,s,f,C,w,H),this.type="rexLineProgressCanvas",this.trackPoints=[],this.barPoints=[],this.bootProgressBase(z),this.setTrackColor(Wi(z,"trackColor",void 0)),this.setBarColor(F,Wi(z,"barColor2",void 0),Wi(z,"isHorizontalGradient",void 0)),this.setTrackStroke(Wi(z,"trackStrokeThickness",2),Wi(z,"trackStrokeColor",void 0)),this.setSkewX(Wi(z,"skewX",0)),this.setRTL(Wi(z,"rtl",!1)),this.setValue(N)}get trackColor(){return this._trackColor}set trackColor(t){t=Ce(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){t=Ce(t,this.canvas,this.context),this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,s){return this.trackStrokeThickness=t,this.trackStrokeColor=s,this}get barColor(){return this._barColor}set barColor(t){t=Ce(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}get barColor2(){return this._barColor2}set barColor2(t){t=Ce(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor2!=t,this._barColor2=t}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setBarColor(t,s,f){return f===void 0&&(f=!0),this.barColor=t,this.barColor2=s,this.isHorizontalGradient=f,this}get skewX(){return this._skewX}set skewX(t){this.dirty=this.dirty||this._skewX!=t,this._skewX=t}setSkewX(t){return this.skewX=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}updateTexture(){return super.updateTexture(function(){this.clear(),Gk.call(this)},this),this}}c.register("circularProgressCanvas",function(e,t,s,f,C,w,F){var N=new D0(this.scene,e,t,s,f,C,w,F);return this.scene.add.existing(N),N}),j(window,"RexPlugins.UI.LineProgressCanvas",D0),Phaser.Math.Wrap;const Sl=Phaser.Math.Linear;var Uk=function(){var e=this.getShape("triangle"),t=this.padding,s=this.width-t.right,f=0+t.left,C=this.height-t.bottom,w=0+t.top,F=(f+s)/2,N=(w+C)/2,z={0:{a:{x:f,y:w},b:{x:s,y:N},c:{x:f,y:C}},1:{a:{x:f,y:w},b:{x:F,y:C},c:{x:s,y:w}},2:{a:{x:s,y:w},b:{x:f,y:N},c:{x:s,y:C}},3:{a:{x:f,y:C},b:{x:F,y:w},c:{x:s,y:C}}},H,Z,tt,nt,st,ht;if(this.previousDirection===void 0){var ft=z[this.direction],dt=ft.a,gt=ft.b,Et=ft.c;H=dt.x,Z=dt.y,tt=gt.x,nt=gt.y,st=Et.x,ht=Et.y}else{var yt=z[this.previousDirection],Dt=z[this.direction],Wt=this.easeDirectionProgress;H=Sl(yt.a.x,Dt.a.x,Wt),Z=Sl(yt.a.y,Dt.a.y,Wt),tt=Sl(yt.b.x,Dt.b.x,Wt),nt=Sl(yt.b.y,Dt.b.y,Wt),st=Sl(yt.c.x,Dt.c.x,Wt),ht=Sl(yt.c.y,Dt.c.y,Wt)}e.startAt(H,Z).lineTo(tt,nt).lineTo(st,ht),this.arrowOnly?e.end():e.close()};const kk=Phaser.Math.DegToRad,sp=kk(120);var Vk=function(t){var t=this.getShape("triangle"),s=this.width/2,f=this.height/2,C=Math.min(s,f)*this.radius,w=this.verticeRotation;t.startAt(s+C*Math.cos(w+sp),f+C*Math.sin(w+sp)).lineTo(s+C*Math.cos(w),f+C*Math.sin(w)).lineTo(s+C*Math.cos(w-sp),f+C*Math.sin(w-sp)),this.arrowOnly?t.end():t.close()},zk={buildShapes(){this.addShape(new vs().setName("triangle"))},updateShapes(){var e=this.getShape("triangle");this.arrowOnly?e.fillStyle().lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha):e.fillStyle(this.fillColor,this.fillAlpha).lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha),this.shapeMode===0?Uk.call(this):Vk.call(this)}},Wk={setEaseDuration(e){return e===void 0&&(e=0),this.easeDuration=e,this},playEaseDirectionation(){return this.easeDirectionProgressTask===void 0&&(this.easeDirectionProgressTask=new Kn(this,{eventEmitter:null})),this.easeDirectionProgressTask.restart({key:"easeDirectionProgress",from:0,to:1,duration:this.easeDuration}),this},stopEaseDirection(){return this.easeDirectionProgressTask===void 0?this:(this.easeDirectionProgressTask.stop(),this)}};const Tl=Phaser.Utils.Objects.GetValue,Xk=Phaser.Utils.Objects.IsPlainObject,Hk=Phaser.Math.DegToRad,Yk=Phaser.Math.RadToDeg;class Cd extends oa{constructor(t,s,f,C,w,F,N){var z,H,Z,tt,nt,st,ht,ft;if(Xk(s)){var dt=s;s=dt.x,f=dt.y,C=dt.width,w=dt.height,F=dt.color,N=dt.alpha,z=dt.strokeColor,H=dt.strokeAlpha,Z=dt.strokeWidth,tt=dt.arrowOnly,nt=dt.direction,st=dt.easeDuration,ht=dt.padding,ft=dt.radius}s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=1),w===void 0&&(w=C),tt===void 0&&(tt=!1),nt===void 0&&(nt=0),st===void 0&&(st=0),ht===void 0&&(ht=0),ft===void 0&&(ft=void 0),super(t,s,f,C,w),this.type="rexTriangle",this.setFillStyle(F,N),z!==void 0&&Z===void 0&&(Z=2),this.setStrokeStyle(Z,z,H),this.setArrowOnly(tt),this.setDirection(nt,st),this.setPadding(ht),this.setRadius(ft),this.buildShapes()}get arrowOnly(){return this._arrowOnly}set arrowOnly(t){this.dirty=this.dirty||this._arrowOnly!=t,this._arrowOnly=t}setArrowOnly(t){return t===void 0&&(t=!0),this.arrowOnly=t,this}get direction(){return this._direction}set direction(t){t=_k(t),this._direction!==t&&(this.easeDuration>0&&this._direction!==void 0?this.previousDirection=this._direction:this.previousDirection=void 0,this._direction=t,this.verticeAngle=t*90,this.dirty=!0,this.previousDirection!==void 0?this.playEaseDirectionation():this.stopEaseDirection())}setDirection(t,s){return s!==void 0&&this.setEaseDuration(s),this.direction=t,this}toggleDirection(t){return this.setDirection(this.direction+2,t),this}get easeDirectionProgress(){return this._easeDirectionProgress}set easeDirectionProgress(t){this._easeDirectionProgress!==t&&(this._easeDirectionProgress=t,this.dirty=!0)}setPadding(t,s,f,C){if(typeof t=="object"){var w=t,F=Tl(w,"x",null);F!==null?(t=F,f=F):(t=Tl(w,"left",0),f=Tl(w,"right",t));var N=Tl(w,"y",null);N!==null?(s=N,C=N):(s=Tl(w,"top",0),C=Tl(w,"bottom",s))}else t===void 0&&(t=0),s===void 0&&(s=t),f===void 0&&(f=t),C===void 0&&(C=s);return this.padding===void 0&&(this.padding={}),this.dirty=this.dirty||this.padding.left!=t||this.padding.top!=s||this.padding.right!=f||this.padding.bottom!=C,this.padding.left=t,this.padding.top=s,this.padding.right=f,this.padding.bottom=C,this.setRadius(),this}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this.shapeMode=t==null?0:1,this}get verticeRotation(){return this._verticeRotation}set verticeRotation(t){this.dirty=this.dirty||this._verticeRotation!=t,this._verticeRotation=t}setVerticeRotation(t){return this.verticeRotation=t,this}get verticeAngle(){return Yk(this.verticeRotation)}set verticeAngle(t){this.verticeRotation=Hk(t)}setVerticeAngle(t){return this.verticeAngle=t,this}}const $k={right:0,down:1,left:2,up:3};var _k=function(e){return typeof e=="string"&&(e=$k[e]),e=e%4,e};Object.assign(Cd.prototype,zk,Wk),c.register("triangle",function(e,t,s,f,C,w){var F=new Cd(this.scene,e,t,s,f,C,w);return this.scene.add.existing(F),F}),j(window,"RexPlugins.UI.Triangle",Cd),ct();const Zk=Phaser.GameObjects.Zone,Kk=Phaser.Utils.Array.Add,Jk=Phaser.Utils.Array.Remove;let Md=class extends Zk{constructor(t,s,f,C,w){s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=1),w===void 0&&(w=1),super(t,s,f,C,w),this.children=[]}destroy(t){if(!(!this.scene||this.ignoreDestroy)){if(t)for(var s,f=this.children.length-1;f>=0;f--)s=this.children[f],!s.parentContainer&&!s.displayList&&s.destroy(t);this.clear(!t),super.destroy(t)}}contains(t){return this.children.indexOf(t)!==-1}add(t){var s=this;return Kk(this.children,t,0,function(f){f.once("destroy",s.onChildDestroy,s)},this),this}remove(t,s){var f=this;return Jk(this.children,t,function(C){C.off("destroy",f.onChildDestroy,f),s&&C.destroy()}),this}onChildDestroy(t,s){this.remove(t,!1)}clear(t){for(var s=this,f,C=0,w=this.children.length;C<w;C++)f=this.children[C],f.off("destroy",s.onChildDestroy,s),t&&f.destroy();return this.children.length=0,this}};const qE=Phaser.GameObjects.Components;Phaser.Class.mixin(Md,[qE.Alpha,qE.Flip]);var un=function(e,t){var s;if(t===void 0)e.hasOwnProperty("rexContainer")&&(s=e.rexContainer.parent);else for(s=un(e);s&&s.name!==t;)s=un(s);return s},tP=function(e){for(var t=un(e);t;)e=t,t=un(t);return e};const Qk=Phaser.Math.DegToRad,jk=Phaser.Math.RadToDeg;var Re=function(e){if(!e.hasOwnProperty("rexContainer")){var t={parent:null,self:null,layer:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,syncScrollFactor:!0,syncCameraFilter:!0,syncDisplayList:!0,visible:!0,active:!0};Object.defineProperty(t,"angle",{get:function(){return jk(this.rotation)},set:function(s){this.rotation=Qk(s)}}),Object.defineProperty(t,"displayWidth",{get:function(){return e.width*this.scaleX},set:function(s){this.scaleX=s/e.width}}),Object.defineProperty(t,"displayHeight",{get:function(){return e.height*this.scaleY},set:function(s){this.scaleY=s/e.height}}),e.rexContainer=t}return e.rexContainer},qk={setParent(e,t){t===void 0&&(t=this);var s=Re(e);return t?(s.parent=t,s.self=e):(s.parent=null,s.self=null),this},getParent(e,t){return typeof e=="string"&&(t=e,e=void 0),e===void 0&&(e=this),un(e,t)},getTopmostParent(e){return e===void 0&&(e=this),tP(e)}};const th=Phaser.Utils.Objects.GetValue,eP=Md.prototype.add;var iP=function(e,t){this.setParent(e);var s=Re(e);return sP(s,t),this.resetChildState(e).updateChildVisible(e).updateChildActive(e).updateChildScrollFactor(e).updateChildMask(e).updateCameraFilter(e),eP.call(this,e),nP.call(this,e,s),this},I0=function(e,t){this.setParent(e);var s=Re(e);return sP(s,t),s.x=e.x,s.y=e.y,s.rotation=e.rotation,s.scaleX=e.scaleX,s.scaleY=e.scaleY,s.alpha=e.alpha,s.visible=e.visible,s.active=e.active,this.updateChildPosition(e).updateChildAlpha(e).updateChildVisible(e).updateChildActive(e).updateChildScrollFactor(e).updateChildMask(e),eP.call(this,e),nP.call(this,e,s),this},sP=function(e,t){t===void 0&&(t=!0),typeof t=="boolean"?(e.syncPosition=t,e.syncRotation=t,e.syncScale=t,e.syncAlpha=t,e.syncScrollFactor=t,e.syncCameraFilter=t,e.syncDisplayList=t):(e.syncPosition=th(t,"syncPosition",!0),e.syncRotation=th(t,"syncRotation",!0),e.syncScale=th(t,"syncScale",!0),e.syncAlpha=th(t,"syncAlpha",!0),e.syncScrollFactor=th(t,"syncScrollFactor",!0),e.syncCameraFilter=th(t,"syncCameraFilter",!0),e.syncDisplayList=th(t,"syncDisplayList",!0))},nP=function(e,t){this.addToParentContainer(e),t.syncDisplayList&&this.addToPatentLayer(e),this.addToRenderLayer(e)},t8={add(e){return Array.isArray(e)?this.addMultiple(e):iP.call(this,e),this},pin(e,t){return Array.isArray(e)?this.addMultiple(e,t):iP.call(this,e,t),this},addMultiple(e){for(var t=Array.from(arguments),s=0,f=e.length;s<f;s++)t[0]=e[s],this.add.apply(this,t);return this},addLocal(e){return Array.isArray(e)?this.addMultiple(e):I0.call(this,e),this},pinLocal(e,t){return Array.isArray(e)?this.addMultiple(e,t):I0.call(this,e,t),this},addLocalMultiple(e){for(var t=0,s=e.length;t<s;t++)I0.call(this,e[t]);return this}};const rP=Md.prototype.remove,e8=Md.prototype.clear;var i8={remove(e,t){return un(e)!==this?this:(this.setParent(e,null),t||this.removeFromRenderLayer(e),rP.call(this,e,t),this)},unpin(e,t){return un(e)!==this?this:(this.setParent(e,null),t||this.removeFromRenderLayer(e),rP.call(this,e,t),this)},clear(e){for(var t=this.children,s=0,f=t.length;s<f;s++){var C=t[s];this.setParent(C,null),e||this.removeFromRenderLayer(C)}return e8.call(this,e),this}},s8={getLocalState(e){return Re(e)},resetChildState(e){return this.resetChildPositionState(e).resetChildVisibleState(e).resetChildAlphaState(e).resetChildActiveState(e),this},resetChildrenState(e){for(var t=0,s=e.length;t<s;t++)this.resetChildState(e[t]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}},n8={worldToLocal(e){e.x-=this.x,e.y-=this.y;var t=Math.cos(-this.rotation),s=Math.sin(-this.rotation),f=e.x,C=e.y;return e.x=f*t-C*s,e.y=f*s+C*t,e.x/=this.scaleX,e.y/=this.scaleY,e},localToWorld(e){e.x*=this.scaleX,e.y*=this.scaleY;var t=Math.cos(this.rotation),s=Math.sin(this.rotation),f=e.x,C=e.y;return e.x=f*t-C*s,e.y=f*s+C*t,e.x+=this.x,e.y+=this.y,e}},Ed=function(e,t){return e===t?1:e/t},r8={updateChildPosition(e){e.isRexContainerLite&&(e.syncChildrenEnable=!1);var t=Re(e),s=t.parent;return t.syncPosition&&(e.x=t.x,e.y=t.y,s.localToWorld(e)),t.syncRotation&&(e.rotation=t.rotation+s.rotation),t.syncScale&&(e.scaleX=t.scaleX*s.scaleX,e.scaleY=t.scaleY*s.scaleY),e.isRexContainerLite&&(e.syncChildrenEnable=!0,e.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(e){var t=Re(e),s=t.parent;return t.x=e.x,t.y=e.y,s.worldToLocal(t),t.scaleX=Ed(e.scaleX,s.scaleX),t.scaleY=Ed(e.scaleY,s.scaleY),t.rotation=e.rotation-s.rotation,this},setChildPosition(e,t,s){return e.x=t,e.y=s,this.resetChildPositionState(e),this},setChildLocalPosition(e,t,s){var f=Re(e);return f.x=t,f.y=s,this.updateChildPosition(e),this},resetLocalPositionState(){var e=Re(this).parent;return e&&e.resetChildPositionState(this),this},getChildLocalX(e){var t=Re(e);return t.x},getChildLocalY(e){var t=Re(e);return t.y}};const a8=Phaser.Math.DegToRad;var o8={updateChildRotation(e){var t=Re(e),s=t.parent;return t.syncRotation&&(e.rotation=s.rotation+t.rotation),this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(e){var t=Re(e),s=t.parent;return t.rotation=e.rotation-s.rotation,this},setChildRotation(e,t){return e.rotation=t,this.resetChildRotationState(e),this},setChildAngle(e,t){return e.angle=t,this.resetChildRotationState(e),this},setChildLocalRotation(e,t){var s=Re(e);return s.rotation=t,this.updateChildRotation(e),this},setChildLocalAngle(e,t){var s=Re(e);return s.rotation=a8(t),this.updateChildRotation(e),this},resetLocalRotationState(){var e=Re(this).parent;return e&&e.resetChildRotationState(this),this},getChildLocalRotation(e){var t=Re(e);return t.rotation}},h8={updateChildScale(e){var t=Re(e),s=t.parent;return t.syncScale&&(e.scaleX=s.scaleX*t.scaleX,e.scaleY=s.scaleY*t.scaleY),this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(e){var t=Re(e),s=t.parent;return t.scaleX=Ed(e.scaleX,s.scaleX),t.scaleY=Ed(e.scaleY,s.scaleY),this},setChildScale(e,t,s){return s===void 0&&(s=t),e.scaleX=t,e.scaleY=s,this.resetChildScaleState(e),this},setChildLocalScale(e,t,s){s===void 0&&(s=t);var f=Re(e);return f.scaleX=t,f.scaleY=s,this.updateChildScale(e),this},setChildDisplaySize(e,t,s){return e.setDisplaySize(t,s),this.resetChildScaleState(e),this},resetLocalScaleState(){var e=Re(this).parent;return e&&e.resetChildScaleState(this),this},getChildLocalScaleX(e){var t=Re(e);return t.scaleX},getChildLocalScaleY(e){var t=Re(e);return t.scaleY}},l8={updateChildVisible(e){var t=Re(e),s=t.parent,f=t.hasOwnProperty("maskVisible")?t.maskVisible:!0,C=s?s.visible:!0;return e.visible=C&&t.visible&&f,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(e){var t=Re(e);return t.hasOwnProperty("maskVisible")&&delete t.maskVisible,t.visible=e.visible,this},setChildVisible(e,t){return this.setChildLocalVisible(e,t),this},setChildLocalVisible(e,t){t===void 0&&(t=!0);var s=Re(e);return s.visible=t,this.updateChildVisible(e),this},setChildMaskVisible(e,t){t===void 0&&(t=!0);var s=Re(e);return s.maskVisible=t,this.updateChildVisible(e),this},resetLocalVisibleState(){var e=Re(this).parent;return e&&e.resetChildVisibleState(this),this},getChildLocalVisible(e){var t=Re(e);return t.visible}},u8={updateChildAlpha(e){var t=Re(e),s=t.parent;return t.syncAlpha&&(e.alpha=s.alpha*t.alpha),this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(e){var t=Re(e),s=t.parent;return t.alpha=Ed(e.alpha,s.alpha),this},setChildAlpha(e,t){return e.alpha=t,this.resetChildAlphaState(e),this},setChildLocalAlpha(e,t){var s=Re(e);return s.alpha=t,this.updateChildAlpha(e),this},resetLocalAlphaState(){var e=Re(this).parent;return e&&e.resetChildAlphaState(this),this},getChildLocalAlpha(e){var t=Re(e);return t.alpha}},d8={updateChildActive(e){var t=Re(e),s=t.parent;return e.active=s.active&&t.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(e){var t=Re(e);return t.active=e.active,this},setChildActive(e,t){return e.active=t,this.resetChildActiveState(e),this},setChildLocalActive(e,t){t===void 0&&(t=!0);var s=Re(e);return s.active=t,this.updateChildActive(e),this},resetLocalActiveState(){var e=Re(this).parent;return e&&e.resetChildActiveState(this),this},getChildLocalActive(e){var t=Re(e);return t.active}},f8={updateChildScrollFactor(e){var t=Re(e),s=t.parent;return t.syncScrollFactor&&(e.scrollFactorX=s.scrollFactorX,e.scrollFactorY=s.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},c8={updateCameraFilter(e){var t=Re(e),s=t.parent;return t.syncCameraFilter&&(e.cameraFilter=s.cameraFilter),this},syncCameraFilter(){return this.syncChildrenEnable&&this.children.forEach(this.updateCameraFilter,this),this}},p8={updateChildMask(e){if(this.mask==null)return this;var t=this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask;return t!==e&&(e.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(e){return this.mask=e,this},clearMask(e){e===void 0&&(e=!1);var t=this;return this._mask=null,this.setChildMaskVisible(this),this.children.forEach(function(s){s.clearMask&&s.clearMask(!1),s.hasOwnProperty("isRexContainerLite")||t.setChildMaskVisible(s)}),e&&this.mask&&this.mask.destroy(),this}},np=function(e){return e.filter(function(t){if(t.displayList)return!0;if(t.parentContainer)return!0})},v8={setDepth(e,t){if(this.depth=e,!t&&this.children)for(var s=this.getAllChildren(),f=0,C=s.length;f<C;f++)s[f].depth=e;return this},swapDepth(e){var t=this.depth,s=e.depth;return this.setDepth(s),e.setDepth(t),this},incDepth(e){if(this.depth+=e,this.children)for(var t=this.getAllChildren(),s=0,f=t.length;s<f;s++)t[s].depth+=e;return this},bringToTop(){var e=this.displayList;if(!e)return this;var t=this.getAllChildren([this]);En(t,!1);for(var s=0,f=t.length;s<f;s++){var C=t[s];e.exists(C)&&e.bringToTop(C)}return this},bringMeToTop(){return this.bringToTop()},sendToBack(){var e=this.displayList;if(!e)return this;var t=this.getAllChildren([this]);En(t,!0);for(var s=0,f=t.length;s<f;s++){var C=t[s];e.exists(C)&&e.sendToBack(C)}return this},sendMeToBack(){return this.sendToBack()},moveDepthBelow(e){var t=this.displayList;if(!t)return this;if(e.displayList!==t)return this;var s=this.getAllChildren([this]);En(s,!1);for(var f=0,C=s.length;f<C;f++){var w=s[f];if(t.exists(w)){t.moveBelow(e,w);break}}return this},moveMyDepthBelow(e){return this.moveDepthBelow(e)},moveDepthAbove(e){var t=this.displayList;if(!t)return this;if(e.displayList!==t)return this;var s=this.getAllChildren([this]);En(s,!0);for(var f=0,C=s.length;f<C;f++){var w=s[f];if(t.exists(w)){t.moveAbove(e,w);break}}return this},moveMyDepthAbove(e){return this.moveDepthAbove(e)},bringChildToTop(e){var t;e!==this&&e.isRexContainerLite?(t=e.getAllChildren([e]),t=np(t),t=En(t,!1)):t=[e];var s=this.getAllChildren([this]);s=np(s),s=En(s,!1);for(var f=s[s.length-1],C=0,w=t.length;C<w;C++){var F=t[C];f!==F&&(F!==this&&f.displayList!==F.displayList||(f.displayList.moveAbove(F,f),f=F))}return this},sendChildToBack(e){var t;e!==this&&e.isRexContainerLite?(t=e.getAllChildren([e]),t=np(t),t=En(t,!1)):t=[e];var s=this.getAllChildren([this]);s=np(s),s=En(s,!1);for(var f=s[0],C=t.length-1;C>=0;C--){var w=t[C];f!==w&&(w!==this&&f.displayList!==w.displayList||(f.displayList.moveBelow(w,f),f=w))}return this}},aP=function(e,t){var s=t(e);if(!s&&e.isRexContainerLite)for(var f=e.children,C=0,w=f.length;C<w;C++)aP(f[C],t)},B0=function(e,t){for(var s=[e];s.length>0;){var f=s.shift(),C=t(f);!C&&f.isRexContainerLite&&s.push(...f.children)}};const eh=Phaser.Utils.Array;var m8={getChildren(e){if(!e)e=this.children;else for(var t=0,s=this.children.length;t<s;t++)e.push(this.children[t]);return e},getAllChildren(e){e===void 0&&(e=[]);var t=this;return B0(t,function(s){s!==t&&e.push(s)}),e},getAllVisibleChildren(e){e===void 0&&(e=[]);var t=this;return B0(t,function(s){if(s!==t){if(!s.visible)return!0;e.push(s)}}),e},bfs(e,t){return t===void 0&&(t=this),B0(t,e),this},dfs(e,t){return t===void 0&&(t=this),aP(t,e),this},contains(e){var t=un(e);return t?t===this?!0:this.contains(t):!1},getByName(e,t){if(t){for(var s=[this],f,C;s.length;){f=s.shift();for(var w=0,F=f.children.length;w<F;w++){if(C=f.children[w],C.name===e)return C;C.isRexContainerLite&&s.push(C)}}return null}else return eh.GetFirst(this.children,"name",e)},getRandom(e,t){return eh.GetRandom(this.children,e,t)},getFirst(e,t,s,f){return eh.GetFirstElement(this.children,e,t,s,f)},getAll(e,t,s,f){return eh.GetAll(this.children,e,t,s,f)},count(e,t,s,f){return eh.CountAllMatching(this.children,e,t,s,f)},swap(e,t){return eh.Swap(this.children,e,t),this},setAll(e,t,s,f){return eh.SetAll(this.children,e,t,s,f),this}},oP=function(e){for(var t=[],s=0,f=e.length;s<f;s++){var C=e[s];C.hasOwnProperty("rexContainer")&&t.push(C.rexContainer)}return t},g8=function(e){for(var t=0,s=e.length;t<s;t++){var f=e[t].scene;if(f)return f}return null},hP=function(e,t,s){if(!s.parent){e.remove();return}var f=s.parent,C=s.self;switch(t){case"x":case"y":f.updateChildPosition(C);break;case"angle":case"rotation":f.updateChildRotation(C);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":f.updateChildScale(C);break;case"alpha":f.updateChildAlpha(C);break;default:f.updateChildPosition(C),f.updateChildRotation(C),f.updateChildScale(C),f.updateChildAlpha(C);break}},x8={tweenChild(e){var t=e.targets;Array.isArray(t)||(t=[t]);var s=this.scene||g8(t);if(s){e.targets=oP(t);var f=s.tweens.add(e);return f.on("update",hP),f}},tweenSelf(e){return e.targets=[this],this.tweenChild(e)},createTweenChildConfig(e){var t=e.targets;t&&(Array.isArray(t)||(t=[t]),e.targets=oP(t));var s=e.onUpdate;return e.onUpdate=function(f,C){s&&s(f,C),hP(f,void 0,C)},e},tween(e){var t=this.scene;return e.targets||(e.targets=this),t.tweens.add(e)}};const y8=Phaser.GameObjects.Container;var S8=function(e){return e instanceof y8},lP=function(e){var t=e.getAllChildren([e]);return t=t.filter(function(s){return!!s.displayList||!!s.parentContainer}),t},uP=function(e){var t=lP(this);t.indexOf(this)===-1&&t.push(this),En(t),e.add(t)},dP=function(e,t,s){if(this.scene){var f=lP(this);En(f,t),e.remove(f),s&&f.forEach(function(C){C.addToDisplayList()})}},T8={addToContainer(e){return S8(e)?(this._setParentContainerFlag=!0,uP.call(this,e),this._setParentContainerFlag=!1,this):this},addToLayer(e){return rd(e)?(uP.call(this,e),this):this},removeFromContainer(){return this.parentContainer?(this._setParentContainerFlag=!0,dP.call(this,this.parentContainer,!0,!1),this._setParentContainerFlag=!1,this):this},removeFromLayer(e){return e===void 0&&(e=!0),rd(this.displayList)?(dP.call(this,this.displayList,!1,e),this):this},getParentContainer(){if(this.parentContainer)return this.parentContainer;for(var e=this.getParent();e;){var t=e.parentContainer;if(t)return t;e=e.getParent()}return null},addToParentContainer(e){if(!e.displayList)return this;var t=this.getParentContainer();return t?(e.isRexContainerLite?e.addToContainer(t):t.add(e),this):this},addToPatentLayer(e){if(!e.displayList)return this;var t=this.displayList;return t===e.displayList?this:(rd(t)&&(e.isRexContainerLite?e.addToLayer(t):t.add(e)),this)}},C8={hasLayer(){return!!this.privateRenderLayer},enableLayer(){if(this.hasLayer())return this;var e=this.scene.add.layer();return this.moveDepthBelow(e),this.addToLayer(e),this.privateRenderLayer=e,this},getLayer(){return this.hasLayer()||this.enableLayer(),this.privateRenderLayer},getRenderLayer(){if(this.hasLayer())return this.privateRenderLayer;for(var e=this.getParent();e;){var t=e.privateRenderLayer;if(t)return t;e=e.getParent()}return null},addToRenderLayer(e){if(!e.displayList)return this;var t=this.getRenderLayer();if(!t)return this;if(t===e.displayList)return this;e.isRexContainerLite?e.addToLayer(t):t.add(e);var s=Re(e);return s.layer=t,this},removeFromRenderLayer(e){var t=Re(e),s=t.layer;return s?(e.isRexContainerLite?e.removeFromLayer(!0):s.remove(e),t.layer=null,this):this}};const fP=Phaser.Geom.Rectangle,M8=Phaser.Geom.Rectangle.Union;var E8=function(e,t){t===void 0?t=new fP:t===!0&&(N0===void 0&&(N0=new fP),t=N0),t.setTo(0,0,0,0);for(var s,f=!0,C=0,w=e.length;C<w;C++)if(s=e[C],!!s.getBounds){var F=Qg(s,!0);f?(t.setTo(F.x,F.y,F.width,F.height),f=!1):M8(F,t,t)}return t},N0,ih=Phaser.Utils.Objects.GetValue,G0=function(e){if(e){var t=e.gameObjects,s=e.renderTexture,f=e.saveTexture,C=ih(e,"x",void 0),w=ih(e,"y",void 0),F=ih(e,"width",void 0),N=ih(e,"height",void 0),z=ih(e,"originX",0),H=ih(e,"originY",0),Z=ih(e,"padding",0),tt,nt;if(F===void 0||N===void 0||C===void 0||w===void 0){var st=E8(t,!0),ht=C!==void 0&&w!==void 0;ht?(F=Math.max(C-st.left,st.right-C)*2,N=Math.max(w-st.top,st.bottom-w)*2,z=.5,H=.5):(C=st.x,w=st.y,F=st.width,N=st.height,z=0,H=0),tt=st.x,nt=st.y}else tt=C+(0-z)*F,nt=w+(0-H)*N;tt-=Z,nt-=Z,F+=Z*2,N+=Z*2;var ft=t[0].scene,dt=ft.sys.textures;return f&&!s&&(s=dt.addDynamicTexture(f,F,N)),s||(s=ft.add.renderTexture(0,0,F,N)),s.setPosition&&s.setPosition(C,w),(s.width!==F||s.height!==N)&&s.setSize(F,N),s.setOrigin&&s.setOrigin(z,H),s.camera.setScroll(tt,nt),t=En(Zn(t)),s.draw(t),f&&(Qs(s)?s.saveTexture(f):s.key!==f&&dt.renameTexture(s.key,key)),s}},P8={snapshot(e){var t=this.scaleX,s=this.scaleY,f=t===1&&s===1;f||this.setScale(1),e===void 0&&(e={}),e.gameObjects=this.getAllVisibleChildren(),e.x=this.x,e.y=this.y,e.originX=this.originX,e.originY=this.originY;var C=G0(e),w=!!C.scene;return f||(this.setScale(t,s),w&&C.setScale(t,s)),w?C:this}};const cP=Phaser.Utils.Objects.GetValue;var w8=function(e,t){var s=cP(t,"drawContainer",!0),f=cP(t,"children");return f===void 0&&(f=this.getAllVisibleChildren([this])),s||(f=f.filter(function(C){return!C.isRexContainerLite})),cM(f,e,t),this};const b8=Phaser.Math.RotateAround;var A8=function(e,t,s){s===void 0&&(s=t);var f={x:(t-e.originX)*e.displayWidth,y:(s-e.originY)*e.displayHeight};return b8(f,0,0,e.rotation),e.originX=t,e.originY=s,e.x=e.x+f.x,e.y=e.y+f.y,e},R8=function(e,t){this.syncChildrenEnable=!1,A8(this,e,t),this.syncChildrenEnable=!0;for(var s=this.getAllChildren(),f=0,C=s.length;f<C;f++)this.resetChildPositionState(s[f]);return this},pP={changeOrigin:R8,drawBounds:w8};Object.assign(pP,qk,t8,i8,s8,n8,r8,o8,h8,l8,u8,d8,f8,c8,p8,v8,m8,x8,T8,C8,P8);class dn extends Md{constructor(t,s,f,C,w,F){Array.isArray(C)&&(F=C,C=void 0,w=void 0),super(t,s,f,C,w),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,this._cameraFilter=0,this.privateRenderLayer=void 0,F&&this.add(F)}destroy(t){!this.scene||this.ignoreDestroy||(this.syncChildrenEnable=!1,super.destroy(t),this.privateRenderLayer&&this.privateRenderLayer.scene&&(this.privateRenderLayer.list.length=0,this.privateRenderLayer.destroy()))}resize(t,s){return this.setSize(t,s),this}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.syncPosition())}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.syncPosition())}get rotation(){return super.rotation}set rotation(t){this.rotation!==t&&(super.rotation=t,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(t){this.scaleX!==t&&(super.scaleX=t,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(t){this.scaleY!==t&&(super.scaleY=t,this.syncPosition())}get scale(){return super.scale}set scale(t){this.scale!==t&&(super.scale=t,this.syncPosition())}get visible(){return super.visible}set visible(t){super.visible!==t&&(super.visible=t,this.syncVisible())}get alpha(){return super.alpha}set alpha(t){super.alpha!==t&&(super.alpha=t,this.syncAlpha())}get active(){return this._active}set active(t){this._active!==t&&(this._active=t,this.syncActive())}get mask(){return this._mask}set mask(t){this._mask!==t&&(this._mask=t,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}get cameraFilter(){return this._cameraFilter}set cameraFilter(t){this._cameraFilter!==t&&(this._cameraFilter=t,this.syncCameraFilter())}get list(){return this.children}static GetParent(t){return un(t)}get parentContainer(){return this._parentContainer}set parentContainer(t){if(!this._parentContainer&&!t){this._parentContainer=t;return}if(this.setParentContainerFlag){this._parentContainer=t;return}this._parentContainer&&!t?(this.removeFromContainer(),this._parentContainer=t):t?(this._parentContainer=t,this.addToContainer(t)):this._parentContainer=t}get setParentContainerFlag(){if(this._setParentContainerFlag)return!0;var t=un(this);return t?t.setParentContainerFlag:!1}}Object.assign(dn.prototype,pP);var rp=function(e){return e.hasOwnProperty("rexSizer")||(e.rexSizer={}),e.rexSizer};function L8(e){return e===void 0&&(e=this),rp(e)}var O8=function(e){var t=rp(e);return t.hasOwnProperty("prevState")||(t.prevState={}),t.prevState},F8=function(e){return e===void 0&&(e=hl(this.scene)),this.left=Math.max(this.left,e.left),this.right=Math.min(this.right,e.right),this.top=Math.max(this.top,e.top),this.bottom=Math.min(this.bottom,e.bottom),this};const Fi=Phaser.Display.Align;var Cl={center:Fi.CENTER,left:Fi.LEFT_CENTER,right:Fi.RIGHT_CENTER,top:Fi.TOP_CENTER,bottom:Fi.BOTTOM_CENTER,"left-top":Fi.TOP_LEFT,"top-left":Fi.TOP_LEFT,"left-center":Fi.LEFT_CENTER,"center-left":Fi.LEFT_CENTER,"left-bottom":Fi.BOTTOM_LEFT,"bottom-left":Fi.BOTTOM_LEFT,"center-top":Fi.TOP_CENTER,"top-center":Fi.TOP_CENTER,"center-center":Fi.CENTER,"center-bottom":Fi.BOTTOM_CENTER,"bottom-center":Fi.BOTTOM_CENTER,"right-top":Fi.TOP_RIGHT,"top-right":Fi.TOP_RIGHT,"right-center":Fi.RIGHT_CENTER,"center-right":Fi.RIGHT_CENTER,"right-bottom":Fi.BOTTOM_RIGHT,"bottom-right":Fi.BOTTOM_RIGHT},U0=new Phaser.GameObjects.Zone({sys:{queueDepthSort:a,events:{once:a}}},0,0,1,1);U0.setOrigin(0);var la={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_CENTER:4,CENTER:6,RIGHT_CENTER:8,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12},k0=function(e){var t=Ke(e);return e.y+t-t*e.originY},V0=function(e){var t=Ze(e);return e.x-t*e.originX+t*.5},z0=function(e,t){var s=Ke(e);return e.y=t-s+s*e.originY,e},W0=function(e,t){var s=Ze(e),f=s*e.originX;return e.x=t+f-s*.5,e},D8=function(e,t,s,f){return s===void 0&&(s=0),f===void 0&&(f=0),W0(e,V0(t)+s),z0(e,k0(t)+f),e},X0=function(e){var t=Ze(e);return e.x-t*e.originX},H0=function(e,t){var s=Ze(e);return e.x=t+s*e.originX,e},I8=function(e,t,s,f){return s===void 0&&(s=0),f===void 0&&(f=0),H0(e,X0(t)-s),z0(e,k0(t)+f),e},Y0=function(e){var t=Ze(e);return e.x+t-t*e.originX},$0=function(e,t){var s=Ze(e);return e.x=t-s+s*e.originX,e},B8=function(e,t,s,f){return s===void 0&&(s=0),f===void 0&&(f=0),$0(e,Y0(t)+s),z0(e,k0(t)+f),e},_0=function(e,t){var s=Ke(e),f=s*e.originY;return e.y=t+f-s*.5,e},N8=function(e,t,s){return W0(e,t),_0(e,s)},Z0=function(e){var t=Ke(e);return e.y-t*e.originY+t*.5},G8=function(e,t,s,f){return s===void 0&&(s=0),f===void 0&&(f=0),N8(e,V0(t)+s,Z0(t)+f),e},U8=function(e,t,s,f){return s===void 0&&(s=0),f===void 0&&(f=0),H0(e,X0(t)-s),_0(e,Z0(t)+f),e},k8=function(e,t,s,f){return s===void 0&&(s=0),f===void 0&&(f=0),$0(e,Y0(t)+s),_0(e,Z0(t)+f),e},K0=function(e){var t=Ke(e);return e.y-t*e.originY},J0=function(e,t){var s=Ke(e);return e.y=t+s*e.originY,e},V8=function(e,t,s,f){return s===void 0&&(s=0),f===void 0&&(f=0),W0(e,V0(t)+s),J0(e,K0(t)-f),e},z8=function(e,t,s,f){return s===void 0&&(s=0),f===void 0&&(f=0),H0(e,X0(t)-s),J0(e,K0(t)-f),e},W8=function(e,t,s,f){return s===void 0&&(s=0),f===void 0&&(f=0),$0(e,Y0(t)+s),J0(e,K0(t)-f),e},Pr=[];Pr[la.BOTTOM_CENTER]=D8,Pr[la.BOTTOM_LEFT]=I8,Pr[la.BOTTOM_RIGHT]=B8,Pr[la.CENTER]=G8,Pr[la.LEFT_CENTER]=U8,Pr[la.RIGHT_CENTER]=k8,Pr[la.TOP_CENTER]=V8,Pr[la.TOP_LEFT]=z8,Pr[la.TOP_RIGHT]=W8;var vP=function(e,t,s,f,C){return Pr[s](e,t,f,C)},Pd=function(e,t,s,f,C,w){U0.setPosition(t,s).setSize(f,C),vP(e,U0,w)};const Ml=Phaser.Utils.Objects.GetValue,X8=Phaser.GameObjects.Group,H8=Phaser.GameObjects.Container;var Y8=function(e,t){var s=e.scene,f,C,w,F,N;if(typeof t=="number")f=t;else{f=Ml(t,"color"),C=Ml(t,"lineWidth");var z=Ml(t,"name",!1);z&&(w=Ml(z,"createTextCallback",$8),F=Ml(z,"createTextCallbackScope",void 0),N=Ml(z,"align","left-top"),typeof N=="string"&&(N=Cl[N]))}if(f===void 0&&(f=16777215),C===void 0&&(C=1),w&&!e.children){e.children=new X8(s),e.once("destroy",function(ft,dt){ft.children.destroy(!dt),ft.children=void 0});var H=e.clear.bind(e);e.clear=function(){H(),e.children.clear(!1,!0)}}var Z=this.getAllShownChildren([this]);mP(Z,Z);for(var tt,nt,st=0,ht=Z.length;st<ht;st++){if(tt=Z[st],tt.getBounds||tt.width!==void 0&&tt.height!==void 0)sh=Qg(tt,sh);else continue;f!=null&&e.lineStyle(C,f).strokeRectShape(sh),tt.name&&w&&(F?nt=w.call(F,s):nt=w(s),nt&&(nt.setText(tt.name),e.children.add(nt),Pd(nt,sh.x,sh.y,sh.width,sh.height,N)))}return this},$8=function(e,t,s){return e.add.text(0,0,"")},mP=function(e,t){Array.isArray(e)||(e=[e]),t===void 0&&(t=[]);for(var s=0,f=e.length;s<f;s++){var C=e[s];C instanceof H8&&(t.push(...C.list),mP(C.list,t))}return t},sh=void 0;const ap=Phaser.Utils.Objects.GetValue;var nh=function(e,t){return e===void 0&&(e=0),t===void 0&&(t={}),typeof e=="number"?(t.left=e,t.right=e,t.top=e,t.bottom=e):(t.left=ap(e,"left",0),t.right=ap(e,"right",0),t.top=ap(e,"top",0),t.bottom=ap(e,"bottom",0)),t};const _8=dn.prototype.add;var wd=function(e){return _8.call(this,e),this.sizerEventsEnable&&(e.emit("sizer.add",e,this),this.emit("add",e,this)),this},Z8={addBackground(e,t,s){this.backgroundChildren===void 0&&(this.backgroundChildren=[]),typeof t=="string"&&(s=t,t=void 0),t===void 0&&(t=0),wd.call(this,e),this.backgroundChildren.push(e);var f=this.getSizerConfig(e);return f.padding=nh(t),s!==void 0&&this.addChildrenMap(s,e),this},isBackground(e){return this.backgroundChildren===void 0?!1:this.backgroundChildren.indexOf(e)!==-1}},ja=function(e,t){var s=null;if(t===void 0)e.hasOwnProperty("rexContainer")&&(s=e.rexContainer.parent,s?s.isRexSizer||(s=ja(s)):s=null);else for(s=ja(e);s&&s.name!==t;)s=ja(s);return s},K8=function(e){for(var t=ja(e);t;)e=t,t=ja(t);return e},El={getParentSizer(e,t){return typeof e=="string"&&(t=e,e=void 0),e===void 0&&(e=this),ja(e,t)},getTopmostSizer(e){return e===void 0&&(e=this),K8(e)},hasParentSizer(e,t){t===void 0&&(t=this);for(var s=ja(t);s;){if(s===e)return!0;s=ja(s)}return!1},hasChild(e,t){return t===void 0&&(t=this),this.hasParentSizer(t,e)}};const J8=Phaser.Utils.Array.Remove,Q8=dn.prototype.remove,gP=El.getParentSizer;var bd=function(e,t){for(var s=gP(e);s;)s.removeChildCallback&&s.removeChildCallback(e,t),s=gP(s);return this.isBackground(e)&&J8(this.backgroundChildren,e),Q8.call(this,e,t),!t&&this.sizerEventsEnable&&(e.emit("sizer.remove",e,this),this.emit("remove",e,this)),this};const j8=Phaser.Utils.Array.Remove,q8=El.getParentSizer;var tV={removeFromParentSizer(){var e=q8(gameObject);return e&&e.remove(this),this},removeBackground(e,t){return this.backgroundChildren===void 0?this:this.getParentSizer(e)!==this?this:(j8(this.backgroundChildren,e),bd.call(this,e,t),this)},removeAllBackgrounds(e){if(this.backgroundChildren===void 0)return this;for(var t=this.backgroundChildren.length-1;t>=0;t--)this.remove(this.backgroundChildren[t],e);return this}},xP=function(e,t){if(typeof e=="string")this.childrenMap[e]=t;else{var s=e;for(e in s)this.childrenMap[e]=s[e]}return this},eV=function(e){if(typeof e=="object"){var t=e;for(var e in this.childrenMap)if(this.childrenMap[e]===t)return delete this.childrenMap[e],this}return delete this.childrenMap[e],this},iV=function(e,t){if(typeof e=="string"&&(e=e.split(".")),e.length!==0){t===void 0&&(t=!1);var s=e.shift(),f=null;if(s.charAt(0)==="#")s=s.substring(1),f=this.getByName(s,t);else if(e.length===0&&t){var C=this.childrenMap;if(C)for(var w=[C],F;w.length;){C=w.shift();for(var N in C)if(F=C[N],N===s){f=F;break}else F&&typeof F=="object"&&F.childrenMap&&w.push(F.childrenMap);if(f)break}}else if(s.indexOf("[")===-1)this.childrenMap&&(f=this.childrenMap[s]);else{var z=s.match(sV);if(z!=null&&this.childrenMap){var H=this.childrenMap[z[1]];H&&(f=H[z[2]])}}return e.length===0?f:f&&f.childrenMap?f.getElement(e):null}};const sV=/(\S+)\[(\d+)\]/i;var nV=function(e){if(Array.isArray(this.sizerChildren)){var t=this.sizerChildren.indexOf(e);return t===-1&&(t=null),t}else{if(this.getParentSizer(e)!==this)return null;for(var s in this.sizerChildren)if(this.sizerChildre[s]===e)return s;return null}},rV={getInnerPadding(e){return Tc(this.space,e)},setInnerPadding(e,t){return Ha(this.space,e,t),this},getOuterPadding(e){return Tc(this.getSizerConfig(this).padding,e)},setOuterPadding(e,t){return Ha(this.getSizerConfig(this).padding,e,t),this},getChildOuterPadding(e,t){return typeof e=="string"&&(e=this.getElement(e)),Tc(this.getSizerConfig(e).padding,t)},setChildOuterPadding(e,t,s){return typeof e=="string"&&(e=this.getElement(e)),Ha(this.getSizerConfig(e).padding,t,s),this}},Q0=function(e){var t=this.childrenWidth;if(t!==void 0){var s=this.minWidth!==void 0?this.minWidth*this.scaleX:0;return e===void 0?(e=Math.max(s,t),this.layoutWarnEnable&&s>0&&t>s&&console.warn(`Layout width warn: ${this.constructor.name}'s minWidth (${s}) < childrenWidth (${t})`)):this.layoutWarnEnable&&(s>e||t>e)&&console.warn(`Layout width warn: ${this.constructor.name}'s minWidth (${s}) or childrenWidth (${t} > targetWidth ${e})`),e}},j0=function(){var e;for(var t in this.sizerChildren)if(e=this.sizerChildren[t],!(!e||e.isRexSizer&&e.ignoreLayout||!e.runWidthWrap)&&(!e.hasWidthWrap||e.hasWidthWrap()))return!0;return!1},aV=function(e){var t,s,f;for(var C in this.sizerChildren)t=this.sizerChildren[C],t&&t.isRexSizer&&!t.ignoreLayout&&(s=this.getExpandedChildWidth(t,e),f=t.resolveWidth(s),f===void 0&&(f=s),t.resolveChildrenWidth(f))},q0=function(e){var t,s,f;for(var C in this.sizerChildren)t=this.sizerChildren[C],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(s=this.getExpandedChildWidth(t,e),t.isRexSizer?(f=t.resolveWidth(s),f===void 0&&(f=s)):f=s,t.runWidthWrap(f));return this},tx=function(e){var t=this.childrenHeight;if(t!==void 0){var s=this.minHeight!==void 0?this.minHeight*this.scaleY:0;return e===void 0?(e=Math.max(s,t),this.layoutWarnEnable&&s>0&&t>s&&console.warn(`Layout height warn: ${this.constructor.name}'s minHeight (${s}) < childrenHeight (${t})`)):this.layoutWarnEnable&&(s>e||t>e)&&console.warn(`Layout height warn: ${this.constructor.name}'s minHeight (${s}) or childrenHeight (${t}) > targetHeight (${e})`),e}},ex=function(){var e;for(var t in this.sizerChildren)if(e=this.sizerChildren[t],!(!e||e.isRexSizer&&e.ignoreLayout||!e.runHeightWrap)&&(!e.hasHeightWrap||e.hasHeightWrap()))return!0;return!1},oV=function(e){var t,s,f;for(var C in this.sizerChildren)t=this.sizerChildren[C],t&&t.isRexSizer&&!t.ignoreLayout&&(s=this.getExpandedChildHeight(t,e),f=t.resolveHeight(s),f===void 0&&(f=s),t.resolveChildrenHeight(f))},ix=function(e){var t,s,f;for(var C in this.sizerChildren)t=this.sizerChildren[C],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runHeightWrap)&&(s=this.getExpandedChildHeight(t,e),t.isRexSizer?(f=t.resolveHeight(s),f===void 0&&(f=s)):f=s,t.runHeightWrap(f));return this},hV=function(e){var t;if(e.isRexSizer){var s=e.childrenWidth;if(s==null)return;var f=e.minWidth*e.scaleX;t=Math.max(f,s)}else e.minWidth!==void 0?t=e.minWidth:e._minWidth!==void 0?t=e._minWidth:t=Ze(e);return t},lV=function(e){var t;if(e.isRexSizer){var s=e.childrenHeight;if(s===void 0)return;var f=e.minHeight*e.scaleY;t=Math.max(f,s)}else e.minHeight!==void 0?t=e.minHeight:e._minHeight!==void 0?t=e._minHeight:t=Ke(e);return t},uV=function(e,t){return t},dV=function(e,t){return t},fV=function(){return 0},cV=function(){return 0},pV=function(e){e===void 0&&(e=[]);for(var t=e.length,s=this.getChildrenSizers(e),f=e.length,C=t;C<f;C++)s[C].getAllChildrenSizers(e);return e},vV=function(e){return e===void 0&&(e=[]),e},mV={getShownChildren(e){e===void 0&&(e=[]);for(var t=this.children,s,f=0,C=t.length;f<C;f++)s=t[f],!(s.rexSizer&&s.rexSizer.hidden)&&e.push(s);return e},getAllShownChildren(e){e===void 0&&(e=[]);for(var t=[this];t.length>0;){var s=t.shift();s.rexSizer&&s.rexSizer.hidden||(s!==this&&e.push(s),s.isRexContainerLite&&t.push(...s.children))}return e}},Ad=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var e=this.getChildrenSizers(),t,s=0,f=e.length;s<f;s++)t=e[s],!t.ignoreLayout&&t.preLayout()},gV=function(){return this.runLayout(),this},xV=function(e){if(e.resize)return!0;if(!e.setSize)return!1;for(var t=0,s=yP.length;t<s;t++){var f=yP[t];if(f&&e instanceof f)return!1}return!0},yP=[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Mesh,Phaser.GameObjects.Shader,Phaser.GameObjects.Video],yV=function(e){if(e.displayWidth===void 0)return!1;for(var t=0,s=SP.length;t<s;t++){var f=SP[t];if(f&&e instanceof f)return!1}return!0},SP=[Phaser.GameObjects.BitmapText],Ms=function(e,t,s){if(!(!e||t===void 0&&s===void 0))if(xV(e)){var f,C;t===void 0?f=e.width:f=t/e.scaleX,s===void 0?C=e.height:C=s/e.scaleY,e.resize?e.resize(f,C):e.setSize(f,C)}else{var w=yV(e);t!==void 0&&(w?e.displayWidth=t:e.scaleX=t/e.width),s!==void 0&&(w?e.displayHeight=s:e.scaleY=s/e.height)}},SV=function(e,t,s){if(this.ignoreLayout)return this;var f=!e;f&&this.preLayout();var C,w;f||e.runChildrenWrapFlag?(C=this.hasWidthWrap(),w=this.hasHeightWrap()):(C=!1,w=!1);var F=TV(this,t,s,C,w);F||console.error("Can't resolve size of ",this);var N=F.width,z=F.height;return Ms(this,N,z),this.sizerEventsEnable&&this.layoutedChildren===void 0&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this.postLayout(e,N,z),f&&this._anchor&&this._anchor.updatePosition(),this},TV=function(e,t,s,f,C){var w=TP(e,t,f),F=CV(e,s,C);return w===void 0&&(w=TP(e,t,f)),w!==void 0&&F!==void 0?{width:w,height:F}:!1},TP=function(e,f,s){var f=e.resolveWidth(f);return f!==void 0&&s&&(e.resolveChildrenWidth(f),e.runWidthWrap(f)),f},CV=function(e,f,s){var f=e.resolveHeight(f);return f!==void 0&&s&&(e.resolveChildrenHeight(f),e.runHeightWrap(f)),f},MV=function(){},EV=function(e,t,s){return this},PV=function(e,t,s,f){Ms(s,e,t)};const op=Phaser.Utils.Objects.GetValue;class sx extends Si{constructor(t,s){super(t,{eventEmitter:!1}),this.viewport=void 0,this.resetFromJSON(s)}shutdown(t){this.isShutdown||(this.autoAnchor(!1),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(t))}resetFromJSON(t){t===void 0&&(t={});var s,f;t.x!==void 0?(s=null,f=t.x):t.left!==void 0?(s=0,f=t.left):t.right!==void 0?(s=1,f=t.right):t.centerX!==void 0&&(s=.5,f=t.centerX);var C,w;t.y!==void 0?(C=null,w=t.y):t.top!==void 0?(C=0,w=t.top):t.bottom!==void 0?(C=1,w=t.bottom):t.centerY!==void 0&&(C=.5,w=t.centerY);var F,N;f!==void 0&&(f=f.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),F=parseFloat(f[0])/100,N=f[1]===""?0:parseFloat(f[1]));var z,H;w!==void 0&&(w=w.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),z=parseFloat(w[0])/100,H=w[1]===""?0:parseFloat(w[1]));var Z=t.width,tt,nt;Z!==void 0&&(Z=Z.split("%"),tt=parseFloat(Z[0])/100,nt=Z[1]===""?0:parseFloat(Z[1]));var st=t.height,ht,ft;st!==void 0&&(st=st.split("%"),ht=parseFloat(st[0])/100,ft=st[1]===""?0:parseFloat(st[1])),this.setAlign(s,C),this.setPercentage(F,z),this.setOffset(N,H),this.setSizePercentage(tt,ht),this.setSizePadding(nt,ft);var dt=op(t,"onResizeCallback",PV),gt=op(t,"onResizeCallbackScope");this.setResizeCallback(dt,gt);var Et=op(t,"onUpdateViewportCallback"),yt=op(t,"onUpdateViewportCallbackScope");return this.setUpdateViewportCallback(Et,yt),this.autoAnchor(t.enable),this}autoAnchor(t){return t===void 0&&(t=!0),t=!!t,this.autoAnchorEnable===t?this:(t?(this.scene.sys.scale.on("resize",this.anchor,this),this.anchor()):this.scene.sys.scale.off("resize",this.anchor,this),this.autoAnchorEnable=t,this)}setAlign(t,s){return this.alignX=t,this.alignY=s,this}setPercentage(t,s){return this.percentageX=t,this.percentageY=s,this}setOffset(t,s){return this.offsetX=t,this.offsetY=s,this}setSizePercentage(t,s){return this.percentageWidth=t,this.percentageHeight=s,this}setSizePadding(t,s){return this.paddingWidth=t,this.paddingHeight=s,this}setResizeCallback(t,s){return this.onResizeCallback=t,this.onResizeCallbackScope=s,this}setUpdateViewportCallback(t,s){return this.onUpdateViewportCallback=t,this.onUpdateViewportCallbackScope=s,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var t=this.onResizeCallback,s=this.onResizeCallbackScope,f=this.anchorWidth,C=this.anchorHeight;if(!(f===void 0&&C===void 0||!t)){var w=this.parent;f===void 0&&(f=w.width),C===void 0&&(C=w.height),s?t.call(s,f,C,w,this):t(f,C,w,this)}}updatePosition(){var t=this.parent;return this.alignX===null?t.x=this.anchorX:this.alignX!==void 0&&(t.x=this.anchorX+t.displayWidth*(t.originX-this.alignX)),this.alignY===null?t.y=this.anchorY:this.alignY!==void 0&&(t.y=this.anchorY+t.displayHeight*(t.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(this.percentageWidth!==void 0)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(this.percentageHeight!==void 0)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){var t=this.parent.scene.cameras.main;this.viewport=hl(this.scene,t,this.viewport);var s=this.viewport,f=this.onUpdateViewportCallback,C=this.onUpdateViewportCallbackScope;f&&(C?f.call(C,s,this.parent,this):f(s,this.parent,this))}}var wV=function(e){e===void 0&&(e={});var t=e.hasOwnProperty("width"),s=e.hasOwnProperty("height"),f=e.hasOwnProperty("onResizeCallback");return(t||s)&&!f&&(e.onResizeCallback=function(C,w,F){t&&F.setMinWidth(C),s&&F.setMinHeight(w),F.layout()}),this._anchor===void 0?this._anchor=new sx(this,e):this._anchor.resetFromJSON(e),this};const bV=Phaser.Utils.Objects.GetValue,Pl=Phaser.Utils.Objects.GetAdvancedValue,CP=Phaser.Math.Linear;class Rd extends Jo{constructor(t,s){super(t,s),this.scaleStart={},this.scaleEnd={},this.resetFromJSON(s),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(bV(t,"mode",0)),this.setScaleRange(Pl(t,"start",void 0),Pl(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=AV[t]),this.mode=t,this}setScaleRange(t,s){return typeof t=="number"?(this.startX=t,this.startY=t):(this.startX=Pl(t,"x",this.parent.scaleX),this.startY=Pl(t,"y",this.parent.scaleY)),typeof s=="number"?(this.endX=s,this.endY=s):(this.endX=Pl(s,"x",void 0),this.endY=Pl(s,"y",void 0)),this.hasScaleX=this.startX!==void 0&&this.endX!==void 0,this.hasScaleY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;this.hasScaleX&&(t.scaleX=this.startX),this.hasScaleY&&(t.scaleY=this.startY);var s=this.repeat;return this.mode===2&&s!==-1&&(s=(s+1)*2-1),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(s),super.start(),this}updateTarget(t,s){var f=s.t;s.isOddIteration&&(f=1-f),f=this.easeFn(f),this.hasScaleX&&(t.scaleX=CP(this.startX,this.endX,f)),this.hasScaleY&&(t.scaleY=CP(this.startY,this.endY,f))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const AV={stop:0,destroy:1,yoyo:2};var nx=function(e,t,s,f,C){f===void 0&&(f="Cubic");var w,F;switch(s){case 0:case"x":w={x:0},F={x:e.scaleX};break;case 1:case"y":w={y:0},F={y:e.scaleY};break;default:w=0,F=e.scale;break}var N={mode:0,start:w,end:F,duration:t,ease:f};return C===void 0?C=new Rd(e,N):C.resetFromJSON(N),C.restart(),C},MP=function(e,t,s,f,C,w){f===void 0&&(f="Linear"),C instanceof Rd&&(w=C,C=void 0),C===void 0&&(C=!0);var F={};switch(F.mode=C?1:0,s){case 0:case"x":F.end={x:0};break;case 1:case"y":F.end={y:0};break;default:F.end=0;break}return F.duration=t,F.ease=f,w===void 0?w=new Rd(e,F):w.resetFromJSON(F),w.restart(),w},RV=function(e,t,s,f,C,w,F){s===void 0&&(s=1.2),f===void 0&&(f=0),w===void 0&&(w="Cubic");var N,z;switch(C){case 0:case"x":N={x:e.scaleX},z={x:s};break;case 1:case"y":N={y:e.scaleX},z={y:s};break;default:N=e.scaleX,z=s;break}var H={mode:2,start:N,end:z,duration:t/2,ease:w,repeat:f};return F===void 0?F=new Rd(e,H):F.resetFromJSON(H),F.restart(),F};const rx=Phaser.Utils.Objects.IsPlainObject;var EP={onInitScale(){var e=this,t=this._scaleBehavior;t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(e.emit(t.completeEventName,e),t.completeEventName=void 0)})},popUp(e,t,s){if(rx(e)){var f=e;e=f.duration,t=f.orientation,s=f.ease}var C=this._scaleBehavior===void 0;return this._scaleBehavior=nx(this,e,t,s,this._scaleBehavior),C&&this.onInitScale(),this._scaleBehavior.completeEventName="popup.complete",this},popUpPromise(e,t,s){return this.popUp(e,t,s),ps(this._scaleBehavior)},isRunningPopUp(){return this._scaleBehavior&&this._scaleBehavior.completeEventName==="popup.complete"},scaleDownDestroy(e,t,s,f){if(rx(e)){var C=e;e=C.duration,t=C.orientation,s=C.ease,f=C.destroy}var w=this._scaleBehavior===void 0;return this._scaleBehavior=MP(this,e,t,s,f,this._scaleBehavior),w&&this.onInitScale(),this._scaleBehavior.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(e,t,s,f){return this.scaleDownDestroy(e,t,s,f),ps(this._scaleBehavior)},scaleDown(e,t,s){return this.scaleDownDestroy(e,t,s,!1),this},scaleDownPromise(e,t,s){return this.scaleDown(e,t,s),ps(this._scaleBehavior)},isRunningScaleDown(){return this._scaleBehavior&&this._scaleBehavior.completeEventName==="scaledown.complete"},scaleYoyo(e,t,s,f,C){if(rx(e)){var w=e;e=w.duration,t=w.peakValue,s=w.repeat,f=w.orientation,C=w.ease}var F=this._scaleBehavior===void 0;return this._scaleBehavior=RV(this,e,t,s,f,C,this._scaleBehavior),F&&this.onInitScale(),this._scaleBehavior.completeEventName="scaleyoyo.complete",this},scaleYoyoPromise(e,t,s,f,C){return this.scaleYoyo(e,t,s,f,C),ps(this._scaleBehavior)},isRunningScaleYoyo(){return this._scaleBehavior&&(this._scaleBehavior.completeEventName="scaleyoyo.complete")},isRunningEaseScale(){return this.isRunningPopUp()||this.isRunningScaleDown()||this.isRunningScaleYoyo()}},ua={};Object.assign(ua,EP),ua.onInitScale=function(){EP.onInitScale.call(this);var e=this,t=this._scaleBehavior;t.on("update",function(){var s=El.getParentSizer(e);s&&s.resetChildPositionState(e)})};const LV=Phaser.Utils.Objects.GetValue,PP=Phaser.Utils.Objects.GetAdvancedValue,OV=Phaser.Math.Linear;let ax=class extends Jo{constructor(t,s){super(t,s),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(LV(t,"mode",0)),this.setAlphaRange(PP(t,"start",this.parent.alpha),PP(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=FV[t]),this.mode=t,this}setAlphaRange(t,s){return this.alphaStart=t,this.alphaEnd=s,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return t.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateTarget(t,s){var f=s.t;s.isOddIteration&&(f=1-f),t.alpha=OV(this.alphaStart,this.alphaEnd,f)}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}};const FV={stop:0,destroy:1,yoyo:2},DV=Phaser.Utils.Objects.IsPlainObject;var hp=function(e,t,s,f){var C,w;DV(s)?(C=s.start,w=s.end):w=s,C===void 0&&(C=0),w===void 0&&(w=1);var F={mode:0,start:C,end:w,duration:t};return f===void 0?f=new ax(e,F):f.resetFromJSON(F),f.restart(),f},lp=function(e,t,s,f){s instanceof ax&&(f=s,s=void 0),s===void 0&&(s=!0);var C={mode:s?1:0,end:0,duration:t};return f===void 0?f=new ax(e,C):f.resetFromJSON(C),f.restart(),f};const wP=Phaser.Utils.Objects.IsPlainObject;var bP={onInitFade(){var e=this,t=this._fade;t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(e.emit(t.completeEventName,e),t.completeEventName=void 0)})},fadeIn(e,t){if(wP(e)){var s=e;e=s.duration,t=s.alpha}var f=this._fade===void 0;return this._fade=hp(this,e,t,this._fade),f&&this.onInitFade(),this._fade.completeEventName="fadein.complete",this},fadeInPromise(e,t){return this.fadeIn(e,t),ps(this._fade)},isRunningFadeIn(){return this._fade&&this._fade.completeEventName==="fadein.complete"},fadeOutDestroy(e,t){if(wP(e)){var s=e;e=s.duration,t=s.destroy}var f=this._fade===void 0;return this._fade=lp(this,e,t,this._fade),f&&this.onInitFade(),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(e,t){return this.fadeOutDestroy(e,t),ps(this._fade)},fadeOut(e){return this.fadeOutDestroy(e,!1),this},fadeOutPromise(e){return this.fadeOut(e),ps(this._fade)},isRunningFadeOut(){return this._fade&&this._fade.completeEventName==="fadeout.complete"},isRunningEaseFade(){return this.isRunningFadeIn()||this.isRunningFadeOut()}},Ld={};Object.assign(Ld,bP),Ld.onInitFade=function(){bP.onInitFade.call(this);var e=this,t=this._fade;t.on("update",function(){var s=El.getParentSizer(e);s&&s.resetChildAlphaState(e)})};const IV=Phaser.Utils.Objects.GetValue,wl=Phaser.Utils.Objects.GetAdvancedValue,AP=Phaser.Math.Linear;class up extends Jo{constructor(t,s){super(t,s),this.resetFromJSON(s),this.boot()}resetFromJSON(t){if(super.resetFromJSON(t),this.setMode(IV(t,"mode",0)),t&&(t.hasOwnProperty("x")||t.hasOwnProperty("y"))){var s=wl(t,"x",void 0),f=wl(t,"y",void 0);this.setTargetPosition(s,f)}else this.setTargetPosition(t);return this}setMode(t){return typeof t=="string"&&(t=BV[t]),this.mode=t,this}setTargetPosition(t,s){if(typeof t=="number"||typeof s=="number")this.startX=this.parent.x,this.startY=this.parent.y,this.endX=t,this.endY=s;else{var f=t;this.startX=wl(f,"startX",void 0),this.startY=wl(f,"startY",void 0),this.endX=wl(f,"endX",void 0),this.endY=wl(f,"endY",void 0)}return this.hasMoveX=this.startX!==void 0&&this.endX!==void 0,this.hasMoveY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasMoveX&&(t.x=this.startX),this.hasMoveY&&(t.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateTarget(t,s){var f=s.t;s.isOddIteration&&(f=1-f),f=this.easeFn(f),this.hasMoveX&&(t.x=AP(this.startX,this.endX,f)),this.hasMoveY&&(t.y=AP(this.startY,this.endY,f))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const BV={stop:0,destroy:1,yoyo:2};var dp=function(e,t){if(typeof e=="number")return e;var s=e[0],f=parseFloat(e.substr(2));switch(s){case"+":return t+f;case"-":return t-f;case"*":return t*f;case"/":return t/f}},RP=function(e,t,s,f,C,w,F){w instanceof up&&(F=w,w=void 0),w===void 0&&(w=!1);var N={};return N.mode=w?1:0,s!==void 0&&(N.startX=e.x,N.endX=dp(s,e.x)),f!==void 0&&(N.startY=e.y,N.endY=dp(f,e.y)),N.duration=t,N.ease=C===void 0?"Linear":C,F===void 0?F=new up(e,N):F.resetFromJSON(N),F.restart(),F},LP=function(e,t,s,f,C,w,F){w instanceof up&&(F=w,w=void 0),w===void 0&&(w=!1);var N={};return N.mode=w?1:0,s!==void 0&&(N.startX=dp(s,e.x),N.endX=e.x),f!==void 0&&(N.startY=dp(f,e.y),N.endY=e.y),N.duration=t,N.ease=C===void 0?"Linear":C,F===void 0?F=new up(e,N):F.resetFromJSON(N),F.restart(),F};const OP=Phaser.Utils.Objects.IsPlainObject,FP=Phaser.Math.Distance.Between;var DP={onInitEaseMove(){var e=this,t=this._easeMove;t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(e.emit(t.completeEventName,e),t.completeEventName=void 0)})},moveFrom(e,t,s,f,C){if(OP(e)){var w=e;t=w.x,s=w.y,w.hasOwnProperty("speed")?e=FP(t,s,this.x,this.y)*1e3/w.speed:e=w.duration,f=w.ease}var F=this._easeMove===void 0;return this._easeMove=LP(this,e,t,s,f,C,this._easeMove),F&&this.onInitEaseMove(),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(e,t,s,f,C){return this.moveFrom(e,t,s,f,C),ps(this._easeMove)},moveFromDestroy(e,t,s,f){return this.moveFrom(e,t,s,f,!0),this},moveFromDestroyPromise(e,t,s,f){return this.moveFromDestroy(e,t,s,f),ps(this._easeMove)},isRunningMoveFrom(){return this._easeMove&&(this._easeMove.completeEventName="movefrom.complete")},moveTo(e,t,s,f,C){if(OP(e)){var w=e;t=w.x,s=w.y,w.hasOwnProperty("speed")?e=FP(t,s,this.x,this.y)*1e3/w.speed:e=w.duration,f=w.ease}var F=this._easeMove===void 0;return this._easeMove=RP(this,e,t,s,f,C,this._easeMove),F&&this.onInitEaseMove(),this._easeMove.completeEventName,this},moveToPromise(e,t,s,f,C){return this.moveTo(e,t,s,f,C),ps(this._easeMove)},moveToDestroy(e,t,s,f){return this.moveTo(e,t,s,f,!0),this},moveToDestroyPromise(e,t,s,f){return this.moveToDestroy(e,t,s,f,!0),ps(this._easeMove)},isRunningMoveTo(){return this._easeMove&&this._easeMove.completeEventName==="moveto.complete"},isRunningEaseMove(){return this.isRunningMoveFrom()||this.isRunningMoveTo()},moveStop(e){return this._easeMove?(this._easeMove.stop(e),this):this}},fp={};Object.assign(fp,DP),fp.onInitEaseMove=function(){DP.onInitEaseMove.call(this);var e=this,t=this._easeMove;t.on("update",function(){var s=El.getParentSizer(e);s&&s.resetChildPositionState(e)})};const bn=Phaser.Utils.Objects.GetValue;class ox extends Oc{constructor(t,s){super(t,s),this.timer=new MM,this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.timer.resetFromJSON(bn(t,"timer")),this.setEnable(bn(t,"enable",!0)),this.setMode(bn(t,"mode",1)),this.isRunning=bn(t,"isRunning",!1),this.setMagnitudeMode(bn(t,"magnitudeMode",1)),this.setAxisMode(bn(t,"axis",0)),this.setDuration(bn(t,"duration",500)),this.setMagnitude(bn(t,"magnitude",10)),this.ox=bn(t,"ox",void 0),this.oy=bn(t,"oy",void 0),this}toJSON(){return{timer:this.timer.toJSON(),enable:this.enable,mode:this.mode,isRunning:this.isRunning,magnitudeMode,duration:this.duration,magnitude:this.magnitude,ox:this.ox,oy:this.oy}}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}startTicking(){super.startTicking(),this.mode===0?(this.scene.game.events.on("poststep",this.update,this),this.scene.game.events.on("prestep",this.backToOrigin,this)):this.scene.sys.events.on("preupdate",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&(this.mode===0?(this.scene.game.events.off("poststep",this.update,this),this.scene.game.events.off("prestep",this.backToOrigin,this)):this.scene.sys.events.off("preupdate",this.update,this))}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setMode(t){return typeof t=="string"&&(t=NV[t]),this.mode=t,this}setMagnitudeMode(t){return typeof t=="string"&&(t=UV[t]),this.magnitudeMode=t,this}setAxisMode(t){return typeof t=="string"&&(t=GV[t]),this.axisMode=t,this}setDuration(t){return this.duration=t,this}setMagnitude(t){return this.magnitude=t,this}start(t,s){if(typeof t!="number"){var f=t;s=bn(f,"magnitude",void 0),t=bn(f,"duration",void 0)}return s!==void 0&&this.setMagnitude(s),t!==void 0&&this.setDuration(t),this.timer.setDuration(this.duration).start(),super.start(),this}shake(t,s){return this.start(t,s),this}update(t,s){if(!this.isRunning||!this.enable)return this;var f=this.parent;if(!f.active)return this;if(this.timer.update(t,s),this.timer.isDone)this.backToOrigin(),this.complete();else{this.ox===void 0&&(this.ox=f.x,this.oy=f.y);var C=this.magnitude;this.magnitudeMode===1&&(C*=1-this.timer.t);var w=Math.random()*Math.PI*2,F=this.ox+Math.cos(w)*C,N=this.oy+Math.sin(w)*C;switch(this.axisMode){case 1:f.x=F;break;case 2:f.y=N;break;default:f.x=F,f.y=N;break}}return this}backToOrigin(){if(!this.isRunning||!this.enable)return this;if(this.ox===void 0)return this;var t=this.parent;switch(this.axisMode){case 1:t.x=this.ox;break;case 2:t.y=this.oy;break;default:t.x=this.ox,t.y=this.oy;break}return this.ox=void 0,this.oy=void 0,this}}const NV={effect:0,behavior:1},GV={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2},UV={constant:0,decay:1},kV=Phaser.Utils.Objects.IsPlainObject;var VV=function(e,t){t.on("complete",function(){e.emit("shake.complete",e)})},zV={shake(e,t,s){if(kV(e)){var f=e;e=f.duration,t=f.magnitude,s=f.magnitudeMode}return this._shake===void 0&&(this._shake=new ox(this,{mode:0,magnitudeMode:1}),VV(this,this._shake)),e!==void 0&&this._shake.setDuration(e),t!==void 0&&this._shake.setMagnitude(t),s!==void 0&&this._shake.setMagnitudeMode(s),this._shake.shake(),this},shakePromise(e,t){return this.shake(e,t),ps(this._shake)}};const IP=Phaser.Utils.Objects.IsPlainObject;class WV extends Si{constructor(t,s){super(t,s),this.parent.setDataEnabled(),this.easeTasks={}}complete(t){this.emit(`complete-${t}`,this.parent,this),this.emit("complete",t,this.parent,this)}getEaseTask(t){var s=this.easeTasks[t];return s===void 0&&(s=new Kn(this.parent),this.easeTasks[t]=s,s.setTarget(this.parent.data.values).on("complete",function(){this.complete(t)},this)),s}easeTo(t,s,f,C){if(IP(t)){var w=t;t=w.key,s=w.value,f=w.duration,C=w.ease;var F=w.speed;f===void 0&&F!==void 0&&(f=Math.abs(s-this.parent.data.values[t])/F*1e3)}f===void 0&&(f=1e3),C===void 0&&(C="Linear");var N=this.getEaseTask(t);return N.restart({key:t,to:s,duration:f,ease:C}),this}easeFrom(t,s,f,C){if(IP(t)){var w=t;t=w.key,s=w.value,f=w.duration,C=w.ease;var F=w.speed;f===void 0&&F!==void 0&&(f=Math.abs(s-this.parent.data.values[t])/F*1e3)}f===void 0&&(f=1e3),C===void 0&&(C="Linear");var N=this.getEaseTask(t);return N.restart({key:t,from:s,duration:f,ease:C}),this}stopEase(t,s){s===void 0&&(s=!0);var f=this.easeTasks[t];return f&&f.stop(s),this}stopAll(t){t===void 0&&(t=!0);for(var s in this.easeTasks)this.stopEase(s,t);return this}}var XV=function(e,t){t.on("complete",function(s){e.emit(`easedata.${s}.complete`,e),e.emit("easedata.complete",s,e)})},HV={easeDataTo(e,t,s,f){return this._easeData||(this._easeData=new WV(this),XV(this,this._easeData)),this._easeData.easeTo(e,t,s,f),this},easeDataToPromise(e,t,s,f){return this.easeDataTo(e,t,s,f),Uc(this._easeData,`complete-${e}`)},stopEaseData(e,t){return this._easeData?(this._easeData.stopEase(e,t),this):this},stopAllEaseData(e){return this._easeData?(this._easeData.stopAll(e),this):this}},YV=Phaser.Utils.Array.Remove,$V=function(e){e._delayCallTimers=[],e.once("destroy",function(){for(var t=e._delayCallTimers,s=0,f=t.length;s<f;s++)t[s].remove();e._delayCallTimers=void 0})},BP={delayCall(e,t,s){var f=this._delayCallTimers;f===void 0&&$V(this);var C,w=this,F=function(){YV(w._delayCallTimers,C),s?t.call(s):t()};return C=this.scene.time.delayedCall(e,F),this._delayCallTimers.push(C),this}},qa=function(e){NP(e,!1)},to=function(e){NP(e,!0)},hx=function(e){if(!e)return!1;var t=rp(e);return!t.hidden},NP=function(e,t){if(e){var s=rp(e);s.hidden=t;var f=un(e);f?f.setChildVisible(e,!t):e.setVisible(!t)}},_V={show(e){return e===void 0&&(e=this),qa(e),this},hide(e){return e===void 0&&(e=this),to(e),this},isShow(e){return e===void 0&&(e=this),hx(e)}};const ZV=["next","exit","enter"];let GP=class{constructor(t){var s=Vt(t,"states",void 0);s&&this.addStates(s);var f=Vt(t,"extend",void 0);if(f)for(var C in f)(!this.hasOwnProperty(C)||this[C]===void 0)&&(this[C]=f[C]);var w=Vt(t,"eventEmitter",void 0),F=Vt(t,"EventEmitterClass",void 0);this.setEventEmitter(w,F),this._stateLock=!1,this.resetFromJSON(t)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(t){this.setEnable(Vt(t,"enable",!0)),this.start(Vt(t,"start",void 0));var s=Vt(t,"init",void 0);return s&&s.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(t){if(!(!this.enable||this._stateLock)&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),this._prevState!=null){var s="exit_"+this._prevState,f=this[s];f&&f.call(this),this.emit(s,this)}if(this._stateLock=!1,this._state!=null){var C="enter_"+this._state,w=this[C];w&&w.call(this),this.emit(C,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(t){return this._start=t,this._prevState=void 0,this._state=t,this}goto(t){return t!=null&&(this.state=t),this}next(){var t,s=this["next_"+this.state];return s&&(typeof s=="string"?t=s:t=s.call(this)),this.goto(t),this}get stateProperties(){return ZV}addState(t,s){typeof t!="string"&&(s=t,t=s.name);for(var f=this.stateProperties,C=0,w=f.length;C<w;C++){var F=f[C],N=s[F];N&&(this[`${F}_${t}`]=N)}return this}addStates(t){if(Array.isArray(t))for(var s=0,f=t.length;s<f;s++)this.addState(t[s]);else for(var C in t)this.addState(C,t[C]);return this}runMethod(t,s,f,C,w,F){var N=this[t+"_"+this.state];if(N){var z=arguments.length;switch(z){case 1:return N.call(this);case 2:return N.call(this,s);case 3:return N.call(this,s,f);case 4:return N.call(this,s,f,C);case 5:return N.call(this,s,f,C,w);case 6:return N.call(this,s,f,C,w,F)}for(var H=new Array(z-1),Z=1;Z<z;Z++)H[Z-1]=arguments[Z];return N.apply(this,H)}}};Object.assign(GP.prototype,zM);var lx=function(e,t,s,f,C){C===void 0&&(C=!1);var w=e._events[t];if(!w)return!1;for(var F=0,N=w.length;F<N;F++){var z=w[F];if(z.fn===s&&z.context===f&&z.once===C)return!0}return!1};const KV=["next","exit","enter","update","preupdate","postupdate"];class da extends GP{shutdown(){this.stopUpdate(),this.stopPreUpdate(),this.stopPostUpdate(),this._scene=void 0,super.shutdown()}resetFromJSON(t){return super.resetFromJSON(t),this._scene=Vt(t,"scene",void 0),this}get stateProperties(){return KV}update(t,s){this.runMethod("update",t,s)}preupdate(t,s){this.runMethod("preupdate",t,s)}postupdate(t,s){this.runMethod("postupdate",t,s)}startUpdate(t){t||(t=this._scene);var s=t.sys.events;return lx(s,"update",this.update,this)?this:(this._scene=t,s.on("update",this.update,this),this)}stopUpdate(){return this._scene?(this._scene.sys.events.off("update",this.update,this),this):this}startPreUpdate(t){t||(t=this._scene);var s=t.sys.events;return lx(s,"preupdate",this.preupdate,this)?this:(this._scene=t,s.on("preupdate",this.preupdate,this),this)}stopPreUpdate(){return this._scene?(this._scene.sys.events.off("preupdate",this.preupdate,this),this):this}startPostUpdate(t){t||(t=this._scene);var s=t.sys.events;return lx(s,"postupdate",this.postupdate,this)?this:(this._scene=t,s.on("postupdate",this.postupdate,this),this)}stopPostUpdate(){return this._scene?(this._scene.sys.events.off("postupdate",this.postupdate,this),this):this}}let JV=class extends da{constructor(t,s){super(s),this.parent=t;var f=s.initState||"IDLE";this.start(f)}init(){this.start("IDLE")}next_IDLE(){return"TRANS_OPNE"}next_TRANS_OPNE(){return"OPEN"}enter_TRANS_OPNE(){var t=this.parent;if(t.transitInTime>0){var s=t.runTransitionInCallback();t.delayCall(s,this.next,this)}else this.next()}exit_TRANS_OPNE(){var t=this.parent;t.removeDelayCall()}next_OPEN(){return"TRANS_CLOSE"}enter_OPEN(){var t=this.parent;t.onOpen()}exit_OPEN(){var t=this.parent;t.removeDelayCall()}next_TRANS_CLOSE(){return"CLOSE"}enter_TRANS_CLOSE(){var t=this.parent;if(t.transitOutTime>0){var s=t.runTransitionOutCallback();t.delayCall(s,this.next,this)}else this.next()}exit_TRANS_CLOSE(){var t=this.parent;t.removeDelayCall()}next_CLOSE(){return"TRANS_OPNE"}enter_CLOSE(){var t=this.parent;t.onClose()}exit_CLOSE(){}canOpen(){return this.state==="IDLE"||this.state==="CLOSE"}canClose(){return this.state==="IDLE"||this.state==="OPEN"}};var QV=function(e,t,s,f,C){var w=ul(e),F=w.time.delayedCall(t,function(){w.game.events.once("poststep",function(){s.call(f,C)})});return F},jV={delayCall(e,t,s){return this.delayCallTimer=QV(this,e,t,s),this},removeDelayCall(){return this.delayCallTimer&&(this.delayCallTimer.remove(!1),this.delayCallTimer=void 0),this}},qV={setTransitInTime(e){return this.transitInTime=e,this},setTransitOutTime(e){return this.transitOutTime=e,this},setTransitInCallback(e){return e||(e=a),this.transitInCallback=e,this},setTransitOutCallback(e){return e||(e=a),this.transitOutCallback=e,this}},tz={runTransitionInCallback(){return this.transitInCallback(this.parent,this.transitInTime),this.transitInTime},onOpen(){},requestOpen(e,t){if(!this._state.canOpen())return this;this.openEventData=arguments.length>0?e:this.parent;var s=this.transitInTime;return t!==void 0&&(this.transitInTime=t),this._state.goto("TRANS_OPNE"),this.transitInTime=s,this}},ez={runTransitionOutCallback(){return this.transitOutCallback(this.parent,this.transitOutTime),this.transitOutTime},onClose(){this.oneShotMode&&this.parent.destroy()},requestClose(e,t){if(!this._state.canClose)return this;this.closeEventData=arguments.length>0?e:this.parent;var s=this.transitOutTime;return t!==void 0&&(this.transitOutTime=t),this._state.goto("TRANS_CLOSE"),this.transitOutTime=s,this}},UP={};Object.assign(UP,jV,qV,tz,ez);const bl=Phaser.Utils.Objects.GetValue;class cp extends Si{constructor(t,s){super(t,s),this.setTransitInTime(bl(s,"duration.in",200)),this.setTransitOutTime(bl(s,"duration.out",200)),this.setTransitInCallback(bl(s,"transitIn")),this.setTransitOutCallback(bl(s,"transitOut")),this.oneShotMode=bl(s,"destroy",!1),this.delayCallTimer=void 0,this._state=new JV(this,{eventEmitter:!1,initState:bl(s,"initState","IDLE")}),this.openEventData=void 0,this.closeEventData=void 0}get state(){return this._state.state}shutdown(t){this.isShutdown||(this.transitInCallback=void 0,this.transitOutCallback=void 0,this.openEventData=void 0,this.closeEventData=void 0,this.removeDelayCall(),super.shutdown(t))}}Object.assign(cp.prototype,UP);const iz=Phaser.GameObjects.Rectangle;class ux extends iz{constructor(t,s,f){super(t,0,0,2,2,s,1),this.fullWindow=new gE(this),this.setAlpha(f)}get tint(){return this.fillColor}set tint(t){this.setFillStyle(t,this.fillAlpha)}}const dx=Phaser.Utils.Objects.GetValue;class pp extends Si{constructor(t,s){super(t,{eventEmitter:!1}),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.setHitAreaMode(dx(t,"hitAreaMode",0)),this.setEnable(dx(t,"enable",!0)),this.setStopMode(dx(t,"stopAllLevels",!0)),this}boot(){this.parent.on("pointerdown",function(t,s,f,C){this.stopAllLevels&&C.stopPropagation()},this).on("pointerup",function(t,s,f,C){this.stopAllLevels&&C.stopPropagation()},this).on("pointermove",function(t,s,f,C){this.stopAllLevels&&C.stopPropagation()},this).on("pointerover",function(t,s,f,C){this.stopAllLevels&&C.stopPropagation()},this).on("pointerout",function(t,s){this.stopAllLevels&&s.stopPropagation()},this)}setHitAreaMode(t){typeof t=="string"&&(t=sz[t]);var s=this.parent;return s.input&&s.removeInteractive(),t===0?s.setInteractive():s.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}}),this}setEnable(t){return t===void 0&&(t=!0),t?this.parent.setInteractive():this.parent.disableInteractive(),this.enable=t,this}setStopMode(t){return t===void 0&&(t=!0),this.stopAllLevels=t,this}toggleEnable(){return this.setEnable(!this.enable),this}}var sz={default:0,fullWindow:1};const kP=Phaser.Utils.Objects.GetValue;class fx extends ux{constructor(t,s){var f=kP(s,"color",0),C=kP(s,"alpha",.8);super(t,f,C),this.touchEventStop=new pp(this,{hitAreaMode:1})}}var nz=function(e,t){var s=e.scene,f=new fx(s,t);return s.add.existing(f),e.isRexContainerLite?(e.pin(f,{syncPosition:!1,syncRotation:!1,syncScale:!1,syncAlpha:!1,syncScrollFactor:!1}),e.moveDepthBelow(f)):s.children.moveBelow(f,e),f},vp={popUp(e,t){e._modalScaleSave!==void 0?(e.scaleX=e._modalScaleSave,e.scaleY=e._modalScaleSave):e._modalScaleSave=e.scaleX,nx(e,t)},scaleDown(e,t){MP(e,t,void 0,void 0,!1)},fadeIn(e,t){e._modalAlphaSave!==void 0?e.alpha=e._modalAlphaSave:e._modalAlphaSave=e.alpha,hp(e,t)},fadeOut(e,t){lp(e,t,!1)}},rz=function(e,t){e._modalAlphaSave!==void 0?e.alpha=e._modalAlphaSave:e._modalAlphaSave=e.alpha,hp(e,t,e.alpha)},az=function(e,t){lp(e,t,!1)},mp=function(e,t,s,f,C){if(!e||f&&!f(e,t,s))return!1;var w=Qg(e,!0);return!(!w.contains(t,s)||C&&!C(e,t,s))};const wr=Phaser.Utils.Objects.GetValue;let oz=class extends cp{constructor(t,s){s===void 0&&(s={}),s.transitIn==null&&(s.transitIn=eo.popUp),s.transitOut==null&&(s.transitOut=eo.scaleDown),s.destroy=wr(s,"destroy",!0),super(t,s);var f=wr(s,"cover");this.cover=f!==!1?nz(t,f):void 0,this.cover&&(this.setCoverTransitInCallback(wr(f,"transitIn",rz)),this.setCoverTransitOutCallback(wr(f,"transitOut",az)));var C=wr(s,"touchOutsideClose",!1),w=wr(s,"duration.hold",-1),F=wr(s,"timeOutClose",w>=0),N=wr(s,"anyTouchClose",!1),z=wr(s,"manualClose",!1);z&&(C=!1,N=!1,F=!1),N&&(C=!1),F?this.setDisplayTime(w):this.setDisplayTime(-1),N?this.once("open",this.anyTouchClose,this):C&&this.once("open",this.touchOutsideClose,this),wr(s,"openOnStart",!0)&&this.delayCall(0,this.requestOpen,this)}shutdown(t){this.isShutdown||(this.cover||this.scene.input.off("pointerup",this.touchCloseCallback,this),this.cover&&!t&&(this.cover.destroy(),this.cover=void 0),super.shutdown(t))}touchOutsideClose(){return this.cover?this.cover.on("pointerup",this.touchCloseCallback,this):this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.cover?this.cover.once("pointerup",this.touchCloseCallback,this):this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(t){this.clickOutsideTest&&mp(this.parent,t.worldX,t.worldY)||this.requestClose()}runTransitionInCallback(){var t=super.runTransitionInCallback(),s=this.cover;return s&&this.coverTransitInCallback&&this.coverTransitInCallback(s,t),t}runTransitionOutCallback(){var t=super.runTransitionOutCallback(),s=this.cover;return s&&this.coverTransitOutCallback&&this.coverTransitOutCallback(s,t),t}onOpen(){var t=this.displayTime;t>=0&&this.delayCall(t,this.requestClose,this),this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.closeEventData),super.onClose()}setDisplayTime(t){return this.displayTime=t,this}setTransitInCallback(t){switch(typeof t=="string"&&(t=eo[t]),t){case eo.popUp:t=vp.popUp;break;case eo.fadeIn:t=vp.fadeIn;break}return super.setTransitInCallback(t),this}setTransitOutCallback(t){switch(typeof t=="string"&&(t=eo[t]),t){case eo.scaleDown:t=vp.scaleDown;break;case eo.fadeOut:t=vp.fadeOut;break}return super.setTransitOutCallback(t),this}setCoverTransitInCallback(t){return this.coverTransitInCallback=t,this}setCoverTransitOutCallback(t){return this.coverTransitOutCallback=t,this}};const eo={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};var cx=function(e,t){var s=new oz(e,t);return s.on("open",function(){e.emit("modal.open",s)}),s.on("close",function(f){e.emit("modal.close",f,s)}),e.on("modal.requestClose",s.requestClose,s),s},hz=function(e,t){var s=cx(e,t);return new Promise(function(f,C){s.once("close",function(w){f(w)})})},VP=function(e,t){e.emit("modal.requestClose",t)},Qn=function(e){return e&&typeof e=="function"},gp={modal(e,t){return Qn(e)&&(t=e,e=void 0),this._modalBehavior===void 0&&(this.onCreateModalBehavior&&this.onCreateModalBehavior(this,e),this._modalBehavior=cx(this,e)),t&&this._modalBehavior.once("close",t),this._modalBehavior.requestOpen(),this},modalPromise(e){var t=this;return new Promise(function(s,f){t.modal(e,s)})},modalClose(e){return VP(this,e),this}},lz=function(e,t,s,f,C,w){return w===void 0&&(w=!1),t[w?"once":"on"](s,f,C),e.once("destroy",function(){t.off(s,f,C)}),e},fa=function(e,t,s,f,C){Qn(t)&&(C=f,f=s,s=t,t=this);var w=this.scene.events;return this.bindEvent(t,w,e,s,f,C),this},uz={bindEvent(e,t,s,f,C,w){return typeof t=="string"&&(w=C,C=f,f=s,s=t,t=e,e=this),lz(e,t,s,f,C,w),this},bindScenePreupdateEvent(e,t,s,f){return fa.call(this,"preupdate",e,t,s,f),this},bindSceneUpdateEvent(e,t,s,f){return fa.call(this,"update",e,t,s,f),this},bindScenePostupdateEvent(e,t,s,f){return fa.call(this,"postupdate",e,t,s,f),this},bindSceneRenderEvent(e,t,s,f){return fa.call(this,"render",e,t,s,f),this},bindScenePauseEvent(e,t,s,f){return fa.call(this,"pause",e,t,s,f),this},bindSceneResumeEvent(e,t,s,f){return fa.call(this,"resume",e,t,s,f),this},bindSceneSleepEvent(e,t,s,f){return fa.call(this,"sleep",e,t,s,f),this},bindSceneWakeEvent(e,t,s,f){return fa.call(this,"wake",e,t,s,f),this},bindSceneShutdownEvent(e,t,s,f){return fa.call(this,"shutdown",e,t,s,f),this}},xp=function(e,t,s){var f=e.camera;return f?(s===void 0?s={}:s===!0&&(s=dz),f===t?(s.x=e.worldX,s.y=e.worldY):f.getWorldPoint(e.x,e.y,s),s):null},dz={},fz=function(e,t,s,f,C){var w=e.scene.sys.cameras.main,F,N=e.scrollFactorX===0&&e.scrollFactorY===0;if(t)return N?s(e,t.x,t.y,f,C):(F=xp(t,w,!0),F?s(e,F.x,F.y,f,C):!1);for(var z=e.scene.input.manager,H=z.pointersTotal,Z=z.pointers,tt=0;tt<H;tt++)if(t=Z[tt],N){if(s(e,t.x,t.y,f,C))return!0}else{if(F=xp(t,w,!0),!F)continue;if(s(e,F.x,F.y,f,C))return!0}return!1},br=function(e,t,s,f){return fz(e,t,mp,s,f)},cz=function(e,t){return(Qs(e)||typeof e=="string")&&(t=e,e=void 0),t===void 0?t=this:typeof t=="string"&&(t=this.getElement(t)),br(t,e)},jn=function(e){return Object.prototype.toString.call(e)==="[object Array]"},rh=function(e,t,s,f,C){return mp(e,t,s,pz(f),C)},zP=function(e){var t=e.rexSizer&&e.rexSizer.hidden;return!t},pz=function(e){return e?function(t,s,f){return zP(t)?(e(t,s,f),!0):!1}:zP},WP=function(e,t,s,f,C){if(Qn(s)||(C=s,s=void 0,f=void 0),C===void 0&&(this.sizerChildren?C=this.sizerChildren:this.isRexContainerLite?C=this.children:C=this.list),jn(C)){for(var w,F=0,N=C.length;F<N;F++)if(w=C[F],rh(w,e,t,s,f))return w}else{var w;for(var z in C)if(w=C[z],rh(w,e,t,s,f))return w}return null},vz=function(e,t){return t===void 0?t={}:t===!0&&(t=mz),t.x=e.x,t.y=e.y,t.scaleX=e.scaleX,t.scaleY=e.scaleY,t.width=e.width,t.height=e.height,t.displayWidth=e.displayWidth,t.displayHeight=e.displayHeight,t},mz={},Od=function(e){this.sizerEventsEnable&&(vz(e,this.getChildPrevState(e)),this.layoutedChildren.push(e))},Fd=function(e,t,s,f,C,w,F,N){F===void 0&&(F=0),N===void 0&&(N=0),Pd(e,t,s,f,C,w),e.x+=F,e.y+=N,this.resetChildPositionState(e),this.sizerEventsEnable&&e.emit("sizer.postlayout",e,this)};const gz=Phaser.Display.Align.CENTER;var xz=function(){if(this.backgroundChildren!==void 0)for(var e=this.backgroundChildren,t=this.left,s=this.top,f=this.width*this.scaleX,C=this.height*this.scaleY,w,F,N,z,H,Z,tt,nt=0,st=e.length;nt<st;nt++)w=e[nt],F=w.rexSizer,!F.hidden&&(N=F.padding,Od.call(this,w),z=t+N.left*this.scaleX,H=s+N.top*this.scaleY,Z=f-(N.left+N.right)*this.scaleX,tt=C-(N.top+N.bottom)*this.scaleY,Ms(w,Z,tt),Fd.call(this,w,z,H,Z,tt,gz,0,0))};const yz=Phaser.Utils.Objects.IsPlainObject;var Sz=function(e,t,s){if(yz(e)){var f=e;e=f.sensor,s=f.target,t=f.draggable}else typeof t!="boolean"&&(s=t,t=void 0);var C=typeof e;if(C==="string"){var w=e;if(e=this.getElement(w),!e)return console.error(`Can get element '${w}'`),this}else(e===void 0||C!="object")&&(t=e,e=this);return t===void 0&&(t=!0),e.input&&e.input._rexUIDragSizer?e.input.draggable=t:t&&(e.setInteractive(),e.scene.input.setDraggable(e),e.on("drag",function(F,N,z){var H=s===void 0?this.getTopmostSizer():s;H.x+=N-e.x,H.y+=z-e.y,H.emit("sizer.drag",F,N,z)},this).on("dragstart",function(F,N,z){var H=s===void 0?this.getTopmostSizer():s;H.emit("sizer.dragstart",F,N,z)},this).on("dragend",function(F,N,z,H){var Z=s===void 0?this.getTopmostSizer():s;Z.emit("sizer.dragend",F,N,z,H)},this).on("drop",function(F,N){var z=s===void 0?this.getTopmostSizer():s;z.emit("sizer.drop",F,N)}),e.input._rexUIDragSizer=!0),this},px={onClick(e,t,s,f){return e?(typeof e=="function"&&(f=s,s=t,t=e,e=this),e._click===void 0&&(e._click=new ha(e,f)),e._click.on("click",t,s),this):this},offClick(e,t,s){return typeof e=="function"&&(s=t,t=e,e=this),e._click===void 0?this:(e._click.off("click",t,s),this)},enableClick(e,t){return typeof e=="boolean"&&(t=e,e=void 0),e===void 0&&(e=this),e._click===void 0?this:(e._click.setEnable(t),this)},disableClick(e){return e===void 0&&(e=this),e._click===void 0?this:(e._click.setEnable(!1),this)}};const Dd=Phaser.Utils.Objects.GetValue;class vx extends Si{constructor(t,s){super(t,s),this._enable=void 0;var f=Dd(s,"inputConfig",void 0);f&&t.setInteractive(f),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(Dd(t,"enable",!0)),this.setMode(Dd(t,"mode",1)),this.setClickInterval(Dd(t,"clickInterval",100)),this.setDragThreshold(Dd(t,"threshold",void 0)),this}boot(){var t=this.parent.scene;t.input.on("pointerdown",this.onPress,this),t.input.on("pointerup",this.onRelease,this),t.input.on("pointermove",this.onMove,this)}shutdown(t){if(!this.isShutdown){var s=this.parent.scene;s.input.off("pointerdown",this.onPress,this),s.input.off("pointerup",this.onRelease,this),s.input.off("pointermove",this.onMove,this),this.pointer=null,super.shutdown(t)}}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var s=t?"enable":"disable";this.emit(s,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=Tz[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}isPointerInside(t){var s=this.parent,f=s.input?a0:br;return f(s,t)}onPress(t){this.parent.willRender(t.camera)&&this.pointer===void 0&&(this.isPointerInside(t)||(this.pointer=t,this.mode===0&&(this.isPointerInside(t)||this.click(t.downTime,t))))}onRelease(t){this.parent.willRender(t.camera)&&this.pointer===t&&(this.mode===1&&(this.isPointerInside(t)||this.click(t.upTime,t)),this.pointer=void 0)}onMove(t,s,f,C){this.pointer===t&&this.dragThreshold!==void 0&&this.mode===1&&(t.getDistance()>=this.dragThreshold||this.isPointerInside(t))&&this.cancel()}click(t,s){if(!this.enable)return this;if(t===void 0)return this.emit("clickoutside",this,this.parent,s),this;this.pointer=void 0;var f=this.lastClickTime;return f!==void 0&&t-f<=this.clickInterval?this:(this.lastClickTime=t,this.emit("clickoutside",this,this.parent,s),this)}cancel(){return this.pointer=void 0,this}}const Tz={press:0,pointerdown:0,release:1,pointerup:1};var Cz={onClickOutside(e,t,s,f){return e?(typeof e=="function"&&(f=s,s=t,t=e,e=this),e._clickOutside===void 0&&(e._clickOutside=new vx(e,f)),e._clickOutside.on("clickoutside",t,s),this):this},offClickOutside(e,t,s){return typeof e=="function"&&(s=t,t=e,e=this),e._clickOutside===void 0?this:(e._clickOutside.off("clickoutside",t,s),this)},enableClickOutside(e,t){return typeof e=="boolean"&&(t=e,e=void 0),e===void 0&&(e=this),e._clickOutside===void 0?this:(e._clickOutside.setEnable(t),this)},disableClickOutside(e){return e===void 0&&(e=this),e._clickOutside===void 0?this:(e._clickOutside.setEnable(!1),this)}};class Mz extends da{constructor(){super({eventEmitter:!1}),this.goto("IDLE")}setCooldownTime(t){return this.cooldownTime=t,this.cooldownMode=t!==void 0,this}request(){return this.runMethod("request")}update_IDLE(){this.compensationTime=0}request_IDLE(){return this.next(),!0}next_IDLE(){if(this.cooldownMode)return"COOLDOWN"}enter_COOLDOWN(){this.remainderTime=this.cooldownTime+this.compensationTime}update_COOLDOWN(t,s){this.remainderTime-=s,this.remainderTime<0&&(this.compensationTime=this.cooldownTime>s?-this.remainderTime:0,this.goto("IDLE"))}request_COOLDOWN(){return!1}}const mx=Phaser.Utils.Objects.GetValue;class Al extends Si{constructor(t,s){super(t,s),this._enable=void 0,this.cooldown=new Mz,this.parent.setInteractive(mx(s,"inputConfig",void 0)),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.prevIsInTouch=!1,this.isInTouching=!1,this.setEnable(mx(t,"enable",!0)),this.setCooldown(mx(t,"cooldown",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPointIn,this),t.on("pointerover",this.onPointIn,this),t.on("pointerup",this.onPointOut,this),t.on("pointerout",this.onPointOut,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||(this.prevIsInTouch=!1,this.isInTouching=!1,this.pointer=void 0),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get cooldownTime(){return this.cooldown.cooldownTime}set cooldownTime(t){this.cooldown.setCooldownTime(t)}setCooldown(t){return this.cooldownTime=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointIn(t,s,f){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.isInTouching=!0)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0,this.isInTouching=!1)}preupdate(t,s){this.cooldown.update(t,s),!this.prevIsInTouch&&this.isInTouching&&this.emit("touchstart",this,this.parent),this.isInTouching&&this.cooldown.request()&&this.emit("intouch",this,this.parent,this.pointer),this.prevIsInTouch&&!this.isInTouching&&this.emit("touchend",this,this.parent),this.prevIsInTouch=this.isInTouching}}var Ez={isPointerInBounds(e){return e===void 0?e=this:typeof e=="string"&&(e=this.getElement(e)),e?br(e):!1},onTouching(e,t,s,f){return e?(typeof e=="function"&&(f=s,s=t,t=e,e=this),e._inTouching===void 0&&(e._inTouching=new Al(e,f)),e._inTouching.on("intouch",t,s),this):this},offTouching(e,t,s){return typeof e=="function"&&(s=t,t=e,e=this),e._inTouching===void 0?this:(e._inTouching.off("intouch",t,s),this)},onTouchingEnd(e,t,s,f){return e?(typeof e=="function"&&(f=s,s=t,t=e,e=this),e._inTouching===void 0&&(e._inTouching=new Al(e,f)),e._inTouching.on("touchend",t,s),this):this},offTouchingEnd(e,t,s){return typeof e=="function"&&(s=t,t=e,e=this),e._inTouching===void 0?this:(e._inTouching.off("touchend",t,s),this)},enableTouching(e,t){return typeof e=="boolean"&&(t=e,e=void 0),e===void 0&&(e=this),e._inTouching===void 0?this:(e._inTouching.setEnable(t),this)},disableTouching(e){return e===void 0&&(e=this),e._inTouching===void 0?this:(e._inTouching.setEnable(!1),this)}},Pz={onOver(e,t,s){return e?(typeof e=="function"&&(s=t,t=e,e=this),e.setInteractive().on("pointerover",t,s),this):this},onOut(e,t,s){return e?(typeof e=="function"&&(s=t,t=e,e=this),e.setInteractive().on("pointerout",t,s),this):this}},XP=function(e,t,s,f){if(e==="parent"){for(var C,w=0,F=t.length;w<F;w++)if(C=t[w],!!rh(C,s,f))return C.pointToChild?C.pointToChild(s,f):WP.call(C,s,f)}else for(var w=0,F=t.length;w<F;w++){var N=t[w];if(rh(N,s,f))return N}return null},An=function(e,t,s,f,C,w,F,N){var z;if(w===void 0)z=C;else{var H=s[0];if(!H)return;var Z=F.camera,tt=C+Z.scrollX*(H.scrollFactorX-1),nt=w+Z.scrollY*(H.scrollFactorY-1);z=XP(f,s,tt,nt)}z&&e.emit(t,z,F,N)};const wz=Phaser.Utils.Objects.GetValue;var bz=function(e){var t=wz(e,"down",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerdown",Az,this))},Az=function(e,t,s,f){var C=this._childrenInteractive;An(C.eventEmitter,`${C.eventNamePrefix}down`,C.targetSizers,C.targetMode,e.worldX,e.worldY,e,f)};const Rz=Phaser.Utils.Objects.GetValue;var Lz=function(e){var t=Rz(e,"up",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerup",Oz,this))},Oz=function(e,t,s,f){var C=this._childrenInteractive;An(C.eventEmitter,`${C.eventNamePrefix}up`,C.targetSizers,C.targetMode,e.worldX,e.worldY,e,f)};const Fz=Phaser.Utils.Objects.GetValue;var Dz=function(e){var t=Fz(e,"over",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointermove",HP,this).on("pointerover",HP,this).on("pointerout",Iz,this))},HP=function(e,t,s,f){var C=this._childrenInteractive,w=C.targetSizers[0];if(w){var F=e.camera,N=e.worldX+F.scrollX*(w.scrollFactorX-1),z=e.worldY+F.scrollY*(w.scrollFactorY-1),H=XP(C.targetMode,C.targetSizers,N,z),Z=C.lastOverChild;H&&Z&&H===Z||(C.lastOverChild=H,An(C.eventEmitter,`${C.eventNamePrefix}out`,C.targetSizers,C.targetMode,Z,void 0,e,f),An(C.eventEmitter,`${C.eventNamePrefix}over`,C.targetSizers,C.targetMode,H,void 0,e,f))}},Iz=function(e,t){var s=this._childrenInteractive,f=s.lastOverChild;s.lastOverChild=null,An(s.eventEmitter,`${s.eventNamePrefix}out`,s.targetSizers,s.targetMode,f,void 0,e,t)};const Bz=Phaser.Utils.Objects.GetValue;var Nz=function(e){var t=Bz(e,"click",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("threshold")||(t.threshold=10);var s=this._childrenInteractive;this._click=new ha(this,t),this._click.on("click",function(f,C,w,F){An(s.eventEmitter,`${s.eventNamePrefix}click`,s.targetSizers,s.targetMode,w.worldX,w.worldY,w,F)},this)}};const gx=Phaser.Utils.Objects.GetValue;class yp extends Oc{constructor(t,s){var f=ul(t);f===t&&(t=void 0),super(f,s),this.gameObject=t,t&&t.setInteractive(gx(s,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.setEnable(gx(t,"enable",!0)),this.setDetectBounds(),this.gameObject===void 0?this.setDetectBounds(gx(t,"bounds",void 0)):this.setDetectBounds(),this.tracerState=xx,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(t){this.scene&&(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setDetectBounds(t){return this.bounds=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t,s){if(this.enable&&this.pointer===void 0){var f=this.bounds?this.bounds.contains(t.x,t.y):!0;f&&this.pointer!==t&&(this.pointer=t,this.pointerCamera=t.camera,this.lastPointer=t,this.movedState=!1,this.tracerState=YP,this.gameObject===void 0&&(this.isTouchingAnyObject=s.length>0),this.onDragStart())}}onPointerUp(t){if(this.enable){var s=this.bounds?this.bounds.contains(t.x,t.y):!0;s&&this.pointer===t&&(this.pointer=void 0,this.pointerCamera=void 0,this.movedState=!1,this.tracerState=xx,this.onDragEnd())}}onPointerMove(t){if(this.enable&&t.isDown){var s=this.bounds?this.bounds.contains(t.x,t.y):!0,f=this.pointer===t;!f&&s||(f&&!s?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===YP&&this.onDragEnd(),this.pointer=void 0,this.tracerState=xx,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(t,s){}postUpdate(t,s){}startTicking(){super.startTicking(),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=Gz,this}isPointerInGameObject(t,s,f){var C=this.lastPointer;return C?br(t,C,s,f):!1}}const xx=0,YP=1,Gz="IDLE",ah=Phaser.Utils.Objects.GetValue,Uz=Phaser.Math.Distance.Between;class Sp extends yp{constructor(t,s){super(t,s);var f=this,C={states:{IDLE:{enter:function(){f.stop(),f.tapsCount=0,f.x=0,f.y=0,f.worldX=0,f.worldY=0,f.lastPointer=void 0},exit:function(){var w=f.lastPointer;f.x=w.x,f.y=w.y,f.worldX=w.worldX,f.worldY=w.worldY}},BEGIN:{enter:function(){f.start(),f.tapsCount=0,f.emit("tappingstart",f,f.gameObject,f.lastPointer)}},RECOGNIZED:{enter:function(){f.start(),f.emit("tap",f,f.gameObject,f.lastPointer),f.emit(`${f.tapsCount}tap`,f,f.gameObject,f.lastPointer)}}},init:function(){this.state=oh},eventEmitter:!1};this.setRecongizedStateObject(new da(C))}resetFromJSON(t){super.resetFromJSON(t),this.setHoldTime(ah(t,"time",250)),this.setTapInterval(ah(t,"tapInterval",200)),this.setDragThreshold(ah(t,"threshold",9)),this.setTapOffset(ah(t,"tapOffset",10));var s=ah(t,"taps",void 0);return s!==void 0?this.setTaps(s):(this.setMaxTaps(ah(t,"maxTaps",void 0)),this.setMinTaps(ah(t,"minTaps",void 0))),this}onDragStart(){switch(this.state){case oh:this.state=Rl;break;case Rl:var t=this.lastPointer,s=Uz(t.upX,t.upY,t.x,t.y);s>this.tapOffset&&(this.state=Ll,this.state=Rl);break;case Ll:this.state=Rl;break}}onDragEnd(){this.state===Rl&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),this.maxTaps!==void 0&&this.tapsCount===this.maxTaps&&(this.state=Ll))}onDrag(){this.state!==oh&&this.pointer.getDistance()>this.dragThreshold&&(this.state=oh)}preUpdate(t,s){if(!(!this.isRunning||!this.enable)&&this.state===Rl){var f=this.lastPointer;if(f.isDown){var C=t-f.downTime;C>this.holdTime&&(this.state=oh)}else{var w=t-f.upTime;w>this.tapInterval&&(this.minTaps===void 0||this.tapsCount>=this.minTaps?this.state=Ll:this.state=oh)}}}postUpdate(t,s){!this.isRunning||!this.enable||this.state===Ll&&(this.state=oh)}get isTapping(){return this.state===Ll}get isTapped(){return this.isTapping}setHoldTime(t){return this.holdTime=t,this}setTapInterval(t){return this.tapInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setTapOffset(t){return this.tapOffset=t,this}setMaxTaps(t){return this.maxTaps=t,this}setMinTaps(t){return this.minTaps=t,this}setTaps(t,s){return s===void 0&&(s=t),this.setMinTaps(t).setMaxTaps(s),this}}const oh="IDLE",Rl="BEGIN",Ll="RECOGNIZED",$P=Phaser.Utils.Objects.GetValue;class Tp extends yp{constructor(t,s){super(t,s);var f=this,C={states:{IDLE:{enter:function(){f.x=0,f.y=0,f.worldX=0,f.worldY=0,f.lastPointer=void 0},exit:function(){var w=f.lastPointer;f.x=w.x,f.y=w.y,f.worldX=w.worldX,f.worldY=w.worldY}},BEGIN:{enter:function(){f.start()},exit:function(){f.stop()}},RECOGNIZED:{enter:function(){f.emit("pressstart",f,f.gameObject,f.lastPointer)},exit:function(){f.emit("pressend",f,f.gameObject,f.lastPointer)}}},init:function(){this.state=Cp},eventEmitter:!1};this.setRecongizedStateObject(new da(C))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold($P(t,"threshold",9)),this.setHoldTime($P(t,"time",251)),this}onDragStart(){this.state=_P,this.holdTime===0&&(this.state=yx)}onDragEnd(){this.state=Cp}onDrag(){this.state!==Cp&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Cp)}preUpdate(t,s){if(!(!this.isRunning||!this.enable)&&this.state===_P){var f=t-this.pointer.downTime;f>=this.holdTime&&(this.state=yx)}}get isPressing(){return this.state===yx}get isPressed(){return this.isPressing}setHoldTime(t){return this.holdTime=t,this}setDragThreshold(t){return this.dragThreshold=t,this}}const Cp="IDLE",_P="BEGIN",yx="RECOGNIZED",kz=Phaser.Utils.Objects.GetValue;class ZP extends yp{constructor(t,s){super(t,s);var f=this,C={states:{IDLE:{},BEGIN:{enter:function(){var w=f.pointer;f.startX=w.x,f.startY=w.y,f.startWorldX=w.worldX,f.startWorldY=w.worldY}},RECOGNIZED:{enter:function(){f.emit("panstart",f,f.gameObject,f.lastPointer)},exit:function(){var w=f.lastPointer;f.endX=w.x,f.endY=w.y;var F=xp(w,f.pointerCamera,!0);f.endWorldX=F.x,f.endWorldY=F.y,f.emit("panend",f,f.gameObject,f.lastPointer)}}},init:function(){this.state=KP},eventEmitter:!1};this.setRecongizedStateObject(new da(C))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(kz(t,"threshold",10)),this}onDragStart(){this.state=JP,this.dragThreshold===0&&(this.state=Mp)}onDragEnd(){this.state=KP}onDrag(){switch(this.state){case JP:if(this.pointer.getDistance()>=this.dragThreshold){this.state=Mp,this.dx=0,this.dy=0,this.dWorldX=0,this.dWorldY=0;var C=this.pointer;this.x=C.x,this.y=C.y,this.worldX=C.worldX,this.worldY=C.worldY}break;case Mp:var t=this.pointerCamera,s=this.pointer.position,f=this.pointer.prevPosition;this.dx=s.x-f.x,this.dy=s.y-f.y,this.dWorldX=this.dx/t.zoom,this.dWorldY=this.dy/t.zoom;var C=this.pointer;this.x=C.x,this.y=C.y;var w=xp(C,t,!0);this.worldX=w.x,this.worldY=w.y,this.emit("pan",this,this.gameObject,this.lastPointer);break}}get isPanning(){return this.state===Mp}get isPanned(){return this.isPanning}setDragThreshold(t){return this.dragThreshold=t,this}}const KP="IDLE",JP="BEGIN",Mp="RECOGNIZED",Vz=Phaser.Math.Distance.Between,zz=Phaser.Math.Angle.Between;var Wz={getDt:function(){var e=c0(this.scene);return e},getVelocity:function(){var e=this.pointer.position,t=this.pointer.prevPosition,s=Vz(t.x,t.y,e.x,e.y),f=s/(this.getDt()*.001);return f},getVelocityX:function(){var e=this.pointer.position,t=this.pointer.prevPosition,s=Math.abs(e.x-t.x),f=s/(this.getDt()*.001);return f},getVelocityY:function(){var e=this.pointer.position,t=this.pointer.prevPosition,s=Math.abs(e.y-t.y),f=s/(this.getDt()*.001);return f},getVelocityAngle:function(){var e=this.pointer.position,t=this.pointer.prevPosition,s=zz(t.x,t.y,e.x,e.y);return s}},Xz={"up&down":0,"left&right":1,"4dir":2,"8dir":3},Hz=function(e,t,s){switch(s===void 0?s={}:s===!0&&(s=Yz),s.left=!1,s.right=!1,s.up=!1,s.down=!1,e=(e+360)%360,t){case 0:e<180?s.down=!0:s.up=!0;break;case 1:e>90&&e<=270?s.left=!0:s.right=!0;break;case 2:e>45&&e<=135?s.down=!0:e>135&&e<=225?s.left=!0:e>225&&e<=315?s.up=!0:s.right=!0;break;case 3:e>22.5&&e<=67.5?(s.down=!0,s.right=!0):e>67.5&&e<=112.5?s.down=!0:e>112.5&&e<=157.5?(s.down=!0,s.left=!0):e>157.5&&e<=202.5?s.left=!0:e>202.5&&e<=247.5?(s.left=!0,s.up=!0):e>247.5&&e<=292.5?s.up=!0:(e>292.5&&e<=337.5&&(s.up=!0),s.right=!0);break}return s},Yz={};const Sx=Phaser.Utils.Objects.GetValue,$z=Phaser.Math.RadToDeg;class Id extends yp{constructor(t,s){super(t,s);var f=this,C={states:{IDLE:{enter:function(){f.x=0,f.y=0,f.worldX=0,f.worldY=0},exit:function(){var w=f.lastPointer;f.x=w.x,f.y=w.y,f.worldX=w.worldX,f.worldY=w.worldY}},BEGIN:{enter:function(){f.validDrag=!1}},RECOGNIZED:{enter:function(){f.start(),f.updateDirectionStates(),f.emit("swipe",f,f.gameObject,f.lastPointer)},exit:function(){f.stop(),f.clearDirectionStates()}}},init:function(){this.state=Tx},eventEmitter:!1};this.setRecongizedStateObject(new da(C)),this.clearDirectionStates()}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Sx(t,"threshold",10)),this.setVelocityThreshold(Sx(t,"velocityThreshold",1e3)),this.setDirectionMode(Sx(t,"dir","8dir")),this}onDragStart(){this.state=QP}onDragEnd(){this.state=Tx}onDrag(){this.state===QP&&(this.validDrag||(this.validDrag=this.dragThreshold===0||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=Cx))}postUpdate(t,s){!this.isRunning||!this.enable||this.state===Cx&&(this.state=Tx)}get isSwiping(){return this.state===Cx}get isSwiped(){return this.isSwiping}get dragVelocity(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity();break}return t}setDragThreshold(t){return this.dragThreshold=t,this}setVelocityThreshold(t){return this.velocityThreshold=t,this}setDirectionMode(t){return typeof t=="string"&&(t=Xz[t]),this.dirMode=t,this}updateDirectionStates(){var t=$z(this.getVelocityAngle());return Hz(t,this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}Object.assign(Id.prototype,Wz);const Tx="IDLE",QP="BEGIN",Cx="RECOGNIZED",Ep=Phaser.Utils.Objects.GetValue,_z=Phaser.Utils.Array.SpliceOne,Zz=Phaser.Math.Distance.Between,Kz=Phaser.Math.Angle.Between;class Mx{constructor(t,s){var f=ul(t);f===t&&(t=void 0);var C=f.input.manager.pointersTotal-1;C<2&&f.input.addPointer(2-C),this.scene=f,this.gameObject=t,t&&t.setInteractive(Ep(s,"inputConfig",void 0)),this.setEventEmitter(Ep(s,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.setEnable(Ep(t,"enable",!0)),this.bounds=Ep(t,"bounds",void 0),this.tracerState=Pp,this.pointers.length=0,ne(this.movedState),this}boot(){this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){this.scene&&(this.destroyEventEmitter(),this.pointers.length=0,ne(this.movedState),this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0,this.gameObject=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t){if(this.enable&&this.pointers.length!==2){var s=this.bounds?this.bounds.contains(t.x,t.y):!0;if(s){var f=this.pointers.indexOf(t);if(f===-1)switch(this.movedState[t.id]=!1,this.pointers.push(t),this.pointerCamera=t.camera,this.tracerState){case Pp:this.tracerState=Nd,this.onDrag1Start();break;case Nd:this.tracerState=Ar,this.onDrag2Start();break}}}}onPointerUp(t){if(this.enable){var s=this.bounds?this.bounds.contains(t.x,t.y):!0;if(s){var f=this.pointers.indexOf(t);if(f!==-1)switch(delete this.movedState[t.id],_z(this.pointers,f),this.tracerState){case Nd:this.tracerState=Pp,this.onDrag1End();break;case Ar:this.tracerState=Nd,this.onDrag2End(),this.onDrag1Start();break}}}}onPointerMove(t){if(this.enable&&t.isDown){var s=this.bounds?this.bounds.contains(t.x,t.y):!0,f=this.pointers.indexOf(t)!==-1;if(!(!f&&s)){if(f&&!s)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case Nd:this.onDrag1();break;case Ar:this.onDrag2();break}}}}dragCancel(){return this.tracerState===Ar&&this.onDrag2End(),this.pointers.length=0,ne(this.movedState),this.tracerState=Pp,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==Ar)return 0;var t=this.pointers[0],s=this.pointers[1];return Zz(t.x,t.y,s.x,s.y)}get angleBetween(){if(this.tracerState!==Ar)return 0;var t=this.pointers[0],s=this.pointers[1];return Kz(t.x,t.y,s.x,s.y)}get drag1Vector(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var s=t.position,f=t.prevPosition;Bd.x=s.x-f.x,Bd.y=s.y-f.y}else Bd.x=0,Bd.y=0;return Bd}get centerX(){if(this.tracerState!==Ar)return 0;var t=this.pointers[0].position,s=this.pointers[1].position;return(t.x+s.x)/2}get centerY(){if(this.tracerState!==Ar)return 0;var t=this.pointers[0].position,s=this.pointers[1].position;return(t.y+s.y)/2}get prevCenterX(){if(this.tracerState!==Ar)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,s=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+s.x)/2}get prevCenterY(){if(this.tracerState!==Ar)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,s=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+s.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=Jz,this}isPointer0InGameObject(t,s,f){var C=this.pointers[0];return C?br(t,C,s,f):!1}isPointer1InGameObject(t,s,f){var C=this.pointers[1];return C?br(t,C,s,f):!1}}Object.assign(Mx.prototype,Ju);var Bd={};const Pp=0,Nd=1,Ar=2,Jz="IDLE",Qz=Phaser.Utils.Objects.GetValue;class jP extends Mx{constructor(t,s){super(t,s);var f=this,C={states:{IDLE:{enter:function(){f.prevDistance=void 0,f.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function(){f.emit("pinchstart",f)},exit:function(){f.emit("pinchend",f)}}},init:function(){this.state=qP},eventEmitter:!1};this.setRecongizedStateObject(new da(C))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Qz(t,"threshold",0)),this}onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=tw,this.dragThreshold===0&&(this.state=wp)}onDrag2End(){this.state=qP}onDrag2(){switch(this.state){case tw:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.prevDistance=t,this.state=wp}break;case wp:var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.emit("pinch",this),this.prevDistance=t;break}}get isPinching(){return this.state===wp}get isPinched(){return this.isPinching}setDragThreshold(t){return this.dragThreshold=t,this}}const qP="IDLE",tw="BEGIN",wp="RECOGNIZED",jz=Phaser.Math.RotateAround;var ew=function(e,t,s,f){return jz(e,t,s,f),e.rotation+=f,e},qz=function(e,t,s,f){return f===void 0?f={}:f===!0&&(f=t6),s.getWorldPoint(e,t,f),f},t6={},e6=function(e,t){if(!this.isRotation)return this;t===void 0&&(t=this.pointers[0].camera);var s=this.movementCenterX,f=this.movementCenterY,C=qz(this.centerX,this.centerY,t,!0),w=C.x,F=C.y,N=this.rotation;if(Array.isArray(e))for(var z=e,H=0,Z=z.length;H<Z;H++)e=z[H],e.x+=s,e.y+=f,ew(e,w,F,N);else e.x+=s,e.y+=f,ew(e,w,F,N);return this};const i6=Phaser.Utils.Objects.GetValue,Ex=Phaser.Math.Angle.WrapDegrees,iw=Phaser.Math.Angle.ShortestBetween,Px=Phaser.Math.RadToDeg,s6=Phaser.Math.DegToRad;class wx extends Mx{constructor(t,s){super(t,s);var f=this,C={states:{IDLE:{enter:function(){f.prevAngle=void 0,f.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){f.emit("rotatestart",f)},exit:function(){f.emit("rotateend",f)}}},init:function(){this.state=sw},eventEmitter:!1};this.setRecongizedStateObject(new da(C))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(i6(t,"threshold",0)),this}onDrag2Start(){this.prevAngle=Ex(Px(this.angleBetween)),this.state=nw,this.dragThreshold===0&&(this.state=bp)}onDrag2End(){this.state=sw}onDrag2(){switch(this.state){case nw:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=Ex(Px(this.angleBetween));this.angle=iw(this.prevAngle,t),this.prevAngle=t,this.state=bp}break;case bp:var t=Ex(Px(this.angleBetween));this.angle=iw(this.prevAngle,t),this.prevAngle=t,this.emit("rotate",this);break}}get isRotating(){return this.state===bp}get isRotated(){return this.isRotating}get rotation(){return s6(this.angle)}setDragThreshold(t){return this.dragThreshold=t,this}}var n6={spinObject:e6};Object.assign(wx.prototype,n6);const sw="IDLE",nw="BEGIN",bp="RECOGNIZED",r6=Phaser.Utils.Objects.GetValue;var a6=function(e){var t=r6(e,"tap",void 0);if(t!==!1){t===!0&&(t=void 0);var s=this._childrenInteractive;this._tap=new Sp(this,t),this._tap.on("tap",function(f,C,w){An(s.eventEmitter,`${s.eventNamePrefix}${f.tapsCount}tap`,s.targetSizers,s.targetMode,f.worldX,f.worldY,w,f),An(s.eventEmitter,`${s.eventNamePrefix}tap`,s.targetSizers,s.targetMode,f.worldX,f.worldY,w,f)},this)}};const o6=Phaser.Utils.Objects.GetValue;var h6=function(e){var t=o6(e,"press",void 0);if(t!==!1){t===!0&&(t=void 0);var s=this._childrenInteractive;this._press=new Tp(this,t),this._press.on("pressstart",function(f,C,w){An(s.eventEmitter,`${s.eventNamePrefix}pressstart`,s.targetSizers,s.targetMode,f.worldX,f.worldY,w,f)},this).on("pressend",function(f,C,w){An(s.eventEmitter,`${s.eventNamePrefix}pressend`,s.targetSizers,s.targetMode,f.worldX,f.worldY,w,f)},this)}};const l6=Phaser.Utils.Objects.GetValue;var u6=function(e){var t=l6(e,"swipe",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("dir")||(t.dir="4dir");var s=this._childrenInteractive;this._swipe=new Id(this,t),this._swipe.on("swipe",function(f,C,w){var F=f.left?"left":f.right?"right":f.up?"up":"down";An(s.eventEmitter,`${s.eventNamePrefix}swipe${F}`,s.targetSizers,s.targetMode,f.worldX,f.worldY,w,f),An(s.eventEmitter,`${s.eventNamePrefix}swipe`,s.targetSizers,s.targetMode,f.worldX,f.worldY,w,f)},this)}};const Gd=Phaser.Utils.Objects.GetValue;var Ap=function(e,t){return e.setInteractive(),Gd(t,"dropZone",!1)&&(e.input.dropZone=!0),e._childrenInteractive={targetSizers:Gd(t,"targets",[e]),targetMode:Gd(t,"targetMode","parent"),eventEmitter:Gd(t,"eventEmitter",e),eventNamePrefix:Gd(t,"inputEventPrefix","child.")},bz.call(e,t),Lz.call(e,t),Dz.call(e,t),Nz.call(e,t),a6.call(e,t),h6.call(e,t),u6.call(e,t),e},d6=function(e){return Ap(this,e),this},f6=function(){for(var e=this.getAllChildren([this]),t=0,s=e.length;t<s;t++){var f=e[t];f.emit.apply(f,arguments)}return this},rw={getSizerConfig:L8,getChildPrevState:O8,pushIntoBounds:F8,drawBounds:Y8,resolveWidth:Q0,hasWidthWrap:j0,resolveChildrenWidth:aV,runWidthWrap:q0,resolveHeight:tx,hasHeightWrap:ex,resolveChildrenHeight:oV,runHeightWrap:ix,getChildWidth:hV,getChildHeight:lV,getExpandedChildWidth:uV,getExpandedChildHeight:dV,getChildrenWidth:fV,getChildrenHeight:cV,addChildrenMap:xP,addElement:xP,removeChildrenMap:eV,getElement:iV,getChildIndex:nV,getAllChildrenSizers:pV,getChildrenSizers:vV,preLayout:Ad,layout:gV,runLayout:SV,layoutChildren:MV,layoutBackgrounds:xz,postLayout:EV,setAnchor:wV,isInTouching:cz,pointToChild:WP,setDraggable:Sz,setChildrenInteractive:d6,broadcastEvent:f6};Object.assign(rw,rV,Z8,tV,El,ua,Ld,fp,zV,HV,BP,px,Cz,Ez,Pz,_V,gp,mV,uz);const ca=Phaser.Utils.Objects.GetValue;let hh=class extends dn{constructor(t,s,f,C,w,F){super(t,s,f,1,1),this.isRexSizer=!0;var N=ca(F,"origin",.5),z=ca(F,"originX",N),H=ca(F,"originY",N);this.setOrigin(z,H),this.setMinSize(C,w),this.setName(ca(F,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.childrenMap={},this.layoutedChildren=void 0,this.runChildrenWrapFlag=!1,this.enableLayoutWarn(!1);var Z=ca(F,"anchor",void 0);Z&&this.setAnchor(Z),this.setInnerPadding(ca(F,"space",0));var tt=ca(F,"draggable",!1);tt&&this.setDraggable(tt),this.setSizerEventsEnable(ca(F,"sizerEvents",!1)),this.setDirty(!0),ca(F,"enableLayer",!1)&&this.enableLayer()}destroy(t){if(!(!this.scene||this.ignoreDestroy)){if(t)for(var s=this.getAllChildrenSizers([this]),f=0,C=s.length;f<C;f++)s[f].sizerEventsEnable=!1;super.destroy(t),ne(this.backgroundChildren),ne(this.sizerChildren),this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(t,s){return this.setMinWidth(t).setMinHeight(s),this}setMinWidth(t){return t==null&&(t=0),this.minWidth=t,this}setMinHeight(t){return t==null&&(t=0),this.minHeight=t,this}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSizerEventsEnable(t){return t===void 0&&(t=!0),this.sizerEventsEnable=t,this}enableLayoutWarn(t){return t===void 0&&(t=!0),this.layoutWarnEnable=t,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-Ze(this)*this.originX}set left(t){this.x+=t-this.left}alignLeft(t){return this.left=t,this}get right(){return this.left+Ze(this)}set right(t){this.x+=t-this.right}alignRight(t){return this.right=t,this}get centerX(){return this.left+Ze(this)/2}set centerX(t){this.x+=t-this.centerX}alignCenterX(t){return this.centerX=t,this}get top(){return this.y-Ke(this)*this.originY}set top(t){this.y+=t-this.top}alignTop(t){return this.top=t,this}get bottom(){return this.top+Ke(this)}set bottom(t){this.y+=t-this.bottom}alignBottom(t){return this.bottom=t,this}get centerY(){return this.top+Ke(this)/2}set centerY(t){this.y+=t-this.centerY}alignCenterY(t){return this.centerY=t,this}get innerLeft(){return this.left+this.space.left*this.scaleX}get innerRight(){return this.right-this.space.right*this.scaleX}get innerTop(){return this.top+this.space.top*this.scaleY}get innerBottom(){return this.bottom-this.space.bottom*this.scaleY}get innerWidth(){return(this.width-this.space.left-this.space.right)*this.scaleX}get innerHeight(){return(this.height-this.space.top-this.space.bottom)*this.scaleY}get minInnerWidth(){var t=(this.minWidth-this.space.left-this.space.right)*this.scaleX;return Math.max(t,0)}get minInnerHeight(){var t=(this.minHeight-this.space.top-this.space.bottom)*this.scaleY;return Math.max(t,0)}};Object.assign(hh.prototype,rw);var c6=function(){if(this.rexSizer.hidden)return 0;var e=0,t=this.sizerChildren,s,f,C,w=!1;for(var F in t)s=t[F],C=this.getChildWidth(s),C===void 0&&(w=!0),!w&&(f=s.rexSizer.padding,C+=(f.left+f.right)*this.scaleX,e=Math.max(C,e));if(!w)return e+(this.space.left+this.space.right)*this.scaleX},p6=function(){if(this.rexSizer.hidden)return 0;var e=0,t=this.sizerChildren,s,f,C,w=!1;for(var F in t)s=t[F],C=this.getChildHeight(s),C===void 0&&(w=!0),!w&&(f=s.rexSizer.padding,C+=(f.top+f.bottom)*this.scaleY,e=Math.max(C,e));if(!w)return e+(this.space.top+this.space.bottom)*this.scaleY},v6=function(e,t){t===void 0&&(t=this.width*this.scaleX);var s,f=e.rexSizer;if(f.expandWidth){var C=t-(this.space.left+this.space.right)*this.scaleX,w=f.padding;s=C-(w.left+w.right)*this.scaleX}return s},m6=function(e,t){t===void 0&&(t=this.height);var s,f=e.rexSizer;if(f.expandHeight){var C=t-(this.space.top+this.space.bottom)*this.scaleY,w=f.padding;s=C-(w.top+w.bottom)*this.scaleY}return s},g6=function(e){e===void 0&&(e=[]);var t=this.sizerChildren,s;for(var f in t)s=t[f],s.isRexSizer&&e.push(s);return e},bx=function(e,t,s,f){if(s===void 0)s=0;else{var C=typeof s;C==="boolean"?(f=s,s=0):C==="string"&&(s=x6[s])}f===void 0?f={}:f===!0&&(f=y6);var w=t.width/e.width,F=t.height/e.height,N=s?Math.max(w,F):Math.min(w,F);return f.width=e.width*N,f.height=e.height*N,f};const x6={fit:0,FIT:0,envelop:1,ENVELOP:1};var y6={},Ax=function(e,t){e.layoutWarnEnable&&(e.width<e.childrenWidth&&console.warn(`Layout width error: Parent=${t.constructor.name}, Child=${e.constructor.name}`),e.height<e.childrenHeight&&console.warn(`Layout height error: Parent=${t.constructor.name}, Child=${e.constructor.name}`))},S6=function(){var e,t,s,f=this.innerLeft,C=this.innerTop,w=this.innerWidth,F=this.innerHeight,N,z,H,Z,tt,nt,st,ht,ft,dt=this.sizerChildren;for(var gt in dt)e=dt[gt],!e.rexSizer.hidden&&(t=e.rexSizer,s=t.padding,Od.call(this,e),st=this.getExpandedChildWidth(e),ht=this.getExpandedChildHeight(e),t.aspectRatio>0&&(Rx.width=t.aspectRatio,Rx.height=1,Lx.width=st,Lx.height=ht,ft=bx(Rx,Lx,"FIT",!0),st=ft.width,ht=ft.height),e.isRexSizer?(e.runLayout(this,st,ht),Ax(e,this)):Ms(e,st,ht),N=f+s.left*this.scaleX,H=w-(s.left+s.right)*this.scaleX,z=C+s.top*this.scaleY,Z=F-(s.top+s.bottom)*this.scaleY,st===void 0&&(st=Ze(e)),ht===void 0&&(ht=Ke(e)),tt=(t.alignOffsetX+t.alignOffsetOriginX*st)*this.scaleX,nt=(t.alignOffsetY+t.alignOffsetOriginY*ht)*this.scaleY,Fd.call(this,e,N,z,H,Z,t.align,tt,nt))},Rx={},Lx={};const aw=Phaser.Utils.Objects.IsPlainObject,fn=Phaser.Utils.Objects.GetValue,ow=Phaser.Display.Align.CENTER,T6=Phaser.Utils.String.UUID;var C6=function(e,t,s,f,C,w,F,N,z,H){var Z,tt;if(wd.call(this,e),aw(t)){var st=t;t=fn(st,"key",void 0),s=fn(st,"align",ow),f=fn(st,"padding",0),C=fn(st,"expand",!0),e.isRexSizer||(w=fn(st,"minWidth",e._minWidth),F=fn(st,"minHeight",e._minHeighted)),N=fn(st,"offsetX",0),z=fn(st,"offsetY",0),Z=fn(st,"offsetOriginX",0),tt=fn(st,"offsetOriginY",0),H=fn(st,"aspectRatio",0)}var nt=t!==void 0;nt||(t=T6()),typeof s=="string"&&(s=Cl[s]),s===void 0&&(s=ow),f===void 0&&(f=0),C===void 0&&(C=!0),e.isRexSizer||(w===void 0&&(w=e._minWidth),F===void 0&&(F=e._minHeight)),N===void 0&&(N=0),z===void 0&&(z=0),Z===void 0&&(Z=0),tt===void 0&&(tt=0),H===void 0?H=0:H===!0&&(H=Ze(e)/Ke(e)),H>0&&(C=!0,w===void 0&&(w=0),F===void 0&&(F=0));var st=this.getSizerConfig(e);return st.align=s,st.padding=nh(f),aw(C)?(st.expandWidth=fn(C,"width",!1),st.expandHeight=fn(C,"height",!1)):(st.expandWidth=C,st.expandHeight=C),e.isRexSizer||(st.expandWidth&&(e.minWidth=w===void 0?Ze(e):w),st.expandHeight&&(e.minHeight=F===void 0?Ke(e):F)),st.alignOffsetX=N,st.alignOffsetY=z,st.alignOffsetOriginX=Z,st.alignOffsetOriginY=tt,st.aspectRatio=H,this.sizerChildren.hasOwnProperty(t)&&this.sizerChildren[t].destroy(),this.sizerChildren[t]=e,nt&&this.addChildrenMap(t,e),this},M6={add:C6};const E6=dn.prototype.clear;var Rp=function(e){this.backgroundChildren&&(this.backgroundChildren.length=0);var t=!e&&this.sizerEventsEnable,s;if(t&&(s=this.getChildren([])),E6.call(this,e),t)for(var f,C=0,w=s.length;C<w;C++)f=s[C],f.emit("sizer.remove",f,this),this.emit("remove",f,this);return this},P6={remove(e,t){var s;if(typeof e=="string"){if(s=e,e=this.sizerChildren[s],!e)return this}else{if(this.getParentSizer(e)!==this)return this;s=this.childToKey(e)}return s&&(delete this.sizerChildren[s],this.childrenMap.hasOwnProperty(s)&&delete this.childrenMap[s]),bd.call(this,e,t),this},removeAll(e){for(var t in this.sizerChildren)this.remove(t,e);return this},clear(e){for(var t in this.sizerChildren)delete this.sizerChildren[t],this.childrenMap.hasOwnProperty(t)&&delete this.childrenMap[t];return Rp.call(this,e),this}},hw={getChildrenWidth:c6,getChildrenHeight:p6,getExpandedChildWidth:v6,getExpandedChildHeight:m6,getChildrenSizers:g6,layoutChildren:S6};Object.assign(hw,M6,P6);var Lp=function(e,t){if(Array.isArray(e))return e.indexOf(t);for(var s in e)if(e[s]===t)return s;return null};const lw=Phaser.Utils.Objects.IsPlainObject,Ol=Phaser.Utils.Objects.GetValue;class Rn extends hh{constructor(t,s,f,C,w,F){lw(s)?(F=s,s=Ol(F,"x",0),f=Ol(F,"y",0),C=Ol(F,"width",void 0),w=Ol(F,"height",void 0)):lw(C)&&(F=C,C=Ol(F,"width",void 0),w=Ol(F,"height",void 0)),super(t,s,f,C,w,F),this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(t){if(typeof t=="string"){var s=t;if(this.sizerChildren.hasOwnPropery(s))return s}else return Lp(this.sizerChildren,t);return null}}Object.assign(Rn.prototype,hw);var w6=Phaser.Math.Distance.Between,Op=function(e,t,s){var f=e.width/2;return w6(f,f,t,s)<=f};const b6=Phaser.Math.Angle.Between,A6=Phaser.Math.Angle.Normalize;var uw=function(e,t,s){if(this.enable&&e.isDown){var f=this.sizerChildren.knob;if(Op(f,t,s)){var C=f.width/2,w=f.startAngle,F=b6(C,C,t,s),N=f.anticlockwise?w-F:F-w,z=A6(N)/(2*Math.PI);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-z)<.1?this.value=z:this.easeValueTo(z)}}},R6=function(){var e=this.sizerChildren.knob;e.on("pointerdown",uw,this).on("pointermove",uw,this).setInteractive()};const dw=Phaser.Math.Angle.Between,L6=Phaser.Math.Angle.Wrap;var O6=function(e,t,s){if(!(!this.enable||this.panPointer)){var f=this.sizerChildren.knob;Op(f,t,s)&&fw.call(this,e)}},F6=function(e,t,s){if(this.enable&&e.isDown){var f=this.sizerChildren.knob;switch(this.panState){case Ox:Op(f,t,s)&&fw.call(this,e);break;case pw:Op(f,t,s)?I6.call(this):cw.call(this);break}}},D6=function(e,t,s){!this.enable||this.panPointer!==e||cw.call(this)},fw=function(e){this.panPointer=e,this.panState=pw},cw=function(){this.panPointer=void 0,this.panState=Ox},I6=function(){var e=this.panPointer.prevPosition,t=this.panPointer.position,s=this.sizerChildren.knob,f=dw(s.x,s.y,e.x,e.y),C=dw(s.x,s.y,t.x,t.y),w=s.anticlockwise?f-C:C-f,F=L6(w)/(Math.PI*2);this.stopEaseValue(),this.value+=F};const Ox=0,pw=1;var B6=function(){var e=this.sizerChildren.knob;e.on("pointerdown",O6,this).on("pointermove",F6,this).on("pointerup",D6,this).setInteractive(),this.panPointer=void 0,this.panState=Ox},N6=function(e,t){return this.textFormatCallback=e,this.textFormatCallbackScope=t,this},vw=function(e){e===void 0&&(e=this.value);var t;return this.textFormatCallbackScope?t=this.textFormatCallback(e):t=this.textFormatCallback.call(this.textFormatCallbackScope,e),t},G6=function(e){var t=this.sizerChildren.text;return t&&this.textFormatCallback&&(t.setText(vw.call(this,e)),t.layout&&t.layout()),this},U6={setTextFormatCallback:N6,getFormatText:vw,updateText:G6};const qn=Phaser.Utils.Objects.GetValue,k6=Phaser.Math.Snap.To;class Fx extends Qa(Rn){constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexKnob",this.bootProgressBase(s);var f=qn(s,"background",void 0),C=qn(s,"text",void 0);f&&this.addBackground(f),C&&(s.textColor=void 0,s.textStrokeColor=void 0,this.setTextFormatCallback(qn(s,"textFormatCallback",void 0),qn(s,"textFormatCallbackScope",void 0)),s.textFormatCallback=void 0,s.textFormatCallbackScope=void 0);var w=new Qc(t,s);w.setDepth(qn(s,"knobDepth",0)),w._value=-1,t.add.existing(w),this.add(w,"knob"),C&&(this.add(C,"text","center",0,!1),t.children.moveBelow(w,C)),this.addChildrenMap("background",f),this.addChildrenMap("knob",w),this.addChildrenMap("text",C),this.setEnable(qn(s,"enable",void 0)),this.setGap(qn(s,"gap",void 0)),this.setValue(qn(s,"value",0),qn(s,"min",void 0),qn(s,"max",void 0));var F=qn(s,"input",0);switch(typeof F=="string"&&(F=V6[F]),F){case 0:B6.call(this);break;case 1:R6.call(this);break}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this.sizerChildren.knob.value}set value(t){this.gap!==void 0&&(t=k6(t,this.gap));var s=this.value;this.sizerChildren.knob.value=t;var f=this.value;s!==f&&(this.updateText(),this.eventEmitter.emit("valuechange",f,s,this.eventEmitter))}}const V6={pan:0,drag:0,click:1,none:-1};Object.assign(Fx.prototype,U6),c.register("knob",function(e){var t=new Fx(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.Knob",Fx);const z6={arc:gl,circle:wn,curve:S9,ellipse:T9,line:Za,lines:vs,rectangle:W9,roundRectangle:Zc,triangle:H9},mw=Phaser.Utils.Objects.GetValue,W6=Phaser.Utils.Objects.IsPlainObject,X6=function(){for(var e=this.getShapes(),t=0,s=e.length;t<s;t++)e[t].lineStyle().fillStyle()};var H6={createShape(e,t){var s=z6[e],f=new s;return t&&f.setName(t),f},buildShapes(e){var t=mw(e,"create",void 0);if(W6(t)){var s=t;for(var f in s){var C=s[f];switch(typeof C){case"number":for(var w=0;w<C;w++)this.addShape(this.createShape(f));break;case"string":this.addShape(this.createShape(f,C));break;default:for(var F=C,w=0,N=F.length;w<N;w++)this.addShape(this.createShape(f,F[w]));break}}}else if(Array.isArray(t))for(var s=t,w=0,N=s.length;w<N;w++){var z=s[w];this.addShape(this.createShape(z.type,z.name))}else typeof t=="function"&&t.call(this);this.setUpdateShapesCallback(mw(e,"update"))},setUpdateShapesCallback(e){return e===void 0&&(e=X6),this.dirty=this.dirty||this.updateCallback!==e,this.updateCallback=e,this},updateShapes(){this.updateCallback.call(this)}};const Ud=Phaser.Utils.Objects.GetValue,Y6=Phaser.Utils.Objects.IsPlainObject;class Fp extends oa{constructor(t,s,f,C,w,F){Y6(s)&&(F=s,s=Ud(F,"x",0),f=Ud(F,"y",0),C=Ud(F,"width",2),w=Ud(F,"height",2)),super(t,s,f,C,w),this.type=Ud(F,"type","rexCustomShapes"),this.buildShapes(F)}get centerX(){return this.width/2}get centerY(){return this.height/2}worldToLocalXY(t,s,f,C){return typeof f=="boolean"&&(C=f,f=void 0),g1(this,t,s,f,C)}}Object.assign(Fp.prototype,H6),c.register("customShapes",function(e,t,s,f,C){var w=new Fp(this.scene,e,t,s,f,C);return this.scene.add.existing(w),w}),j(window,"RexPlugins.UI.CustomShapes",Fp);const kd=Phaser.Utils.Objects.GetValue,$6=Phaser.Utils.Objects.IsPlainObject;class Rr extends Qa(Fp){constructor(t,s,f,C,w,F){$6(s)&&(F=s,s=kd(F,"x",0),f=kd(F,"y",0),C=kd(F,"width",2),w=kd(F,"height",2)),F===void 0&&(F={}),F.type||(F.type="rexCustomProgress"),super(t,s,f,C,w,F),this.bootProgressBase(F),this.setValue(kd(F,"value",0))}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}}c.register("customProgress",function(e,t,s,f,C){var w=new Rr(this.scene,e,t,s,f,C);return this.scene.add.existing(w),w}),j(window,"RexPlugins.UI.CustomProgress",Rr);var _6=function(e){return this.easeValueTask||(this.easeValueTask=new Kn(this,{eventEmitter:null})),e!==void 0&&(this.duration=e,this.easeValueTask.stop()),this.easeValueTask.isRunning?this:(this.easeValueTask.restart({key:"value",from:0,to:1,duration:this.duration,ease:this.ease,repeat:-1,delay:this.delay,repeatDelay:this.repeatDelay}),this.setDirty(),this)},Z6=function(){return this.easeValueTask?(this.easeValueTask.stop(),this.setDirty(),this):this},K6=function(){return this.easeValueTask?(this.easeValueTask.pause(),this.setDirty(),this):this},J6=function(){return this.easeValueTask?(this.easeValueTask.pause(),this.setDirty(),this):this},Q6={start:_6,stop:Z6,pause:K6,resume:J6};const tr=Phaser.Utils.Objects.GetValue;class gw extends oa{constructor(t,s){var f=tr(s,"x",0),C=tr(s,"y",0),w=tr(s,"width",64),F=tr(s,"height",64);super(t,f,C,w,F),this.resetFromConfig(s,!0),this.buildShapes(s),tr(s,"start",!0)&&this.start()}resetFromConfig(t,s){s===void 0&&(s=!1);var f;return f=s?1e3:this.duration,this.setDuration(tr(t,"duration",f)),f=s?"Linear":this.ease,this.setEase(tr(t,"ease",f)),f=s?0:this.delay,this.setDelay(tr(t,"delay",f)),f=s?0:this.repeatDelay,this.setRepeatDelay(tr(t,"repeatDelay",f)),f=s?16777215:this.color,this.setColor(tr(t,"color",f)),f=s?0:this.value,this.setValue(tr(t,"value",f)),this}buildShapes(){}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}get color(){return this._color}set color(t){this.isColorChanged=this.isColorChanged||this._color!==t,this.dirty=this.dirty||this.isColorChanged,this._color=t,this.setShapesColor(t)}setColor(t){return this.color=t,this}setShapesColor(t){}get value(){return this._value}set value(t){t=Phaser.Math.Clamp(t,0,1),this.dirty=this.dirty||this._value!=t,this._value=t}setValue(t){return this.value=t,this}setDuration(t){return this.duration=t,this}setDelay(t){return this.delay=t,this}setRepeatDelay(t){return this.repeatDelay=t,this}setEase(t){return this.ease=t,this}get isRunning(){return this.tweenTask?this.tweenTask.isRunning:!1}}Object.assign(gw.prototype,Q6);const io=Phaser.Math.DegToRad,j6=Phaser.Math.Linear,q6=Phaser.Math.Easing.Expo.In,t7={right:0,down:1,left:2,up:3};var e7=function(e,t,s,f,C,w,F,N,z,H,Z){var tt=Fl(t,0,f,C,w,F,N,z,H,Z);e.startAt(tt.x,tt.y);var nt=Fl(s,0,f,C,w,F,N,z,H,Z);e.lineTo(nt.x,nt.y);var st=Fl(s,s,f,C,w,F,N,z,H,Z);e.lineTo(st.x,st.y);var ht=Fl(0,s,f,C,w,F,N,z,H,Z);e.lineTo(ht.x,ht.y);var ft=Fl(0,t,f,C,w,F,N,z,H,Z);e.lineTo(ft.x,ft.y);var dt=Fl(t,t,f,C,w,F,N,z,H,Z);e.lineTo(dt.x,dt.y),e.close()},Dx={},Fl=function(e,t,s,f,C,w,F,N,z,H){var Z=e*s,tt=t*f;return Dx.x=F*Z+N*tt+C,Dx.y=z*Z+H*tt+w,Dx},Dp={setDirection(e){return typeof e=="string"&&(e=t7[e]),this.direction=e,this},buildShapes(){for(var e=0;e<3;e++)this.addShape(new vs)},updateShapes(){var e,t,s,f,C,w;switch(this.direction){case 1:e=this.centerX,t=this.centerY-this.radius;var F=io(315);s=Math.cos(F),f=Math.sin(F);var N=io(45);C=Math.cos(N),w=Math.sin(N);break;case 3:e=this.centerX,t=this.centerY+this.radius;var F=io(135);s=Math.cos(F),f=Math.sin(F);var N=io(225);C=Math.cos(N),w=Math.sin(N);break;case 2:e=this.centerX+this.radius,t=this.centerY;var F=io(225);s=Math.cos(F),f=Math.sin(F);var N=io(315);C=Math.cos(N),w=Math.sin(N);break;default:e=this.centerX-this.radius,t=this.centerY;var F=io(45);s=Math.cos(F),f=Math.sin(F);var N=io(135);C=Math.cos(N),w=Math.sin(N);break}for(var z=this.radius/7,H=this.getShapes(),Z=0,tt=H.length;Z<tt;Z++){var nt=H[Z],st=(this.value+(tt-Z)*.1)%1;st=q6(hi(st));var ht=j6(.25,1,st);nt.fillStyle(this.color,ht);var ft=Z*3+1,dt=ft+2;e7(nt,ft,dt,z,z,e,t,s,f,C,w)}}};const i7=Phaser.Math.Linear;var s7={buildShapes(){for(var e=0;e<4;e++)this.addShape(new Za);this.prevValue=void 0},updateShapes(){var e=this.centerX,t=this.centerY,s=this.radius,f=e-s,C=t+s,w=s*2,F=this.getShapes(),N=F.length,z=s*2/N,H=z*.7;if(this.prevValue===void 0||this.prevValue>this.value)for(var Z=0;Z<N;Z++){var tt=F[Z],nt=this.prevValue===void 0?Math.random():tt.getData("to");tt.setData("from",nt).setData("to",Math.random())}this.prevValue=this.value;for(var Z=0;Z<N;Z++){var tt=F[Z],nt=tt.getData("from"),st=tt.getData("to"),ht=i7(nt,st,this.value),ft=ht*w,dt=f+z*(Z+.5);tt.lineStyle(H,this.color,1).setP0(dt,C).setP1(dt,C-ft)}}};const n7=Phaser.Math.Linear;var r7={buildShapes(){for(var e=0;e<3;e++)this.addShape(new wn)},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.radius,f=s*.1,C=Math.ceil(f*.25),w=1-hi(this.value),F=n7(.3,.9,w)*s,N=this.getShapes(),z=0,H=N.length;z<H;z++){var Z=N[z],w=(this.value+z/H)%1,tt=Math.PI*2*w;Z.lineStyle(C,this.color).setRadius(f).setCenterPosition(e+Math.cos(tt)*F,t+Math.sin(tt)*F)}}};const a7=Phaser.Math.Linear,o7=Phaser.Math.Easing.Expo.In;var h7={buildShapes(){for(var e=5,t=0;t<e;t++){var s=new Za;this.addShape(s);var f=hi(t/(e-1))/2;s.setData("offset",f)}},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.radius,f=e-s,C=s*2,w=this.getShapes(),F=w.length,N=s*2/F,z=N*.7,H=0;H<F;H++){var Z=w[H],tt=(this.value+Z.getData("offset"))%1;tt=o7(hi(tt));var nt=a7(.4,1,tt)*C,st=f+N*(H+.5);Z.lineStyle(z,this.color,1).setP0(st,t-nt/2).setP1(st,t+nt/2)}}},l7={buildShapes(){this.addShape(new vs().setName("border")),this.addShape(new vs().setName("fill"))},updateShapes(){var e=this.centerX,t=this.centerY,s=this.radius,f=s*.7,C=e-f,w=t-f,F=f*2;if(this.getShape("border").lineStyle(2,this.color,1).startAt(C,w).lineTo(F,0,!0).lineTo(0,F,!0).lineTo(-F,0,!0).lineTo(0,-F,!0).close(),this.value<.5){var N=(.5-this.value)*2,z=F*N;this.getShape("fill").fillStyle(this.color,1).startAt(C,w).lineTo(F,0,!0).lineTo(0,z,!0).lineTo(-F,0,!0).lineTo(0,-z,!0).close()}else{var N=(this.value-.5)*2,H=180*N;this.getShape("border").rotateAround(e,t,H),this.getShape("fill").fillStyle().lineStyle()}}};const xw=Phaser.Math.RadToDeg,yw=Phaser.Math.Angle.WrapDegrees,u7=Phaser.Math.Angle.Wrap,d7=Phaser.Math.Angle.ShortestBetween,f7=Phaser.Math.DegToRad,Sw=Phaser.Math.DegToRad(270);var c7={buildShapes(){this.addShape(new wn().setName("border")),this.addShape(new Za().setName("minuteHand")),this.addShape(new Za().setName("hourHand")),this.minuteHandAngle=0,this.hourHandAngle=0},updateShapes(){var e=this.centerX,t=this.centerY,s=this.radius,f=Math.ceil(s/25),C=s-f/2,w=s*.8,F=s*.5,N=this.minuteHandAngle;this.minuteHandAngle=Math.PI*2*this.value;var z=yw(xw(N)),H=yw(xw(this.minuteHandAngle)),Z=d7(z,H);this.hourHandAngle=u7(this.hourHandAngle+f7(Z)/12),this.getShape("border").lineStyle(f,this.color).setRadius(C).setCenterPosition(e,t);var tt=this.minuteHandAngle+Sw;this.getShape("minuteHand").lineStyle(f,this.color).setP0(e,t).setP1(e+Math.cos(tt)*w,t+Math.sin(tt)*w);var tt=this.hourHandAngle+Sw;this.getShape("hourHand").lineStyle(f,this.color).setP0(e,t).setP1(e+Math.cos(tt)*F,t+Math.sin(tt)*F)}};const Tw=Phaser.Math.Linear,p7=Phaser.Math.Easing.Expo.In,Ix=2,Bx=2;var v7={buildShapes(){for(var e=Ix*Bx,t=0;t<e;t++){var s=new Za;this.addShape(s)}},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.radius,f=e-s,C=t-s,w=s*2/Bx,F=s*2/Ix,N=this.getShapes(),z=N.length,H=0;H<z;H++){var Z=H%Bx,tt=Math.floor(H/Ix),nt=f+w*(Z+.5),st=C+F*(tt+.5),ht=N[H],ft=(this.value+(z-H)*.1)%1;ft=p7(hi(ft));var dt=(z-H)/z,gt=Tw(.7,1,ft)*F,Et=Tw(.7,1,ft)*w;ht.lineStyle(Et,this.color,dt).setP0(nt-gt/2,st).setP1(nt+gt/2,st)}}};const Cw=Phaser.Math.Linear;var m7={buildShapes(){for(var e=3,t=0;t<e;t++){var s=new wn;this.addShape(s);var f=hi(t/(e-1))/2;s.setData("offset",f)}},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.radius,f=e-s,C=this.getShapes(),w=C.length,F=s*2/w,N=F/2,z=0;z<w;z++){var H=C[z],Z=(this.value+H.getData("offset"))%1;Z=hi(Z);var tt=Cw(.25,1,Z),nt=Cw(.5,1,Z)*N;H.fillStyle(this.color,tt).setRadius(nt).setCenterPosition(f+F*(z+.5),t)}}};const Mw=Phaser.Math.Linear,g7=Phaser.Math.Easing.Expo.In;var x7={buildShapes(){for(var e=0;e<3;e++){var t=new Za;this.addShape(t)}},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.radius,f=e-s,C=this.getShapes(),w=C.length,F=s*2/w,N=s*2,z=0;z<w;z++){var H=C[z],Z=(this.value+(w-z)*.1)%1;Z=g7(hi(Z));var tt=(z+1)/w,nt=Mw(.7,1,Z)*N,st=Mw(.7,1,Z)*F,ht=f+F*(z+.5);H.lineStyle(st,this.color,tt).setP0(ht,t-nt/2).setP1(ht,t+nt/2)}}};const y7=Phaser.Math.Linear,Nx=3,Gx=3;var S7={buildShapes(){for(var e=Nx*Gx,t=0;t<e;t++){var s=new wn;this.addShape(s),s.setData("offset",Math.random())}this.isInitialize=!0},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.radius,f=this.isInitialize||this.isSizeChanged,C=e-s,w=t-s,F=s*2/Gx,N=s*2/Nx,z=Math.min(F,N)/2*.8,H=this.getShapes(),Z=0,tt=H.length;Z<tt;Z++){var nt=Z%Gx,st=Math.floor(Z/Nx),ht=C+F*(nt+.5),ft=w+N*(st+.5),dt=H[Z],gt=(this.value+dt.getData("offset"))%1;gt=hi(gt),dt.fillStyle(this.color,y7(.25,1,gt)),f&&dt.setRadius(z).setCenterPosition(ht,ft)}this.isInitialize=!1}},T7={buildShapes(){for(var e=0;e<2;e++)this.addShape(new vs)},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.radius,f=Math.ceil(s/25),C=s-f,w=C*.6,F=C*.7,N=C*1.2,z=this.getShapes(),H=0,Z=z.length;H<Z;H++){var tt=z[H],nt=(this.value+H/Z)%1,st=hi(nt),ht=e,ft=t-15*nt,dt=C*nt,gt=w*nt,Et=F*nt,yt=N*nt;tt.lineStyle(f,this.color,st).startAt(ht,ft).cubicBezierTo(ht,ft-gt,ht-dt,ft-gt,ht-dt,ft).cubicBezierTo(ht-dt,ft+gt,ht,ft+Et,ht,ft+yt).cubicBezierTo(ht,ft+Et,ht+dt,ft+gt,ht+dt,ft).cubicBezierTo(ht+dt,ft-gt,ht,ft-gt,ht,ft).close()}}};const C7=Phaser.Math.Linear;var M7={buildShapes(){for(var e=0;e<12;e++)this.addShape(new Za);this.isInitialize=!0},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.isInitialize||this.isSizeChanged,f=this.radius,C=f/2,w=Math.ceil(f/20),F=this.getShapes(),N=0,z=F.length;N<z;N++){var H=F[N],Z=N/z,tt=Math.PI*2*Z,nt=C7(.25,1,(1-this.value+Z)%1);H.lineStyle(w,this.color,nt),s&&H.setP0(e+Math.cos(tt)*C,t+Math.sin(tt)*C).setP1(e+Math.cos(tt)*f,t+Math.sin(tt)*f)}this.isInitialize=!1}},E7={buildShapes(){this.addShape(new wn().setName("track")),this.addShape(new wn().setName("thumb"))},updateShapes(){var e=this.centerX,t=this.centerY,s=this.radius,f=s*.9,C=Math.ceil(f/25),w=s*.1,F=Math.PI*2*this.value;this.getShape("track").lineStyle(C,this.color,.7).setRadius(f).setCenterPosition(e,t),this.getShape("thumb").fillStyle(this.color).setRadius(w).setCenterPosition(e+Math.cos(F)*f,t+Math.sin(F)*f)}},P7={buildShapes(){this.addShape(new wn().setName("track")),this.addShape(new gl().setName("arc"))},updateShapes(){var e=this.centerX,t=this.centerY,s=this.radius,f=Math.ceil(s/25),C=s-f/2;this.getShape("track").lineStyle(f,this.color,.5).setRadius(C).setCenterPosition(e,t);var w=this.value*360,F=w+60;this.getShape("arc").lineStyle(f,this.color,1).setRadius(C).setCenterPosition(e,t).setAngle(w,F)}};const w7=Phaser.Math.Linear;var b7={buildShapes(){for(var e=0;e<4;e++){var t=new gl().setPie();this.addShape(t),t.setData("speed",w7(180,360,Math.random()))}this.prevValue=void 0},updateShapes(){var e=this.centerX,t=this.centerY,s=this.radius,f;this.prevValue!==void 0&&(f=this.value-this.prevValue,this.prevValue>this.value&&(f+=1));for(var C=this.getShapes(),w=0,F=C.length;w<F;w++){var N=C[w],z=(w+1)/F;if(this.prevValue===void 0){var H=w/F*360,Z=H+90;N.fillStyle(this.color,z).setRadius(s).setCenterPosition(e,t).setAngle(H,Z).setData("angle",H)}else{var H=N.getData("angle")+N.getData("speed")*f;H=H%360;var Z=H+90;N.fillStyle(this.color,z).setRadius(s).setCenterPosition(e,t).setAngle(H,Z).setData("angle",H)}}this.prevValue=this.value}},A7={buildShapes(){this.addShape(new wn)},updateShapes(){var e=this.centerX,t=this.centerY,s=this.radius,f=s*this.value,C=Math.ceil(s/25),w=hi(this.value);this.getShapes()[0].lineStyle(C,this.color,w).setRadius(f).setCenterPosition(e,t)}};const R7=Phaser.Math.Linear,L7=Phaser.Math.Easing.Expo.In;var O7={buildShapes(){this.addShape(new wn().setName("center")),this.addShape(new vs().setName("arc0")),this.addShape(new vs().setName("arc1")),this.isInitialize=!0},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.radius,f=this.isInitialize||this.isSizeChanged,C=s*2/6,w=e-s+C,F=t+s-C,N=this.getShapes(),z=0,H=N.length;z<H;z++){var Z=N[z],tt=(this.value+(H-z)*.1)%1;tt=L7(hi(tt));var nt=R7(.25,1,tt);switch(Z.name){case"center":Z.fillStyle(this.color,nt),f&&Z.setRadius(C).setCenterPosition(w,F);break;case"arc0":if(Z.fillStyle(this.color,nt),f){var st=C*2,ht=C*3;Z.startAt(w,F-st).lineTo(w,F-ht).setIterations(8).arc(w,F,ht,270,360).lineTo(w+st,F).setIterations(6).arc(w,F,st,360,270,!0).close()}break;case"arc1":if(Z.fillStyle(this.color,nt),f){var st=C*4,ht=C*5;Z.startAt(w,F-st).lineTo(w,F-ht).setIterations(8).arc(w,F,ht,270,360).lineTo(w+st,F).setIterations(6).arc(w,F,st,360,270,!0).close()}break}}this.isInitialize=!1}},F7={buildShapes(){for(var e=0;e<2;e++)this.addShape(new wn)},updateShapes(){for(var e=this.centerX,t=this.centerY,s=this.radius,f=Math.ceil(s/25),C=s-f,w=this.getShapes(),F=0,N=w.length;F<N;F++){var z=w[F],H=(this.value+F/N)%1,Z=hi(H);z.lineStyle(f,this.color,Z).setRadius(H*C).setCenterPosition(e,t)}}},D7={buildShapes(){this.addShape(new gl().setName("arc"))},updateShapes(){var e=this.centerX,t=this.centerY,s=this.radius,f=Math.ceil(s/10),C=s-f,w=this.value*720,F=hi(this.value)*180,N=w-F;this.getShape("arc").lineStyle(f,this.color,1).setRadius(C).setCenterPosition(e,t).setAngle(N+315,w+315)}};Phaser.Utils.Objects.GetValue;const Ux={leftArrow:Dp,rightArrow:Dp,upArrow:Dp,downArrow:Dp,audio:s7,ball:r7,bars:h7,box:l7,clock:c7,cube:v7,dots:m7,facebook:x7,grid:S7,hearts:T7,ios:M7,oribit:E7,oval:P7,pie:b7,puff:A7,radio:O7,rings:F7,spinner:D7},kx=[];for(var I7 in Ux)kx.push(I7);const Ew=Phaser.Utils.Array.GetRandom;var B7={setAnimationMode(e,t){Ux.hasOwnProperty(e)||(e=Ew(kx)),this.animationMode=e;var s=Ux[e];switch(t&&this.resetFromConfig(t),e){case"leftArrow":s.setDirection.call(this,"left");break;case"rightArrow":s.setDirection.call(this,"right");break;case"upArrow":s.setDirection.call(this,"up");break;case"downArrow":s.setDirection.call(this,"down");break}return this.clear(),s.buildShapes.call(this),this.updateShapes=s.updateShapes.bind(this),this.stop().start(),this},setRandomAnimationMode(e){var t=Ew(kx);return this.setAnimationMode(t,e),this}};const N7=Phaser.Utils.Objects.GetValue;class Vx extends gw{constructor(t,s){super(t,s),this.type="rexSpinnerAIO",this.setAnimationMode(N7(s,"animationMode"))}}Object.assign(Vx.prototype,B7),c.register("aioSpinner",function(e){var t=new Vx(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.AIOSpinner",Vx);var G7={setTransitionStartCallback(e,t){return this.onStartCallback=e,this.onStartCallbackScope=t,this},setTransitionProgressCallback(e,t){return this.onProgressCallback=e,this.onProgressCallbackScope=t,this},setTransitionCompleteCallback(e,t){return this.onCompleteCallback=e,this.onCompleteCallbackScope=t,this}},Pw=function(){for(var e=this.scaleMode-1,t=0,s=this.images.length;t<s;t++){var f=this.images[t],C=bx(f,this,e,!0),w=C.width/f.width;this.setChildLocalScale(f,w),f.biasScale=w}},Ip=function(e){this.scaleMode===0?this.resize(e.width,e.height):Pw.call(this)};const ww=Phaser.Utils.Objects.IsPlainObject,zx=Phaser.Utils.Objects.GetValue,U7=Phaser.Utils.Array.GetRandom;var k7={out:0,in:1},Lr=function(e,t,...s){for(var f=0,C=s.length;f<C;f++){var w=s[f];if(w&&w.hasOwnProperty(e))return w[e]}return t},V7={setTransitionDirection(e){return typeof e=="string"&&(e=k7[e]),this.dir=e,this},setDuration(e){return this.duration=e,this},setEaseFunction(e){return this.easeFunction=e,this},setNextTexture(e,t){return this.nextImage.setTexture(e,t),Ip.call(this,this.nextImage),this},transit(e,t,s){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),s!==void 0&&(e={key:e,frame:t,mode:s}),this.currentTransitionMode=void 0,ww(e)){var f=e;e=zx(f,"key",void 0),t=zx(f,"frame",void 0),s=zx(f,"mode"),Array.isArray(s)&&(s=U7(s));var C;this.transitionModes&&this.transitionModes.hasOwnProperty(s)&&(C=this.transitionModes[s],this.currentTransitionMode=s),this.setDuration(Lr("duration",this.duration,f,C)).setEaseFunction(Lr("ease",this.easeFunction,f,C)).setTransitionDirection(Lr("dir",this.dir,f,C));var w=Lr("mask",void 0,f,C);w&&this.setMaskGameObject(w),this.setMaskEnable(w===!0);var F=Lr("onStart",void 0,f,C),N=Lr("onProgress",void 0,f,C),z=Lr("onComplete",void 0,f,C);(F!==void 0||N!==void 0||z!==void 0)&&this.setTransitionStartCallback(F,Lr("onStartScope",void 0,f,C)).setTransitionProgressCallback(N,Lr("onProgressScope",void 0,f,C)).setTransitionCompleteCallback(z,Lr("onCompleteScope",void 0,f,C))}return this.setNextTexture(e,t),this.start(),this},addTransitionMode(e,t){return this.transitionModes===void 0&&(this.transitionModes={}),ww(e)&&(t=e,e=t.name,delete t.name),this.transitionModes[e]=t,this},start(){return this.easeValueTask===void 0&&(this.easeValueTask=new Kn(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}};const z7=Phaser.GameObjects.Graphics.prototype.setPosition;var W7=function(e,t){var s=this.parent;return e===void 0&&(e=s.x),t===void 0&&(t=s.y),z7.call(this,e,t),this};const bw=Phaser.Geom.Rectangle,Aw=Phaser.Geom.Circle;var X7=function(e,t,s,f,C,w,F){switch(e){case 1:f=f.left;var N=-t*(C-.5),z=-s*(w-.5),H=Math.min(t,s)/2+f;(F===void 0||!(F instanceof Aw))&&(F=new Aw),F.setTo(N,z,H);break;default:var Z=-(t*C)-f.left,tt=-(s*w)-f.top,nt=t+f.left+f.right,st=s+f.top+f.bottom;(F===void 0||!(F instanceof bw))&&(F=new bw),F.setTo(Z,tt,nt,st);break}return F},Rw=function(e,t,s,f,C){switch(this.geom=X7(this.shapeType,e,t,s,f,C,this.geom),this.clear().fillStyle(16777215),this.shapeType){case 1:this.fillCircleShape(this.geom);break;default:this.fillRectShape(this.geom);break}},H7=function(e,t,s){var f=this.parent;e===void 0&&(e=f.width),t===void 0&&(t=f.height),s===void 0?s=this.padding:typeof s=="number"&&(s=GetBoundsConfig(s));var C=this.width!==e||this.height!==t,w=this.padding!==s&&!dd(this.padding,s);return!C&&!w?this:(this.width=e,this.height=t,w&&Zn(s,this.padding),this.originX=f.originX,this.originY=f.originY,Rw.call(this,e,t,s,f.originX,f.originY),this)},Y7=function(e,t){t===void 0&&(t=e);var s=this.parent;return e===void 0&&(e=s.originX),t===void 0&&(t=s.originY),this.originX===e&&this.originY===t?this:(this.originX=e,this.originY=t,Rw.call(this,this.width,this.height,this.padding,e,t),this)},$7=function(e,t){return e-=this.x,t-=this.y,this.geom.contains(e,t)},_7={setPosition:W7,resize:H7,setOrigin:Y7,contains:$7};const Z7=Phaser.GameObjects.Graphics;class Bp extends Z7{constructor(t,s,f){s===void 0&&(s=0),typeof s=="string"&&(s=K7[s]),super(t.scene),this.parent=t,this.shapeType=s,this.padding=nh(f),this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}}const K7={rectangle:0,circle:1};Object.assign(Bp.prototype,_7);var J7={setMaskGameObject(e){if(!e)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(e===!0&&this.maskGameObject instanceof Bp)return this;if(this.maskGameObject===e)return this;this.removeMaskGameObject()}return e===!0&&(e=new Bp(this)),e.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(e),this.maskGameObject=e,e._maskObject||(e._maskObject=e.createGeometryMask(),e.once("destroy",function(){e._maskObject.destroy(),e._maskObject=void 0})),this.childrenMask=e._maskObject,this},removeMaskGameObject(e){return e===void 0&&(e=!0),this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,e),this.maskGameObject=void 0,this},setImageMaskEnable(e,t,s){return t===void 0&&(t=!0),s===void 0&&(s=!1),t?(this.childrenMask||this.setMaskGameObject(!0),e.setMask(this.childrenMask),this.childrenMask.setInvertAlpha(s)):e.clearMask(),this},setCurrentImageMaskEnable(e,t){return this.setImageMaskEnable(this.currentImage,e,t),this},setNextImageMaskEnable(e,t){return this.setImageMaskEnable(this.nextImage,e,t),this},setCellImagesMaskEnable(e,t){for(var s=this.getCellImages(),f=0,C=s.length;f<C;f++)this.setImageMaskEnable(s[f],e,t);return this},setMaskEnable(e,t){return this.setImageMaskEnable(this.backImage,e,t),this.setImageMaskEnable(this.frontImage,e,t),this.setCellImagesMaskEnable(e,t),this}},Q7=function(e,t){typeof e=="object"&&(e=e.name),t===void 0&&(t=",");var s;return e==="__BASE"?s=function(f,C){return`${f}${t}${C}`}:s=function(f,C){return`${e}_${f}${t}${C}`},s},j7=function(e,t,s,f,C,w){s==null&&(s="__BASE"),w||(w=Q7(s,w));for(var F=e.sys.textures.get(t),N=typeof s=="object"?s:F.get(s),z=N.width,H=N.height,Z,tt,nt,st=z/f,ht=H/C,ft=N.cutX,dt=N.cutY,gt=0,Et=0,yt=0;yt<C;yt++){gt=0;for(var Dt=0;Dt<f;Dt++)nt=w(Dt,yt),Z=gt+ft,tt=Et+dt,F.add(nt,0,Z,tt,st,ht),gt+=st;Et+=ht}return{getFrameNameCallback:w,cellWidth:st,cellHeight:ht,columns:f,rows:C}};const pa=Phaser.Utils.Objects.GetValue,q7=Phaser.GameObjects.Image,tW=Phaser.Utils.Objects.IsPlainObject,eW=Phaser.Math.RotateAround;var iW=function(e,t,s,f){tW(t)&&(f=t,t=pa(f,"columns",1),s=pa(f,"rows",1));var C=pa(f,"createImageCallback");if(!C){var w=pa(f,"ImageClass",q7);C=function(wi,qi,Hi){return new w(wi,0,0,qi,Hi)}}for(var F=pa(f,"originX",.5),N=pa(f,"originY",.5),z=pa(f,"add",!0),H=pa(f,"align",z),Z=pa(f,"objectPool",void 0),tt=e.scene,nt=e.texture,st=e.frame,ht=j7(tt,nt,st,t,s),ft=ht.getFrameNameCallback,dt=e.scaleX,gt=e.scaleY,Et=e.rotation,yt=e.getTopLeft(),Dt=yt.x,Wt=yt.y,qt=[],re=ht.cellWidth*dt,ce=ht.cellHeight*gt,fe=0;fe<s;fe++)for(var ye=0;ye<t;ye++){var ge,Ue=ft(ye,fe);if(Z&&Z.length>0?ge=Z.pop().setTexture(nt,Ue):ge=C(tt,nt,Ue),z&&tt.add.existing(ge),H){var ze=Dt+re*ye,me=Wt+ce*fe,li=ze+F*re,mi=me+N*ce;ge.setOrigin(F,N).setPosition(li,mi).setScale(dt,gt).setRotation(Et),eW(ge,Dt,Wt,Et)}qt.push(ge)}return qt},sW={gridCutImage(e,t,s,f){f===void 0&&(f={}),f.objectPool=this.imagesPool;for(var C=iW(e,t,s,f),w,F=0,N=C.length;F<N;F++)w=C[F],w.setVisible(!0),this.add(w);return this.cellImages=C,this.setChildLocalVisible(e,!1),C},gridCutCurrentImage(e,t,s){return this.gridCutImage(this.currentImage,e,t,s)},gridCutNextImage(e,t,s){return this.gridCutImage(this.nextImage,e,t,s)},getCellImages(){return this.cellImages},freeCellImages(){if(this.cellImages.length===0)return this;for(var e=this.cellImages[0].texture,t=this.cellImages,s,f,C=0,w=t.length;C<w;C++)s=t[C],this.setChildLocalAlpha(s,1).setChildLocalScale(s,1).setChildLocalVisible(s,!1),s.clearMask(),f=s.frame.name,s.setTexture(),e.remove(f);return this.imagesPool.push(...t),t.length=0,this}},Lw={setFlipX(e){return this.flipX=e,this},setFlipY(e){return this.flipY=e,this},toggleFlipX(){return this.flipX=!this.flipX,this},toggleFlipY(){return this.flipY=!this.flipY,this},setFlip(e,t){return this.flipX=e,this.flipY=t,this},resetFlip(){return this.flipX=!1,this.flipY=!1,this}},Ow={};Object.assign(Ow,G7,V7,J7,sW,Lw);var nW=function(e,t,s,f){},rW=function(e,t,s,f){e.setChildLocalAlpha(t,1-f).setChildLocalAlpha(s,f)},aW=function(e,t,s,f){e.setChildLocalAlpha(t,1)};const Fw=Phaser.Utils.Objects.IsPlainObject,Qi=Phaser.Utils.Objects.GetValue,oW=Phaser.Math.Clamp;class Np extends dn{constructor(t,s,f,C,w,F){Fw(s)?(F=s,s=Qi(F,"x",0),f=Qi(F,"y",0),C=Qi(F,"key",void 0),w=Qi(F,"frame",void 0)):Fw(w)&&(F=w,w=void 0);var N=Qi(F,"back",void 0),z=Qi(F,"front",void 0);N||(N=t.add.image(s,f,C,w)),z||(z=t.add.image(s,f,C,w));var H=Qi(F,"width",void 0),Z=Qi(F,"height",void 0),tt=H!==void 0&&Z!==void 0?1:0;H===void 0&&(H=z.width),Z===void 0&&(Z=z.height),super(t,s,f,H,Z),this.type="rexTransitionImage",this._flipX=!1,this._flipY=!1,tt=Qi(F,"scaleMode",tt),typeof tt=="string"&&(tt=hW[tt]),this.scaleMode=tt,N.setVisible(!1),this.addMultiple([N,z]),this.backImage=N,this.frontImage=z,this.images=[this.backImage,this.frontImage],this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[],this.transitionModes=void 0,this.currentTransitionMode=void 0;var nt=Qi(F,"onStart",void 0),st=Qi(F,"onProgress",void 0),ht=Qi(F,"onComplete",void 0),ft=Qi(F,"dir",0);nt===void 0&&st===void 0&&ht===void 0&&(nt=nW,st=rW,ht=aW,ft=0),this.setTransitionStartCallback(nt,Qi(F,"onStartScope",void 0)).setTransitionProgressCallback(st,Qi(F,"onProgressScope",void 0)).setTransitionCompleteCallback(ht,Qi(F,"onCompleteScope",void 0)).setTransitionDirection(ft).setDuration(Qi(F,"duration",1e3)).setEaseFunction(Qi(F,"ease","Linear"));var dt=Qi(F,"mask",void 0);dt&&this.setMaskGameObject(dt),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1,Ip.call(this,this.frontImage)}destroy(t){!this.scene||this.ignoreDestroy||(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.images.length=0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,this.transitionModes=void 0,super.destroy(t),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return this.dir===0?this.frontImage:this.backImage}get nextImage(){return this.dir===0?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get tint(){return this._tint}set tint(t){this._tint!==t&&(this._tint=t,this.backImage.setTint(t),this.frontImage.setTint(t))}setTint(t){return this.tint=t,this}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.backImage.setFlipX(t),this.frontImage.setFlipX(t))}setFlipX(t){return this.flipX=t,this}toggleFlipX(){return this.flipX=!this.flipX,this}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.backImage.setFlipY(t),this.frontImage.setFlipY(t))}setFlipY(t){return this.flipY=t,this}toggleFlipY(){return this.flipY=!this.flipY,this}setFlip(t,s){return this.flipX=t,this.flipY=s,this}get t(){return this._t}set t(t){if(t=oW(t,0,1),this._t!==t){this._t=t;var s=this.currentImage,f=this.nextImage;if(t===0&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),Wx.call(this,this.onStartCallback,this.onStartCallbackScope,this,s,f,t)),Wx.call(this,this.onProgressCallback,this.onProgressCallbackScope,this,s,f,t),t===1){Wx.call(this,this.onCompleteCallback,this.onCompleteCallbackScope,this,s,f,t);var C=f.texture.key,w=f.frame.name;this.frontImage.setTexture(C,w),this.backImage.setTexture(C,w),Ip.call(this,f),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}t===1&&!this.ignoreCompleteEvent&&this.emit("complete")}}setT(t){return this.t=t,this}get isRunning(){return this.easeValueTask?this.easeValueTask.isRunning:!1}setOrigin(t,s){return super.setOrigin(t,s),this.backImage.setOrigin(t,s),this.frontImage.setOrigin(t,s),this.maskGameObject&&this.maskGameObject.setOrigin(t,s),this}setTexture(t,s){return this.frontImage.setTexture(t,s),this.backImage.setTexture(t,s).setVisible(!1),Ip.call(this,this.frontImage),this}setSize(t,s){return super.setSize(t,s),this.scaleMode&&Pw.call(this),this}}var Wx=function(e,t,s,f,C,w){if(e){if(this.scaleMode){var F;f.biasScale>0&&(F=this.getChildLocalScaleX(f),F=F/f.biasScale,this.setChildLocalScale(f,F)),C.biasScale&&(F=this.getChildLocalScaleX(C),F=F/C.biasScale,this.setChildLocalScale(C,F))}if(t?e.call(t,s,f,C,w):e(s,f,C,w),this.scaleMode){var F;f.biasScale>0&&(F=this.getChildLocalScaleX(f),F=F*f.biasScale,this.setChildLocalScale(f,F)),C.biasScale&&(F=this.getChildLocalScaleX(C),F=F*C.biasScale,this.setChildLocalScale(C,F))}}};Object.assign(Np.prototype,Ow);const hW={fit:1,FIT:1,envelop:2,ENVELOP:2};c.register("transitionImage",function(e,t,s,f,C){var w=new Np(this.scene,e,t,s,f,C);return this.scene.add.existing(w),w}),j(window,"RexPlugins.UI.TransitionImage",Np);const lW="slideLeft",uW="slideRight",dW="slideUp",fW="slideDown",cW="slideAwayLeft",pW="slideAwayRight",vW="slideAwayUp",mW="slideAwayDown",gW="pushLeft",xW="pushRight",yW="pushUp",SW="pushDown",TW="zoomOut",CW="zoomIn",MW="zoomInOut",EW="fade",PW="crossFade",wW="wipeLeft",bW="wipeRight",AW="wipeUp",RW="wipeDown",LW="irisOut",OW="irisIn",FW="irisInOut",DW="pieOut",IW="pieIn",BW="pieInOut",NW="blinds",GW="squares",UW="diamonds",kW="circles",VW="curtain",zW="pixellate",WW="dissolve",XW="revealLeft",HW="revealRight",YW="revealUp",$W="revealDown";var _W=function(e){e.addTransitionMode(pW,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,f,C){},onProgress:function(t,s,f,C){var w=s.width*C;t.setChildLocalPosition(s,w,0)},onComplete:function(t,s,f,C){t.setChildLocalPosition(s,0,0)}}).addTransitionMode(cW,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,f,C){},onProgress:function(t,s,f,C){var w=s.width*-C;t.setChildLocalPosition(s,w,0)},onComplete:function(t,s,f,C){t.setChildLocalPosition(s,0,0)}}).addTransitionMode(mW,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,f,C){},onProgress:function(t,s,f,C){var w=s.height*C;t.setChildLocalPosition(s,0,w)},onComplete:function(t,s,f,C){t.setChildLocalPosition(s,0,0)}}).addTransitionMode(vW,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,f,C){},onProgress:function(t,s,f,C){var w=s.height*-C;t.setChildLocalPosition(s,0,w)},onComplete:function(t,s,f,C){t.setChildLocalPosition(s,0,0)}})},ZW=function(e){e.addTransitionMode(uW,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,s,f,C){},onProgress:function(t,s,f,C){var w=f.width*(C-1);t.setChildLocalPosition(f,w,0)},onComplete:function(t,s,f,C){t.setChildLocalPosition(f,0,0)}}).addTransitionMode(lW,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,s,f,C){},onProgress:function(t,s,f,C){var w=f.width*(1-C);t.setChildLocalPosition(f,w,0)},onComplete:function(t,s,f,C){t.setChildLocalPosition(f,0,0)}}).addTransitionMode(fW,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,s,f,C){},onProgress:function(t,s,f,C){var w=f.height*(C-1);t.setChildLocalPosition(f,0,w)},onComplete:function(t,s,f,C){t.setChildLocalPosition(f,0,0)}}).addTransitionMode(dW,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,s,f,C){},onProgress:function(t,s,f,C){var w=f.height*(1-C);t.setChildLocalPosition(f,0,w)},onComplete:function(t,s,f,C){t.setChildLocalPosition(f,0,0)}})},KW=function(e){e.addTransitionMode(xW,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,f,C){},onProgress:function(t,s,f,C){var w=s.width*C;t.setChildLocalPosition(s,w,0);var w=f.width*(C-1);t.setChildLocalPosition(f,w,0)},onComplete:function(t,s,f,C){t.setChildLocalPosition(s,0,0),t.setChildLocalPosition(f,0,0)}}).addTransitionMode(gW,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,f,C){},onProgress:function(t,s,f,C){var w=s.width*-C;t.setChildLocalPosition(s,w,0);var w=f.width*(1-C);t.setChildLocalPosition(f,w,0)},onComplete:function(t,s,f,C){t.setChildLocalPosition(s,0,0),t.setChildLocalPosition(f,0,0)}}).addTransitionMode(SW,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,f,C){},onProgress:function(t,s,f,C){var w=s.height*C;t.setChildLocalPosition(s,0,w);var w=f.height*(C-1);t.setChildLocalPosition(f,0,w)},onComplete:function(t,s,f,C){t.setChildLocalPosition(s,0,0),t.setChildLocalPosition(f,0,0)}}).addTransitionMode(yW,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,f,C){},onProgress:function(t,s,f,C){var w=s.height*-C;t.setChildLocalPosition(s,0,w);var w=f.height*(1-C);t.setChildLocalPosition(f,0,w)},onComplete:function(t,s,f,C){t.setChildLocalPosition(s,0,0),t.setChildLocalPosition(f,0,0)}})},JW=function(e){e.addTransitionMode(TW,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,s,f,C){},onProgress:function(t,s,f,C){var w=1-C;t.setChildLocalScale(s,w,w)},onComplete:function(t,s,f,C){t.setChildLocalScale(s,1,1)}}).addTransitionMode(CW,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,s,f,C){},onProgress:function(t,s,f,C){var w=C;t.setChildLocalScale(f,w,w)},onComplete:function(t,s,f,C){t.setChildLocalScale(f,1,1)}}).addTransitionMode(MW,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,s,f,C){f.tint=0},onProgress:function(t,s,f,C){var w;C<.5?(w=1-hi(C),t.setChildLocalScale(s,w,w)):(s.visible&&t.setChildVisible(s,!1),w=1-hi(C),t.setChildLocalScale(f,w,w))},onComplete:function(t,s,f,C){t.setChildLocalScale(s,1,1),t.setChildVisible(s,!0),s.tint=16777215,t.setChildLocalScale(f,1,1),t.setChildVisible(f,!0),f.tint=16777215}})},QW=function(e){e.addTransitionMode(EW,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,s,f,C){f.tint=0},onProgress:function(t,s,f,C){var w;C<.5?(C=hi(C),w=Math.floor(255*(1-C)),s.tint=(w<<16)+(w<<8)+w):(s.visible&&t.setChildVisible(s,!1),C=hi(C),w=Math.floor(255*(1-C)),f.tint=(w<<16)+(w<<8)+w)},onComplete:function(t,s,f,C){t.setChildVisible(s,!0),s.tint=16777215,t.setChildVisible(f,!0),f.tint=16777215}}).addTransitionMode(PW,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,s,f,C){},onProgress:function(t,s,f,C){t.setChildLocalAlpha(s,1-C),t.setChildLocalAlpha(f,C)},onComplete:function(t,s,f,C){t.setChildLocalAlpha(s,1)}})},jW=function(e){var t=new Rr(e,{type:"Graphics",create:[{name:"rect",type:"rectangle"}],update:function(){var s=this.getShape("rect").fillStyle(16777215),f=1-this.value;switch(this.wipeMode){case"right":s.setSize(this.width*f,this.height).setTopLeftPosition(this.width-s.width,0);break;case"left":s.setSize(this.width*f,this.height).setTopLeftPosition(0,0);break;case"down":s.setSize(this.width,this.height*f).setTopLeftPosition(0,this.height-s.height);break;case"up":s.setSize(this.width,this.height*f).setTopLeftPosition(0,0);break}}});return t},qW=function(e){var t=jW(e.scene);e.once("destroy",function(){t.destroy()}).addTransitionMode(bW,{ease:"Linear",dir:"out",mask:t,onStart:function(s,f,C,w){s.setCurrentImageMaskEnable(!0),s.maskGameObject.wipeMode="right"},onProgress:function(s,f,C,w){s.maskGameObject.setValue(w)},onComplete:function(s,f,C,w){s.removeMaskGameObject(!1)}}).addTransitionMode(wW,{ease:"Linear",dir:"out",mask:t,onStart:function(s,f,C,w){s.setCurrentImageMaskEnable(!0),s.maskGameObject.wipeMode="left"},onProgress:function(s,f,C,w){s.maskGameObject.setValue(w)},onComplete:function(s,f,C,w){s.removeMaskGameObject(!1)}}).addTransitionMode(RW,{ease:"Linear",dir:"out",mask:t,onStart:function(s,f,C,w){s.setCurrentImageMaskEnable(!0),s.maskGameObject.wipeMode="down"},onProgress:function(s,f,C,w){s.maskGameObject.setValue(w)},onComplete:function(s,f,C,w){s.removeMaskGameObject(!1)}}).addTransitionMode(AW,{ease:"Linear",dir:"out",mask:t,onStart:function(s,f,C,w){s.setCurrentImageMaskEnable(!0),s.maskGameObject.wipeMode="up"},onProgress:function(s,f,C,w){s.maskGameObject.setValue(w)},onComplete:function(s,f,C,w){s.removeMaskGameObject(!1)}})},tX=function(e){var t=new Rr(e,{type:"Graphics",create:[{name:"rect",type:"rectangle"}],update:function(){this.getShape("rect").fillStyle(16777215).setSize(this.width*this.value,this.height*this.value).setCenterPosition(this.centerX,this.centerY)}});return t},eX=function(e){var t=tX(e.scene);e.once("destroy",function(){t.destroy()}).addTransitionMode(LW,{ease:"Linear",dir:"out",mask:t,onStart:function(s,f,C,w){s.setCurrentImageMaskEnable(!0,!0)},onProgress:function(s,f,C,w){s.maskGameObject.setValue(w)},onComplete:function(s,f,C,w){s.removeMaskGameObject(!1)}}).addTransitionMode(OW,{ease:"Linear",dir:"in",mask:t,onStart:function(s,f,C,w){s.setNextImageMaskEnable(!0,!0)},onProgress:function(s,f,C,w){s.maskGameObject.setValue(1-w)},onComplete:function(s,f,C,w){s.removeMaskGameObject(!1)}}).addTransitionMode(FW,{ease:"Linear",dir:"out",mask:t,onStart:function(s,f,C,w){C.tint=0,s.setCurrentImageMaskEnable(!0),s.setNextImageMaskEnable(!0)},onProgress:function(s,f,C,w){var F;w<.5?(w=hi(w),F=Math.floor(255*(1-w)),s.maskGameObject.setValue(1-w),f.tint=(F<<16)+(F<<8)+F):(f.visible&&s.setChildVisible(f,!1),w=hi(w),F=Math.floor(255*(1-w)),s.maskGameObject.setValue(1-w),C.tint=(F<<16)+(F<<8)+F)},onComplete:function(s,f,C,w){s.removeMaskGameObject(!1),s.setChildVisible(f,!0),f.tint=16777215,s.setChildVisible(C,!0),C.tint=16777215}})},iX=function(e){var t=new Rr(e,{type:"Graphics",create:[{name:"pie",type:"arc"}],update:function(){var s=Math.max(this.width,this.height)*2,f=90*this.value;this.getShape("pie").fillStyle(16777215).setCenterPosition(this.centerX,0).setRadius(s).setAngle(90-f,90+f).setPie()}});return t},sX=function(e){var t=iX(e.scene);e.once("destroy",function(){t.destroy()}).addTransitionMode(DW,{ease:"Linear",dir:"out",mask:t,onStart:function(s,f,C,w){s.setCurrentImageMaskEnable(!0,!0)},onProgress:function(s,f,C,w){s.maskGameObject.setValue(w)},onComplete:function(s,f,C,w){s.removeMaskGameObject(!1)}}).addTransitionMode(IW,{ease:"Linear",dir:"in",mask:t,onStart:function(s,f,C,w){s.setNextImageMaskEnable(!0,!0)},onProgress:function(s,f,C,w){s.maskGameObject.setValue(1-w)},onComplete:function(s,f,C,w){s.removeMaskGameObject(!1)}}).addTransitionMode(BW,{ease:"Linear",dir:"out",mask:t,onStart:function(s,f,C,w){C.tint=0,s.setCurrentImageMaskEnable(!0),s.setNextImageMaskEnable(!0)},onProgress:function(s,f,C,w){var F;w<.5?(w=hi(w),F=Math.floor(255*(1-w)),s.maskGameObject.setValue(1-w),f.tint=(F<<16)+(F<<8)+F):(f.visible&&s.setChildVisible(f,!1),w=hi(w),F=Math.floor(255*(1-w)),s.maskGameObject.setValue(1-w),C.tint=(F<<16)+(F<<8)+F)},onComplete:function(s,f,C,w){s.removeMaskGameObject(!1),s.setChildVisible(f,!0),f.tint=16777215,s.setChildVisible(C,!0),C.tint=16777215}})},nX=function(e,t){var s=new Rr(e,{type:"Graphics",create:{rectangle:t},update:function(){for(var f=this.getShapes(),C=this.width/t,w=0;w<t;w++)f[w].fillStyle(16777215).setSize(C*this.value,this.height).setTopLeftPosition(C*w,0)}});return s},rX=function(e){var t=nX(e.scene,10);e.once("destroy",function(){t.destroy()}).addTransitionMode(NW,{ease:"Linear",dir:"out",mask:t,onStart:function(s,f,C,w){s.setCurrentImageMaskEnable(!0,!0)},onProgress:function(s,f,C,w){s.maskGameObject.setValue(w)},onComplete:function(s,f,C,w){s.removeMaskGameObject(!1)}})},aX=function(e,t,s){var f=new Rr(e,{type:"Graphics",create:{rectangle:t*s},update:function(){for(var C=this.getShapes(),w=this.width/t,F=this.height/s,N=0;N<s;N++)for(var z=0;z<t;z++)C[z*s+N].fillStyle(16777215).setSize(w*this.value,F*this.value).setCenterPosition(w*(z+.5),F*(N+.5))}});return f},oX=function(e){var t=aX(e.scene,Math.ceil(e.width/40),Math.ceil(e.height/40));e.once("destroy",function(){t.destroy()}).addTransitionMode(GW,{ease:"Linear",dir:"out",mask:t,onStart:function(s,f,C,w){s.setCurrentImageMaskEnable(!0,!0)},onProgress:function(s,f,C,w){s.maskGameObject.setValue(w)},onComplete:function(s,f,C,w){s.removeMaskGameObject(!1)}})},hX=function(e,t,s){var f=new Rr(e,{type:"Graphics",create:{lines:t*s},update:function(){for(var C=this.getShapes(),w=this.width/(t-1),F=this.height/s,N=F*2,z=w*this.value,H=F*this.value,Z=0;Z<s;Z++)for(var tt=0;tt<t;tt++){var nt=tt*w,st=Z*N+tt%2*F;C[tt*s+Z].fillStyle(16777215).start(nt+z,st).lineTo(nt,st+H).lineTo(nt-z,st).lineTo(nt,st-H).lineTo(nt+z,st).close()}}});return f},lX=function(e){var t=hX(e.scene,Math.ceil(e.width/60),Math.ceil(e.height/60));e.once("destroy",function(){t.destroy()}).addTransitionMode(UW,{ease:"Linear",dir:"out",mask:t,onStart:function(s,f,C,w){s.setCurrentImageMaskEnable(!0,!0)},onProgress:function(s,f,C,w){s.maskGameObject.setValue(w)},onComplete:function(s,f,C,w){s.removeMaskGameObject(!1)}})},uX=function(e,t,s){var f=new Rr(e,{type:"Graphics",create:{circle:t*s},update:function(){for(var C=this.getShapes(),w=this.width/(t-1),F=this.height/s,N=F*2,z=Math.max(w,F)*this.value,H=0;H<s;H++)for(var Z=0;Z<t;Z++){var tt=Z*w,nt=H*N+Z%2*F;C[Z*s+H].fillStyle(16777215).setCenterPosition(tt,nt).setRadius(z)}}});return f},dX=function(e){var t=uX(e.scene,Math.ceil(e.width/60),Math.ceil(e.height/60));e.once("destroy",function(){t.destroy()}).addTransitionMode(kW,{ease:"Linear",dir:"out",mask:t,onStart:function(s,f,C,w){s.setCurrentImageMaskEnable(!0,!0)},onProgress:function(s,f,C,w){s.maskGameObject.setValue(w)},onComplete:function(s,f,C,w){s.removeMaskGameObject(!1)}})},fX=function(e,t){var s=new Rr(e,{type:"Graphics",create:{lines:t},update:function(){for(var f=this.getShapes(),C=this.width/t,w=C/2,F=0;F<t;F++){var N=C*F,z=this.height*this.value,H=N+w;f[F].fillStyle(16777215).start(N,0).horizontalLineTo(z).arc(H,z,w,180,0,!0).horizontalLineTo(-z).lineTo(N,0).close()}}});return s},cX=function(e){var t=fX(e.scene,10);e.once("destroy",function(){t.destroy()}).addTransitionMode(VW,{ease:"Linear",dir:"out",mask:t,onStart:function(s,f,C,w){C.tint=0,s.setCurrentImageMaskEnable(!0,!0),s.setNextImageMaskEnable(!0,!0)},onProgress:function(s,f,C,w){var F;w<.5?(w=hi(w),F=Math.floor(255*(1-w)),s.maskGameObject.setValue(w),f.tint=(F<<16)+(F<<8)+F):(f.visible&&s.setChildVisible(f,!1),w=hi(w),F=Math.floor(255*(1-w)),s.maskGameObject.setValue(w),C.tint=(F<<16)+(F<<8)+F)},onComplete:function(s,f,C,w){s.removeMaskGameObject(!1),s.setChildVisible(f,!0),f.tint=16777215,s.setChildVisible(C,!0),C.tint=16777215}})},pX=function(e){e.addTransitionMode(zW,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,s,f,C){t.setChildVisible(f,!1),s.effect=s.preFX.addPixelate(0),f.effect=f.preFX.addPixelate(0)},onProgress:function(t,s,f,C){if(C<.5){C=hi(C);var w=Math.min(s.width,s.height)/5;s.effect.amount=Math.ceil(w*C)}else{s.visible&&t.setChildVisible(s,!1),f.visible||t.setChildVisible(f,!0),C=hi(C);var w=Math.min(f.width,f.height)/5;f.effect.amount=Math.ceil(w*C)}},onComplete:function(t,s,f,C){s.preFX.remove(s.effect),delete s.effect,t.setChildVisible(s,!0),f.preFX.remove(f.effect),delete f.effect}})};const vX=`#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
// Scene buffer
uniform sampler2D uMainSampler;
uniform sampler2D uMainSampler2;

uniform int resizeMode;
uniform float progress;
uniform float fromRatio;
uniform float toRatio;
varying vec2 outFragCoord;
// Effect parameters
uniform float noiseX;
uniform float noiseY;
uniform float noiseZ;
uniform float fromEdgeStart;
uniform float fromEdgeWidth;
uniform float toEdgeStart;
uniform float toEdgeWidth;

vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
vec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
vec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }
vec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec3 fade(vec3 t) { return t*t*t*(t*(t*6.0-15.0)+10.0); }
float Perlin(vec3 P) {
    vec3 i0 = mod289(floor(P)), i1 = mod289(i0 + vec3(1.0));
    vec3 f0 = fract(P), f1 = f0 - vec3(1.0), f = fade(f0);
    vec4 ix = vec4(i0.x, i1.x, i0.x, i1.x), iy = vec4(i0.yy, i1.yy);
    vec4 iz0 = i0.zzzz, iz1 = i1.zzzz;
    vec4 ixy = permute(permute(ix) + iy), ixy0 = permute(ixy + iz0), ixy1 = permute(ixy + iz1);
    vec4 gx0 = ixy0 * (1.0 / 7.0), gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    vec4 gx1 = ixy1 * (1.0 / 7.0), gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0); gx1 = fract(gx1);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0), sz0 = step(gz0, vec4(0.0));
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1), sz1 = step(gz1, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5); gy0 -= sz0 * (step(0.0, gy0) - 0.5);
    gx1 -= sz1 * (step(0.0, gx1) - 0.5); gy1 -= sz1 * (step(0.0, gy1) - 0.5);
    vec3 g0 = vec3(gx0.x,gy0.x,gz0.x), g1 = vec3(gx0.y,gy0.y,gz0.y),
        g2 = vec3(gx0.z,gy0.z,gz0.z), g3 = vec3(gx0.w,gy0.w,gz0.w),
        g4 = vec3(gx1.x,gy1.x,gz1.x), g5 = vec3(gx1.y,gy1.y,gz1.y),
        g6 = vec3(gx1.z,gy1.z,gz1.z), g7 = vec3(gx1.w,gy1.w,gz1.w);
    vec4 norm0 = taylorInvSqrt(vec4(dot(g0,g0), dot(g2,g2), dot(g1,g1), dot(g3,g3)));
    vec4 norm1 = taylorInvSqrt(vec4(dot(g4,g4), dot(g6,g6), dot(g5,g5), dot(g7,g7)));
    g0 *= norm0.x; g2 *= norm0.y; g1 *= norm0.z; g3 *= norm0.w;
    g4 *= norm1.x; g6 *= norm1.y; g5 *= norm1.z; g7 *= norm1.w;
    vec4 nz = mix(vec4(dot(g0, vec3(f0.x, f0.y, f0.z)), dot(g1, vec3(f1.x, f0.y, f0.z)),
        dot(g2, vec3(f0.x, f1.y, f0.z)), dot(g3, vec3(f1.x, f1.y, f0.z))),
        vec4(dot(g4, vec3(f0.x, f0.y, f1.z)), dot(g5, vec3(f1.x, f0.y, f1.z)),
            dot(g6, vec3(f0.x, f1.y, f1.z)), dot(g7, vec3(f1.x, f1.y, f1.z))), f.z);
    return 2.2 * mix(mix(nz.x,nz.z,f.y), mix(nz.y,nz.w,f.y), f.x);
}
float Perlin(vec2 P) { return Perlin(vec3(P, 0.0)); }


vec4 getFromColor (vec2 uv) {
  return texture2D(uMainSampler, uv);
}

vec4 getToColor (vec2 uv) {
  if (resizeMode == 2) {
    //  cover
    return texture2D(uMainSampler2, 0.5 + (vec2(uv.x, 1.0 - uv.y) - 0.5) * vec2(min(fromRatio / toRatio, 1.0), min((toRatio / fromRatio), 1.0)));
  } else if (resizeMode == 1) {
    //  contain
    return texture2D(uMainSampler2, 0.5 + (vec2(uv.x, 1.0 - uv.y) - 0.5) * vec2(max(fromRatio / toRatio, 1.0), max((toRatio / fromRatio), 1.0)));
  } else {
    //  stretch
    return texture2D(uMainSampler2, vec2(uv.x, 1.0 - uv.y));
  }
}

vec4 transition (vec2 uv) {    
  vec4 colorFront = getFromColor(uv);
  vec4 colorTo = getToColor(uv);

  float noise = (Perlin(vec3(uv.x * noiseX, uv.y * noiseY, noiseZ)) + 1.0) / 2.0
    * (1.0 - (fromEdgeStart + fromEdgeWidth + toEdgeStart + toEdgeWidth))
    + (fromEdgeStart + fromEdgeWidth + toEdgeStart + toEdgeWidth) * 0.5;
  vec4 colorResult = colorFront * smoothstep(progress - (fromEdgeStart + fromEdgeWidth), progress - fromEdgeStart, noise)
    + colorTo * smoothstep((1.0 - progress) - (toEdgeStart + toEdgeWidth), (1.0 - progress) - toEdgeStart, (1.0 - noise));
  return colorResult;
}

void main () {
  vec2 uv = outFragCoord;
  gl_FragColor = transition(uv);
}
`,mX=Phaser.Renderer.WebGL.Pipelines.PostFXPipeline,er=Phaser.Utils.Objects.GetValue,gX=Phaser.Math.Clamp;class Xx extends mX{constructor(t){super({name:"rexDissolvePostFx",game:t,renderTarget:!0,fragShader:vX}),this._progress=0,this.toFrame=null,this.targetTexture=null,this.resizeMode=1,this.toRatio=1,this.noiseX=0,this.noiseY=0,this.noiseZ=0,this.fromEdgeStart=.01,this.fromEdgeWidth=.05,this.toEdgeStart=.01,this.toEdgeWidth=.05}resetFromJSON(t){return this.setProgress(er(t,"progress",0)),this.setTransitionTargetTexture(er(t,"toTexture","__DEFAULT"),er(t,"toFrame",void 0),er(t,"resizeMode",1)),this.setNoise(er(t,"noiseX",void 0),er(t,"noiseY",void 0),er(t,"noiseZ",void 0)),this.setFromEdge(er(t,"fromEdgeStart",.01),er(t,"fromEdgeWidth",.05)),this.setToEdge(er(t,"toEdgeStart",.01),er(t,"toEdgeWidth",.05)),this}onBoot(){}onPreRender(){this.set1f("progress",this.progress),this.set1i("resizeMode",this.resizeMode),this.set1f("noiseX",this.noiseX),this.set1f("noiseY",this.noiseY),this.set1f("noiseZ",this.noiseZ),this.set1f("fromEdgeStart",this.fromEdgeStart),this.set1f("fromEdgeWidth",this.fromEdgeWidth),this.set1f("toEdgeStart",this.toEdgeStart),this.set1f("toEdgeWidth",this.toEdgeWidth)}onDraw(t){this.set1f("fromRatio",t.width/t.height),this.set1f("toRatio",this.toRatio),this.set1i("uMainSampler2",1),this.bindTexture(this.targetTexture,1),this.bindAndDraw(t)}get progress(){return this._progress}set progress(t){this._progress=gX(t,0,1)}setProgress(t){return this.progress=t,this}setTransitionTargetTexture(t,s,f){t===void 0&&(t="__DEFAULT");var C=this.game.textures.getFrame(t,s);return C||(C=this.game.textures.getFrame("__DEFAULT")),this.toRatio=C.width/C.height,this.toFrame=C,this.targetTexture=C.glTexture,f!==void 0&&(this.resizeMode=f),this}setResizeMode(t){return typeof t=="string"&&(t=xX[t]),this.resizeMode=t,this}setNoise(t,s,f){return t===void 0&&(t=4+Math.random()*6),s===void 0&&(s=4+Math.random()*6),f===void 0&&(f=Math.random()*10),this.noiseX=t,this.noiseY=s,this.noiseZ=f,this}setFromEdge(t,s){return this.fromEdgeStart=t,this.fromEdgeWidth=s,this}setToEdge(t,s){return this.toEdgeStart=t,this.toEdgeWidth=s,this}}var xX={stretch:0,contain:1,cover:2},yX=function(e,t,s){O(e).renderer.pipelines.addPostPipeline(t,s)},SX=function(e,t,s){s===void 0&&(s={}),e.setPostPipeline(t);var f=e.postPipelines[e.postPipelines.length-1];return f.resetFromJSON(s),s.name&&(f.name=s.name),f};const TX=Phaser.Utils.Array.SpliceOne;var CX=function(e,t,s){for(var f,C,w,f=e.postPipelines,C=f.length-1;C>=0;C--){var w=f[C];w instanceof t&&(w.destroy(),TX(f,C))}e.hasPostPipeline=e.postPipelines.length>0},MX=function(e){yX(e.scene.game,"rexDissolvePostFx",Xx),e.addTransitionMode(WW,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,s,f,C){s.effect=SX(s,Xx)},onProgress:function(t,s,f,C){s.effect.setProgress(C)},onComplete:function(t,s,f,C){CX(s,Xx),delete s.effect}})};const Gp=.1,EX=0,PX=0,wX=1,bX=1,Dw=0,Iw=1;var AX=function(e){e.addTransitionMode(HW,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,s,f,C){f.effect=f.preFX.addReveal(Gp,EX,Dw)},onProgress:function(t,s,f,C){f.effect.progress=C},onComplete:function(t,s,f,C){f.preFX.remove(f.effect),delete f.effect}}).addTransitionMode(XW,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,s,f,C){f.effect=f.preFX.addReveal(Gp,wX,Dw)},onProgress:function(t,s,f,C){f.effect.progress=C},onComplete:function(t,s,f,C){f.preFX.remove(f.effect),delete f.effect}}).addTransitionMode($W,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,s,f,C){f.effect=f.preFX.addReveal(Gp,PX,Iw)},onProgress:function(t,s,f,C){f.effect.progress=C},onComplete:function(t,s,f,C){f.preFX.remove(f.effect),delete f.effect}}).addTransitionMode(YW,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,s,f,C){f.effect=f.preFX.addReveal(Gp,bX,Iw)},onProgress:function(t,s,f,C){f.effect.progress=C},onComplete:function(t,s,f,C){f.preFX.remove(f.effect),delete f.effect}})};const Bw=[_W,ZW,KW,JW,QW,eX,sX,qW,rX,oX,lX,dX,cX,pX,MX,AX];class Nw extends Np{constructor(t,s,f,C,w,F){super(t,s,f,C,w,F);for(var N=0,z=Bw.length;N<z;N++)Bw[N](this)}}c.register("transitionImagePack",function(e,t,s,f,C){var w=new Nw(this.scene,e,t,s,f,C);return this.scene.add.existing(w),w}),j(window,"RexPlugins.UI.TransitionImagePack",Nw);var RX=function(){var e=this.image;if(!this.scaleUp&&e.width<=this.width&&e.height<=this.height)return this;var t=bx(e,this,"FIT",!0);return e.setDisplaySize(t.width,t.height),this.resetChildScaleState(e),this},Gw={scaleImage:RX};Object.assign(Gw,Lw);var LX=function(){var e=this.background;return e?(e.setOrigin(this.originX,this.originY),e.setPosition(this.x,this.y),Ms(e,this.displayWidth,this.displayHeight),this.resetChildScaleState(e),this):this};const Uw=Phaser.Utils.Objects.IsPlainObject,va=Phaser.Utils.Objects.GetValue;class Up extends dn{constructor(t,s,f,C,w,F){Uw(s)?(F=s,s=va(F,"x",0),f=va(F,"y",0),C=va(F,"key",void 0),w=va(F,"frame",void 0)):Uw(w)&&(F=w,w=void 0);var N=va(F,"image");N?N.setPosition(s,f).setOrigin(.5):(N=t.add.image(s,f,C,w),C===void 0&&N.setVisible(!1)),super(t,s,f,1,1),this.type="rexImageBox";var z=va(F,"background");z&&this.add(z),this.background=z,this.add(N),this.image=N,this.scaleUp=va(F,"scaleUp",!1);var H=va(F,"width",N.width),Z=va(F,"height",N.height);this.resize(H,Z)}get texture(){return this.image.texture}get frame(){return this.image.frame}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.image.setFlipX(t))}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.image.setFlipY(t))}resize(t,s){return super.resize(t,s),LX.call(this),this.scaleImage(),this}setTexture(t,s){var f=this.image;return f.setTexture(t,s),t!==null?(this.setChildVisible(f,!0),this.scaleImage()):this.setChildVisible(f,!1),this}}Object.assign(Up.prototype,Gw),c.register("imageBox",function(e,t,s,f,C){var w=new Up(this.scene,e,t,s,f,C);return this.scene.add.existing(w),w}),j(window,"RexPlugins.UI.ImageBox",Up),c.register("fullWindowRectangle",function(e,t){var s=new ux(this.scene,e,t);return this.scene.add.existing(s),s}),j(window,"RexPlugins.UI.FullWindowRectangle",ux),c.register("fullWindowZone",function(){var e=new u0(this.scene);return this.scene.add.existing(e),e}),j(window,"RexPlugins.UI.FullWindowZone",u0),c.register("cover",function(e){var t=new fx(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.Cover",fx);var Hx=function(e,t){if(this.scene.sys.scale.autoRound&&(e=Math.floor(e),t=Math.floor(t)),this.width===e&&this.height===t)return this;var s=this.node.style;return s.width=`${e}px`,s.height=`${t}px`,this.updateSize(),this};const kw={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"],autoCapitalize:["autocapitalize","off"]},Vw={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],borderRadius:["border-radius",void 0],outline:["outline","none"],direction:["direction",void 0]},OX={input:"textchange",click:"click",dblclick:"dblclick",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",keydown:"keydown",keyup:"keyup",keypress:"keypress",compositionstart:"compositionStart",compositionend:"compositionEnd",compositionupdate:"compositionUpdate",focus:"focus",blur:"blur",select:"select"},zw=Phaser.Utils.Objects.GetValue;var Ww=function(e,t,s,f){var C=zw(f,"preventDefault",!1),w=zw(f,"preTest");for(let F in s)t.addEventListener(F,function(N){(!w||w(e,F))&&e.emit(s[F],e,N),C&&N.preventDefault()})};const FX=Phaser.GameObjects.DOMElement,Xw=Phaser.Utils.Objects.IsPlainObject,Or=Phaser.Utils.Objects.GetValue;class kp extends FX{constructor(t,s,f,C,w,F){Xw(s)?(F=s,s=Or(F,"x",0),f=Or(F,"y",0),C=Or(F,"width",0),w=Or(F,"height",0)):Xw(C)&&(F=C,C=Or(F,"width",0),w=Or(F,"height",0)),F===void 0&&(F={});var N,z=Or(F,"inputType",void 0);z===void 0&&(z=Or(F,"type","text")),z==="textarea"?(N=document.createElement("textarea"),N.style.resize="none"):(N=document.createElement("input"),N.type=z),Vc(kw,F,N);var H=Or(F,"style",void 0);H=Vc(Vw,F,H);var Z=N.style;for(var tt in F)if(!(tt in kw||tt in Vw)){if(tt in Z)H[tt]=F[tt];else if(tt in N){if(tt==="type")continue;N[tt]=F[tt]}}H["box-sizing"]="border-box",super(t,s,f,N,H),this.type="rexInputText",this.resize(C,w),Ww(this,N,OX),fE(N),Or(F,"selectAll",!1)&&this.selectAll(),this._isFocused=!1,this.on("focus",function(){this._isFocused=!0},this).on("blur",function(){this._isFocused=!1},this)}get inputType(){return this.node.tagName.toLowerCase()==="textarea"?"textarea":this.node.type}get text(){return this.node.value}set text(t){this.node.value=t}setText(t){return this.text=t,this}get maxLength(){return this.node.maxLength}set maxLength(t){this.node.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.node.minLength}set minLength(t){this.node.minLength=t}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node.placeholder=t}setPlaceholder(t){return this.placeholder=t,this}selectText(t,s){return t===void 0?this.node.select():this.node.setSelectionRange(t,s),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node.selectionStart}get selectionEnd(){return this.node.selectionEnd}get selectedText(){var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node.selectionStart}set cursorPosition(t){this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node.title}set tooltip(t){this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.node.readOnly}set readOnly(t){this.node.readOnly=t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node.spellcheck}set spellCheck(t){this.node.spellcheck=t}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){return this.node.style.color}set fontColor(t){this.node.style.color=t}setFontColor(t){return this.fontColor=t,this}setStyle(t,s){return this.node.style[t]=s,this}getStyle(t){return this.node.style[t]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(t){return t===void 0&&(t=!0),this.node.disabled=!t,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}get isFocused(){return this._isFocused}}var DX={resize:Hx};Object.assign(kp.prototype,DX),c.register("inputText",function(e){var t=new kp(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.InputText",kp);const Hw=Phaser.Utils.Objects.GetValue;var IX=function(e,t){var s=document.createElement("input");s.type="file";var f=Hw(t,"accept",""),C=Hw(t,"multiple",!1);return s.setAttribute("accept",f),C?s.setAttribute("multiple",""):s.removeAttribute("multiple"),s},Yw=function(e,t){return e===void 0&&(e=0),new Promise(function(s,f){setTimeout(function(){s(t)},e)})},$w=function({game:e,fileInput:t,closeDelay:s}){return Uc(O(e).events,"focus").then(function(){return Yw(s)}).then(function(){var f={files:t.files};return Promise.resolve(f)})};const BX=Phaser.Utils.Objects.GetValue,NX=Phaser.DOM.RemoveFromDOM;var _w=function(e,t){var s=BX(t,"closeDelay",200),f=IX(e,t);return f.click(),$w({game:e,fileInput:f,closeDelay:s}).then(function(C){return NX(f),f.remove(),Promise.resolve(C)})},Zw=function(e){return this.setOrigin(e.originX,e.originY),this.setPosition(e.x,e.y),this.resize(e.displayWidth,e.displayHeight),this},GX=function(e,t,s){if(s===void 0)switch(t){case"image":case"svg":s="textures";break;case"animation":s="json";break;case"tilemapTiledJSON":case"tilemapCSV":s="tilemap";break;case"glsl":s="shader";break;default:s=t;break}e=O(e);var f;return s==="textures"?f=e.textures:f=e.cache[s],f},Kw=function(e,t,s,f,C,w){if(!(C===null||C===!1))if(Qn(C))C();else{var F=GX(e,s,C);F.exists(f)&&F.remove(f)}var N=e.load;if(w&&N.once(`filecomplete-${s}-${f}`,function(H,Z,tt){w(tt)}),Qn(t))t();else{var z=window.URL.createObjectURL(t);N[s](f,z)}N.start()},UX=function(e,t,s,f,C){var w=this.scene;return Kw(w,e,t,s,f,C),this},kX=function(e,t,s,f){var C=this.scene;return new Promise(function(w,F){var N=function(z){w(z)};Kw(C,e,t,s,f,N)})},Jw={loadFile:UX,loadFilePromise:kX};const VX=Phaser.GameObjects.DOMElement,Qw=Phaser.Utils.Objects.IsPlainObject,Fr=Phaser.Utils.Objects.GetValue;class Vd extends VX{constructor(t,s,f,C,w,F){Qw(s)?(F=s,s=Fr(F,"x",0),f=Fr(F,"y",0),C=Fr(F,"width",0),w=Fr(F,"height",0)):Qw(C)&&(F=C,C=Fr(F,"width",0),w=Fr(F,"height",0));var N=document.createElement("input");N.type="file";var z=N.style;z.display="none";var H=document.createElement("label");H.appendChild(N);var Z=Fr(F,"style",void 0);super(t,s,f,H,Z),this.type="rexFileChooser",this.resetFromJSON(F),this.resize(C,w);var tt=this;N.onchange=function(){tt.emit("change",tt)},this.setCloseDelay(Fr(F,"closeDelay",200)),N.onclick=function(){$w({game:t,fileInput:N,closeDelay:tt.closeDelay}).then(function(){tt.emit("select",tt)})}}resetFromJSON(t){return this.setAccept(Fr(t,"accept","")),this.setMultiple(Fr(t,"multiple",!1)),this}setAccept(t){return t===void 0&&(t=""),this.fileInput.setAttribute("accept",t),this}setMultiple(t){return t===void 0&&(t=!0),t?this.fileInput.setAttribute("multiple",""):this.fileInput.removeAttribute("multiple"),this}setCloseDelay(t){return t===void 0&&(t=200),this.closeDelay=t,this}get fileInput(){return this.node.children[0]}open(){return this.fileInput.click(),this}get files(){return this.fileInput.files}setOpenEnable(t){return t===void 0&&(t=!0),this.fileInput.disabled=!t,this}}var zX={resize:Hx,syncTo:Zw};Object.assign(Vd.prototype,zX,Jw),c.register("fileChooser",function(e){var t=new Vd(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.FileChooser",Vd);var WX={setDropEnable(e){return e===void 0&&(e=!0),this.dropEnable=e,this},toggleDropEnable(){return this.dropEnable=!this.dropEnable,this}},XX={addFilter(e,t){return this.filters||(this.filters={}),this.filters[e]=t,this},addFilters(e){this.filters||(this.filters={});for(var t in e)this.filters[t]=e[t];return this}},jw={resize:Hx,syncTo:Zw};Object.assign(jw,WX,XX,Jw);const HX={dragenter:"dragenter",dragleave:"dragleave",dragover:"dragover",drop:"drop"},YX=Phaser.GameObjects.DOMElement,qw=Phaser.Utils.Objects.IsPlainObject,ma=Phaser.Utils.Objects.GetValue;class Yx extends YX{constructor(t,s,f,C,w,F){qw(s)?(F=s,s=ma(F,"x",0),f=ma(F,"y",0),C=ma(F,"width",0),w=ma(F,"height",0)):qw(C)&&(F=C,C=ma(F,"width",0),w=ma(F,"height",0)),F===void 0&&(F={});var N=document.createElement("div"),z=ma(F,"style",void 0);super(t,s,f,N,z),this.type="rexFileDropZone",this.resize(C,w),this._files=[],this.setDropEnable(ma(F,"dropEnable",!0));var H=ma(F,"filters");H&&this.addFilters(H),Ww(this,N,HX,{preventDefault:!0,preTest(Z){return Z.dropEnable}}),this.on("drop",function(Z,tt){this._files=tt.dataTransfer.files;var nt=this._files;if(nt&&this.filters)for(var st in this.filters){for(var ht=this.filters[st],ft=[],dt=0,gt=nt.length;dt<gt;dt++){var Et=nt[dt];ht(Et,nt)&&ft.push(Et)}ft.length>0&&this.emit(`drop.${st}`,ft)}},this)}get files(){return this._files}}Object.assign(Yx.prototype,jw),c.register("fileDropZone",function(e){var t=new Yx(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.FileDropZone",Yx);var $X=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t=0,s=this.sizerChildren,f,C,w,F,N,z=!1;if(this.childrenProportion,this.orientation===0)for(var H=!0,Z=0,tt=s.length;Z<tt;Z++)f=s[Z],f.hasOwnProperty("rexSizer")&&(C=f.rexSizer,!C.hidden&&(w=C.proportion,w===0||e?(N=this.getChildWidth(f),C.fitRatio>0&&!C.resolved&&(N=void 0),N===void 0&&(w!==0&&!this.hasProportion0Child?N=0:z=!0)):N=0,!z&&(F=f.rexSizer.padding,N+=(F.left+F.right)*this.scaleX,H?H=!1:N+=this.space.item*this.scaleX,t+=N)));else for(var Z=0,tt=s.length;Z<tt;Z++)f=s[Z],f.hasOwnProperty("rexSizer")&&(C=f.rexSizer,!C.hidden&&(N=this.getChildWidth(f),N===void 0&&(z=!0),!z&&(F=C.padding,N+=(F.left+F.right)*this.scaleX,t=Math.max(N,t))));if(!z)return t+(this.space.left+this.space.right)*this.scaleX},_X=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t=0,s=this.sizerChildren,f,C,w,F,N,z=!1;if(this.childrenProportion,this.orientation===0)for(var H=0,Z=s.length;H<Z;H++)f=s[H],f.hasOwnProperty("rexSizer")&&(C=f.rexSizer,!C.hidden&&(N=this.getChildHeight(f),N===void 0&&(z=!0),!z&&(F=C.padding,N+=(F.top+F.bottom)*this.scaleY,t=Math.max(N,t))));else for(var tt=!0,H=0,Z=s.length;H<Z;H++)f=s[H],f.hasOwnProperty("rexSizer")&&(C=f.rexSizer,!C.hidden&&(w=C.proportion,w===0||e?(N=this.getChildHeight(f),C.fitRatio>0&&!C.resolved&&(N=void 0),N===void 0&&(w!==0&&!this.hasProportion0Child?N=0:z=!0)):N=0,!z&&(F=C.padding,N+=(F.top+F.bottom)*this.scaleY,tt?tt=!1:N+=this.space.item*this.scaleY,t+=N)));if(!z)return t+(this.space.top+this.space.bottom)*this.scaleY},ZX=function(e,t){t===void 0&&(t=this.width*this.scaleX);var s,f=e.rexSizer;if(this.orientation===0)f.proportion>0&&this.proportionLength>0&&(s=f.proportion*this.proportionLength);else if(f.expand){var C=this.space,w=t-(C.left+C.right)*this.scaleX,F=f.padding;s=w-(F.left+F.right)*this.scaleX}return s},KX=function(e,t){t===void 0&&(t=this.height);var s,f=e.rexSizer;if(this.orientation===0){if(f.expand){var C=this.space,w=t-(C.top+C.bottom)*this.scaleY,F=f.padding;s=w-(F.top+F.bottom)*this.scaleY}}else f.proportion>0&&this.proportionLength>0&&(s=f.proportion*this.proportionLength);return s},JX=function(e){e===void 0&&(e=[]);for(var t=this.sizerChildren,s,f=0,C=t.length;f<C;f++)s=t[f],s.isRexSizer&&e.push(s);return e},QX=function(){this.hasRatioFitChild=!1;for(var e,t,s=this.sizerChildren,f=0,C=s.length;f<C;f++)e=s[f],t=e.rexSizer,!t.hidden&&t.fitRatio>0&&(Ms(e,0,0),t.resolved=!1,this.hasRatioFitChild=!0);return this._childrenProportion=void 0,this.hasProportion0Child=!1,this.proportionLength=void 0,Ad.call(this),this};const jX=Phaser.Math.Wrap;var qX=function(){for(var e=this.sizerChildren,t,s,f,C=this.innerLeft,w=this.innerTop,F=this.innerWidth,N=this.innerHeight,z=C,H=w,Z,tt,nt,st,ht,ft,dt,gt,Et,yt=this.startChildIndex,Dt=0,Wt=e.length;Dt<Wt;Dt++)yt===0?Et=Dt:Et=jX(Dt+yt,0,Wt),this.rtl&&(Et=Wt-Et-1),t=e[Et],!t.rexSizer.hidden&&(s=t.rexSizer,f=s.padding,Od.call(this,t),t.isRexSpace?(dt=0,gt=0):(dt=this.getExpandedChildWidth(t),gt=this.getExpandedChildHeight(t)),t.isRexSizer?(t.runLayout(this,dt,gt),Ax(t,this)):Ms(t,dt,gt),dt===void 0&&(dt=Ze(t)),gt===void 0&&(gt=Ke(t)),this.orientation===0?(Z=z+f.left*this.scaleX,s.proportion===0||this.proportionLength===0?nt=dt:nt=s.proportion*this.proportionLength,tt=H+f.top*this.scaleY,st=N-(f.top+f.bottom)*this.scaleY):(Z=z+f.left*this.scaleX,nt=F-(f.left+f.right)*this.scaleX,tt=H+f.top*this.scaleY,s.proportion===0||this.proportionLength===0?st=gt:st=s.proportion*this.proportionLength),dt===void 0&&(dt=Ze(t)),gt===void 0&&(gt=Ke(t)),ht=(s.alignOffsetX+s.alignOffsetOriginX*dt)*this.scaleX,ft=(s.alignOffsetY+s.alignOffsetOriginY*gt)*this.scaleY,Fd.call(this,t,Z,tt,nt,st,s.align,ht,ft),this.orientation===0?z+=nt+(f.left+f.right)*this.scaleX+this.space.item*this.scaleX:H+=st+(f.top+f.bottom)*this.scaleY+this.space.item*this.scaleY)},tH=function(t){var t=Q0.call(this,t);if(t!==void 0&&this.orientation===0&&this.proportionLength===void 0){var s=t-this.childrenWidth;s>0?(s=t-this.getChildrenWidth(!1),this.proportionLength=s/this.childrenProportion):this.proportionLength=0}return t},eH=function(t){var t=tx.call(this,t);if(t!==void 0&&this.orientation===1&&this.proportionLength===void 0){var s=t-this.childrenHeight;s>0?(s=t-this.getChildrenHeight(!1),this.proportionLength=s/this.childrenProportion):this.proportionLength=0}return t},iH=function(){return this.hasRatioFitChild&&this.orientation===1?!0:j0.call(this)},tb=function(e,t){if(this.hasRatioFitChild){var s;this.orientation===0?s=t-(this.getInnerPadding("top")+this.getInnerPadding("bottom"))*this.scaleY:e-(this.getInnerPadding("left")+this.getInnerPadding("right"))*this.scaleX;for(var f,C,w,F,N=this.sizerChildren,z=0,H=N.length;z<H;z++){var f=N[z],C=f.rexSizer;if(!C.hidden){var Z=C.fitRatio;Z&&(this.orientation===0?(F=s-(this.getChildOuterPadding(f,"top")+this.getChildOuterPadding(f,"bottom"))*this.scaleY,w=F*Z):(w=s-(this.getChildOuterPadding(f,"top")+this.getChildOuterPadding(f,"bottom"))*this.scaleX,F=w/Z),Ms(f,w,F),f.isRexSizer&&f.setMinSize(w,F),C.resolved=!0)}}}},sH=function(e){this.wrapResult||(this.orientation===1&&tb.call(this,e,void 0),q0.call(this,e))},nH=function(){return this.hasRatioFitChild&&this.orientation===0?!0:ex.call(this)},rH=function(e){this.wrapResult||(this.orientation===0&&tb.call(this,void 0,e),ix.call(this,e))};const aH=Phaser.GameObjects.Zone;class $x extends aH{constructor(t){super(t,0,0,1,1),this.isRexSpace=!0}}var oH=function(e,t){var s=this.sizerChildren;if(s.length===0)return-1;for(var f=-1,C=1/0,w=0,F=s.length;w<F;w++){var N=s[w],z;this.orientation===0?z=Math.abs(N.left-e):z=Math.abs(N.top-t),C>z&&(C=z,f=w)}var N=s[s.length-1],z;return this.orientation===0?z=Math.abs(N.right-e):z=Math.abs(N.bottom-t),C>z&&(C=z,f=w+1),f};const eb=Phaser.Utils.Objects.IsPlainObject,cn=Phaser.Utils.Objects.GetValue,ib=Phaser.Display.Align.CENTER,hH={min:0,full:-1};var _x=function(e,t,s,f,C,w,F,N,z,H){var Z,tt,nt,st;wd.call(this,e);var ht=e.isRexSpace,ft=typeof t;if(t===null)return this;if(ft!=="number"){if(ft==="string")t=hH[t];else if(eb(t)){var dt=t;t=cn(dt,"proportion",void 0),s=cn(dt,"align",ib),f=cn(dt,"padding",0),C=cn(dt,"expand",!1),w=cn(dt,"key",void 0),F=cn(dt,"index",void 0),e.isRexSizer||(N=cn(dt,"minWidth",void 0),z=cn(dt,"minHeight",void 0)),H=cn(dt,"fitRatio",0),Z=cn(dt,"offsetX",0),tt=cn(dt,"offsetY",0),nt=cn(dt,"offsetOriginX",0),st=cn(dt,"offsetOriginY",0)}}typeof s=="string"&&(s=Cl[s]),t===void 0&&(t=ht?1:0),s===void 0&&(s=ib),f===void 0&&(f=0),C===void 0&&(C=!1),N===void 0&&(ht?N=0:e.isRexSizer||(N=e._minWidth)),z===void 0&&(ht?z=0:e.isRexSizer||(z=e._minHeight)),H===void 0||H===!1?H=0:H===!0&&(H=Ze(e)/Ke(e)),Z===void 0&&(Z=0),tt===void 0&&(tt=0),nt===void 0&&(nt=0),st===void 0&&(st=0);var dt=this.getSizerConfig(e);return dt.proportion=t,dt.align=s,dt.padding=nh(f),dt.expand=C,dt.fitRatio=t===0?H:0,dt.alignOffsetX=Z,dt.alignOffsetY=tt,dt.alignOffsetOriginX=nt,dt.alignOffsetOriginY=st,F===void 0||F>=this.sizerChildren.length?this.sizerChildren.push(e):this.sizerChildren.splice(F,0,e),e.isRexSizer||(t>0&&(this.orientation===0?e.minWidth=N===void 0?Ze(e):N:e.minHeight=z===void 0?Ke(e):z),C&&(this.orientation===0?e.minHeight=z:e.minWidth=N)),w!==void 0&&this.addChildrenMap(w,e),this},lH={add:_x,addSpace(e){return this.insertSpace(void 0,e),this},insertSpace(e,t){return t===void 0&&(t=1),_x.call(this,new $x(this.scene),{proportion:t,minWidth:0,minHeight:0,index:e}),this},insert(e,t,s,f,C,w,F,N){return eb(s)&&(s.index=e),_x.call(this,t,s,f,C,w,F,e,N),this},insertAtPosition(e,t,s,f,C,w,F,N,z){var H=oH.call(this,e,t);return H===-1&&(H=void 0),this.insert(H,s,f,C,w,F,N,z),this}};const uH=Phaser.Utils.Array.Remove;var dH={remove(e,t){return this.getParentSizer(e)!==this?this:(uH(this.sizerChildren,e),bd.call(this,e,t),this)},removeAll(e){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],e);return this},clear(e){return this.sizerChildren.length=0,Rp.call(this,e),this}},fH={getChildAlign(e){return this.getSizerConfig(e).align},setChildAlign(e,t){return typeof t=="string"&&(t=Cl[t]),this.getSizerConfig(e).align=t,this}},cH={getChildProportion(e){return this.getSizerConfig(e).proportion},setChildProportion(e,t){return this.getSizerConfig(e).proportion=t,this}},pH={getChildExpand(e){return this.getSizerConfig(e).expand},setChildExpand(e,t){return this.getSizerConfig(e).expand=t,this}},vH=function(e){e===void 0&&(e="left");var t=this.sizerChildren,s=t[0],f=s&&s.isRexSpace;e==="right"||e==="bottom"||e==="center"?f||this.insertSpace(0):f&&this.remove(s,!0);var C=t.length-1,w=t[C],F=w&&w.isRexSpace;return e==="center"?F||this.insertSpace(C+1):F&&this.remove(w,!0),this},Zx={sortChildren(e){return this.sizerChildren.sort(e),this},sortChildrenByData(e,t){return this.sizerChildren.sort(function(s,f){var C=s.getData(e),w=f.getData(e);return t?w-C:C-w}),this},sortChildrenByProperty(e,t){return this.sizerChildren.sort(function(s,f){var C=s[e],w=f[e];return t?w-C:C-w}),this}},sb={getChildrenWidth:$X,getChildrenHeight:_X,getExpandedChildWidth:ZX,getExpandedChildHeight:KX,getChildrenSizers:JX,preLayout:QX,layoutChildren:qX,resolveWidth:tH,resolveHeight:eH,hasWidthWrap:iH,runWidthWrap:sH,hasHeightWrap:nH,runHeightWrap:rH,setChildrenAlignMode:vH};Object.assign(sb,lH,dH,fH,cH,pH,Zx);var mH=function(){for(var e=0,t=this.sizerChildren,s,f,C=0,w=t.length;C<w;C++)s=t[C],!s.rexSizer.hidden&&(f=s.rexSizer.proportion,f>0?e+=f:f===0&&(this.hasProportion0Child=!0));return e};const Kx=Phaser.Utils.Objects.IsPlainObject,Ln=Phaser.Utils.Objects.GetValue;class Le extends hh{constructor(t,s,f,C,w,F,N){Kx(s)?(N=s,s=Ln(N,"x",0),f=Ln(N,"y",0),C=Ln(N,"width",void 0),w=Ln(N,"height",void 0),F=Ln(N,"orientation",0)):Kx(C)?(N=C,C=Ln(N,"width",void 0),w=Ln(N,"height",void 0),F=Ln(N,"orientation",0)):Kx(F)&&(N=F,F=Ln(N,"orientation",0)),F===void 0&&(F=0),super(t,s,f,C,w,N),this.type="rexSizer",this.sizerChildren=[],this.setOrientation(F),this.setItemSpacing(Ln(N,"space.item",0)),this.setStartChildIndex(Ln(N,"startChildIndex",0)),this.setRTL(Ln(N,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=qo(t),this}setItemSpacing(t){return this.space.item=t,this}setStartChildIndex(t){return this.startChildIndex=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=mH.call(this)),this._childrenProportion}}Object.assign(Le.prototype,sb);var Vp=function(e,t,s){if(e){var f=t==null,C=s==null;return f&&C||(f||(e.displayWidth=t),C||(e.displayHeight=s),f&&(e.scaleX=e.scaleY),C&&(e.scaleY=e.scaleX)),e}},gH=function(e){e===void 0?e={}:typeof e=="string"&&(e={text:e});var t=e.text||"";this.setText(t);var s=this.childrenMap.icon;if(s){e.icon?this.show(s):this.hide(s);var f=e.iconSize;f&&(this.setChildDisplaySize(s,f,f),this.iconWidth!==void 0&&this.setIconSize(f)),e.icon!==!0&&this.setIconTexture(e.icon,e.iconFrame)}var C=this.childrenMap.action;if(C){e.action?this.show(C):this.hide(C);var w=e.actionSize;w&&(this.setChildDisplaySize(C,w,w),this.actionWidth!==void 0&&this.setActionSize(w)),e.action!==!0&&this.setActionTexture(e.action,e.actionFrame)}return this},xH={appendText:b1,resetDisplayContent:gH};class Jx extends Le{get text(){var t=this.childrenMap.text;return t?t.text:""}set text(t){var s=this.childrenMap.text;s&&s.setText(t)}setText(t){return this.text=t,this}setIconTexture(t,s){var f=this.childrenMap.icon;return!f||!f.setTexture?this:(f.setTexture(t,s),this.iconWidth!==void 0&&this.iconHeight!==void 0&&(Vp(f,this.iconWidth,this.iconHeight),this.resetChildScaleState(f)),this)}setTexture(t,s){return this.setIconTexture(t,s),this}setIconSize(t,s){return s===void 0&&(s=t),this.iconWidth=t,this.iconHeight=s,this}get texture(){var t=this.childrenMap.icon;if(t)return t.texture}get frame(){var t=this.childrenMap.icon;if(t)return t.frame}setActionTexture(t,s){var f=this.childrenMap.action;return!f||!f.setTexture?this:(f.setTexture(t,s),this.actionWidth!==void 0&&this.actionHeight!==void 0&&(Vp(f,this.actionWidth,this.actionHeight),this.resetChildScaleState(f)),this)}get actionTexture(){var t=this.childrenMap.action;if(t)return t.texture}get actionFrame(){var t=this.childrenMap.action;if(t)return t.frame}setActionSize(t,s){return s===void 0&&(s=t),this.actionWidth=t,this.actionHeight=s,this}preLayout(){var t=this.childrenMap.icon;t&&this.iconWidth!==void 0&&this.iconHeight!==void 0&&Vp(t,this.iconWidth,this.iconHeight);var s=this.childrenMap.action;s&&this.actionWidth!==void 0&&this.actionHeight!==void 0&&Vp(s,this.actionWidth,this.actionHeight),super.preLayout()}postLayout(t,s,f){var C=this.childrenMap.iconMask;C&&(C.setPosition(),this.resetChildPositionState(C));var w=this.childrenMap.actionMask;return w&&(w.setPosition(),this.resetChildPositionState(w)),super.postLayout(t,s,f),this}resize(t,s){super.resize(t,s);var f=this.childrenMap.iconMask;f&&f.resize();var C=this.childrenMap.actionMask;return C&&C.resize(),this}}Object.assign(Jx.prototype,xH);var ir=function(e,t,s,f){var C=new Bp(t,s,f);if(e&&!e.isRexSizer){var w=C.createGeometryMask();e.setMask(w),this.once("destroy",function(){e.setMask(),w.destroy()})}return this.pin(C),C};const yH=Phaser.GameObjects.Text;var Qx=function(e){return e instanceof yH};const SH=Phaser.GameObjects.BitmapText;var nb=function(e){return e instanceof SH};const Es=0,Ps=1,pn=2;var so=function(e){var t;return nb(e)?t=pn:Qx(e)?t=Es:t=Ps,t},TH=function(e,t){for(var s=[],f=e.split(`
`),C=t.style,w=C.wordWrapWidth,F=C.hasOwnProperty("wrapMode")?C.wrapMode:3,N=t.context,z=0,H=f.length;z<H;z++)MH(N,f[z],w,F,s);return s},CH=function(e,t){var s;if(t===2)s=e.split("");else{s=[];for(var f=e.split(" "),C,w=0,F=f.length;w<F;w++)C=f[w],w<F-1?_u(C)?s.push(C+" "):(s.push(...C.split("")),s.push(" ")):C!==""&&(_u(C)?s.push(C):s.push(...C.split("")))}return s},MH=function(e,t,s,f,C){if(t.length<=100){var w=e.measureText(t).width;if(w<=s)return C.push(t),C}for(var F=CH(t,f),N,z,H=[],Z=s,tt=0,nt=F.length;tt<nt;tt++)N=F[tt],z=e.measureText(N).width,Z-=z,Z<0&&(C.push(H.join("")),H.length=0,Z=s-z),H.push(N);return H.length>0&&C.push(H.join("")),C},jx=function(e,t){var s=so(e);switch(s){case Es:switch(typeof t=="string"&&(t=xc[t]||0),e.style.wrapMode=t,t){case 2:case 3:e.style.wordWrapCallback=TH;break;case 1:default:e.style.wordWrapCallback=null;break}break;case Ps:typeof t=="string"&&(t=xc[t]||0),e.style.wrapMode=t;break}},EH=function(e){var t=function(s){var f=e.padding,C=s-(f.left+f.right)*e.scaleX,w=e.style;return Qx(e)?(w.wordWrapWidth=C,w.maxLines=0):(w.wrapMode===0&&(w.wrapMode=1),w.wrapWidth=C,w.maxLines=0),w.fixedWidth=s,w.fixedHeight=0,e.updateText(),e.minHeight=e.height,e};return t},PH=function(e){var t=function(s){return e.setFixedSize(s,0).runWordWrap(),e.minHeight=e.height,e};return t},wH=function(e){var t=function(s){return e.setMaxWidth(s),e.minHeight=e.height,e};return t},bH=function(e){return e instanceof rl},zp=function(e,t){return t===void 0&&(t=0),e._minWidth=t,e.runWidthWrap=bH(e)?PH(e):nb(e)?wH(e):EH(e),e};const qx=65535;var Wp=function(e,t,s){if(t==null)return e;if(t===0)return ty(e,0,s),e;var f=e.text.length;if(f===0)return ty(e,t,s),e;var C=Math.floor(t*1.5/f);s!==void 0&&C>s&&(C=Math.floor(s));for(var w={},F=ab(e,C,t,s,w),N=0;N<=qx&&F!==0;N++){if(C+=F,C<0){C=0;break}F=ab(e,C,t,s,w)}return N===qx&&console.warn(`FontSizeFit: Test count exceeds ${qx}`),e.setFontSize(C),ty(e,t,s),e},rb=function(e,t,s){return s[t]===void 0&&(e.setFontSize(t),s[t]={width:e.width,height:e.height}),s[t]},ab=function(e,t,s,f,C){var w=rb(e,t,C),F=rb(e,t+1,C),N;if(f!==void 0)if(w.height<=f&&F.height>f)N=0;else{if(w.height>f)return-1;N=Math.floor(f-w.height)}var z;if(w.width<=s&&F.width>s)return 0;if(w.width>s)return-1;var z=Math.floor(s-w.width);return N===void 0?z:Math.min(z,N)},ty=function(e,t,s){var f=e.style;f&&(f.fixedWidth=t,f.parent.width=t,s!==void 0&&(f.fixedHeight=s,f.parent.height=s),f.update(!1))};const ey=Phaser.Utils.Objects.GetValue;var Xp=function(e,t){typeof t=="number"&&(t={minWidth:t});var s=ey(t,"minWidth",0),f=ey(t,"minHeight",0),C=ey(t,"fitHeight",!1);return e._minWidth=s,e._minHeight=f,C?(e.runWidthWrap=function(w){return e.setFixedSize&&e.setFixedSize(0,0),e.setFontSize(1),e},e.resize=function(w,F){return Wp(e,w,F),e}):(e.runWidthWrap=function(w){return e.setFixedSize&&e.setFixedSize(0,0),Wp(e,w,void 0),e},e.resize=function(w,F){return e.width===w&&e.height===F||e.setFixedSize(w,F),e}),e};const Ye=Phaser.Utils.Objects.GetValue;class ga extends Jx{constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexLabel";var f=Ye(s,"background",void 0),C=Ye(s,"icon",void 0),w=Ye(s,"iconMask",void 0),F=Ye(s,"text",void 0),N=Ye(s,"action",void 0),z=Ye(s,"actionMask",void 0),H=Ye(s,"align",void 0);if(f&&this.addBackground(f),C){var Z;this.orientation===0?(F||N)&&(Z={right:Ye(s,"space.icon",0),top:Ye(s,"space.iconTop",0),bottom:Ye(s,"space.iconBottom",0),left:Ye(s,"space.iconLeft",0)}):(F||N)&&(Z={bottom:Ye(s,"space.icon",0),left:Ye(s,"space.iconLeft",0),right:Ye(s,"space.iconRight",0),top:Ye(s,"space.iconTop",0)});var tt=Ye(s,"squareFitIcon",!1)?1:0;if(this.add(C,{proportion:0,padding:Z,fitRatio:tt}),w&&(w=ir.call(this,C,C,1)),!tt){var nt=Ye(s,"iconSize",void 0);this.setIconSize(Ye(s,"iconWidth",nt),Ye(s,"iconHeight",nt))}}if(F){var st=Ye(s,"wrapText",!1),ht=Ye(s,"adjustTextFontSize",!1);st?(st===!0&&(st="word"),jx(F,st),s.expandTextWidth=!0,zp(F)):ht&&(s.expandTextWidth=!0,s.expandTextHeight=!0,Xp(F,{fitHeight:!0}));var ft=Ye(s,"space.text",0),dt=Ye(s,"expandTextWidth",!1),gt=Ye(s,"expandTextHeight",!1),Et,Z,yt;this.orientation===0?(Et=dt?1:0,N&&(Z={right:ft}),yt=gt):(Et=gt?1:0,N&&(Z={bottom:ft}),yt=dt),this.add(F,{proportion:Et,expand:yt,padding:Z})}if(N){var Z;this.orientation===0?Z={top:Ye(s,"space.actionTop",0),bottom:Ye(s,"space.actionBottom",0),right:Ye(s,"space.actionRight",0)}:Z={left:Ye(s,"space.actionLeft",0),right:Ye(s,"space.actionRight",0),bottom:Ye(s,"space.actionBottom",0)};var tt=Ye(s,"squareFitAction",!1)?1:0;if(this.add(N,{proportion:0,padding:Z,fitRatio:tt}),z&&(z=ir.call(this,N,N,1)),!tt){var Dt=Ye(s,"actionSize");this.setActionSize(Ye(s,"actionWidth",Dt),Ye(s,"actionHeight",Dt))}}this.setChildrenAlignMode(H),this.addChildrenMap("background",f),this.addChildrenMap("icon",C),this.addChildrenMap("iconMask",w),this.addChildrenMap("text",F),this.addChildrenMap("action",N),this.addChildrenMap("actionMask",z)}}const no=Phaser.Utils.Objects.GetValue;var AH=function(e,t){var s=no(t,"canvas"),f=no(s,"width",128),C=no(s,"height",128),w=new jo(e,0,0,f,C);e.add.existing(w);var F=no(s,"key"),N=no(s,"frame"),z=no(s,"fill");return z!==void 0?w.fill(z):F!==void 0&&w.loadTexture(F,N),w.setTexture=w.loadTexture.bind(w),w},RH=function(e,t){var s=new Up(e,{scaleUp:no(t,"scaleUpIcon",!1),background:no(t,"iconBackground"),image:AH(e,t)});return e.add.existing(s),s};const LH=Phaser.Utils.Objects.GetValue;var ob=function(e,t){var s=LH(t,"clickTarget",this);return typeof s=="string"&&(s=e.getElement(s)),s};const OH=Phaser.Utils.Objects.GetValue;var FH=function(e,t){var s=ob(e,t);if(s){var f=OH(t,"click"),C=new ha(s,f);return C.on("click",e.open,e),C}};const hb={accept:"image/*",multiple:!1};var lb=function(e,t){if(t.length!==0){var s=e.childrenMap.icon,f=s.image,C=t[0];return f.loadFromFilePromise(C).then(function(){return s.scaleImage(),e.emit("select",C,e),Promise.resolve(C)})}},DH=function(e,t){var s=e.scene,f=new Vd(s,hb);return s.add.existing(f),e.pin(f),f.on("change",function(){lb(e,f.files)}),f},IH={async openPromise(){var e=this;return _w(this.scene.game,hb).then(function(t){return lb(e,t.files)})},open(){return this.openPromise(),this},setClickOpenEnable(e){return e===void 0&&(e=!0),this.clickBehavior&&this.clickBehavior.setEnable(e),this.fileChooser&&this.fileChooser.setOpenEnable(e),this}},BH=function(e){if(!e)return null;var t=e.name;return t.substr(0,t.lastIndexOf("."))},NH=function(e){var t=this.childrenMap.canvas;return t.generateTexture(e),this},ub={getFileName:BH,saveTexture:NH};Object.assign(ub,IH);const GH=Phaser.Utils.Objects.GetValue;class iy extends ga{constructor(t,s){var f=RH(t,s);s.icon=f,super(t,s),this.type="rexImageFileInputLabel";var C=this.iconWidth,w=this.iconWidth;C!==void 0&&w!==void 0&&f.resize(C,w),this.clickTarget=ob(this,s),this.clickTarget&&(GH(s,"domButton",!0)?this.fileChooser=DH(this):this.clickBehavior=FH(this,s)),this.addChildrenMap("canvas",f.image),this.addChildrenMap("iconBackground",f.background),this.addChildrenMap("fileChooser",this.fileChooser)}postLayout(t,s,f){this.fileChooser&&(this.fileChooser.syncTo(this.clickTarget),this.resetChildState(this.fileChooser)),super.postLayout(t,s,f)}}Object.assign(iy.prototype,ub),c.register("imageInputLabel",function(e){var t=new iy(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.ImageInputLabel",iy);let UH=class extends Si{constructor(t,s){return super(t),new Proxy(this,this)}get(t,s){if(_e(t,s))return t[s];var f=t.parent;if(_e(f,s))return f[s]}set(t,s,f){return _e(t,s)?t[s]=f:_e(t.parent,s)&&(t.parent[s]=f),!0}get key(){return this.parent.texture.key}set key(t){this.parent.setTexture(t,this.frame)}get frame(){return this.parent.frame.name}set frame(t){this.parent.setFrame(t)}get scale(){return this.parent.scaleX}set scale(t){this.parent.setScale(t)}};const sy=Phaser.Utils.Objects.GetValue;class kH extends Si{constructor(t,s){super(t,s),this.style=sy(s,"style",this);var f=sy(s,"propertiesMap");this.activeStyle=ny(s,"active",f),this.hoverStyle=ny(s,"hover",f),this.disableStyle=ny(s,"disable",f),this.onModifyStyle=sy(s,"onModifyStyle")}getStyle(t){return Wc(this.style,t)}modifyStyle(t){for(var s in t)this.style[s]=t[s];return this.onModifyStyle&&this.onModifyStyle(this.parent,t),this}applyStyle(t){if(t){var s=this.getStyle(t);if(!dd(s,t))return this.modifyStyle(t),s}}setActiveState(t){return ry.call(this,"active",t),this}setHoverState(t){return ry.call(this,"hover",t),this}setDisableState(t){return ry.call(this,"disable",t),this}}var ny=function(e,t,s){var f=zc(e,t);if(s)for(var C in f)s.hasOwnProperty(C)&&(f[s[C]]=f[C],delete f[C]);return f},ry=function(e,t){t===void 0&&(t=!0);var s=`${e}State`,f=`${e}Style`,C=`${e}StyleSave`;this[s]!==t&&(this[s]=t,t?this[C]=this.applyStyle(this[f]):(this.applyStyle(this[C]),this[C]=void 0))},lh={addStyleManager(e){return this.styleManager=new kH(this,e),this},setActiveState(e){return this.styleManager.setActiveState(e),this},setHoverState(e){return this.styleManager.setHoverState(e),this},setDisableState(e){return this.styleManager.setDisableState(e),this}};const VH=Phaser.GameObjects.Image,zd=Phaser.Utils.Objects.GetValue;class Wd extends VH{constructor(t,s){s===void 0&&(s={});var f=zd(s,"x",0),C=zd(s,"y",0),w=zd(s,"key",""),F=zd(s,"frame",void 0);super(t,f,C,w,F),this.type="rexStatesImage";var N=zd(s,"effects",!0);N&&al(this,N),this.style=new UH(this,s),s.style=this.style,this.addStyleManager(s),delete s.style}}Object.assign(Wd.prototype,lh),c.register("statesImage",function(e){var t=new Wd(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.StatesImage",Wd);class Xd extends Ge{constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexStatesRoundRectangleShape",s.style=this,s.propertiesMap=zH,this.addStyleManager(s),delete s.style,delete s.propertiesMap}}const zH={color:"fillColor",alpha:"fillAlpha",strokeWidth:"lineWidth"};Object.assign(Xd.prototype,lh),c.register("statesRoundRectangle",function(e){var t=new Xd(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.StatesRoundRectangle",Xd);let WH=class extends Si{constructor(t,s){return super(t),new Proxy(this,this)}get(t,s){if(_e(t,s))return t[s];var f=t.parent;if(_e(f,s))return f[s]}set(t,s,f){return _e(t,s)?t[s]=f:_e(t.parent,s)&&(t.parent[s]=f),!0}get key(){return this.parent.texture.key}set key(t){this.key!==t&&this.parent.setTexture(t,this.frame)}get frame(){return this.parent.frame.name}set frame(t){this.frame!==t&&this.parent.setFrame(t)}};const XH=Phaser.GameObjects.NineSlice,sr=Phaser.Utils.Objects.GetValue;class Hd extends XH{constructor(t,s){s===void 0&&(s={});var f=sr(s,"x",0),C=sr(s,"y",0),w=sr(s,"key",null),F=sr(s,"frame",null),N=sr(s,"width",0),z=sr(s,"height",0),H=sr(s,"leftWidth",0),Z=sr(s,"rightWidth",0),tt=sr(s,"topHeight",0),nt=sr(s,"bottomHeight",0);super(t,f,C,w,F,N,z,H,Z,tt,nt),this.type="rexStatesNineSlice";var st=sr(s,"effects",!0);st&&al(this,st),this.style=new WH(this,s),s.style=this.style,this.addStyleManager(s),delete s.style}}Object.assign(Hd.prototype,lh),c.register("statesNineSlice",function(e){var t=new Hd(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.StatesNineSlice",Hd);let HH=class extends Si{constructor(t,s){return super(t),new Proxy(this,this)}get(t,s){if(_e(t,s))return t[s];var f=t.parent;if(_e(f,s))return f[s]}set(t,s,f){return _e(t,s)?t[s]=f:_e(t.parent,s)&&(t.parent[s]=f),!0}get key(){return this.parent.textureKey}set key(t){this.key!==t&&this.parent.setBaseTexture(t,this.baseFrameName)}get frame(){return this.parent.baseFrameName}set frame(t){this.frame!==t&&this.parent.setBaseTexture(this.parent.textureKey,t)}};const YH=Phaser.Utils.Objects.GetValue;class Yd extends W{constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexStatesNinePatch";var f=YH(s,"effects",!0);f&&al(this,f),this.style=new HH(this,s),s.style=this.style,this.addStyleManager(s),delete s.style}}Object.assign(Yd.prototype,lh),c.register("statesNinePatch",function(e){var t=new Yd(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.StatesNinePatch",Yd);const $H=Phaser.GameObjects.Text,ay=Phaser.Utils.Objects.GetValue;class Hp extends $H{constructor(t,s){s===void 0&&(s={});var f=ay(s,"x",0),C=ay(s,"y",0),w=ay(s,"text","");super(t,f,C,w,s),this.type="rexStatesText",s.style=this.style,s.onModifyStyle=function(F,N){var z=N.hasOwnProperty("fontStyle")||N.hasOwnProperty("fontSize")||N.hasOwnProperty("fontFamily");F.style.update(z)},this.addStyleManager(s),delete s.style}}Object.assign(Hp.prototype,lh),c.register("statesText",function(e){var t=new Hp(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.StatesText",Hp);class _H extends Si{constructor(t,s){return super(t),new Proxy(this,this)}get(t,s){if(_e(t,s))return t[s];var f=t.parent;if(_e(f,s))return f[s]}set(t,s,f){return _e(t,s)?t[s]=f:_e(t.parent,s)&&(t.parent[s]=f),!0}get key(){return this.parent.texture.key}set key(t){this.parent.setTexture(t,this.frame)}get fontSize(){return this.parent.fontSize}set fontSize(t){this.parent.setFontSize(t)}get tint(){return this.parent.tintTopLeft}set tint(t){this.parent.setTint(t)}get letterSpacing(){return this.parent.letterSpacing}set letterSpacing(t){this.parent.setLetterSpacing(t)}get lineSpacing(){return this.parent.lineSpacing}set lineSpacing(t){this.parent.setLineSpacing(t)}}const ZH=Phaser.GameObjects.BitmapText,uh=Phaser.Utils.Objects.GetValue;class Yp extends ZH{constructor(t,s){s===void 0&&(s={});var f=uh(s,"x",0),C=uh(s,"y",0),w=uh(s,"font",""),F=uh(s,"fontSize",!1),N=uh(s,"align",0),z=uh(s,"tint");super(t,f,C,w,"",F,N),this.type="rexStatesBitmapText",z!==void 0&&this.setTint(z);var H=uh(s,"effects",!0);H&&al(this,H),this.style=new _H(this,s),s.style=this.style,this.addStyleManager(s),delete s.style}}Object.assign(Yp.prototype,lh),c.register("statesBitmapText",function(e){var t=new Yp(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.StatesBitmapText",Yp);class $p extends jc{constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("value")||(s.value=0),s.hasOwnProperty("hover.bar")||(s["hover.bar"]=!0),s.hasOwnProperty("easeDuration")||(s.easeDuration=200),s.hasOwnProperty("ease")||(s.ease="Quad"),j(s,"easeValue.duration",s.easeDuration),j(s,"easeValue.ease",s.ease),super(t,s),this.type="rexStatesBarRectangleShape",this.barState=!1,s.style=this,s.propertiesMap=KH,this.addStyleManager(s),delete s.style,delete s.propertiesMap}get bar(){return this.barState}set bar(t){t=!!t,this.barState!==t&&(this.barState=t,this.easeValueTo(this.barState?1:0))}}const KH={color:"trackColor",strokeColor:"trackStrokeColor",strokeWidth:"trackStrokeThickness"};Object.assign($p.prototype,lh),c.register("statesBarRectangle",function(e){var t=new $p(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.StatesBarRectangle",$p);var JH=function(e){if(!window.Chart){var t=`Can not find chartjs! Load chartjs in preload stage.
scene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/Chart.min.js');`;return console.error(t),this}return this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,QH(this,e)),this},QH=function(e,t){t===void 0&&(t={}),t.options===void 0&&(t.options={});var s=t.options;s.responsive=!1,s.maintainAspectRatio=!1,s.hasOwnProperty("devicePixelRatio")||(s.devicePixelRatio=1);var f=!1;s.animation===void 0?s.animation={}:s.animation===!1&&(f=!0,s.animation={});var C=s.animation;f&&(C.duration=0);var w=C.onProgress;C.onProgress=function(N){w&&w(N),e.needRedraw()};var F=C.onComplete;return C.onComplete=function(N){F&&F(N),e.needRedraw()},t},jH=function(e){if(this.chart!==void 0)if(typeof e=="string"){for(var t=this.chart.data.datasets,s,f=0,C=t.length;f<C;f++)if(s=t[f],s.label===e)return s}else return this.chart.data.datasets[e]},qH=function(e,t){var s=this.getChartDataset(e);if(s!==void 0){if(typeof t=="string"){var f=this.chart.data.labels;if(t=f.indexOf(t),t===-1)return}return s.data[t]}},tY=function(e,t,s){if(this.chart===void 0)return this;var f=this.getChartDataset(e);if(typeof t=="string"){var C=this.chart.data.labels;if(t=C.indexOf(t),t===-1)return this}return f.data[t]=s,this},eY=function(){return this.chart===void 0?this:(this.chart.update(),this)};let oy=class extends jo{constructor(t,s,f,C,w,F){super(t,s,f,C,w),this.type="rexChart",this.chart=void 0,F!==void 0&&this.setChart(F)}destroy(t){this.scene&&(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(t))}resize(t,s){if(t===this.width&&s===this.height)return this;if(super.resize(t,s),this.chart){var f=this.chart;f.height=this.canvas.height,f.width=this.canvas.width,f.aspectRatio=f.height?f.width/f.height:null,f.update()}return this}};var iY={setChart:JH,getChartDataset:jH,getChartData:qH,setChartData:tY,updateChart:eY};Object.assign(oy.prototype,iY),c.register("chart",function(e,t,s,f,C){var w=new oy(this.scene,e,t,s,f,C);return this.scene.add.existing(w),w}),j(window,"RexPlugins.UI.Chart",oy),c.register("container",function(e,t,s,f,C){var w=new dn(this.scene,e,t,s,f,C);return this.scene.add.existing(w),w}),j(window,"RexPlugins.UI.Container",dn),c.register("sizer",function(e,t,s,f,C,w){var F=new Le(this.scene,e,t,s,f,C,w);return this.scene.add.existing(F),F}),j(window,"RexPlugins.UI.Sizer",Le);var db=function(){return Array.prototype.reduce.call(arguments,sY,0)},sY=function(e,t){return e+t},nY=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t=0,s,f=this.sizerChildren,C,w,F,N,z=!1;this.totalColumnProportions;for(var H=0;H<this.columnCount;H++){if(N=this.columnProportions[H],s=0,N===0||e){for(var Z=0;Z<this.rowCount;Z++)C=f[Z*this.columnCount+H],C&&(C.rexSizer.hidden||(F=this.getChildWidth(C),F===void 0&&(N!==0&&!this.hasColumnProportion0Child?F=0:z=!0),!z&&(w=C.rexSizer.padding,F+=(w.left+w.right)*this.scaleX,s=Math.max(s,F))));z||(t+=s)}z||e&&(this.columnWidth[H]=s)}if(!z){var tt=Math.max(this.space.indentLeftOdd,this.space.indentLeftEven),nt=db(this.space.left,tt,...this.space.column,this.space.right);return t+nt*this.scaleX}},rY=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t=0,s,f=this.sizerChildren,C,w,F,N,z=!1;this.totalRowProportions;for(var H=0;H<this.rowCount;H++){if(N=this.rowProportions[H],s=0,N===0||e){for(var Z=0;Z<this.columnCount;Z++)C=f[H*this.columnCount+Z],C&&(C.rexSizer.hidden||(F=this.getChildHeight(C),F===void 0&&(N!==0&&!this.hasRowProportion0Child?F=0:z=!0),!z&&(w=C.rexSizer.padding,F+=(w.top+w.bottom)*this.scaleY,s=Math.max(s,F))));z||(t+=s)}z||e&&(this.rowHeight[H]=s)}if(!z){var tt=Math.max(this.space.indentTopOdd,this.space.indentTopEven),nt=db(this.space.top,tt,...this.space.row,this.space.bottom);return t+nt*this.scaleY}},aY=function(e,t){var s,f=e.rexSizer;if(f.expandWidth){var C=f.padding;s=t-(C.left+C.right)*this.scaleX}return s},oY=function(e,t){var s,f=e.rexSizer;if(f.expandHeight){var C=f.padding;s=t-(C.top+C.bottom)*this.scaleY}return s},hY=function(e){e===void 0&&(e=[]);for(var t=this.sizerChildren,s,f=0,C=t.length;f<C;f++)s=t[f],s&&s.isRexSizer&&e.push(s);return e},lY=function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.hasColumnProportion0Child=!1,this.hasRowProportion0Child=!1,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,Ad.call(this),this},uY=function(){for(var e,t,s,f=this.innerLeft,C=this.innerTop,w,F=C,N,z,H,Z,tt,nt,st,ht,ft,dt,gt,Et,yt=0;yt<this.rowCount;yt++){dt=this.getRowHeight(yt),gt=yt%2?this.space.indentLeftEven:this.space.indentLeftOdd,w=f+gt*this.scaleX;for(var Dt=0;Dt<this.columnCount;Dt++){if(ft=this.getColumnWidth(Dt),e=this.getChildAt(Dt,yt),!e||e.rexSizer.hidden){w+=ft+this.space.column[Dt]*this.scaleX;continue}Od.call(this,e),st=this.getExpandedChildWidth(e,ft),ht=this.getExpandedChildHeight(e,dt),e.isRexSizer?(e.runLayout(this,st,ht),Ax(e,this)):Ms(e,st,ht),t=e.rexSizer,s=t.padding,N=w+s.left*this.scaleX,H=ft-(s.left+s.right)*this.scaleX,Et=Dt%2?this.space.indentTopEven:this.space.indentTopOdd,z=F+Et*this.scaleY+s.top*this.scaleY,Z=dt-(s.top+s.bottom)*this.scaleY,st===void 0&&(st=Ze(e)),ht===void 0&&(ht=Ke(e)),tt=(t.alignOffsetX+t.alignOffsetOriginX*st)*this.scaleX,nt=(t.alignOffsetY+t.alignOffsetOriginY*ht)*this.scaleY,Fd.call(this,e,N,z,H,Z,t.align,tt,nt),w+=ft+this.space.column[Dt]*this.scaleX}F+=dt+this.space.row[yt]*this.scaleY}},dY=function(t){var t=Q0.call(this,t);if(t!==void 0&&this.proportionWidthLength===void 0){var s=this.totalColumnProportions;if(s>0){var f=t-this.getChildrenWidth(!1);f>=0&&(this.proportionWidthLength=f/s)}else this.proportionWidthLength=0}return t},fY=function(t){var t=tx.call(this,t);if(t!==void 0&&this.proportionHeightLength===void 0){var s=this.totalRowProportions;if(s>0){var f=t-this.getChildrenHeight(!1);f>=0&&(this.proportionHeightLength=f/s)}else this.proportionHeightLength=0}return t},cY=function(e){var t,s,f,C;for(var w in this.sizerChildren)t=this.sizerChildren[w],t&&t.isRexSizer&&!t.ignoreLayout&&(C=this.getColumnWidth(parseInt(w)%this.columnCount),s=this.getExpandedChildWidth(t,C),f=t.resolveWidth(s),f===void 0&&(f=s),t.resolveChildrenWidth(f))},pY=function(e){var t,s,f,C;for(var w in this.sizerChildren)t=this.sizerChildren[w],t&&t.isRexSizer&&!t.ignoreLayout&&(C=this.getRowHeight(Math.floor(parseInt(w)/this.rowCount)),s=this.getExpandedChildHeight(t,C),f=t.resolveHeight(s),f===void 0&&(f=s),t.resolveChildrenHeight(f))},vY=function(e){var t,s,f,C;for(var w in this.sizerChildren)t=this.sizerChildren[w],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(C=this.getColumnWidth(parseInt(w)%this.columnCount),s=this.getExpandedChildWidth(t,C),t.isRexSizer&&(f=t.resolveWidth(s),f===void 0&&(f=s)),t.runWidthWrap(f));return this},mY=function(e){var t,s,f,C;for(var w in this.sizerChildren)t=this.sizerChildren[w],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runHeightWrap)&&(C=this.getRowHeight(Math.floor(parseInt(w)/this.rowCount)),s=this.getExpandedChildHeight(t,C),t.isRexSizer&&(f=t.resolveHeight(s),f===void 0&&(f=s)),t.runHeightWrap(f));return this};const fb=Phaser.Utils.Objects.IsPlainObject,On=Phaser.Utils.Objects.GetValue,cb=Phaser.Display.Align.CENTER;var pb=function(e,t,s,f,C){if(typeof e=="number"||typeof t=="number")if(e===void 0){for(var w,F=0;F<f;F++)if(w=t*f+F,!s[w])return w}else if(t===void 0){for(var w,F=0;F<C;F++)if(w=F*f+e,!s[w])return w}else{var w=t*f+e;if(!s[w])return w}else if(t===!0){for(var w,F=0;F<f;F++)for(var N=0;N<C;N++)if(w=N*f+F,!s[w])return w}else for(var F=0,z=s.length;F<z;F++)if(!s[F])return F;return null},gY=function(e,t,s,f,C,w,F){var N,z,H,Z;if(wd.call(this,e),fb(t)){var nt=t;t=On(nt,"column",void 0),s=On(nt,"row",void 0),f=On(nt,"align",cb),C=On(nt,"padding",0),w=On(nt,"expand",!1),F=On(nt,"key",void 0),N=On(nt,"offsetX",0),z=On(nt,"offsetY",0),H=On(nt,"offsetOriginX",0),Z=On(nt,"offsetOriginY",0)}var tt=pb(t,s,this.sizerChildren,this.columnCount,this.rowCount);if(tt===null){if(typeof t=="number"&&typeof s=="number")return this;s===!0||typeof s=="number"?this.addEmptyColumn():this.addEmptyRow(),tt=pb(t,s,this.sizerChildren,this.columnCount,this.rowCount)}typeof f=="string"&&(f=Cl[f]),f===void 0&&(f=cb),C===void 0&&(C=0),w===void 0&&(w=!0),N===void 0&&(N=0),z===void 0&&(z=0),H===void 0&&(H=0),Z===void 0&&(Z=0);var nt=this.getSizerConfig(e);return nt.align=f,nt.padding=nh(C),fb(w)?(nt.expandWidth=On(w,"width",!1),nt.expandHeight=On(w,"height",!1)):(nt.expandWidth=w,nt.expandHeight=w),nt.alignOffsetX=N,nt.alignOffsetY=z,nt.alignOffsetOriginX=H,nt.alignOffsetOriginY=Z,this.sizerChildren[tt]=e,F!==void 0&&this.addChildrenMap(F,e),this},xY={add:gY},Dl=function(e,t,s,f){s===void 0&&(s=0),f===void 0&&(f=e.length-1);for(var C=s;C<=f;C++)e[C]=t;return e},yY={remove(e,t){if(this.getParentSizer(e)!==this)return this;var s=this.sizerChildren.indexOf(e);return s!==-1&&(this.sizerChildren[s]=null),bd.call(this,e,t),this},removeAt(e,t,s){var f=this.getChildAt(e,t);return f&&this.remove(f,s),this},removeAll(e){for(var t=this.sizerChildren.length-1;t>=0;t--){var s=this.sizerChildren[t];s&&this.remove(s,e)}return this},clear(e){return Dl(this.sizerChildren,null),Rp.call(this,e),this}},SY={setColumnSpace(e){if(this.space.column||(this.space.column=[]),this.space.column.length=this.columnCount-1,typeof e=="number")this.space.column0=e,Dl(this.space.column,e);else{this.space.column0=e[0];for(var t=0,s=this.columnCount-1;t<s;t++)this.space.column[t]=e[t]||0}return this},setRowSpace(e){if(this.space.row||(this.space.row=[]),this.space.row.length=this.rowCount-1,typeof e=="number")this.space.row0=e,Dl(this.space.row,e);else{this.space.row0=e[t];for(var t=0,s=this.rowCount-1;t<s;t++)this.space.row[t]=e[t]||0}return this},setIndentLeft(e,t){return this.space.indentLeftOdd=e,this.space.indentLeftEven=t,this},setIndentTop(e,t){return this.space.indentTopOdd=e,this.space.indentTopEven=t,this}};const vb=Phaser.Utils.Objects.GetValue;var TY=function(e,t,s,f,C){if(e===void 0&&(e=0),t===void 0&&(t=0),s===void 0&&(s=0),f===void 0&&(f=0),this.columnCount=e,this.rowCount=t,this.gridCount=e*t,this.removeAll(),this.sizerChildren.length=e*t,Dl(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=e,typeof s=="number")Dl(this.columnProportions,s);else for(var w=0;w<e;w++)this.columnProportions[w]=s[w]||0;if(this.rowProportions=[],this.rowProportions.length=t,typeof f=="number")Dl(this.rowProportions,f);else for(var w=0;w<t;w++)this.rowProportions[w]=f[w]||0;this.columnWidth=[],this.columnWidth.length=e,this.rowHeight=[],this.rowHeight.length=t,this.setColumnSpace(vb(C,"column",0)),this.setRowSpace(vb(C,"row",0));var F=this.scene,N=this.createCellContainerCallback;if(N)for(var z=0,H=this.rowCount;z<H;z++)for(var Z=0,tt=this.columnCount;Z<tt;Z++){var nt={column:Z,row:z},st=N(F,Z,z,nt);st&&this.add(st,nt)}return this},mb=function(e,t,s){t===void 0&&(t=this.rowProportions[0]||0),s===void 0&&(s=this.space.row0||0),this.rowCount+=1,this.gridCount+=this.columnCount;for(var f=[e*this.columnCount,0],C=0;C<this.columnCount;C++)f.push(null);return this.sizerChildren.splice.apply(this.sizerChildren,f),this.rowProportions.push(t),this.rowHeight.length+=1,this.space.row.splice(e,0,s),this},CY=function(e,t){return mb.call(this,this.rowCount,e,t),this},gb=function(e,t,s){t===void 0&&(t=this.columnProportions[0]||0),s===void 0&&(s=this.space.column0||0),this.columnCount+=1,this.gridCount+=this.rowCount;for(var f=this.rowCount-1;f>=0;f--){var C=f*this.columnCount+e;this.sizerChildren.splice(C,0,null)}return this.columnProportions.push(t),this.columnWidth.length+=1,this.space.column.splice(e,0,s),this},MY=function(e,t){return gb.call(this,this.columnCount,e,t),this},xb={getChildrenWidth:nY,getChildrenHeight:rY,getExpandedChildWidth:aY,getExpandedChildHeight:oY,getChildrenSizers:hY,preLayout:lY,layoutChildren:uY,resolveWidth:dY,resolveHeight:fY,resolveChildrenWidth:cY,resolveChildrenHeight:pY,runWidthWrap:vY,runHeightWrap:mY,resetGrid:TY,insertEmptyRow:mb,addEmptyRow:CY,insertEmptyColumn:gb,addEmptyColumn:MY};Object.assign(xb,xY,yY,SY,Zx);var EY=function(){for(var e=0,t,s=0;s<this.columnCount;s++)t=this.columnProportions[s],t>0?e+=t:t===0&&(this.hasColumnProportion0Child=!0);return e},PY=function(){for(var e=0,t,s=0;s<this.rowCount;s++)t=this.rowProportions[s],t>0?e+=t:t===0&&(this.hasRowProportion0Child=!0);return e};const _p=Phaser.Utils.Objects.IsPlainObject,di=Phaser.Utils.Objects.GetValue;class nr extends hh{constructor(t,s,f,C,w,F,N,z,H,Z){_p(s)?(Z=s,s=di(Z,"x",0),f=di(Z,"y",0),C=di(Z,"width",void 0),w=di(Z,"height",void 0),F=di(Z,"column",Z.col||0),N=di(Z,"row",0),z=di(Z,"columnProportions",0),H=di(Z,"rowProportions",0)):_p(C)?(Z=C,C=di(Z,"width",void 0),w=di(Z,"height",void 0),F=di(Z,"column",Z.col||0),N=di(Z,"row",0),z=di(Z,"columnProportions",0),H=di(Z,"rowProportions",0)):_p(F)?(Z=F,F=di(Z,"column",Z.col||0),N=di(Z,"row",0),z=di(Z,"columnProportions",0),H=di(Z,"rowProportions",0)):_p(z)&&(Z=z,z=di(Z,"columnProportions",0),H=di(Z,"rowProportions",0)),super(t,s,f,C,w,Z),this.type="rexGridSizer",this.sizerChildren=[],this.addChildrenMap("items",this.sizerChildren),this.setCreateCellContainerCallback(di(Z,"createCellContainerCallback")),this.setIndentLeft(di(Z,"space.indentLeftOdd",0),di(Z,"space.indentLeftEven",0)),this.setIndentTop(di(Z,"space.indentTopOdd",0),di(Z,"space.indentTopEven",0)),this.resetGrid(F,N,z,H,di(Z,"space",void 0))}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0,this.createCellContainerCallback=void 0)}setColumnProportion(t,s){return t>=this.columnProportions.length?this:(this.columnProportions[t]=s,this)}setRowProportion(t,s){return t>=this.rowProportions.length?this:(this.rowProportions[t]=s,this)}get totalColumnProportions(){return this._totalColumnProportions===void 0&&(this._totalColumnProportions=EY.call(this)),this._totalColumnProportions}get totalRowProportions(){return this._totalRowProportions===void 0&&(this._totalRowProportions=PY.call(this)),this._totalRowProportions}getChildAt(t,s){return this.sizerChildren[s*this.columnCount+t]}childToGridIndex(t,s){if(!t)return null;var f=this.sizerChildren.indexOf(t);return f===-1?null:(s===void 0&&(s={}),s.x=f%this.columnCount,s.y=Math.floor(f/this.columnCount),s)}getColumnWidth(t){var s=this.columnProportions[t],f=s===0?this.columnWidth[t]:s*this.proportionWidthLength;return f}getRowHeight(t){var s=this.rowProportions[t],f=s===0?this.rowHeight[t]:s*this.proportionHeightLength;return f}setCreateCellContainerCallback(t){return this.createCellContainerCallback=t,this}}Object.assign(nr.prototype,xb),c.register("gridSizer",function(e,t,s,f,C,w,F,N,z){var H=new nr(this.scene,e,t,s,f,C,w,F,N,z);return this.scene.add.existing(H),H}),j(window,"RexPlugins.UI.GridSizer",nr);var wY=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t;if(this.orientation===0?e?t=this.maxChildWidth:t=this.rexSizer.resolved?this.wrapResult.width:void 0:t=this.rexSizer.resolved?this.wrapResult.width:void 0,t!==void 0)return t+(this.space.left+this.space.right)*this.scaleX},bY=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t;if(this.orientation===1?e?t=this.maxChildHeight:t=this.rexSizer.resolved?this.wrapResult.height:void 0:t=this.rexSizer.resolved?this.wrapResult.height:void 0,t!==void 0)return t+(this.space.top+this.space.bottom)*this.scaleY},AY=function(e){e===void 0&&(e=[]);for(var t=this.sizerChildren,s,f=0,C=t.length;f<C;f++)s=t[f],s!==`
`&&s.isRexSizer&&e.push(s);return e},RY=function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,this.wrapResult=void 0,this.rexSizer.resolved=!1,Ad.call(this),this},LY=function(){for(var e=this.orientation===0,t=e?this.innerWidth:this.innerHeight,s,f,C,w=0,F,N,z=this.innerLeft,H=this.innerTop,Z,tt,nt,st,ht,ft,dt=this.wrapResult.lines,gt,Et,yt,Dt=z,Wt=H,qt=0,re=dt.length;qt<re;qt++){switch(gt=dt[qt],Et=gt.children,this.rtl&&Et.reverse(),e?(F=qt%2?this.space.indentLeftEven:this.space.indentLeftOdd,Dt=z+F*this.scaleX):(N=qt%2?this.space.indentTopEven:this.space.indentTopOdd,Wt=H+N*this.scaleY),yt=t-(e?gt.width:gt.height),this.align){case 0:break;case 1:e?Dt+=yt:Wt+=yt;break;case 2:e?Dt+=yt/2:Wt+=yt/2;break;case 3:w=hy(t,yt,this.justifyPercentage,Et.length);break;case 4:w=hy(t,yt,this.justifyPercentage,Et.length),w===0&&(e?Dt+=yt:Wt+=yt);break;case 5:w=hy(t,yt,this.justifyPercentage,Et.length),w===0&&(e?Dt+=yt/2:Wt+=yt/2);break}for(var ce=!0,fe=0,ye=Et.length;fe<ye;fe++)s=Et[fe],!s.rexSizer.hidden&&(f=s.rexSizer,C=f.padding,Od.call(this,s),e?Z=Dt+C.left*this.scaleX:tt=Wt+C.top*this.scaleY,ce?ce=!1:e?Z+=this.space.item*this.scaleX:tt+=this.space.item*this.scaleY,nt=Ze(s),st=Ke(s),e?(N=fe%2?this.space.indentTopEven:this.space.indentTopOdd,tt=Wt+N*this.scaleY+C.top*this.scaleY,Dt=Z+nt+C.right*this.scaleX+w):(F=fe%2?this.space.indentLeftEven:this.space.indentLeftOdd,Z=Dt+F*this.scaleX+C.left*this.scaleX,Wt=tt+st+C.top*this.scaleY+w),ht=(f.alignOffsetX+f.alignOffsetOriginX*nt)*this.scaleX,ft=(f.alignOffsetY+f.alignOffsetOriginY*st)*this.scaleY,Fd.call(this,s,Z,tt,nt,st,f.align,ht,ft));e?Wt+=gt.height+this.space.line*this.scaleY:Dt+=gt.width+this.space.line*this.scaleX}},hy=function(e,t,s,f){return t/e<=s?t/(f-1):0},OY=function(){return this.orientation===0?!0:j0.call(this)},yb=function(e){var t={lines:[],width:0,height:0},s=this.sizerChildren,f,C,w,F,N=0,z,H,Z=t.lines,tt=void 0,nt;if(this.orientation===0){for(var st=0,ht=s.length;st<ht;st++){if(f=s[st],f===`
`)f=void 0,w=0,nt=!0;else{if(f.rexSizer.hidden)continue;f.isRexSizer&&f.runLayout(this),w=this.getChildWidth(f),C=f.rexSizer.padding,w+=(C.left+C.right)*this.scaleX,nt=N<w||tt===void 0}nt&&(tt&&(tt.width=e-(N+this.space.item*this.scaleX),t.width=Math.max(t.width,tt.width),t.height+=tt.height+this.space.line*this.scaleY),tt={children:[],width:0,height:0},Z.push(tt),z=Z.length%2?this.space.indentLeftOdd:this.space.indentLeftEven,N=e-z*this.scaleX),N-=w+this.space.item*this.scaleX,f&&(tt.children.push(f),F=this.getChildHeight(f),C=f.rexSizer.padding,F+=(C.top+C.bottom)*this.scaleY,tt.height=Math.max(tt.height,F))}tt&&(tt.width=e-(N+this.space.item*this.scaleX),t.width=Math.max(t.width,tt.width),t.height+=tt.height),t.height+=Math.max(this.space.indentTopOdd,this.space.indentTopEven)*this.scaleY}else{for(var ft=e,st=0,ht=s.length;st<ht;st++){if(f=s[st],f===`
`)f=void 0,w=0,nt=!0;else{if(f.rexSizer.hidden)continue;f.isRexSizer&&f.layout(),F=this.getChildHeight(f),C=f.rexSizer.padding,F+=(C.top+C.bottom)*this.scaleY,nt=N<F||tt===void 0}nt&&(tt&&(tt.height=ft-(N+this.space.item*this.scaleY),t.height=Math.max(t.height,tt.height),t.width+=tt.width+this.space.line*this.scaleX),tt={children:[],width:0,height:0},Z.push(tt),H=Z.length%2?this.space.indentTopOdd:this.space.indentTopEven,N=ft-H*this.scaleY),N-=F+this.space.item*this.scaleY,f&&(tt.children.push(f),w=this.getChildWidth(f),C=f.rexSizer.padding,w+=(C.left+C.right)*this.scaleX,tt.width=Math.max(tt.width,w))}tt&&(tt.height=ft-(N+this.space.item*this.scaleY),t.height=Math.max(t.height,tt.height),t.width+=tt.width),t.width+=Math.max(this.space.indentLeftOdd,this.space.indentLeftEven)*this.scaleX}return t},FY=function(e){if(!this.wrapResult&&this.orientation===0){var t=e-(this.space.left+this.space.right)*this.scaleX;this.wrapResult=yb.call(this,t),this.rexSizer.resolved=!0,q0.call(this,e)}},DY=function(){return this.orientation===1?!0:ex.call(this)},IY=function(e){if(!this.wrapResult&&this.orientation===1){var t=e-(this.space.top+this.space.bottom)*this.scaleY;this.wrapResult=yb.call(this,t),this.rexSizer.resolved=!0,ix.call(this,e)}},BY=function(e,t){},NY=function(e,t){};const Sb=Phaser.Math.Distance.Between;var GY=function(e,t){var s=this.sizerChildren;if(s.length===0)return-1;for(var f=-1,C=1/0,w=0,F=s.length;w<F;w++){var N=s[w];if(!(Math.abs(N.centerY-t)>N.height/2)){var H=Sb(N.left,N.centerY,e,t);C>H&&(C=H,f=w);var z=s[w+1];if(!(z&&z.y===N.y)){var H=Sb(N.right,N.centerY,e,t);C>H&&(C=H,f=w+1)}}}return f};const UY=Phaser.Utils.Objects.IsPlainObject,dh=Phaser.Utils.Objects.GetValue,kY=Phaser.Display.Align.CENTER;var ly=function(e,t,s,f){if(e===`
`)return this.addNewLine(),this;var C,w,F,N;if(wd.call(this,e),UY(t)){var z=t;t=dh(z,"padding",0),s=dh(z,"key",void 0),f=dh(z,"index",void 0),C=dh(z,"offsetX",0),w=dh(z,"offsetY",0),F=dh(z,"offsetOriginX",0),N=dh(z,"offsetOriginY",0)}t===void 0&&(t=0),C===void 0&&(C=0),w===void 0&&(w=0),F===void 0&&(F=0),N===void 0&&(N=0);var z=this.getSizerConfig(e);return z.align=kY,z.padding=nh(t),z.alignOffsetX=C,z.alignOffsetY=w,z.alignOffsetOriginX=F,z.alignOffsetOriginY=N,f===void 0||f>=this.sizerChildren.length?this.sizerChildren.push(e):this.sizerChildren.splice(f,0,e),s!==void 0&&this.addChildrenMap(s,e),this},VY={add(e,t,s){if(jn(e))for(var f=e,C=0,w=f.length;C<w;C++)ly.call(this,f[C],t);else ly.call(this,e,t,s);return this},addNewLine(){return this.sizerChildren.push(`
`),this},insert(e,t,s,f){return ly.call(this,t,s,f,e),this},insertAtPosition(e,t,s,f,C){var w=GY.call(this,e,t);return w===-1&&(w=void 0),this.insert(w,s,f,C),this}};const zY=Phaser.Utils.Array.Remove;var WY={remove(e,t){return this.getParentSizer(e)!==this?this:(zY(this.sizerChildren,e),bd.call(this,e,t),this)},removeAll(e){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],e);return this},clear(e){return this.sizerChildren.length=0,Rp.call(this,e),this}},Tb={getChildrenWidth:wY,getChildrenHeight:bY,getChildrenSizers:AY,preLayout:RY,layoutChildren:LY,hasWidthWrap:OY,runWidthWrap:FY,hasHeightWrap:DY,runHeightWrap:IY,getExpandedChildWidth:BY,getExpandedChildHeight:NY};Object.assign(Tb,VY,WY,Zx);var XY=function(e){e===void 0&&(e=this.sizerChildren);for(var t=0,s,f,C=!1,w=0,F=e.length;w<F;w++)s=e[w],s!==`
`&&(f=this.getChildWidth(s),f===void 0&&(C=!0),!C&&(t=Math.max(f,t)));if(!C)return t},HY=function(e){e===void 0&&(e=this.sizerChildren);for(var t=0,s,f,C=!1,w=0,F=e.length;w<F;w++)s=e[w],s!==`
`&&(f=this.getChildHeight(s),f===void 0&&(C=!0),!C&&(t=Math.max(f,t)));if(!C)return t};const Cb=Phaser.Utils.Objects.IsPlainObject,ws=Phaser.Utils.Objects.GetValue;class ro extends hh{constructor(t,s,f,C,w,F){Cb(s)?(F=s,s=ws(F,"x",0),f=ws(F,"y",0),C=ws(F,"width",void 0),w=ws(F,"height",void 0)):Cb(C)&&(F=C,C=ws(F,"width",void 0),w=ws(F,"height",void 0)),super(t,s,f,C,w,F),this.type="rexFixWidthSizer",this.sizerChildren=[],this.runChildrenWrapFlag=!0,this.setOrientation(ws(F,"orientation",0)),this.setItemSpacing(ws(F,"space.item",0)),this.setLineSpacing(ws(F,"space.line",0)),this.setIntentLeft(ws(F,"space.indentLeftOdd",0),ws(F,"space.indentLeftEven",0)),this.setIntentTop(ws(F,"space.indentTopOdd",0),ws(F,"space.indentTopEven",0)),this.setAlign(ws(F,"align",0)),this.setJustifyPercentage(ws(F,"justifyPercentage",.25)),this.setRTL(ws(F,"rtl",!1)),this.wrapResult=void 0,this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=qo(t),this}setItemSpacing(t){return this.space.item=t,this}setLineSpacing(t){return this.space.line=t,this}setIntentLeft(t,s){return this.space.indentLeftOdd=t,this.space.indentLeftEven=s,this}setIntentTop(t,s){return this.space.indentTopOdd=t,this.space.indentTopEven=s,this}setAlign(t){return typeof t=="string"&&(t=YY[t]),this.align=t,this}setJustifyPercentage(t){return this.justifyPercentage=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=XY.call(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=HY.call(this)),this._maxChildHeight}}const YY={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(ro.prototype,Tb),c.register("fixWidthSizer",function(e,t,s,f,C){var w=new ro(this.scene,e,t,s,f,C);return this.scene.add.existing(w),w}),j(window,"RexPlugins.UI.FixWidthSizer",ro),c.register("overlapSizer",function(e,t,s,f,C){var w=new Rn(this.scene,e,t,s,f,C);return this.scene.add.existing(w),w}),j(window,"RexPlugins.UI.OverlapSizer",Rn),c.register("space",function(){var e=new $x(this.scene);return e}),j(window,"RexPlugins.UI.Space",$x),c.register("label",function(e){var t=new ga(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.Label",ga);const Mb=["alpha","tint","flipX","flipY"];var uy=function(e,t){if(!t)return e;for(var s=0,f=Mb.length;s<f;s++){var C=Mb[s];C in t&&C in e&&(e[C]=t[C])}if("origin"in t&&"originX"in e)e.setOrigin(t.origin);else{var w,F;"originX"in t&&"originX"in e&&(w=t.originX),"originY"in t&&"originY"in e&&(F=t.originY),w!==void 0&&F!==void 0&&e.setOrigin(w,F)}return e},ji=function(e,t){var s;t&&(t.hasOwnProperty("$type")?s=t.$type:t.hasOwnProperty("barColor")?s="bar":t.hasOwnProperty("leftWidth")?s="nineSlice":t.hasOwnProperty("key")&&(s="image"));var f;switch(s){case"bar":f=new $p(e,t);break;case"image":f=new Wd(e,t);break;case"nineSlice":t.hasOwnProperty("stretchMode")?f=new Yd(e,t):f=new Hd(e,t);break;default:f=new Xd(e,t);break}return uy(f,t),e.add.existing(f),f},$Y=function(){switch(this.scrollMode){case 0:case 1:dy.call(this),this.updateController(),fy.call(this),cy.call(this);break;default:dy.call(this,"y"),dy.call(this,"x"),this.updateController(),fy.call(this,"y"),fy.call(this,"x"),cy.call(this,"y"),cy.call(this,"x");break}return this},dy=function(e){var t,s,f,C;switch(this.scrollMode){case 0:case 1:t=this.topChildOY,s=this.bottomChildOY,f=this.childrenMap.scroller,C=this.childrenMap.slider,e=this.scrollMode===0?"Y":"X";break;default:e=e.toUpperCase(),e==="Y"?(t=this.topChildOY,s=this.bottomChildOY):(t=this.leftChildOX,s=this.rightChildOX),f=this.childrenMap[`scroller${e}`],C=this.childrenMap[`slider${e}`]}var w=e==="Y"?this.scaleY:this.scaleX;s*=w,f&&f.setBounds(t,s),C&&(C.setEnable(t!==s),C.tickLength&&C.setTick(C.tickLength,t,s))},fy=function(e){switch(this.scrollMode){case 0:case 1:var s=this.childrenMap.slider;s&&this.hideUnscrollableSlider&&this.setChildVisible(s,this.isOverflow);var C=this.childrenMap.scroller;C&&this.disableUnscrollableDrag&&C.setEnable(this.isOverflow);break;default:e=e.toUpperCase();var t=this[`isOverflow${e}`],s=this.childrenMap[`slider${e}`],f=this[`hideUnscrollableSlider${e}`];s&&f&&this.setChildVisible(s,t);var C=this.childrenMap.scroller,w=this[`disableUnscrollableDrag${e}`];C&&w&&C.setEnable(t);break}},cy=function(e){switch(this.scrollMode){case 0:case 1:if(!this.adaptThumbSizeMode)return;var w=this.childrenMap.slider;if(!w)return;var t=Math.min(this.childVisibleHeight/this.childHeight,1),F=w.childrenMap.track,N=w.childrenMap.thumb,z=this.minThumbSize;if(this.scrollMode===0){var s=F.displayHeight*t;z!==void 0&&s<z&&(s=z),Ms(N,void 0,s)}else{var f=F.displayWidth*t;z!==void 0&&f<z&&(f=z),Ms(N,f,void 0)}Eb(w);break;default:e=e.toUpperCase();var C=this[`adaptThumb${e}SizeMode`];if(!C)return;var w=this.childrenMap[`slider${e}`];if(!w)return;var F=w.childrenMap.track,N=w.childrenMap.thumb,z=this[`minThumb${e}Size`];if(e==="Y"){var t=Math.min(this.childVisibleHeight/this.childHeight,1),s=F.displayHeight*t;z!==void 0&&s<z&&(s=z),Ms(N,void 0,s)}else{var t=Math.min(this.childVisibleWidth/this.childWidth,1),f=F.displayWidth*t;z!==void 0&&f<z&&(f=z),Ms(N,f,void 0)}Eb(w);break}},Eb=function(e){var t=e.minWidth,s=e.minHeight;e.minWidth=e.width,e.minHeight=e.height,e.layout(),e.minWidth=t,e.minHeight=s},_Y=function(){switch(this.scrollMode){case 0:case 1:var e=this.childrenMap.scroller,t=this.childrenMap.slider;e&&e.setValue(this.childOY),t&&t.setValue(this.t);break;default:var s=this.childrenMap.scrollerY,f=this.childrenMap.sliderY,C=this.childrenMap.scrollerX,w=this.childrenMap.sliderX;s&&s.setValue(this.childOY),f&&f.setValue(this.t),C&&C.setValue(this.childOX),w&&w.setValue(this.s);break}};const Zp=Phaser.Math.Clamp;var ZY={setChildOY(e,t){return t===void 0&&(t=!1),t&&(e=Zp(e,this.bottomChildOY,this.topChildOY)),this.childOY=e,this},addChildOY(e,t){return this.setChildOY(this.childOY+e,t),this},setT(e,t){return t===void 0&&(t=!1),t&&(e=Zp(e,0,1)),this.t=e,this},addT(e,t){return this.setT(this.t+e,t),this},scrollToTop(){return this.t=0,this},scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this},setChildOX(e,t){return t===void 0&&(t=!1),t&&(e=Zp(e,this.leftChildOX,this.rightChildOX)),this.childOX=e,this},addChildOX(e,t){return this.setChildOX(this.childOX+e,t),this},setS(e,t){return t===void 0&&(t=!1),t&&(e=Zp(e,0,1)),this.s=e,this},addS(e,t){return this.setS(this.s+e,t),this},scrollToLeft(){return this.s=0,this},scrollToRight(){if(this.s=1,this.s===0)return this;do this.s=1;while(this.s!==1);return this}},Pb={resizeController:$Y,updateController:_Y};Object.assign(Pb,ZY);var wb={v:0,vertical:0,y:0,h:1,horizontal:1,x:1,xy:2,vh:2},py=function(e,t){t===void 0&&(t="scrollMode"),e.hasOwnProperty(t)||(e[t]=KY(e));var s=e[t];return typeof s=="string"&&(s=wb[s]),s},KY=function(e){var t=!!e.sliderY||!!e.scrollerY,s=!!e.sliderX||!!e.scrollerX,f;return t&&s?f=2:t?f=0:s?f=1:f=0,f};const ns=Phaser.Utils.Objects.GetValue;var JY=function(e,t,s){var f=ns(s,"child"),C=ns(f,"gameObject",void 0);if(C){var w=ns(s,"space.child",0);e.childMargin={};var F=e.childMargin,N={};if(typeof w=="number")switch(e.scrollMode){case 0:case 1:F.top=0,F.bottom=0,F.left=0,F.right=0;break;default:F.top=w,F.bottom=w,F.left=w,F.right=w;break}else switch(e.scrollMode){case 0:F.top=ns(w,"top",0),F.bottom=ns(w,"bottom",0),N.left=ns(w,"left",0),N.right=ns(w,"right",0);break;case 1:F.top=ns(w,"left",0),F.bottom=ns(w,"right",0),N.top=ns(w,"top",0),N.bottom=ns(w,"bottom",0);break;default:F.top=ns(w,"top",0),F.bottom=ns(w,"bottom",0),F.left=ns(w,"left",0),F.right=ns(w,"right",0);break}t.add(C,{column:1,row:1,align:ns(f,"align","center"),padding:N,expand:{width:ns(f,"expandWidth",!0),height:ns(f,"expandHeight",!0)}})}e.addChildrenMap("child",C)};const bb=Phaser.Math.Percent;var QY=function(e,t,s){var f;return e.y===t.y?f=bb(s.x,e.x,t.x):e.x===t.x&&(f=bb(s.y,e.y,t.y)),f},Ab=function(e,t){vy.x=e,vy.y=t;var s,f;this.reverseAxis?(s=this.getEndPoint(),f=this.getStartPoint()):(s=this.getStartPoint(),f=this.getEndPoint());var C=QY(s,f,vy);return C},vy={},jY=function(e,t,s){!this.enable||!this.inputActive||(this.value=Ab.call(this,t,s))},my=function(e){if(!(!this.enable||!this.inputActive)&&e.isDown){var t=Ab.call(this,e.worldX,e.worldY);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-t)<.1?this.value=t:this.easeValueTo(t)}};const qY=Phaser.Utils.Objects.GetValue;var t$=function(e){this.inputActive=!1;var t=qY(e,"input",0);typeof t=="string"&&(t=e$[t]);var s=this.childrenMap.thumb;switch(t){case 0:s&&(s.setInteractive(),this.scene.input.setDraggable(s),s.on("dragstart",function(C){this.inputActive=!0,this.eventEmitter.emit("inputstart",C)},this).on("dragend",function(C){this.inputActive=!1,this.eventEmitter.emit("inputend",C)},this).on("drag",jY,this));break;case 1:this.setInteractive().on("pointerdown",function(C){this.inputActive=!0,this.eventEmitter.emit("inputstart",C)},this).on("pointerdown",my,this);var f=function(C){this.inputActive&&(this.inputActive=!1,this.eventEmitter.emit("inputend",C))};this.scene.input.on("pointerup",f,this).on("pointermove",my,this),this.once("destroy",function(){this.scene.input.on("pointerup",f,this).off("pointermove",my,this)},this);break}};const e$={pan:0,drag:0,click:1,none:-1};var Rb=function(e,t){t===void 0&&(t=i$);var s=this.childrenMap.thumb,f=s.x,C=s.y;return Pd(s,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,e),t.x=s.x,t.y=s.y,s.x=f,s.y=C,t},i$={};const s$=Phaser.Display.Align.LEFT_CENTER,n$=Phaser.Display.Align.TOP_CENTER;var r$=function(e){if(e===void 0&&(e=a$),this.childrenMap.thumb){var t=this.orientation===0?s$:n$;Rb.call(this,t,e)}else this.orientation===0?(e.x=this.innerLeft+1,e.y=this.centerY):(e.x=this.centerX,e.y=this.innerTop+1);return e},a$={};const o$=Phaser.Display.Align.RIGHT_CENTER,h$=Phaser.Display.Align.BOTTOM_CENTER;var l$=function(e){if(e===void 0&&(e=u$),this.childrenMap.thumb){var t=this.orientation===0?o$:h$;Rb.call(this,t,e)}else this.orientation===0?(e.x=this.innerRight-1,e.y=this.centerY):(e.x=this.centerX,e.y=this.innerBottom-1);return e},u$={};const Lb=Phaser.Math.Linear;var d$=function(e,t,s,f){return f===void 0&&(f=f$),f.x=Lb(t.x,s.x,e),f.y=Lb(t.y,s.y,e),f},f$={},c$=function(e){var t=this.childrenMap.thumb;if(t===void 0)return this;e===void 0&&(e=this.value);var s,f;return this.reverseAxis?(s=this.getEndPoint(),f=this.getStartPoint()):(s=this.getStartPoint(),f=this.getEndPoint()),d$(e,s,f,t),t.x+=this.thumbOffsetX,t.y+=this.thumbOffsetY,this.resetChildPositionState(t),this};const p$=Phaser.Display.Align.LEFT_CENTER,v$=Phaser.Display.Align.TOP_CENTER,m$=Phaser.Display.Align.RIGHT_CENTER,g$=Phaser.Display.Align.BOTTOM_CENTER;var x$=function(e){var t=this.childrenMap.indicator;if(t===void 0)return this;e===void 0&&(e=this.value);var s=this.reverseAxis,f,C,w=this.childrenMap.thumb;if(w)if(this.orientation===0){var F=Ze(w);if(s){var N=w.x-F*w.originX;f=this.right-N}else{var N=w.x-F*w.originX,z=N+F;f=z-this.left}}else{var H=Ke(w);if(s){var Z=w.y-H*w.originY;C=this.bottom-Z}else{var Z=w.y-H*w.originY,tt=Z+H;C=tt-this.top}}else this.orientation===0?f=this.width*e:C=this.height*e;Ms(t,f,C);var nt;s?nt=this.orientation===0?m$:g$:nt=this.orientation===0?p$:v$,vP(t,this,nt),this.resetChildPositionState(t)};const vn=Phaser.Utils.Objects.GetValue,Kp=Phaser.Utils.Objects.IsPlainObject,y$=Phaser.Math.Clamp,S$=Phaser.Math.Snap.To;class Il extends Qa(Le){constructor(t,s){super(t,s),this.type="rexSlider",this.bootProgressBase(s),this.reverseAxis=vn(s,"reverseAxis",!1);var f=vn(s,"background",void 0),C=vn(s,"track",void 0),w=vn(s,"indicator",void 0),F=vn(s,"thumb",void 0);if(f&&(Kp(f)&&(f=ji(t,f)),this.addBackground(f)),C&&(Kp(C)&&(C=ji(t,C)),this.add(C,{proportion:1,expand:!0,minWidth:this.orientation===0?0:void 0,minHeight:this.orientation===1?0:void 0})),w&&(Kp(w)&&(w=ji(t,w)),this.pin(w)),F){Kp(F)&&(F=ji(t,F)),this.pin(F);var N=vn(s,"thumbOffsetX",0),z=vn(s,"thumbOffsetY",0);this.setThumbOffset(N,z)}this.addChildrenMap("background",f),this.addChildrenMap("track",C),this.addChildrenMap("indicator",w),this.addChildrenMap("thumb",F),this.setEnable(vn(s,"enable",void 0));var H=vn(s,"tick",void 0);H===void 0&&(H=vn(s,"gap",void 0)),this.setGap(H),t$.call(this,s),this.setValue(vn(s,"value",0),vn(s,"min",void 0),vn(s,"max",void 0))}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t,s,f){return t&&s!==void 0&&(t=t/(f-s)),this.gap=t,this}setTick(t,s,f){return this.setGap(t,s,f),this}get tick(){return this.gap}set tick(t){this.gap=t}setThumbOffset(t,s){return this.thumbOffsetX=t,this.thumbOffsetY=s,this}get value(){return this._value}set value(t){this.gap!==void 0&&(t=S$(t,this.gap));var s=this._value;this._value=y$(t,0,1),s!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,s,this.eventEmitter))}postLayout(t,s,f){return this.updateThumb(),this.updateIndicator(),super.postLayout(t,s,f),this}}var T$={getStartPoint:r$,getEndPoint:l$,updateThumb:c$,updateIndicator:x$};Object.assign(Il.prototype,T$);const js=Phaser.Utils.Objects.GetValue;class gy extends Le{constructor(t,s){super(t,s),this.type="rexScrollBar";var f=js(s,"background",void 0),C=js(s,"buttons",void 0),w=js(C,"top",js(C,"left",void 0)),F=js(C,"bottom",js(C,"right",void 0)),N,z=js(s,"slider",void 0);if(f&&this.addBackground(f),w){this.add(w);var H=new Al(w);H.on("intouch",function(){if(this.enable){var dt=N.reverseAxis?this.scrollStep:-this.scrollStep;this.value+=dt}},this)}if(z){z.orientation=this.orientation,z.eventEmitter=this,z.value=null;var Z;if(this.orientation===0){var tt=js(z,"width",void 0);Z=tt===void 0?1:0}else{var nt=js(z,"height",void 0);Z=nt===void 0?1:0}N=new Il(t,z),t.add.existing(N),this.add(N,{proportion:Z})}if(F){this.add(F);var H=new Al(F);H.on("intouch",function(){if(this.enable){var gt=N.reverseAxis?-this.scrollStep:this.scrollStep;this.value+=gt}},this)}var st=[w,F];this.addChildrenMap("background",f),this.addChildrenMap("slider",N),this.addChildrenMap("buttons",st);var ht=js(s,"valuechangeCallback",null);if(ht!==null){var ft=js(s,"valuechangeCallbackScope",void 0);this.on("valuechange",ht,ft)}this.setEnable(js(s,"enable",void 0)),this.setValue(js(s,"value",0)),this.setScrollStep(js(C,"step",.01))}setScrollStep(t){return this.scrollStep=t,this}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){this.childrenMap.slider&&(this.childrenMap.slider.value=t)}setValue(t,s,f){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,s,f),this}addValue(t,s,f){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,s,f),this}getValue(t,s){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,s):0}easeValueTo(t,s,f){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,s,f),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}setGap(t,s,f){return this.childrenMap.slider&&this.childrenMap.slider.setGap(t,s,f),this}get gap(){if(this.childrenMap.slider)return this.childrenMap.slider.gap}set gap(t){this.childrenMap.slider&&(this.childrenMap.slider.gap=t)}setTick(t,s,f){return this.setGap(t,s,f),this}get tick(){if(this.childrenMap.slider)return this.childrenMap.slider.tick}set tick(t){this.childrenMap.slider&&(this.childrenMap.slider.tick=t)}}var C$=function(e,t){t===void 0&&(t={});var s=Zn(t);t={slider:s},t.orientation=s.orientation,delete s.orientation,t.background=s.background,delete s.background,t.buttons=s.buttons,delete s.buttons,t.value=null;var f=new gy(e,t);e.add.existing(f);var C=f.childrenMap.slider;return f.addChildrenMap("track",C.childrenMap.track),f.addChildrenMap("indicator",C.childrenMap.indicator),f.addChildrenMap("thumb",C.childrenMap.thumb),f};const M$=Phaser.Math.Snap.To;Phaser.Math.Clamp;var E$=function(){this.emit("dragstart")},P$=function(){this.emit("dragend")},w$=function(){this.value+=this.dragDelta},b$=function(){var e=this.value,t=this.dragSpeed,s=this.snapStep,f=!!s;if(f){var w=e,F=t===0?0:t*t/(2*this.slidingDeceleration);if(w+=t>0?F:-F,w=M$(w,s,this.minValue),F=Math.abs(w-e),F>0){var C;t===0?(C=this.backDeceleration,t=Math.sqrt(2*C*F)):(C=t*t/(2*F),C*=.99),this._slowDown.init(e,void 0,t,C,w)}else this._slowDown.stop(),this._state.next()}else if(t===0)this._slowDown.stop(),this._state.next();else{var C=this.slidingDeceleration;this._slowDown.init(e,t>0,t,C)}},A$=function(e,t){t*=.001;var s=this._slowDown.update(t).value;this.overMax(s)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(s)?(this.value=this.minValue,this._slowDown.stop()):this.value=s},R$=function(){var e=this.value,t=this.outOfMinBound?this.minValue:this.maxValue,s=Math.abs(t-e),f=this.backDeceleration,C=Math.sqrt(2*f*s);this._slowDown.init(e,void 0,C,f,t)},L$=function(e,t){t*=.001,this.value=this._slowDown.update(t).value,this._slowDown.isMoving||this._state.next()},Ob=function(){this._slowDown.stop()};class O$ extends da{constructor(t,s){super(s),this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){var t,s=this.parent,f=s.dragState;return f.isDown&&(t=s.dragThreshold===0?"DRAG":"DRAGBEGIN"),t}update_IDLE(t,s){this.next()}next_DRAGBEGIN(){var t,s=this.parent,f=s.dragState;return f.isDown?t=f.pointer.getDistance()>=s.dragThreshold?"DRAG":"DRAGBEGIN":t="IDLE",t}update_DRAGBEGIN(t,s){this.next()}next_DRAG(){var t,s=this.parent,f=s.dragState;return f.isUp&&(s.outOfBounds?t="BACK":s.slidingEnable?t="SLIDE":t="IDLE"),t}update_DRAG(t,s){var f=this.parent,C=f.dragState;C.justMoved&&w$.call(f),this.next()}enter_DRAG(){E$.call(this.parent)}exit_DRAG(){P$.call(this.parent)}next_SLIDE(){var t,s=this.parent,f=s.dragState;return f.isDown?t="DRAG":s.isSliding||(t="IDLE"),t}enter_SLIDE(){b$.call(this.parent)}exit_SLIDE(){Ob.call(this.parent)}update_SLIDE(t,s){A$.call(this.parent,t,s),this.next()}next_BACK(){var t,s=this.parent,f=s.dragState;return f.isDown?t="DRAG":s.isPullBack||(t="IDLE"),t}enter_BACK(){R$.call(this.parent)}exit_BACK(){Ob.call(this.parent)}update_BACK(t,s){L$.call(this.parent,t,s),this.next()}}const $d=Phaser.Utils.Objects.GetValue,F$=Phaser.Math.Distance.Between;class D$ extends Si{constructor(t,s){super(t,s),this._enable=void 0,this.rectBoundsInteractive=$d(s,"rectBoundsInteractive",!1),this.rectBoundsInteractive||t.setInteractive($d(s,"inputConfig",void 0)),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable($d(t,"enable",!0)),this.holdThreshold=$d(t,"holdThreshold",50),this.pointerOutReleaseEnable=$d(t,"pointerOutRelease",!0),this}boot(){var t=this.scene,s=this.parent;this.rectBoundsInteractive?(t.input.on("pointerdown",this.onPointIn,this),t.input.on("pointerup",this.onPointOut,this),t.input.on("pointermove",this.onPointerMove,this)):(s.on("pointerdown",this.onPointIn,this),s.on("pointerup",this.onPointOut,this),this.pointerOutReleaseEnable&&s.on("pointerout",this.onPointOut,this),s.on("pointermove",this.onPointerMove,this)),t.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){if(!this.isShutdown){var s=this.scene;this.parent,this.rectBoundsInteractive&&(s.input.off("pointerdown",this.onPointIn,this),s.input.off("pointerup",this.onPointOut,this),s.input.off("pointermove",this.onPointerMove,this)),s.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t)}}get enable(){return this._enable}set enable(t){this._enable!==t&&(t||(this.isInTouched=!1,this.pointer=void 0),this._enable=t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setPointerOutReleaseEnable(t){return t===void 0&&(t=!0),this.pointerOutReleaseEnable=t,this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){var t=c0(this.scene);return t}get speed(){if(this.x===this.preX&&this.y===this.preY)return 0;var t=F$(this.preX,this.preY,this.x,this.y),s=t/(this.dt*.001);return s}get speedX(){return this.dx/(this.dt*.001)}get speedY(){return this.dy/(this.dt*.001)}onPointIn(t,s,f){!this.enable||!t.isDown||this.pointer!==void 0||this.rectBoundsInteractive&&!br(this.parent,t)||(this.pointer=t,this.localX=s,this.localY=f)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0)}onPointerMove(t,s,f){if(!(!this.enable||!t.isDown||this.pointer!==t)){if(this.rectBoundsInteractive&&this.pointerOutReleaseEnable&&!br(this.parent,t)){this.onPointOut(t);return}this.localX=s,this.localY=f}}preupdate(t,s){if(this.enable){var f=this.pointer;this.justMoved=!1,f&&!this.isInTouched?(this.x=f.worldX,this.y=f.worldY,this.preX=f.worldX,this.preY=f.worldY,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",f,this.localX,this.localY)):f&&this.isInTouched?this.x===f.x&&this.y===f.y?this.holdStartTime===void 0?this.holdStartTime=t:t-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=f.worldX,this.y=f.worldY,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",f,this.localX,this.localY)):!f&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",f))}}}const xy=Phaser.Utils.Objects.GetValue;class I${constructor(t){this.resetFromJSON(t)}resetFromJSON(t){return this.setValue(xy(t,"value",0)),this.setSpeed(xy(t,"speed",0)),this.setAcceleration(xy(t,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(t){return this.value=t,this}setSpeed(t){return this.speed=t,this}setAcceleration(t){return this.acceleration=t,this}updateSpeed(t){return this.acceleration!==0&&(this.speed+=this.acceleration*t,this.speed<0&&(this.speed=0)),this}getDeltaValue(t){return this.updateSpeed(t),this.speed<=0?0:this.speed*t}update(t){return this.updateSpeed(t),this.speed>0&&(this.value+=this.getDeltaValue(t)),this}get isMoving(){return this.speed>0}}class B${constructor(){this.value,this.dir,this.movement=new I$}init(t,s,f,C,w){return this.value=t,this.end=w,w!==void 0?this.dir=t<w:this.dir=s,f=Math.abs(f),this.movement.setSpeed(f).setAcceleration(-C),this}stop(){this.movement.reset()}update(t){var s=this.movement.getDeltaValue(t);return this.dir||(s=-s),this.end===void 0?this.value+=s:s===0?this.value=this.end:(this.value+=s,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}}const Di=Phaser.Utils.Objects.GetValue,N$=Phaser.Math.Clamp;class G$ extends Si{constructor(t,s){super(t,s);var f=Di(s,"enable",!0);this._state=new O$(this,{enable:f,eventEmitter:!1});var C={rectBoundsInteractive:Di(s,"rectBoundsInteractive",!1),inputConfig:Di(s,"inputConfig",void 0),enable:f,pointerOutRelease:Di(s,"pointerOutRelease",!0),eventEmitter:!1};this.dragState=new D$(t,C),this._enable=void 0,this._value=void 0,this._slowDown=new B$,this.setSnapStep(Di(s,"snapStep",void 0));var w=Di(s,"valuechangeCallback",null);if(w!==null){var F=Di(s,"valuechangeCallbackScope",void 0);this.on("valuechange",w,F)}if(w=Di(s,"overmaxCallback",null),w!==null){var F=Di(s,"overmaxCallbackScope",void 0);this.on("overmax",w,F)}if(w=Di(s,"overminCallback",null),w!==null){var F=Di(s,"overminCallbackScope",void 0);this.on("overmin",w,F)}this.resetFromJSON(s),this.boot()}resetFromJSON(t){this.setOrientationMode(Di(t,"orientation",0)),this.setDragThreshold(Di(t,"threshold",10)),this.setSlidingDeceleration(Di(t,"slidingDeceleration",5e3)),this.setBackDeceleration(Di(t,"backDeceleration",2e3));var s=Di(t,"dragRate",1);s=s*(Di(t,"dragReverse",!1)?-1:1),this.setDragRate(s);var f=Di(t,"bounds",void 0);return f?this.setBounds(f):this.setBounds(Di(t,"max",0),Di(t,"min",0)),this.setValue(Di(t,"value",this.maxValue||0)),this.setEnable(Di(t,"enable",!0)),this}boot(){this.scene.sys.events.on("preupdate",this._state.update,this._state)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this._state.update,this._state),this._state.destroy(t),this.dragState.destroy(t),this._state=void 0,this.dragState=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return this._enable=t,this._state.setEnable(t),this.dragState.setEnable(t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(t){return typeof t=="string"&&(t=U$[t]),this.orientationMode=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setSlidingDeceleration(t){return this.slidingDeceleration=t,this}setBackDeceleration(t){return this.backDeceleration=t,this}setDragRate(t){return this.dragRate=t,this}setBounds(t,s){if(Array.isArray(t)){var f=t;t=f[0],s=f[1]}return t<s?(this.minValue=t,this.maxValue=s):(this.minValue=s,this.maxValue=t),this}setSnapStep(t){return this.snapStep=t,this}get value(){return this._value}set value(t){if(t!==this._value){var s=this._value,f=this.overMax(t),C=this.overMin(t);f&&this.emit("overmax",t,s),C&&this.emit("overmin",t,s),this.backEnable||(f&&(t=this.maxValue),C&&(t=this.minValue)),this._value=t,this.emit("valuechange",t,s)}}setValue(t,s){return s===void 0&&(s=!1),s&&(t=N$(t,this.minValue,this.maxValue)),this.value=t,this}addValue(t,s){return this.setValue(this.value+t,s),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(t){return this.maxValue!=null&&t>this.maxValue}overMin(t){return this.minValue!=null&&t<this.minValue}get backEnable(){return typeof this.backDeceleration=="number"}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return typeof this.slidingDeceleration=="number"}get isSliding(){return this._slowDown.isMoving}get dragDelta(){var t;return this.orientationMode===0?t=this.dragState.dy:this.orientationMode===1?t=this.dragState.dx:t=0,t*=this.dragRate,t}get dragSpeed(){var t;return this.orientationMode===0?t=this.dragState.speedY:this.orientationMode===1?t=this.dragState.speedX:t=0,t*=this.dragRate,t}}const U$={y:0,v:0,vertical:0,x:1,h:1,horizontal:1},Jp=Phaser.Utils.Objects.GetValue;class k$ extends Si{constructor(t,s){switch(super(t,s),this.parent!==this.scene?this.focusMode=Jp(s,"focus",!0):this.focusMode=!1,typeof this.focusMode=="boolean"&&(this.focusMode=this.focusMode?1:0),this.setSpeed(Jp(s,"speed",.1)),this.setEnable(Jp(s,"enable",!0)),this.focusMode){case 0:case 2:this.scene.input.on("wheel",this.onSceneScroll,this);break;default:t.setInteractive(Jp(s,"inputConfig",void 0)).on("wheel",function(f,C,w,F,N){this.tryScroll(w)},this);break}}destroy(){switch(this.focusMode){case 0:case 2:this.scene.input.off("wheel",this.onSceneScroll,this);break}}onSceneScroll(t,s,f,C,w,F){this.focusMode===2&&!br(this.parent,t)||this.tryScroll(C)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}tryScroll(t){if(this.enable)return this.scroll(t),this}scroll(t){return t*=this.speed,this.emit("scroll",t,this.parent,this),this}}const Pi=Phaser.Utils.Objects.GetValue,V$=Phaser.Math.Snap.To;var Qp=function(e,t,s,f){s=s.toUpperCase();var C=s==="Y",w=e.scrollMode===2,F=e.childrenMap.child,N,z=`snapStep${s}`;if(w)N=Pi(f,z,void 0);else{var N=Pi(f,"snapStep",void 0);N===void 0&&(N=Pi(f,z,void 0))}e[z]=N;var H,Z,tt=`slider${s}`;if(w||f.hasOwnProperty(tt)?H=Pi(f,tt,void 0):H=Pi(f,"slider",void 0),H){H===!0&&(H={}),H.orientation=C?1:0,Z=C$(e.scene,H);var nt,st,ht,ft=Pi(H,"position",0);typeof ft=="string"&&(ft=z$[ft]);var dt=Pi(f,`space.slider${s}`,void 0),gt;dt===void 0&&(dt=Pi(f,"space.slider",void 0),dt===void 0&&(w?dt=0:gt=Pi(f,"space.child",0)));var Et;gt===void 0?Et=typeof dt=="number":Et=typeof gt=="number",C?ft===0?(nt=2,st=1,gt===void 0?ht=Et?{left:dt}:dt:ht={left:Pi(gt,"right",gt)}):(nt=0,st=1,gt===void 0?ht=Et?{right:dt}:dt:ht={right:Pi(gt,"left",gt)}):ft===0?(nt=1,st=2,gt===void 0?ht=Et?{top:dt}:dt:ht={top:Pi(gt,"bottom",gt)}):(nt=1,st=0,gt===void 0?ht=Et?{bottom:dt}:dt:ht={bottom:Pi(gt,"top",gt)}),t.add(Z,{column:nt,row:st,align:"center",padding:ht,expand:!0}),e[`hideUnscrollableSlider${s}`]=Pi(H,"hideUnscrollableSlider",!1),e[`disableUnscrollableDrag${s}`]=Pi(H,"disableUnscrollableDrag",!1),e[`adaptThumb${s}SizeMode`]=Pi(H,"adaptThumbSize",!1),e[`minThumb${s}Size`]=Pi(H,"minThumbSize",void 0)}else e[`hideUnscrollableSlider${s}`]=!1,e[`disableUnscrollableDrag${s}`]=!1,e[`adaptThumb${s}SizeMode`]=!1,e[`minThumb${s}Size`]=void 0;var yt=Pi(f,"scrollDetectionMode");typeof yt=="string"&&(yt=W$[yt]);var Dt,Wt,qt=`scroller${s}`;w||f.hasOwnProperty(qt)?Dt=Pi(f,qt,!0):Dt=Pi(f,"scroller",!0),Dt&&F&&(Dt===!0&&(Dt={}),Dt.orientation=C?0:1,yt!==void 0&&(Dt.rectBoundsInteractive=yt===1),Dt.snapStep=N,Wt=new G$(F,Dt),F.isRexContainerLite&&F.sendChildToBack(F));var re=Pi(f,w?`mouseWheelScroller${s}`:"mouseWheelScroller",!1),ce;if(re&&F&&(yt!==void 0&&(re.focus=yt===1?2:0),ce=new k$(F,re)),e.addChildrenMap(`slider${s}`,Z),e.addChildrenMap(`scroller${s}`,Wt),e.addChildrenMap(`mouseWheelScroller${s}`,ce),(!w||C)&&(e.hideUnscrollableSlider=e[`hideUnscrollableSlider${s}`],e.disableUnscrollableDrag=e[`disableUnscrollableDrag${s}`],e.adaptThumbSizeMode=e[`adaptThumb${s}SizeMode`],e.minThumbSize=e[`minThumb${s}Size`],e.addChildrenMap("slider",Z),e.addChildrenMap("scroller",Wt),e.addChildrenMap("mouseWheelScroller",ce)),Z){var fe,ye;w?(fe=C?"t":"s",ye=`scroll${s}`):(fe="t",ye="scroll"),Z.on("valuechange",function(ze){e[fe]=ze,e.emit(ye,e)}).on("inputend",function(){var ze=e[`snapStep${s}`];if(ze){var me=e[C?"topChildOY":"leftChildOX"],li=e[C?"bottomChildOY":"rightChildOX"],mi=e[`childO${s}`],wi=V$(mi,ze,me),qi=500*(Math.abs(wi-mi)/ze);Z.setEaseValueDuration(qi).easeValueTo(wi,me,li)}})}if(Wt){var ge,ye;w?(ge=`childO${s}`,ye=`scroll${s}`):(ge="childOY",ye="scroll"),Wt.on("valuechange",function(me){e[ge]=me,e.emit(ye,e)})}if(ce){var Ue;w?Ue=`addChildO${s}`:Ue="addChildOY",ce.on("scroll",function(ze){var me=e[z];me&&(ze=me),e[Ue](-ze,!0)})}};const z$={right:0,left:1,bottom:0,top:1},W$={gameObject:0,rectBounds:1},jp=Phaser.Utils.Objects.GetValue;var X$=function(e,t){var s=e.scene,f=[0,1,0],C=[0,1,0],w=jp(t,"width"),F=jp(t,"height");if(!w){var N=jp(t,"child.expandWidth",!0);N||(f[1]=0)}if(!F){var z=jp(t,"child.expandHeight",!0);z||(C[1]=0)}var H=new nr(s,{column:3,row:3,columnProportions:f,rowProportions:C});switch(JY(e,H,t),e.scrollMode){case 0:Qp(e,H,"y",t);break;case 1:Qp(e,H,"x",t);break;default:Qp(e,H,"y",t),Qp(e,H,"x",t);break}return H};const Dr=Phaser.Utils.Objects.GetValue;let _d=class extends Le{constructor(t,s){s===void 0&&(s={});var f=py(s),C=f===1;s.orientation=C?0:1,super(t,s),this.type=Dr(s,"type","rexScrollable"),this.scrollMode=f;var w=Dr(s,"background",void 0);w&&this.addBackground(w);var F=Dr(s,"header",void 0);if(F){var N=Dr(s,"align.header","center"),z=Dr(s,"space.header",0),H;C?H={right:z}:H={bottom:z},this.add(F,{proportion:0,align:N,padding:H,expand:Dr(s,"expand.header",!0)})}var Z=X$(this,s);Z&&this.add(Z,{proportion:1,align:"center",padding:0,expand:!0});var tt=Dr(s,"footer",void 0);if(tt){var N=Dr(s,"align.footer","center"),nt=Dr(s,"space.footer",0),H;C?H={left:nt}:H={top:nt},this.add(tt,{proportion:0,align:N,padding:H,expand:Dr(s,"expand.footer",!0)})}this.addChildrenMap("background",w),this.addChildrenMap("header",F),this.addChildrenMap("footer",tt),this.runLayoutFlag=!1}postLayout(t,s,f){var C=0,w=0;return this.runLayoutFlag?(w=this.t,this.scrollMode===2&&(C=this.s)):this.runLayoutFlag=!0,this.resizeController(),this.setT(w),this.scrollMode===2&&this.setS(C),super.postLayout(t,s,f),this}set t(t){var s=this.childMargin;if(s.top!==0||s.bottom!==0){var f=this.childrenMap.child,C=f.topChildOY-f.bottomChildOY,w=C+s.top+s.bottom,F=w*t-s.top;t=C!==0?F/C:0}this.childrenMap.child.t=t,this.updateController()}get t(){var t=this.childrenMap.child.t,s=this.childMargin;if(s.top!==0||s.bottom!==0){var f=this.childrenMap.child,C=f.topChildOY-f.bottomChildOY,w=C+s.top+s.bottom,F=C*t+s.top;t=w!==0?F/w:0}return t}set s(t){var s=this.childMargin;if(s.left!==0||s.right!==0){var f=this.childrenMap.child,C=f.leftChildOX-f.rightChildOX,w=C+s.left+s.right,F=w*t-s.left;t=C!==0?F/C:0}this.childrenMap.child.s=t,this.updateController()}get s(){var t=this.childrenMap.child.s,s=this.childMargin;if(s.left!==0||s.right!==0){var f=this.childrenMap.child,C=f.leftChildOX-f.rightChildOX,w=C+s.left+s.right,F=C*t+s.left;t=w!==0?F/w:0}return t}set childOY(t){this.childrenMap.child.childOY=t,this.updateController()}get childOY(){return this.childrenMap.child.childOY}set childOX(t){this.childrenMap.child.childOX=t,this.updateController()}get childOX(){return this.childrenMap.child.childOX}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get leftChildOX(){return this.childrenMap.child.leftChildOX+this.childMargin.left}get rightChildOX(){return this.childrenMap.child.rightChildOX-this.childMargin.right}get childVisibleHeight(){return this.childrenMap.child.childVisibleHeight}get childHeight(){return this.childrenMap.child.childHeight}get childVisibleWidth(){return this.childrenMap.child.childVisibleWidth}get childWidth(){return this.childrenMap.child.childWidth}get isOverflow(){var t=this.childrenMap.child;return t.topChildOY!==t.bottomChildOY}get isOverflowY(){return this.isOverflow}get isOverflowX(){var t=this.childrenMap.child;return t.leftChildOX!==t.rightChildOX}get sliderEnable(){var t=this.childrenMap.slider;return t?t.enable:!1}set sliderEnable(t){var s=this.childrenMap.slider;s&&s.setEnable(t)}setSliderEnable(t){return t===void 0&&(t=!0),this.sliderEnable=t,this}get sliderYEnable(){return this.sliderEnable}set sliderYEnable(t){this.sliderEnable=t}setSliderYEnable(t){return this.setSliderEnable(t),this}get sliderXEnable(){var t=this.childrenMap.sliderX;return t?t.enable:!1}set sliderXEnable(t){var s=this.childrenMap.sliderX;s&&s.setEnable(t)}setSliderXEnable(t){return t===void 0&&(t=!0),this.sliderXEnable=t,this}get scrollerEnable(){var t=this.childrenMap.scroller;return t?t.enable:!1}set scrollerEnable(t){var s=this.childrenMap.scroller;s&&s.setEnable(t)}setScrollerEnable(t){return t===void 0&&(t=!0),this.scrollerEnable=t,this}get scrollerYEnable(){return this.scrollerEnable}set scrollerYEnable(t){this.scrollerEnable=t}setScrollerYEnable(t){return this.setScrollerEnable(t),this}get scrollerXEnable(){var t=this.childrenMap.scrollerX;return t?t.enable:!1}set scrollerXEnable(t){var s=this.childrenMap.scrollerX;s&&s.setEnable(t)}setScrollerXEnable(t){return t===void 0&&(t=!0),this.scrollerXEnable=t,this}get scrollerXEnable(){var t=this.childrenMap.scrollerX;return t?t.enable:!1}set scrollerXEnable(t){var s=this.childrenMap.scrollerX;s&&s.setEnable(t)}setScrollerXEnable(t){return t===void 0&&(t=!0),this.scrollerXEnable=t,this}get mouseWheelScrollerEnable(){var t=this.childrenMap.mouseWheelScroller;return t?t.enable:!1}set mouseWheelScrollerEnable(t){var s=this.childrenMap.mouseWheelScroller;s&&s.setEnable(t)}setMouseWheelScrollerEnable(t){return t===void 0&&(t=!0),this.mouseWheelScrollerEnable=t,this}get mouseWheelScrollerYEnable(){return this.mouseWheelScrollerEnable}set mouseWheelScrollerYEnable(t){this.mouseWheelScrollerEnable=t}setMouseWheelScrollerYEnable(t){return this.setMouseWheelScrollerEnable(t),this}get mouseWheelScrollerXEnable(){var t=this.childrenMap.mouseWheelScrollerX;return t?t.enable:!1}set mouseWheelScrollerXEnable(t){var s=this.childrenMap.mouseWheelScrollerX;s&&s.setEnable(t)}setMouseWheelScrollerXEnable(t){return t===void 0&&(t=!0),this.mouseWheelScrollerXEnable=t,this}setDropZoneEnable(t){t===void 0&&(t=!0);var s=this.childrenMap.child;return s.setInteractive(),s.input.dropZone=t,this}};Object.assign(_d.prototype,Pb);var yy=function(e,t,s){var f=so(e);switch(f){case Es:s=e.getWrappedText(t);break;case Ps:s=e.getPenManager(t,s);break;case pn:e.maxWidth>0?s=e.setText(t).getTextBounds().wrappedText.split(`
`):s=t.split(`
`);break}return s},H$=function(e){return e!==void 0&&(this.text=e),this.lines=yy(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},Fb=function(e){return(e-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},Db=function(e){return e*(this.textLineHeight+this.textLineSpacing)-this.textLineSpacing},Y$=function(e){var t=e+this.visibleLinesCount+1,s;switch(this.textObjectType){case Es:s=this.lines.slice(e,t).join(`
`);break;case Ps:var f=this.lines.getLineStartIndex(e),C=this.lines.getLineEndIndex(t-1);s=this.lines.getSliceTagText(f,C,!0);break;case pn:s=this.lines.slice(e,t).join(`
`);break}return s},qp=function(e,t){var s=so(e);switch(s){case Es:var w=e.style,f=w.wordWrapWidth,C=w.wordWrapCallback;w.wordWrapWidth=0,w.wordWrapCallback=void 0,e.setText(t),w.wordWrapWidth=f,w.wordWrapCallback=C;break;case Ps:var w=e.style,F=w.wrapMode;w.wrapMode=0,e.setText(t),w.wrapMode=F;break;case pn:var N=e._maxWidth;e._maxWidth=0,e.setText(t),e._maxWidth=N;break}},Ib=function(){var e=this.textObject.rexSizer;this.textObject.y+=e.offsetY-e.preOffsetY,e.preOffsetY=e.offsetY,this.resetChildPositionState(this.textObject),this.textCropEnable&&$$.call(this)},$$=function(){if(this.textObject.setCrop){var e=this.textObject.rexSizer.offsetY,t,s;e<=0?(t=-e,s=this.height):(t=0,s=this.height-e),this.textObject.setCrop(0,t,this.width,s)}},_$=function(){var e=Math.max(Math.floor(Fb.call(this,-this.textOY)),0),t=Db.call(this,e)+this.textOY,s=Y$.call(this,e);return qp(this.textObject,s),this.textObject.rexSizer.offsetY=t,Ib.call(this),this},Z$=function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,Ad.call(this),this},K$=function(e,t,s){if(s+=this.textLineHeight+this.textLineSpacing,!(this.textObjectWidth===t&&this._textObjectRealHeight===s)){switch(this.textObjectWidth=t,this._textObjectRealHeight=s,this.textObjectType){case Es:case Ps:e.setFixedSize(t,s);var f=e.style,C=Math.max(t,0);this.textObjectType===Es?f.wordWrapWidth=C:(f.wrapMode===0&&(f.wrapMode=1),f.wrapWidth=C);break;case pn:e.setMaxWidth(t);break}this.setText()}},J$=function(){var e,t,s,f=this.left,C=this.top,w,F,N,z;e=this.textObject,e.rexSizer.hidden||(t=e.rexSizer,s=t.padding,w=f+s.left*this.scaleX,F=C+s.top*this.scaleY,N=this.width*this.scaleX-(s.left+s.right)*this.scaleX,z=this.height*this.scaleY-(s.top+s.bottom)*this.scaleY,K$.call(this,e,N,z),Pd(e,w,F,N,z,t.align),t.preOffsetY=0,Ib.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))},Q$={setText:H$,updateTextObject:_$,preLayout:Z$,layoutChildren:J$};const Bb=Phaser.Utils.Objects.IsPlainObject,mn=Phaser.Utils.Objects.GetValue,j$=Phaser.Display.Align.TOP_LEFT;class Nb extends hh{constructor(t,s,f,C,w,F){Bb(s)?(F=s,s=mn(F,"x",0),f=mn(F,"y",0),C=mn(F,"width",void 0),w=mn(F,"height",void 0)):Bb(C)&&(F=C,C=mn(F,"width",void 0),w=mn(F,"height",void 0)),super(t,s,f,C,w,F),this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this._textObjectRealHeight=0,this.lines=void 0,this.text=mn(F,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(mn(F,"clampTextOY",!0)),this.alwaysScrollable=mn(F,"alwaysScrollable",!1);var N=mn(F,"background",void 0),z=mn(F,"text",void 0);z===void 0&&(z=q$(t)),this.textCropEnable=mn(F,"textCrop",!!z.setCrop);var H=mn(F,"textMask",!this.textCropEnable);N&&this.addBackground(N),this.add(z),this.sizerChildren=[z];var Z=this.getSizerConfig(z);Z.align=j$,Z.padding=nh(0),Z.expand=!0,this.textObject=z,this.textObjectType=so(z),Z.preOffsetY=0,Z.offsetY=0,H&&(this.textMask=ir.call(this,this.textObject,this)),this.addChildrenMap("background",N),this.addChildrenMap("text",z)}destroy(t){if(!(!this.scene||this.ignoreDestroy)){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case Es:this.lines.length=0;break;case Ps:this.lines.destroy();break;case pn:this.lines.length=0;break}this.lines=void 0}super.destroy(t)}}setClampMode(t){return t===void 0&&(t=!0),this.clampTextOY=t,this}get textLineHeight(){if(this._textLineHeight===void 0){var t;switch(this.textObjectType){case Es:case Ps:var s=this.textObject.style;t=s.metrics.fontSize+s.strokeThickness;break;case pn:var f=this.textObject.fontSize/this.textObject.fontData.size;t=this.textObject.fontData.lineHeight*f;break}this._textLineHeight=t}return this._textLineHeight}get textLineSpacing(){if(this._textLineSpacing===void 0){var t;switch(this.textObjectType){case Es:case Ps:t=this.textObject.lineSpacing;break;case pn:t=0;break}this._textLineSpacing=t}return this._textLineSpacing}get visibleLinesCount(){return this._visibleLinesCount===void 0&&(this._visibleLinesCount=Math.floor(Fb.call(this,this._textObjectRealHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return this._textHeight===void 0&&(this._textHeight=Db.call(this,this.linesCount)),this._textHeight}get textObjectHeight(){return this._textObjectRealHeight-(this.textLineHeight+this.textLineSpacing)}get textVisibleHeight(){if(this._textVisibleHeight===void 0){var t=this.textHeight-this.textObjectHeight;!this.alwaysScrollable&&t<0&&(t=0),this._textVisibleHeight=t}return this._textVisibleHeight}textOYExceedTop(t){return t===void 0&&(t=this.textOY),t>this.topTextOY}textOYExeceedBottom(t){return t===void 0&&(t=this.textOY),t<this.bottomTextOY}get textOY(){return this._textOY}set textOY(t){var s=this.topTextOY,f=this.bottomTextOY,C=this.textOYExceedTop(t),w=this.textOYExeceedBottom(t);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?t=0:C?t=s:w&&(t=f)),this._textOY!==t&&(this._textOY=t,this.updateTextObject()),C&&(this.execeedTopState||this.emit("execeedtop",this,t,s)),this.execeedTopState=C,w&&(this.execeedBottomState||this.emit("execeedbottom",this,t,f)),this.execeedBottomState=w}setTextOY(t){return this.textOY=t,this}set t(t){this.textOY=-this.textVisibleHeight*t}get t(){var t=this.textVisibleHeight;return t===0?0:this.textOY/-t}setTextOYByPercentage(t){return this.t=t,this}}var q$=function(e){return e.add.text(0,0,"")};Object.assign(Nb.prototype,Q$);var t_=function(e){Object.defineProperty(e,"childOY",{configurable:!0,get:function(){return e.textOY},set:function(t){e.textOY=t}}),Object.defineProperty(e,"topChildOY",{get:function(){return e.topTextOY}}),Object.defineProperty(e,"bottomChildOY",{get:function(){return e.bottomTextOY}}),Object.defineProperty(e,"childVisibleHeight",{get:function(){return e.textObjectHeight}}),Object.defineProperty(e,"childHeight",{get:function(){return e.textHeight}})},e_={setText(e){var t=this.childrenMap.child;return t.setText(e),this.resizeController(),this},appendText(e){return this.setText(this.text+e),this}},i_={scrollToLine(e){return this.setChildOY(-this.lineHeight*e),this},scrollToNextLine(e){e===void 0&&(e=1);var t=this.lineIndex+e;return this.scrollToLine(t),this}};const Ir=Phaser.Utils.Objects.GetValue;class Zd extends _d{constructor(t,s){s===void 0&&(s={});var f=Ir(s,"text",void 0),C=Ir(s,"textWidth",void 0),w=Ir(s,"textHeight",void 0),F=Ir(s,"textCrop",!!f.setCrop),N=Ir(s,"textMask",!F),z=Ir(s,"content",""),H=new Nb(t,{width:C,height:w,text:f,textMask:N,textCrop:F&&!N,content:z,clampTextOY:Ir(s,"clampChildOY",!1),alwaysScrollable:Ir(s,"alwaysScrollable",!1)});t.add.existing(H),t_(H),s.scrollMode=0,s.type="rexTextArea",s.child={gameObject:H,expandWidth:C===void 0,expandHeight:w===void 0};var Z=Ir(s,"space",void 0);Z&&(Z.child=Ir(Z,"text",0)),super(t,s),this.addChildrenMap("text",f)}get text(){return this.childrenMap.child.text}get lineHeight(){var t=this.childrenMap.child;return t.textLineHeight+t.textLineSpacing}get lineIndex(){return Math.floor(-this.childOY/this.lineHeight)}get linesCount(){var t=this.childrenMap.child;return t.linesCount}get contentHeight(){var t=this.childrenMap.child;return t.textHeight}}Object.assign(Zd.prototype,e_,i_);const tv=Phaser.Utils.Objects.GetValue;var Gb=function(e,t,s){t=t?I(t):{};var f=tv(s,"background",ji),C=tv(s,"text",Sy),w=tv(s,"track",ji),F=tv(s,"thumb",ji);f?t.background=f(e,t.background):delete t.background,C?t.text=C(e,t.text):delete t.text;var N=t.slider;N!==!1&&N!==null&&(N===void 0&&(N={}),w?N.track=w(e,N.track):delete N.track,F?N.thumb=F(e,N.thumb):delete N.thumb,t.slider=N);var z=new Zd(e,t);return e.add.existing(z),z},Sy=function(e,t){var s;t&&(t.hasOwnProperty("$type")?s=t.$type:t.hasOwnProperty("key")&&(s="bitmaptext",t.font=t.key));var f;switch(s){case"bitmaptext":case"bitmap":f=new Yp(e,t);break;case"bbcodetext":case"bbcode":f=new Ug(e,0,0,"",t);break;case"label":f=new Kd(e,t);break;case"textarea":f=Gb(e,t);break;default:f=new Hp(e,t);break}return uy(f,t),e.add.existing(f),f},Ub=function(e,t){var s;t&&(t.hasOwnProperty("$type")?s=t.$type:t.hasOwnProperty("leftWidth")?s="nineSlice":(t.hasOwnProperty("color")||t.hasOwnProperty("strokeColor"))&&(s="roundRectangle"));var f;switch(s){case"nineSlice":t.hasOwnProperty("stretchMode")?f=new Yd(e,t):f=new Hd(e,t);break;case"roundRectangle":f=new Xd(e,t);break;default:f=new Wd(e,t);break}return uy(f,t),e.add.existing(f),f};const ev=Phaser.Utils.Objects.GetValue;var iv=function(e,t,s){t=t?I(t):{};var f=ev(s,"background",ji),C=ev(s,"text",Sy),w=ev(s,"icon",Ub),F=ev(s,"action",Ub);return t.background!==null&&f?t.background=f(e,t.background):delete t.background,t.text!==null&&C?t.text=C(e,t.text):delete t.text,t.icon!==null&&w?t.icon=w(e,t.icon):delete t.icon,t.action!==null&&F?t.action=F(e,t.action):delete t.action,t};class Kd extends ga{constructor(t,s,f){s=iv(t,s,f),super(t,s),this.type="rexSimpleLabel"}setActiveState(t){return Ty(this.getChildren(),"setActiveState",t),this}setHoverState(t){return Ty(this.getChildren(),"setHoverState",t),this}setDisableState(t){return Ty(this.getChildren(),"setDisableState",t),this}}var Ty=function(e,t,s){for(var f=0,C=e.length;f<C;f++){var w=e[f];w&&w[t]&&w[t](s)}};c.register("simpleLabel",function(e,t){var s=new Kd(this.scene,e,t);return this.scene.add.existing(s),s}),j(window,"RexPlugins.UI.SimpleLabel",Kd);const Me=Phaser.Utils.Objects.GetValue;var s_=function(e){var t=this.scene,s=Me(e,"orientation",0);this.setOrientation(s);var f=Me(e,"icon",void 0),C=Me(e,"iconMask",void 0),w=Me(e,"innerBackground",void 0),F=Me(e,"title",void 0),N=Me(e,"separator",void 0),z=Me(e,"text",void 0),H=Me(e,"action",void 0),Z=Me(e,"actionMask",void 0);if(f){var tt=Me(e,"align.icon","center"),qt;this.orientation===0?qt={right:Me(e,"space.icon",0),top:Me(e,"space.iconTop",0),bottom:Me(e,"space.iconBottom",0),left:Me(e,"space.iconLeft",0)}:qt={bottom:Me(e,"space.icon",0),left:Me(e,"space.iconLeft",0),right:Me(e,"space.iconRight",0),top:Me(e,"space.iconTop",0)};var nt=Me(e,"squareFitIcon",!1)?1:0;if(this.add(f,{proportion:0,align:tt,padding:qt,fitRatio:nt}),C&&(C=ir.call(this,f,f,1)),!nt){var st=Me(e,"iconSize",void 0);this.setIconSize(Me(e,"iconWidth",st),Me(e,"iconHeight",st))}}var ht=new Le(t,{orientation:1});w&&ht.addBackground(w);var ft=Me(e,"space.separator",0);if(F){var tt=Me(e,"align.title","left"),dt=Me(e,"expandTitleWidth",!1),gt=Me(e,"expandTitleHeight",!1),Et,qt,yt;Et=gt?1:0,yt=dt,qt={bottom:!N&&z?Me(e,"space.title",ft):0,left:Me(e,"space.titleLeft",0),right:Me(e,"space.titleRight",0)},ht.add(F,{proportion:Et,expand:yt,align:tt,padding:qt})}if(N){var qt={top:F?ft:0,bottom:z?ft:0,left:Me(e,"space.separatorLeft",0),right:Me(e,"space.separatorRight",0)};ht.add(N,{expand:!0,padding:qt})}if(z){var tt=Me(e,"align.text","left"),Dt=Me(e,"expandTextWidth",!1),Wt=Me(e,"expandTextHeight",!1),Et,qt,yt;Et=Wt?1:0,yt=Dt,qt={left:Me(e,"space.textLeft",0),right:Me(e,"space.textRight",0)},ht.add(z,{proportion:Et,expand:yt,align:tt,padding:qt})}var qt=void 0;if(H&&(qt={right:Me(e,"space.text",0)}),this.add(ht,{proportion:1,padding:qt}),H){var tt=Me(e,"align.action","center"),qt;this.orientation===0?qt={top:Me(e,"space.actionTop",0),bottom:Me(e,"space.actionBottom",0),right:Me(e,"space.actionRight",0)}:qt={left:Me(e,"space.actionLeft",0),right:Me(e,"space.actionRight",0),bottom:Me(e,"space.actionBottom",0)};var nt=Me(e,"squareFitAction",!1)?1:0;if(this.add(H,{proportion:0,align:tt,padding:qt,fitRatio:nt}),Z&&(Z=ir.call(this,H,H,1)),!nt){var re=Me(e,"actionSize");this.setActionSize(Me(e,"actionWidth",re),Me(e,"actionHeight",re))}}this.addChildrenMap("icon",f),this.addChildrenMap("iconMask",C),this.addChildrenMap("innerSizer",ht),this.addChildrenMap("innerBackground",w),this.addChildrenMap("title",F),this.addChildrenMap("separator",N),this.addChildrenMap("text",z),this.addChildrenMap("action",H),this.addChildrenMap("actionMask",Z)};const Te=Phaser.Utils.Objects.GetValue;var n_=function(e){this.setOrientation(1),this.setRTL(!1);var t=this.scene,s=Te(e,"title",void 0),f=Te(e,"separator",void 0),C=Te(e,"innerBackground",void 0),w=Te(e,"icon",void 0),F=Te(e,"iconMask",void 0),N=Te(e,"text",void 0),z=Te(e,"action",void 0),H=Te(e,"actionMask",void 0);if(s){var Z=Te(e,"align.title","left"),tt=Te(e,"expandTitleWidth",!1),nt=Te(e,"expandTitleHeight",!1),st,ht,ft;st=nt?1:0,ft=tt,ht={bottom:Te(e,"space.title",0),left:Te(e,"space.titleLeft",0),right:Te(e,"space.titleRight",0)},this.add(s,{proportion:st,expand:ft,align:Z,padding:ht})}if(f){var dt=Te(e,"space.separator",0),ht={top:s?dt:0,bottom:N?dt:0,left:Te(e,"space.separatorLeft",0),right:Te(e,"space.separatorRight",0)};this.add(f,{proportion:0,expand:!0,padding:ht})}var gt=Te(e,"orientation",0),Et=new Le(t,{orientation:gt,rtl:Te(e,"rtl",!1),space:{left:Te(e,"space.innerLeft",0),right:Te(e,"space.innerRight",0),top:Te(e,"space.innerTop",0),bottom:Te(e,"space.innerBottom",0)}});if(C&&Et.addBackground(C),this.add(Et,{proportion:1,expand:!0}),w){var Z=Te(e,"align.icon","center"),ht;Et.orientation===0?ht={right:Te(e,"space.icon",0),top:Te(e,"space.iconTop",0),bottom:Te(e,"space.iconBottom",0),left:Te(e,"space.iconLeft",0)}:ht={bottom:Te(e,"space.icon",0),left:Te(e,"space.iconLeft",0),right:Te(e,"space.iconRight",0),top:Te(e,"space.iconTop",0)};var yt=Te(e,"squareFitIcon",!1)?1:0;if(Et.add(w,{proportion:0,align:Z,padding:ht,fitRatio:yt}),F&&(F=ir.call(this,w,w,1)),!yt){var Dt=Te(e,"iconSize",void 0);this.setIconSize(Te(e,"iconWidth",Dt),Te(e,"iconHeight",Dt))}}if(N){var Z=Te(e,"align.text","left"),Wt=Te(e,"space.text",0),qt=Te(e,"expandTextWidth",!1),re=Te(e,"expandTextHeight",!1),st,ht,ft;Et.orientation===0?(st=qt?1:0,z&&(ht={right:Wt}),ft=re):(st=re?1:0,z&&(ht={bottom:Wt}),ft=qt),Et.add(N,{proportion:st,expand:ft,align:Z,padding:ht})}if(z){var Z=Te(e,"align.action","center"),ht;Et.orientation===0?ht={top:Te(e,"space.actionTop",0),bottom:Te(e,"space.actionBottom",0),right:Te(e,"space.actionRight",0)}:ht={left:Te(e,"space.actionLeft",0),right:Te(e,"space.actionRight",0),bottom:Te(e,"space.actionBottom",0)};var yt=Te(e,"squareFitAction",!1)?1:0;if(Et.add(z,{proportion:0,align:Z,padding:ht,fitRatio:yt}),H&&(H=ir.call(this,z,z,1)),!yt){var ce=Te(e,"actionSize");this.setActionSize(Te(e,"actionWidth",ce),Te(e,"actionHeight",ce))}}this.addChildrenMap("title",s),this.addChildrenMap("separator",f),this.addChildrenMap("innerSizer",Et),this.addChildrenMap("innerBackground",C),this.addChildrenMap("icon",w),this.addChildrenMap("iconMask",F),this.addChildrenMap("text",N),this.addChildrenMap("action",z),this.addChildrenMap("actionMask",H)};const ao=Phaser.Utils.Objects.GetValue,kb=[s_,n_];class sv extends Jx{constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexTitleLabel";var f=ao(s,"background",void 0);f&&this.addBackground(f);var C=ao(s,"title",void 0),w=ao(s,"text",void 0);if(C){var F=ao(s,"wrapTitle",!1),N=ao(s,"adjustTitleFontSize",!1);F?(F===!0&&(F="word"),jx(C,F),s.expandTitleWidth=!0,zp(C)):N&&(s.expandTextWidth=!0,s.expandTextHeight=!0,Xp(C,{fitHeight:!0}))}if(w){var z=ao(s,"wrapText",!1),H=ao(s,"adjustTextFontSize",!1);z?(z===!0&&(z="word"),jx(w,z),s.expandTextWidth=!0,zp(w)):H&&(s.expandTextWidth=!0,s.expandTextHeight=!0,Xp(w,{fitHeight:!0}))}var Z=ao(s,"layoutMode",0),tt=kb[Z]||kb[0];tt.call(this,s),this.addChildrenMap("background",s.background)}get title(){var t=this.childrenMap.title;return t?t.title:""}set title(t){var s=this.childrenMap.title;s&&s.setText(t)}setTitle(t){return this.title=t,this}resetDisplayContent(t){t===void 0?t={}:typeof t=="string"&&(t={text:t}),super.resetDisplayContent(t);var s=this.childrenMap.title;return s&&(t.title===void 0||(t.title?(this.show(s),this.setTitle(t.title)):this.hide(s))),this}}c.register("titleLabel",function(e){var t=new sv(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.TitleLabel",sv);const Cy=Phaser.Utils.Objects.GetValue;var Vb=function(e,t,s){var f=Cy(s,"innerBackground",ji),C=Cy(s,"separator",ji),w=Cy(s,"title",Sy),F,N;t.innerBackground!==null&&f&&(F=f(e,t.innerBackground)),t.separator!==null&&C&&(N=C(e,t.separator)),t=iv(e,t,s),F?t.innerBackground=F:delete t.innerBackground,N?t.separator=N:delete t.separator,t.title!==null&&w?t.title=w(e,t.title):delete t.title;var z=t.background;return z&&(F?e.children.moveBelow(z,F):N&&e.children.moveBelow(z,N)),t};class zb extends sv{constructor(t,s,f){s=Vb(t,s,f),super(t,s),this.type="rexSimpleTitleLabel"}setActiveState(t){return My(this.getChildren(),"setActiveState",t),this}setHoverState(t){return My(this.getChildren(),"setHoverState",t),this}setDisableState(t){return My(this.getChildren(),"setDisableState",t),this}}var My=function(e,t,s){for(var f=0,C=e.length;f<C;f++){var w=e[f];w&&w[t]&&w[t](s)}};c.register("simpleTitleLabel",function(e,t){var s=new zb(this.scene,e,t);return this.scene.add.existing(s),s}),j(window,"RexPlugins.UI.SimpleTitleLabel",zb);const $e=Phaser.Utils.Objects.GetValue,r_=Phaser.Utils.Objects.IsPlainObject;var a_=function(e,t){var s=$e(t,"background",void 0),f=$e(t,"icon",void 0),C=$e(t,"iconMask",void 0),w=$e(t,"nameText",void 0),F=$e(t,"valueText",void 0),N=$e(t,"bar",void 0),z=$e(t,"action",void 0),H=$e(t,"actionMask",void 0),Z=$e(t,"barShape","line")==="line";if(r_(N)){var tt=Z?D0:Qc;N=new tt(e,N),e.add.existing(N),w&&e.children.moveBelow(N,w),F&&e.children.moveBelow(N,F)}var nt=w||F||N;if(s&&this.addBackground(s),f){var st=void 0;this.orientation===0?(nt||z)&&(st={right:$e(t,"space.icon",0),top:$e(t,"space.iconTop",0),bottom:$e(t,"space.iconBottom",0)}):(nt||z)&&(st={bottom:$e(t,"space.icon",0),left:$e(t,"space.iconLeft",0),right:$e(t,"space.iconRight",0)}),this.add(f,{proportion:0,padding:st}),C&&(C=ir.call(this,f,f,1))}if(nt){var ht=new Le(e,{orientation:1}),ft;if(w||F){if(ft=new Le(e,{orientation:0}),w){w.text===""&&w.setText(" "),w.setOrigin(0,w.originY);var st={left:$e(t,"space.name",0)};ft.add(w,{padding:st})}if(F){F.text===""&&F.setText(" "),F.setOrigin(1,F.originY),ft.addSpace();var st={right:$e(t,"space.value",0)};ft.add(F,{padding:st}),this.setValueTextFormatCallback($e(t,"valueTextFormatCallback",o_),$e(t,"valueTextFormatCallbackScope",void 0))}ht.add(ft,{expand:!0})}if(N)if(Z){var dt=ft?$e(t,"space.bar"):0;dt===void 0&&(dt=$e(t,"space.barTop",0));var st={top:dt,bottom:$e(t,"space.barBottom",0),left:$e(t,"space.barLeft",0),right:$e(t,"space.barRight",0)};ht.add(N,{expand:!0,padding:st})}else{var st={top:$e(t,"space.barTop",0),bottom:$e(t,"space.barBottom",0),left:$e(t,"space.barLeft",0),right:$e(t,"space.barRight",0)};this.addBackground(N,st)}var st=void 0;z&&(st={right:$e(t,"space.text",0)});var gt=$e(t,"align.text","bottom");this.add(ht,{proportion:1,align:gt,padding:st})}if(z){var st;this.orientation===0?st={top:$e(t,"space.actionTop",0),bottom:$e(t,"space.actionBottom",0)}:st={left:$e(t,"space.actionLeft",0),right:$e(t,"space.actionRight",0)},this.add(z,{proportion:0,padding:st}),H&&(H=ir.call(this,z,z,1))}this.addChildrenMap("background",s),this.addChildrenMap("icon",f),this.addChildrenMap("iconMask",C),this.addChildrenMap("name",w),this.addChildrenMap("value",F),this.addChildrenMap("bar",N),this.addChildrenMap("action",z),this.addChildrenMap("actionMask",H)},o_=function(e,t,s){return e.toString()};const h_=Phaser.Math.Clamp;var l_={setValueTextFormatCallback(e,t){return this.valueTextFormatCallback=e,this.valueTextFormatCallbackScope=t,this},getFormatValueText(e,t,s){e===void 0&&(e=this.value),t===void 0&&(t=this.minValue),s===void 0&&(s=this.maxValue);var f;return this.valueTextFormatCallbackScope?f=this.valueTextFormatCallback(e,t,s):f=this.valueTextFormatCallback.call(this.valueTextFormatCallbackScope,e,t,s),f},updateValueText(e,t,s){var f=this.childrenMap.value;return f&&this.valueTextFormatCallback&&(f.setText(this.getFormatValueText(e,t,s)),f.layout&&f.layout()),this},setValue(e,t,s){return t===void 0?t=this.minValue:this.minValue=t,s===void 0?s=this.maxValue:this.maxValue=s,e=h_(e,t,s),this.value=e,this.updateValueText(e,t,s),this.setBarValue(e,t,s),this},setEaseValueDuration(e){return this.easeValueDuration=e,this},easeValueTo(e,t,s){return t===void 0?t=this.minValue:this.minValue=t,s===void 0?s=this.maxValue:this.maxValue=s,this.easeValueTask===void 0&&(this.easeValueTask=new Kn(this),this.easeValueTask.on("update",function(){this.setValue(this.value,this.minValue,this.maxValue)},this)),this.easeValueTask.restart({key:"value",to:e,duration:this.easeValueDuration}),this}};class nv extends Le{constructor(t,s){super(t,s),this.type="rexNameValueLabel",a_.call(this,t,s),this.setEaseValueDuration(1e3)}get nameText(){var t=this.childrenMap.name;return t===void 0?"":t.text}set nameText(t){var s=this.childrenMap.name;s!==void 0&&s.setText(t)}setNameText(t){return this.nameText=t,this}get valueText(){var t=this.childrenMap.value;return t===void 0?"":t.text}set valueText(t){var s=this.childrenMap.value;s!==void 0&&s.setText(t)}setValueText(t){return this.valueText=t,this}get barValue(){var t=this.childrenMap.bar;if(t!==void 0)return t.value}set barValue(t){var s=this.childrenMap.bar;s!==void 0&&s.setValue(t)}setBarValue(t,s,f){var C=this.childrenMap.bar;return C===void 0?this:(C.setValue(t,s,f),this)}easeBarValueTo(t,s,f){var C=this.childrenMap.bar;return C===void 0?this:(C.easeValueTo(t,s,f),this)}setTexture(t,s){var f=this.childrenMap.icon;if(f!==void 0)return f.setTexture(t,s),this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}postLayout(t,s,f){var C=this.childrenMap.iconMask;C&&(C.setPosition(),this.resetChildPositionState(C));var w=this.childrenMap.actionMask;return w&&(w.setPosition(),this.resetChildPositionState(w)),super.postLayout(t,s,f),this}resize(t,s){super.resize(t,s);var f=this.childrenMap.iconMask;f&&f.resize();var C=this.childrenMap.actionMask;return C&&C.resize(),this}}Object.assign(nv.prototype,l_),c.register("nameValueLabel",function(e){var t=new nv(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.NameValueLabel",nv);class u_ extends VM{constructor(t){super(),this.setTable(Vt(t,"table")),this.setMaxLevel(Vt(t,"maxLevel"));var s=Vt(t,"exp",0),f=Vt(t,"level",void 0);f!==void 0&&!this.checkLevel(f,s)&&(console.error(`Level ${f} and Exp ${s} are mismatch`),f=void 0),this.resetExp(s,f)}setTable(t){return this.levelTable=t,this.isLevelMapFunction=Qn(t),this}setMaxLevel(t){t===void 0&&(Array.isArray(this.levelTable)?t=this.levelTable.length-1:t=-1);var s;return t!==-1?s=this.getExp(t):s=-1,this.hasMaxLevel=t!==-1,this.maxLevel=t,this.maxExp=s,this}resetExp(t,s){return this.hasMaxLevel&&t>this.maxExp&&(t=this.maxExp),s===void 0&&(s=this.getLevel(t)),this._exp=t,this._level=s,this._requiredExp=this.getRequiredExpToNextLevel(s,t),this}get exp(){return this._exp}set exp(t){if(this.hasMaxLevel&&t>this.maxExp&&(t=this.maxExp),t<this._exp){this.resetExp(t);return}if(t!==this._exp){for(var s=this.getLevel(t,this._level),f=this._level,C=this._exp,w;;){var F=this.getExp(f),N=this.getExp(f+1);if(w=Math.min(N,t),this.emit("levelup",f,C,w,F,N),f===s&&w===t)break;f++,C=N}this.resetExp(t,s)}}get level(){return this._level}set level(t){this.hasMaxLevel&&t>this.maxLevel?this.exp=this.maxExp:this.exp=this.getExp(t)}get requiredExp(){return this._requiredExp}getExp(t){return t===void 0?this._exp:this.isLevelMapFunction?this.levelTable(t):(this.hasMaxLevel&&t>this.maxLevel&&(t=this.maxLevel),this.levelTable[t])}getLevel(t,s){if(t===void 0)return this._level;for(s===void 0&&(s=0);;){var f=this.getExp(s+1);if(f>t||(s++,this.hasMaxLevel&&f===this.maxExp))break}return s}getRequiredExpToNextLevel(t,s){return t===void 0&&(t=this.level),s===void 0&&(s=this.exp),this.getExp(t+1)-s}checkLevel(t,s){return s>=this.getExp(t)&&s<this.getExp(t+1)}gainExp(t,s,f){return s&&this.on("levelup",s,f),this.exp+=t,s&&this.off("levelup",s,f),this}setExp(t,s,f){return s&&this.on("levelup",s,f),this.exp=t,s&&this.off("levelup",s,f),this}setLevel(t,s,f){return s&&this.on("levelup",s,f),this.level=t,s&&this.off("levelup",s,f),this}}var Ey=function(e,t,s){var f=Vt(s,"reverse",!1),C;if(jn(e[0]))if(f)for(var F=e.length,w=F-1;w>=0;w--)C=Ey(e[w],t,s);else for(var w=0,F=e.length;w<F;w++)C=Ey(e[w],t,s);else C=d_(e,t,s);return C},d_=function(e,t,s){var f=Vt(s,"argsConvert",void 0),C=Vt(s,"argsConvertScope",void 0),w=e[0];if(oo=Yc(oo,e,1),f){f===!0&&(f=i0,C=void 0);for(var F=0,N=oo.length;F<N;F++)C?oo[F]=f.call(C,oo[F],e):oo[F]=f(oo[F],e)}var z;typeof w=="string"?(z=t[w],z==null&&(z=Vt(t,w,null))):z=w;var H=z.apply(t,oo);return H},oo=[];const rr=Phaser.Utils.Objects.GetValue;class Wb extends Si{constructor(t,s){super(t,s);var f=rr(s,"clock",void 0);f||(f=new DM(t)),this.clock=f,this.clock.on("update",this.update,this),this.commands=[],this.resetFromJSON(s)}resetFromJSON(t){return this.clock.resetFromJSON(rr(t,"clock",void 0)),this.state=rr(t,"state",0),this.commands=rr(t,"commands",[]),this.scope=rr(t,"scope",void 0),this.setTimeUnit(rr(t,"timeUnit",0)),this.setDtMode(rr(t,"dtMode",0)),this.index=rr(t,"index",0),this.nextTime=rr(t,"nextTime",0),this}toJSON(){return{clock:this.clock.toJSON(),state:this.state,commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,nextTime:this.nextTime}}shutdown(t){this.isShutdown||(this.clock.shutdown(t),this.commands=void 0,super.shutdown(t))}load(t,s,f){this.stop();var C=rr(f,"timeUnit",void 0);C!==void 0&&this.setTimeUnit(C);var w=rr(f,"dtMode",void 0);return w!==void 0&&this.setDtMode(w),t=t.filter(function(F){var N=F[0];return!isNaN(N)}).map(function(F){var N=F[0];return typeof N=="string"&&(F[0]=parseFloat(F[0])),F}),this.dtMode===0&&t.sort(function(F,N){var z=F[0],H=N[0];return z>H?1:z<H?-1:0}),Yc(this.commands,t),this.scope=s,this}clear(){return this.commands.length=0,this}append(t,s,...f){var C;return Array.isArray(s)?C=s:C=[s,...f],this.commands.push([t,C]),this}start(t){return t===void 0&&(t=0),this.stop(),this.index=0,this.state=1,this.nextTime=this.getNextDt(0),this.clock.start(t),this.update(t),this.emit("start",this.parent,this),this}pause(){return this.clock.pause(),this.emit("pause",this.parent,this),this}resume(){return this.clock.resume(),this.emit("resume",this.parent,this),this}stop(){return this.clock.stop(),this.state=0,this.emit("stop",this.parent,this),this}seek(t){return this.clock.seek(t),this}seekToNext(){return this.seek(this.nextTime),this}get isPlaying(){return this.clock.isRunning}get completed(){return this.state===2}get timeScale(){return this.clock.timeScale}set timeScale(t){this.clock.timeScale=t}setTimeScale(t){return this.timeScale=t,this}get now(){return this.clock.now}update(t){if(this.nextTime>t)return this;for(var s=this.commands;;){var f=s[this.index],C=f[1];if(jn(C)||(C=Yc(f_,f,1)),Ey(C,this.scope),this.emit("runcommand",C,this.scope),this.index>=s.length-1)return this.nextTime=0,this.complete(),this;if(this.index++,this.nextTime=this.getNextDt(this.nextTime),this.nextTime>t)return this}}complete(){this.clock.stop(),this.state=2,this.emit("complete",this.parent,this)}getNextDt(t){var s=this.commands[this.index][0];return this.timeUnit===1&&(s=s*1e3),this.dtMode===1&&(s+=t),s}setDtMode(t){return typeof t=="string"&&(t=p_[t]),this.dtMode=t,this}setTimeUnit(t){return typeof t=="string"&&(t=c_[t]),this.timeUnit=t,this}}var f_=[];const c_={ms:0,s:1,sec:1},p_={abs:0,absolute:0,inc:1,increment:1};var v_=function(e,t,s,f,C){var w=(s-t)/(C-f)*this.totalEaseDuration,F=s===C?e+1:e;this.player.append(0,this.setEaseValueDuration,w).append(0,this.easeValueTo,s,f,C).append(0,this.emit,"levelup.start",e,t,s,this).append(w,a).append(0,this.emit,"levelup.end",F,t,s,this),this.player.isPlaying||this.player.start()},m_={setExpTable(e){return this.levelCounter.setTable(e),this},resetExp(e){return this.levelCounter.resetExp(e),this.setValue(this.exp,this.getExp(this.level),this.getExp(this.level+1)),this},getExp(e){return this.levelCounter.getExp(e)},getLevel(e,t){return this.levelCounter.getLevel(e,t)},getRequiredExpToNextLevel(e,t){return this.levelCounter.getRequiredExpToNextLevel(e,t)},gainExp(e){return this.levelCounter.gainExp(e),this},setExp(e){return this.levelCounter.setExp(e),this},setLevel(e){return this.levelCounter.setLevel(e),this}};const Xb=Phaser.Utils.Objects.GetValue;class Py extends nv{constructor(t,s){super(t,s),this.type="rexExpBar",this.setTotalEaseDuration(Xb(s,"easeDuration",1e3)),this.levelCounter=new u_(Xb(s,"levelCounter")),this.player=new Wb(this,{scope:this,dtMode:1}),this.levelCounter.on("levelup",v_,this),this.player.on("complete",function(){this.player.clear(),this.emit("levelup.complete",this.level,this)},this),this.setValue(this.exp,this.getExp(this.level),this.getExp(this.level+1))}destroy(t){!this.scene||this.ignoreDestroy||(this.levelCounter.destroy(),this.levelCounter=void 0,this.player.destroy(),this.player=void 0,super.destroy(t))}get exp(){return this.levelCounter.exp}set exp(t){this.levelCounter.exp=t}get level(){return this.levelCounter.level}set level(t){this.levelCounter.level=t}get requiredExp(){return this.levelCounter.requiredExp}setTotalEaseDuration(t){return this.totalEaseDuration=t,this}}Object.assign(Py.prototype,m_),c.register("expBar",function(e){var t=new Py(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.ExpBar",Py);const rv=Le.prototype.add,Hb=Le.prototype.addSpace;var wy=function(e){var t=!e.isRexSpace,s=!t||this.buttonsExpand?1:0;if(this.sizerChildren.length===0)if(t){var f=!this.buttonsExpand&&(this.buttonsAlign==="right"||this.buttonsAlign==="center"||this.buttonsAlign==="bottom");f&&Hb.call(this),rv.call(this,e,{proportion:s,expand:!0});var C=!this.buttonsExpand&&this.buttonsAlign==="center";C&&Hb.call(this),this.hasTailSpace=C}else rv.call(this,e,{proportion:s,expand:!0}),this.hasTailSpace=!1;else if(this.hasTailSpace){var w=this.sizerChildren.length-1;rv.call(this,e,{index:w,proportion:s,expand:!0})}else rv.call(this,e,{proportion:s,expand:!0});return t&&this.buttonGroup.add(e),this},g_={addButton(e){if(jn(e))for(var t=e,s=0,f=t.length;s<f;s++)wy.call(this,t[s]);else wy.call(this,e);return this},addButtons(e){for(var t=0,s=e.length;t<s;t++)wy.call(this,e[t]);return this}};const x_=Le.prototype.remove,y_=Le.prototype.clear;var by=function(e,t){return this.getParentSizer(e)!==this?this:(this.buttonGroup.remove(e),x_.call(this,e,t),this)},S_={remove(e,t){if(jn(e))for(var s=e,f=0,C=s.length;f<C;f++)by.call(this,s[f],t);else by.call(this,e,t);return this},clear(e){var t=this.buttonGroup.buttons;return t.length=0,y_.call(this,e),this},removeButton(s,t){var s=this.getButton(s);return s?(this.remove(s,t),this):this},clearButtons(e){for(var t=this.buttonGroup.buttons,s=t.length-1;s>=0;s--)by.call(this,t[s],e);return this}},T_=function(e,t,s){if(e){var f=this.setValueCallback,C=this.setValueCallbackScope;f&&(C?f.call(C,e,t,s):f(e,t,s)),this.fireEvent("button.statechange",e,t,s)}},C_=function(e){var t=this;e._selected=void 0,Object.defineProperty(e,"selected",{get:function(){return e._selected},set:function(s){if(e._selected!==s){var f=e._selected;e._selected=s,T_.call(t,e,s,f)}},enumerable:!0,configurable:!0}),e.selected=!1},M_={add(e){return this.buttons.push(e),e._click||(e._click=new ha(e,this.clickConfig),e._click.on("click",function(t,s,f,C){this.fireEvent("button.click",s,f,C)},this).on("enable",function(t,s){this.fireEvent("button.enable",s)},this).on("disable",function(t,s){this.fireEvent("button.disable",s)},this).on("over",function(t,s,f,C){this.fireEvent("button.over",s,f,C)},this).on("out",function(t,s,f,C){this.fireEvent("button.out",s,f,C)},this).on("down",function(t,s,f,C){this.fireEvent("button.down",s,f,C)},this).on("up",function(t,s,f,C){this.fireEvent("button.up",s,f,C)},this),e.isRexContainerLite&&e.sendChildToBack(e)),this.buttonsType&&(e.name===void 0&&console.error(`${this.parent.constructor.name}: Option button miss value`),C_.call(this,e)),this},addMultiple(e){for(var t=0,s=e.length;t<s;t++)this.add(e[t]);return this}};const E_=Phaser.Utils.Array.Remove;var P_={remove(e){return this.buttonsType&&delete e.selected,E_(this.buttons,e),this},clear(){if(this.buttonsType)for(var e=this.buttons,t=0,s=e.length;t<s;t++)delete e[t].selected;return this.buttons.length=0,this}},w_=function(e,t,...s){if(this.buttons){var f;if(typeof t=="number"){if(f=t,t=this.buttons[f],!t)return}else if(f=this.buttons.indexOf(t),f===-1)return;this.eventEmitter!==this.parent&&this.parent.emit(e,t,f,...s),this.groupName!==void 0?this.eventEmitter.emit(e,t,this.groupName,f,...s):this.eventEmitter.emit(e,t,f,...s)}};const Jd=Phaser.Utils.Objects.GetValue;var b_={setButtonsType(e){e===void 0&&(e={});var t=Jd(e,"buttonsType",e.type);if(this.buttonsType=t,!this.buttonsType)return this;var s,f;switch(s=Jd(e,"setValueCallback",void 0),f=Jd(e,"setValueCallbackScope",void 0),s===void 0&&(s=Jd(e,"setButtonStateCallback",void 0),f=Jd(e,"setButtonStateCallbackScope",void 0)),this.setValueCallback=s,this.setValueCallbackScope=f,t){case"radio":this.setRadioType();break;case"checkboxes":this.setCheckboxesType();break}return this},setRadioType(){var e=this.parent,t=this.buttons;e._value=void 0;var s=void 0;return Object.defineProperty(e,"value",{get:function(){return e._value},set:function(f){if(e._value!==f){e._value=f;for(var C=0,w=t.length;C<w;C++){var F=t[C];F.rexSizer.hidden||(s===void 0?F.name===f?F.selected=!0:F.selected=!1:s===C?F.selected=!0:F.selected=!1)}}},enumerable:!0,configurable:!0}),e.on("button.click",function(f){s=this.buttons.indexOf(f),e.value=f.name,s=void 0},this),this},setCheckboxesType(){var e=this.parent;return e.on("button.click",function(t){t.selected=!t.selected}),this},clearAllButtonsState(){for(var e=this.buttons,t=0,s=e.length;t<s;t++){var f=e[t];f.selected=!1}return this},getAllButtonsState(){for(var e={},t=this.buttons,s=0,f=t.length;s<f;s++){var C=t[s];C.rexSizer.hidden||(e[C.name]=C.selected)}return e},setSelectedButtonName(e){return this.parent.value=e,this},getSelectedButtonName(){return this.parent.value},setButtonState(e,t){t===void 0&&(t=!0);for(var s=this.buttons,f=0,C=s.length;f<C;f++){var w=s[f];if(!w.rexSizer.hidden&&w.name===e){w.selected=t;break}}return this},getButtonState(e){for(var t=this.buttons,s=0,f=t.length;s<f;s++){var C=t[s];if(!C.rexSizer.hidden&&C.name===e)return C.selected}}},A_=function(e,t){if(e)if(jn(e)){for(var s,f=0,C=e.length;f<C;f++)if(s=Yb(e[f],t),s)return s}else{var s;for(var w in e)if(s=Yb(e[w],t),s)return s}else return null},Yb=function(e,t){return e?e.hasOwnProperty("name")?e.name===t?e:null:GetElementByName(e,t):null},av={getButton(e){var t=this.buttons,s,f=typeof e;switch(f){case"number":s=t[e];break;case"string":s=A_(t,e);break;default:s=e,t.indexOf(s)===-1&&(s=void 0);break}return s},getButtons(){return this.buttons},hasAnyButton(){return this.buttons.length>0},setButtonEnable(e,t){var s=this.buttons;if(e===void 0||typeof e=="boolean"){t=e;for(var f=0,C=s.length;f<C;f++)s[f]._click.setEnable(t)}else this.getButton(e)._click.setEnable(t);return this},toggleButtonEnable(e){var t=this.buttons;if(e===void 0||typeof e=="boolean")for(var s=0,f=t.length;s<f;s++)t[s]._click.toggleEnable();else this.getButton(e)._click.toggleEnable();return this},getButtonEnable(e){return e===void 0&&(e=0),this.getButton(e)._click.enable},emitButtonClick(e){var t=this.buttonGroup?this.buttonGroup:this;return t.fireEvent("button.click",e),this},emitButtonOver(e){for(var t=this.buttonGroup?this.buttonGroup:this,s=this.buttons,f=0,C=s.length;f<C;f++){var w=s[f];w._click.isOver&&(w._click.isOver=!1,t.fireEvent("button.out",w))}var w=this.getButton(e);return w&&(w._click.isOver=!0,t.fireEvent("button.over",w)),this},showButton(e){return qa(this.getButton(e)),this},hideButton(e){return to(this.getButton(e)),this},isButtonShown(e){return hx(this.getButton(e)),this},forEachButtton(e,t){for(var s=this.buttons,f=0,C=s.length;f<C;f++)t?e.call(t,s[f],f,s):e(s[f],f,s);return this}};class ov{constructor(t){this.parent=t.parent,this.eventEmitter=t.eventEmitter,this.groupName=t.groupName,this.clickConfig=t.clickConfig,this.buttonsType=void 0,this.buttons=[]}destroy(){this.parent=void 0,this.eventEmitter=void 0,this.clickConfig=void 0,this.buttons=void 0}}var R_={fireEvent:w_};Object.assign(ov.prototype,M_,P_,b_,av,R_);var Ay={clearAllButtonsState(){return this.buttonGroup.clearAllButtonsState(),this},getAllButtonsState(){return this.buttonGroup.getAllButtonsState()},setSelectedButtonName(e){return this.buttonGroup.setSelectedButtonName(e),this},getSelectedButtonName(){return this.buttonGroup.getSelectedButtonName()},setButtonState(e,t){return this.buttonGroup.setButtonState(e,t),this},getButtonState(e){return this.buttonGroup.getButtonState(e)}};const fh=Phaser.Utils.Objects.GetValue;let rs=class extends Le{constructor(t,s){s===void 0&&(s={});var f=s.space;typeof f=="number"&&(s.space={item:f}),super(t,s),this.type="rexButtons",this.buttonGroup=new ov({parent:this,eventEmitter:fh(s,"eventEmitter",this),groupName:fh(s,"groupName",void 0),clickConfig:fh(s,"click",void 0)}).setButtonsType(s);var C=fh(s,"background",void 0),w=fh(s,"buttons",void 0);this.buttonsExpand=fh(s,"expand",!1),this.buttonsAlign=fh(s,"align",void 0),C&&this.addBackground(C),w&&this.addButtons(w),this.addChildrenMap("background",C),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}};Object.assign(rs.prototype,g_,S_,av,Ay),c.register("buttons",function(e){var t=new rs(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.Buttons",rs);const L_=nr.prototype.add;var O_={addButton(e,t,s){return L_.call(this,e,t,s,void 0,0,this.buttonsExpand),this.buttonGroup.add(e),this},addButtons(e,t){for(var s=0,f=e;s<f;s++)this.addButton(e[s],void 0,t);return this}};const F_=nr.prototype.remove,D_=nr.prototype.clear;var Ry=function(s,t){var s=this.getButton(s);return s?(this.buttonGroup.remove(s),F_.call(this,s,t),this):this},I_={remove(e,t){if(jn(e))for(var s=e,f=0,C=s.length;f<C;f++)Ry.call(this,s[f],t);else Ry.call(this,e,t);return this},clear(e){var t=this.buttonGroup.buttons;return t.length=0,D_.call(this,e),this},removeButton(e,t){return this.remove(e,t),this},clearButtons(e){for(var t=this.buttonGroup.buttons,s=t.length-1;s>=0;s--)Ry.call(this,t[s],e);return this}};const Br=Phaser.Utils.Objects.GetValue;class hv extends nr{constructor(t,s){s===void 0&&(s={});var f=Br(s,"row",0),C=Br(s,"column",s.col||0),w=Br(s,"createCellContainerCallback"),F=Br(s,"buttons",void 0),N=Br(s,"expand",!0),z=N?1:0;if(w&&(s.createCellContainerCallback=void 0),F!==void 0){f=Math.max(f,F.length);for(var H=0,Z=F.length;H<Z;H++)C=Math.max(C,F[H].length)}s.row=f,s.column=C,s.columnProportions=z,s.rowProportions=z,super(t,s),this.type="rexGridButtons",this.buttonGroup=new ov({parent:this,eventEmitter:Br(s,"eventEmitter",this),groupName:Br(s,"groupName",void 0),clickConfig:Br(s,"click",void 0)}).setButtonsType(s);var tt=Br(s,"background",void 0);if(this.buttonsExpand=N,Br(s,"space",void 0),tt&&this.addBackground(tt),F)for(var nt,st,ht=0,ft=F.length;ht<ft;ht++){nt=F[ht];for(var dt=0,gt=nt.length;dt<gt;dt++)st=nt[dt],st&&this.addButton(st,dt,ht)}else if(w)for(var Et=0;Et<f;Et++)for(var yt=0;yt<C;yt++){var st=w(t,yt,Et);st&&this.addButton(st,yt,Et)}this.addChildrenMap("background",tt),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(hv.prototype,O_,I_,av,Ay),c.register("gridButtons",function(e){var t=new hv(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.GridButtons",hv);const $b=ro.prototype.add;var lv=function(e){return $b.call(this,e),this.buttonGroup.add(e),this},B_={addButton(e){if(jn(e))for(var t=e,s=0,f=t.length;s<f;s++)lv.call(this,t[s]);else lv.call(this,e);return this},addButtons(e){if(jn(e[0]))for(var t=e,s,f=0,C=t.length-1;f<=C;f++){s=t[f];for(var w=0,F=s.length;w<F;w++)lv.call(this,s[w]);f>C&&$b.addNewLine(this)}else for(var w=0,F=e.length;w<F;w++)lv.call(this,e[w]);return this}};const N_=ro.prototype.remove,G_=ro.prototype.clear;var Ly=function(s,t){var s=this.getButton(s);return s?(this.buttonGroup.remove(s),N_.call(this,s,t),this):this},U_={remove(e,t){if(jn(e))for(var s=e,f=0,C=s.length;f<C;f++)Ly.call(this,s[f],t);else Ly.call(this,e,t);return this},clear(e){var t=this.buttonGroup.buttons;return t.length=0,G_.call(this,e),this},removeButton(e,t){return this.remove(e,t),this},clearButtons(e){for(var t=this.buttonGroup.buttons,s=t.length-1;s>=0;s--)Ly.call(this,t[s],e);return this}};const Bl=Phaser.Utils.Objects.GetValue;class ho extends ro{constructor(t,s){s===void 0&&(s={});var f=s.space;typeof f=="number"&&(s.space={item:f,line:f}),super(t,s),this.type="rexFixWidthButtons",this.buttonGroup=new ov({parent:this,eventEmitter:Bl(s,"eventEmitter",this),groupName:Bl(s,"groupName",void 0),clickConfig:Bl(s,"click",void 0)}).setButtonsType(s);var C=Bl(s,"background",void 0),w=Bl(s,"buttons",void 0);this.buttonsAlign=Bl(s,"align",void 0),C&&this.addBackground(C),w&&this.addButtons(w),this.addChildrenMap("background",C),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(ho.prototype,B_,U_,av,Ay),c.register("fixWidthButtons",function(e){var t=new ho(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.FixWidthButtons",ho);var k_={setAccept(e){return this.childrenMap.fileChooser.setAccept(e),this},setMultiple(e){return this.childrenMap.fileChooser.setMultiple(e),this},loadFile(e,t,s,f,C){return this.childrenMap.fileChooser.loadFile(e,t,s,f,C),this},loadFilePromise(e,t,s,f){return this.childrenMap.fileChooser.loadFilePromise(e,t,s,f)}};const _b=Phaser.Utils.Objects.GetValue;class Oy extends ga{constructor(t,s){super(t,s),this.type="rexFileSelectorButton";var f=new Vd(t);t.add.existing(f),this.addBackground(f),this.addChildrenMap("fileChooser",f),this.setAccept(_b(s,"accept","")),this.setMultiple(_b(s,"multiple",!1)),f.on("change",function(C){var w=C.files;w.length!==0&&(w=Array.from(w),this.emit("select",w,this))},this)}get files(){return this.childrenMap.fileChooser.files}}Object.assign(Oy.prototype,k_),c.register("fileSelectorButton",function(e){var t=new Oy(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.FileSelectorButton",Oy);var V_={getChoice(e){var t=this.childrenMap.choicesSizer;if(t)return t.getButton(e)},getAction(e){return this.childrenMap.actionsSizer.getButton(e)},getToolbar(e){return this.childrenMap.toolbarSizer.getButton(e)},getLeftToolbar(e){return this.childrenMap.leftToolbarSizer.getButton(e)},setChoiceEnable(e,t){var s=this.childrenMap.choicesSizer;return s&&s.setButtonEnable(e,t),this},setActionEnable(e,t){return this.childrenMap.actionsSizer.setButtonEnable(e,t),this},setToolbarEnable(e,t){return this.childrenMap.toolbarSizer.setButtonEnable(e,t),this},setLeftToolbarEnable(e,t){return this.childrenMap.leftToolbarSizer.setButtonEnable(e,t),this},toggleChoiceEnable(e){var t=this.childrenMap.choicesSizer;return t&&t.toggleButtonEnable(e),this},toggleActionEnable(e){return this.childrenMap.actionsSizer.toggleButtonEnable(e),this},toggleToolbarEnable(e){return this.childrenMap.toolbarSizer.toggleButtonEnable(e),this},toggleLeftToolbarEnable(e){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(e),this},getChoiceEnable(e){var t=this.childrenMap.choicesSizer;return t?t.getButtonEnable(e):!1},getActionEnable(e){return this.childrenMap.actionsSizer.getButtonEnable(e)},getToolbarEnable(e){return this.childrenMap.toolbarSizer.getButtonEnable(e)},getLeftToolbarEnable(e){return this.childrenMap.leftToolbarSizer.getButtonEnable(e)},emitChoiceClick(e){var t=this.childrenMap.choicesSizer;return t&&t.emitButtonClick(e),this},emitActionClick(e){return this.childrenMap.actionsSizer.emitButtonClick(e),this},emitToolbarClick(e){return this.childrenMap.toolbarSizer.emitButtonClick(e),this},emitLeftToolbarClick(e){return this.childrenMap.leftToolbarSizer.emitButtonClick(e),this},showChoice(e){var t=this.childrenMap.choicesSizer;return t&&t.showButton(e),this},showAction(e){return this.childrenMap.actionsSizer.showButton(e),this},showToolbar(e){return this.childrenMap.toolbarSizer.showButton(e),this},showLeftToolbar(e){return this.childrenMap.leftToolbarSizer.showButton(e),this},hideChoice(e){var t=this.childrenMap.choicesSizer;return t&&t.hideButton(e),this},hideAction(e){return this.childrenMap.actionsSizer.hideButton(e),this},hideToolbar(e){return this.childrenMap.toolbarSizer.hideButton(e),this},hideLeftToolbar(e){return this.childrenMap.leftToolbarSizer.hideButton(e),this},addChoice(e){var t=this.childrenMap.choicesSizer;return t&&t.addButton(e),this},addAction(e){return this.childrenMap.actionsSizer.addButton(e),this},addToolbar(e){return this.childrenMap.toolbarSizer.addButton(e),this},addLeftToolbar(e){return this.childrenMap.leftToolbarSizer.addButton(e),this},removeChoice(e,t){var s=this.childrenMap.choicesSizer;return s&&s.removeButton(e,t),this},removeAction(e,t){return this.childrenMap.actionsSizer.removeButton(e,t),this},removeToolbar(e,t){return this.childrenMap.toolbarSizer.removeButton(e,t),this},removeLeftToolbar(e,t){return this.childrenMap.leftToolbarSizer.removeButton(e,t),this},clearChoices(e){var t=this.childrenMap.choicesSizer;return t&&t.clearButtons(e),this},clearActions(e){return this.childrenMap.actionsSizer.clearButtons(e),this},clearToolbar(e){return this.childrenMap.toolbarSizer.clearButtons(e),this},clearLeftToolbar(e){return this.childrenMap.leftToolbarSizer.clearButtons(e),this},forEachChoice(e,t){var s=this.childrenMap.choicesSizer;return s&&s.forEachButtton(e,t),this},forEachAction(e,t){return this.childrenMap.actionsSizer.forEachButtton(e,t),this},forEachToolbar(e,t){return this.childrenMap.toolbarSizer.forEachButtton(e,t),this},forEachLeftToolbar(e,t){return this.childrenMap.leftToolbarSizer.forEachButtton(e,t),this},setAllButtonsEnable(e){return e===void 0&&(e=!0),this.childrenMap.toolbarSizer&&this.setToolbarEnable(e),this.childrenMap.leftToolbarSizer&&this.setLeftToolbarEnable(e),this.childrenMap.actionsSizer&&this.setActionEnable(e),this.childrenMap.choicesSizer&&this.setChoiceEnable(e),this},getChoicesButtonStates(){var e=this.childrenMap.choicesSizer;return e?e.getAllButtonsState():{}},getChoicesButtonState(e){var t=this.childrenMap.choicesSizer;return e===void 0?t?t.getAllButtonsState():{}:t?t.getButtonState(e):!1},setChoicesButtonState(e,t){var s=this.childrenMap.choicesSizer;return s&&s.setButtonState(e,t),this},clearChoicesButtonStates(){var e=this.childrenMap.choicesSizer;return e&&e.clearAllButtonsState(),this},getChoicesSelectedButtonName(){var e=this.childrenMap.choicesSizer;return e?e.getSelectedButtonName():""},setChoicesSelectedButtonName(e){var t=this.childrenMap.choicesSizer;return t&&t.setSelectedButtonName(e),this},hasAnyChoice(){var e=this.childrenMap.choicesSizer;return e?e.hasAnyButton():!1},hasAnyAction(){var e=this.childrenMap.actionsSizer;return e?e.hasAnyButton():!1},hasAnyToolbar(){var e=this.childrenMap.toolbarSizer;return e?e.hasAnyButton():!1},hasAnyLeftToolbar(){var e=this.childrenMap.leftToolbarSizer;return e?e.hasAnyButton():!1}},z_={onCreateModalBehavior(e){e.on("button.click",function(t,s,f,C,w){var F=!1;switch(s){case"actions":F=!0;break;case"choices":e.hasAnyAction()||(F=!0);break}if(F){var N={index:f,text:t.text,button:t,dialog:e};switch(e.buttonsType){case"radio":N.value=e.getChoicesSelectedButtonName();break;case"checkboxes":N.value=e.getChoicesButtonStates();break;default:N.value=void 0}e.modalClose(N)}})},modal(e,t){return e&&e.defaultBehavior===!1?this.onCreateModalBehavior=!1:delete this.onCreateModalBehavior,gp.modal.call(this,e,t),this}},Zb={};Object.assign(Zb,V_,z_);const de=Phaser.Utils.Objects.GetValue;class Qd extends Le{constructor(t,s){s===void 0&&(s={}),s.orientation=1,super(t,s),this.type="rexDialog",this.eventEmitter=de(s,"eventEmitter",this);var f=de(s,"background",void 0),C=de(s,"title",void 0),w=de(s,"toolbar",void 0),F=de(s,"toolbarBackground",void 0),N=de(s,"leftToolbar",void 0),z=de(s,"leftToolbarBackground",void 0),H=de(s,"content",void 0),Z=de(s,"description",void 0),tt,nt=de(s,"choices",void 0),st=de(s,"choicesBackground",void 0),ht,ft=de(s,"actions",void 0),dt=de(s,"actionsBackground",void 0),gt=de(s,"click",void 0);f&&this.addBackground(f);var Et;w&&(Et=new rs(t,{groupName:"toolbar",background:F,buttons:w,orientation:0,space:{item:de(s,"space.toolbarItem",0)},click:gt,eventEmitter:this.eventEmitter}),t.add.existing(Et));var yt;if(N&&(yt=new rs(t,{groupName:"leftToolbar",background:z,buttons:N,orientation:0,space:{item:de(s,"space.leftToolbarItem",0)},click:gt,eventEmitter:this.eventEmitter}),t.add.existing(yt)),C||w||N){var Dt=!!C&&de(s,"expand.title",!0),Wt=de(s,"align.title","center"),qt=C&&!Dt&&Wt==="center"||!C&&(w||N),re=!qt,ce;re?ce=new Le(t,{orientation:0}):ce=new Rn(t),t.add.existing(ce);var fe=re?!0:{height:!0};if(yt&&ce.add(yt,{align:"left",expand:fe}),C){re&&!Dt&&Wt==="right"&&ce.addSpace();var ye={left:de(s,"space.titleLeft",0),right:de(s,"space.titleRight",0)},ge=Dt?1:0;ce.add(C,{align:Wt,proportion:ge,expand:fe,padding:ye}),re&&!Dt&&Wt==="left"&&ce.addSpace()}Et&&(re&&!C&&ce.addSpace(),ce.add(Et,{align:"right",expand:fe}));var ye;(H||Z||nt||ft)&&(ye={bottom:de(s,"space.title",0),top:de(s,"space.titleTop",0)});var ge=de(s,"proportion.title",0);this.add(ce,{padding:ye,proportion:ge,expand:!0})}if(H){var Ue=de(s,"align.content","center"),ze=de(s,"space.content",0),ye={left:de(s,"space.contentLeft",0),right:de(s,"space.contentRight",0),bottom:Z||nt||ft?ze:0},ge=de(s,"proportion.content",0),me=de(s,"expand.content",!0);this.add(H,{align:Ue,padding:ye,proportion:ge,expand:me})}if(Z){var Ue=de(s,"align.description","center"),li=de(s,"space.description",0),ye={left:de(s,"space.descriptionLeft",0),right:de(s,"space.descriptionRight",0),bottom:nt||ft?li:0},ge=de(s,"proportion.description",0),me=de(s,"expand.description",!0);this.add(Z,{align:Ue,padding:ye,proportion:ge,expand:me})}if(nt){var mi=de(s,"choicesType","").split("-"),wi=jd(mi,"wrap")?ho:jd(mi,"grid")?hv:rs,qi=jd(mi,"radio")?"radio":jd(mi,"checkboxes")?"checkboxes":void 0,Hi={left:de(s,"space.choicesBackgroundLeft",0),right:de(s,"space.choicesBackgroundRight",0),top:de(s,"space.choicesBackgroundTop",0),bottom:de(s,"space.choicesBackgroundBottom",0)},Us=de(s,"space.choice",0);wi===rs?Hi.item=Us:wi===ho?(Hi.item=Us,Hi.line=de(s,"space.choiceLine",Us)):(Hi.column=de(s,"space.choiceColumn",Us),Hi.row=de(s,"space.choiceRow",Us));var Nn={width:de(s,"choicesWidth",void 0),height:de(s,"choicesHeight",void 0),groupName:"choices",buttonsType:qi,background:st,buttons:nt,space:Hi,click:gt,eventEmitter:this.eventEmitter,setValueCallback:de(s,"choicesSetValueCallback",void 0),setValueCallbackScope:de(s,"choicesSetValueCallbackScope",void 0)};wi===rs&&(Nn.orientation=jd(mi,"x")?0:1),tt=new wi(t,Nn),t.add.existing(tt);var Gn=de(s,"space.choices",0),ye={left:de(s,"space.choicesLeft",0),right:de(s,"space.choicesRight",0),bottom:ft?Gn:0},Ue=de(s,"align.choices","center"),ge=de(s,"proportion.choices",0),me=de(s,"expand.choices",!0);this.add(tt,{align:Ue,padding:ye,proportion:ge,expand:me}),this.buttonsType=qi}if(ft){ht=new rs(t,{groupName:"actions",background:dt,buttons:ft,orientation:0,space:{item:de(s,"space.action",0)},expand:de(s,"expand.actions",!1),align:de(s,"align.actions","center"),click:gt,eventEmitter:this.eventEmitter}),t.add.existing(ht);var ye={left:de(s,"space.actionsLeft",0),right:de(s,"space.actionsRight",0),bottom:de(s,"space.actionsBottom",0)},ge=de(s,"proportion.action",0);this.add(ht,{align:"center",padding:ye,proportion:ge,expand:!0})}qd(this,"click"),qd(this,"over"),qd(this,"out"),qd(this,"enable"),qd(this,"disable"),this.addChildrenMap("background",f),this.addChildrenMap("title",C),this.addChildrenMap("toolbar",w),this.addChildrenMap("leftToolbar",N),this.addChildrenMap("content",H),this.addChildrenMap("description",Z),this.addChildrenMap("choices",tt?tt.buttons:void 0),this.addChildrenMap("actions",ht?ht.buttons:void 0),this.addChildrenMap("choicesSizer",tt),this.addChildrenMap("actionsSizer",ht),this.addChildrenMap("toolbarSizer",Et),this.addChildrenMap("leftToolbarSizer",yt)}}var jd=function(e,t){return e.indexOf(t)!==-1},Kb={actions:"action",choices:"choice",toolbar:"toolbar",leftToolbar:"leftToolbar"},qd=function(e,t){e.on(`button.${t}`,function(s,f,C,w,F){Kb.hasOwnProperty(f)&&e.emit(`${Kb[f]}.${t}`,s,C,w,F)})};Object.assign(Qd.prototype,Zb),c.register("dialog",function(e){var t=new Qd(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.Dialog",Qd);var as=function(e,t,s){var f=new Kd(e,t,s);return e.add.existing(f),f},W_=function(e){return e===void 0&&(e={}),X_.call(this,e),H_.call(this,e),Y_.call(this,e),$_.call(this,e),this},X_=function(e){var t=this.childrenMap.title;e=e.title,e===null?t.hide():(t.show(),t.resetDisplayContent(e))},H_=function(e){var t=this.childrenMap.content;if(e=e.content,e===null)t.hide();else if(t.show(),t.resetDisplayContent)t.resetDisplayContent(e);else{var s=e||"";t.setText(s)}},Y_=function(e){var t=this.childrenMap.actions;if(t){var s=e.buttons;if(s){for(var w=this.scene,F=this.defaultActionConfig,N=this.defaultActionButtonCreator,z=0,H=s.length;z<H;z++){var Z=s[z],tt=t[z];tt||(tt=as(w,F,N),this.addAction(tt)),tt.show().resetDisplayContent(Z)}this.buttonMode=s.length;for(var z=s.length,H=t.length;z<H;z++)t[z].hide()}else{var f=t[0];f&&(e.buttonA===null?f.hide():(f.show(),f.resetDisplayContent(e.buttonA)));var C=t[1];C&&(e.buttonB===null?C.hide():(C.show(),C.resetDisplayContent(e.buttonB)))}}},$_=function(e){var t=this.childrenMap.choices;if(t){var s=e.choices;s||(s=[]);for(var f=this.scene,C=this.defaultChoiceConfig,w=this.defaultActionButtonCreator,F=0,N=s.length;F<N;F++){var z=s[F];typeof z=="string"&&(z={text:z});var H=t[F];H||(H=as(f,C,w),this.addChoice(H)),H.show().resetDisplayContent(z);var Z;z.hasOwnProperty("value")?Z=z.value:Z=z.text,H.setName(Z)}for(var F=s.length,N=t.length;F<N;F++)t[F].hide()}};const __=Phaser.Utils.Objects.Merge;var Z_=function(e,t){Qn(e)&&(t=e,e=void 0),e===void 0&&(e={}),e=__(e,this.modalStyle);var s;this.buttonMode===0?this.hasAnyChoice()?s=!1:s=!0:s=!1,e.hasOwnProperty("anyTouchClose")||(e.anyTouchClose=s),e.hasOwnProperty("manualClose")||(e.manualClose=!s);var f=this,C=function(w){var F=w.index;F===f.confirmButtonIndex?f.emit("confirm",w):F===f.cancelButtonIndex&&f.emit("cancel",w),t&&t(w)};return gp.modal.call(this,e,C),this},K_={setConfirmButtonIndex(e){return this.confirmButtonIndex=e,this},setCancelButtonIndex(e){return this.cancelButtonIndex=e,this}},Jb={resetDisplayContent:W_,modal:Z_};Object.assign(Jb,K_);var J_=function(e){e.setHoverState&&e.setHoverState(!0)},Q_=function(e){e.setHoverState&&e.setHoverState(!1)},j_=function(e,t,s,f){e.setActiveState&&e.setActiveState(f)},q_=function(e){e.setDisableState&&e.setDisableState(!1)},tZ=function(e){e.setDisableState&&e.setDisableState(!0)},Qb=function(){this.on("button.over",J_).on("button.out",Q_).on("button.enable",q_).on("button.disable",tZ).on("button.statechange",j_)};const eZ=Phaser.Utils.Objects.GetValue;var iZ=function(e,t,s){var f=eZ(t,"$type");f===void 0&&t&&(t.hasOwnProperty("slider")||t.hasOwnProperty("scroller"))&&(f="textarea");var C;switch(f){case"textarea":C=new Gb(e,t,s);break;default:C=new as(e,t,s);break}return e.add.existing(C),C};const Fy=Phaser.Utils.Objects.GetValue;class uv extends Qd{constructor(t,s,f){s=s?I(s):{},f===void 0&&(f={});var C=Fy(f,"background",ji);s.background=C(t,s.background),s.title=as(t,s.title,f.title),s.content=iZ(t,s.content,f.content),s.content instanceof Zd&&ra(s,"height")&&!ra(s,"proportion.content")&&j(s,"proportion.content",1);var w=s.button,F=s.buttonA||w,N=s.buttonB||w,z=s.buttonMode;z===void 0&&(z=F&&N?2:F?1:0);var H=f.button,Z=f.buttonA||H,tt=f.buttonB||H;switch(z){case 2:s.actions=[as(t,F,Z),as(t,N,tt)];break;case 1:s.actions=[as(t,F,Z)];break;case 0:break;default:s.actions=[];break}var nt=s.choice;nt&&(s.choices=[]),super(t,s),this.type="rexConfirmDialog",this.buttonMode=z,this.defaultActionConfig=w,this.defaultActionButtonCreator=H,this.defaultChoiceConfig=nt,this.defaultChoiceCreator=f.choice;var st=this.childrenMap.actions;this.addChildrenMap("buttonA",st?st[0]:null),this.addChildrenMap("buttonB",st?st[1]:null),Qb.call(this),this.setConfirmButtonIndex(Fy(s,"confirmButtonIndex",0)),this.setCancelButtonIndex(Fy(s,"cancelButtonIndex",1)),this.modalStyle=s.modal||{}}}Object.assign(uv.prototype,Jb),c.register("confirmDialog",function(e,t){var s=new uv(this.scene,e,t);return this.scene.add.existing(s),s}),j(window,"RexPlugins.UI.ConfirmDialog",uv);const jb=Phaser.Utils.Objects.GetValue;var qb=function(e,t){var s=t.dialog,f=!s;if(f){var C=t.style;C.buttonMode=2,s=new uv(e,C,t.creators),e.add.existing(s)}s.setConfirmButtonIndex(jb(t,"confirmButtonIndex",0)).setCancelButtonIndex(jb(t,"cancelButtonIndex",1)).resetDisplayContent(t.content).layout(),f&&t.onCreateDialog&&t.onCreateDialog(s);var w=t.modal;w&&!w.hasOwnProperty("destroy")&&(w.destroy=f);var F=t.confirm,N=t.cancel,z=t.confirmScope,H=t.cancelScope;F&&s.once("confirm",F,z),N&&s.once("cancel",N,H);var Z=function(tt){s.off("confirm",F,z),s.off("cancel",N,H)};return s.modal(w,Z),s};class tA extends ga{constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexConfirmActionButton",this.setConfirmDialogEnable(),this.confirmActionConfig=Zn(s.confirmDialog||{}),s.confirm&&this.setConfirmCallback(s.confirm,s.confirmScope),s.cancel&&this.setCancelCallback(s.cancel,s.cancelScope),this.onClickCallback=function(){if(this.confirmDialogEnable){if(this.confirmDialog)return;this.confirmDialog=qb(t,this.confirmActionConfig),this.confirmDialog.once("destroy",function(){this.confirmDialog=void 0},this)}else this.runConfirmCallback()},this.onClick(this.onClickCallback,this)}destroy(t){!this.scene||this.ignoreDestroy||(this.confirmDialog&&this.confirmDialog.destroy(),super.destroy(t),this.confirmActionConfig=void 0,this.onClickCallback=void 0,this.confirmDialog=void 0)}setConfirmCallback(t,s){return this.confirmActionConfig.confirm=t,this.confirmActionConfig.confirmScope=s,this}setCancelCallback(t,s){return this.confirmActionConfig.cancel=t,this.confirmActionConfig.cancelScope=s,this}setConfirmDialogContent(t){return this.confirmActionConfig.content=t,this}setConfitmDialogStyle(t){return this.confirmActionConfig.style=t,this}setConfitmDialogModalConfig(t){return this.confirmActionConfig.modal=t,this}setConfirmDialogEnable(t){return t===void 0&&(t=!0),this.confirmDialogEnable=t,this}runConfirmCallback(){var t=this.confirmActionConfig.confirm,s=this.confirmActionConfig.confirmScope;return t&&t.call(s),this}}c.register("confirmActionButton",function(e){var t=new tA(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.ConfirmActionButton",tA);var sZ=function(e){return e===void 0&&(e={}),nZ.call(this,e),rZ.call(this,e),aZ.call(this,e),this},nZ=function(e){var t=this.childrenMap.title;e.title===null?this.hide(t):(this.show(t),t.resetDisplayContent(e.title))},rZ=function(e){var t=this.childrenMap.firstNameTitle;if(e.firstNameTitle===null)this.hide(t);else{this.show(t);var s=e.firstNameTitle||"";t.resetDisplayContent(s)}var f=this.childrenMap.firstNameInput;if(e.firstName===null)this.hide(f);else{this.show(f);var C=e.firstName||"";f.setText(C)}var w=this.childrenMap.lastNameTitle;if(e.lastNameTitle===null)this.hide(w);else{this.show(w);var F=e.lastNameTitle||"";w.resetDisplayContent(F)}var N=this.childrenMap.lastNameInput;if(e.lastName===null)this.hide(N);else{this.show(N);var z=e.lastName||"";N.setText(z)}},aZ=function(e){var t=this.childrenMap.actions[0];e.button===null?this.hide(t):(this.show(t),t.resetDisplayContent(e.button))};const oZ=Phaser.Utils.Objects.Merge;var hZ=function(e,t){Qn(e)&&(t=e,e=void 0),e===void 0&&(e={}),e=oZ(e,this.modalStyle),e.anyTouchClose=!1,e.manualClose=!1;var s=this,f=function(C){C.firstName=s.firstName,C.lastName=s.lastName,s.emit("confirm",C),t&&t(C)};return gp.modal.call(this,e,f),this},lZ={resetDisplayContent:sZ,modal:hZ},lo=function(e,t,s){s===void 0&&(s=!0),s?t=t?I(t):{}:t||(t={});var f=new cd(e,t);return e.add.existing(f),f};const Fn=Phaser.Utils.Objects.GetValue;var uZ=function(e,t,s){var f=qo(Fn(t,"layoutMode",0)),C=f===0,w=new Le(e,{orientation:f,space:{item:Fn(t,"space.firstName",0)}});e.add.existing(w);var F=new Le(e,{orientation:"x"});e.add.existing(F);var N=Fn(t,"firstNameTitle",t.nameTitle),z=as(e,N,s.firstNameTitle||s.nameTitle);F.add(z,{expand:!0,proportion:Fn(t,"proportion.firstNameTitle",0),padding:{right:Fn(t,"space.firstNameTitle",0)}});var H=t.nameInput||{},Z=Fn(t,"firstNameInput",H),tt=lo(e,Z,s.firstNameInput||s.nameInput),nt=!Z.hasOwnProperty("width");F.add(tt,{expand:!0,proportion:nt?1:0});var st=new Le(e,{orientation:"x"});e.add.existing(st);var ht=Fn(t,"lastNameTitle",t.nameTitle),ft=as(e,ht,s.lastNameTitle||s.nameTitle);st.add(ft,{expand:!0,proportion:Fn(t,"proportion.lastNameTitle",0),padding:{right:Fn(t,"space.lastNameTitle",0)}});var dt=Fn(t,"firstNameInput",H),gt=lo(e,dt,s.lastNameInput||s.nameInput),Et=!dt.hasOwnProperty("width");if(st.add(gt,{expand:!0,proportion:Et?1:0}),C){var yt=nt?1:0,Dt=Fn(t,"proportion.firstName",yt);w.add(F,{expand:!0,proportion:Dt});var Wt=Et?1:0,qt=Fn(t,"proportion.lastName",Wt);w.add(st,{expand:!0,proportion:qt})}else w.add(F,{expand:nt,proportion:0}),w.add(st,{expand:Et,proportion:0});return w.addChildrenMap("firstNameTitle",z),w.addChildrenMap("firstNameInput",tt),w.addChildrenMap("lastNameTitle",ft),w.addChildrenMap("lastNameInput",gt),w};const dZ=Phaser.Utils.Objects.GetValue;class Dy extends Qd{constructor(t,s,f){s===void 0&&(s={}),f===void 0&&(f={}),s.orientation="y";var C=s.space;C&&(C.hasOwnProperty("names")&&(C.content=C.names),C.hasOwnProperty("namesLeft")&&(C.contentLeft=C.namesLeft),C.hasOwnProperty("namesRight")&&(C.contentRight=C.namesRight));var w=dZ(f,"background",ji);s.background=w(t,s.background),s.title=as(t,s.title,f.title),s.content=uZ(t,s,f),s.actions=[as(t,s.button,f.button)],super(t,s),this.type="rexNameInputDialog";var F=s.content.childrenMap;this.addChildrenMap("firstNameTitle",F.firstNameTitle),this.addChildrenMap("firstNameInput",F.firstNameInput),this.addChildrenMap("lastNameTitle",F.lastNameTitle),this.addChildrenMap("lastNameInput",F.lastNameInput),this.addChildrenMap("button",s.actions[0]),Qb.call(this),this.modalStyle=s.modal||{}}get firstName(){return this.childrenMap.firstNameInput.text}set firstName(t){this.childrenMap.firstNameInput.setText(t)}setFirstName(t){return this.firstName=t,this}get lastName(){return this.childrenMap.lastNameInput.text}set lastName(t){this.childrenMap.lastNameInput.setText(t)}setLastName(t){return this.lastName=t,this}}Object.assign(Dy.prototype,lZ),c.register("nameInputDialog",function(e,t){var s=new Dy(this.scene,e,t);return this.scene.add.existing(s),s}),j(window,"RexPlugins.UI.NameInputDialog",Dy);var ch=function(e,t){if(e){var s=un(e);s&&s.remove(e,t)}};const dv=Phaser.Utils.Objects.GetValue;var tf=function(e,t,s){var f=dv(e,`proportion.${t}`,s.proportion),C=dv(e,`align.${t}`,"center"),w=dv(e,`space.${t}`,void 0);if(typeof w=="number"&&s.paddingKey){var F=w;w={},w[s.paddingKey]=F}var N=dv(e,`expand.${t}`,!0);return{proportion:f,align:C,padding:w,expand:N}},fv=function(e){return tf(e,"header",{proportion:0,paddingKey:"bottom"})},cv=function(e){return tf(e,"leftSide",{proportion:0,paddingKey:"right"})},pv=function(e){return tf(e,"content",{proportion:1})},vv=function(e){return tf(e,"rightSide",{proportion:0,paddingKey:"left"})},mv=function(e){return tf(e,"footer",{proportion:0,paddingKey:"top"})},xa=function(e){return{proportion:1,align:"center",padding:0,expand:!0}},ya=function(e,t){var s=new Le(e,{orientation:t});return e.add.existing(s),s},fZ=function(e){var t=this.scene,s=e.header;s&&this.add(s,fv(e));var f=ya(t,0);this.add(f,xa());var C=e.leftSide;C&&f.add(C,cv(e));var w=e.content;w&&f.add(w,pv(e));var F=e.rightSide;F&&f.add(F,vv(e));var N=e.footer;N&&this.add(N,mv(e))},cZ=function(e){var t=this.scene,s=e.header;s&&this.add(s,fv(e));var f=ya(t,0);this.add(f,xa());var C=e.leftSide;C&&f.add(C,cv(e));var w=ya(t,1);f.add(w,xa());var F=ya(t,0);w.add(F,xa());var N=e.content;N&&F.add(N,pv(e));var z=e.rightSide;z&&F.add(z,vv(e));var H=e.footer;H&&w.add(H,mv(e))},pZ=function(e){var t=this.scene,s=e.header;s&&this.add(s,fv(e));var f=ya(t,0);this.add(f,xa());var C=ya(t,1);f.add(C,xa());var w=ya(t,0);C.add(w,xa());var F=e.leftSide;F&&w.add(F,cv(e));var N=e.content;N&&w.add(N,pv(e));var z=e.footer;z&&C.add(z,mv(e));var H=e.rightSide;H&&f.add(H,vv(e))},vZ=function(e){var t=this.scene,s=e.header;s&&this.add(s,fv(e));var f=ya(t,0);this.add(f,xa());var C=e.leftSide;C&&f.add(C,cv(e));var w=ya(t,1);f.add(w,xa());var F=e.content;F&&w.add(F,pv(e));var N=e.footer;N&&w.add(N,mv(e));var z=e.rightSide;z&&f.add(z,vv(e))};const mZ=Phaser.Utils.Objects.GetValue,eA=[fZ,cZ,pZ,vZ];var gZ=function(e){e===void 0&&(e={});var t=e.background,s=e.header,f=e.leftSide,C=e.content,w=e.rightSide,F=e.footer;ch(t),ch(s),ch(f),ch(C),ch(w),ch(F),this.clear(!0),t&&this.addBackground(t);var N=mZ(e,"layoutMode",0);typeof N=="string"&&(N=xZ[N.toUpperCase()]);var z=eA[N]||eA[0];return z.call(this,e),this.addChildrenMap("background",t),this.addChildrenMap("header",s),this.addChildrenMap("leftSide",f),this.addChildrenMap("content",C),this.addChildrenMap("rightSide",w),this.addChildrenMap("footer",F),this};const xZ={FFF:0,LFF:1,FFR:2,LFR:3};class Iy extends Le{constructor(t,s){s===void 0&&(s={}),s.orientation=1,super(t,s),this.type="rexHolyGrail",this.build(s)}}var yZ={build:gZ};Object.assign(Iy.prototype,yZ),c.register("holyGrail",function(e){var t=new Iy(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.HolyGrail",Iy);var SZ={getButtonsSizer(e){return this.childrenMap[`${e}ButtonsSizer`]},getButton(e,t){var s=this.getButtonsSizer(e);return s?s.getButton(t):void 0},setButtonEnable(e,t,s){return this.getButtonsSizer(e).setButtonEnable(t,s),this},setLeftButtonEnable(e,t){return this.childrenMap.leftButtonsSizer.setButtonEnable(e,t),this},setRightButtonEnable(e,t){return this.childrenMap.rightButtonsSizer.setButtonEnable(e,t),this},setTopButtonEnable(e,t){return this.childrenMap.topButtonsSizer.setButtonEnable(e,t),this},setBottomButtonEnable(e,t){return this.childrenMap.bottomButtonsSizer.setButtonEnable(e,t),this},toggleButtonEnable(e,t){return this.getButtonsSizer(e).toggleButtonEnable(t),this},toggleLeftButtonEnable(e){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(e),this},toggleRightButtonEnable(e){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(e),this},toggleTopButtonEnable(e){return this.childrenMap.topButtonsSizer.toggleButtonEnable(e),this},toggleBottomButtonEnable(e){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(e),this},getButtonEnable(e,t){return this.getButtonsSizer(e).getButtonEnable(t)},getLeftButtonEnable(e){return this.childrenMap.leftButtonsSizer.getButtonEnable(e)},getRightButtonEnable(e){return this.childrenMap.rightButtonsSizer.getButtonEnable(e)},getTopButtonEnable(e){return this.childrenMap.topButtonsSizer.getButtonEnable(e)},getBottomButtonEnable(e){return this.childrenMap.bottomButtonsSizer.getButtonEnable(e)},emitButtonClick(e,t){var s=this.getButtonsSizer(e);return s?(s.emitButtonClick(t),this):this},emitLeftButtonClick(e){return this.childrenMap.leftButtonsSizer.emitButtonClick(e),this},emitRightButtonClick(e){return this.childrenMap.rightButtonsSizer.emitButtonClick(e),this},emitTopButtonClick(e){return this.childrenMap.topButtonsSizer.emitButtonClick(e),this},emitBottomButtonClick(e){return this.childrenMap.bottomButtonsSizer.emitButtonClick(e),this},getLeftButton(e){return this.childrenMap.leftButtonsSizer.getButton(e)},getRightButton(e){return this.childrenMap.rightButtonsSizer.getButton(e)},getTopButton(e){return this.childrenMap.topButtonsSizer.getButton(e)},getBottomButton(e){return this.childrenMap.bottomButtonsSizer.getButton(e)},showButton(e,t){return qa(this.getButton(e,t)),this},showLeftButton(e){return qa(this.getLeftButton(e)),this},showRightButton(e){return qa(this.getRightButton(e)),this},showTopButton(e){return qa(this.getTopButton(e)),this},showBottomButton(e){return qa(this.getBottomButton(e)),this},hideButton(e,t){return to(this.getButton(e,t)),this},hideLeftButton(e){return to(this.getLeftButton(e)),this},hideRightButton(e){return to(this.getRightButton(e)),this},hideTopButton(e){return to(this.getTopButton(e)),this},hideBottomButton(e){return to(this.getBottomButton(e)),this},addButton(e,t){return this.getButtonsSizer(e).addButton(t),this},addLeftButton(e){return this.addButton("left",e),this},addRightButton(e){return this.addButton("right",e),this},addTopButton(e){return this.addButton("top",e),this},removeButton(e,t,s){return this.getButtonsSizer(e).removeButton(t,s),this},removeLeftButton(e,t){return this.removeButton("left",e,t),this},removeRightButton(e,t){return this.removeButton("right",e,t),this},removeTopButton(e,t){return this.removeButton("top",e,t),this},removeBottomButton(e,t){return this.removeButton("bottom",e,t),this},clearButtons(e,t){return this.getButtonsSizer(e).clearButtons(t),this},clearLeftButtons(e){return this.clearButtons("left",e),this},clearRightButtons(e){return this.clearButtons("right",e),this},clearTopButtons(e){return this.clearButtons("top",e),this},clearBottomButtonss(e){return this.clearButtons("bottom",e),this},forEachButton(e,t,s){return this.getButtonsSizer(e).forEachButtton(t,s),this},forEachLeftButton(e,t){return this.childrenMap.leftButtonsSizer.forEachButtton(e,t),this},forEachRightButton(e,t){return this.childrenMap.rightButtonsSizer.forEachButtton(e,t),this},forEachTopButton(e,t){return this.childrenMap.topButtonsSizer.forEachButtton(e,t),this},forEachBottomButton(e,t){return this.childrenMap.bottomButtonsSizer.forEachButtton(e,t),this}};const Qe=Phaser.Utils.Objects.GetValue;class By extends nr{constructor(t,s){s===void 0&&(s={}),s.column=3,s.row=3,s.columnProportions=[0,0,0],s.rowProportions=[0,0,0];var f=Qe(s,"expand.panel",!1);f&&(s.columnProportions[1]=1,s.rowProportions[1]=1),super(t,s),this.type="rexTabs",this.eventEmitter=Qe(s,"eventEmitter",this);var C=Qe(s,"background",void 0),w=Qe(s,"panel",void 0),F=Qe(s,"leftButtons",void 0),N=Qe(s,"leftButtonsBackground",void 0),z,H=Qe(s,"rightButtons",void 0),Z=Qe(s,"rightButtonsBackground",void 0),tt,nt=Qe(s,"topButtons",void 0),st=Qe(s,"topButtonsBackground",void 0),ht,ft=Qe(s,"bottomButtons",void 0),dt=Qe(s,"bottomButtonsBackground",void 0),gt,Et=Qe(s,"click",void 0);if(C&&this.addBackground(C),w&&this.add(w,{column:1,row:1,expand:f}),F){var yt=Qe(s,"space.leftButtonsOffset",0),Dt=Qe(s,"space.leftButton",0),Wt=Qe(s,"expand.leftButtons",!1),qt=Qe(s,"align.leftButtons","top");z=new rs(t,{groupName:"left",background:N,buttons:F,orientation:"y",space:{item:Dt},expand:Wt,click:Et,eventEmitter:this.eventEmitter}),this.add(z,{column:0,row:1,align:qt,padding:{top:yt},expand:Wt})}if(H){var re=Qe(s,"space.rightButtonsOffset",0),ce=Qe(s,"space.rightButton",0),fe=Qe(s,"expand.rightButtons",!1),ye=Qe(s,"align.rightButtons","top");tt=new rs(t,{groupName:"right",background:Z,buttons:H,orientation:"y",space:{item:ce},expand:fe,click:Et,eventEmitter:this.eventEmitter}),this.add(tt,{column:2,row:1,align:ye,padding:{top:re},expand:fe})}if(nt){var ge=Qe(s,"space.topButtonsOffset",0),Ue=Qe(s,"space.topButton",0),ze=Qe(s,"expand.topButtons",!1),me=Qe(s,"align.topButtons","left");ht=new rs(t,{groupName:"top",background:st,buttons:nt,orientation:"x",space:{item:Ue},expand:ze,align:Qe(s,"align.topButtons",void 0),click:Et,eventEmitter:this.eventEmitter}),this.add(ht,{column:1,row:0,align:me,padding:{left:ge},expand:ze})}if(ft){var li=Qe(s,"space.bottomButtonsOffset",0),mi=Qe(s,"space.bottomButton",0),wi=Qe(s,"expand.bottomButtons",!1),qi=Qe(s,"align.bottomButtons","left");gt=new rs(t,{groupName:"bottom",background:dt,buttons:ft,orientation:"x",space:{item:mi},expand:wi,align:Qe(s,"align.bottomButtons",void 0),click:Et,eventEmitter:this.eventEmitter}),this.add(gt,{column:1,row:2,align:qi,padding:{left:li},expand:wi})}this.addChildrenMap("background",C),this.addChildrenMap("panel",w),this.addChildrenMap("leftButtons",F),this.addChildrenMap("rightButtons",H),this.addChildrenMap("topButtons",nt),this.addChildrenMap("bottomButtons",ft),this.addChildrenMap("leftButtonsSizer",z),this.addChildrenMap("rightButtonsSizer",tt),this.addChildrenMap("topButtonsSizer",ht),this.addChildrenMap("bottomButtonsSizer",gt)}}Object.assign(By.prototype,SZ),c.register("tabs",function(e){var t=new By(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.Tabs",By),c.register("slider",function(e){var t=new Il(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.Slider",Il);class iA{constructor(t,s){this.container=null,this._deltaHeight=0,this.setParent(t)}setParent(t){this.parent=t,this.parentContainer=t.getParentContainer()}destroy(t){t===void 0&&(t=!1),t||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(t){return t?(this.container&&this.container.destroy(),this.container=t,this.parentContainer.add(t),this):(this.destroyContainer(),this)}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(this.container){var t=this.container;return this.container=null,this.parentContainer.remove(t),t}else return null}setXY(t,s){return this.container&&this.parentContainer.setChildLocalPosition(this.container,t,s),this}setCellContainerAlign(t){return typeof t=="string"&&(t=Cl[t]),this.cellContainerAlign=t,this}get deltaHeight(){return this._deltaHeight}set deltaHeight(t){t==null&&(t=0);var s=this.parent;this._deltaHeight===0&&t!==0?s.nonZeroDeltaHeightCount++:this._deltaHeight!==0&&t===0&&s.nonZeroDeltaHeightCount--;var f=this._deltaHeight!==t;if(this._deltaHeight=t,f){s.resetTotalRowsHeight();var C=this.scrollMode===0?"cellheightchange":"cellwidthchange";this.parentContainer.emit(C,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(t){this.deltaHeight=t}setDeltaHeight(t){return this.deltaHeight=t,this}setDeltaWidth(t){return this.deltaHeight=t,this}get height(){return this.scrollMode===0?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(t){this.scrollMode!==1&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setHeight(t){return this.height=t,this}get width(){return this.scrollMode===0?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(t){this.scrollMode!==0&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setWidth(t){return this.width=t,this}get scene(){return this.parentContainer.scene}}Object.assign(iA.prototype,le);const sA=Phaser.Utils.Objects.GetValue,TZ=Phaser.Utils.Array.SpliceOne;class CZ{constructor(t,s){this.parent=t,this.cells=[],this.cellPool=new bt,this.resetFromJSON(s)}resetFromJSON(t){t===void 0&&(t={}),this.colCount=void 0,this.nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight();var s=t.cellHeight;s===void 0&&(s=60);var f=t.cellWidth;return f===void 0&&(f=60),this.setDefaultCellHeight(s),this.setDefaultCellWidth(f),this.initCells(sA(t,"cellsCount",0)),this.setColumnCount(sA(t,"columns",1)),this}destroy(t){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get defaultCellHeightMode(){return this.nonZeroDeltaHeightCount===0}setDefaultCellHeight(t){return this.defaultCellHeight=t,this}setDefaultCellWidth(t){return this.defaultCellWidth=t,this}initCells(t){var s=this.cells;s.length=t;for(var f=0;f<t;f++)s[f]=null;return this}insertNewCells(t,s){var f=this.cells;if(t===f.length){var C=t+s;f.legth=C;for(var w=t;w<C;w++)f[w]=null}else{var F=[];F.length=s;for(var w=0;w<s;w++)F[w]=null;this.cells.splice(t,0,...F)}return this.resetTotalRowsHeight(),this}removeCells(t,s){for(var f=t+s,C=t;C<f;C++)this.freeCell(C);return f===this.cells.length?this.cells.length=t:(s===1?TZ(this.cells,t):this.cells.splice(t,s),this.buildCellIndex(t)),this.resetTotalRowsHeight(),this}setColumnCount(t){this.colCount=t,this.resetTotalRowsHeight();var s=this.parent;if(s.expandCellSize){var f=s.scrollMode===0?s.width:s.height,C=f/t;this.setDefaultCellWidth(C)}return this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(t){return t>=0&&t<this.cells.length}heightToRowIndex(t,s){if(s===void 0&&(s=0),t===0)return 0;if(this.defaultCellHeightMode){var N=t/this.defaultCellHeight;switch(s){case 1:N=Math.ceil(N);break;default:N=Math.floor(N);break}return N}for(var f=this.rowCount,C=t,w,F,N=0;;)if(F=this.getRowHeight(N),C-=F,w=N>=0&&N<f,C>0&&w)N+=1;else{if(C===0)return s===2&&(N+=1),N;if(s===1){var z=N;N+=1,w=N>=0&&N<f,w||(N=z)}return N}}widthToColIndex(t,s){if(t===0)return 0;var f=t/this.defaultCellWidth;return s?f=Math.ceil(f):f=Math.floor(f),f}colRowToCellIndex(t,s){return t>=this.colCount?null:s*this.colCount+t}rowIndexToHeight(t,s){if(this.defaultCellHeightMode)return(s-t+1)*this.defaultCellHeight;for(var f,C=0,w=t;w<=s;w++)f=this.getRowHeight(w),C+=f;return C}colIndexToWidth(t,s){return(s-t+1)*this.defaultCellWidth}getRowHeight(t){var s=this.colCount;if(s<=1)return this.getCellHeight(this.colRowToCellIndex(0,t));for(var f=0,C,w=0;w<s;w++)C=this.getCellHeight(this.colRowToCellIndex(w,t)),f<C&&(f=C);return f}getColWidth(t){return this.defaultCellWidth}getCellHeight(t){if(!this.isValidCellIdx(t))return 0;var s;if(this.defaultCellHeightMode)s=this.defaultCellHeight;else{var f=this.getCell(t,!1),C=f?f.deltaHeight:0;s=this.defaultCellHeight+C}return s}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return this._totalRowsHeight===null&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(t){return t%this.colCount}cellIndxeToRowIndex(t){return Math.floor(t/this.colCount)}getCell(t,s){if(!this.isValidCellIdx(t))return null;if(s===void 0&&(s=!0),this.cells[t]===null&&s){var f=this.newCell(t);this.cells[t]=f}return this.cells[t]}newCell(t){var s=this.cellPool.pop();return s===null?s=new iA(this):s.setParent(this),s.index=t,s}buildCellIndex(t){t===void 0&&(t=0);for(var s=this.cells,f,C=t,w=s.length;C<w;C++)f=s[C],f&&(f.index=C);return this}getParentContainer(){return this.parent}freeCell(t){return typeof t=="number"&&(t=this.cells[t]),t?(t.destroy(),this.cellPool.push(t),this):this}}var MZ=function(e){var t=this.table,s=this.topTableOY,f=this.bottomTableOY,C=e>s,w=e<f;if(this.clampTableOXY){var F=t.rowCount,N=t.heightToRowIndex(this.instHeight,1);F<N?e=0:C?e=s:w&&(e=f)}return this._tableOY!==e&&(this._tableOY=e),C&&(this.execeedTopState||this.emit("execeedtop",this,e,s)),this.execeedTopState=C,w&&(this.execeedBottomState||this.emit("execeedbottom",this,e,f)),this.execeedBottomState=w,this},EZ=function(e){var t=this.table,s=this.leftTableOX,f=this.rightTableOX,C=e>this.leftTableOX,w=e<this.rightTableOX;if(this.clampTableOXY){var F=t.colCount,N=t.widthToColIndex(this.instWidth,!0);F<N?e=0:C?e=s:w&&(e=f)}return this._tableOX!==e&&(this._tableOX=e),C&&(this.execeedLeftState||this.emit("execeedleft",this,e,s)),this.execeedLeftState=C,w&&(this.execeedRightState||this.emit("execeedright",this,e,f)),this.execeedRightState=w,this},Ny=function(e){return e.hasOwnProperty("geometryMask")?e.geometryMask:e.bitmapMask};const PZ=Phaser.Geom.Intersects.RectangleToRectangle,wZ=Phaser.Geom.Rectangle.Overlaps;var bZ=function({parent:e,mask:t,children:s,onVisible:f,onInvisible:C,scope:w}){if(t){s===void 0&&(s=e.getAllChildren());for(var F=!!f||!!C,N=e.getBounds(),z=Ny(t),H,Z,tt,nt,st=0,ht=s.length;st<ht;st++)if(H=s[st],H!==z&&AZ(H)){if(nt=H.visible,H.getBounds)switch(Z=H.getBounds(Z),tt=RZ(N,Z),tt){case 4:LZ(e,H);break;case 0:PZ(N,Z)||wZ(N,Z)?Gy(e,H,t):OZ(e,H);break;default:Gy(e,H,t);break}else Gy(e,H,t);if(F&&H.visible!==nt){var ft=H.visible?f:C;ft&&(w?ft.call(w,H,e):ft(H,e))}}}},AZ=function(e){if(!e.displayList)return!1;for(;;){var t=e.rexContainer;if(t)if(t.visible){var s=t.parent;if(s){e=s;continue}else return!0}else return!1;else return e.visible}},RZ=function(e,t){var s=t.top,f=t.bottom,C=t.left,w=t.right,F=0;return F+=e.contains(C,s)?1:0,F+=e.contains(C,f)?1:0,F+=e.contains(w,s)?1:0,F+=e.contains(w,f)?1:0,F},LZ=function(e,t,s){t.hasOwnProperty("isRexContainerLite")?(t.syncChildrenEnable=!1,e.setChildMaskVisible(t,!0),t.syncChildrenEnable=!0):(t.clearMask&&t.clearMask(),e.setChildMaskVisible(t,!0))},Gy=function(e,t,s){t.hasOwnProperty("isRexContainerLite")?(t.syncChildrenEnable=!1,e.setChildMaskVisible(t,!0),t.syncChildrenEnable=!0):(t.setMask&&t.setMask(s),e.setChildMaskVisible(t,!0))},OZ=function(e,t,s){t.hasOwnProperty("isRexContainerLite")?(t.syncChildrenEnable=!1,e.setChildMaskVisible(t,!1),t.syncChildrenEnable=!0):(t.clearMask&&t.clearMask(),e.setChildMaskVisible(t,!1))};const Nl=Phaser.Utils.Objects.GetValue,FZ={update:0,everyTick:1};var nA={setupChildrenMask(e){return e===!1?this:(this.setMaskUpdateMode(Nl(e,"updateMode",0)),this.enableChildrenMask(Nl(e,"padding",0)),this.setMaskLayer(Nl(e,"layer",void 0)),this.onMaskGameObjectVisible=Nl(e,"onVisible"),this.onMaskGameObjectInvisible=Nl(e,"onInvisible"),this.maskGameObjectCallbackScope=Nl(e,"scope"),this.startMaskUpdate(),this)},destroyChildrenMask(){return this.childrenMask?(this.stopMaskUpdate(),this.childrenMask.destroy(),this.childrenMask=void 0,this.onMaskGameObjectVisible=null,this.onMaskGameObjectInvisible=null,this.maskGameObjectCallbackScope=null,this):this},setMaskUpdateMode(e){return typeof e=="string"&&(e=FZ[e]),this.maskUpdateMode=e,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(e){var t=ir.call(this,null,this,0,e);return this.childrenMask=t.createGeometryMask(),this},setMaskChildrenFlag(e){return e===void 0&&(e=!0),this.maskChildrenFlag=e,this},setMaskLayer(e){return this.maskLayer=e,this},maskChildren(){return!this.childrenMask||!this.maskChildrenFlag||this.alpha===0||!this.visible?this:(this.privateRenderLayer?this.privateRenderLayer.setMask(this.childrenMask):this.maskLayer?(this.addToLayer(this.maskLayer),this.maskLayer.setMask(this.childrenMask)):bZ({parent:this,mask:this.childrenMask,onVisible:this.onMaskGameObjectVisible,onInvisible:this.onMaskGameObjectInvisible,scope:this.maskGameObjectCallbackScope}),this.maskUpdateMode===0&&(this.maskChildrenFlag=!1),this)},layoutChildrenMask(){if(!this.childrenMask)return this;var e=Ny(this.childrenMask);return e.setPosition().resize(),this.resetChildPositionState(e),this}},DZ=function(){if(this.cellsCount!==0){var e=this.scaleX,t=this.scaleY,s=e===1&&t===1;s||this.setScale(1);var f=this.table,C=this.tableOYOffset,w=this.tableOY+C,F=this.tableOX;this.startRowIndex=Math.max(f.heightToRowIndex(-w,2),0);for(var N=this.startRowIndex,z=Math.max(f.widthToColIndex(-F),0),H=z,Z=f.colRowToCellIndex(H,N),tt=this.bottomBound,nt=this.rightBound,st=f.cellsCount-1,ht=f.colCount-1,ft=this.getCellTLX(H),dt=ft,gt=this.getCellTLY(N)+C,Et=gt;Et<tt&&Z<=st;){if(this.table.isValidCellIdx(Z)){var yt=f.getCell(Z,!0);this.visibleCells.set(yt),this.preVisibleCells.contains(yt)||this.showCell(yt);var Dt,Wt;if(this.scrollMode===0?(Dt=dt,Wt=Et):(Dt=Et,Wt=dt),yt.cellContainerAlign==null)yt.setXY(Dt,Wt);else{var qt=yt.getContainer();Pd(qt,Dt,Wt,yt.width,yt.height,yt.cellContainerAlign),yt.setXY(qt.x,qt.y)}}dt<nt&&H<ht?(dt+=f.getColWidth(H),H+=1):(dt=ft,Et+=f.getRowHeight(N),H=z,N+=1),Z=f.colRowToCellIndex(H,N)}s||this.setScale(e,t)}},rA=function(e){var t=null,s=e.getContainer();if(s?(t=s,e.popContainer()):this.cellContainersPool&&(t=this.cellContainersPool.getFirstDead(),t!==null&&t.setActive(!0).setVisible(!0)),this.emit("cellvisible",e,t,this),this.cellContainersPool){var s=e.getContainer();s?t===null?this.cellContainersPool.add(s):t!==s&&(this.cellContainersPool.add(s),this.cellContainersPool.killAndHide(t)):t!==null&&this.cellContainersPool.killAndHide(t)}},IZ=function(e){var t=this.scrollMode===0?this.topLeftX:this.topLeftY,s=this.tableOX+this.table.colIndexToWidth(0,e-1)+t;return s},BZ=function(e){var t=this.scrollMode===0?this.topLeftY:this.topLeftX,s=this.tableOY+this.table.rowIndexToHeight(0,e-1)+t;return s},NZ=function(){var e=this.preVisibleCells,t=this.visibleCells;e.iterate(function(s){t.contains(s)||this.hideCell(s)},this)},aA=function(e){if(this.emit("cellinvisible",e),this.cellContainersPool){var t=e.popContainer();t&&(t.setScale(1).setAlpha(1),this.cellContainersPool.killAndHide(t))}e.destroyContainer()},GZ=function(e,t){return e===void 0&&(e=!1),t===void 0&&(t=!1),e&&(oA.call(this),this.hideCells()),oA.call(this),this.showCells(),this.hideCells(),this.setMaskChildrenFlag(),t&&(this.layoutChildrenMask(),this.maskChildren()),this},oA=function(){var e=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=e,this.visibleCells.clear()},UZ=function(e){var t=this.table.getCell(e,!1);return t&&this.visibleCells.contains(t)},hA=function(e,t){t-=this.y+this.topLeftY,e-=this.x+this.topLeftX;var s=this.tableOY-(this.scrollMode===0?t:e),f=this.tableOX-(this.scrollMode===0?e:t),C=this.table,w=C.heightToRowIndex(-s,0),F=C.widthToColIndex(-f),N=C.colRowToCellIndex(F,w);return N===null||!this.isCellVisible(N)?null:N},kZ=function(e,t){var s=hA.call(this,e,t);if(s!==null)return this.getCellContainer(s)},VZ=function(e,t){return this.visibleCells.each(e,t),this},zZ=function(e,t){return this.visibleCells.iterate(e,t),this},WZ=function(e,t){return this.table.cells.slice().forEach(e,t),this},XZ=function(e,t){return this.table.cells.forEach(e,t),this},HZ=function(e){var t=this.cellsCount;return t===e?this:(t>e?this.removeCells(e,t-e):this.insertNewCells(t,e-t),this)};const YZ=Phaser.Math.Clamp;var $Z=function(e,t){return typeof e=="object"&&(e=e.index),t===void 0&&(t=1),t<=0?this:(e=YZ(e,0,this.cellsCount),this.table.insertNewCells(e,t),this)},_Z=function(e,t){if(typeof e=="object"&&(e=e.index),t===void 0&&(t=1),e<0&&(t+=e,e=0),t<=0)return this;if(e>this.cellsCount)return this;for(var s,f=e,C=e+t;f<C;f++)s=this.getCell(f,!1),s&&(this.visibleCells.contains(s)&&(aA.call(this,s),this.visibleCells.delete(s)),this.preVisibleCells.delete(s));return this.table.removeCells(e,t),this},ZZ=function(e){return this.table.colCount===e?this:(this.table.setColumnCount(e),this)},KZ=function(e,t){return this.setCellsCount(e*t),this.table.setColumnCount(e),this},JZ=function(e){var t=this.table.getCell(e,!1);return!t||!t.container?this:(rA.call(this,t),this)},lA={setTableOY:MZ,setTableOX:EZ,showCells:DZ,showCell:rA,getCellTLX:IZ,getCellTLY:BZ,hideCells:NZ,hideCell:aA,updateTable:GZ,isCellVisible:UZ,pointToCellIndex:hA,pointToCellContainer:kZ,eachVisibleCell:VZ,iterateVisibleCell:zZ,eachCell:WZ,iterateCell:XZ,setCellsCount:HZ,insertNewCells:$Z,removeCells:_Z,setColumnCount:ZZ,setGridSize:KZ,updateVisibleCell:JZ};Object.assign(lA,nA);const QZ=Phaser.GameObjects.Group,uA=Phaser.Structs.Set,Dn=Phaser.Utils.Objects.GetValue;let dA=class extends dn{constructor(t,s,f,C,w,F){F===void 0&&(F={}),super(t,s,f,C,w),this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new uA,this.preVisibleCells=new uA,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1;var N=Dn(F,"reuseCellContainer",!1);N&&(this.cellContainersPool=new QZ(t));var z=Dn(F,"cellVisibleCallback",null);if(z!==null){var H=Dn(F,"cellVisibleCallbackScope",void 0);this.on("cellvisible",z,H)}if(z=Dn(F,"cellInvisibleCallback",null),z!==null){var H=Dn(F,"cellInvisibleCallbackScope",void 0);this.on("cellinvisible",z,H)}Dn(F,"enableLayer",!1)&&this.enableLayer(),this.setupChildrenMask(Dn(F,"mask",void 0)),this.setScrollMode(Dn(F,"scrollMode",0)),this.setClampMode(Dn(F,"clampTableOXY",!0)),this.setStartFromBottomEnable(Dn(F,"startFromBottom",!1));var Z,tt,nt,st=this.scrollMode===0;if(st?(Z=F.cellWidth,tt=F.cellHeight,nt=F.columns):(Z=F.cellHeight,tt=F.cellWidth,nt=Dn(F,"rows",F.columns)),this.fixedCellSize=Dn(F,"fixedCellSize",!1),this.expandCellSize=!this.fixedCellSize&&Z===void 0,nt||(nt=1),this.fixedCellSize)nt=Math.max(Math.floor(this.instWidth/Z),1);else if(this.expandCellSize){var C=st?this.width:this.height;Z=C/nt}F.cellWidth=Z,F.cellHeight=tt,F.columns=nt,this.table=new CZ(this,F),this.updateTable()}destroy(t){!this.scene||this.ignoreDestroy||(this.destroyChildrenMask(),this.table.destroy(t),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=jZ[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampTableOXY=t,this}setStartFromBottomEnable(t){return t===void 0&&(t=!0),this.startFromBottomEnable=t,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(t){this.setTableOY(t).updateTable()}set tableOX(t){this.setTableOX(t).updateTable()}setTableOXY(t,s){return this.setTableOY(s).setTableOX(t),this}addTableOY(t){return this.setTableOY(this.tableOY+t),this}addTableOX(t){return this.setTableOX(this.tableOX+t),this}addTableOXY(t,s){return this.addTableOY(s).addTableOX(t),this}setTableOYByPercentage(t){return this.setTableOY(-this.tableVisibleHeight*t),this}getTableOYPercentage(){var t=this.tableVisibleHeight;return t===0?0:this.tableOY/-t}setTableOXByPercentage(t){return this.setTableOX(-this.tableVisibleWidth*t),this}getTableOXPercentage(){var t=this.tableVisibleWidth;return t===0?0:this.tableOX/-t}set t(t){this.setTableOYByPercentage(t).updateTable()}get t(){return this.getTableOYPercentage()}set s(t){this.setTableOXByPercentage(t).updateTable()}get s(){return this.getTableOXPercentage()}scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this}scrollToRow(t){this.scrollToBottom();var s=this.table.rowIndexToHeight(0,t-1);return this.setTableOY(-s).updateTable(),this}scrollToNextRow(t){return t===void 0&&(t=1),this.scrollToRow(this.startRowIndex+t),this}getCell(t){return this.table.getCell(t,!0)}getCellContainer(t){var s=this.table.getCell(t,!1),f;return s&&(f=s.getContainer()),f}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(t,s){var f;return typeof t=="number"?f=this.table.getCell(t,!0):f=t,f.height=s,this}setCellWidth(t,s){var f;return typeof t=="number"?f=this.table.getCell(t,!0):f=t,f.width=s,this}resetAllCellsSize(t,s){if(this.scrollMode===1){var f=t;t=s,s=f}this.table.setDefaultCellHeight(s).setDefaultCellWidth(t);for(var C=this.table.cells,w=0,F=C.length;w<F;w++){var N=C[w];N&&(N.deltaHeight=0)}if(this.fixedCellSize){var z=Math.floor(this.instWidth/t);this.table.setColumnCount(z)}return this.updateTable(!0,!0),this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get tableOYOffset(){if(this.startFromBottomEnable){var t=this.tableHeight-this.instHeight;if(t<0)return-t}return 0}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var t=this.tableHeight-this.instHeight;return t<0&&(t=0),t}get tableVisibleWidth(){var t=this.tableWidth-this.instWidth;return t<0&&(t=0),t}get bottomLeftY(){return-(this.displayHeight*this.originY)+this.displayHeight}get topRightX(){return-(this.displayWidth*this.originX)+this.displayWidth}get topLeftX(){return-(this.displayWidth*this.originX)}get topLeftY(){return-(this.displayHeight*this.originY)}get bottomBound(){return this.scrollMode===0?this.bottomLeftY:this.topRightX}get rightBound(){return this.scrollMode===0?this.topRightX:this.bottomLeftY}resize(t,s){if(this.width===t&&this.height===s)return this;if(super.resize(t,s),this.fixedCellSize){var f=Math.floor(this.instWidth/this.table.defaultCellWidth);this.table.setColumnCount(f)}else this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount);return this.updateTable(!0,!0),this}};Object.assign(dA.prototype,lA);const jZ={v:0,vertical:0,h:1,horizontal:1};var qZ=function(e){Object.defineProperty(e,"childOY",{configurable:!0,get:function(){return e.tableOY},set:function(t){e.tableOY=t}}),Object.defineProperty(e,"childOX",{configurable:!0,get:function(){return e.tableOX},set:function(t){e.tableOX=t}}),Object.defineProperty(e,"topChildOY",{get:function(){return e.topTableOY}}),Object.defineProperty(e,"bottomChildOY",{get:function(){return e.bottomTableOY}}),Object.defineProperty(e,"leftChildOX",{get:function(){return e.leftTableOX}}),Object.defineProperty(e,"rightChildOX",{get:function(){return e.rightTableOX}}),Object.defineProperty(e,"childVisibleHeight",{get:function(){return e.instHeight}}),Object.defineProperty(e,"childHeight",{get:function(){return e.tableHeight}}),Object.defineProperty(e,"childVisibleWidth",{get:function(){return e.instWidth}}),Object.defineProperty(e,"childWidth",{get:function(){return e.tableWidth}})},tK=function(e){e.on("cellvisible",function(t,F,f){var C=this.createCellContainerCallback,w=this.createCellContainerCallbackScope;t.item=this.items[t.index],t.items=this.items;var F;w?F=C.call(w,t,F,f):F=C(t,F,f),F&&(t.cellContainerAlign==null&&F.setOrigin&&F.setOrigin(0),F.isRexSizer&&F.layout()),t.item=void 0,t.items=void 0,t.setContainer(F)},this)},Nr=function(e,t,s,f,C,w,F){var N;if(C===void 0)N=f;else{var z=w.camera,H=f+z.scrollX*(s.scrollFactorX-1),Z=C+z.scrollY*(s.scrollFactorY-1);N=s.pointToCellIndex(H,Z)}if(N!=null){var tt=s.getCellContainer(N);tt&&e.emit(t,tt,N,w,F)}},eK=function(e,t){e.on("pointerdown",function(s,f,C,w){Nr(this.eventEmitter,"cell.down",e,s.worldX,s.worldY,s,w)},this).on("pointerup",function(s,f,C,w){Nr(this.eventEmitter,"cell.up",e,s.worldX,s.worldY,s,w)},this)},iK=function(e,t){e.on("pointermove",fA,this).on("pointerover",fA,this).on("pointerout",sK,this)},fA=function(e,t,s,f){var C=this.childrenMap.child,w=e.camera,F=e.worldX+w.scrollX*(C.scrollFactorX-1),N=e.worldY+w.scrollY*(C.scrollFactorY-1),z=C.pointToCellIndex(F,N);if(z!==C.input.lastOverCellIndex){var H=C.input.lastOverCellIndex;C.input.lastOverCellIndex=z,Nr(this.eventEmitter,"cell.out",C,H,void 0,e,f),Nr(this.eventEmitter,"cell.over",C,z,void 0,e,f)}},sK=function(e,t){var s=this.childrenMap.child,f=s.input.lastOverCellIndex;s.input.lastOverCellIndex=void 0,Nr(this.eventEmitter,"cell.out",s,f,void 0,e,t)};const nK=Phaser.Utils.Objects.GetValue;var rK=function(e,t){var s=nK(t,"click",void 0);s!==!1&&(s===void 0&&(s={}),s.threshold=10,e._click=new ha(e,s),e._click.on("click",function(f,C,w,F){Nr(this.eventEmitter,"cell.click",C,w.worldX,w.worldY,w,F)},this))};const aK=Phaser.Utils.Objects.GetValue;var oK=function(e,t){var s=aK(t,"tap",void 0);s!==!1&&(e._tap=new Sp(e,s),e._tap.on("tap",function(f,C,w){var F=`cell.${f.tapsCount}tap`;Nr(this.eventEmitter,F,f.gameObject,f.worldX,f.worldY,w)},this))};const hK=Phaser.Utils.Objects.GetValue;var lK=function(e,t){var s=hK(t,"press",void 0);s!==!1&&(e._press=new Tp(e,s),e._press.on("pressstart",function(f,C,w){Nr(this.eventEmitter,"cell.pressstart",e,f.worldX,f.worldY,w)},this).on("pressend",function(f,C,w){Nr(this.eventEmitter,"cell.pressend",e,f.worldX,f.worldY,w)},this))};const uK=Phaser.Utils.Objects.GetValue;var dK=function(e,t){var s=uK(t,"swipe",void 0);s!==!1&&(s===void 0&&(s={}),s.dir="4dir",e._swipe=new Id(e,s),e._swipe.on("swipe",function(f,C,w){var F=f.left?"left":f.right?"right":f.up?"up":"down";Nr(this.eventEmitter,`cell.swipe${F}`,e,f.worldX,f.worldY,w)},this))},fK=function(e,t){e.setInteractive(),eK.call(this,e,t),iK.call(this,e,t),rK.call(this,e,t),oK.call(this,e,t),lK.call(this,e,t),dK.call(this,e,t)},cK=function(e,t){e===void 0?this.items=[]:this.items=e,t===void 0&&(t=!0);var s=this.childrenMap.child;return s.setCellsCount(this.items.length),t&&(s.updateTable(!0),this.resizeController()),this},pK={scrollToRow(e){var t=this.childrenMap.child;return t.scrollToRow(e),this},scrollToNextRow(e){var t=this.childrenMap.child;return t.scrollToNextRow(e),this}};const ar=Phaser.Utils.Objects.GetValue;class Uy extends _d{constructor(t,s){s===void 0&&(s={});var f=py(s),C=ar(s,"table",void 0);C===void 0&&(C={}),C.scrollMode=f===2?0:f,C.clampTableOXY=ar(s,"clampChildOY",!1);var w=ar(C,"width",void 0),F=ar(C,"height",void 0),N=new dA(t,0,0,w,F,C);t.add.existing(N);var z,H;C.scrollMode===0?(z=w===void 0,H=F===void 0):(z=F===void 0,H=w===void 0),qZ(N),N._minWidth=w===void 0?0:void 0,N._minHeight=F===void 0?0:void 0,s.type="rexGridTable",s.child={gameObject:N,expandWidth:z,expandHeight:H};var Z=ar(s,"space",void 0);Z&&(Z.child=ar(Z,"table",0)),super(t,s),this.addChildrenMap("table",N),this.addChildrenMap("tableLayer",N.maskLayer),this.eventEmitter=ar(s,"eventEmitter",this);var tt=ar(s,"createCellContainerCallback",a),nt=ar(s,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(tt,nt),tK.call(this,N),this.resizeControllerFlag=!1;var st=f===0?"cellheightchange":"cellwidthchange";N.on(st,function(){this.resizeControllerFlag=!0},this),ar(C,"interactive",!0)&&fK.call(this,N,C),this.setItems(ar(s,"items",[]),!1),t.game.events.on("poststep",this.onPostStep,this)}destroy(t){!this.scene||this.ignoreDestroy||(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(t))}setCreateCellContainerCallback(t,s){return this.createCellContainerCallback=t,this.createCellContainerCallbackScope=s,this}refresh(){return this.setItems(this.items),this}getCell(t){var s=this.childrenMap.child;return s.getCell(t)}getCellContainer(t){var s=this.childrenMap.child;return s.getCellContainer(t)}updateVisibleCell(t){var s=this.childrenMap.child;return s.updateVisibleCell(t)}resetAllCellsSize(t,s){var f=this.childrenMap.child;return f.resetAllCellsSize(t,s),this}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}get startRowIndex(){var t=this.childrenMap.child;return t.startRowIndex}}var vK={setItems:cK};Object.assign(Uy.prototype,pK,vK),c.register("gridTable",function(e){var t=new Uy(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.GridTable",Uy);var ky=function(e,t){return e.sameOrientation?e.orientation=t.orientation:e.orientation=t.orientation===0?1:0,e},mK=function(e,t){e.popUp(ky(e.root.easeIn,e))},gK=function(e,t){e.scaleDown(ky(e.root.easeOut,e))},xK={setTransitInCallback(e){return e===void 0&&(e=mK),this.transitInCallback=e,this},setTransitOutCallback(e){return e===void 0&&(e=gK),this.transitOutCallback=e,this}},yK=function(e,t,s,f,C){var w=ul(e),F=w.time.delayedCall(t,function(){w.sys.events.once("postupdate",function(){s.call(f,C)})});return F},SK={delayCall(e,t,s){return this.timer=yK(this,e,t,s),this},removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}},TK=function(e,t){var f=this.childrenMap.subMenu;if(f&&f.parentButton===e)return this;this.collapseSubMenu();var s;this.root.toggleOrientation?s=this.orientation===0?1:0:s=this.orientation;var f=new this.constructor(this.scene,{items:t,orientation:s,space:this.space,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:e});return this.pin(f),this.childrenMap.subMenu=f,this.root.emit("expand",f,e,this),this},CK=function(){var e=this.root;e.emit("collapse",this,this.parentButton,e);var t=e.easeOut.duration;return e.transitOutCallback(this,t),this.collapseSubMenu(),this.delayCall(t,this.destroy,this),this},MK=function(){var e=this.childrenMap.subMenu;return e===void 0?this:(this.childrenMap.subMenu=void 0,this.remove(e),e.collapse(),this)},cA={expandSubMenu:TK,collapse:CK,collapseSubMenu:MK};Object.assign(cA,xK,SK);var EK=function(e,t,s,f){var C;return s&&(t.scene=e,f?C=s.call(f,t):C=s(t),t.scene=void 0),C},PK=function(e,t,s,f){var C,w=[],F;if(t&&s)for(var N=0,z=t.length;N<z;N++)C=t[N],C.scene=e,f?F=s.call(f,C,N,t):F=s(C,N,t),C.scene=void 0,w.push(F);return w},wK=function(e){e.on(e.root.expandEventName,function(t,s){if(!this._isPassedEvent){var f=this.root.childrenKey,C=this.items[s][f];C&&this.expandSubMenu(t,C)}},e).on("button.click",function(t,s,f,C){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",t,s,f,C),this.root._isPassedEvent=!1)},e).on("button.over",function(t,s,f,C){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",t,s,f,C),this.root._isPassedEvent=!1)},e).on("button.out",function(t,s,f,C){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",t,s,f,C),this.root._isPassedEvent=!1)},e)},pA=function(e,t){return typeof t=="number"&&(t={duration:t}),t.hasOwnProperty("orientation")&&t.orientation!==void 0?t.sameOrientation=qo(t.orientation)===e.orientation:t.sameOrientation=!0,t.destroy=!1,t},bK=function(){var e=this.root,t=e.easeIn.duration;e.transitInCallback(this,t),this!==this.root&&this.delayCall(t,function(){this.root.emit("popup.complete",this)},this)};const Gs=Phaser.Utils.Objects.GetValue;class Vy extends rs{constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("orientation")||(s.orientation=1);var f=s._rootMenu,C=s._parentMenu,w=s._parentButton,F=Gs(s,"popup",!0),N=Gs(s,"items",void 0),z=Gs(s,"createBackgroundCallback",void 0),H=Gs(s,"createBackgroundCallbackScope",void 0);s.background=EK(t,N,z,H);var Z=Gs(s,"createButtonCallback",void 0),tt=Gs(s,"createButtonCallbackScope",void 0);if(s.buttons=PK(t,N,Z,tt),super(t,s),this.type="rexMenu",this.items=N,this.root=f===void 0?this:f,this.isRoot=this.root===this,this.parentMenu=C,this.parentButton=w,this.timer=void 0,this.isRoot){this.isPopUpMode=F;var nt=s.bounds;nt===void 0&&(nt=hl(t)),this.bounds=nt,this.subMenuSide=[this.y<nt.centerY?Wy:xv,this.x<nt.centerX?zy:gv];var st=Gs(s,"subMenuSide",void 0);st!==void 0&&(typeof st=="string"&&(st=AK[st]),this.subMenuSide[this.orientation]=st),this.toggleOrientation=Gs(s,"toggleOrientation",!1),this.expandEventName=Gs(s,"expandEvent","button.click"),this.easeIn=pA(this,Gs(s,"easeIn",0)),this.easeOut=pA(this,Gs(s,"easeOut",0)),this.setTransitInCallback(Gs(s,"transitIn")),this.setTransitOutCallback(Gs(s,"transitOut")),this.createBackgroundCallback=z,this.createBackgroundCallbackScope=H,this.createButtonCallback=Z,this.createButtonCallbackScope=tt,this.childrenKey=Gs(s,"childrenKey","children"),this._isPassedEvent=!1,this.pointerDownOutsideCollapsing=Gs(s,"pointerDownOutsideCollapsing",!0),this.pointerDownOutsideCollapsing&&t.input.on("pointerdown",this.onPointerDownOutside,this)}var ht=0,ft=0;if(!this.root.easeIn.sameOrientation){var dt=ky(this.root.easeIn,this).orientation,gt=C?C.orientation:this.orientation,st=this.root.subMenuSide[gt];dt===0&&st===gv&&(ht=1),dt===1&&st===xv&&(ft=1)}if(F&&this.setOrigin(ht,ft).layout(),!this.isRoot){this.setScale(this.root.scaleX,this.root.scaleY);var st=this.root.subMenuSide[C.orientation];switch(st){case gv:this.alignTop(w.top).alignRight(w.left);break;case zy:this.alignTop(w.top).alignLeft(w.right);break;case xv:this.alignLeft(w.left).alignBottom(w.top);break;case Wy:this.alignLeft(w.left).alignTop(w.bottom);break}}wK(this),F&&(this.pushIntoBounds(this.root.bounds),bK.call(this))}destroy(t){!this.scene||this.ignoreDestroy||(this.isRoot&&this.pointerDownOutsideCollapsing&&this.scene.input.off("pointerdown",this.onPointerDownOutside,this),super.destroy(t),this.removeDelayCall())}isInTouching(t){return super.isInTouching(t)?!0:this.childrenMap.subMenu?this.childrenMap.subMenu.isInTouching(t):!1}onPointerDownOutside(t){this.isInTouching(t)||(this.isPopUpMode?this.collapse():this.collapseSubMenu())}}const gv=2,zy=0,xv=3,Wy=1,AK={up:xv,down:Wy,left:gv,right:zy};Object.assign(Vy.prototype,cA),c.register("menu",function(e){var t=new Vy(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.Menu",Vy);var RK={setWrapEnable(e){return e===void 0&&(e=!0),this.listWrapEnable=e,this},setCreateButtonCallback(e){return this.listCreateButtonCallback=e,this},setCreateListBackgroundCallback(e){return this.listCreateBackgroundCallback=e,this},setCreateListSliderTrackCallback(e){return this.listCreateSliderTrackCallback=e,this},setCreateListSliderThumbCallback(e){return this.listCreateSliderThumbCallback=e,this},setListSliderAdaptThumbSizeEnable(e){return e===void 0&&(e=!0),this.listSliderAdaptThumbSizeEnable=e,this},setListScrollerConfig(e){return e===void 0&&(e={}),this.listScrollerConfig=e,this},setListMouseWheelScrollerConfig(e){return this.listMouseWheelScrollerConfig=e,this},setButtonClickCallback(e){return this.listOnButtonClick=e,this},setButtonOverCallback(e){return this.listOnButtonOver=e,this},setButtonOutCallback(e){return this.listOnButtonOut=e,this},setListExpandDirection(e){return typeof e=="string"&&(e=LK[e]),this.listExpandDirection=e,this},setListEaseInDuration(e){return e===void 0&&(e=0),this.listEaseInDuration=e,this},setListEaseOutDuration(e){return e===void 0&&(e=0),this.listEaseOutDuration=e,this},setListTransitInCallback(e){return this.listTransitInCallback=e,this},settListTransitOutCallback(e){return this.listTransitOutCallback=e,this},setListBounds(e){return this.listBounds=e,this},setListWidth(e){return this.listWidth=e,this},setListHeight(e){return this.listHeight=e,this},setListSize(e,t){return this.setListWidth(e).setListHeight(t),this},setListMaxHeight(e){return this.listMaxHeight=e,this},setListAlignmentMode(e){return this.listAlignMode=e,this},setListAlignmentSide(e){return e===void 0&&(e=""),this.listAlignSide=e,this},setListSpace(e){return e===void 0&&(e={}),this.listSpace=e,this},setListDraggable(e){return e===void 0&&(e=!0),this.listDraggable=e,this}};const LK={down:0,up:1};var OK=function(){if(this.rexSizer.hidden)return 0;var e,t=this.child,s=t.rexSizer,f=!1;if(s.hidden)e=0;else switch(this.scrollMode){case 0:e=this.getChildWidth(t),e===void 0&&(f=!0);break;case 1:e=0;break;default:e=0;break}if(!f)return e},FK=function(){if(this.rexSizer.hidden)return 0;var e,t=this.child,s=t.rexSizer,f=!1;if(s.hidden)e=0;else switch(this.scrollMode){case 0:e=0;break;case 1:e=this.getChildHeight(t),e===void 0&&(f=!0);break;default:e=0;break}if(!f)return e},DK=function(e){return e===void 0&&(e=[]),this.child&&this.child.isRexSizer&&e.push(this.child),e},IK=function(){var e=this.left,t=this.top;switch(this.scrollMode){case 0:t+=this.childOY;break;case 1:e+=this.childOY;break;default:t+=this.childOY,e+=this.childOX;break}this.child.setPosition(e,t),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},BK=function(){var e=this.child,t,s;if(!e.rexSizer.hidden){switch(this.scrollMode){case 0:t=this.width*this.scaleX;break;case 1:s=this.height*this.scaleY;break}e.isRexSizer?e.runLayout(this,t,s):Ms(e,t,s),this.resetChildPosition(),this.layoutChildrenMask(),this.maskChildren()}},NK=function(e,t){t||e.clearMask&&e.clearMask(!1)},vA={getChildrenWidth:OK,getChildrenHeight:FK,getChildrenSizers:DK,resetChildPosition:IK,layoutChildren:BK,removeChildCallback:NK};Object.assign(vA,nA);const mA=Phaser.Utils.Objects.IsPlainObject,In=Phaser.Utils.Objects.GetValue,GK=Phaser.Display.Align.TOP_LEFT;class gA extends hh{constructor(t,s,f,C,w,F){mA(s)?(F=s,s=In(F,"x",0),f=In(F,"y",0),C=In(F,"width",void 0),w=In(F,"height",void 0)):mA(C)&&(F=C,C=In(F,"width",void 0),w=In(F,"height",void 0)),super(t,s,f,C,w,F),this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this._childOX=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1,this.setScrollMode(In(F,"scrollMode",0));var N=In(F,"clampChildOY",!0),z=In(F,"clampChildOX",N);this.setClampMode(N,z);var H=In(F,"child",void 0),Z=In(F,"expand",!0);H.setOrigin&&H.setOrigin(0),this.add(H),this.sizerChildren=[H];var tt=this.getSizerConfig(H);tt.align=GK,tt.expand=Z,this.child=H;var nt=In(F,"mask");this.setupChildrenMask(nt),this.childrenMask&&(this.maskGameObject=Ny(this.childrenMask))}destroy(t){!this.scene||this.ignoreDestroy||(this.destroyChildrenMask(),this.child=void 0,super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=wb[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t,s){return this.clampChildOY=t,this.clampChildOX=s,this}get instHeight(){return this.scrollMode===0||this.scrollMode===2?this.displayHeight:this.displayWidth}get instWidth(){return this.scrollMode===0||this.scrollMode===2?this.displayWidth:this.displayHeight}get childHeight(){return this.scrollMode===0||this.scrollMode===2?Ke(this.child):Ze(this.child)}get childWidth(){return this.scrollMode===0||this.scrollMode===2?Ze(this.child):Ke(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get leftChildOX(){return 0}get rightChildOX(){return-this.visibleWidth}get childVisibleHeight(){return this.instHeight}get childVisibleWidth(){return this.instWidth}get visibleHeight(){var t=this.childHeight-this.childVisibleHeight;return t<0&&(t=0),t}get visibleWidth(){var t=this.childWidth-this.childVisibleWidth;return t<0&&(t=0),t}childOYExceedTop(t){return t===void 0&&(t=this.childOY),t>this.topChildOY}childOYExeceedBottom(t){return t===void 0&&(t=this.childOY),t<this.bottomChildOY}childOXExceedLeft(t){return t===void 0&&(t=this.childOX),t>this.leftChildOX}childOXExeceedRight(t){return t===void 0&&(t=this.childOX),t<this.rightChildOX}get childOY(){return this._childOY}set childOY(t){var s=this.topChildOY,f=this.bottomChildOY,C=this.childOYExceedTop(t),w=this.childOYExeceedBottom(t);this.clampChildOY&&(this.childVisibleHeight>this.childHeight?t=0:C?t=s:w&&(t=f)),this._childOY!==t&&(this._childOY=t,this.resetChildPosition()),C&&(this.execeedTopState||this.emit("execeedtop",this,t,s)),this.execeedTopState=C,w&&(this.execeedBottomState||this.emit("execeedbottom",this,t,f)),this.execeedBottomState=w}get childOX(){return this._childOX}set childOX(t){var s=this.leftChildOX,f=this.rightChildOX,C=this.childOXExceedLeft(t),w=this.childOXExeceedRight(t);this.clampChildOX&&(this.childVisibleWidth>this.childWidth?t=0:C?t=s:w&&(t=f)),this._childOX!==t&&(this._childOX=t,this.resetChildPosition()),C&&(this.execeedLeftState||this.emit("execeedleft",this,t,s)),this.execeedLeftState=C,w&&(this.execeedRightState||this.emit("execeedright",this,t,f)),this.execeedRightState=w}setChildOY(t){return this.childOY=t,this}setChildOX(t){return this.childOX=t,this}set t(t){this.childOY=-this.visibleHeight*t}get t(){var t=this.visibleHeight;return t===0?0:this.childOY/-t}set s(t){this.childOX=-this.visibleWidth*t}get s(){var t=this.visibleWidth;return t===0?0:this.childOX/-t}setChildOYByPercentage(t){return this.t=t,this}setChildOXByPercentage(t){return this.s=t,this}}Object.assign(gA.prototype,vA);var UK=function(e,t,s,f){if(!this.hasChild(e))return this;var C,w;switch(this.scrollMode){case 0:C=this.childOY+yv.call(this,e,"y",t);break;case 1:C=this.childOY+yv.call(this,e,"x",t);break;default:C=this.childOY+yv.call(this,e,"y",t),w=this.childOX+yv.call(this,e,"x",t);break}return s===void 0||s<=0?(this.childOY=C,this.scrollMode===2&&(this.childOX=w)):(this._easeScrollChildOY===void 0&&(this._easeScrollChildOY=new Kn(this)),this._easeScrollChildOY.restart({key:"childOY",to:C,duration:s,ease:f}),this.scrollMode===2&&(this._easeScrollChildOX===void 0&&(this._easeScrollChildOX=new Kn(this)),this._easeScrollChildOX.restart({key:"childOX",to:w,duration:s,ease:f}))),this};const xA=["top","bottom","centerY","center"],yA=["left","right","centerX","center"];var yv=function(e,t,s){t=t.toUpperCase();var f=t==="Y",C=this.childrenMap.child,w;if(f){if(s)for(var F=0,N=xA.length;F<N;F++){var z=xA[F];if(s.indexOf(z)!==-1){s=z;break}}switch(s){case"top":w=C.top-Ko(e).y;break;case"bottom":w=C.bottom-id(e).y;break;case"centerY":case"center":w=C.centerY-fM(e).y;break;default:var H=C.top-Ko(e).y,Z=C.bottom-id(e).y;H<=0&&Z>=0?w=0:w=Math.abs(H)<=Math.abs(Z)?H:Z;break}}else{if(s)for(var F=0,N=yA.length;F<N;F++){var z=yA[F];if(s.indexOf(z)!==-1){s=z;break}}switch(s){case"left":w=C.left-Ko(e).x;break;case"right":w=C.right-ed(e).x;break;case"centerX":case"center":w=C.centerX-fM(e).x;break;default:var tt=C.left-Ko(e).x,nt=C.right-ed(e).x;tt<=0&&nt>=0?w=0:w=Math.abs(tt)<=Math.abs(nt)?tt:nt;break}}return w};const uo=Phaser.Utils.Objects.GetValue;class ef extends _d{constructor(t,s){s===void 0&&(s={});var f=py(s),C=uo(s,"panel",void 0);C===void 0&&(C={}),C.scrollMode=f,C.clampChildOY=uo(s,"clampChildOY",!1),C.clampChildOX=uo(s,"clampChildOX",!1);var w=new gA(t,C);t.add.existing(w);var F,N;switch(f){case 0:F=uo(s,"expand.panel",!0),N=!0;break;case 1:F=!0,N=uo(s,"expand.panel",!0);break;default:F=!0,N=!0}s.type="rexScrollablePanel",s.child={gameObject:w,expandWidth:F,expandHeight:N,align:uo(s,"align.panel","center")};var z=uo(s,"space",void 0);z&&(z.child=uo(z,"panel",0)),super(t,s),this.addChildrenMap("panel",w.child),this.addChildrenMap("panelLayer",w.maskLayer),this.addChildrenMap("mask",w.maskGameObject),this.addChildrenMap("scrollableBlock",w)}setChildrenInteractive(t){return t===void 0&&(t={}),t.hasOwnProperty("eventEmitter")||(t.eventEmitter=this),t.hasOwnProperty("targets")||(t.targets=[this.childrenMap.panel]),Ap(this.childrenMap.child,t),this}}var kK={scrollToChild:UK};Object.assign(ef.prototype,kK);const VK=Phaser.Utils.Objects.GetValue;var zK=function(){var e=this.scene,t,s=this.listCreateBackgroundCallback;s&&(t=s.call(this,e),e.add.existing(t));var tt=[],f=this.listCreateButtonCallback;if(f)for(var C=this.options,w=0,F=C.length;w<F;w++){var N=f.call(this,e,C[w],w,C);N&&(e.add.existing(N),tt.push(N))}var z=this.listWidth;z===void 0&&(this.listAlignMode==="text"?z=this.getElement("text").width:z=this.width);var H=this.listHeight,Z={width:z,buttons:tt,space:this.listSpace},tt,nt,st;if(this.listCreateSliderThumbCallback?st=H>0||this.listMaxHeight>0:st=!1,!st)Z.height=H,tt=SA(e,Z,this.listWrapEnable),nt=tt;else{var tt=SA(e,Z,this.listWrapEnable);if(this.listMaxHeight>0&&(tt.layout(),tt.height<=this.listMaxHeight&&(nt=tt)),!nt){H===0&&(H=this.listMaxHeight);var ht=TA(e,this.listCreateSliderTrackCallback),ft=TA(e,this.listCreateSliderThumbCallback);nt=new ef(e,{height:H,scrollMode:0,panel:{child:tt,mask:{padding:1}},slider:{track:ht,thumb:ft,adaptThumbSize:this.listSliderAdaptThumbSizeEnable},scrollDetectionMode:1,scroller:this.listScrollerConfig,mouseWheelScroller:this.listMouseWheelScrollerConfig,space:{panel:VK(this.listSpace,"panel",0)}}),e.add.existing(nt)}}return t&&nt.addBackground(t,"background"),this.listDraggable&&nt.setDraggable(!0),nt!==tt&&tt.on("button.over",function(dt,gt,Et,yt){nt.emit("button.over",dt,gt,Et,yt)}).on("button.out",function(dt,gt,Et,yt){nt.emit("button.out",dt,gt,Et,yt)}).on("button.click",function(dt,gt,Et,yt){nt.emit("button.click",dt,gt,Et,yt)}),nt},SA=function(e,t,s){var f;return s?(t.orientation="x",f=new ho(e,t)):(t.orientation="y",f=new rs(e,t)),e.add.existing(f),f},TA=function(e,t,s){var f;return t&&(f=t.call(s,e),e.add.existing(f)),f},WK=function(e,t,s,f,C){var w={};switch(w.mode=0,s){case 0:case"x":w.end={x:0};break;case 1:case"y":w.end={y:0};break;default:w.end=0;break}return w.duration=t,w.ease=f,C===void 0?C=new Rd(e,w):C.resetFromJSON(w),C.restart(),C},XK=function(e,t,s,f,C){return ra(e,t)?Vt(e,t):ra(e,s)?Vt(e,s):C};const Gl=Phaser.Utils.Objects.GetValue;var HK=function(e,t){var s=Gl(t,"expandDirection",void 0);typeof s=="string"&&(s=YK[s]);var f=XK(t,"alignTarget","alignTargetX"),C=Gl(t,"alignTargetY",f),w=Gl(t,"alignOffsetX",0),F=Gl(t,"alignOffsetY",0),N=Gl(t,"alignSide",""),z=N.includes("right"),H=Gl(t,"bounds"),Z=s===0,tt=s===1,nt=!Z&&!tt,st=z?1:0,ht=Z||nt?0:1;e.setOrigin(st,ht);var ft,dt;z?ft=f.getTopRight().x:ft=f.getTopLeft().x,dt=C.getBottomLeft().y,e.setPosition(ft+w,dt+F);var gt=H;gt||(gt=hl(e.scene)),nt&&e.getBottomLeft().y>gt.bottom&&(dt=C.getTopLeft().y,e.setOrigin(0,1).setPosition(ft+w,dt+F))};const YK={down:0,up:1},CA=Phaser.Utils.Objects.GetValue;class MA extends cp{constructor(t,s){s===void 0&&(s={}),s.transitIn==null&&(s.transitIn=function(w,F){nx(w,F,"y","Cubic")}),s.transitOut==null&&(s.transitOut=function(w,F){WK(w,F,"y","Linear")}),s.manualClose=!0,s.clickOutsideClose=!0,s.destroy=!0,super(t,s),HK(t,s),t.isRexSizer&&t.layout();var f=CA(s,"touchOutsideClose",!1),C=CA(s,"anyTouchClose",!1);C&&(f=!1),C?this.once("open",this.anyTouchClose,this):f&&this.once("open",this.touchOutsideClose,this),this.requestOpen()}shutdown(t){this.isShutdown||(this.scene.input.off("pointerup",this.touchCloseCallback,this),super.shutdown(t))}touchOutsideClose(){return this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(t){this.clickOutsideTest&&mp(this.parent,t.worldX,t.worldY)||this.requestClose()}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}}var $K=function(){if(this.listPanel)return this;if(this.options.length===0)return this;var e=zK.call(this);e.on("button.over",function(f,C,w,F){this.currentOverIndex=C,this.listOnButtonOver&&this.listOnButtonOver.call(this,f,C,w,F),this.emit("button.over",this,e,f,C,w,F)},this).on("button.out",function(f,C,w,F){this.currentOverIndex===C&&(this.currentOverIndex=void 0),this.listOnButtonOut&&this.listOnButtonOut.call(this,f,C,w,F),this.emit("button.out",this,e,f,C,w,F)},this);var t;!this.listAlignMode||this.listAlignMode==="label"?t=this:t=this.getElement(this.listAlignMode);var s=new MA(e,{duration:{in:this.listEaseInDuration,out:this.listEaseOutDuration},transitIn:this.listTransitInCallback,transitOut:this.listTransitOutCallback,expandDirection:this.listExpandDirection,alignTargetX:t,alignTargetY:this,alignSide:this.listAlignSide,bounds:this.listBounds}).on("open",function(){e.on("button.click",function(f,C,w,F){this.listOnButtonClick&&this.listOnButtonClick.call(this,f,C,w,F),this.emit("button.click",this,e,f,C,w,F),this.dropDownBehavior.requestClose()},this),this.emit("list.open",this,e)},this).on("close",function(){this.listPanel=void 0,this.dropDownBehavior=void 0,this.emit("list.close",this)},this);return e.onClickOutside(function(){s.requestClose()}),this.listPanel=e,this.dropDownBehavior=s,this.pin(e),this},_K=function(){return this.dropDownBehavior?(this.dropDownBehavior.requestClose(),this.currentOverIndex=void 0,this):this},ZK=function(){return this.listPanel?this.closeListPanel():this.openListPanel(),this},KK=function(e){if(e===void 0&&(e=this.currentOverIndex),e===void 0)return this;var t=this.listPanel,s=t?t.getButton(e):this.options[e];return this.listOnButtonClick&&this.listOnButtonClick.call(this,s,e),this.emit("button.click",this,t,s,e),this},JK=function(e){var t=this.listPanel;return t?(t.emitButtonOver(e),this):this},QK={focusNextButton(){if(!this.isOpened)return this;var e=this.currentOverIndex,t;if(e===void 0)t=0;else{var s=this.listPanel.getButtons().length;t=(e+1)%s}return this.emitButtonOver(t),this},focusPrevButton(){if(!this.isOpened)return this;var e=this.currentOverIndex,t;if(e===void 0)t=0;else{var s=this.listPanel.getButtons().length;t=(e-1+s)%s}return this.emitButtonOver(t),this}},EA={openListPanel:$K,closeListPanel:_K,toggleListPanel:ZK,emitButtonClick:KK,emitButtonOver:JK};Object.assign(EA,RK,QK);const ti=Phaser.Utils.Objects.GetValue;class sf extends ga{constructor(t,s){super(t,s),this.type="rexDropDownList",this.timer=void 0,this.listPanel=void 0,this.currentOverIndex=void 0,this.setOptions(ti(s,"options"));var f=ti(s,"list");this.setWrapEnable(ti(f,"wrap",!1)),this.setCreateButtonCallback(ti(f,"createButtonCallback")),this.setCreateListBackgroundCallback(ti(f,"createBackgroundCallback")),this.setCreateListSliderTrackCallback(ti(f,"createTrackCallback")),this.setCreateListSliderThumbCallback(ti(f,"createThumbCallback")),this.setListSliderAdaptThumbSizeEnable(ti(f,"sliderAdaptThumbSize",!1)),this.setListScrollerConfig(ti(f,"scroller")),this.setListMouseWheelScrollerConfig(ti(f,"mouseWheelScroller")),this.setButtonClickCallback(ti(f,"onButtonClick")),this.setButtonOverCallback(ti(f,"onButtonOver")),this.setButtonOutCallback(ti(f,"onButtonOut")),this.setListExpandDirection(ti(f,"expandDirection")),this.setListEaseInDuration(ti(f,"easeIn",500)),this.setListEaseOutDuration(ti(f,"easeOut",100)),this.setListTransitInCallback(ti(f,"transitIn")),this.settListTransitOutCallback(ti(f,"transitOut")),this.setListMaxHeight(ti(f,"maxHeight",0)),this.setListSize(ti(f,"width"),ti(f,"height",0)),this.setListAlignmentMode(ti(f,"alignParent","text")),this.setListAlignmentSide(ti(f,"alignSide","")),this.setListBounds(ti(f,"bounds")),this.setListSpace(ti(f,"space")),this.setListDraggable(ti(f,"draggable",!1)),this.setValueChangeCallback(ti(s,"setValueCallback"),ti(s,"setValueCallbackScope")),this.setValue(ti(s,"value")),this.onClick(this.toggleListPanel,this)}destroy(t){!this.scene||this.ignoreDestroy||(this.listPanel&&(this.listPanel.destroy(t),this.listPanel=void 0),super.destroy(t))}get isOpened(){return!!this.listPanel}setOptions(t){return t===void 0&&(t=[]),this.options=t,this}setValueChangeCallback(t,s){return this.valueChangeCallback=t,this.valueChangeCallbackScope=s,this}setValue(t){return this.value=t,this}get value(){return this._value}set value(t){if(this._value!==t){var s=this._value;this._value=t;var f=this.valueChangeCallback,C=this.valueChangeCallbackScope;f&&(C?f.call(C,this,t,s):f(this,t,s)),this.emit("valuechange",this,t,s)}}}Object.assign(sf.prototype,EA),c.register("dropDownList",function(e){var t=new sf(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.DropDownList",sf);var PA=function(e,t,s){t=t?I(t):{},s===void 0&&(s={});var f=t.label||t.button,C=t.button||t.label;delete t.label,delete t.button;var w=s.label||s.button||s,F=s.button||s.label||s,N=iv(e,f,w);N.list=t.list||{},N.list.createButtonCallback=function(Z,tt){var nt=as(Z,C,F).resetDisplayContent(tt);return tt.hasOwnProperty("value")&&(nt.value=tt.value),nt};var z=t.track;z&&(N.list.createTrackCallback=function(Z){return ji(Z,z)},delete t.track);var H=t.thumb;return H&&(N.list.createThumbCallback=function(Z){return ji(Z,H)},delete t.thumb),N.list.onButtonOver=function(Z,tt,nt,st){Z.setHoverState&&Z.setHoverState(!0)},N.list.onButtonOut=function(Z,tt,nt,st){Z.setHoverState&&Z.setHoverState(!1)},N};class wA extends sf{constructor(t,s,f){s=PA(t,s,f),super(t,s),this.type="rexSimpleDropDownList"}setOptions(t){t===void 0&&(t=[]);for(var s=0,f=t.length;s<f;s++){var C=t[s];typeof C=="string"&&(t[s]={text:C,value:C})}return super.setOptions(t),this}}c.register("simpleDropDownList",function(e,t){var s=new wA(this.scene,e,t);return this.scene.add.existing(s),s}),j(window,"RexPlugins.UI.SimpleDropDownList",wA);var jK=function(e){var t=so(e),s,f,C;switch(t){case Es:case Ps:s=e.height-e.padding.top-e.padding.bottom,f=e.lineSpacing,C=e.style.metrics.fontSize+e.style.strokeThickness;break;case pn:s=e.height,f=0;var w=e.fontSize/e.fontData.size;C=e.fontData.lineHeight*w;break}return(s-f)/(C+f)},qK=function(e,t){if(e===void 0&&(e=this.startLineIndex),t===void 0){var s=this.pageLinesCount;s>0?t=e+s:t=this.totalLinesCount}t>this.totalLinesCount&&(t=this.totalLinesCount);var f;switch(this.textObjectType){case Es:case pn:f=this.lines.slice(e,t).join(`
`);break;case Ps:var C=this.lines.getLineStartIndex(e),w=this.lines.getLineEndIndex(t-1);f=this.lines.getSliceTagText(C,w,!0);var F=(f.match(/\n/g)||[]).length;F>t-e-1&&(f=f.substring(0,f.length-1));break}return f},tJ={clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(s){var t=this.totalLinesCount;this.sections.push(qh(s));var s=this.sections.join(`
`);this.lines=yy(this.parent,s,this.lines);var f=this.totalLinesCount-t,C=this.pageLinesCount,w;C>0?w=Math.ceil(f/this.pageLinesCount):w=1;for(var F=0;F<w;F++)this.pageStartIndexes.push(t+F*this.pageLinesCount);return this},setText(e,t){t===void 0&&(t=!0),t&&this.resetIndex(),this.clearText();for(var s=qh(e).split(this.pageBreak),f=0,C=s.length;f<C;f++)this.appendPage(s[f]);return this},appendText(e){var t=this.content+qh(e);return this.setText(t,!1),this}};const bA=Phaser.Math.Clamp;var eJ={resetIndex(){return this.pageIndex=-1,this.startLineIndex=-1,this.endLineIndex=void 0,this},setPageIndex(e){return e=bA(e,0,this.lastPageIndex),this.pageIndex=e,this.startLineIndex=this.pageStartIndexes[e],this.endLineIndex=this.pageStartIndexes[e+1],this},getPage(e){return e===void 0&&(e=this.pageIndex),this.setPageIndex(e).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},getFirstPage(){return this.getPage(0)},getLastPage(){return this.getPage(this.lastPageIndex)},setStartLineIndex(e){var t=Math.max(this.totalLinesCount-this.pageLinesCount,0);return e=bA(e,0,t),this.startLineIndex=e,this.endLineIndex=e+this.pageLinesCount,this},getPageByLineIndex(e){return this.setStartLineIndex(e).getLines(this.startLineIndex,this.endLineIndex)},getPageOfNextLine(){return this.getPageByLineIndex(this.startLineIndex+1)},getPageOfPreviousLine(){return this.getPageByLineIndex(this.startLineIndex-1)},getPageOfFirstLine(){return this.getPageByLineIndex(0)},getPageOfLastLine(){return this.getPageByLineIndex(this.totalLinesCount)}},iJ={showPage(e){return this.displayText(this.getPage(e)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},showFirstPage(){return this.displayText(this.getFirstPage()),this},showLastPage(){return this.displayText(this.getLastPage()),this},show(){return this.displayText(this.getLines()),this},showPageByLineIndex(e){return this.displayText(this.getPageByLineIndex(e)),this},showNextLine(){return this.displayText(this.getPageOfNextLine()),this},showPreviousLine(){return this.displayText(this.getPageOfPreviousLine()),this},showFirstLine(){return this.displayText(this.getPageOfFirstLine()),this},showLastLine(){return this.displayText(this.getPageOfLastLine()),this},displayText(e){qp(this.parent,e)}},AA={getLines:qK};Object.assign(AA,tJ,eJ,iJ);const Ul=Phaser.Utils.Objects.GetValue;Phaser.Math.Clamp;class Sv extends Si{constructor(t,s){super(t,{eventEmitter:!1}),this.textObjectType=so(this.parent),this.pageStartIndexes=[],this.lines=yy(this.parent,""),this.sections=[],this.resetFromJSON(s)}resetFromJSON(t){this.setMaxLines(Ul(t,"maxLines",void 0)),this.setPageBreak(Ul(t,"pageBreak",`\f
`)),this.setText(Ul(t,"text","")),this.startLineIndex=Ul(t,"start",-1),this.endLineIndex=Ul(t,"end",void 0);var s=Ul(t,"page");return s===void 0?this.resetIndex():this.setPageIndex(s),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,end:this.endLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(t){if(!this.isShutdown){switch(this.textObjectType){case Es:this.lines.length=0;break;case Ps:this.lines.destroy();break;case pn:this.lines.length=0;break}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(t)}}setMaxLines(t){return this.maxLines=t,this}setPageBreak(t){return this.pageBreak=t,this}get pageCount(){return this.pageStartIndexes.length}get lastPageIndex(){return this.pageCount-1}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get pageLinesCount(){if(this.maxLines!==void 0)return this.maxLines;var t;switch(this.textObjectType){case Es:case Ps:var s=this.parent.style.maxLines;s>0?t=s:t=Math.floor(jK(this.parent));break;case pn:t=this.totalLinesCount;break}return t}get isFirstLine(){return this.startLineIndex<=0}get isLastLine(){return this.endLineIndex===this.totalLinesCount}get content(){return this.sections.join(this.pageBreak)}}Object.assign(Sv.prototype,AA);var sJ={setText(e){this.setTextCallback&&(this.setTextCallbackScope?e=this.setTextCallback.call(this.setTextCallbackScope,e,this.isLastChar,this.insertIndex):e=this.setTextCallback(e,this.isLastChar,this.insertIndex)),this.textWrapEnable?qp(this.parent,e):this.parent.setText(e)},appendText(e){var t=this.text.concat(qh(e));return this.isTyping?this.setTypingContent(t):this.start(t,void 0,this.textLength),this}},nJ=function(e,t,s,f){return e!==void 0&&this.setTypingContent(e),t!==void 0&&(this.speed=t),s===void 0&&(s=0),this.typingIndex=s+1,this.speed===0?this.stop(!0):(this.setText(""),this.startTimer(f)),this},RA=function(e,t){return e.getPlainText&&(t=e.getPlainText(t)),t},rJ=function(e,t,s,f,C){var w;if(t>0){f===void 0&&(f=0);var F=RA(this.parent,e);w=aJ(F,t)+f}return this.start(e,s,w,C)},aJ=function(e,t){for(var s=void 0,f=0;f<t&&(s=e.indexOf(`
`,s+1),s!==-1);f++);return s},nf=function(e,t,s,f){var C;return e.getSubString?C=e.getSubString(t,s,f):C=t.slice(s,f),C},LA=function(e,t,s,f){var C=this.parent,w;if(f===0){var F=0,N=t;this.insertIndex=N,w=nf(C,e,F,N)}else if(f===1){var N=s,F=N-t;this.insertIndex=0,w=nf(C,e,F,N)}else if(f===2){var z=s/2,F=Math.floor(z-t/2),N=F+t;this.insertIndex=t%2?t:0,w=nf(C,e,F,N)}else if(f===3){var H=Math.floor(t/2),Z;if(H>0){var N=s,F=N-H;Z=nf(C,e,F,N)}else Z="";var tt=t-H,nt;if(tt>0){var F=0,N=F+tt;this.insertIndex=N,nt=nf(C,e,F,N)}else nt="",this.insertIndex=0;w=nt+Z}return this.insertChar=w.charAt(this.insertIndex-1),w},oJ=function(e){var t=this.getTimer();if(t&&this.freeTimer(),e){for(;!this.isLastChar;)LA.call(this,this.text,this.typingIndex,this.textLength,this.typeMode),this.emit("typechar",this.insertChar),this.typingIndex++;this.setText(this.text),this.emit("type"),this.emit("complete",this,this.parent)}return this},hJ=function(){var e=this.getTimer();return e&&(e.paused=!0),this},lJ=function(){var e=this.getTimer();return e&&(e.paused=!1),this},OA={start:nJ,startFromLine:rJ,stop:oJ,pause:hJ,resumeTyping:lJ};Object.assign(OA,sJ);var uJ=function(e,t){var s=so(e);switch(s){case Es:e.style.syncFont(e.canvas,e.context),t=e.runWordWrap(t);break;case Ps:t=e.getText(t,void 0,void 0,!0);break;case pn:t=e.setText(t).getTextBounds().wrappedText;break}return t};const rf=Phaser.Utils.Objects.GetFastValue,Xy=Phaser.Utils.Objects.GetValue;class Tv extends Si{constructor(t,s){super(t,s),this.timer=null,this.resetFromJSON(s)}resetFromJSON(t){this.setTextWrapEnable(Xy(t,"wrap",!1)),this.setTypeMode(Xy(t,"typeMode",0)),this.setTypingSpeed(Xy(t,"speed",333)),this.setTextCallback=rf(t,"setTextCallback",null),this.setTextCallbackScope=rf(t,"setTextCallbackScope",null),this.setTypingContent(rf(t,"text","")),this.typingIndex=rf(t,"typingIndex",0),this.insertIndex=null,this.insertChar=null;var s=rf(t,"elapsed",null);return s!==null&&this.start(void 0,void 0,this.typingIndex,s),this}shutdown(t){this.isShutdown||(this.freeTimer(),super.shutdown(t))}setTypeMode(t){return typeof t=="string"&&(t=dJ[t]),this.typeMode=t,this}setTypeSpeed(t){return this.speed=t,this}setTypingSpeed(t){return this.speed=t,this}setTextWrapEnable(t){return t===void 0&&(t=!0),this.textWrapEnable=t,this}set text(t){var s=qh(t);this.textWrapEnable&&(s=uJ(this.parent,s)),this._text=s}get text(){return this._text}get isTyping(){return this.getTimer()!==null}get isLastChar(){return this.typingIndex===this.textLength}setTypingContent(t){return this.text=t,this.textLength=RA(this.parent,this.text).length,this}onTyping(){var t=LA.call(this,this.text,this.typingIndex,this.textLength,this.typeMode);this.setText(t),this.emit("typechar",this.insertChar),this.emit("type"),this.isLastChar?(this.freeTimer(),this.scene.sys.events.once("preupdate",function(){this.emit("complete",this,this.parent)},this)):(this.timer.delay=this.speed,this.typingIndex++)}startTimer(t){this.timer&&this.freeTimer();var s;return t===void 0?s=0:(this.speed,s=t),this.timer=this.scene.time.addEvent({delay:1e-4,startAt:s,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(t){this.setTextCallback&&(this.setTextCallbackScope?t=this.setTextCallback.call(this.setTextCallbackScope,t,this.isLastChar,this.insertIndex):t=this.setTextCallback(t,this.isLastChar,this.insertIndex)),this.textWrapEnable?qp(this.parent,t):this.parent.setText(t)}}const dJ={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3};Object.assign(Tv.prototype,OA);const af=Phaser.Utils.Objects.GetValue;var fJ=function(e,t){t===void 0&&(t="rexTextBox");class s extends e{constructor(C,w){super(C,w),this.type=t,this.isRunning=!1,this._isPageEnd=!1;var F=this.childrenMap.text,N=af(w,"expandTextWidth",!1),z=af(w,"expandTextHeight",!1);if(N||z){var H=so(F);switch(H){case Es:case Ps:if(F.resize=function(tt,nt){var st=N?tt:0,ht=z?nt:0;F.setFixedSize(st,ht),st>0&&F.setWordWrapWidth(st)},H===Ps){var Z=F.style;Z.wrapMode===0&&(Z.wrapMode=1)}break}N&&(F._minWidth=0),z&&(F._minHeight=0)}this.setTypingMode(af(w,"typingMode","page")),this.page=new Sv(F,af(w,"page",void 0)),this.typing=new Tv(F,af(w,"typing",w.type)),this.typing.on("complete",this.onTypingComplete,this).on("type",this.onType,this).on("typechar",this.onTypeChar,this),this.textWidthSave=F.width,this.textHeightSave=F.height}setTypingMode(C){return typeof C=="string"&&(C=cJ[C]),this.typingMode=C,this}start(C,w){return w!==void 0&&this.setTypingSpeed(w),this.isRunning=!0,this.page.setText(C),this.emit("start"),this.typingMode===0?this.typeNextPage():this.typeNextLine(),this}more(C,w){if(w!==void 0&&this.setTypingSpeed(w),this.isRunning)this.page.appendText(C),this.typing.appendText(C);else{if(this.isRunning=!0,this.page.appendText(C),this.emit("start"),this.typingMode===0){this._isPageEnd=!1;var F=this.page.getPage(),N=this.typing.textLength;this.typing.start(F,void 0,N)}return this}}typeNextPage(){if(!this.isRunning)return this;if(this.isLastPage)this.emit("complete");else{this._isPageEnd=!1;var C=this.page.getNextPage();this.typing.start(C)}return this}typeNextLine(){if(!this.isRunning)return this;if(this.isLastLine)this.isRunning=!1,this.emit("pageend"),this.emit("complete");else{var C=this.page.getPageOfNextLine(),w;this.isFirstLine?w=0:w=this.page.pageLinesCount-1,this.typing.startFromLine(C,w)}}pause(){return this.isRunning?(this.isTyping&&(this.typing.pause(),this.emit("pause")),this):this}resume(){return this.isRunning?(this.isTyping||(this.emit("resume"),this.typing.resume()),this):this}stop(C){return this.isRunning?(this.typing.stop(C),this):this}showLastPage(){return this.isRunning?(this.typing.stop(),this.typingMode===0?this.page.showLastPage():this.page.showLastLine(),this.emit("type"),this.onTypingComplete(),this):this}setTypeSpeed(C){return this.typing.setTypingSpeed(C),this}setTypingSpeed(C){return this.typing.setTypingSpeed(C),this}get isTyping(){return this.typing.isTyping}get isPageEnd(){return this._isPageEnd}get isLastPage(){return this.page.isLastPage}get isFirstPage(){return this.page.isFirstPage}get pageCount(){return this.page.pageCount}get pageIndex(){return this.page.pageIndex}get isLastLine(){return this.page.isLastLine}get isFirstLine(){return this.page.isFirstLine}get lineCound(){return this.page.totalLinesCount}get startLineIndex(){return this.page.startLineIndex}get endLineIndex(){return this.page.endLineIndex}get typingSpeed(){return this.typing.speed}onType(){var C=this.childrenMap.text;(this.textWidthSave!==C.width||this.textHeightSave!==C.height)&&(this.textWidthSave=C.width,this.textHeightSave=C.height,this.getTopmostSizer().layout()),this.emit("type")}onTypeChar(C){this.emit("typechar",C)}onTypingComplete(){if(this.typingMode===0){this._isPageEnd=!0;var C=this.isLastPage;this.isRunning=!C,this.emit("pageend"),C&&this.emit("complete")}else this.typeNextLine()}}return s};const cJ={page:0,line:1};class Hy extends fJ(sv){constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("layoutMode")||(s.layoutMode=1),super(t,s)}}c.register("textBox",function(e){var t=new Hy(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.TextBox",Hy);class FA extends Hy{constructor(t,s,f){s=Vb(t,s,f),super(t,s)}}c.register("simpleTextBox",function(e){var t=new FA(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.SimpleTextBox",FA);const gn=Phaser.Utils.Objects.GetValue;class DA extends Le{constructor(t,s){super(t,s),this.type="rexNumberBar";var f=gn(s,"background",void 0),C=gn(s,"icon",void 0),w=gn(s,"iconMask",void 0),F=gn(s,"slider",void 0),N=gn(s,"text",void 0),z=gn(s,"space.icon",0),H=gn(s,"space.slider",0);if(f&&this.addBackground(f),C){var Z;this.orientation===0?(F||N)&&(Z={right:z}):(F||N)&&(Z={bottom:z}),this.add(C,{proportion:0,align:"center",padding:Z}),w&&(w=ir.call(this,C,C,1))}var tt;if(F){F.orientation=this.orientation,F.eventEmitter=this,F.value=null,F.hasOwnProperty("input")||(F.input=-1),tt=new Il(t,F),t.add.existing(tt);var Z;this.orientation===0?N&&(Z={right:H}):N&&(Z={bottom:H});var nt;if(this.orientation===0){var st=gn(F,"width",void 0);nt=st===void 0?1:0}else{var ht=gn(F,"height",void 0);nt=ht===void 0?1:0}this.add(tt,{proportion:nt,align:"center",padding:Z})}N&&this.add(N),this.addChildrenMap("background",f),this.addChildrenMap("icon",C),this.addChildrenMap("iconMask",w),this.addChildrenMap("slider",tt),this.addChildrenMap("text",N);var ft=gn(s,"valuechangeCallback",null);if(ft!==null){var dt=gn(s,"valuechangeCallbackScope",void 0);this.on("valuechange",ft,dt)}this.setEnable(gn(s,"enable",void 0)),this.setValue(gn(s,"value",0))}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){this.childrenMap.slider&&(this.childrenMap.slider.value=t)}setValue(t,s,f){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,s,f),this}addValue(t,s,f){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,s,f),this}getValue(t,s){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,s):0}easeValueTo(t,s,f){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,s,f),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}get text(){var t=this.childrenMap.text;if(t===void 0)return"";var s;return t.text?s=t.text:s=t.getData("text"),s}set text(t){var s=this.childrenMap.text;s!==void 0&&(s.setText?s.setText(t):s.setData("text",t))}setText(t){return this.text=t,this}}c.register("numberBar",function(e){var t=new DA(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.NumberBar",DA),c.register("scrollBar",function(e){var t=new gy(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.ScrollBar",gy);const Yy=Phaser.Utils.Objects.GetValue,IA={leftTop:"left-top",centerTop:"center-top",rightTop:"right-top",leftCenter:"left-center",center:"center",rightCenter:"right-center",leftBottom:"left-bottom",centerBottom:"center-bottom",rightBottom:"right-bottom"};class BA extends Rn{constructor(t,s){super(t,s),this.type="rexBadge";var f=Yy(s,"background",void 0);f&&this.addBackground(f),this.addChildrenMap("background",f);var C=Yy(s,"main",void 0);C&&this.add(C,{key:"main",align:"center",expand:!1}),this.addChildrenMap("main",C);for(var w in IA){var F=Yy(s,w,void 0);F&&(this.add(F,{key:w,align:IA[w],expand:!1}),this.addChildrenMap(w,F))}}}c.register("badgeLabel",function(e){var t=new BA(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.BadgeLabel",BA);const pJ=Rn.prototype.add;var NA=function(e,t,s,f,C,w,F,N,z){return e.setVisible(!1),pJ.call(this,e,t,s,f,C,w,F,N,z),this},vJ={add:NA,addPage:NA},mJ=function(e){return e===void 0?null:this.sizerChildren.hasOwnProperty(e)?this.sizerChildren[e]:null};const GA=dn.prototype.setChildVisible;var gJ=function(e,t){this._previousKey=this._currentKey;var s=this.previousPage;s&&(this.swapMode===0?(GA.call(this,s,!1),this.emit("pageinvisible",s,this._previousKey,this)):s.destroy()),e&&!this.sizerChildren.hasOwnProperty(e)&&this.emit("createpage",e,this),this._currentKey=e;var f=this.currentPage;return f&&(GA.call(this,f,!0),this.emit("pagevisible",f,this._currentKey,this),t===void 0&&(t=this.fadeInDuration),t>0&&f.setAlpha(0).fadeIn(t,1)),this},xJ=function(e){return this.sizerChildren.hasOwnProperty(e)},UA={getPage:mJ,swapPage:gJ,hasPage:xJ};Object.assign(UA,vJ);const kA=Phaser.Utils.Objects.GetValue;class Cv extends Rn{constructor(t,s){super(t,s),this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode(kA(s,"swapMode",0)),this.setFadeInDuration(kA(s,"fadeIn",0))}setSwapMode(t){return typeof t=="string"&&(t=yJ[t]),this.swapMode=t,this}setFadeInDuration(t){return this.fadeInDuration=t,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(t){this.swapPage(t)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}}Object.assign(Cv.prototype,UA);const yJ={invisible:0,destroy:1};c.register("pages",function(e){var t=new Cv(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.Pages",Cv);const SJ=Phaser.GameObjects.Mesh;class VA extends SJ{get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}forceUpdate(){return this.dirtyCache[10]=1,this}}const zA=Phaser.Math.Vector3,TJ=Phaser.Math.Matrix4;var WA=new zA,XA=new zA,HA=new TJ,CJ=function(e,t,s,f,C,w,F){t===void 0&&(t=0),s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=0),w===void 0&&(w=0),F===void 0&&(F=0),WA.set(t,s,f),XA.set(C,w,F),HA.fromRotationXYTranslation(XA,WA,!0);for(var N=0,z=e.vertices.length;N<z;N++)e.vertices[N].transformMat4(HA)};const MJ=Phaser.Utils.Objects.IsPlainObject,ph=Phaser.Utils.Objects.GetValue,EJ=Phaser.Geom.Mesh.GenerateGridVerts,$y=Phaser.Math.RadToDeg,Mv=Phaser.Math.DegToRad,YA=45,PJ=1+1/Math.sin(Mv(YA));let $A=class extends VA{constructor(t,s,f,C,w,F){MJ(s)&&(F=s,s=ph(F,"x",0),f=ph(F,"y",0),C=ph(F,"key",null),w=ph(F,"frame",null)),super(t,s,f,C,w),this.type="rexPerspectiveImage",this.setSizeToFrame(),this.resetPerspective(),this.panZ(PJ),this.hideCCW=ph(F,"hideCCW",!0);var N=ph(F,"gridWidth",0),z=ph(F,"gridHeight",N);this.resetVerts(N,z),this.prevFrame=this.frame}preUpdate(t,s){this.prevFrame!==this.frame&&(this.prevFrame=this.frame,this.syncSize()),super.preUpdate(t,s)}get originX(){return .5}get originY(){return .5}resetPerspective(){return this.setPerspective(this.width,this.height,YA),this}resetVerts(w,F){if(w!==void 0&&(this.gridWidth=w),F!==void 0&&(this.gridHeight=F),this.clear(),this.dirtyCache[9]=-1,this.width===0||this.height===0)return this;var f=this.frame.cutWidth,C=this.frame.cutHeight,w,F;this.gridWidth===0?w=Math.max(f/8,32):F=this.gridWidth,this.gridHeight===0?F=Math.max(C/8,32):F=this.gridHeight,EJ({mesh:this,width:f/this.height,height:C/this.height,widthSegments:Math.ceil(f/w),heightSegments:Math.ceil(C/F)});var N=this.transformInfo;return N&&this.transformVerts(N.x,N.y,N.z,N.rotateX,N.rotateY,N.rotateZ),this}syncSize(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}get rotationX(){return this.modelRotation.x}set rotationX(t){this.modelRotation.x=t}get angleX(){return $y(this.rotationX)}set angleX(t){this.rotationX=Mv(t)}get rotationY(){return this.modelRotation.y}set rotationY(t){this.modelRotation.y=t}get angleY(){return $y(this.rotationY)}set angleY(t){this.rotationY=Mv(t)}get rotationZ(){return this.modelRotation.z}set rotationZ(t){this.modelRotation.z=t}get angleZ(){return $y(this.rotationZ)}set angleZ(t){this.rotationZ=Mv(t)}transformVerts(t,s,f,C,w,F){return t===void 0&&(t=0),s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=0),w===void 0&&(w=0),F===void 0&&(F=0),this.transformInfo||(this.transformInfo={}),this.transformInfo.x=t,this.transformInfo.y=s,this.transformInfo.rotateX=C,this.transformInfo.rotateY=w,this.transformInfo.rotateZ=F,CJ(this,t,s,f,C,w,F),this}};const wJ=Phaser.Textures.DynamicTexture;var _A=function(e,t,s){t===void 0&&(t=2),s===void 0&&(s=2);var f=new wJ(e.sys.textures,null,t,s);return f};const bJ=Phaser.Utils.Objects.IsPlainObject,Ev=Phaser.Utils.Objects.GetValue;class ZA extends $A{constructor(t,s,f,C,w,F){bJ(s)&&(F=s,s=Ev(F,"x",0),f=Ev(F,"y",0),C=Ev(F,"width",32),w=Ev(F,"height",32));var N=_A(t,C,w);super(t,s,f,N,null,F),this.type="rexPerspectiveRenderTexture",this.rt=this.texture}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.rt.destroy(),this.rt=null)}snapshot(t,s){return s===void 0&&(s={}),s.gameObjects=t,s.renderTexture=this.rt,G0(s),(this.width!==this.frame.realWidth||this.height!==this.frame.realHeight)&&this.syncSize(),this}}Phaser.Animations.AnimationState,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue;var or=function(e,t,s,f){if(Array.isArray(e))for(var C=!1,w=0,F=e.length;w<F;w++){var N=e[w];if(!(f&&!N)&&(s?C=t.call(s,N,w,e):C=t(N,w,e),C))return}else{var C=!1;for(var z in e){var N=e[z];if(!(f&&!N)&&(s?C=t.call(s,N,z,e):C=t(N,z,e),C))return}}};const kl=Phaser.Math.RadToDeg,Vl=Phaser.Math.DegToRad;class AJ extends dn{constructor(t,s,f,C,w,F){super(t,s,f,C,w),this.faces=F,or(F,function(N){N.setPosition(s,f),this.add(N)},this,!0)}get rotationX(){return 0}set rotationX(t){}get angleX(){return kl(this.rotationX)}set angleX(t){this.rotationX=Vl(t)}get rotateX(){return kl(this.rotationX)}set rotateX(t){this.rotationX=Vl(t)}get rotationY(){return 0}set rotationY(t){}get angleY(){return kl(this.rotationY)}set angleY(t){this.rotationY=Vl(t)}get rotateY(){return kl(this.rotationY)}set rotateY(t){this.rotationY=Vl(t)}get rotationZ(){return 0}set rotationZ(t){}get angleZ(){return kl(this.rotationZ)}set angleZ(t){this.rotationZ=Vl(t)}get rotateZ(){return kl(this.rotationZ)}set rotateZ(t){this.rotationZ=Vl(t)}setDebug(t,s){return or(this.faces,function(f){f.setDebug(t,s)},null,!0),this}panX(t){return or(this.faces,function(s){s.panX(t)},null,!0),this}panY(t){return or(this.faces,function(s){s.panY(t)},null,!0),this}panZ(t){return or(this.faces,function(s){s.panZ(t)},null,!0),this}transformVerts(t,s,f,C,w,F){return or(this.faces,function(N){N.transformVerts(t,s,f,C,w,F)},null,!0),this}forEachFace(t,s,f){return or(this.faces,t,s,f),this}}const RJ=Phaser.Utils.Objects.IsPlainObject,LJ={key:"__WHITE"},OJ={image:$A,rendertexture:ZA};var KA=function(e,t){t===void 0&&(t=LJ);var s;return RJ(t)?(t.hasOwnProperty("type")||(t.hasOwnProperty("key")?t.type="image":t.hasOwnProperty("width")&&(t.type="rendertexture")),s=new OJ[t.type](e,t),e.add.existing(s)):s=t,s},FJ=function(e,t,s){var f;if(s===void 0){f=[];for(var C,w,F=0,N=t.length;F<N;F++)w=t[F],w?C=KA(e,w):C=null,f.push(C)}else{f={};for(var C,z,F=0,N=s.length;F<N;F++)z=s[F],t.hasOwnProperty(z)?C=KA(e,t[z]):C=null,f[z]=C}return f};const DJ=Phaser.Math.DegToRad,JA=DJ(180);var IJ=function(e,t){var s=t.back;s&&(e.orientation===0?s.transformVerts(0,0,0,0,JA,0):s.transformVerts(0,0,0,JA,0,0))};const _y=Phaser.Utils.Objects.GetValue,BJ=Phaser.Math.Linear;let NJ=class extends Jo{constructor(t,s){super(t,s),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setEase(_y(t,"ease","Cubic")),this.setFrontToBackDirection(_y(t,"frontToBack",0)),this.setBackToFrontDirection(_y(t,"backToFront",1)),this}setFrontToBackDirection(t){return typeof t=="string"&&(t=QA[t]),this.endAngleFB=t===0?180:-180,this}setBackToFrontDirection(t){return typeof t=="string"&&(t=QA[t]),this.endAngleBF=t===0?-180:180,this}start(t,s){if(this.timer.isRunning)return this;this.timer.setDelay(this.delay).setDuration(t);var f=s+1,C=this.parent;return C.face===0?(this.startAngle=0,this.endAngle=this.endAngleFB*f):(this.startAngle=this.endAngleBF,this.endAngle=this.startAngle-this.endAngleBF*f),super.start(),this}flip(t,s){return this.isRunning?this:(t===void 0&&(t=this.duration),s===void 0&&(s=0),this.start(t,s),this.emit("start",this.parent,this),this.parent.currentFaceIndex=(this.parent.currentFaceIndex+s+1)%2,this)}flipRight(t,s){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(0):this.setBackToFrontDirection(0),this.flip(t,s),this}flipLeft(t,s){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(1):this.setBackToFrontDirection(1),this.flip(t,s),this}updateTarget(t,s){var f=this.easeFn(s.t),C=BJ(this.startAngle,this.endAngle,f);t.orientation===0?t.angleY=C:t.angleX=C}};const QA={right:0,"left-to-right":0,left:1,"right-to-left":1},GJ=Phaser.Utils.Objects.IsPlainObject,vh=Phaser.Utils.Objects.GetValue,UJ=["back","front"];class kJ extends AJ{constructor(t,s,f,C){GJ(s)&&(C=s,s=vh(C,"x",0),f=vh(C,"y",0));var w=FJ(t,C,UJ),F=w.back,N=w.front,z=vh(C,"width"),H=vh(C,"height");if(z===void 0||H===void 0){if(z===void 0){var Z=N?N.width:0,tt=F?F.width:0;z=Math.max(Z,tt)}if(H===void 0){var nt=N?N.height:0,st=F?F.height:0;H=Math.max(nt,st)}}super(t,s,f,z,H,w),this.type="rexPerspectiveCard",this.frontFaceRotationX=0,this.frontFaceRotationY=0,this.frontFaceRotationZ=0,or(w,function(ft,dt){this[`${dt}Face`]=ft},this);var ht=vh(C,"flip",void 0);ht!==!1&&(this.flip=new NJ(this,ht)),this.setOrientation(vh(C,"orientation",0)),IJ(this,w),this.setFace(vh(C,"face",0))}get rotationX(){return this.frontFaceRotationX}set rotationX(t){this.frontFaceRotationX!==t&&(this.frontFaceRotationX=t,or(this.faces,function(s){s.rotationX=t},null,!0))}get rotationY(){return this.frontFaceRotationY}set rotationY(t){this.frontFaceRotationY!==t&&(this.frontFaceRotationY=t,or(this.faces,function(s){s.rotationY=t},null,!0))}get rotationZ(){return this.frontFaceRotationZ}set rotationZ(t){this.frontFaceRotationZ!==t&&(this.frontFaceRotationZ=t,or(this.faces,function(s){s.rotationZ=t},null,!0))}setOrientation(t){return typeof t=="string"&&(t=VJ[t]),this.orientation=t,this}get face(){return this.currentFaceIndex}set face(t){typeof t=="string"&&(t=zJ[t]),this.currentFaceIndex=t;var s=t===1,f=s?180:0;this.orientation===0?this.angleY=f:this.angleX=f}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}}const VJ={x:0,horizontal:0,h:0,y:1,vertical:1,v:1},zJ={front:0,back:1};Phaser.Utils.Objects.GetValue,Phaser.Math.RadToDeg,Phaser.Math.DegToRad,Phaser.Math.Angle.WrapDegrees,Phaser.Math.Angle.ShortestBetween,Phaser.Math.Wrap,Phaser.Math.Linear,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue,Phaser.Math.DegToRad,Phaser.Math.RadToDeg,Phaser.Math.Angle.WrapDegrees,Phaser.Math.Linear,Phaser.Math.Wrap,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue,Phaser.Math.Wrap;const WJ=Phaser.Utils.Objects.GetValue;var XJ=function(e,t,s){t.visibleSibling=[],t.isRunning=!1,t.useParentBounds=WJ(s,"useParentBounds",!1),t.setPosition(e.x,e.y).setVisible(!1),e.pin(t)},jA=function(e,t){if(!e)return!1;for(var s=t.visibleSibling,f=0,C=s.length;f<C;f++)e.setChildVisible(s[f],!0);return s.length=0,e.setChildVisible(t,!1),t.isRunning=!1,!0},HJ=function(e,t){if(!e)return!1;jA(e,t);var s=t.useParentBounds;G0({gameObjects:e.getAllVisibleChildren(),renderTexture:t.rt,x:t.x,y:t.y,width:s?e.displayWidth:void 0,height:s?e.displayHeighth:void 0,originX:s?e.originX:void 0,originY:s?e.originY:void 0}),e.setChildVisible(t,!0);for(var f=t.visibleSibling,C=e.children,w=0,F=C.length;w<F;w++){var N=C[w];N.visible&&N!==t&&(e.setChildVisible(N,!1),f.push(N))}return t.isRunning=!0,!0},qA=function(e){return class extends e{constructor(s,f){var C=s.scene;super(C,0,0,1,1,f),C.add.existing(this),XJ(s,this,f)}destroy(s){!this.scene||this.ignoreDestroy||(this.exit(),super.destroy(s))}enter(){var s=HJ(this.rexContainer.parent,this);return s&&this.syncSize(),this}exit(){return jA(this.rexContainer.parent,this),this}}};class t2 extends qA(ZA){get perspectiveState(){return this.isRunning}}const YJ=Phaser.Utils.Objects.GetValue;var $J=function(e){var t=this.scene;this.setSnapshotPadding(YJ(e,"snapshotPadding",0)),e=Zn(e),delete e.width,delete e.height,e.front={width:1,height:1},e.back={width:1,height:1};var s=new kJ(t,e);t.add.existing(s);var f=s.flip;if(f){var C=this;f.on("start",function(){C.enterPerspectiveMode()}).on("complete",function(){C.exitPerspectiveMode()})}return s};const _J=["front","back"];var ZJ={enterPerspectiveMode(){return this.isInPerspectiveMode?this:(this.setChildVisible(this.perspectiveCard,!0),this.snapshotFace(0),this.snapshotFace(1),this.setChildVisible(this.childrenMap.front,!1),this.setChildVisible(this.childrenMap.back,!1),this.perspectiveCard.setSize(this.width,this.height),this)},exitPerspectiveMode(){if(!this.isInPerspectiveMode)return this;this.setChildVisible(this.perspectiveCard,!1);var e=this.perspectiveCard.face===0;return this.setChildVisible(this.childrenMap.front,e),this.setChildVisible(this.childrenMap.back,!e),this},setSnapshotPadding(e){return this.snapshotPadding=e,this},snapshotFace(e){typeof e=="number"&&(e=_J[e]);var t=this.perspectiveCard.faces[e],s=this.childrenMap[e];t.rt.clear();var f=s.visible;s.visible=!0;var C=s.isRexContainerLite?s.getAllVisibleChildren():s;return t.snapshot(C,{padding:this.snapshotPadding}),s.visible=f,this}};const e2=Phaser.Utils.Objects.GetValue;class Zy extends Rn{constructor(t,s){super(t,s),this.type="rexPerspectiveCard";var f=s.back,C=e2(s,"expand.back",!0);this.add(f,{key:"back",expand:C});var w=s.front,F=e2(s,"expand.front",!0);this.add(w,{key:"front",expand:F}),this.perspectiveCard=$J.call(this,s),this.pin(this.perspectiveCard),this.exitPerspectiveMode(!1)}get flip(){return this.perspectiveCard.flip}get face(){return this.perspectiveCard.face}set face(t){if(!(this.flip&&this.flip.isRunning)){this.perspectiveCard.face=t;var s=t===0,f=this.childrenMap.front,C=this.childrenMap.back;this.setChildVisible(f,s),this.setChildVisible(C,!s)}}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}get isInPerspectiveMode(){return this.perspectiveCard.visible}get rotationX(){return this.perspectiveCard.rotationX}set rotationX(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationX=t}get angleX(){return this.perspectiveCard.angleX}set angleX(t){this.enterPerspectiveMode(),this.perspectiveCard.angleX=t}get rotationY(){return this.perspectiveCard.rotationY}set rotationY(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationY=t}get angleY(){return this.perspectiveCard.angleY}set angleY(t){this.enterPerspectiveMode(),this.perspectiveCard.angleY=t}get rotationZ(){return this.perspectiveCard.rotationZ}set rotationZ(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationZ=t}get angleZ(){return this.perspectiveCard.angleZ}set angleZ(t){this.enterPerspectiveMode(),this.perspectiveCard.angleZ=t}panX(t){return this.enterPerspectiveMode(),this.perspectiveCard.panX(t),this}panY(t){return this.enterPerspectiveMode(),this.perspectiveCard.panY(t),this}panZ(t){return this.enterPerspectiveMode(),this.perspectiveCard.panZ(t),this}transformVerts(t,s,f,C,w,F){return this.enterPerspectiveMode(),this.perspectiveCard.transformVerts(t,s,f,C,w,F),this}forEachFace(t,s,f){return this.enterPerspectiveMode(),this.perspectiveCard.forEachFace(t,s,f),this}}Object.assign(Zy.prototype,ZJ),c.register("perspectiveCard",function(e){var t=new Zy(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.PerspectiveCard",Zy);var KJ=function(e){var t=this.getElement("tabs.buttons");if(!(e>=t.length))return t[e].name},JJ=function(e){for(var t=this.getElement("tabs.buttons"),s=0,f=t.length;s<f;s++)if(t[s].name===e)return s};const QJ=Phaser.Utils.Objects.IsPlainObject,Ky=Phaser.Utils.Objects.GetValue,jJ=Phaser.Utils.String.UUID;var qJ=function(e,t,s){if(QJ(e)){var f=e;e=Ky(f,"key"),t=Ky(f,"tab"),s=Ky(f,"page")}return e||(e=jJ()),t.name=e,this.childrenMap.tabs.addButton(t),this.childrenMap.pages.addPage(s,{key:e}),this},tQ=function(e,t){var s;if(typeof e=="number"?s=e:s=this.getPageIndex(e),s!=null){var f;t!==void 0&&(f=this.childrenMap.pages.fadeInDuration,this.childrenMap.pages.fadeInDuration=t),this.childrenMap.tabs.emitButtonClick(s),f!==void 0&&(this.childrenMap.pages.fadeInDuration=f)}return this},eQ=function(e){return this.swapPage(0,e),this},iQ=function(e){var t=this.getElement("tabs.buttons").length-1;return this.swapPage(t,e),this},sQ={swapPage:tQ,swapFirstPage:eQ,swapLastPage:iQ},nQ={removePage(e,t){typeof e=="number"&&(e=this.getPageKey(e));var s=this.childrenMap.tabs,f=s.getByName(e),C=this.childrenMap.pages,w=C.getElement(e);return!f||!w?this:(C.removeChildrenMap(e),s.removeButton(f,t),C.remove(w,t),this)},removeAllPages(e){for(var t=this.getElement("tabs.buttons"),s=t.length-1;s>=0;s--)this.removePage(t[s].name,e);return this}},rQ=function(e){return typeof e=="number"&&(e=this.getPageKey(e)),this.childrenMap.pages.getPage(e)},aQ=function(e){var t;return typeof e=="number"?t=e:t=this.getPageIndex(e),this.getElement("tabs.buttons")[t]},oQ={top:1,left:3,right:5,bottom:7},i2={top:"bottom",left:"right",right:"left",bottom:"top"},hQ=function(e){var t=oQ[e];if(t===void 0)return this;var s=this.childrenMap.tabs,f=this.sizerChildren.indexOf(s);if(f===t)return this;this.sizerChildren[f]=null,this.sizerChildren[t]=s;var C=this.getSizerConfig(s).padding,w=i2[this.tabsPosition],F=i2[e];return C[F]=C[w],C[w]=0,this.tabsPosition=e,this},lQ={setTabsPadding(e,t){var s=this.childrenMap.tabs;return s.setOuterPadding(e,t),this},getTabsPadding(e){var t=this.childrenMap.tabs;return t.getOuterPadding(e)}},s2={getPageKey:KJ,getPageIndex:JJ,addPage:qJ,getPage:rQ,getTab:aQ,setTabPosition:hQ};Object.assign(s2,sQ,nQ,lQ);const hr=Phaser.Utils.Objects.GetValue,n2=nr.prototype.add;let Pv=class extends nr{constructor(t,s){s===void 0&&(s={}),s.column=3,s.row=3,s.columnProportions=[0,0,0],s.rowProportions=[0,0,0];var f=hr(s,"expand.pages",!0);f&&(s.columnProportions[1]=1,s.rowProportions[1]=1),super(t,s),this.type="rexTabPages";var C=hr(s,"background",void 0);C&&this.addBackground(C);var w=hr(s,"pages"),F=new Cv(t,w);t.add.existing(F);var N=hr(s,"tabsPosition",void 0);N===void 0&&(N=hr(s,"tabPosition","top"));var z=hr(s,"wrapTabs",!1),H=z?ho:rs,Z=hr(s,"tabs",void 0);Z===void 0&&(Z={}),Z.orientation=N==="top"||N==="bottom"?"x":"y",Z.buttonsType="radio",!z&&!Z.hasOwnProperty("expand")&&(Z.expand=hr(s,"expand.tabs",!1));var tt=new H(t,Z);t.add.existing(tt),n2.call(this,F,{column:1,row:1,expand:f});var nt,st,ht=hr(s,"space.item",0);switch(N){case"top":nt=1,st=0,ht={bottom:ht};break;case"bottom":nt=1,st=2,ht={top:ht};break;case"left":nt=0,st=1,ht={right:ht};break;case"right":nt=2,st=1,ht={left:ht};break}n2.call(this,tt,{column:nt,row:st,padding:ht,expand:z?!0:hr(s,"expand.tabs",!1),align:hr(s,"align.tabs","left")}),this.addChildrenMap("background",C),this.addChildrenMap("tabs",tt),this.addChildrenMap("pages",F),this.tabsPosition=N,tt.on("button.click",function(ft){var dt=ft.name;F.hasPage(dt)&&F.swapPage(dt)}),tt.on("button.statechange",function(ft,dt,gt,Et){var yt=gt?"tab.focus":"tab.blur";this.emit(yt,ft,ft.name)},this),F.on("pagevisible",function(ft,dt,gt){this.emit("page.focus",ft,dt)}),F.on("pageinvisible",function(ft,dt,gt){this.emit("page.blur",ft,dt)})}get currentKey(){return this.getElement("pages").currentKey}set currentKey(t){this.showPage(t)}get keys(){return this.getElement("pages").keys}get currentPage(){return this.getElement("pages").currentPage}get previousPage(){return this.getElement("pages").previousPage}};Object.assign(Pv.prototype,s2),c.register("tabPages",function(e){var t=new Pv(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.TabPages",Pv);class uQ extends cp{constructor(t,s){s===void 0&&(s={}),s.destroy=!1,super(t,s)}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}}var dQ={expand(e){if(this.expanded===!0)return this;e===void 0&&(e=this.transitionDuration),this.expanded=!0;var t=this.childrenMap.title,s=this.childrenMap.child;if(this.show(s),this.reLayoutEnable){var f=this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer();f.layout()}return t.emit("folder.expand",e,this),s.emit("folder.expand",e,this),this.emit("expand.start",this),this.childTransition.once("open",function(){this.emit("expand.complete",this)},this).requestOpen(null,e),this},collapse(e){if(this.expanded===!1)return this;e===void 0&&(e=this.transitionDuration),this.expanded=!1;var t=this.childrenMap.title,s=this.childrenMap.child;return t.emit("folder.collapse",e,this),s.emit("folder.collapse",e,this),this.emit("collapse.start",this),this.childTransition.once("close",function(){if(this.setChildScale(s,1,1).hide(s),this.reLayoutEnable){var f=this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer();f.layout()}this.emit("collapse.complete",this)},this).requestClose(null,e),this},toggle(e){return this.expanded?this.collapse(e):this.expand(e),this},setExpandedState(e){return this.reLayoutEnable=!1,e===void 0?this.expanded=void 0:e?this.expand(0):this.collapse(0),this.reLayoutEnable=!0,this}},fQ=function(e,t){ua.popUp.call(e,t,this.expandDirection)},cQ=function(e,t){ua.scaleDown.call(e,t,this.expandDirection)},pQ={setTransitionDuration(e){return this.transitionDuration=e,this.childTransition.setTransitInTime(e).setTransitOutTime(e),this},setExpandCallback(e){return e===void 0&&(e=fQ.bind(this)),this.childTransition.setTransitInCallback(e),this},setCollapseCallback(e){return e===void 0&&(e=cQ.bind(this)),this.childTransition.setTransitOutCallback(e),this}};const ki=Phaser.Utils.Objects.GetValue;let of=class extends Le{constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("orientation")||(s.orientation=1),super(t,s),this.type="rexFolder",this.reLayoutEnable=!0,this.expanded=void 0,this.expandDirection=this.orientation===1?"y":"x";var f=s.background,C=s.title,w=s.child;f&&this.addBackground(f);var F=ki(s,"space"),N=this.orientation===1?"left":"top",nt=ki(s,"align.title",N),st=ki(s,"expand.title",!0);this.add(C,{proportion:0,align:nt,expand:st,padding:{left:ki(F,"titleLeft",0),right:ki(F,"titleRight",0),top:ki(F,"titleTop",0),bottom:ki(F,"titleBottom",0)}});var z=ki(s,"toggleByTarget",void 0),H=ki(s,"toggleClickConfig");z===void 0&&(z=C),z&&px.onClick.call(z,function(){this.toggle()},this,H),this.childTransition=new uQ(w);var Z=ki(s,"customChildOrigin",!1);if(!Z){var tt=this.rtl?1:0;w.setOrigin(tt)}var nt=ki(s,"align.child","left"),st=ki(s,"expand.child",!0),ht=st?1:0;this.add(w,{proportion:ht,align:nt,expand:st,padding:{left:ki(F,"childLeft",0),right:ki(F,"childRight",0),top:ki(F,"childTop",0),bottom:ki(F,"childBottom",0)}}),this.addChildrenMap("title",C),this.addChildrenMap("child",w),this.addChildrenMap("background",f);var ft=s.transition;this.setTransitionDuration(ki(ft,"duration",200)),this.setExpandCallback(ki(ft,"expandCallback",void 0)),this.setCollapseCallback(ki(ft,"collapseCallback",void 0)),this.reLayoutTarget=ki(s,"reLayoutTarget",void 0);var dt=s.onExpandStart;dt&&this.on("expand.start",dt);var gt=s.onExpandComplete;gt&&this.on("expand.complete",gt);var Et=s.onCollapseStart;Et&&this.on("collapse.start",Et);var yt=s.onCollapseComplete;yt&&this.on("collapse.complete",yt);var Dt=ki(s,"expanded",void 0);Dt!==void 0&&this.setExpandedState(Dt)}};Object.assign(of.prototype,dQ,pQ),c.register("folder",function(e){var t=new of(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.Folder",of);var vQ=function(e,t,s,f){for(var C in this.treesMap){var w=this.treesMap[C];if(rh(w.nodeBody,e,t,s,f))return w;var F=w.pointToChild(e,t,s,f);if(F)return F}return null},mQ=function(e){return e===void 0&&(e={}),e.targetMode="parent",e.targetSizers=[this],Ap(this,e),this},r2=function(e){return class extends e{get isTree(){return!1}get isNode(){return!1}setText(s){return this.text=s,this}get text(){var s=this.nodeBody;return s.text}set text(s){var f=this.nodeBody;f.setText&&f.setText(s)}setTexture(s,f){var C=this.nodeBody;return C.setTexture&&C.setTexture(s,f),this}get texture(){var s=this.nodeBody;if(s)return s.texture}get frame(){var s=this.nodeBody;if(s)return s.frame}}},gQ=function(e,t,s,f){for(var C in this.nodesMap){var w=this.nodesMap[C];if(this.isTreeObject(w)){var F=w;if(rh(F.nodeBody,e,t,s,f))return F;var N=F.pointToChild(e,t,s,f);if(N)return N}else if(rh(w,e,t,s,f))return w}return null},xQ={getTreePatent(e){if(e===void 0&&(e=this),!!e.rexSizer)return e.rexSizer.treeParent},getTreeRoot(e){e===void 0&&(e=this);for(var t;;){if(!e.rexSizer)return;if(t=e.rexSizer.treeParent,t===null)return e;e=t}},getTreesSizer(e){var t=this.getTreeRoot(e);return t?t.getParentSizer():null},isGrandsonNode(e){if(e===void 0||!e.rexSizer)return!1;for(var t;;){if(!e.rexSizer)return!1;if(t=e.rexSizer.treeParent,t===this)return!0;if(t===null)return!1;e=t}return!1}},hf=function(e,t,s,f,C=!1){var w;if(Qs(t))w=t,delete t[key];else if(Qn(t)){var F=t;w=F(e,s),w&&e.add.existing(w)}else(C||t)&&f&&(w=f(e,t,s));return w},Jy=function(e,t,s){var f=ji(e,t);return f},yQ=function(e,t,s){var f=new Kd(e,t);return e.add.existing(f),f.resetDisplayContent(""),f};const zl=Phaser.Utils.Objects.GetValue;class a2 extends r2(Le){constructor(t,s,f){var C=s.space;super(t,{orientation:"x",space:{left:zl(C,"nodeLeft",0),right:zl(C,"nodeRight",0),top:zl(C,"nodeTop",0),bottom:zl(C,"nodeBottom",0)}}),this.type="rexTreeNode";var w=hf(t,zl(s,"nodeBackground"),f,Jy,!1),F=hf(t,zl(s,"nodeBody"),f,yQ,!0);w&&this.addBackground(w),this.add(F,{proportion:1}),this.nodeBody=F,this.addChildrenMap("background",w),this.addChildrenMap("nodeBody",F)}get isNode(){return!0}getTreePatent(){return this.rexSizer.treeParent}getTreeRoot(){var t=this.rexSizer.treeParent;return t?t.getTreeRoot():null}getTreesSizer(){var t=this.getTreeRoot();return t?t.getParentSizer():null}}var o2=function(e,t){var s=e.parentContainer;if(s){t.isRexContainerLite?t.addToContainer(s):s.add(t);return}var f=e.displayList;if(rd(f)){t.isRexContainerLite?t.addToLayer(f):f.add(t);return}e.scene.add.existing(t)};const h2=Phaser.Utils.String.UUID;var SQ={addTree(e,t){if(Qs(e)){var s=e;e={nodeBody:s,nodeKey:t}}return this.insertTree(void 0,e)},insertTree(e,t){var s;typeof t=="string"?(s=t,t=void 0):t&&(s=t.nodeKey,delete t.nodeKey),s===void 0&&(s=h2());var f=this.createTree(t);return o2(this,f),this.insertNode(e,f,{expand:!0}),f._postAddCallback(),f},addNode(e,t){return this.insertNode(void 0,e,t)},insertNode(e,t,s){var f;Qs(t)||(s=t,t=new a2(this.scene,this.configSave,{isLeaf:!0})),typeof s=="string"?(f=s,s=void 0):s&&(f=s.nodeKey,delete s.nodeKey),f===void 0&&(f=h2()),s===void 0&&(s={}),s.hasOwnProperty("expand")||(s.expand=!0),this.removeNode(t,!1),t.rexSizer.treeParent=this,this.nodesMap.hasOwnProperty(f)&&(console.error(`[Trees] Duplicate nodeKey '${f}'`),this.removeNode(this.nodesMap[f],!0)),t.nodeKey=f,this.nodesMap[f]=t;var C=this.childrenMap.child;return C.insert(e,t,s),t}},TQ={removeNode(e,t){if(typeof e=="string"&&(e=this.getTree(e)),!e)return this;var s=this.getTreePatent(e);if(!s)return this;delete s.nodesMap[e.nodeKey],e.nodeKey=null,e.rexSizer.treeParent=null;var f=s.childrenMap.child;return f.remove(e,t),this},removeAllNodes(e){var t=this.nodesMap;for(var s in t)this.removeNode(t[s],e);return this}},CQ={getNode(e){if(typeof e=="string"&&(e=e.split(".")),e.length!==0){var t=e.shift(),s=this.nodesMap[t];return e.length===0?s:s&&this.isTreeObject(s)?s.getNode(e):null}},getNodes(e){var t=this.nodesMap;if(!e)e=nodes;else for(var s in t)e.push(t[s]);return e},getAllNodes(e){}},l2={pointToChild:gQ};Object.assign(l2,xQ,SQ,TQ,CQ);var MQ=function(e,t,s){var f=new Cd(e,t);return e.add.existing(f),f.on("expand.start",function(C){C.setDirection("down")}).on("collapse.complete",function(C){C.setDirection("right")}),f};const u2=Phaser.Utils.Objects.GetValue;var EQ=function(e,t){var s=new a2(e,t,{isLeaf:!1});e.add.existing(s);var f=hf(e,u2(t,"toggleButton"),{isLeaf:!1},MQ,!0);return s.insert(0,f,{padding:{right:u2(t,"space.toggleButton",0)},fitRatio:1}),s.addChildrenMap("toggleButton",f),s};const d2=Phaser.Utils.Objects.GetValue;var PQ=function(e,t){var s=new Le(e,{orientation:d2(t,"childrenOrientation","y")});e.add.existing(s);var f=hf(e,d2(t,"childrenBackground"),{isLeaf:!1},Jy,!1);return f&&s.addBackground(f),s};const wQ=Phaser.Utils.Objects.Clone;var bQ=function(e,t){var s=e?wQ(e):{};if(!t)return s;for(var f in t)s[f]=t[f];return s};const fo=Phaser.Utils.Objects.GetValue;class mh extends r2(of){constructor(t,s){s===void 0&&(s={});var f=hf(t,fo(s,"background"),{isLeaf:!1},Jy,!1),C=PQ(t,s),w=C.childrenMap.items,F=EQ(t,s),N=F.childrenMap.toggleButton,z=F.childrenMap.nodeBody,H=qo(fo(s,"orientation","y")),Z=s.space;if(Z){var tt=fo(Z,"indent",0);Z.childLeft=fo(Z,"indentLeft",H===1?tt:0),Z.childRight=fo(Z,"indentRight",0),Z.childTop=fo(Z,"indentTop",H===0?tt:0),Z.childBottom=fo(Z,"indentBottom",0)}var nt={background:f,title:F,child:C,toggleByTarget:N,transition:s.transition,orientation:H,space:Z,align:s.align,expand:s.expand};super(t,nt),this.type="rexTree",this.rexSizer.treeParent=null,this.nodesMap={},this.configSave=s,this.nodeBody=z,this.addChildrenMap("toggleButton",N),this.addChildrenMap("nodeBody",z),this.addChildrenMap("childrenNodes",w),this.on("expand.start",function(){N.emit("expand.start",N),wv(this,"expand.start")},this).on("expand.complete",function(){N.emit("expand.complete",N),wv(this,"expand.complete")}).on("collapse.start",function(){N.emit("collapse.start",N),wv(this,"collapse.start")}).on("collapse.complete",function(){N.emit("collapse.complete",N),wv(this,"collapse.complete")});var st=this;st._postAddCallback=function(){var ht=fo(s,"expanded",!0);ht!==void 0&&st.setExpandedState(ht),delete st._postAddCallback}}destroy(t){!this.scene||this.ignoreDestroy||(this.configSave=void 0,Clear(this.nodesMap),this.nodesMap=void 0,super.destroy(t))}get isTree(){return!0}createTree(t){return mh.CreateTree(this.scene,this.configSave,t)}isTreeObject(t){return t&&t instanceof mh}}mh.CreateTree=function(e,t,s){return new mh(e,bQ(t,s))};var wv=function(e,t){var s=e.getTreesSizer();s&&s.emit(t,e)};Object.assign(mh.prototype,l2);const AQ=Phaser.Utils.String.UUID;var RQ={addTree(e){if(Qs(e)){var t=e;e={nodeBody:t,nodeKey}}return this.insertTree(void 0,e)},insertTree(e,t){var s;typeof t=="string"?(s=t,t=void 0):t&&(s=t.nodeKey,delete t.nodeKey),s===void 0&&(s=AQ());var f=mh.CreateTree(this.scene,this.treeConfig,t);return o2(this,f),f.nodeKey=s,this.treesMap[s]=f,this.insert(e,f,{expand:!0}),f._postAddCallback(),f}},LQ={removeTree(e,t){return typeof e=="string"&&(e=this.getTree(e)),e?(delete this.treesMap[e.nodeKey],e.nodeKey=null,this.remove(e,t),this):this},removeAllNodes(e){var t=this.treesMap;for(var s in t)this.removeTree(t[s],e);return this}},OQ={getTree(e){return this.treesMap[e]},getTrees(e){e===void 0&&(e=[]);for(var t in this.treesMap)e.push(this.treesMap[t]);return e},getNode(e){var t=e.indexOf(".");if(t===-1)return this.getTree(e);var s=this.getTree(e.substring(0,t));if(s)return s.getNode(e.substring(t+1))}},f2={pointToChild:vQ,setChildrenInteractive:mQ};Object.assign(f2,RQ,LQ,OQ);const FQ=Phaser.Utils.Objects.GetValue;class Qy extends Le{constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("orientation")||(s.orientation="y"),super(t,s),this.type="rexTrees",this.treesMap={},this.treeConfig=FQ(s,"tree")}destroy(t){!this.scene||this.ignoreDestroy||(this.treeConfig=void 0,Clear(this.treesMap),this.treesMap=void 0,super.destroy(t))}}Object.assign(Qy.prototype,f2),c.register("trees",function(e){var t=new Qy(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.Trees",Qy),c.register("textArea",function(e){var t=new Zd(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.TextArea",Zd);var DQ=function(e){Object.defineProperty(e,"childOY",{configurable:!0,get:function(){return e.textOY},set:function(t){e.textOY=t}}),Object.defineProperty(e,"topChildOY",{get:function(){return e.topTextOY}}),Object.defineProperty(e,"bottomChildOY",{get:function(){return e.bottomTextOY}}),Object.defineProperty(e,"childVisibleHeight",{get:function(){return e.textVisibleHeight}}),Object.defineProperty(e,"childHeight",{get:function(){return e.contentHeight}})},IQ={setText(e){var t=this.childrenMap.child;return t.setText(e),this},appendText(e){return this.setText(this.text+e),this}},BQ={scrollToLine(e){return this.setChildOY(-this.lineHeight*e),this},scrollToNextLine(e){e===void 0&&(e=1);var t=this.lineIndex+e;return this.scrollToLine(t),this}};const bv=Phaser.Utils.Objects.GetValue;class Av extends _d{constructor(t,s){s===void 0&&(s={});var f=bv(s,"text"),C;Qs(f)?C=f:(f===void 0&&(f={}),f.textArea=!0,C=new cd(t,f),t.add.existing(C)),DQ(C);var w=f.width===void 0,F=f.height===void 0;w&&(C.minWidth=0),F&&(C.minHeight=0),s.scrollMode=0,s.type="rexTextAreaInput",s.child={gameObject:C,expandWidth:w,expandHeight:F};var N=bv(s,"space",void 0);N&&(N.child=bv(N,"text",0)),s.scroller=!1,super(t,s),this.addChildrenMap("text",C);var z,H;C.on("cursorin",function(){var tt=C.textOY,nt=C.contentHeight,st=z!==tt,ht=H!==nt;z=tt,H=nt,ht&&this.resizeController(),(st||ht)&&(this.t=C.t)},this),C.on("textchange",function(tt){this.emit("textchange",tt,this)},this).on("close",function(){this.emit("close",this.text,this)},this);var Z=bv(s,"content",void 0);Z&&this.setText(Z)}get text(){return this.childrenMap.child.text}set text(t){t==null?t="":t=t.toString(),this.childrenMap.child.text!==t&&this.setText(t)}get lineHeight(){var t=this.childrenMap.child;return t.lineHeight}get lineIndex(){return Math.floor(-this.childOY/this.lineHeight)}get linesCount(){var t=this.childrenMap.child;return t.linesCount}get contentHeight(){var t=this.childrenMap.child;return t.contentHeight}get readOnly(){var t=this.childrenMap.child;return t.readOnly}set readOnly(t){var s=this.childrenMap.child;s.readOnly=t}setReadOnly(t){var s=this.childrenMap.child;return s.setReadOnly(t),this}get value(){return this.text}set value(t){this.text=t}}Object.assign(Av.prototype,IQ,BQ),c.register("textAreaInput",function(e){var t=new Av(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.TextAreaInput",Av),c.register("scrollablePanel",function(e){var t=new ef(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.ScrollablePanel",ef);var Rv={popUp:function(e,t){e.popUp(t)},scaleDown:function(e,t){e.scaleDown(t)},fadeIn:function(e,t){e.fadeIn(t)},fadeOut:function(e,t){e.fadeOut(t)}};const co={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};var NQ={setDisplayTime(e){return this.displayTime=e,this},setTransitOutTime(e){return this.transitOutTime=e,this},setTransitInTime(e){return this.transitInTime=e,this},setTransitInCallback(e){switch(typeof e=="string"&&(e=co[e]),e){case co.popUp:e=Rv.popUp;break;case co.fadeIn:e=Rv.fadeIn;break}return e||(e=a),this.transitInCallback=e,this},setTransitOutCallback(e){switch(typeof e=="string"&&(e=co[e]),e){case co.scaleDown:e=Rv.scaleDown;break;case co.fadeOut:e=Rv.fadeOut;break}return e||(e=a),this.transitOutCallback=e,this}},GQ={showMessage(e){if(this.scaleX0===void 0&&(this.scaleX0=this.scaleX),this.scaleY0===void 0&&(this.scaleY0=this.scaleY),e===void 0){if(this.messages.length===0)return this;e=this.messages.shift()}if(this.player.isPlaying)return this.messages.push(e),this;this.setScale(this.scaleX0,this.scaleY0).setVisible(!0),typeof e=="string"?this.setText(e):e(this),this.layout();var t=[[0,[this.transitInCallback,this,this.transitInTime]],[0,[this.emit,"transitin",this,this.transitInTime]],[this.transitInTime,[a]],[this.displayTime,[this.transitOutCallback,this,this.transitOutTime]],[0,[this.emit,"transitout",this,this.transitOutTime]],[this.transitOutTime,[this.setVisible,!1]],[30,[a]]];return this.player.load(t,this).once("complete",function(){this.showMessage()},this).start(),this},removeAllMessages(){return this.messages.length=0,this}};const lf=Phaser.Utils.Objects.GetValue;class jy extends ga{constructor(t,s){s===void 0&&(s={text:createDefaultTextObject(t)}),super(t,s),this.type="rexToast",this.setTransitInTime(lf(s,"duration.in",200)),this.setDisplayTime(lf(s,"duration.hold",1200)),this.setTransitOutTime(lf(s,"duration.out",200)),this.setTransitInCallback(lf(s,"transitIn",co.popUp)),this.setTransitOutCallback(lf(s,"transitOut",co.scaleDown)),this.player=new Wb(this,{dtMode:1}),this.messages=[],this.scaleX0=void 0,this.scaleY0=void 0,this.setVisible(!1)}destroy(t){!this.scene||this.ignoreDestroy||(this.player.destroy(),this.player=void 0,this.messages=void 0,super.destroy(t))}setScale(t,s){return s===void 0&&(s=t),this.scaleX0=t,this.scaleY0=s,super.setScale(t,s),this}get isShowingMessage(){return this.player.isPlaying}}Object.assign(jy.prototype,NQ,GQ),c.register("toast",function(e){var t=new jy(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.Toast",jy);var UQ={"bottom-to-top":1,"top-to-bottom":0,"right-to-left":1,"left-to-right":0},kQ={setQueueDirection(e){return typeof e=="string"&&(e=UQ[e]),this.rtl=e===0,this.orientation===1?e?this.queueDirection=0:this.queueDirection=1:e?this.queueDirection=2:this.queueDirection=3,this},setCreateMessageLabelCallback(e){return this.createMessageLabelCallback=e,this},setDisplayTime(e){return this.displayTime=e,this},setTransitOutTime(e){return this.transitOutTime=e,this},setTransitInTime(e){return this.transitInTime=e,this},setTransitInCallback(e){return e||(e=a),this.transitInCallback=e,this},setTransitOutCallback(e){return e||(e=a),this.transitOutCallback=e,this}};const VQ=px.onClick,c2=BP.delayCall,zQ=fp.moveTo;var WQ=function(e,t,s){var f=t(e.scene,s,e);if(VQ.call(f,function(){e.removeMessage(f)}),e.displayTime){var C=e.transitInTime+e.displayTime+10;c2.call(f,C,function(){e.removeMessage(f)})}return f},p2=function(e){for(var t=e.childrenMap.items,s,f=[],C=0,w=t.length;C<w;C++)s=t[C],f.push({x:s.x,y:s.y});return f},XQ=function(e){for(var t=e.childrenMap.items,s,f=[],C=0,w=t.length;C<w;C++)s=t[C],f.push({x:s.scaleX,y:s.scaleY}),s.setScale(1);e.layout();for(var F=p2(e),C=0,w=t.length;C<w;C++){var N=f[C];t[C].setScale(N.x,N.y)}return F},HQ=function(e,t,s,f){for(var C=e.childrenMap.items,w=Math.min(t.length,s.length,C.length),F,N,z,H=e.queueDirection,Z=0;Z<w;Z++){switch(F=C[Z],N=t[Z],z=s[Z],F.setPosition(N.x,N.y),H){case 0:if(N.y<=z.y)continue;break;case 1:if(N.y>=z.y)continue;break;case 2:if(N.x<=z.x)continue;break;case 3:if(N.x>=z.x)continue;break}zQ.call(F,f,z.x,z.y)}},YQ=function(e,t,s){var f=p2(e);e.add(t);var C=XQ(e);HQ(e,f,C,s),e.transitInCallback(t,s,e)},$Q={showMessage(e){var t=WQ(this,this.createMessageLabelCallback,e);return YQ(this,t,this.transitInTime),this},removeMessage(e){if(this.getParentSizer(e)!==this)return this;if(!e.__isDestroying){e.__isDestroying=!0;var t=this.transitOutTime;return this.transitOutCallback(e,t,this),c2.call(e,t+10,function(){delete e.__isDestroying,e.destroy()}),this}},removeAllMessages(){for(var e=this.childrenMap.items,t=0,s=e.length;t<s;t++)this.removeMessage(e[t]);return this}},v2={};Object.assign(v2,kQ,$Q);var m2={transitIn(e,t,s){switch(s.queueDirection){case 0:e.setOrigin(.5,1),ua.popUp.call(e,t,"y");break;case 1:e.setOrigin(.5,0),ua.popUp.call(e,t,"y");break;case 2:e.setOrigin(1,.5),ua.popUp.call(e,t,"x");break;case 3:e.setOrigin(0,.5),ua.popUp.call(e,t,"x");break}Ld.fadeIn.call(e,t)},transitOut(e,t,s){Ld.fadeOut.call(e,t)}};const gh=Phaser.Utils.Objects.GetValue;class qy extends Le{constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("orientation")||(s.orientation=1),super(t,s),this.type="rexToastQueue",this.setCreateMessageLabelCallback(gh(s,"createMessageLabelCallback")),this.setQueueDirection(gh(s,"queueDirection",1)),this.setTransitInTime(gh(s,"duration.in",200)),this.setDisplayTime(gh(s,"duration.hold",2e3)),this.setTransitOutTime(gh(s,"duration.out",200)),this.setTransitInCallback(gh(s,"transitIn",m2.transitIn)),this.setTransitOutCallback(gh(s,"transitOut",m2.transitOut))}}Object.assign(qy.prototype,v2),c.register("toastQueue",function(e){var t=new qy(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.ToastQueue",qy);var _Q=function(e,t){if(t===!1)return null;if(Qs(t))return t;var s=new Ge(e,t);return e.add.existing(s),s};const ZQ=Phaser.Utils.String.Pad;var g2=function(e,t){t===void 0&&(t="0x");var s=e.toString(16).toUpperCase();return s=ZQ(s,6,0,1),s=t+s,s},KQ=function(e,t){e&&(e.setTint?e.setTint(t):e.setFillStyle&&e.setFillStyle(t))};const Bn=Phaser.Utils.Objects.GetValue,JQ=Phaser.Utils.Objects.IsPlainObject,QQ=Phaser.Math.Clamp;let tS=class extends Le{constructor(t,s){s===void 0&&(s={}),s.orientation=0,super(t,s),this.type="rexColorInputLite";var f=Bn(s,"background",void 0),C=Bn(s,"swatch"),w;JQ(C)&&(w=Bn(C,"size"));var F=_Q(t,Bn(s,"swatch")),N=Bn(s,"inputText",{}),z;if(N&&(z=lo(t,N)),f&&this.addBackground(f),F){w=Bn(s,"swatchSize",w);var H;w!==void 0?(Ms(F,w,w),H=!1):H=Bn(s,"squareExpandSwatch",!0);var Z=H?1:0;this.add(F,{proportion:0,expand:!0,fitRatio:Z})}if(z){var tt=Bn(N,"width")===void 0?1:0,nt=Bn(N,"height")===void 0;this.add(z,{proportion:tt,expand:nt})}this.addChildrenMap("background",f),this.addChildrenMap("swatch",F),this.addChildrenMap("inputText",z),z&&z.on("close",function(){this.setValue(z.value)},this);var st=Bn(s,"valuechangeCallback",null);if(st!==null){var ht=Bn(s,"valuechangeCallbackScope",void 0);this.on("valuechange",st,ht)}this.setValue(Bn(s,"value",0))}get value(){return this._value}set value(t){if(typeof t=="string"){if(t=C0(t),t==null){var f=this.childrenMap.inputText;f&&f.setText(g2(this._value));return}}else t=QQ(Math.floor(t),0,16777215);if(this._value!==t){this._value=t;var s=this.childrenMap.swatch;s&&KQ(s,t);var f=this.childrenMap.inputText;f&&f.setText(g2(t)),this.emit("valuechange",this._value)}}setValue(t){return this.value=t,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}};var jQ={setCreateColorPickerBackgroundCallback(e){return this.colorPickerCreateBackgroundCallback=e,this},setColorPickerHPalettePosition(e){return this.colorPickerHPalettePosition=e,this},setColorPickerExpandDirection(e){return typeof e=="string"&&(e=qQ[e]),this.colorPickerExpandDirection=e,this},setColorPickerEaseInDuration(e){return e===void 0&&(e=0),this.colorPickerEaseInDuration=e,this},setColorPickerEaseOutDuration(e){return e===void 0&&(e=0),this.colorPickerEaseOutDuration=e,this},setColorPickerTransitInCallback(e){return this.colorPickerTransitInCallback=e,this},setColorPickerTransitOutCallback(e){return this.colorPickerTransitOutCallback=e,this},setColorPickerBounds(e){return this.colorPickerBounds=e,this},setColorPickerWidth(e){return this.colorPickerWidth=e,this},setColorPickerHeight(e){return this.colorPickerHeight=e,this},setColorPickerSize(e,t){return this.setColorPickerWidth(e).setColorPickerHeight(t),this},setColorPickerSpace(e){return e===void 0&&(e={}),this.colorPickerSpace=e,this},setColorComponentsHeight(e){return this.colorComponentsHeight=e,this},setColorComponentsFormatLabelConfig(e){return this.colorComponentsFormatLabelConfig=e,this},setColorComponentsInputTextConfig(e){return this.colorComponentsInputTextConfig=e,this},setColorComponentsSpace(e){return e===void 0&&(e={}),this.colorComponentsSpace=e,this}};const qQ={down:0,up:1},x2=Phaser.Display.Color,Lv=Phaser.Math.Percent;var tj=function(e,t,s){s===void 0&&(s=!1);var f=e.width,C=e.height,w=new x2;if(s)for(var F=0;F<C;F++){var N=Lv(F,0,C);w.setFromHSV(N,1,1),t.fillStyle=w.rgba,t.fillRect(0,F,f,1)}else for(var z=0;z<f;z++){var N=Lv(z,0,f);w.setFromHSV(N,1,1),t.fillStyle=w.rgba,t.fillRect(z,0,1,C)}},ej=function(e,t,s){for(var f=e.width,C=e.height,w=t.getImageData(0,0,f,C),F=w.data,N=new x2,z=0;z<C;z++)for(var H=0;H<f;H++){var Z=Lv(H,0,f),tt=1-Lv(z,0,C);N.setFromHSV(s,Z,tt);var nt=(z*f+H)*4;F[nt]=N.red,F[nt+1]=N.green,F[nt+2]=N.blue,F[nt+3]=255}t.putImageData(w,0,0)};const ij=Phaser.Display.Color,y2=Phaser.Math.Percent,sj=Phaser.Display.Color.ColorToRGBA,nj=Phaser.Display.Color.HSVToRGB;class rj extends jo{constructor(t,s,f,C,w,F){s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=2),w===void 0&&(w=2),super(t,s,f,C,w),this.type="rexColorPicker.HPaletteCanvas",this.colorObject=new ij,this.setOrientation(F),this.setSize(C,w)}setOrientation(t){return this.orientation=qo(t),this}updateTexture(){return tj(this.canvas,this.context,this.orientation),super.updateTexture(),this}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue=t}getHue(t,s){return t===void 0?this.hue:(this.orientation===0?this.hue=y2(t,0,this.width):this.hue=y2(s,0,this.height),this.hue)}getColor(t,s){if(t===void 0)return this.color;var f=this.getHue(t,s);return this.colorObject.setFromRGB(nj(f,1,1)),this.colorObject.color}setColor(t){return this.color===t?this:this}colorToLocalPosition(t,s){return s===void 0?s={}:s===!0&&(eS===void 0&&(eS={}),s=eS),this.colorObject.setFromRGB(sj(t)),this.orientation===0?(s.x=this.width*this.colorObject.h,s.y=this.height/2):(s.x=this.width/2,s.y=this.height*this.colorObject.h),s}}var eS=void 0,aj=Phaser.Math.RotateAround,S2=function(e,t,s,f){f===void 0?f={}:f===!0&&(iS===void 0&&(iS={}),f=iS),t-=e.width*e.originX,s-=e.height*e.originY;var C={x:t*e.scaleX,y:s*e.scaleY};return aj(C,0,0,-e.rotation),f.x=e.x+t,f.y=e.y+s,f},iS;class oj extends Rn{constructor(t,s){s===void 0&&(s={}),super(t,s);var f=s.width!=null?1:0,C=new rj(t).setOrientation(f);t.add.existing(C),this.type="rexColorPicker.HPalette",C.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var w=new Ge(t,{strokeColor:16777215,strokeWidth:2});t.add.existing(w),this.add(C,{key:"paletteCanvas",expand:!0}).add(w,{key:"marker",expand:!1})}resize(t,s){if(this.width===t&&this.height===s)return this;super.resize(t,s);var f=Math.min(t,s);return this.childrenMap.marker.setSize(f,f),this}onPaletteCanvasPointerDown(t,s,f,C){if(t.isDown){var w=this.childrenMap.paletteCanvas,F=w.getColor(s,f);this.setMarkerPosition(F),this.emit("input",F)}}get color(){return this.childrenMap.paletteCanvas.color}setColor(t){if(this.color===t)return this;var s=this.childrenMap.paletteCanvas;return s.setColor(t),this.setMarkerPosition(t),this}setMarkerPosition(t){var s=this.childrenMap.paletteCanvas,f=this.childrenMap.marker,C=s.colorToLocalPosition(t,!0);return S2(s,C.x,C.y,f),this.resetChildPositionState(f),this}getHue(t,s){var f=this.childrenMap.paletteCanvas;return f.getHue(t,s)}}const hj=Phaser.Display.Color,T2=Phaser.Math.Percent,C2=Phaser.Display.Color.ColorToRGBA,lj=Phaser.Display.Color.HSVToRGB;class uj extends jo{constructor(t,s,f,C,w,F){s===void 0&&(s=0),f===void 0&&(f=0),C===void 0&&(C=2),w===void 0&&(w=2),super(t,s,f,C,w),this.type="rexColorPicker.SVPaletteCanvas",F===void 0&&(F=1),this.colorObject=new hj,this.setHue(F),this.setSize(C,w)}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue!==t&&(this._hue=t,this.colorObject.h=t,this.dirty=!0)}setHue(t){return this.hue=t,this}updateTexture(){return ej(this.canvas,this.context,this.hue),super.updateTexture(),this}getColor(t,s){if(t===void 0)return this.colorObject.color;var f=T2(t,0,this.width),C=1-T2(s,0,this.height);return this.colorObject.setFromRGB(lj(this.hue,f,C)),this.colorObject.color}setColor(t){return this.color===t?this:(this.colorObject.setFromRGB(C2(t)),this.setHue(this.colorObject.h),this)}colorToLocalPosition(t,s){return s===void 0?s={}:s===!0&&(sS===void 0&&(sS={}),s=sS),this.colorObject.setFromRGB(C2(t)),s.x=this.width*this.colorObject.s,s.y=this.height*(1-this.colorObject.v),s}}var sS=void 0;class dj extends Rn{constructor(t,s){super(t,s);var f=new uj(t);t.add.existing(f),this.type="rexColorPicker.SVPalette",f.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var C=new Ge(t,{radius:5,strokeColor:16777215,strokeWidth:2});t.add.existing(C),this.add(f,{key:"paletteCanvas",expand:!0}).add(C,{key:"marker",expand:!1})}onPaletteCanvasPointerDown(t,s,f,C){if(t.isDown){var w=this.childrenMap.paletteCanvas,F=w.getColor(s,f);this.setMarkerPosition(F),this.emit("input",F)}}get color(){return this.childrenMap.paletteCanvas.color}setHue(t){var s=this.childrenMap.paletteCanvas;return s.setHue(t),this}setColor(t){if(this.color===t)return this;var s=this.childrenMap.paletteCanvas;return s.setColor(t),this.setMarkerPosition(t),this}setMarkerPosition(t){var s=this.childrenMap.paletteCanvas,f=this.childrenMap.marker,C=s.colorToLocalPosition(t,!0);return S2(s,C.x,C.y,f),this.resetChildPositionState(f),this}}const lr=Phaser.Utils.Objects.GetValue;class nS extends Le{constructor(t,s){super(t,s),this.type="rexColorPicker",this.freezePalettes=!1;var f=lr(s,"hPalette.position",0);typeof f=="string"&&(f=fj[f]);var C=f===0||f===2?1:0;this.setOrientation(C);var w=lr(s,"background",void 0),F,N;if(this.orientation===0){var F=lr(s,"hPalette.width",void 0);F===void 0&&(F=lr(s,"hPalette.size",10))}else N=lr(s,"hPalette.height",void 0),N===void 0&&(N=lr(s,"hPalette.size",10));var z=new oj(t,{width:F,height:N});t.add.existing(z);var H=lr(s,"svPalette.width",void 0),Z=lr(s,"svPalette.height",void 0),tt=new dj(t,{width:H,height:Z});t.add.existing(tt),w&&this.addBackground(w);var nt={proportion:0,expand:!0},st,ht;this.orientation===0?(st=H===void 0?1:0,ht=Z===void 0):(st=Z===void 0?1:0,ht=H===void 0);var ft={proportion:st,expand:ht};f===0||f===3?this.add(tt,ft).add(z,nt):this.add(z,nt).add(tt,ft),z.on("input",function(){tt.setHue(z.getHue()),this.setValue(tt.color,!0)},this),tt.on("input",function(){this.setValue(tt.color,!0)},this),this.addChildrenMap("background",w),this.addChildrenMap("hPalette",z),this.addChildrenMap("svPalette",tt);var dt=lr(s,"valuechangeCallback",null);if(dt!==null){var gt=lr(s,"valuechangeCallbackScope",void 0);this.on("valuechange",dt,gt)}this.setValue(lr(s,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){var s=this._value;this._value=t,this.freezePalettes||this.updatePalettes(),this.emit("valuechange",t,s,this)}}setValue(t,s){return this.freezePalettes=!!s,this.value=t,this.freezePalettes=!1,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}updatePalettes(){return this.childrenMap.hPalette.setColor(this.color),this.childrenMap.svPalette.setColor(this.color),this}postLayout(t,s,f){return this.childrenMap.hPalette.setMarkerPosition(this.value),this.childrenMap.svPalette.setMarkerPosition(this.value),super.postLayout(t,s,f),this}}var fj={bottom:0,left:1,top:2,right:3};const Gr=Phaser.Utils.Objects.GetValue,cj=Phaser.Display.Color,pj=Phaser.Display.Color.ColorToRGBA,vj=Phaser.Display.Color.HSVToRGB,xh=Phaser.Math.Clamp;class rS extends Le{constructor(t,s){s===void 0&&(s={}),s.orientation=0,super(t,s),this.type="rexColorComponents",this.colorObject=new cj;var f=Gr(s,"background",void 0),C=Gr(s,"formatLabel",void 0);Qs(C)||(C=as(t,C).resetDisplayContent());var w=[];if(s.inputText0&&s.inputText1&&s.inputText2)w.push(s.inputText0),w.push(s.inputText1),w.push(s.inputText2);else for(var F=Gr(s,"inputText"),N=0;N<3;N++){var z=lo(t,F).setMaxLength(3).setNumberInput();w.push(z)}f&&this.addBackground(f);var Z=Gr(s,"proportion.formatLabel",0),H=!!C.isRexContainerLite,tt=Gr(s,"expand.formatLabel",H);this.add(C,{proportion:Z,expand:tt});for(var Z=Gr(F,"width")===void 0?1:0,tt=Gr(F,"height")===void 0,N=0,nt=w.length;N<nt;N++)this.add(w[N],{proportion:Z,expand:tt});this.addChildrenMap("background",f),this.addChildrenMap("formatLabel",C),this.addChildrenMap("components",w),this.onClick(C,this.toggleColorFormat,this);for(var N=0,nt=w.length;N<nt;N++)w[N].on("close",function(){this.updateColorObject(),this.setValue(this.colorObject.color)},this);var st=Gr(s,"valuechangeCallback",null);if(st!==null){var ht=Gr(s,"valuechangeCallbackScope",void 0);this.on("valuechange",st,ht)}C.setText("RGB"),this.setValue(Gr(s,"value",16777215))}get value(){return this._value}set value(t){t=xh(Math.floor(t),0,16777215),this._value!==t&&(this._value=t,this.colorObject.setFromRGB(pj(t)),this.updateComponents(),this.emit("valuechange",this._value))}setValue(t){return this.value=t,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}get colorFormat(){return this.childrenMap.formatLabel.text}set colorFormat(t){this.colorFormat!==t&&(this.childrenMap.formatLabel.setText(t),this.updateComponents())}setColorFormat(t){return this.colorFormat=t,this}toggleColorFormat(){return this.colorFormat=this.colorFormat==="RGB"?"HSV":"RGB",this}updateComponents(){var t=this.childrenMap.components,s,f,C;return this.colorFormat==="RGB"?(s=this.colorObject.red,f=this.colorObject.green,C=this.colorObject.blue):(s=Math.floor(this.colorObject.h*360),f=Math.floor(this.colorObject.s*100),C=Math.floor(this.colorObject.v*100)),t[0].setValue(s),t[1].setValue(f),t[2].setValue(C),this}updateColorObject(){var t=this.childrenMap.components;if(this.colorFormat==="RGB"){var s=xh(t[0].value,0,255),f=xh(t[1].value,0,255),C=xh(t[2].value,0,255);this.colorObject.setTo(s,f,C)}else{var w=xh(t[0].value,0,359)/360,F=xh(t[1].value,0,100)/100,N=xh(t[2].value,0,100)/100;this.colorObject.setFromRGB(vj(w,F,N))}return this}}const aS=Phaser.Utils.Objects.GetValue;class mj extends Le{constructor(t,s){s===void 0&&(s={}),s.orientation=1,super(t,s),this.type="rexColorInput.ColorPickerPanel";var f=aS(s,"background",void 0),C=new nS(t,{hPalette:s.hPalette||{},svPalette:s.svPalette||{},space:{item:aS(s,"space.hPalette",8)}});t.add.existing(C);var w;s.colorComponents&&(w=new rS(t,s.colorComponents),t.add.existing(w)),f&&(this.addBackground(f),new pp(f,{stopAllLevels:!1})),this.add(C,{proportion:1,expand:!0}),w&&this.add(w,{proportion:0,expand:!0}),this.addChildrenMap("background",f),this.addChildrenMap("colorPicker",C),this.addChildrenMap("colorComponents",w),C.on("valuechange",function(F){this.setValue(F)},this),w&&w.on("valuechange",function(F){this.setValue(F)},this),this.setValue(aS(s,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){this._value=t;var s=this.childrenMap.colorPicker;s.setValue(t);var f=this.childrenMap.colorComponents;f&&f.setValue(t),this.emit("valuechange",t)}}setValue(t){return this.value=t,this}}Phaser.Utils.Objects.GetValue;var gj=function(t){var t=this.scene,s,f=this.colorPickerCreateBackgroundCallback;f&&(s=f.call(this,t),t.add.existing(s));var C=this.colorPickerWidth;C===void 0&&(C=this.width);var w=this.colorPickerHeight;w===void 0&&(w=C);var F;this.colorComponentsHeight>0?F={height:this.colorComponentsHeight,formatLabel:this.colorComponentsFormatLabelConfig,inputText:this.colorComponentsInputTextConfig,space:this.colorComponentsSpace}:F=!1;var N=new mj(t,{width:C,height:w,background:s,space:this.colorPickerSpace,hPalette:{position:this.colorPickerHPalettePosition},colorComponents:F,value:this.value});return t.add.existing(N),N},xj=function(){if(!this.colorPicker){var e=gj.call(this).layout(),t=new MA(e,{duration:{in:this.colorPickerEaseInDuration,out:this.colorPickerEaseOutDuration},transitIn:this.colorPickerTransitInCallback,transitOut:this.colorPickerTransitOutCallback,expandDirection:this.colorPickerExpandDirection,alignTargetX:this,alignTargetY:this,bounds:this.colorPickerBounds,touchOutsideClose:!0}).on("open",function(){e.on("valuechange",function(s){this.setValue(s)},this)},this).on("close",function(){this.colorPicker=void 0,this.dropDownBehavior=void 0},this);return this.colorPicker=e,this.dropDownBehavior=t,this.pin(e),this}},M2={openColorPicker:xj};Object.assign(M2,jQ);const ms=Phaser.Utils.Objects.GetValue;class Ov extends tS{constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexColorInput",s.hasOwnProperty("colorPicker")||(s.colorPicker={background:{color:0}});var f=s.colorPicker,C=f!==!1&&f!==null;if(C){this.setColorPickerSize(ms(f,"width",160),ms(f,"height",170));var w,F=ms(f,"background");F?w=function(st){return ji(st,F)}:w=ms(f,"createBackgroundCallback"),this.setCreateColorPickerBackgroundCallback(w),this.setColorPickerHPalettePosition(ms(f,"hPalettePosition",0)),this.setColorPickerExpandDirection(ms(f,"expandDirection")),this.setColorPickerEaseInDuration(ms(f,"easeIn",200)),this.setColorPickerEaseOutDuration(ms(f,"easeOut",200)),this.setColorPickerTransitInCallback(ms(f,"transitIn")),this.setColorPickerTransitOutCallback(ms(f,"transitOut")),this.setColorPickerBounds(ms(f,"bounds"));var N=ms(f,"space");N===void 0&&(N={left:10,right:10,top:10,bottom:10,item:8}),this.setColorPickerSpace(N)}var z=s.colorComponents,H=z!==!1&&z!==null;if(C&&H){this.setColorComponentsHeight(ms(z,"height",30)),this.setColorComponentsFormatLabelConfig(ms(z,"formatLabel"));var Z=ms(z,"inputText");Z||(Z=ms(s,"inputText")),this.setColorComponentsInputTextConfig(Z);var tt=ms(z,"space");tt===void 0&&(tt={item:8}),this.setColorComponentsSpace(tt)}var nt=this.childrenMap.swatch;nt&&C&&this.onClick(nt,this.openColorPicker,this)}}Object.assign(Ov.prototype,M2),c.register("colorInput",function(e){var t=new Ov(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.ColorInput",Ov),c.register("colorInputLite",function(e){var t=new tS(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.ColorInputBase",tS),c.register("colorPicker",function(e){var t=new nS(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.ColorPicker",nS),c.register("colorComponents",function(e){var t=new rS(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.ColorComponents",rS);var E2=function(e){for(var t=e.scene.input,s=t.manager,f=s.pointersTotal,C=s.pointers,w,F=0;F<f;F++)if(w=C[F],!(!w.primaryDown||t.getDragState(w)!==0||!a0(e,w)))return t.setDragState(w,1),t._drag[w.id]=[e],t.dragDistanceThreshold===0||t.dragTimeThreshold===0?(t.setDragState(w,3),t.processDragStartList(w)):t.setDragState(w,2),!0;return!1};const Fv=Phaser.Utils.Objects.GetValue,P2=Phaser.Math.Distance.Between,w2=Phaser.Math.RotateAroundDistance;class oS extends Si{constructor(t,s){super(t,{eventEmitter:!1}),this._enable=void 0,t.setInteractive(Fv(s,"inputConfig",void 0)),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.setEnable(Fv(t,"enable",!0)),this.setAxisMode(Fv(t,"axis",0)),this.setAxisRotation(Fv(t,"rotation",0)),this}toJSON(){return{enable:this.enable,axis:this.axisMode,rotation:this.axisRotation}}boot(){var t=this.parent;t.on("dragstart",this.onDragStart,this),t.on("drag",this.onDrag,this),t.on("dragend",this.onDragEnd,this)}shutdown(t){this.isShutdown||(this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragend(),this._enable=t,this.scene.input.setDraggable(this.parent,t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setAxisMode(t){return typeof t=="string"&&(t=yj[t]),this.axisMode=t,this}setAxisRotation(t){return this.axisRotation=t,this}drag(){return E2(this.parent),this}dragend(){if(this.isDragging)return this.scene.input.setDragState(this.pointer,5),this}onDragStart(t,s,f){this.isDragging||(this.pointer=t)}onDrag(t,s,f){if(this.pointer===t){var C=this.parent;if(this.axisMode===0)C.x=s,C.y=f;else if(this.axisRotation===0)this.axisMode===1?C.x=s:this.axisMode===2&&(C.y=f);else{var w,F={x:s,y:f};w=P2(F.x,F.y,C.x,C.y),F=w2(F,C.x,C.y,-this.axisRotation,w),this.axisMode===1?F.y=C.y:this.axisMode===2&&(F.x=C.x),w=P2(F.x,F.y,C.x,C.y),F=w2(F,C.x,C.y,this.axisRotation,w),C.x=F.x,C.y=F.y}}}onDragEnd(t,s,f,C){this.pointer===t&&(this.pointer=void 0)}get isDragging(){return this.pointer!==void 0}}const yj={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2};var Sj=function(){var e=this.sizerChildren[0],t=this.sizerChildren[1],s=this.sizerChildren[2],f=this.getSizerConfig(e).padding,C=this.getSizerConfig(t).padding,w=this.getSizerConfig(s).padding;if(this.orientation===0){var F=this.innerLeft+f.left,N=this.innerRight-w.right,z=Ze(t),H=t.x+z*(0-t.originX),Z=t.x+z*(1-t.originX),tt=H-C.left-this.space.item-f.right,nt=Z+C.right+this.space.item+w.left,st=tt-F,ht=N-nt,ft=st+ht;this.minFirstChildSize>0&&st<this.minFirstChildSize&&(st=this.minFirstChildSize,ht=ft-st),this.minSecondChildSize>0&&ht<this.minSecondChildSize&&(ht=this.minSecondChildSize,st=ft-ht),this.setSplitRatio(st/ft)}else{var dt=this.innerTop+f.top,gt=this.innerBottom-w.bottom,Et=Ke(t),yt=t.y+Et*(0-t.originY),Dt=t.y+Et*(1-t.originY),Wt=yt-C.top-this.space.item-f.bottom,qt=Dt+C.bottom+this.space.item+w.top,re=Wt-dt,ce=gt-qt,fe=re+ce;this.minFirstChildSize>0&&re<this.minFirstChildSize&&(re=this.minFirstChildSize,ce=fe-re),this.minSecondChildSize>0&&ce<this.minSecondChildSize&&(ce=this.minSecondChildSize,re=fe-ce),this.setSplitRatio(re/fe)}var ye=this.minWidth,ge=this.minHeight;this.setMinSize(this.width,this.height).layout().setMinSize(ye,ge)};const Xi=Phaser.Utils.Objects.GetValue,Tj=Phaser.Math.Clamp;class b2 extends Le{constructor(t,s){s.hasOwnProperty("orientation")||(s.orientation=s.hasOwnProperty("leftPanel")?0:1),super(t,s),this.type="rexSplit";var f=Xi(s,"background",void 0),C,w,F,N;this.orientation===0?(C="leftPanel",w="rightPanel",F="minLeftPanelWidth",N="minRightPanelWidth"):(C="topPanel",w="bottomPanel",F="minTopPanelHeight",N="minBottomPanelHeight");var z=Xi(s,C,void 0),H=Xi(s,"splitter",void 0),Z=Xi(s,w,void 0);f&&this.addBackground(f);var tt=Xi(s,"space",void 0);this.add(z,{proportion:1,expand:!0,padding:{left:Xi(tt,`${C}Left`,0),right:Xi(tt,`${C}Right`,0),top:Xi(tt,`${C}Top`,0),bottom:Xi(tt,`${C}Bottom`,0)}}),this.add(H,{proportion:0,expand:!0,padding:{left:Xi(tt,"splitterLeft",0),right:Xi(tt,"splitterRight",0),top:Xi(tt,"splitterTop",0),bottom:Xi(tt,"splitterBottom",0)}}),this.add(Z,{proportion:1,expand:!0,padding:{left:Xi(tt,`${w}Left`,0),right:Xi(tt,`${w}Right`,0),top:Xi(tt,`${w}Top`,0),bottom:Xi(tt,`${w}Bottom`,0)}}),this.addChildrenMap("background",f),this.addChildrenMap(C,z),this.addChildrenMap("splitter",H),this.addChildrenMap(w,Z),this.minFirstChildSize=Xi(s,F,0),this.minSecondChildSize=Xi(s,N,0),this.setSplitRatio(Xi(s,"splitRatio",.5)),this.splitterDragBehavior=new oS(H,{axis:this.orientation===0?1:2}),H.on("dragstart",function(){this.emit("splitter.dragstart",H,this.splitRatio)},this).on("dragend",function(){this.emit("splitter.dragend",H,this.splitRatio)},this).on("drag",function(){Sj.call(this),this.emit("splitter.drag",H,this.splitRatio)},this).on("pointerover",function(){this.emit("splitter.over",H,this.splitRatio)},this).on("pointerout",function(){this.emit("splitter.out",H,this.splitRatio)},this)}get splitterEnable(){return this.splitterDragBehavior.enable}set splitterEnable(t){this.splitterDragBehavior.setEnable(t)}setSplitterEnable(t){return t===void 0&&(t=!0),this.splitterEnable=t,this}set minLeftPanelWidth(t){this.minFirstChildSize=t}get minLeftPanelWidth(){return this.minFirstChildSize}set minRightPanelWidth(t){this.minSecondChildSize=t}get minRightPanelWidth(){return this.minSecondChildSize}set minTopPanelHeight(t){this.minFirstChildSize=t}get minTopPanelHeight(){return this.minFirstChildSize}set minBottomPanelHeight(t){this.minSecondChildSize=t}get minBottomPanelHeight(){return this.minSecondChildSize}setMinLeftPanelWidth(t){return this.minLeftPanelWidth=t,this}setMinRightPanelWidth(t){return this.minRightPanelWidth=t,this}setMinTopPanelHeight(t){return this.minTopPanelHeight=t,this}setMinBottomPanelHeight(t){return this.minBottomPanelHeight=t,this}get splitRatio(){return this._splitRatio}set splitRatio(t){t=Tj(t,0,1),this._splitRatio!==t&&(this._splitRatio=t,this.getSizerConfig(this.sizerChildren[0]).proportion=t,this.getSizerConfig(this.sizerChildren[2]).proportion=1-t)}setSplitRatio(t){return this.splitRatio=t,this}}c.register("splitPanels",function(e){var t=new b2(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.SplitPanels",b2);var Cj=function(){return function(e,t,s,f){t!=="panel"&&s.setChildVisible(e,!0)}},Mj=function(){return function(e,t,s,f){t!=="panel"&&s.setChildVisible(e,!1)}},Ej={show:Cj,hide:Mj},Pj=function(e,t){return t===void 0&&(t=1),function(s,f,C,w){f!=="panel"&&C.fadeChild(s,w?0:e,t)}},wj=function(e,t){return t===void 0&&(t=0),function(s,f,C,w){f!=="panel"&&C.fadeChild(s,w?0:e,t)}},bj={show:Pj,hide:wj},A2=function(e,t){return function(s,f,C,w){f!=="panel"&&C.moveChild(s,w?0:e,t)}},Aj={show:A2,hide:A2},R2=function(e,t){return function(s,f,C,w){f==="panel"&&C.moveChild(s,w?0:e,t)}},Rj={show:R2,hide:R2};const hS={visible:Ej,fade:bj,move:Aj,"move-panel":Rj};var Lj=function(e){var t,s;[t,...s]=typeof e=="string"?[e]:e;var f,C;return hS.hasOwnProperty(t)?(f=hS[t].show.apply(null,s),C=hS[t].hide.apply(null,s)):(f=a,C=a),{show:f,hide:C}},Oj={showChild(e,t){var s=this.sizerChildren[e];return s&&(this.emit("showchild",s,e,this,t),this.resetChildState(s)),this},hideChild(e,t){var s=this.sizerChildren[e];return s&&(this.emit("hidechild",s,e,this,t),this.resetChildState(s)),this},swapChild(e,t){return this.currentChildKey===e||(this.currentChildKey==="panel"||e==="panel"?(this.previousChildKey=this.currentChildKey,this.currentChildKey=e,this.hideChild(this.previousChildKey,t),this.showChild(this.currentChildKey,t)):(this.swapChild("panel",t),this.swapChild(e,t))),this},showPanel(e){return this.swapChild("panel",e),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return this.currentChildKey=="leftSide"&&this.showPanel(),this},hideRightSide(){return this.currentChildKey=="rightSide"&&this.showPanel(),this},hideTopSide(){return this.currentChildKey=="topSide"&&this.showPanel(),this},hideBottomSide(){return this.currentChildKey=="bottomSide"&&this.showPanel(),this},toggleLeftSide(){var e=this.currentChildKey!=="panel"?"panel":"leftSide";return this.swapChild(e),this},toggleRightSide(){var e=this.currentChildKey!=="panel"?"panel":"rightSide";return this.swapChild(e),this},toggleTopSide(){var e=this.currentChildKey!=="panel"?"panel":"topSide";return this.swapChild(e),this},toggleBottomSide(){var e=this.currentChildKey!=="panel"?"panel":"bottomSide";return this.swapChild(e),this}};const Fj=dn.prototype.setChildVisible;var Dj={setChildVisible(e,t){var s;if(typeof e=="string"){var s=e;e=this.sizerChildren[s]}else s=Lp(this.sizerChildren,e);return t===void 0&&(t=this.currentChildKey===s),Fj.call(this,e,t),this}},Ij={fadeChild(e,t,s){var f;return typeof e=="string"?(f=e,e=this.sizerChildren[f]):f=Lp(this.sizerChildren,e),t===void 0&&(t=500),s===void 0&&(s=this.currentChildKey===f?1:0),e.fadeIn(t,{start:e.alpha,end:s}),this},fadeChildPromise(e,t,s){return typeof e=="string"&&(e=this.sizerChildren[key]),this.fadeChild(e,t,s),e._fade?ps(e._fade):Promise.resolve()}},Bj={moveChild(e,t,s,f){var C;typeof e=="string"?(C=e,e=this.sizerChildren[C]):C=Lp(this.sizerChildren,e),t===void 0&&(t=500);var w=this.currentChildKey===C;if(f===void 0)switch(C){case"leftSide":case"rightSide":f=Ze(e);break;case"topSide":case"bottomSide":f=Ke(e);break;default:if(w)switch(this.previousChildKey){case"leftSide":case"rightSide":f=Ze(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":f=Ke(this.sizerChildren[this.previousChildKey]);break;default:f=0;break}else switch(this.currentChildKey){case"leftSide":case"rightSide":f=Ze(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":f=Ke(this.sizerChildren[this.currentChildKey]);break;default:f=0;break}break}var F,N,z,H;if(w)switch(C){case"panel":switch(this.previousChildKey){case"leftSide":F=!0;break;case"rightSide":N=!0;break;case"topSide":z=!0;break;case"bottomSide":H=!0;break}break;case"leftSide":N=!0;break;case"rightSide":F=!0;break;case"topSide":H=!0;break;case"bottomSide":z=!0;break}else switch(C){case"panel":switch(this.currentChildKey){case"leftSide":N=!0;break;case"rightSide":F=!0;break;case"topSide":H=!0;break;case"bottomSide":z=!0;break}break;case"leftSide":F=!0;break;case"rightSide":N=!0;break;case"topSide":z=!0;break;case"bottomSide":H=!0;break}return F?e.moveTo(t,`-=${f}`,void 0,s):N?e.moveTo(t,`+=${f}`,void 0,s):z?e.moveTo(t,void 0,`-=${f}`,s):H?e.moveTo(t,void 0,`+=${f}`,s):e.moveTo(0),this},moveChildPromise(e,t,s,f){return typeof e=="string"&&(e=this.sizerChildren[key]),this.moveChild(e,t,s,f),e._easeMove?ps(e._easeMove):Promise.resolve()}},L2={};Object.assign(L2,Dj,Ij,Bj);const qs=Phaser.Utils.Objects.GetValue;class lS extends Rn{constructor(t,s){super(t,s),this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var f=qs(s,"showChildCallback",void 0);if(f)if(Qn(f)){var C=qs(s,"showChildCallbackScope",void 0);this.on("showchild",f,C);var w=qs(s,"hideChildCallback",void 0),F=qs(s,"hideChildCallbackScope",void 0);this.on("hidechild",w,F)}else{var N=Lj(f);this.on("showchild",N.show),this.on("hidechild",N.hide)}var z=qs(s,"background",void 0),H=qs(s,"panel",void 0),Z=qs(s,"leftSide",void 0),tt=qs(s,"rightSide",void 0),nt=qs(s,"topSide",void 0),st=qs(s,"bottomSide",void 0);if(z&&this.addBackground(z),H&&this.add(H,"panel","center",0,!0),Z){var ht=qs(s,"expand.left",!0);this.add(Z,"leftSide","left-top",0,{height:ht})}if(tt){var ht=qs(s,"expand.right",!0);this.add(tt,"rightSide","right-top",0,{height:ht})}if(nt){var ht=qs(s,"expand.top",!0);this.add(nt,"topSide","left-top",0,{width:ht})}if(st){var ht=qs(s,"expand.bottom",!0);this.add(st,"bottomSide","left-bottom",0,{width:ht})}}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}}Object.assign(lS.prototype,Oj,L2),c.register("sides",function(e){var t=new lS(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.Sides",lS);var Nj=function(e){var t=!0;return e.hasOwnProperty("accept")||(t=!1,console.error(`[Tweaker] Can't register inputHandler '${e.name}', missing 'accept' callback.`)),e.hasOwnProperty("build")||(t=!1,console.error(`[Tweaker] Can't register inputHandler '${e.name}', missing 'build' callback.`)),t&&this.inputHandlers.unshift(e),this};const Gj=Phaser.Utils.Array.GetFirst,Uj=Phaser.Utils.Array.Remove;var kj=function(e){var t=Gj(this.inputHandlers,"name",e);return t&&Uj(this.inputHandlers,t),this};class uf extends ga{constructor(t,s){s=iv(t,s),super(t,s),this.type="rexTweaker.Title"}setTitle(t){return t=t?I(t):{},t.hasOwnProperty("text")||(t.hasOwnProperty("title")?t.text=t.title:t.text=""),this.resetDisplayContent(t),this}}class Vj extends uf{constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexTweaker.FolderTitle";var f=new Cd(t,s.expandedIcon);t.add.existing(f),this.addSpace().add(f,{proportion:0,expand:!1,padding:1,fitRatio:1}),this.addChildrenMap("expandedIcon",f)}setExpandedState(t){t===void 0&&(t=!0);var s=t?"down":"right",f=this.childrenMap.expandedIcon;return f.setDirection(s),this}}/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var O2=function(e,t){var s=Zn(e);for(var f in t)s.hasOwnProperty(f)||(s[f]=t[f]);return s},df=function(e,t,s){return ji(e,O2(t,s))},zj={setBindingTarget(e){var t=this.childrenMap.child;return t.setBindingTarget(e),this}},Wj={getMaxInputRowTitleWidth(){var e=this.childrenMap.child,t=e.getMaxInputRowTitleWidth();return t+this.getInnerPadding("left")},setInputRowTitleWidth(e){e-=this.getInnerPadding("left");var t=this.childrenMap.child;return t.setInputRowTitleWidth(e),this}};class F2 extends of{constructor(t,s){s===void 0&&(s={}),s.orientation=1,super(t,s),this.type="rexTweaker.Folder"}setTitle(t){var s=this.childrenMap.title;return s.setTitle(t),this}}Object.assign(F2.prototype,zj,Wj);const Wl=Phaser.Utils.Objects.GetValue;var Xj=function(e,t,s){var f=e.scene,C=Wl(s,"title")||{},w=new Vj(f,C);f.add.existing(w),w.on("folder.expand",function(){w.setExpandedState(!0)}).on("folder.collapse",function(){w.setExpandedState(!1)});var F={root:Wl(s,"root"),styles:Wl(s,"tweaker"),space:Wl(s,"space")||{}},N=e.createTweaker(F),z=Wl(s,"background"),H=df(f,t,z),Z=new F2(f,{title:w,child:N,background:H,transition:{duration:Wl(s,"transition.duration",200)}});return f.add.existing(Z),Z};const D2=Phaser.Utils.Objects.GetValue;var Hj=function(e){e===void 0&&(e={});var t=D2(this.styles,"folder")||{};t.tweaker=this.styles,t.root=this.root;var s=Xj(this,e,t);delete t.tweaker,delete t.root,this.add(s,{expand:!0}),s.setTitle(e);var f=D2(e,"expanded",!0);f!==void 0&&s.setExpandedState(f);var C=s.childrenMap.child;return e.key&&this.root.addChildrenMap(e.key,C),C},Yj={setBindingTarget(e){for(var t=this.childrenMap.pages.children,s=0,f=t.length;s<f;s++)t[s].setBindingTarget(e);return this}},$j={getMaxInputRowTitleWidth(){for(var e=0,t=this.childrenMap.pages.children,s=0,f=t.length;s<f;s++)e=Math.max(e,t[s].getMaxInputRowTitleWidth());return e+this.getInnerPadding("left")},setInputRowTitleWidth(e){e-=this.getInnerPadding("left");for(var t=this.childrenMap.pages.children,s=0,f=t.length;s<f;s++)t[s].setInputRowTitleWidth(e);return this}};class I2 extends Pv{constructor(t,s){super(t,s),this.type="rexTweaker.TabPages"}}Object.assign(I2.prototype,Yj,$j);const Dv=Phaser.Utils.Objects.GetValue;var _j=function(e,t,s){var f=e.scene,C=new I2(f,s);f.add.existing(C);for(var w=Dv(s,"tab"),F={root:Dv(s,"root"),styles:Dv(s,"tweaker")},N=Dv(t,"pages")||[],z=0,H=N.length;z<H;z++){var Z=N[z];C.addPage({key:Z.title,tab:as(f,w).setActiveState(!1).resetDisplayContent({text:Z.title}),page:e.createTweaker(F)})}return C.on("tab.focus",function(tt,nt){tt.setActiveState(!0)}).on("tab.blur",function(tt,nt){tt.setActiveState(!1)}),C};const B2=Phaser.Utils.Objects.GetValue;var Zj=function(e){e===void 0&&(e={});var t=B2(this.styles,"tab")||{};t.tweaker=this.styles,t.root=this.root;var s=_j(this,e,t);delete t.tweaker,delete t.root,this.add(s,{expand:!0});for(var f=B2(e,"pages")||[],C=[],w=0,F=0,N=f.length;F<N;F++){var z=s.getPage(F),H=f[F].show;H&&(w=F);var Z=f[F].key;Z&&this.root.addChildrenMap(Z,z),C.push(z)}return s.swapPage(w,0),C},Kj={setBindingTarget(e){for(var t=this.childrenMap.columns,s=0,f=t.length;s<f;s++)t[s].setBindingTarget(e);return this}},Jj={getMaxInputRowTitleWidth(){for(var e=0,t=this.childrenMap.columns,s=0,f=t.length;s<f;s++)e=Math.max(e,t[s].getMaxInputRowTitleWidth());return e+this.getInnerPadding("left")},setInputRowTitleWidth(e){e-=this.getInnerPadding("left");for(var t=this.childrenMap.columns,s=0,f=t.length;s<f;s++)t[s].setInputRowTitleWidth(e);return this}};const Xl=Phaser.Utils.Objects.GetValue;class N2 extends Le{constructor(t,s){s===void 0&&(s={}),s.orientation="y",super(t,s),this.type="rexTweaker.Columns";var f=Xl(s,"background",void 0),C=Xl(s,"title",void 0);f&&this.addBackground(f),C&&this.add(C,{expand:!0,space:{bottom:Xl(s,"space.title",0)}});var w=new Le(t,{orientation:"x",space:{item:Xl(s,"space.column",0)}});t.add.existing(w);for(var F=Xl(s,"columns",void 0),N,z,H=0,Z=F.length;H<Z;H++)N=F[H],z=N.child,w.add(N.child,{proportion:z.minWidth===0?1:0,expand:Xl(N,"expand",!0)});this.add(w,{expand:!0}),this.addChildrenMap("title",C),this.addChildrenMap("columnsSizer",w),this.addChildrenMap("columns",w.childrenMap.items)}setTitle(t){var s=this.childrenMap.title;return t.title||t.icon?s.show().setTitle(t):s.hide(),this}getColumns(){return this.childrenMap.columns}getColumn(t){return this.childrenMap.columns[t]}}Object.assign(N2.prototype,Kj,Jj);const yh=Phaser.Utils.Objects.GetValue;var Qj=function(e,t,s){var f=e.scene,C=yh(s,"title")||{},w=new uf(f,C);f.add.existing(w);var F={root:yh(s,"root"),styles:yh(s,"tweaker")},N=yh(s,"background");N&&!Array.isArray(N)&&(N=[N]);var z=yh(t,"columns",2);if(typeof z=="number"){var H=z;z=[];for(var Z=0,tt=H;Z<tt;Z++)z.push({})}for(var Z=0,tt=z.length;Z<tt;Z++){var nt=z[Z];N&&(F.background=N[Z%N.length]),F.width=yh(nt,"width",0);var st=e.createTweaker(F);nt.child=st}var ht=new N2(f,{title:w,columns:z,space:yh(s,"space")});return f.add.existing(ht),ht};const G2=Phaser.Utils.Objects.GetValue;var jj=function(e){e===void 0&&(e={}),typeof e=="number"&&(e={columns:e});var t=G2(this.styles,"columns")||{};t.tweaker=this.styles,t.root=this.root;var s=Qj(this,e,t);delete t.tweaker,delete t.root,this.add(s,{expand:!0}),s.setTitle(e);var f=G2(e,"columns",void 0);if(f&&Array.isArray(f))for(var C=0,w=f.length;C<w;C++){var F=f[C].key;F&&this.root.addChildrenMap(F,s.getColumn(C))}return s.getColumns()},qj={setBindingTarget(e){for(var t=this.childrenMap.child,s=0,f=t.length;s<f;s++)t[s].setBindingTarget(e);return this}},tq={getMaxInputRowTitleWidth(){return 0},setInputRowTitleWidth(e){return this}};const Iv=Phaser.Utils.Objects.GetValue;class U2 extends Le{constructor(t,s){s===void 0&&(s={}),s.orientation="y",super(t,s),this.type="rexTweaker.Wrap";var f=Iv(s,"background",void 0),C=Iv(s,"title",void 0);f&&this.addBackground(f),C&&this.add(C,{expand:!0,space:{bottom:Iv(s,"space.title",0)}});var w=Iv(s,"child",void 0);this.add(w,{expand:!0}),this.addChildrenMap("title",C),this.addChildrenMap("child",w)}setTitle(t){var s=this.childrenMap.title;return t.title||t.icon?s.show().setTitle(t):s.hide(),this}}Object.assign(U2.prototype,qj,tq);const Ur=Phaser.Utils.Objects.GetValue;var eq=function(e,t,s){var f=e.scene,C=Ur(s,"title")||{},w=new uf(f,C);f.add.existing(w);var F=Ur(s,"itemWidth",0),N=Ur(s,"itemHeight",0),z={root:Ur(s,"root"),styles:Ur(s,"tweaker"),space:Ur(s,"space"),align:Ur(s,"align",5),wrap:!0,itemWidth:Ur(t,"itemWidth",F),itemHeight:Ur(t,"itemHeight",N)};Ur(s,"background");var H=e.createTweaker(z),Z=new U2(f,{title:w,child:H});return f.add.existing(Z),Z};const iq=Phaser.Utils.Objects.GetValue;var sq=function(e){e===void 0&&(e={});var t=iq(this.styles,"wrap")||{};t.tweaker=this.styles,t.root=this.root;var s=eq(this,e,t);delete t.tweaker,delete t.root,this.add(s,{expand:!0}),s.setTitle(e);var f=s.childrenMap.child;return e.key&&this.root.addChildrenMap(e.key,f),f},nq={setBindingTarget(e){var t=this.childrenMap.panel;return t.setBindingTarget(e),this}},rq={getMaxInputRowTitleWidth(){var e=this.childrenMap.panel,t=e.getMaxInputRowTitleWidth();return t+this.getInnerPadding("left")},setInputRowTitleWidth(e){e-=this.getInnerPadding("left");var t=this.childrenMap.panel;return t.setInputRowTitleWidth(e),this}};class k2 extends ef{constructor(t,s){super(t,s),this.type="rexTweaker.Scrollable"}setTitle(t){var s=this.childrenMap.header;return t.title||t.icon?s.show().setTitle(t):s.hide(),this}}Object.assign(k2.prototype,nq,rq);const po=Phaser.Utils.Objects.GetValue;var aq=function(e,t,s){var f=e.scene,C=po(s,"title")||{},w=new uf(f,C);f.add.existing(w);var F={root:po(s,"root"),styles:po(s,"tweaker"),space:po(s,"space")||{}},N=e.createTweaker(F),z=po(s,"slider");if(z){z=I(z);var H=z.track;H&&(z.track=df(f,t,H));var Z=z.thumb;Z&&(z.thumb=df(f,t,Z))}var tt=po(s,"background"),nt=df(f,t,tt),st=new k2(f,{scrollMode:0,header:w,panel:{child:N,mask:{padding:1}},slider:z,background:nt,height:po(t,"height",0),space:po(s,"space",void 0)});return f.add.existing(st),st};const oq=Phaser.Utils.Objects.GetValue;var hq=function(e){e===void 0&&(e={});var t=oq(this.styles,"scrollable")||{};t.tweaker=this.styles,t.root=this.root;var s=aq(this,e,t);delete t.tweaker,delete t.root,this.add(s,{proportion:s.minWidth===0?1:0,expand:!0}),s.setTitle(e);var f=s.childrenMap.panel;return e.key&&this.root.addChildrenMap(e.key,f),f};const V2=Phaser.Utils.Objects.GetValue;var lq={setupBinding(){var e=this.childrenMap.inputField;return e.on("valuechange",function(t){this.autoUpdateEnable&&this.setTargetValue(t)},this),this},setAutoUpdateEnable(e){return e===void 0&&(e=!0),this.autoUpdateEnable=e,this},setBindingTarget(e,t){this.bindingTarget=e,t!==void 0&&this.setBindingTargetKey(t),this.syncTargetValue();var s=this.childrenMap.inputField;return s.onBindTarget&&s.onBindTarget(e,t),this},setBindingTargetKey(e){return this.bindTargetKey=e,this},setValueCallbacks(e){return this.onGetValue=V2(e,"onGetValue"),this.onSetValue=V2(e,"onSetValue"),this},getTargetValue(){if(this.bindingTarget){if(this.bindTargetKey!=null)return this.bindingTarget[this.bindTargetKey];if(this.onGetValue)return this.onGetValue(this.bindingTarget)}},setTargetValue(e){return this.bindingTarget?this.bindTargetKey!=null?(this.bindingTarget[this.bindTargetKey]=e,this):(this.onSetValue&&this.onSetValue(this.bindingTarget,e),this):this},syncTargetValue(){if(!this.bindingTarget)return this;var e=this.childrenMap.inputField;return e.syncValue&&e.syncValue(this.getTargetValue()),this}},uq={startMonitorTarget(){return this.isMonitoring?this:(this.isMonitoring=!0,this.scene.events.on("postupdate",this.onMonitorTarget,this),this)},stopMonitorTarget(){return this.isMonitoring?(this.isMonitoring=!1,this.scene.events.off("postupdate",this.onMonitorTarget,this),this):this},onMonitorTarget(){if(this.bindingTarget){var e=this.getTargetValue(),t=this.childrenMap.inputField;t.value!==e&&t.syncValue(e)}}},dq={getMinTitleWidth(){var e=this.childrenMap.title;if(!e||e.orientation!==0)return 0;var t=e.rexSizer.padding,s=this.getChildWidth(this.childrenMap.title)+(t.left+t.right)*e.scaleX;return s+this.getInnerPadding("left")},setMinTitleWidth(e){var t=this.childrenMap.title;if(!t||t.orientation!==0)return this;var s=t.rexSizer.padding;return e-=(s.left+s.right)*t.scaleX,t.minWidth=e,this}};const uS=Phaser.Utils.Objects.GetValue;class dS extends Le{constructor(t,s){super(t,s),this.type="rexTweaker.InputRow",this.bindingTarget=void 0,this.bindTargetKey=void 0,this.autoUpdateEnable=!0;var f=s.inputTitle,C=s.inputField,w=s.background,H=uS(s,"proportion.title",0),F=uS(s,"space.title",0),N;this.orientation===0?N={right:F}:N={bottom:F},this.add(f,{proportion:H,expand:!0,padding:N});var z=C.defaultProportion;z===void 0&&(z=s.defaultExpandWidth?1:0);var H=uS(s,"proportion.inputField",z);this.add(C,{proportion:H,expand:!0}),w&&this.addBackground(w),this.addChildrenMap("title",f),this.addChildrenMap("inputField",C),this.addChildrenMap("background",w),this.setupBinding()}destroy(t){!this.scene||this.ignoreDestroy||(this.stopMonitorTarget(),super.destroy(t))}setTitle(t){var s=this.childrenMap.title;return s.setTitle(t),this}preLayout(){var t=this.childrenMap.title;t&&(t.minWidth=0),super.preLayout()}}Object.assign(dS.prototype,lq,uq,dq);var z2=function(e,t,s){var f=new uf(e,s);return e.add.existing(f),f},fq=function(e){e===void 0&&(e=Le);class t extends e{get bindingTarget(){var f=this.getParentSizer();return f.bindingTarget}get bindingKey(){var f=this.getParentSizer();return f.bindTargetKey}get value(){return this._value}get root(){var f=this.getParentSizer(),C=f.getParentSizer();return C.root}onBindTarget(f,C){this.onBindTargetCallback&&this.onBindTargetCallback(this,f,C)}validate(f){return this.syncValueFlag||!this.validateCallback?!0:this.validateCallback(f,this._value,this.bindingTarget,this.bindingKey)}getFotmatText(f){return this.textFormatCallback?f=this.textFormatCallback(f):f=f.toString(),f}set value(f){if(this._value!==f&&(this.validate(f)||(f=this._value),this.filterValueCallback&&(f=this.filterValueCallback(this,f)),this.displayValueCallback&&this.displayValueCallback(this,f),this._value!==f)){var C=this._value;if(this._value=f,!this.syncValueFlag){var w=this.bindingTarget,F=this.bindingKey;this.emit("valuechange",f,C,w,F),this.root.emit("valuechange",f,C,w,F)}}}getValue(){return this.value}setValue(f){return this.value=f,this}syncValue(f){return this.syncValueFlag=!0,this.value=f,this.syncValueFlag=!1,this}setup(f,C){return C===void 0&&(C=!1),(C||f.hasOwnProperty("format"))&&this.setTextFormatCallback(f.format),(C||f.hasOwnProperty("onValidate"))&&this.setValidateCallback(f.onValidate),this.setupCallback&&this.setupCallback(this,f,C),this}setSetupCallback(f){return this.setupCallback=f,this}setFilterValueCallback(f){return this.filterValueCallback=f,this}setDisplayValueCallback(f){return this.displayValueCallback=f,this}setOnBindTargetCallback(f){return this.onBindTargetCallback=f,this}setTextFormatCallback(f){return this.textFormatCallback=f,this}setValidateCallback(f){return this.validateCallback=f,this}}return t},cq=function(e,t,s){for(var f,C=this.inputHandlers,w=0,F=C.length;w<F;w++){var N=C[w];if(N.accept(t)){var z=fq(N.baseClass);f=new z(e),e.add.existing(f),f.setSetupCallback(N.setup).setFilterValueCallback(N.filterValue).setDisplayValueCallback(N.displayValue).setOnBindTargetCallback(N.onBindTarget),N.build(f,s);break}}return f&&f.setup(t,!0),f};const W2=Phaser.Utils.Objects.GetValue;var pq=function(e,t,s){var f=cq.call(this,e,t,s);if(!f)return null;var C=W2(s,"title")||{},w=z2(e,t,C),F=W2(s,"background")||{},N=ji(e,F),z=new dS(e,{...s,...t,inputTitle:w,inputField:f,background:N});return e.add.existing(z),z.setTitle(t),z.setValueCallbacks(t),z},vq=function(e,t,s){arguments.length===1?(s=e,e=s.bindingTarget,t=s.bindingKey):(s===void 0&&(s={}),s.bindingTarget=e,s.bindingKey=t),s.title||(s.title=t),s.bindingTarget&&s.bindingKey?s.value=s.bindingTarget[s.bindingKey]:s.value=void 0;var f=this.styles.inputRow||{};this.isWrapMode?f.defaultExpandWidth=!0:f.defaultExpandWidth=this.styles.orientation===1;var C=pq.call(this,this.scene,s,f);if(!C)return console.error(`[Tweaker] Can't add Input
    title: ${s.title}
    view: ${s.view}
`),this;if(this.isWrapMode)C.setMinWidth(this.itemWidth),C.setMinHeight(this.itemHeight),this.add(C);else{var w;this.orientation===1?w=0:(w=this.itemWidth>0?0:1,C.minWidth===0&&C.setMinWidth(this.itemWidth)),C.minHeight===0&&C.setMinHeight(this.itemHeight),this.add(C,{proportion:w,expand:!0})}if(s.onValueChange){var F=C.childrenMap.inputField;F.on("valuechange",s.onValueChange)}return C.setAutoUpdateEnable(s.autoUpdate),C.setBindingTarget(e,t),s.monitor&&C.startMonitorTarget(),s.key&&this.root.addChildrenMap(s.key,C),this},mq=function(e,t){var s=new Ge(e,t);return e.add.existing(s),s};const gq=Phaser.Utils.Objects.GetValue;var xq=function(e,t){var s=gq(t,"wrap",!1),f=s?ho:rs,C=new f(e,t);return e.add.existing(C),C};const Bv=Phaser.Utils.Objects.GetValue;var yq=function(e,t,s){for(var f=Bv(s,"title")||{},C=z2(e,t,f),w=t.buttons,F=Bv(s,"button")||{},N=[],z=0,H=w.length;z<H;z++){var Z=as(e,F);N.push(Z);var tt=w[z];Z.resetDisplayContent(tt.label),Z.callback=tt.callback}var nt=xq(e,{buttons:N,expand:!0,wrap:Bv(t,"wrap",!1)});nt.defaultProportion=1;var st=Bv(s,"background")||{},ht=mq(e,st),ft=new dS(e,{...s,inputTitle:C,inputField:nt,background:ht});return e.add.existing(ft),ft.setTitle(t),nt.on("button.click",function(dt){dt.callback(ft.bindingTarget)}),ft};const Sq=Phaser.Utils.Objects.GetValue;var Tq=function(e){e===void 0&&(e={});var t=this.scene,s=e.bindingTarget;delete e.bindingTarget;var f=Sq(this.styles,"inputRow")||{},C=yq(t,e,f);return this.add(C,{expand:!0}),s&&C.setBindingTarget(s),e.key&&this.root.addChildrenMap(e.key,C),this},Cq=function(e){return e===void 0&&(e={}),e.buttons=[{label:e.label,callback:e.callback}],delete e.label,delete e.callback,this.addButtons(e),this},Mq=function(e,t,s){return ji(e,O2(t,s))};const Eq=Phaser.Utils.Objects.GetValue;var Pq=function(e){e===void 0&&(e={});var t=this.scene,s=Eq(this.styles,"separator"),f=Mq(t,e,s);return this.add(f,{expand:!0}),this},wq=function(e,t,s){return typeof t=="boolean"&&(s=t,t=void 0),s===void 0&&(s=!0),ff(this,I(e),t,s),this},ff=function(e,t,s,f){if(t)for(var C=0,w=t.length;C<w;C++){var F=t[C];F.hasOwnProperty("$target")&&(s=F.$target,delete F.$target);var N=F.$type;switch(delete F.$type,N){case"folder":var z=e.addFolder(F);ff(z,F.$properties,s,f);break;case"tab":for(var H=e.addTab(F),Z=0,tt=H.length;Z<tt;Z++)ff(H[Z],F.pages[Z].$properties,s,f);break;case"columns":for(var nt=e.addColumns(F),Z=0,tt=nt.length;Z<tt;Z++)ff(nt[Z],F.columns[Z].$properties,s,f);break;case"scrollable":var st=e.addScrollable(F);ff(st,F.$properties,s,f);break;case"separator":e.addSeparator();break;case"button":F.bindingTarget=s,e.addButton(F);break;case"buttons":F.bindingTarget=s,e.addButtons(F);break;default:var ht=F.$key;if(delete F.$key,ht.indexOf(".")===-1)F.bindingTarget=s,F.bindingKey=ht;else{var ft=ht.split(".");F.bindingKey=ft.pop();for(var dt=s,gt=0,Et=ft.length;gt<Et;gt++)if(dt=dt[ft[gt]],!s){console.warn(`[Monitor] Key path '${ht}' is invalid`);continue}F.bindingTarget=dt}F.hasOwnProperty("monitor")||(F.monitor=f),e.addInput(F);break}}},bq=function(e){for(var t=this.sizerChildren,s=0,f=t.length;s<f;s++){var C=t[s];C.setBindingTarget&&C.setBindingTarget(e)}return this},Aq=function(){for(var e=0,t=this.sizerChildren,s=0,f=t.length;s<f;s++){var C=t[s];C.rexSizer.hidden||(C.getMinTitleWidth?e=Math.max(e,C.getMinTitleWidth()):C.getMaxInputRowTitleWidth&&(e=Math.max(e,C.getMaxInputRowTitleWidth())))}return e+this.getInnerPadding("left")},Rq=function(e){this.isWrapMode||(e-=this.getInnerPadding("left"));for(var t=this.sizerChildren,s=0,f=t.length;s<f;s++){var C=t[s];C.rexSizer.hidden||(C.setMinTitleWidth?C.setMinTitleWidth(e):C.setInputRowTitleWidth&&C.setInputRowTitleWidth(e))}return this},Lq={registerInputHandler:Nj,removeInputHandler:kj,addFolder:Hj,addTab:Zj,addColumns:jj,addWrap:sq,addScrollable:hq,addInput:vq,addButtons:Tq,addButton:Cq,addSeparator:Pq,addRows:wq,setBindingTarget:bq,getMaxInputRowTitleWidth:Aq,setInputRowTitleWidth:Rq};const vo=Phaser.Utils.Objects.GetValue;var X2=function(e){var t=vo(e,"wrap",!1),s=t?ro:Le;class f extends s{constructor(w,F){F===void 0&&(F={}),F.orientation===void 0&&(F.orientation=t?0:1),super(w,F),this.type="rexTweakerShell",this.isWrapMode=t,F.root?(this.root=F.root,this.inputHandlers=this.root.inputHandlers):(this.root=this,this.inputHandlers=[]),this.styles=vo(F,"styles")||{},this.styles.orientation=this.orientation;var N=vo(F,"itemWidth");N===void 0&&(N=vo(this.styles,"itemWidth",0)),this.itemWidth=N;var z=vo(F,"itemHeight");if(z===void 0&&(z=vo(this.styles,"itemHeight",0)),this.itemHeight=z,t||this.root===this&&this.orientation===1){var H=vo(F,"inputRow.alignTitle");if(H===void 0){var Z=vo(this.styles,"inputRow.proportion.title");H=!Z}else H&&j(this.styles,"inputRow.proportion.title",0);this.alignInputRowTitleStartFlag=H}else this.alignInputRowTitleStartFlag=!1;var tt=df(w,void 0,F.background);tt&&this.addBackground(tt)}preLayout(){super.preLayout(),this.alignInputRowTitleStartFlag&&this.setInputRowTitleWidth(this.getMaxInputRowTitleWidth())}createTweaker(w,F){F===void 0&&(F=!0);var N=X2(w),z=new N(this.scene,w);return F&&this.scene.add.existing(z),z}}return Object.assign(f.prototype,Lq),f},Oq=function(e,t){t===void 0&&(t=!0);var s=e.childrenMap.inputText;s.setReadOnly(t)},Fq={name:"TextInput",accept(e){return e.hasOwnProperty("view")?e.view==="string":typeof e.value=="string"},build(e,t){var s=e.scene;e.type="rexTweaker.TextInput";var f=t.inputText,C=lo(s,f);e.add(C,{proportion:1,expand:!0,key:"inputText"}),C.on("close",function(){e.setValue(C.value)})},setup(e,t,s){(s||t.hasOwnProperty("inputTextReadOnly"))&&Oq(e,!!t.inputTextReadOnly)},displayValue(e,t){var s=e.childrenMap.inputText;s.setText(e.getFotmatText(t))}},Dq=function(e,t,s){s===void 0&&(s=!0),s?t=t?I(t):{}:t||(t={});var f=new Av(e,t);return e.add.existing(f),f},Iq=function(e,t){t===void 0&&(t=!0);var s=e.childrenMap.inputText;s.setReadOnly(t)},Bq={name:"TextAreaInput",accept(e){return e.hasOwnProperty("view")?e.view==="textarea":!1},build(e,t){var s=e.scene;this.type="rexTweaker.TextAreaInput";var f=t.inputTextArea;f===void 0&&(f={}),f.hasOwnProperty("text")||(f.text=t.inputText),f.hasOwnProperty("slider")||(f.slider=t.slider);var C=Dq(s,f);e.add(C,{proportion:1,expand:!0,key:"inputText"}),C.on("close",function(){e.setValue(C.value)})},setup(e,t,s){(s||t.hasOwnProperty("inputTextReadOnly"))&&Iq(e,!!t.inputTextReadOnly)},displayValue(e,t){var s=e.childrenMap.inputText;s.setText(e.getFotmatText(t))},onBindTarget(e){var t=e.childrenMap.inputText;t.scrollToTop()}},Nq=function(e,t){t===void 0&&(t=!0);var s=e.childrenMap.inputText;s.setReadOnly(t)},Gq={name:"NumberInput",accept(e){return e.hasOwnProperty("view")?e.view==="number":typeof e.value=="number"},build(e,t){var s=e.scene;e.type="rexTweaker.NumberInput";var f=t.inputNumber||t.inputText,C=lo(s,f).setNumberInput();e.add(C,{proportion:1,expand:!0,key:"inputText"}),C.on("close",function(){e.setValue(C.value)})},setup(e,t,s){(s||t.hasOwnProperty("inputTextReadOnly"))&&Nq(e,!!t.inputTextReadOnly),e.isFloatType=!t.int},filterValue(e,t){return e.isFloatType?t:Math.floor(t)},displayValue(e,t){var s=e.childrenMap.inputText;s.setText(e.getFotmatText(t))}},Uq=function(e,t){var s=new Il(e,t);return e.add.existing(s),s};const fS=Phaser.Utils.Objects.GetValue,kq=Phaser.Math.Linear,Vq=Phaser.Math.Snap.Floor;var zq=function(e,t,s,f){e.minValue=t,e.maxValue=s,e.step=f;var C=e.childrenMap.slider;C.setGap(f,t,s)},Wq=function(e,t){t===void 0&&(t=!0);var s=e.childrenMap.inputText;s.setReadOnly(t)},Xq={name:"RangeInput",accept(e){return e.hasOwnProperty("view")?e.view==="range":typeof e.value=="number"&&e.hasOwnProperty("min")&&e.hasOwnProperty("max")},build(e,t){var s=e.scene;e.type="rexTweaker.RangeInput";var f=t.slider,C=e.orientation===0?"track.height":"track.width",w=fS(f,C),F=Uq(s,f),Z=t.defaultExpandWidth?2:0,tt=fS(t,"proportion.range.slider",Z),N=w===void 0;e.add(F,{proportion:tt,expand:N,key:"slider"});var z=t.inputNumber||t.inputText,H=lo(s,z).setNumberInput(),Z=t.defaultExpandWidth?1:0,tt=fS(t,"proportion.range.inputText",Z);e.add(H,{proportion:tt,expand:!0,key:"inputText"}),H.on("close",function(){e.setValue(H.value)}),F.on("valuechange",function(){var nt=kq(e.minValue,e.maxValue,F.value);e.step&&(nt=Vq(nt,e.step,e.minValue)),e.setValue(nt)})},setup(e,t,s){(s||t.hasOwnProperty("max"))&&zq(e,t.min,t.max,t.step),(s||t.hasOwnProperty("inputTextReadOnly"))&&Wq(e,!!t.inputTextReadOnly)},displayValue(e,t){var s=e.childrenMap.slider;s.setValue(t,e.minValue,e.maxValue);var f=e.childrenMap.inputText;f.setText("").setText(e.getFotmatText(t))}},H2=function(e,t){var s=new rs(e,t);return e.add.existing(s),s};const Hq=Phaser.Utils.Objects.GetValue;var Yq=function(e,t){t===void 0&&(t=!0);var s=e.childrenMap.inputText;s.setReadOnly(t)},$q={name:"RangeInput",accept(e){return e.hasOwnProperty("view")?e.view==="incdec":!1},build(e,t){var s=e.scene;e.type="rexTweaker.IncDecInput";var f=Hq(t,"incDec")||{},C={text:null,action:null},w=H2(s,{expand:!1}),F=t.defaultExpandWidth?1:0;e.add(w,{proportion:F,expand:!0});var N=t.inputNumber||t.inputText,z=lo(s,N).setNumberInput();z.on("close",function(){e.setValue(z.value)});var H=Object.assign(I(C),f.incButton||{}),Z=as(s,H),tt=Object.assign(I(C),f.decButton||{}),nt=as(s,tt);w.addButton(Z),w.addButton(nt);var st=f.inputTextIndex||0;w.insert(st,z,{proportion:1,expand:!0}),e.step=1,e.minValue=void 0,e.maxValue=void 0,w.on("button.click",function(ht,ft,dt,gt){var Et=e.value;ft===0?Et+=e.step:Et-=e.step,e.maxValue!==void 0&&Et>e.maxValue&&(Et=e.maxValue),e.minValue!==void 0&&Et<e.minValue&&(Et=e.minValue),e.setValue(Et)}),e.addChildrenMap("incButton",Z),e.addChildrenMap("decButton",nt),e.addChildrenMap("inputText",z)},setup(e,t,s){(s||t.hasOwnProperty("inputTextReadOnly"))&&Yq(e,!!t.inputTextReadOnly),(s||t.hasOwnProperty("step"))&&(e.step=t.hasOwnProperty("step")?t.step:1),(s||t.hasOwnProperty("min"))&&(e.minValue=t.min),(s||t.hasOwnProperty("max"))&&(e.maxValue=t.max)},displayValue(e,t){var s=e.childrenMap.inputText;s.setText("").setText(e.getFotmatText(t))}},_q=function(e,t,s){s===void 0&&(s=!0),s?t=t?I(t):{}:t||(t={});var f=new Ov(e,t);return e.add.existing(f),f},Zq={name:"ColorInput",accept(e){return e.hasOwnProperty("view")?e.view==="color":!1},build(e,t){var s=e.scene;e.type="rexTweaker.ColorInput";var f=t.colorInput;f===void 0&&(f={}),f.hasOwnProperty("inputText")||(f.inputText=t.inputText);var C=_q(s,f);e.add(C,{proportion:1,expand:!0,key:"colorInput"}),C.on("valuechange",function(w){e.setValue(w)})},displayValue(e,t){var s=e.childrenMap.colorInput;s.setValue(t)}},Kq=function(e,t){var s=new v0(e,t);return e.add.existing(s),s},Jq={name:"CheckboxInput",accept(e){return e.hasOwnProperty("view")?e.view==="boolean":typeof e.value=="boolean"},build(e,t){var s=e.scene;e.type="rexTweaker.CheckboxInput";var f=t.checkbox,C=Kq(s,f),w=f.size;w!==void 0&&C.setSize(w,w);var F=w!==void 0?0:1;e.add(C,{proportion:0,expand:!1,fitRatio:F,key:"checkbox"}),C.on("valuechange",function(N){e.setValue(N)})},displayValue(e,t){var s=e.childrenMap.checkbox;s.setValue(t)}},Qq=function(e,t){var s=new x0(e,t);return e.add.existing(s),s},jq={name:"ToggleSwitchInput",accept(e){return e.hasOwnProperty("view")?e.view==="toggleSwitch":!1},build(e,t){var s=e.scene;e.type="rexTweaker.ToggleSwitchInput";var f=t.toggleSwitch,C=Qq(s,f),w=f.size;w!==void 0&&C.setSize(w,w);var F=w!==void 0?0:1;e.addSpace().add(C,{proportion:0,expand:!1,fitRatio:F,key:"toggleSwitch"}),C.on("valuechange",function(N){e.setValue(N)})},displayValue(e,t){var s=e.childrenMap.toggleSwitch;s.setValue(t)}},qq=function(e,t){t=PA(e,t);var s=new sf(e,t);return e.add.existing(s),s},Y2=function(e,t){for(var s=0,f=e.length;s<f;s++){var C=e[s];if(C.value===t)return s}},ttt=function(e,t){var s=Y2(e,t);if(s!=null)return e[s]},ett=function(e,t){var s=e.childrenMap.list;s.setOptions(t)},itt={name:"ListInput",accept(e){return e.hasOwnProperty("view")?e.view==="list":e.hasOwnProperty("options")},build(e,t){var s=e.scene;e.type="rexTweaker.ListInput";var f=qq(s,t.list);e.add(f,{proportion:1,expand:!0,key:"list"}),f.on("button.click",function(C,w,F,N,z,H){e.setValue(F.value)})},setup(e,t,s){(s||t.hasOwnProperty("options"))&&ett(e,t.options)},displayValue(e,t){var s=e.childrenMap.list,f=ttt(s.options,t);s.resetDisplayContent(f).setMinSize(s.width,s.height).layout().setMinSize(0,0)}},stt=function(e,t){for(var s=0,f=e.length;s<f;s++){var C=e[s];C&&C.setActiveState(s===t)}};const ntt=Phaser.Utils.Objects.GetValue;var rtt=function(e,t){var s=e.childrenMap.list;s.options=t;var f=e.scene,C=s.buttonConfig;s.clearButtons(!0);for(var w=0,F=t.length;w<F;w++){var N=t[w],z=as(f,C).setActiveState(!1).resetDisplayContent({text:N.text});s.addButton(z)}},att={name:"ButtonsInput",accept(e){return e.hasOwnProperty("view")?e.view==="buttons":!1},build(e,t){var s=e.scene;e.type="rexTweaker.ButtonsInput";var f=t.button?I(t.button):{},C=ntt(f,"expand",!0);C&&(f.align="center"),delete f.expand;var w=H2(s,{expand:C});w.buttonConfig=f,e.add(w,{proportion:1,expand:!0,key:"list"}),w.on("button.click",function(F,N,z,H){var Z=w.options[N];Z&&(e._selectedIndex=N,e.setValue(Z.value),e._selectedIndex=void 0)})},setup(e,t,s){(s||t.hasOwnProperty("options"))&&rtt(e,t.options)},displayValue(e,t){var s=e.childrenMap.list,f=e._selectedIndex;f===void 0&&(f=Y2(s.options,t)),stt(s.childrenMap.buttons,f)}},ott=function(){this.registerInputHandler(Fq).registerInputHandler(Bq).registerInputHandler(Gq).registerInputHandler(Xq).registerInputHandler($q).registerInputHandler(Zq).registerInputHandler(Jq).registerInputHandler(jq).registerInputHandler(itt).registerInputHandler(att)};class $2 extends X2(){constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("style")&&(s.styles=s.style),s.styles===void 0&&(s.styles={}),s.background=s.styles.background||{},s.space=s.styles.space||{},super(t,s),this.type="rexTweaker",ott.call(this)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.inputHandlers=void 0)}}c.register("tweaker",function(e){var t=new $2(this.scene,e);return this.scene.add.existing(t),t}),j(window,"RexPlugins.UI.Tweaker",$2),c.register("click",function(e,t){return new ha(e,t)}),j(window,"RexPlugins.UI.Click",ha),c.register("clickOutside",function(e,t){return new vx(e,t)}),j(window,"RexPlugins.UI.ClickOutside",vx),c.register("inTouching",function(e,t){return new Al(e,t)}),j(window,"RexPlugins.UI.InTouching",Al),c.register("tap",function(e,t){return Qs(e)||(t=e,e=this.scene),new Sp(e,t)}),j(window,"RexPlugins.UI.Tap",Sp),c.register("press",function(e,t){return Qs(e)||(t=e,e=this.scene),new Tp(e,t)}),j(window,"RexPlugins.UI.Press",Tp),c.register("swipe",function(e,t){return Qs(e)||(t=e,e=this.scene),new Id(e,t)}),j(window,"RexPlugins.UI.Swipe",Id),c.register("pan",function(e,t){return Qs(e)||(t=e,e=this.scene),new ZP(e,t)}),j(window,"RexPlugins.UI.Pan",ZP),c.register("drag",function(e,t){return new oS(e,t)}),j(window,"RexPlugins.UI.Drag",oS),c.register("pinch",function(e){return new jP(this.scene,e)}),j(window,"RexPlugins.UI.Pinch",jP),c.register("rotate",function(e){return new wx(this.scene,e)}),j(window,"RexPlugins.UI.Rotate",wx);const htt=Phaser.Utils.Objects.IsPlainObject,_2=Phaser.Utils.Objects.GetValue;var Z2=function(e,t,s){var f;if(e===void 0)e=s.texture.key,t=s.frame.name;else if(htt(e)){var C=e;e=_2(C,"key",s.texture.key),t=_2(C,"frame",s.frame.name)}else typeof e=="string"||(f=e);return f===void 0&&(f=function(w){w.setTexture(e,t)}),f};const cf=Phaser.Utils.Objects.GetValue,ltt=Phaser.Utils.Objects.GetAdvancedValue,utt=Phaser.Math.Linear;class K2 extends Jo{constructor(t,s){super(t,s),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setDuration(ltt(t,"duration",500)),this.setEase(cf(t,"ease","Sine")),this.setOrientation(cf(t,"orientation",0)),this.setFrontFace(cf(t,"front",void 0)),this.setBackFace(cf(t,"back",void 0)),this.setFace(cf(t,"face",0)),this}setOrientation(t){return typeof t=="string"&&(t=dtt[t]),this.orientation=t,this}get face(){return this._face}set face(t){typeof t=="string"&&(t=ftt[t]),this._face=t,t===0&&this.frontFaceCallback?this.frontFaceCallback(this.parent):t===1&&this.backFaceCallback&&this.backFaceCallback(this.parent)}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}setFrontFace(t,s){return this.frontFaceCallback=Z2(t,s,this.parent),this}setBackFace(t,s){return this.backFaceCallback=Z2(t,s,this.parent),this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.orientation===0?this.scale0=t.scaleX:this.scale0=t.scaleY,this.timer.setDelay(this.delay).setDuration(this.duration/2).setRepeat(1),super.start(),this}flip(t){return this.isRunning?this:(t!==void 0&&this.setDuration(t),this.start(),this)}updateTarget(t,s){s.justRestart&&this.toggleFace();var f=s.t;s.isOddIteration&&(f=1-f),f=this.easeFn(f);var C=utt(this.scale0,0,f);this.orientation===0?t.scaleX=C:t.scaleY=C}}const dtt={x:0,horizontal:0,y:1,vertical:1},ftt={front:0,back:1};c.register("flip",function(e,t){return new K2(e,t)}),j(window,"RexPlugins.UI.Flip",K2),c.register("shake",function(e,t){return new ox(e,t)}),j(window,"RexPlugins.UI.Shake",ox),c.register("touchEventStop",function(e,t){return new pp(e,t)}),j(window,"RexPlugins.UI.TouchEventStop",pp),c.register("perspective",function(e,t){return new t2(e,t)}),j(window,"RexPlugins.UI.Perspective",t2);const J2=Phaser.Math.RotateAround;var cS=function(e,t,s){var f=e.width/2,C=e.height/2;return bs.x=t-f,bs.y=s-C,J2(bs,0,0,e.rotation),bs.x*=e.scaleX,bs.y*=e.scaleY,bs.x+=e.x,bs.y+=e.y,bs},ctt=function(e,t,s){var f=e.width/2,C=e.height/2;return bs.x=t-e.x,bs.y=s-e.y,bs.x/=e.scaleX,bs.y/=e.scaleY,J2(bs,0,0,-e.rotation),bs.x+=f,bs.y+=C,bs},bs={x:0,y:0};class ptt{constructor(t,s){this.parent=t,this.vertex=s,this._localX=void 0,this._localY=void 0}destroy(){this.parent=void 0,this.vertex=void 0}updateVertexPosition(t,s){var f=this.parent,C=f.height,w=f.frame.cutWidth/C/2,F=f.frame.cutHeight/C/2,N=t/C-w,z=s/C-F,H=this.vertex;return H.x=N,H.y=-z,f.forceUpdate(),this}get localX(){return this._localX}set localX(t){this.setLocalXY(t,this._localY)}get localY(){return this._localY}set localY(t){this.setLocalXY(this._localX,t)}get localXOrigin(){return this._localXOrigin}get localYOrigin(){return this._localYOrigin}resetLocalXY(t,s){return this._localXOrigin=t,this._localYOrigin=s,this._localX=t,this._localY=s,this}setLocalXY(t,s,f){return this._localX===t&&this._localY===s?this:(this._localX=t,this._localY=s,f||this.updateVertexPosition(t,s),this)}setWorldXY(t,s){if(this._worldX===t&&this._worldY===s)return this;var f=ctt(this.parent,t,s);return this.setLocalXY(f.x,f.y),this}setPosition(t,s){return this.setWorldXY(t,s),this}getWorldXY(){return cS(this.parent,this._localX,this._localY)}get x(){var t=cS(this.parent,this._localX,this._localY);return t.x}set x(t){this.setWorldXY(t,this.y)}get y(){var t=cS(this.parent,this._localX,this._localY);return t.y}set y(t){this.setWorldXY(this.x,t)}}const vtt=Phaser.Geom.Mesh.Vertex,mtt=Phaser.Geom.Mesh.Face;var gtt=function(e){for(var t=e.isNinePointMode,s=t?9:4,f=e.vertices,C=e.faces,w=e.controlPoints,F=0;F<s;F++){var N=new vtt;f.push(N),w.push(new ptt(e,N))}var z;t?z=Stt:e.fourPointsModeRTL?z=ytt:z=xtt;for(var F=0,H=z.length;F<H;F+=3){var Z=f[z[F+0]],tt=f[z[F+1]],nt=f[z[F+2]];C.push(new mtt(Z,tt,nt))}t?(e.topLeft=w[0],e.topCenter=w[1],e.topRight=w[2],e.centerLeft=w[3],e.center=w[4],e.centerRight=w[5],e.bottomLeft=w[6],e.bottomCenter=w[7],e.bottomRight=w[8]):(e.topLeft=w[0],e.topRight=w[1],e.bottomLeft=w[2],e.bottomRight=w[3])};const xtt=[0,2,3,0,3,1],ytt=[1,3,2,1,2,0],Stt=[0,3,4,0,4,1,1,4,2,4,5,2,3,6,4,6,7,4,4,7,8,4,8,5];var Ttt=function(e){var t,s=0,f=e.height,C=0,w=e.width;if(e.isNinePointMode){var F=(C+w)/2,N=(s+f)/2;t=[C,s,F,s,w,s,C,N,F,N,w,N,C,f,F,f,w,f]}else t=[C,s,w,s,C,f,w,f];return t};const Ctt=Phaser.Utils.Objects.IsPlainObject,Hl=Phaser.Utils.Objects.GetValue;let Mtt=class extends VA{constructor(t,s,f,C,w,F){Ctt(s)&&(F=s,s=Hl(F,"x",0),f=Hl(F,"y",0),C=Hl(F,"key",null),w=Hl(F,"frame",null)),super(t,s,f,C,w),this.type="rexQuadImage",this.isNinePointMode=Hl(F,"ninePointMode",!1),this.fourPointsModeRTL=Hl(F,"rtl",!1),this.controlPoints=[],gtt(this),this.hideCCW=!1,this.syncSize()}destroy(t){if(!(!this.scene||this.ignoreDestroy)){super.destroy(t);for(var s=0,f=this.controlPoints.length;s<f;s++)this.controlPoints[s].destroy();this.controlPoints=void 0}}resetVerts(){this.dirtyCache[9]=-1;for(var t=Ttt(this),s=this.width,f=this.height,C=this.frame.cutWidth/f/2,w=this.frame.cutHeight/f/2,F=this.frame.u0,N=this.frame.u1,z=this.frame.v0,H=this.frame.v1,Z=N-F,tt=H-z,nt=this.controlPoints,st=0,ht=t.length;st<ht;st+=2){var ft=t[st+0],dt=t[st+1],gt=st/2,Et=ft/f-C,yt=dt/f-w,Dt=F+Z*(ft/s),Wt=z+tt*(dt/f);this.vertices[gt].set(Et,-yt,0).setUVs(Dt,Wt),nt[gt].resetLocalXY(ft,dt)}return this}syncSize(){return this.setSizeToFrame(),this.setOrtho(this.width/this.height,1),this.resetVerts(),this}};Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue;var Q2=function(e,t,s){t===void 0&&(t=0),s===void 0&&(s=0);for(var f=e.width,C=e.height,w=f*.5,F=C*.5,N=Math.tan(t)*F,z=Math.tan(s)*w,H=e.controlPoints,Z=0,tt=H.length;Z<tt;Z++){var nt=H[Z],st=nt.localXOrigin,ht=nt.localYOrigin;nt.localX=st+(ht>F?N:-N),nt.localY=ht+(st>w?z:-z)}};const Ett=Phaser.Utils.Objects.IsPlainObject,Nv=Phaser.Utils.Objects.GetValue,j2=Phaser.Math.DegToRad,q2=Phaser.Math.RadToDeg;class Ptt extends Mtt{constructor(t,s,f,C,w){if(Ett(s)){var F=s;s=Nv(F,"x",0),f=Nv(F,"y",0),C=Nv(F,"key",null),w=Nv(F,"frame",null)}super(t,s,f,C,w),this.type="rexSkewmage",this._skewX=0,this._skewY=0}get skewX(){return this._skewX}set skewX(t){this._skewX=t,Q2(this,this._skewX,this._skewY)}get skewXDeg(){return q2(this._skewX)}set skewXDeg(t){this.skewX=j2(t)}get skewY(){return this._skewY}set skewY(t){this._skewY=t,Q2(this,this._skewX,this._skewY)}get skewYDeg(){return q2(this._skewY)}set skewYDeg(t){this.skewY=j2(t)}setSkewX(t){return this.skewX=t,this}setSkewY(t){return this.skewY=t,this}setSkew(t,s){return s===void 0&&(s=t),this.skewX=t,this.skewY=s,this}setSkewXDeg(t){return this.skewXDeg=t,this}setSkewYDeg(t){return this.skewYDeg=t,this}setSkewDeg(t,s){return s===void 0&&(s=t),this.skewXDeg=t,this.skewYDeg=s,this}}const wtt=Phaser.Utils.Objects.IsPlainObject,Gv=Phaser.Utils.Objects.GetValue;class btt extends Ptt{constructor(t,s,f,C,w){if(wtt(s)){var F=s;s=Gv(F,"x",0),f=Gv(F,"y",0),C=Gv(F,"width",32),w=Gv(F,"height",32)}var N=_A(t,C,w);super(t,s,f,N,null),this.type="rexSkewRenderTexture",this.rt=this.texture}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.rt.destroy(),this.rt=null)}}class tR extends qA(btt){get skewState(){return this.isRunning}}c.register("skew",function(e,t){return new tR(e,t)}),j(window,"RexPlugins.UI.Skew",tR),c.register("anchor",function(e,t){return new sx(e,t)}),j(window,"RexPlugins.UI.Anchor",sx),c.register("textTyping",function(e,t){return new Tv(e,t)}),j(window,"RexPlugins.UI.TextTyping",Tv),c.register("textPage",function(e,t){return new Sv(e,t)}),j(window,"RexPlugins.UI.TextPage",Sv);var Yl=void 0,Att=function(e){e!==Yl&&(Yl!==void 0&&Yl.close(),Yl=e)},Rtt=function(e){e===Yl&&(Yl=void 0)};const kr=Phaser.Utils.Objects.GetValue,Ltt=Phaser.Utils.Objects.Clone;var Ott=function(e,t){t===void 0&&(t={}),t=Ltt(t);var s=e.scene,f=e.style,C=kr(t,"backgroundColor",f.backgroundColor);C===null&&(C="transparent"),t.text=kr(t,"text",e.text),t.fontFamily=kr(t,"fontFamily",f.fontFamily),t.fontSize=kr(t,"fontSize",f.fontSize),t.color=kr(t,"color",f.color),t.backgroundColor=C,t.direction=kr(t,"rtl",f.rtl)?"rtl":"ltr",t.align=kr(t,"align",Ftt(f)),t.direction==="rtl"&&Qx(e)&&(t.align="right");var w=e.padding;w.left>0&&(t.paddingLeft=`${w.left}px`),w.right>0&&(t.paddingRight=`${w.right}px`),f.backgroundCornerRadius&&(t.borderRadius=kr(t,"borderRadius",`${f.backgroundCornerRadius}px`));var F=new kp(s,e.x,e.y,kr(t,"width",e.width),kr(t,"height",e.height),t);F.setScale(e.scaleX,e.scaleY).setOrigin(e.originX,e.originY).setScrollFactor(e.scrollFactorX,e.scrollFactorY);var N=e.parentContainer;return N?N.add(F):s.add.existing(F),F},Ftt=function(e){return e.hasOwnProperty("align")?e.align:e.hasOwnProperty("halign")?e.halign:"left"},Dtt=function(e,t,s){return e.time.delayedCall(0,t,[],s)};const Sh=Phaser.Utils.Objects.GetValue,Itt=Phaser.Utils.Objects.Merge;var Btt=function(e,t){e===void 0&&(e={}),e=Itt(e,this.openConfig),Att(this),Qn(e)&&(t=e,e=void 0);var s=Sh(e,"inputType",void 0);s===void 0&&(s=Sh(e,"type","text")),t===void 0&&(t=Sh(e,"onClose",void 0));var f=Sh(e,"onCreate",void 0),C=Sh(e,"onOpen",void 0),w=Sh(e,"onTextChanged",void 0);return this.inputText=Ott(this.parent,e),f&&f(this.parent,this.inputText),this.inputText.on("textchange",function(F){var N=F.text;w?w(this.parent,N):this.parent.text=N},this).setFocus(),this.parent.setVisible(!1),this.onClose=t,Sh(e,"enterClose",s!=="textarea")&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.delayCall=Dtt(this.scene,function(){this.scene.input.once("pointerdown",this.close,this),C&&C(this.parent,this.inputText),this.emit("open",this.parent,this.inputText)},this),this},Ntt=function(){return Rtt(this),this.parent.setVisible(!0),this.inputText&&(this.inputText.destroy(),this.inputText=void 0),this.delayCall&&(this.delayCall.remove(),this.delayCall=void 0),this.scene.input.keyboard.off("keydown-ENTER",this.close,this),this.scene.input.off("pointerdown",this.close,this),this.onClose&&this.onClose(this.parent),this.emit("close",this.parent),this},Gtt={open:Btt,close:Ntt};const Utt=Phaser.Utils.Objects.GetValue;class Uv extends Si{constructor(t,s){super(t),this.inputText=void 0,this.onClose=void 0,this.delayCall=void 0,this.setOpenConfig(s);var f=Utt(s,"clickEnable",!0);f&&t.on("pointerdown",function(){this.open()},this).setInteractive()}shutdown(t){this.isShutdown||(this.close(),super.shutdown(t))}setOpenConfig(t){return t===void 0&&(t={}),this.openConfig=t,this}get isOpened(){return this.inputText!==void 0}get text(){return this.isOpened?this.inputText.text:this.parent.text}}Object.assign(Uv.prototype,Gtt);var ktt=function(e,t,s){return e._edit||(e._edit=new Uv(e,{clickEnable:!1})),e._edit.open(t,s),e._edit};c.register("textEdit",function(e,t){return new Uv(e,t)}),j(window,"RexPlugins.UI.TextEdit",Uv),c.register("layerManager",function(e){return new Lc(this.scene,e)}),j(window,"RexPlugins.UI.LayerManager",Lc);class eR extends Phaser.Plugins.ScenePlugin{constructor(t,s){super(t,s),this.add=new c(t)}boot(){var t=this.scene.events;t.on("destroy",this.destroy,this)}destroy(){this.add.destroy(),super.destroy()}isInTouching(t,s,f,C){return t.visible?br(t,s,f,C):!1}get viewport(){return hl(this.scene,this.scene.cameras.main,!0)}}var Vtt={getParentSizer:un,getTopmostSizer:tP,removeFromParent:ch,hide:to,show:qa,isShown:hx,confirmAction:qb,edit:ktt,wrapExpandText:zp,fontSizeExpandText:Xp,fontSizeResize:Wp,setFontSizeToFitWidth:Wp,waitEvent:Uc,waitComplete:ps,delayPromise:Yw,setChildrenInteractive:Ap,fadeIn:hp,fadeOutDestroy:lp,easeMoveTo:RP,easeMoveFrom:LP,modal:cx,modalPromise:hz,modalClose:VP,requestDrag:E2,openFileChooser:_w};return Object.assign(eR.prototype,Vtt),eR})})(CO);var MO=CO.exports;const EO=xO(MO),ret=ztt({__proto__:null,default:EO},[MO]),aet=16/9,oet=9/16,het=1.1;function Ys(L,n){const c=L/n;let M=L,R=n,I;return c>=het?(I=aet,R=n,M=n*I,M>L&&(M=L,R=L/I)):(I=oet,M=L,R=L/I,R>n&&(R=n,M=n*I)),{snappedAspect:I,targetWidth:M,targetHeight:R}}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const rC="178",uet=0,MR=1,det=2,fet=0,PO=1,cet=2,ba=3,Ia=0,nn=1,sn=2,Ao=0,vu=1,ER=2,PR=3,wR=4,pet=5,Dh=100,vet=101,met=102,get=103,xet=104,yet=200,Tet=201,Cet=202,Met=203,eT=204,iT=205,Eet=206,Pet=207,wet=208,bet=209,Aet=210,Ret=211,Let=212,Oet=213,Fet=214,sT=0,nT=1,rT=2,Su=3,aT=4,oT=5,hT=6,lT=7,jm=0,Det=1,Iet=2,Ro=0,Bet=1,Net=2,Get=3,Uet=4,ket=5,Vet=6,zet=7,wO=300,Tu=301,Cu=302,uT=303,dT=304,qm=306,Om=1e3,Bh=1001,fT=1002,Xs=1003,Wet=1004,Wv=1005,Yr=1006,pS=1007,Nh=1008,Hn=1009,bO=1010,AO=1011,Bf=1012,aC=1013,Xh=1014,La=1015,Hf=1016,oC=1017,hC=1018,Nf=1020,RO=35902,LO=1021,OO=1022,Tn=1023,Gf=1026,Uf=1027,FO=1028,lC=1029,DO=1030,uC=1031,dC=1033,Cm=33776,Mm=33777,Em=33778,Pm=33779,cT=35840,pT=35841,vT=35842,mT=35843,gT=36196,xT=37492,yT=37496,ST=37808,TT=37809,CT=37810,MT=37811,ET=37812,PT=37813,wT=37814,bT=37815,AT=37816,RT=37817,LT=37818,OT=37819,FT=37820,DT=37821,wm=36492,IT=36494,BT=36495,IO=36283,NT=36284,GT=36285,UT=36286,Xet=3200,Het=3201,fC=0,Yet=1,Po="",xs="srgb",Mu="srgb-linear",Fm="linear",ii="srgb",$l=7680,bR=519,$et=512,_et=513,Zet=514,BO=515,Ket=516,Jet=517,Qet=518,jet=519,AR=35044,RR="300 es",Oa=2e3,Dm=2001;class Bu{addEventListener(n,c){this._listeners===void 0&&(this._listeners={});const M=this._listeners;M[n]===void 0&&(M[n]=[]),M[n].indexOf(c)===-1&&M[n].push(c)}hasEventListener(n,c){const M=this._listeners;return M===void 0?!1:M[n]!==void 0&&M[n].indexOf(c)!==-1}removeEventListener(n,c){const M=this._listeners;if(M===void 0)return;const R=M[n];if(R!==void 0){const I=R.indexOf(c);I!==-1&&R.splice(I,1)}}dispatchEvent(n){const c=this._listeners;if(c===void 0)return;const M=c[n.type];if(M!==void 0){n.target=this;const R=M.slice(0);for(let I=0,m=R.length;I<m;I++)R[I].call(this,n);n.target=null}}}const As=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],vS=Math.PI/180,Im=180/Math.PI;function Yf(){const L=Math.random()*4294967295|0,n=Math.random()*4294967295|0,c=Math.random()*4294967295|0,M=Math.random()*4294967295|0;return(As[L&255]+As[L>>8&255]+As[L>>16&255]+As[L>>24&255]+"-"+As[n&255]+As[n>>8&255]+"-"+As[n>>16&15|64]+As[n>>24&255]+"-"+As[c&63|128]+As[c>>8&255]+"-"+As[c>>16&255]+As[c>>24&255]+As[M&255]+As[M>>8&255]+As[M>>16&255]+As[M>>24&255]).toLowerCase()}function Xe(L,n,c){return Math.max(n,Math.min(c,L))}function qet(L,n){return(L%n+n)%n}function mS(L,n,c){return(1-c)*L+c*n}function mf(L,n){switch(n.constructor){case Float32Array:return L;case Uint32Array:return L/4294967295;case Uint16Array:return L/65535;case Uint8Array:return L/255;case Int32Array:return Math.max(L/2147483647,-1);case Int16Array:return Math.max(L/32767,-1);case Int8Array:return Math.max(L/127,-1);default:throw new Error("Invalid component type.")}}function tn(L,n){switch(n.constructor){case Float32Array:return L;case Uint32Array:return Math.round(L*4294967295);case Uint16Array:return Math.round(L*65535);case Uint8Array:return Math.round(L*255);case Int32Array:return Math.round(L*2147483647);case Int16Array:return Math.round(L*32767);case Int8Array:return Math.round(L*127);default:throw new Error("Invalid component type.")}}class Ve{constructor(n=0,c=0){Ve.prototype.isVector2=!0,this.x=n,this.y=c}get width(){return this.x}set width(n){this.x=n}get height(){return this.y}set height(n){this.y=n}set(n,c){return this.x=n,this.y=c,this}setScalar(n){return this.x=n,this.y=n,this}setX(n){return this.x=n,this}setY(n){return this.y=n,this}setComponent(n,c){switch(n){case 0:this.x=c;break;case 1:this.y=c;break;default:throw new Error("index is out of range: "+n)}return this}getComponent(n){switch(n){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+n)}}clone(){return new this.constructor(this.x,this.y)}copy(n){return this.x=n.x,this.y=n.y,this}add(n){return this.x+=n.x,this.y+=n.y,this}addScalar(n){return this.x+=n,this.y+=n,this}addVectors(n,c){return this.x=n.x+c.x,this.y=n.y+c.y,this}addScaledVector(n,c){return this.x+=n.x*c,this.y+=n.y*c,this}sub(n){return this.x-=n.x,this.y-=n.y,this}subScalar(n){return this.x-=n,this.y-=n,this}subVectors(n,c){return this.x=n.x-c.x,this.y=n.y-c.y,this}multiply(n){return this.x*=n.x,this.y*=n.y,this}multiplyScalar(n){return this.x*=n,this.y*=n,this}divide(n){return this.x/=n.x,this.y/=n.y,this}divideScalar(n){return this.multiplyScalar(1/n)}applyMatrix3(n){const c=this.x,M=this.y,R=n.elements;return this.x=R[0]*c+R[3]*M+R[6],this.y=R[1]*c+R[4]*M+R[7],this}min(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this}max(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this}clamp(n,c){return this.x=Xe(this.x,n.x,c.x),this.y=Xe(this.y,n.y,c.y),this}clampScalar(n,c){return this.x=Xe(this.x,n,c),this.y=Xe(this.y,n,c),this}clampLength(n,c){const M=this.length();return this.divideScalar(M||1).multiplyScalar(Xe(M,n,c))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(n){return this.x*n.x+this.y*n.y}cross(n){return this.x*n.y-this.y*n.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(n){const c=Math.sqrt(this.lengthSq()*n.lengthSq());if(c===0)return Math.PI/2;const M=this.dot(n)/c;return Math.acos(Xe(M,-1,1))}distanceTo(n){return Math.sqrt(this.distanceToSquared(n))}distanceToSquared(n){const c=this.x-n.x,M=this.y-n.y;return c*c+M*M}manhattanDistanceTo(n){return Math.abs(this.x-n.x)+Math.abs(this.y-n.y)}setLength(n){return this.normalize().multiplyScalar(n)}lerp(n,c){return this.x+=(n.x-this.x)*c,this.y+=(n.y-this.y)*c,this}lerpVectors(n,c,M){return this.x=n.x+(c.x-n.x)*M,this.y=n.y+(c.y-n.y)*M,this}equals(n){return n.x===this.x&&n.y===this.y}fromArray(n,c=0){return this.x=n[c],this.y=n[c+1],this}toArray(n=[],c=0){return n[c]=this.x,n[c+1]=this.y,n}fromBufferAttribute(n,c){return this.x=n.getX(c),this.y=n.getY(c),this}rotateAround(n,c){const M=Math.cos(c),R=Math.sin(c),I=this.x-n.x,m=this.y-n.y;return this.x=I*M-m*R+n.x,this.y=I*R+m*M+n.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class $f{constructor(n=0,c=0,M=0,R=1){this.isQuaternion=!0,this._x=n,this._y=c,this._z=M,this._w=R}static slerpFlat(n,c,M,R,I,m,E){let i=M[R+0],d=M[R+1],S=M[R+2],u=M[R+3];const l=I[m+0],h=I[m+1],r=I[m+2],o=I[m+3];if(E===0){n[c+0]=i,n[c+1]=d,n[c+2]=S,n[c+3]=u;return}if(E===1){n[c+0]=l,n[c+1]=h,n[c+2]=r,n[c+3]=o;return}if(u!==o||i!==l||d!==h||S!==r){let p=1-E;const a=i*l+d*h+S*r+u*o,v=a>=0?1:-1,x=1-a*a;if(x>Number.EPSILON){const y=Math.sqrt(x),T=Math.atan2(y,a*v);p=Math.sin(p*T)/y,E=Math.sin(E*T)/y}const g=E*v;if(i=i*p+l*g,d=d*p+h*g,S=S*p+r*g,u=u*p+o*g,p===1-E){const y=1/Math.sqrt(i*i+d*d+S*S+u*u);i*=y,d*=y,S*=y,u*=y}}n[c]=i,n[c+1]=d,n[c+2]=S,n[c+3]=u}static multiplyQuaternionsFlat(n,c,M,R,I,m){const E=M[R],i=M[R+1],d=M[R+2],S=M[R+3],u=I[m],l=I[m+1],h=I[m+2],r=I[m+3];return n[c]=E*r+S*u+i*h-d*l,n[c+1]=i*r+S*l+d*u-E*h,n[c+2]=d*r+S*h+E*l-i*u,n[c+3]=S*r-E*u-i*l-d*h,n}get x(){return this._x}set x(n){this._x=n,this._onChangeCallback()}get y(){return this._y}set y(n){this._y=n,this._onChangeCallback()}get z(){return this._z}set z(n){this._z=n,this._onChangeCallback()}get w(){return this._w}set w(n){this._w=n,this._onChangeCallback()}set(n,c,M,R){return this._x=n,this._y=c,this._z=M,this._w=R,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(n){return this._x=n.x,this._y=n.y,this._z=n.z,this._w=n.w,this._onChangeCallback(),this}setFromEuler(n,c=!0){const M=n._x,R=n._y,I=n._z,m=n._order,E=Math.cos,i=Math.sin,d=E(M/2),S=E(R/2),u=E(I/2),l=i(M/2),h=i(R/2),r=i(I/2);switch(m){case"XYZ":this._x=l*S*u+d*h*r,this._y=d*h*u-l*S*r,this._z=d*S*r+l*h*u,this._w=d*S*u-l*h*r;break;case"YXZ":this._x=l*S*u+d*h*r,this._y=d*h*u-l*S*r,this._z=d*S*r-l*h*u,this._w=d*S*u+l*h*r;break;case"ZXY":this._x=l*S*u-d*h*r,this._y=d*h*u+l*S*r,this._z=d*S*r+l*h*u,this._w=d*S*u-l*h*r;break;case"ZYX":this._x=l*S*u-d*h*r,this._y=d*h*u+l*S*r,this._z=d*S*r-l*h*u,this._w=d*S*u+l*h*r;break;case"YZX":this._x=l*S*u+d*h*r,this._y=d*h*u+l*S*r,this._z=d*S*r-l*h*u,this._w=d*S*u-l*h*r;break;case"XZY":this._x=l*S*u-d*h*r,this._y=d*h*u-l*S*r,this._z=d*S*r+l*h*u,this._w=d*S*u+l*h*r;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+m)}return c===!0&&this._onChangeCallback(),this}setFromAxisAngle(n,c){const M=c/2,R=Math.sin(M);return this._x=n.x*R,this._y=n.y*R,this._z=n.z*R,this._w=Math.cos(M),this._onChangeCallback(),this}setFromRotationMatrix(n){const c=n.elements,M=c[0],R=c[4],I=c[8],m=c[1],E=c[5],i=c[9],d=c[2],S=c[6],u=c[10],l=M+E+u;if(l>0){const h=.5/Math.sqrt(l+1);this._w=.25/h,this._x=(S-i)*h,this._y=(I-d)*h,this._z=(m-R)*h}else if(M>E&&M>u){const h=2*Math.sqrt(1+M-E-u);this._w=(S-i)/h,this._x=.25*h,this._y=(R+m)/h,this._z=(I+d)/h}else if(E>u){const h=2*Math.sqrt(1+E-M-u);this._w=(I-d)/h,this._x=(R+m)/h,this._y=.25*h,this._z=(i+S)/h}else{const h=2*Math.sqrt(1+u-M-E);this._w=(m-R)/h,this._x=(I+d)/h,this._y=(i+S)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(n,c){let M=n.dot(c)+1;return M<1e-8?(M=0,Math.abs(n.x)>Math.abs(n.z)?(this._x=-n.y,this._y=n.x,this._z=0,this._w=M):(this._x=0,this._y=-n.z,this._z=n.y,this._w=M)):(this._x=n.y*c.z-n.z*c.y,this._y=n.z*c.x-n.x*c.z,this._z=n.x*c.y-n.y*c.x,this._w=M),this.normalize()}angleTo(n){return 2*Math.acos(Math.abs(Xe(this.dot(n),-1,1)))}rotateTowards(n,c){const M=this.angleTo(n);if(M===0)return this;const R=Math.min(1,c/M);return this.slerp(n,R),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(n){return this._x*n._x+this._y*n._y+this._z*n._z+this._w*n._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let n=this.length();return n===0?(this._x=0,this._y=0,this._z=0,this._w=1):(n=1/n,this._x=this._x*n,this._y=this._y*n,this._z=this._z*n,this._w=this._w*n),this._onChangeCallback(),this}multiply(n){return this.multiplyQuaternions(this,n)}premultiply(n){return this.multiplyQuaternions(n,this)}multiplyQuaternions(n,c){const M=n._x,R=n._y,I=n._z,m=n._w,E=c._x,i=c._y,d=c._z,S=c._w;return this._x=M*S+m*E+R*d-I*i,this._y=R*S+m*i+I*E-M*d,this._z=I*S+m*d+M*i-R*E,this._w=m*S-M*E-R*i-I*d,this._onChangeCallback(),this}slerp(n,c){if(c===0)return this;if(c===1)return this.copy(n);const M=this._x,R=this._y,I=this._z,m=this._w;let E=m*n._w+M*n._x+R*n._y+I*n._z;if(E<0?(this._w=-n._w,this._x=-n._x,this._y=-n._y,this._z=-n._z,E=-E):this.copy(n),E>=1)return this._w=m,this._x=M,this._y=R,this._z=I,this;const i=1-E*E;if(i<=Number.EPSILON){const h=1-c;return this._w=h*m+c*this._w,this._x=h*M+c*this._x,this._y=h*R+c*this._y,this._z=h*I+c*this._z,this.normalize(),this}const d=Math.sqrt(i),S=Math.atan2(d,E),u=Math.sin((1-c)*S)/d,l=Math.sin(c*S)/d;return this._w=m*u+this._w*l,this._x=M*u+this._x*l,this._y=R*u+this._y*l,this._z=I*u+this._z*l,this._onChangeCallback(),this}slerpQuaternions(n,c,M){return this.copy(n).slerp(c,M)}random(){const n=2*Math.PI*Math.random(),c=2*Math.PI*Math.random(),M=Math.random(),R=Math.sqrt(1-M),I=Math.sqrt(M);return this.set(R*Math.sin(n),R*Math.cos(n),I*Math.sin(c),I*Math.cos(c))}equals(n){return n._x===this._x&&n._y===this._y&&n._z===this._z&&n._w===this._w}fromArray(n,c=0){return this._x=n[c],this._y=n[c+1],this._z=n[c+2],this._w=n[c+3],this._onChangeCallback(),this}toArray(n=[],c=0){return n[c]=this._x,n[c+1]=this._y,n[c+2]=this._z,n[c+3]=this._w,n}fromBufferAttribute(n,c){return this._x=n.getX(c),this._y=n.getY(c),this._z=n.getZ(c),this._w=n.getW(c),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(n){return this._onChangeCallback=n,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class wt{constructor(n=0,c=0,M=0){wt.prototype.isVector3=!0,this.x=n,this.y=c,this.z=M}set(n,c,M){return M===void 0&&(M=this.z),this.x=n,this.y=c,this.z=M,this}setScalar(n){return this.x=n,this.y=n,this.z=n,this}setX(n){return this.x=n,this}setY(n){return this.y=n,this}setZ(n){return this.z=n,this}setComponent(n,c){switch(n){case 0:this.x=c;break;case 1:this.y=c;break;case 2:this.z=c;break;default:throw new Error("index is out of range: "+n)}return this}getComponent(n){switch(n){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+n)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(n){return this.x=n.x,this.y=n.y,this.z=n.z,this}add(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z,this}addScalar(n){return this.x+=n,this.y+=n,this.z+=n,this}addVectors(n,c){return this.x=n.x+c.x,this.y=n.y+c.y,this.z=n.z+c.z,this}addScaledVector(n,c){return this.x+=n.x*c,this.y+=n.y*c,this.z+=n.z*c,this}sub(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z,this}subScalar(n){return this.x-=n,this.y-=n,this.z-=n,this}subVectors(n,c){return this.x=n.x-c.x,this.y=n.y-c.y,this.z=n.z-c.z,this}multiply(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z,this}multiplyScalar(n){return this.x*=n,this.y*=n,this.z*=n,this}multiplyVectors(n,c){return this.x=n.x*c.x,this.y=n.y*c.y,this.z=n.z*c.z,this}applyEuler(n){return this.applyQuaternion(LR.setFromEuler(n))}applyAxisAngle(n,c){return this.applyQuaternion(LR.setFromAxisAngle(n,c))}applyMatrix3(n){const c=this.x,M=this.y,R=this.z,I=n.elements;return this.x=I[0]*c+I[3]*M+I[6]*R,this.y=I[1]*c+I[4]*M+I[7]*R,this.z=I[2]*c+I[5]*M+I[8]*R,this}applyNormalMatrix(n){return this.applyMatrix3(n).normalize()}applyMatrix4(n){const c=this.x,M=this.y,R=this.z,I=n.elements,m=1/(I[3]*c+I[7]*M+I[11]*R+I[15]);return this.x=(I[0]*c+I[4]*M+I[8]*R+I[12])*m,this.y=(I[1]*c+I[5]*M+I[9]*R+I[13])*m,this.z=(I[2]*c+I[6]*M+I[10]*R+I[14])*m,this}applyQuaternion(n){const c=this.x,M=this.y,R=this.z,I=n.x,m=n.y,E=n.z,i=n.w,d=2*(m*R-E*M),S=2*(E*c-I*R),u=2*(I*M-m*c);return this.x=c+i*d+m*u-E*S,this.y=M+i*S+E*d-I*u,this.z=R+i*u+I*S-m*d,this}project(n){return this.applyMatrix4(n.matrixWorldInverse).applyMatrix4(n.projectionMatrix)}unproject(n){return this.applyMatrix4(n.projectionMatrixInverse).applyMatrix4(n.matrixWorld)}transformDirection(n){const c=this.x,M=this.y,R=this.z,I=n.elements;return this.x=I[0]*c+I[4]*M+I[8]*R,this.y=I[1]*c+I[5]*M+I[9]*R,this.z=I[2]*c+I[6]*M+I[10]*R,this.normalize()}divide(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z,this}divideScalar(n){return this.multiplyScalar(1/n)}min(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this.z=Math.min(this.z,n.z),this}max(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this.z=Math.max(this.z,n.z),this}clamp(n,c){return this.x=Xe(this.x,n.x,c.x),this.y=Xe(this.y,n.y,c.y),this.z=Xe(this.z,n.z,c.z),this}clampScalar(n,c){return this.x=Xe(this.x,n,c),this.y=Xe(this.y,n,c),this.z=Xe(this.z,n,c),this}clampLength(n,c){const M=this.length();return this.divideScalar(M||1).multiplyScalar(Xe(M,n,c))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(n){return this.x*n.x+this.y*n.y+this.z*n.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(n){return this.normalize().multiplyScalar(n)}lerp(n,c){return this.x+=(n.x-this.x)*c,this.y+=(n.y-this.y)*c,this.z+=(n.z-this.z)*c,this}lerpVectors(n,c,M){return this.x=n.x+(c.x-n.x)*M,this.y=n.y+(c.y-n.y)*M,this.z=n.z+(c.z-n.z)*M,this}cross(n){return this.crossVectors(this,n)}crossVectors(n,c){const M=n.x,R=n.y,I=n.z,m=c.x,E=c.y,i=c.z;return this.x=R*i-I*E,this.y=I*m-M*i,this.z=M*E-R*m,this}projectOnVector(n){const c=n.lengthSq();if(c===0)return this.set(0,0,0);const M=n.dot(this)/c;return this.copy(n).multiplyScalar(M)}projectOnPlane(n){return gS.copy(this).projectOnVector(n),this.sub(gS)}reflect(n){return this.sub(gS.copy(n).multiplyScalar(2*this.dot(n)))}angleTo(n){const c=Math.sqrt(this.lengthSq()*n.lengthSq());if(c===0)return Math.PI/2;const M=this.dot(n)/c;return Math.acos(Xe(M,-1,1))}distanceTo(n){return Math.sqrt(this.distanceToSquared(n))}distanceToSquared(n){const c=this.x-n.x,M=this.y-n.y,R=this.z-n.z;return c*c+M*M+R*R}manhattanDistanceTo(n){return Math.abs(this.x-n.x)+Math.abs(this.y-n.y)+Math.abs(this.z-n.z)}setFromSpherical(n){return this.setFromSphericalCoords(n.radius,n.phi,n.theta)}setFromSphericalCoords(n,c,M){const R=Math.sin(c)*n;return this.x=R*Math.sin(M),this.y=Math.cos(c)*n,this.z=R*Math.cos(M),this}setFromCylindrical(n){return this.setFromCylindricalCoords(n.radius,n.theta,n.y)}setFromCylindricalCoords(n,c,M){return this.x=n*Math.sin(c),this.y=M,this.z=n*Math.cos(c),this}setFromMatrixPosition(n){const c=n.elements;return this.x=c[12],this.y=c[13],this.z=c[14],this}setFromMatrixScale(n){const c=this.setFromMatrixColumn(n,0).length(),M=this.setFromMatrixColumn(n,1).length(),R=this.setFromMatrixColumn(n,2).length();return this.x=c,this.y=M,this.z=R,this}setFromMatrixColumn(n,c){return this.fromArray(n.elements,c*4)}setFromMatrix3Column(n,c){return this.fromArray(n.elements,c*3)}setFromEuler(n){return this.x=n._x,this.y=n._y,this.z=n._z,this}setFromColor(n){return this.x=n.r,this.y=n.g,this.z=n.b,this}equals(n){return n.x===this.x&&n.y===this.y&&n.z===this.z}fromArray(n,c=0){return this.x=n[c],this.y=n[c+1],this.z=n[c+2],this}toArray(n=[],c=0){return n[c]=this.x,n[c+1]=this.y,n[c+2]=this.z,n}fromBufferAttribute(n,c){return this.x=n.getX(c),this.y=n.getY(c),this.z=n.getZ(c),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const n=Math.random()*Math.PI*2,c=Math.random()*2-1,M=Math.sqrt(1-c*c);return this.x=M*Math.cos(n),this.y=c,this.z=M*Math.sin(n),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const gS=new wt,LR=new $f;class Oe{constructor(n,c,M,R,I,m,E,i,d){Oe.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],n!==void 0&&this.set(n,c,M,R,I,m,E,i,d)}set(n,c,M,R,I,m,E,i,d){const S=this.elements;return S[0]=n,S[1]=R,S[2]=E,S[3]=c,S[4]=I,S[5]=i,S[6]=M,S[7]=m,S[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(n){const c=this.elements,M=n.elements;return c[0]=M[0],c[1]=M[1],c[2]=M[2],c[3]=M[3],c[4]=M[4],c[5]=M[5],c[6]=M[6],c[7]=M[7],c[8]=M[8],this}extractBasis(n,c,M){return n.setFromMatrix3Column(this,0),c.setFromMatrix3Column(this,1),M.setFromMatrix3Column(this,2),this}setFromMatrix4(n){const c=n.elements;return this.set(c[0],c[4],c[8],c[1],c[5],c[9],c[2],c[6],c[10]),this}multiply(n){return this.multiplyMatrices(this,n)}premultiply(n){return this.multiplyMatrices(n,this)}multiplyMatrices(n,c){const M=n.elements,R=c.elements,I=this.elements,m=M[0],E=M[3],i=M[6],d=M[1],S=M[4],u=M[7],l=M[2],h=M[5],r=M[8],o=R[0],p=R[3],a=R[6],v=R[1],x=R[4],g=R[7],y=R[2],T=R[5],P=R[8];return I[0]=m*o+E*v+i*y,I[3]=m*p+E*x+i*T,I[6]=m*a+E*g+i*P,I[1]=d*o+S*v+u*y,I[4]=d*p+S*x+u*T,I[7]=d*a+S*g+u*P,I[2]=l*o+h*v+r*y,I[5]=l*p+h*x+r*T,I[8]=l*a+h*g+r*P,this}multiplyScalar(n){const c=this.elements;return c[0]*=n,c[3]*=n,c[6]*=n,c[1]*=n,c[4]*=n,c[7]*=n,c[2]*=n,c[5]*=n,c[8]*=n,this}determinant(){const n=this.elements,c=n[0],M=n[1],R=n[2],I=n[3],m=n[4],E=n[5],i=n[6],d=n[7],S=n[8];return c*m*S-c*E*d-M*I*S+M*E*i+R*I*d-R*m*i}invert(){const n=this.elements,c=n[0],M=n[1],R=n[2],I=n[3],m=n[4],E=n[5],i=n[6],d=n[7],S=n[8],u=S*m-E*d,l=E*i-S*I,h=d*I-m*i,r=c*u+M*l+R*h;if(r===0)return this.set(0,0,0,0,0,0,0,0,0);const o=1/r;return n[0]=u*o,n[1]=(R*d-S*M)*o,n[2]=(E*M-R*m)*o,n[3]=l*o,n[4]=(S*c-R*i)*o,n[5]=(R*I-E*c)*o,n[6]=h*o,n[7]=(M*i-d*c)*o,n[8]=(m*c-M*I)*o,this}transpose(){let n;const c=this.elements;return n=c[1],c[1]=c[3],c[3]=n,n=c[2],c[2]=c[6],c[6]=n,n=c[5],c[5]=c[7],c[7]=n,this}getNormalMatrix(n){return this.setFromMatrix4(n).invert().transpose()}transposeIntoArray(n){const c=this.elements;return n[0]=c[0],n[1]=c[3],n[2]=c[6],n[3]=c[1],n[4]=c[4],n[5]=c[7],n[6]=c[2],n[7]=c[5],n[8]=c[8],this}setUvTransform(n,c,M,R,I,m,E){const i=Math.cos(I),d=Math.sin(I);return this.set(M*i,M*d,-M*(i*m+d*E)+m+n,-R*d,R*i,-R*(-d*m+i*E)+E+c,0,0,1),this}scale(n,c){return this.premultiply(xS.makeScale(n,c)),this}rotate(n){return this.premultiply(xS.makeRotation(-n)),this}translate(n,c){return this.premultiply(xS.makeTranslation(n,c)),this}makeTranslation(n,c){return n.isVector2?this.set(1,0,n.x,0,1,n.y,0,0,1):this.set(1,0,n,0,1,c,0,0,1),this}makeRotation(n){const c=Math.cos(n),M=Math.sin(n);return this.set(c,-M,0,M,c,0,0,0,1),this}makeScale(n,c){return this.set(n,0,0,0,c,0,0,0,1),this}equals(n){const c=this.elements,M=n.elements;for(let R=0;R<9;R++)if(c[R]!==M[R])return!1;return!0}fromArray(n,c=0){for(let M=0;M<9;M++)this.elements[M]=n[M+c];return this}toArray(n=[],c=0){const M=this.elements;return n[c]=M[0],n[c+1]=M[1],n[c+2]=M[2],n[c+3]=M[3],n[c+4]=M[4],n[c+5]=M[5],n[c+6]=M[6],n[c+7]=M[7],n[c+8]=M[8],n}clone(){return new this.constructor().fromArray(this.elements)}}const xS=new Oe;function NO(L){for(let n=L.length-1;n>=0;--n)if(L[n]>=65535)return!0;return!1}function kf(L){return document.createElementNS("http://www.w3.org/1999/xhtml",L)}function tit(){const L=kf("canvas");return L.style.display="block",L}const OR={};function mu(L){L in OR||(OR[L]=!0,console.warn(L))}function eit(L,n,c){return new Promise(function(M,R){function I(){switch(L.clientWaitSync(n,L.SYNC_FLUSH_COMMANDS_BIT,0)){case L.WAIT_FAILED:R();break;case L.TIMEOUT_EXPIRED:setTimeout(I,c);break;default:M()}}setTimeout(I,c)})}function iit(L){const n=L.elements;n[2]=.5*n[2]+.5*n[3],n[6]=.5*n[6]+.5*n[7],n[10]=.5*n[10]+.5*n[11],n[14]=.5*n[14]+.5*n[15]}function sit(L){const n=L.elements;n[11]===-1?(n[10]=-n[10]-1,n[14]=-n[14]):(n[10]=-n[10],n[14]=-n[14]+1)}const FR=new Oe().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),DR=new Oe().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function nit(){const L={enabled:!0,workingColorSpace:Mu,spaces:{},convert:function(R,I,m){return this.enabled===!1||I===m||!I||!m||(this.spaces[I].transfer===ii&&(R.r=Fa(R.r),R.g=Fa(R.g),R.b=Fa(R.b)),this.spaces[I].primaries!==this.spaces[m].primaries&&(R.applyMatrix3(this.spaces[I].toXYZ),R.applyMatrix3(this.spaces[m].fromXYZ)),this.spaces[m].transfer===ii&&(R.r=gu(R.r),R.g=gu(R.g),R.b=gu(R.b))),R},workingToColorSpace:function(R,I){return this.convert(R,this.workingColorSpace,I)},colorSpaceToWorking:function(R,I){return this.convert(R,I,this.workingColorSpace)},getPrimaries:function(R){return this.spaces[R].primaries},getTransfer:function(R){return R===Po?Fm:this.spaces[R].transfer},getLuminanceCoefficients:function(R,I=this.workingColorSpace){return R.fromArray(this.spaces[I].luminanceCoefficients)},define:function(R){Object.assign(this.spaces,R)},_getMatrix:function(R,I,m){return R.copy(this.spaces[I].toXYZ).multiply(this.spaces[m].fromXYZ)},_getDrawingBufferColorSpace:function(R){return this.spaces[R].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(R=this.workingColorSpace){return this.spaces[R].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(R,I){return mu("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),L.workingToColorSpace(R,I)},toWorkingColorSpace:function(R,I){return mu("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),L.colorSpaceToWorking(R,I)}},n=[.64,.33,.3,.6,.15,.06],c=[.2126,.7152,.0722],M=[.3127,.329];return L.define({[Mu]:{primaries:n,whitePoint:M,transfer:Fm,toXYZ:FR,fromXYZ:DR,luminanceCoefficients:c,workingColorSpaceConfig:{unpackColorSpace:xs},outputColorSpaceConfig:{drawingBufferColorSpace:xs}},[xs]:{primaries:n,whitePoint:M,transfer:ii,toXYZ:FR,fromXYZ:DR,luminanceCoefficients:c,outputColorSpaceConfig:{drawingBufferColorSpace:xs}}}),L}const We=nit();function Fa(L){return L<.04045?L*.0773993808:Math.pow(L*.9478672986+.0521327014,2.4)}function gu(L){return L<.0031308?L*12.92:1.055*Math.pow(L,.41666)-.055}let _l;class rit{static getDataURL(n,c="image/png"){if(/^data:/i.test(n.src)||typeof HTMLCanvasElement>"u")return n.src;let M;if(n instanceof HTMLCanvasElement)M=n;else{_l===void 0&&(_l=kf("canvas")),_l.width=n.width,_l.height=n.height;const R=_l.getContext("2d");n instanceof ImageData?R.putImageData(n,0,0):R.drawImage(n,0,0,n.width,n.height),M=_l}return M.toDataURL(c)}static sRGBToLinear(n){if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap){const c=kf("canvas");c.width=n.width,c.height=n.height;const M=c.getContext("2d");M.drawImage(n,0,0,n.width,n.height);const R=M.getImageData(0,0,n.width,n.height),I=R.data;for(let m=0;m<I.length;m++)I[m]=Fa(I[m]/255)*255;return M.putImageData(R,0,0),c}else if(n.data){const c=n.data.slice(0);for(let M=0;M<c.length;M++)c instanceof Uint8Array||c instanceof Uint8ClampedArray?c[M]=Math.floor(Fa(c[M]/255)*255):c[M]=Fa(c[M]);return{data:c,width:n.width,height:n.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),n}}let ait=0,cC=class{constructor(n=null){this.isSource=!0,Object.defineProperty(this,"id",{value:ait++}),this.uuid=Yf(),this.data=n,this.dataReady=!0,this.version=0}getSize(n){const c=this.data;return c instanceof HTMLVideoElement?n.set(c.videoWidth,c.videoHeight):c!==null?n.set(c.width,c.height,c.depth||0):n.set(0,0,0),n}set needsUpdate(n){n===!0&&this.version++}toJSON(n){const c=n===void 0||typeof n=="string";if(!c&&n.images[this.uuid]!==void 0)return n.images[this.uuid];const M={uuid:this.uuid,url:""},R=this.data;if(R!==null){let I;if(Array.isArray(R)){I=[];for(let m=0,E=R.length;m<E;m++)R[m].isDataTexture?I.push(yS(R[m].image)):I.push(yS(R[m]))}else I=yS(R);M.url=I}return c||(n.images[this.uuid]=M),M}};function yS(L){return typeof HTMLImageElement<"u"&&L instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&L instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&L instanceof ImageBitmap?rit.getDataURL(L):L.data?{data:Array.from(L.data),width:L.width,height:L.height,type:L.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let oit=0;const SS=new wt;class $s extends Bu{constructor(n=$s.DEFAULT_IMAGE,c=$s.DEFAULT_MAPPING,M=Bh,R=Bh,I=Yr,m=Nh,E=Tn,i=Hn,d=$s.DEFAULT_ANISOTROPY,S=Po){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:oit++}),this.uuid=Yf(),this.name="",this.source=new cC(n),this.mipmaps=[],this.mapping=c,this.channel=0,this.wrapS=M,this.wrapT=R,this.magFilter=I,this.minFilter=m,this.anisotropy=d,this.format=E,this.internalFormat=null,this.type=i,this.offset=new Ve(0,0),this.repeat=new Ve(1,1),this.center=new Ve(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Oe,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=S,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(n&&n.depth&&n.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(SS).x}get height(){return this.source.getSize(SS).y}get depth(){return this.source.getSize(SS).z}get image(){return this.source.data}set image(n=null){this.source.data=n}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(n,c){this.updateRanges.push({start:n,count:c})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(n){return this.name=n.name,this.source=n.source,this.mipmaps=n.mipmaps.slice(0),this.mapping=n.mapping,this.channel=n.channel,this.wrapS=n.wrapS,this.wrapT=n.wrapT,this.magFilter=n.magFilter,this.minFilter=n.minFilter,this.anisotropy=n.anisotropy,this.format=n.format,this.internalFormat=n.internalFormat,this.type=n.type,this.offset.copy(n.offset),this.repeat.copy(n.repeat),this.center.copy(n.center),this.rotation=n.rotation,this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrix.copy(n.matrix),this.generateMipmaps=n.generateMipmaps,this.premultiplyAlpha=n.premultiplyAlpha,this.flipY=n.flipY,this.unpackAlignment=n.unpackAlignment,this.colorSpace=n.colorSpace,this.renderTarget=n.renderTarget,this.isRenderTargetTexture=n.isRenderTargetTexture,this.isArrayTexture=n.isArrayTexture,this.userData=JSON.parse(JSON.stringify(n.userData)),this.needsUpdate=!0,this}setValues(n){for(const c in n){const M=n[c];if(M===void 0){console.warn(`THREE.Texture.setValues(): parameter '${c}' has value of undefined.`);continue}const R=this[c];if(R===void 0){console.warn(`THREE.Texture.setValues(): property '${c}' does not exist.`);continue}R&&M&&R.isVector2&&M.isVector2||R&&M&&R.isVector3&&M.isVector3||R&&M&&R.isMatrix3&&M.isMatrix3?R.copy(M):this[c]=M}}toJSON(n){const c=n===void 0||typeof n=="string";if(!c&&n.textures[this.uuid]!==void 0)return n.textures[this.uuid];const M={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(n).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(M.userData=this.userData),c||(n.textures[this.uuid]=M),M}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(n){if(this.mapping!==wO)return n;if(n.applyMatrix3(this.matrix),n.x<0||n.x>1)switch(this.wrapS){case Om:n.x=n.x-Math.floor(n.x);break;case Bh:n.x=n.x<0?0:1;break;case fT:Math.abs(Math.floor(n.x)%2)===1?n.x=Math.ceil(n.x)-n.x:n.x=n.x-Math.floor(n.x);break}if(n.y<0||n.y>1)switch(this.wrapT){case Om:n.y=n.y-Math.floor(n.y);break;case Bh:n.y=n.y<0?0:1;break;case fT:Math.abs(Math.floor(n.y)%2)===1?n.y=Math.ceil(n.y)-n.y:n.y=n.y-Math.floor(n.y);break}return this.flipY&&(n.y=1-n.y),n}set needsUpdate(n){n===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(n){n===!0&&this.pmremVersion++}}$s.DEFAULT_IMAGE=null;$s.DEFAULT_MAPPING=wO;$s.DEFAULT_ANISOTROPY=1;class si{constructor(n=0,c=0,M=0,R=1){si.prototype.isVector4=!0,this.x=n,this.y=c,this.z=M,this.w=R}get width(){return this.z}set width(n){this.z=n}get height(){return this.w}set height(n){this.w=n}set(n,c,M,R){return this.x=n,this.y=c,this.z=M,this.w=R,this}setScalar(n){return this.x=n,this.y=n,this.z=n,this.w=n,this}setX(n){return this.x=n,this}setY(n){return this.y=n,this}setZ(n){return this.z=n,this}setW(n){return this.w=n,this}setComponent(n,c){switch(n){case 0:this.x=c;break;case 1:this.y=c;break;case 2:this.z=c;break;case 3:this.w=c;break;default:throw new Error("index is out of range: "+n)}return this}getComponent(n){switch(n){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+n)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(n){return this.x=n.x,this.y=n.y,this.z=n.z,this.w=n.w!==void 0?n.w:1,this}add(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z,this.w+=n.w,this}addScalar(n){return this.x+=n,this.y+=n,this.z+=n,this.w+=n,this}addVectors(n,c){return this.x=n.x+c.x,this.y=n.y+c.y,this.z=n.z+c.z,this.w=n.w+c.w,this}addScaledVector(n,c){return this.x+=n.x*c,this.y+=n.y*c,this.z+=n.z*c,this.w+=n.w*c,this}sub(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z,this.w-=n.w,this}subScalar(n){return this.x-=n,this.y-=n,this.z-=n,this.w-=n,this}subVectors(n,c){return this.x=n.x-c.x,this.y=n.y-c.y,this.z=n.z-c.z,this.w=n.w-c.w,this}multiply(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z,this.w*=n.w,this}multiplyScalar(n){return this.x*=n,this.y*=n,this.z*=n,this.w*=n,this}applyMatrix4(n){const c=this.x,M=this.y,R=this.z,I=this.w,m=n.elements;return this.x=m[0]*c+m[4]*M+m[8]*R+m[12]*I,this.y=m[1]*c+m[5]*M+m[9]*R+m[13]*I,this.z=m[2]*c+m[6]*M+m[10]*R+m[14]*I,this.w=m[3]*c+m[7]*M+m[11]*R+m[15]*I,this}divide(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z,this.w/=n.w,this}divideScalar(n){return this.multiplyScalar(1/n)}setAxisAngleFromQuaternion(n){this.w=2*Math.acos(n.w);const c=Math.sqrt(1-n.w*n.w);return c<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=n.x/c,this.y=n.y/c,this.z=n.z/c),this}setAxisAngleFromRotationMatrix(n){let c,M,R,I;const i=n.elements,d=i[0],S=i[4],u=i[8],l=i[1],h=i[5],r=i[9],o=i[2],p=i[6],a=i[10];if(Math.abs(S-l)<.01&&Math.abs(u-o)<.01&&Math.abs(r-p)<.01){if(Math.abs(S+l)<.1&&Math.abs(u+o)<.1&&Math.abs(r+p)<.1&&Math.abs(d+h+a-3)<.1)return this.set(1,0,0,0),this;c=Math.PI;const x=(d+1)/2,g=(h+1)/2,y=(a+1)/2,T=(S+l)/4,P=(u+o)/4,A=(r+p)/4;return x>g&&x>y?x<.01?(M=0,R=.707106781,I=.707106781):(M=Math.sqrt(x),R=T/M,I=P/M):g>y?g<.01?(M=.707106781,R=0,I=.707106781):(R=Math.sqrt(g),M=T/R,I=A/R):y<.01?(M=.707106781,R=.707106781,I=0):(I=Math.sqrt(y),M=P/I,R=A/I),this.set(M,R,I,c),this}let v=Math.sqrt((p-r)*(p-r)+(u-o)*(u-o)+(l-S)*(l-S));return Math.abs(v)<.001&&(v=1),this.x=(p-r)/v,this.y=(u-o)/v,this.z=(l-S)/v,this.w=Math.acos((d+h+a-1)/2),this}setFromMatrixPosition(n){const c=n.elements;return this.x=c[12],this.y=c[13],this.z=c[14],this.w=c[15],this}min(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this.z=Math.min(this.z,n.z),this.w=Math.min(this.w,n.w),this}max(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this.z=Math.max(this.z,n.z),this.w=Math.max(this.w,n.w),this}clamp(n,c){return this.x=Xe(this.x,n.x,c.x),this.y=Xe(this.y,n.y,c.y),this.z=Xe(this.z,n.z,c.z),this.w=Xe(this.w,n.w,c.w),this}clampScalar(n,c){return this.x=Xe(this.x,n,c),this.y=Xe(this.y,n,c),this.z=Xe(this.z,n,c),this.w=Xe(this.w,n,c),this}clampLength(n,c){const M=this.length();return this.divideScalar(M||1).multiplyScalar(Xe(M,n,c))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(n){return this.x*n.x+this.y*n.y+this.z*n.z+this.w*n.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(n){return this.normalize().multiplyScalar(n)}lerp(n,c){return this.x+=(n.x-this.x)*c,this.y+=(n.y-this.y)*c,this.z+=(n.z-this.z)*c,this.w+=(n.w-this.w)*c,this}lerpVectors(n,c,M){return this.x=n.x+(c.x-n.x)*M,this.y=n.y+(c.y-n.y)*M,this.z=n.z+(c.z-n.z)*M,this.w=n.w+(c.w-n.w)*M,this}equals(n){return n.x===this.x&&n.y===this.y&&n.z===this.z&&n.w===this.w}fromArray(n,c=0){return this.x=n[c],this.y=n[c+1],this.z=n[c+2],this.w=n[c+3],this}toArray(n=[],c=0){return n[c]=this.x,n[c+1]=this.y,n[c+2]=this.z,n[c+3]=this.w,n}fromBufferAttribute(n,c){return this.x=n.getX(c),this.y=n.getY(c),this.z=n.getZ(c),this.w=n.getW(c),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class hit extends Bu{constructor(n=1,c=1,M={}){super(),M=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Yr,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},M),this.isRenderTarget=!0,this.width=n,this.height=c,this.depth=M.depth,this.scissor=new si(0,0,n,c),this.scissorTest=!1,this.viewport=new si(0,0,n,c);const R={width:n,height:c,depth:M.depth},I=new $s(R);this.textures=[];const m=M.count;for(let E=0;E<m;E++)this.textures[E]=I.clone(),this.textures[E].isRenderTargetTexture=!0,this.textures[E].renderTarget=this;this._setTextureOptions(M),this.depthBuffer=M.depthBuffer,this.stencilBuffer=M.stencilBuffer,this.resolveDepthBuffer=M.resolveDepthBuffer,this.resolveStencilBuffer=M.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=M.depthTexture,this.samples=M.samples,this.multiview=M.multiview}_setTextureOptions(n={}){const c={minFilter:Yr,generateMipmaps:!1,flipY:!1,internalFormat:null};n.mapping!==void 0&&(c.mapping=n.mapping),n.wrapS!==void 0&&(c.wrapS=n.wrapS),n.wrapT!==void 0&&(c.wrapT=n.wrapT),n.wrapR!==void 0&&(c.wrapR=n.wrapR),n.magFilter!==void 0&&(c.magFilter=n.magFilter),n.minFilter!==void 0&&(c.minFilter=n.minFilter),n.format!==void 0&&(c.format=n.format),n.type!==void 0&&(c.type=n.type),n.anisotropy!==void 0&&(c.anisotropy=n.anisotropy),n.colorSpace!==void 0&&(c.colorSpace=n.colorSpace),n.flipY!==void 0&&(c.flipY=n.flipY),n.generateMipmaps!==void 0&&(c.generateMipmaps=n.generateMipmaps),n.internalFormat!==void 0&&(c.internalFormat=n.internalFormat);for(let M=0;M<this.textures.length;M++)this.textures[M].setValues(c)}get texture(){return this.textures[0]}set texture(n){this.textures[0]=n}set depthTexture(n){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),n!==null&&(n.renderTarget=this),this._depthTexture=n}get depthTexture(){return this._depthTexture}setSize(n,c,M=1){if(this.width!==n||this.height!==c||this.depth!==M){this.width=n,this.height=c,this.depth=M;for(let R=0,I=this.textures.length;R<I;R++)this.textures[R].image.width=n,this.textures[R].image.height=c,this.textures[R].image.depth=M,this.textures[R].isArrayTexture=this.textures[R].image.depth>1;this.dispose()}this.viewport.set(0,0,n,c),this.scissor.set(0,0,n,c)}clone(){return new this.constructor().copy(this)}copy(n){this.width=n.width,this.height=n.height,this.depth=n.depth,this.scissor.copy(n.scissor),this.scissorTest=n.scissorTest,this.viewport.copy(n.viewport),this.textures.length=0;for(let c=0,M=n.textures.length;c<M;c++){this.textures[c]=n.textures[c].clone(),this.textures[c].isRenderTargetTexture=!0,this.textures[c].renderTarget=this;const R=Object.assign({},n.textures[c].image);this.textures[c].source=new cC(R)}return this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,n.depthTexture!==null&&(this.depthTexture=n.depthTexture.clone()),this.samples=n.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ba extends hit{constructor(n=1,c=1,M={}){super(n,c,M),this.isWebGLRenderTarget=!0}}class GO extends $s{constructor(n=null,c=1,M=1,R=1){super(null),this.isDataArrayTexture=!0,this.image={data:n,width:c,height:M,depth:R},this.magFilter=Xs,this.minFilter=Xs,this.wrapR=Bh,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(n){this.layerUpdates.add(n)}clearLayerUpdates(){this.layerUpdates.clear()}}class lit extends $s{constructor(n=null,c=1,M=1,R=1){super(null),this.isData3DTexture=!0,this.image={data:n,width:c,height:M,depth:R},this.magFilter=Xs,this.minFilter=Xs,this.wrapR=Bh,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class _h{constructor(n=new wt(1/0,1/0,1/0),c=new wt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=n,this.max=c}set(n,c){return this.min.copy(n),this.max.copy(c),this}setFromArray(n){this.makeEmpty();for(let c=0,M=n.length;c<M;c+=3)this.expandByPoint(ur.fromArray(n,c));return this}setFromBufferAttribute(n){this.makeEmpty();for(let c=0,M=n.count;c<M;c++)this.expandByPoint(ur.fromBufferAttribute(n,c));return this}setFromPoints(n){this.makeEmpty();for(let c=0,M=n.length;c<M;c++)this.expandByPoint(n[c]);return this}setFromCenterAndSize(n,c){const M=ur.copy(c).multiplyScalar(.5);return this.min.copy(n).sub(M),this.max.copy(n).add(M),this}setFromObject(n,c=!1){return this.makeEmpty(),this.expandByObject(n,c)}clone(){return new this.constructor().copy(this)}copy(n){return this.min.copy(n.min),this.max.copy(n.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(n){return this.isEmpty()?n.set(0,0,0):n.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(n){return this.isEmpty()?n.set(0,0,0):n.subVectors(this.max,this.min)}expandByPoint(n){return this.min.min(n),this.max.max(n),this}expandByVector(n){return this.min.sub(n),this.max.add(n),this}expandByScalar(n){return this.min.addScalar(-n),this.max.addScalar(n),this}expandByObject(n,c=!1){n.updateWorldMatrix(!1,!1);const M=n.geometry;if(M!==void 0){const I=M.getAttribute("position");if(c===!0&&I!==void 0&&n.isInstancedMesh!==!0)for(let m=0,E=I.count;m<E;m++)n.isMesh===!0?n.getVertexPosition(m,ur):ur.fromBufferAttribute(I,m),ur.applyMatrix4(n.matrixWorld),this.expandByPoint(ur);else n.boundingBox!==void 0?(n.boundingBox===null&&n.computeBoundingBox(),Xv.copy(n.boundingBox)):(M.boundingBox===null&&M.computeBoundingBox(),Xv.copy(M.boundingBox)),Xv.applyMatrix4(n.matrixWorld),this.union(Xv)}const R=n.children;for(let I=0,m=R.length;I<m;I++)this.expandByObject(R[I],c);return this}containsPoint(n){return n.x>=this.min.x&&n.x<=this.max.x&&n.y>=this.min.y&&n.y<=this.max.y&&n.z>=this.min.z&&n.z<=this.max.z}containsBox(n){return this.min.x<=n.min.x&&n.max.x<=this.max.x&&this.min.y<=n.min.y&&n.max.y<=this.max.y&&this.min.z<=n.min.z&&n.max.z<=this.max.z}getParameter(n,c){return c.set((n.x-this.min.x)/(this.max.x-this.min.x),(n.y-this.min.y)/(this.max.y-this.min.y),(n.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(n){return n.max.x>=this.min.x&&n.min.x<=this.max.x&&n.max.y>=this.min.y&&n.min.y<=this.max.y&&n.max.z>=this.min.z&&n.min.z<=this.max.z}intersectsSphere(n){return this.clampPoint(n.center,ur),ur.distanceToSquared(n.center)<=n.radius*n.radius}intersectsPlane(n){let c,M;return n.normal.x>0?(c=n.normal.x*this.min.x,M=n.normal.x*this.max.x):(c=n.normal.x*this.max.x,M=n.normal.x*this.min.x),n.normal.y>0?(c+=n.normal.y*this.min.y,M+=n.normal.y*this.max.y):(c+=n.normal.y*this.max.y,M+=n.normal.y*this.min.y),n.normal.z>0?(c+=n.normal.z*this.min.z,M+=n.normal.z*this.max.z):(c+=n.normal.z*this.max.z,M+=n.normal.z*this.min.z),c<=-n.constant&&M>=-n.constant}intersectsTriangle(n){if(this.isEmpty())return!1;this.getCenter(gf),Hv.subVectors(this.max,gf),Zl.subVectors(n.a,gf),Kl.subVectors(n.b,gf),Jl.subVectors(n.c,gf),mo.subVectors(Kl,Zl),go.subVectors(Jl,Kl),Ch.subVectors(Zl,Jl);let c=[0,-mo.z,mo.y,0,-go.z,go.y,0,-Ch.z,Ch.y,mo.z,0,-mo.x,go.z,0,-go.x,Ch.z,0,-Ch.x,-mo.y,mo.x,0,-go.y,go.x,0,-Ch.y,Ch.x,0];return!TS(c,Zl,Kl,Jl,Hv)||(c=[1,0,0,0,1,0,0,0,1],!TS(c,Zl,Kl,Jl,Hv))?!1:(Yv.crossVectors(mo,go),c=[Yv.x,Yv.y,Yv.z],TS(c,Zl,Kl,Jl,Hv))}clampPoint(n,c){return c.copy(n).clamp(this.min,this.max)}distanceToPoint(n){return this.clampPoint(n,ur).distanceTo(n)}getBoundingSphere(n){return this.isEmpty()?n.makeEmpty():(this.getCenter(n.center),n.radius=this.getSize(ur).length()*.5),n}intersect(n){return this.min.max(n.min),this.max.min(n.max),this.isEmpty()&&this.makeEmpty(),this}union(n){return this.min.min(n.min),this.max.max(n.max),this}applyMatrix4(n){return this.isEmpty()?this:(Ta[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(n),Ta[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(n),Ta[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(n),Ta[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(n),Ta[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(n),Ta[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(n),Ta[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(n),Ta[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(n),this.setFromPoints(Ta),this)}translate(n){return this.min.add(n),this.max.add(n),this}equals(n){return n.min.equals(this.min)&&n.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(n){return this.min.fromArray(n.min),this.max.fromArray(n.max),this}}const Ta=[new wt,new wt,new wt,new wt,new wt,new wt,new wt,new wt],ur=new wt,Xv=new _h,Zl=new wt,Kl=new wt,Jl=new wt,mo=new wt,go=new wt,Ch=new wt,gf=new wt,Hv=new wt,Yv=new wt,Mh=new wt;function TS(L,n,c,M,R){for(let I=0,m=L.length-3;I<=m;I+=3){Mh.fromArray(L,I);const E=R.x*Math.abs(Mh.x)+R.y*Math.abs(Mh.y)+R.z*Math.abs(Mh.z),i=n.dot(Mh),d=c.dot(Mh),S=M.dot(Mh);if(Math.max(-Math.max(i,d,S),Math.min(i,d,S))>E)return!1}return!0}const uit=new _h,xf=new wt,CS=new wt;class _f{constructor(n=new wt,c=-1){this.isSphere=!0,this.center=n,this.radius=c}set(n,c){return this.center.copy(n),this.radius=c,this}setFromPoints(n,c){const M=this.center;c!==void 0?M.copy(c):uit.setFromPoints(n).getCenter(M);let R=0;for(let I=0,m=n.length;I<m;I++)R=Math.max(R,M.distanceToSquared(n[I]));return this.radius=Math.sqrt(R),this}copy(n){return this.center.copy(n.center),this.radius=n.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(n){return n.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(n){return n.distanceTo(this.center)-this.radius}intersectsSphere(n){const c=this.radius+n.radius;return n.center.distanceToSquared(this.center)<=c*c}intersectsBox(n){return n.intersectsSphere(this)}intersectsPlane(n){return Math.abs(n.distanceToPoint(this.center))<=this.radius}clampPoint(n,c){const M=this.center.distanceToSquared(n);return c.copy(n),M>this.radius*this.radius&&(c.sub(this.center).normalize(),c.multiplyScalar(this.radius).add(this.center)),c}getBoundingBox(n){return this.isEmpty()?(n.makeEmpty(),n):(n.set(this.center,this.center),n.expandByScalar(this.radius),n)}applyMatrix4(n){return this.center.applyMatrix4(n),this.radius=this.radius*n.getMaxScaleOnAxis(),this}translate(n){return this.center.add(n),this}expandByPoint(n){if(this.isEmpty())return this.center.copy(n),this.radius=0,this;xf.subVectors(n,this.center);const c=xf.lengthSq();if(c>this.radius*this.radius){const M=Math.sqrt(c),R=(M-this.radius)*.5;this.center.addScaledVector(xf,R/M),this.radius+=R}return this}union(n){return n.isEmpty()?this:this.isEmpty()?(this.copy(n),this):(this.center.equals(n.center)===!0?this.radius=Math.max(this.radius,n.radius):(CS.subVectors(n.center,this.center).setLength(n.radius),this.expandByPoint(xf.copy(n.center).add(CS)),this.expandByPoint(xf.copy(n.center).sub(CS))),this)}equals(n){return n.center.equals(this.center)&&n.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(n){return this.radius=n.radius,this.center.fromArray(n.center),this}}const Ca=new wt,MS=new wt,$v=new wt,xo=new wt,ES=new wt,_v=new wt,PS=new wt;class tg{constructor(n=new wt,c=new wt(0,0,-1)){this.origin=n,this.direction=c}set(n,c){return this.origin.copy(n),this.direction.copy(c),this}copy(n){return this.origin.copy(n.origin),this.direction.copy(n.direction),this}at(n,c){return c.copy(this.origin).addScaledVector(this.direction,n)}lookAt(n){return this.direction.copy(n).sub(this.origin).normalize(),this}recast(n){return this.origin.copy(this.at(n,Ca)),this}closestPointToPoint(n,c){c.subVectors(n,this.origin);const M=c.dot(this.direction);return M<0?c.copy(this.origin):c.copy(this.origin).addScaledVector(this.direction,M)}distanceToPoint(n){return Math.sqrt(this.distanceSqToPoint(n))}distanceSqToPoint(n){const c=Ca.subVectors(n,this.origin).dot(this.direction);return c<0?this.origin.distanceToSquared(n):(Ca.copy(this.origin).addScaledVector(this.direction,c),Ca.distanceToSquared(n))}distanceSqToSegment(n,c,M,R){MS.copy(n).add(c).multiplyScalar(.5),$v.copy(c).sub(n).normalize(),xo.copy(this.origin).sub(MS);const I=n.distanceTo(c)*.5,m=-this.direction.dot($v),E=xo.dot(this.direction),i=-xo.dot($v),d=xo.lengthSq(),S=Math.abs(1-m*m);let u,l,h,r;if(S>0)if(u=m*i-E,l=m*E-i,r=I*S,u>=0)if(l>=-r)if(l<=r){const o=1/S;u*=o,l*=o,h=u*(u+m*l+2*E)+l*(m*u+l+2*i)+d}else l=I,u=Math.max(0,-(m*l+E)),h=-u*u+l*(l+2*i)+d;else l=-I,u=Math.max(0,-(m*l+E)),h=-u*u+l*(l+2*i)+d;else l<=-r?(u=Math.max(0,-(-m*I+E)),l=u>0?-I:Math.min(Math.max(-I,-i),I),h=-u*u+l*(l+2*i)+d):l<=r?(u=0,l=Math.min(Math.max(-I,-i),I),h=l*(l+2*i)+d):(u=Math.max(0,-(m*I+E)),l=u>0?I:Math.min(Math.max(-I,-i),I),h=-u*u+l*(l+2*i)+d);else l=m>0?-I:I,u=Math.max(0,-(m*l+E)),h=-u*u+l*(l+2*i)+d;return M&&M.copy(this.origin).addScaledVector(this.direction,u),R&&R.copy(MS).addScaledVector($v,l),h}intersectSphere(n,c){Ca.subVectors(n.center,this.origin);const M=Ca.dot(this.direction),R=Ca.dot(Ca)-M*M,I=n.radius*n.radius;if(R>I)return null;const m=Math.sqrt(I-R),E=M-m,i=M+m;return i<0?null:E<0?this.at(i,c):this.at(E,c)}intersectsSphere(n){return n.radius<0?!1:this.distanceSqToPoint(n.center)<=n.radius*n.radius}distanceToPlane(n){const c=n.normal.dot(this.direction);if(c===0)return n.distanceToPoint(this.origin)===0?0:null;const M=-(this.origin.dot(n.normal)+n.constant)/c;return M>=0?M:null}intersectPlane(n,c){const M=this.distanceToPlane(n);return M===null?null:this.at(M,c)}intersectsPlane(n){const c=n.distanceToPoint(this.origin);return c===0||n.normal.dot(this.direction)*c<0}intersectBox(n,c){let M,R,I,m,E,i;const d=1/this.direction.x,S=1/this.direction.y,u=1/this.direction.z,l=this.origin;return d>=0?(M=(n.min.x-l.x)*d,R=(n.max.x-l.x)*d):(M=(n.max.x-l.x)*d,R=(n.min.x-l.x)*d),S>=0?(I=(n.min.y-l.y)*S,m=(n.max.y-l.y)*S):(I=(n.max.y-l.y)*S,m=(n.min.y-l.y)*S),M>m||I>R||((I>M||isNaN(M))&&(M=I),(m<R||isNaN(R))&&(R=m),u>=0?(E=(n.min.z-l.z)*u,i=(n.max.z-l.z)*u):(E=(n.max.z-l.z)*u,i=(n.min.z-l.z)*u),M>i||E>R)||((E>M||M!==M)&&(M=E),(i<R||R!==R)&&(R=i),R<0)?null:this.at(M>=0?M:R,c)}intersectsBox(n){return this.intersectBox(n,Ca)!==null}intersectTriangle(n,c,M,R,I){ES.subVectors(c,n),_v.subVectors(M,n),PS.crossVectors(ES,_v);let m=this.direction.dot(PS),E;if(m>0){if(R)return null;E=1}else if(m<0)E=-1,m=-m;else return null;xo.subVectors(this.origin,n);const i=E*this.direction.dot(_v.crossVectors(xo,_v));if(i<0)return null;const d=E*this.direction.dot(ES.cross(xo));if(d<0||i+d>m)return null;const S=-E*xo.dot(PS);return S<0?null:this.at(S/m,I)}applyMatrix4(n){return this.origin.applyMatrix4(n),this.direction.transformDirection(n),this}equals(n){return n.origin.equals(this.origin)&&n.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ei{constructor(n,c,M,R,I,m,E,i,d,S,u,l,h,r,o,p){ei.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n!==void 0&&this.set(n,c,M,R,I,m,E,i,d,S,u,l,h,r,o,p)}set(n,c,M,R,I,m,E,i,d,S,u,l,h,r,o,p){const a=this.elements;return a[0]=n,a[4]=c,a[8]=M,a[12]=R,a[1]=I,a[5]=m,a[9]=E,a[13]=i,a[2]=d,a[6]=S,a[10]=u,a[14]=l,a[3]=h,a[7]=r,a[11]=o,a[15]=p,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ei().fromArray(this.elements)}copy(n){const c=this.elements,M=n.elements;return c[0]=M[0],c[1]=M[1],c[2]=M[2],c[3]=M[3],c[4]=M[4],c[5]=M[5],c[6]=M[6],c[7]=M[7],c[8]=M[8],c[9]=M[9],c[10]=M[10],c[11]=M[11],c[12]=M[12],c[13]=M[13],c[14]=M[14],c[15]=M[15],this}copyPosition(n){const c=this.elements,M=n.elements;return c[12]=M[12],c[13]=M[13],c[14]=M[14],this}setFromMatrix3(n){const c=n.elements;return this.set(c[0],c[3],c[6],0,c[1],c[4],c[7],0,c[2],c[5],c[8],0,0,0,0,1),this}extractBasis(n,c,M){return n.setFromMatrixColumn(this,0),c.setFromMatrixColumn(this,1),M.setFromMatrixColumn(this,2),this}makeBasis(n,c,M){return this.set(n.x,c.x,M.x,0,n.y,c.y,M.y,0,n.z,c.z,M.z,0,0,0,0,1),this}extractRotation(n){const c=this.elements,M=n.elements,R=1/Ql.setFromMatrixColumn(n,0).length(),I=1/Ql.setFromMatrixColumn(n,1).length(),m=1/Ql.setFromMatrixColumn(n,2).length();return c[0]=M[0]*R,c[1]=M[1]*R,c[2]=M[2]*R,c[3]=0,c[4]=M[4]*I,c[5]=M[5]*I,c[6]=M[6]*I,c[7]=0,c[8]=M[8]*m,c[9]=M[9]*m,c[10]=M[10]*m,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,this}makeRotationFromEuler(n){const c=this.elements,M=n.x,R=n.y,I=n.z,m=Math.cos(M),E=Math.sin(M),i=Math.cos(R),d=Math.sin(R),S=Math.cos(I),u=Math.sin(I);if(n.order==="XYZ"){const l=m*S,h=m*u,r=E*S,o=E*u;c[0]=i*S,c[4]=-i*u,c[8]=d,c[1]=h+r*d,c[5]=l-o*d,c[9]=-E*i,c[2]=o-l*d,c[6]=r+h*d,c[10]=m*i}else if(n.order==="YXZ"){const l=i*S,h=i*u,r=d*S,o=d*u;c[0]=l+o*E,c[4]=r*E-h,c[8]=m*d,c[1]=m*u,c[5]=m*S,c[9]=-E,c[2]=h*E-r,c[6]=o+l*E,c[10]=m*i}else if(n.order==="ZXY"){const l=i*S,h=i*u,r=d*S,o=d*u;c[0]=l-o*E,c[4]=-m*u,c[8]=r+h*E,c[1]=h+r*E,c[5]=m*S,c[9]=o-l*E,c[2]=-m*d,c[6]=E,c[10]=m*i}else if(n.order==="ZYX"){const l=m*S,h=m*u,r=E*S,o=E*u;c[0]=i*S,c[4]=r*d-h,c[8]=l*d+o,c[1]=i*u,c[5]=o*d+l,c[9]=h*d-r,c[2]=-d,c[6]=E*i,c[10]=m*i}else if(n.order==="YZX"){const l=m*i,h=m*d,r=E*i,o=E*d;c[0]=i*S,c[4]=o-l*u,c[8]=r*u+h,c[1]=u,c[5]=m*S,c[9]=-E*S,c[2]=-d*S,c[6]=h*u+r,c[10]=l-o*u}else if(n.order==="XZY"){const l=m*i,h=m*d,r=E*i,o=E*d;c[0]=i*S,c[4]=-u,c[8]=d*S,c[1]=l*u+o,c[5]=m*S,c[9]=h*u-r,c[2]=r*u-h,c[6]=E*S,c[10]=o*u+l}return c[3]=0,c[7]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,this}makeRotationFromQuaternion(n){return this.compose(dit,n,fit)}lookAt(n,c,M){const R=this.elements;return xn.subVectors(n,c),xn.lengthSq()===0&&(xn.z=1),xn.normalize(),yo.crossVectors(M,xn),yo.lengthSq()===0&&(Math.abs(M.z)===1?xn.x+=1e-4:xn.z+=1e-4,xn.normalize(),yo.crossVectors(M,xn)),yo.normalize(),Zv.crossVectors(xn,yo),R[0]=yo.x,R[4]=Zv.x,R[8]=xn.x,R[1]=yo.y,R[5]=Zv.y,R[9]=xn.y,R[2]=yo.z,R[6]=Zv.z,R[10]=xn.z,this}multiply(n){return this.multiplyMatrices(this,n)}premultiply(n){return this.multiplyMatrices(n,this)}multiplyMatrices(n,c){const M=n.elements,R=c.elements,I=this.elements,m=M[0],E=M[4],i=M[8],d=M[12],S=M[1],u=M[5],l=M[9],h=M[13],r=M[2],o=M[6],p=M[10],a=M[14],v=M[3],x=M[7],g=M[11],y=M[15],T=R[0],P=R[4],A=R[8],b=R[12],O=R[1],D=R[5],B=R[9],G=R[13],V=R[2],k=R[6],U=R[10],W=R[14],X=R[3],_=R[7],Q=R[11],j=R[15];return I[0]=m*T+E*O+i*V+d*X,I[4]=m*P+E*D+i*k+d*_,I[8]=m*A+E*B+i*U+d*Q,I[12]=m*b+E*G+i*W+d*j,I[1]=S*T+u*O+l*V+h*X,I[5]=S*P+u*D+l*k+h*_,I[9]=S*A+u*B+l*U+h*Q,I[13]=S*b+u*G+l*W+h*j,I[2]=r*T+o*O+p*V+a*X,I[6]=r*P+o*D+p*k+a*_,I[10]=r*A+o*B+p*U+a*Q,I[14]=r*b+o*G+p*W+a*j,I[3]=v*T+x*O+g*V+y*X,I[7]=v*P+x*D+g*k+y*_,I[11]=v*A+x*B+g*U+y*Q,I[15]=v*b+x*G+g*W+y*j,this}multiplyScalar(n){const c=this.elements;return c[0]*=n,c[4]*=n,c[8]*=n,c[12]*=n,c[1]*=n,c[5]*=n,c[9]*=n,c[13]*=n,c[2]*=n,c[6]*=n,c[10]*=n,c[14]*=n,c[3]*=n,c[7]*=n,c[11]*=n,c[15]*=n,this}determinant(){const n=this.elements,c=n[0],M=n[4],R=n[8],I=n[12],m=n[1],E=n[5],i=n[9],d=n[13],S=n[2],u=n[6],l=n[10],h=n[14],r=n[3],o=n[7],p=n[11],a=n[15];return r*(+I*i*u-R*d*u-I*E*l+M*d*l+R*E*h-M*i*h)+o*(+c*i*h-c*d*l+I*m*l-R*m*h+R*d*S-I*i*S)+p*(+c*d*u-c*E*h-I*m*u+M*m*h+I*E*S-M*d*S)+a*(-R*E*S-c*i*u+c*E*l+R*m*u-M*m*l+M*i*S)}transpose(){const n=this.elements;let c;return c=n[1],n[1]=n[4],n[4]=c,c=n[2],n[2]=n[8],n[8]=c,c=n[6],n[6]=n[9],n[9]=c,c=n[3],n[3]=n[12],n[12]=c,c=n[7],n[7]=n[13],n[13]=c,c=n[11],n[11]=n[14],n[14]=c,this}setPosition(n,c,M){const R=this.elements;return n.isVector3?(R[12]=n.x,R[13]=n.y,R[14]=n.z):(R[12]=n,R[13]=c,R[14]=M),this}invert(){const n=this.elements,c=n[0],M=n[1],R=n[2],I=n[3],m=n[4],E=n[5],i=n[6],d=n[7],S=n[8],u=n[9],l=n[10],h=n[11],r=n[12],o=n[13],p=n[14],a=n[15],v=u*p*d-o*l*d+o*i*h-E*p*h-u*i*a+E*l*a,x=r*l*d-S*p*d-r*i*h+m*p*h+S*i*a-m*l*a,g=S*o*d-r*u*d+r*E*h-m*o*h-S*E*a+m*u*a,y=r*u*i-S*o*i-r*E*l+m*o*l+S*E*p-m*u*p,T=c*v+M*x+R*g+I*y;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/T;return n[0]=v*P,n[1]=(o*l*I-u*p*I-o*R*h+M*p*h+u*R*a-M*l*a)*P,n[2]=(E*p*I-o*i*I+o*R*d-M*p*d-E*R*a+M*i*a)*P,n[3]=(u*i*I-E*l*I-u*R*d+M*l*d+E*R*h-M*i*h)*P,n[4]=x*P,n[5]=(S*p*I-r*l*I+r*R*h-c*p*h-S*R*a+c*l*a)*P,n[6]=(r*i*I-m*p*I-r*R*d+c*p*d+m*R*a-c*i*a)*P,n[7]=(m*l*I-S*i*I+S*R*d-c*l*d-m*R*h+c*i*h)*P,n[8]=g*P,n[9]=(r*u*I-S*o*I-r*M*h+c*o*h+S*M*a-c*u*a)*P,n[10]=(m*o*I-r*E*I+r*M*d-c*o*d-m*M*a+c*E*a)*P,n[11]=(S*E*I-m*u*I-S*M*d+c*u*d+m*M*h-c*E*h)*P,n[12]=y*P,n[13]=(S*o*R-r*u*R+r*M*l-c*o*l-S*M*p+c*u*p)*P,n[14]=(r*E*R-m*o*R-r*M*i+c*o*i+m*M*p-c*E*p)*P,n[15]=(m*u*R-S*E*R+S*M*i-c*u*i-m*M*l+c*E*l)*P,this}scale(n){const c=this.elements,M=n.x,R=n.y,I=n.z;return c[0]*=M,c[4]*=R,c[8]*=I,c[1]*=M,c[5]*=R,c[9]*=I,c[2]*=M,c[6]*=R,c[10]*=I,c[3]*=M,c[7]*=R,c[11]*=I,this}getMaxScaleOnAxis(){const n=this.elements,c=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],M=n[4]*n[4]+n[5]*n[5]+n[6]*n[6],R=n[8]*n[8]+n[9]*n[9]+n[10]*n[10];return Math.sqrt(Math.max(c,M,R))}makeTranslation(n,c,M){return n.isVector3?this.set(1,0,0,n.x,0,1,0,n.y,0,0,1,n.z,0,0,0,1):this.set(1,0,0,n,0,1,0,c,0,0,1,M,0,0,0,1),this}makeRotationX(n){const c=Math.cos(n),M=Math.sin(n);return this.set(1,0,0,0,0,c,-M,0,0,M,c,0,0,0,0,1),this}makeRotationY(n){const c=Math.cos(n),M=Math.sin(n);return this.set(c,0,M,0,0,1,0,0,-M,0,c,0,0,0,0,1),this}makeRotationZ(n){const c=Math.cos(n),M=Math.sin(n);return this.set(c,-M,0,0,M,c,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(n,c){const M=Math.cos(c),R=Math.sin(c),I=1-M,m=n.x,E=n.y,i=n.z,d=I*m,S=I*E;return this.set(d*m+M,d*E-R*i,d*i+R*E,0,d*E+R*i,S*E+M,S*i-R*m,0,d*i-R*E,S*i+R*m,I*i*i+M,0,0,0,0,1),this}makeScale(n,c,M){return this.set(n,0,0,0,0,c,0,0,0,0,M,0,0,0,0,1),this}makeShear(n,c,M,R,I,m){return this.set(1,M,I,0,n,1,m,0,c,R,1,0,0,0,0,1),this}compose(n,c,M){const R=this.elements,I=c._x,m=c._y,E=c._z,i=c._w,d=I+I,S=m+m,u=E+E,l=I*d,h=I*S,r=I*u,o=m*S,p=m*u,a=E*u,v=i*d,x=i*S,g=i*u,y=M.x,T=M.y,P=M.z;return R[0]=(1-(o+a))*y,R[1]=(h+g)*y,R[2]=(r-x)*y,R[3]=0,R[4]=(h-g)*T,R[5]=(1-(l+a))*T,R[6]=(p+v)*T,R[7]=0,R[8]=(r+x)*P,R[9]=(p-v)*P,R[10]=(1-(l+o))*P,R[11]=0,R[12]=n.x,R[13]=n.y,R[14]=n.z,R[15]=1,this}decompose(n,c,M){const R=this.elements;let I=Ql.set(R[0],R[1],R[2]).length();const m=Ql.set(R[4],R[5],R[6]).length(),E=Ql.set(R[8],R[9],R[10]).length();this.determinant()<0&&(I=-I),n.x=R[12],n.y=R[13],n.z=R[14],dr.copy(this);const d=1/I,S=1/m,u=1/E;return dr.elements[0]*=d,dr.elements[1]*=d,dr.elements[2]*=d,dr.elements[4]*=S,dr.elements[5]*=S,dr.elements[6]*=S,dr.elements[8]*=u,dr.elements[9]*=u,dr.elements[10]*=u,c.setFromRotationMatrix(dr),M.x=I,M.y=m,M.z=E,this}makePerspective(n,c,M,R,I,m,E=Oa){const i=this.elements,d=2*I/(c-n),S=2*I/(M-R),u=(c+n)/(c-n),l=(M+R)/(M-R);let h,r;if(E===Oa)h=-(m+I)/(m-I),r=-2*m*I/(m-I);else if(E===Dm)h=-m/(m-I),r=-m*I/(m-I);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+E);return i[0]=d,i[4]=0,i[8]=u,i[12]=0,i[1]=0,i[5]=S,i[9]=l,i[13]=0,i[2]=0,i[6]=0,i[10]=h,i[14]=r,i[3]=0,i[7]=0,i[11]=-1,i[15]=0,this}makeOrthographic(n,c,M,R,I,m,E=Oa){const i=this.elements,d=1/(c-n),S=1/(M-R),u=1/(m-I),l=(c+n)*d,h=(M+R)*S;let r,o;if(E===Oa)r=(m+I)*u,o=-2*u;else if(E===Dm)r=I*u,o=-1*u;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+E);return i[0]=2*d,i[4]=0,i[8]=0,i[12]=-l,i[1]=0,i[5]=2*S,i[9]=0,i[13]=-h,i[2]=0,i[6]=0,i[10]=o,i[14]=-r,i[3]=0,i[7]=0,i[11]=0,i[15]=1,this}equals(n){const c=this.elements,M=n.elements;for(let R=0;R<16;R++)if(c[R]!==M[R])return!1;return!0}fromArray(n,c=0){for(let M=0;M<16;M++)this.elements[M]=n[M+c];return this}toArray(n=[],c=0){const M=this.elements;return n[c]=M[0],n[c+1]=M[1],n[c+2]=M[2],n[c+3]=M[3],n[c+4]=M[4],n[c+5]=M[5],n[c+6]=M[6],n[c+7]=M[7],n[c+8]=M[8],n[c+9]=M[9],n[c+10]=M[10],n[c+11]=M[11],n[c+12]=M[12],n[c+13]=M[13],n[c+14]=M[14],n[c+15]=M[15],n}}const Ql=new wt,dr=new ei,dit=new wt(0,0,0),fit=new wt(1,1,1),yo=new wt,Zv=new wt,xn=new wt,IR=new ei,BR=new $f;class Yn{constructor(n=0,c=0,M=0,R=Yn.DEFAULT_ORDER){this.isEuler=!0,this._x=n,this._y=c,this._z=M,this._order=R}get x(){return this._x}set x(n){this._x=n,this._onChangeCallback()}get y(){return this._y}set y(n){this._y=n,this._onChangeCallback()}get z(){return this._z}set z(n){this._z=n,this._onChangeCallback()}get order(){return this._order}set order(n){this._order=n,this._onChangeCallback()}set(n,c,M,R=this._order){return this._x=n,this._y=c,this._z=M,this._order=R,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(n){return this._x=n._x,this._y=n._y,this._z=n._z,this._order=n._order,this._onChangeCallback(),this}setFromRotationMatrix(n,c=this._order,M=!0){const R=n.elements,I=R[0],m=R[4],E=R[8],i=R[1],d=R[5],S=R[9],u=R[2],l=R[6],h=R[10];switch(c){case"XYZ":this._y=Math.asin(Xe(E,-1,1)),Math.abs(E)<.9999999?(this._x=Math.atan2(-S,h),this._z=Math.atan2(-m,I)):(this._x=Math.atan2(l,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Xe(S,-1,1)),Math.abs(S)<.9999999?(this._y=Math.atan2(E,h),this._z=Math.atan2(i,d)):(this._y=Math.atan2(-u,I),this._z=0);break;case"ZXY":this._x=Math.asin(Xe(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-m,d)):(this._y=0,this._z=Math.atan2(i,I));break;case"ZYX":this._y=Math.asin(-Xe(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(l,h),this._z=Math.atan2(i,I)):(this._x=0,this._z=Math.atan2(-m,d));break;case"YZX":this._z=Math.asin(Xe(i,-1,1)),Math.abs(i)<.9999999?(this._x=Math.atan2(-S,d),this._y=Math.atan2(-u,I)):(this._x=0,this._y=Math.atan2(E,h));break;case"XZY":this._z=Math.asin(-Xe(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(l,d),this._y=Math.atan2(E,I)):(this._x=Math.atan2(-S,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+c)}return this._order=c,M===!0&&this._onChangeCallback(),this}setFromQuaternion(n,c,M){return IR.makeRotationFromQuaternion(n),this.setFromRotationMatrix(IR,c,M)}setFromVector3(n,c=this._order){return this.set(n.x,n.y,n.z,c)}reorder(n){return BR.setFromEuler(this),this.setFromQuaternion(BR,n)}equals(n){return n._x===this._x&&n._y===this._y&&n._z===this._z&&n._order===this._order}fromArray(n){return this._x=n[0],this._y=n[1],this._z=n[2],n[3]!==void 0&&(this._order=n[3]),this._onChangeCallback(),this}toArray(n=[],c=0){return n[c]=this._x,n[c+1]=this._y,n[c+2]=this._z,n[c+3]=this._order,n}_onChange(n){return this._onChangeCallback=n,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Yn.DEFAULT_ORDER="XYZ";class pC{constructor(){this.mask=1}set(n){this.mask=(1<<n|0)>>>0}enable(n){this.mask|=1<<n|0}enableAll(){this.mask=-1}toggle(n){this.mask^=1<<n|0}disable(n){this.mask&=~(1<<n|0)}disableAll(){this.mask=0}test(n){return(this.mask&n.mask)!==0}isEnabled(n){return(this.mask&(1<<n|0))!==0}}let cit=0;const NR=new wt,jl=new $f,Ma=new ei,Kv=new wt,yf=new wt,pit=new wt,vit=new $f,GR=new wt(1,0,0),UR=new wt(0,1,0),kR=new wt(0,0,1),VR={type:"added"},mit={type:"removed"},ql={type:"childadded",child:null},wS={type:"childremoved",child:null};class Vi extends Bu{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:cit++}),this.uuid=Yf(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Vi.DEFAULT_UP.clone();const n=new wt,c=new Yn,M=new $f,R=new wt(1,1,1);function I(){M.setFromEuler(c,!1)}function m(){c.setFromQuaternion(M,void 0,!1)}c._onChange(I),M._onChange(m),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:n},rotation:{configurable:!0,enumerable:!0,value:c},quaternion:{configurable:!0,enumerable:!0,value:M},scale:{configurable:!0,enumerable:!0,value:R},modelViewMatrix:{value:new ei},normalMatrix:{value:new Oe}}),this.matrix=new ei,this.matrixWorld=new ei,this.matrixAutoUpdate=Vi.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Vi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new pC,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(n){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(n),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(n){return this.quaternion.premultiply(n),this}setRotationFromAxisAngle(n,c){this.quaternion.setFromAxisAngle(n,c)}setRotationFromEuler(n){this.quaternion.setFromEuler(n,!0)}setRotationFromMatrix(n){this.quaternion.setFromRotationMatrix(n)}setRotationFromQuaternion(n){this.quaternion.copy(n)}rotateOnAxis(n,c){return jl.setFromAxisAngle(n,c),this.quaternion.multiply(jl),this}rotateOnWorldAxis(n,c){return jl.setFromAxisAngle(n,c),this.quaternion.premultiply(jl),this}rotateX(n){return this.rotateOnAxis(GR,n)}rotateY(n){return this.rotateOnAxis(UR,n)}rotateZ(n){return this.rotateOnAxis(kR,n)}translateOnAxis(n,c){return NR.copy(n).applyQuaternion(this.quaternion),this.position.add(NR.multiplyScalar(c)),this}translateX(n){return this.translateOnAxis(GR,n)}translateY(n){return this.translateOnAxis(UR,n)}translateZ(n){return this.translateOnAxis(kR,n)}localToWorld(n){return this.updateWorldMatrix(!0,!1),n.applyMatrix4(this.matrixWorld)}worldToLocal(n){return this.updateWorldMatrix(!0,!1),n.applyMatrix4(Ma.copy(this.matrixWorld).invert())}lookAt(n,c,M){n.isVector3?Kv.copy(n):Kv.set(n,c,M);const R=this.parent;this.updateWorldMatrix(!0,!1),yf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ma.lookAt(yf,Kv,this.up):Ma.lookAt(Kv,yf,this.up),this.quaternion.setFromRotationMatrix(Ma),R&&(Ma.extractRotation(R.matrixWorld),jl.setFromRotationMatrix(Ma),this.quaternion.premultiply(jl.invert()))}add(n){if(arguments.length>1){for(let c=0;c<arguments.length;c++)this.add(arguments[c]);return this}return n===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",n),this):(n&&n.isObject3D?(n.removeFromParent(),n.parent=this,this.children.push(n),n.dispatchEvent(VR),ql.child=n,this.dispatchEvent(ql),ql.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",n),this)}remove(n){if(arguments.length>1){for(let M=0;M<arguments.length;M++)this.remove(arguments[M]);return this}const c=this.children.indexOf(n);return c!==-1&&(n.parent=null,this.children.splice(c,1),n.dispatchEvent(mit),wS.child=n,this.dispatchEvent(wS),wS.child=null),this}removeFromParent(){const n=this.parent;return n!==null&&n.remove(this),this}clear(){return this.remove(...this.children)}attach(n){return this.updateWorldMatrix(!0,!1),Ma.copy(this.matrixWorld).invert(),n.parent!==null&&(n.parent.updateWorldMatrix(!0,!1),Ma.multiply(n.parent.matrixWorld)),n.applyMatrix4(Ma),n.removeFromParent(),n.parent=this,this.children.push(n),n.updateWorldMatrix(!1,!0),n.dispatchEvent(VR),ql.child=n,this.dispatchEvent(ql),ql.child=null,this}getObjectById(n){return this.getObjectByProperty("id",n)}getObjectByName(n){return this.getObjectByProperty("name",n)}getObjectByProperty(n,c){if(this[n]===c)return this;for(let M=0,R=this.children.length;M<R;M++){const m=this.children[M].getObjectByProperty(n,c);if(m!==void 0)return m}}getObjectsByProperty(n,c,M=[]){this[n]===c&&M.push(this);const R=this.children;for(let I=0,m=R.length;I<m;I++)R[I].getObjectsByProperty(n,c,M);return M}getWorldPosition(n){return this.updateWorldMatrix(!0,!1),n.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(n){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(yf,n,pit),n}getWorldScale(n){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(yf,vit,n),n}getWorldDirection(n){this.updateWorldMatrix(!0,!1);const c=this.matrixWorld.elements;return n.set(c[8],c[9],c[10]).normalize()}raycast(){}traverse(n){n(this);const c=this.children;for(let M=0,R=c.length;M<R;M++)c[M].traverse(n)}traverseVisible(n){if(this.visible===!1)return;n(this);const c=this.children;for(let M=0,R=c.length;M<R;M++)c[M].traverseVisible(n)}traverseAncestors(n){const c=this.parent;c!==null&&(n(c),c.traverseAncestors(n))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(n){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||n)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,n=!0);const c=this.children;for(let M=0,R=c.length;M<R;M++)c[M].updateMatrixWorld(n)}updateWorldMatrix(n,c){const M=this.parent;if(n===!0&&M!==null&&M.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),c===!0){const R=this.children;for(let I=0,m=R.length;I<m;I++)R[I].updateWorldMatrix(!1,!0)}}toJSON(n){const c=n===void 0||typeof n=="string",M={};c&&(n={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},M.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const R={};R.uuid=this.uuid,R.type=this.type,this.name!==""&&(R.name=this.name),this.castShadow===!0&&(R.castShadow=!0),this.receiveShadow===!0&&(R.receiveShadow=!0),this.visible===!1&&(R.visible=!1),this.frustumCulled===!1&&(R.frustumCulled=!1),this.renderOrder!==0&&(R.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(R.userData=this.userData),R.layers=this.layers.mask,R.matrix=this.matrix.toArray(),R.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(R.matrixAutoUpdate=!1),this.isInstancedMesh&&(R.type="InstancedMesh",R.count=this.count,R.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(R.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(R.type="BatchedMesh",R.perObjectFrustumCulled=this.perObjectFrustumCulled,R.sortObjects=this.sortObjects,R.drawRanges=this._drawRanges,R.reservedRanges=this._reservedRanges,R.geometryInfo=this._geometryInfo.map(E=>({...E,boundingBox:E.boundingBox?E.boundingBox.toJSON():void 0,boundingSphere:E.boundingSphere?E.boundingSphere.toJSON():void 0})),R.instanceInfo=this._instanceInfo.map(E=>({...E})),R.availableInstanceIds=this._availableInstanceIds.slice(),R.availableGeometryIds=this._availableGeometryIds.slice(),R.nextIndexStart=this._nextIndexStart,R.nextVertexStart=this._nextVertexStart,R.geometryCount=this._geometryCount,R.maxInstanceCount=this._maxInstanceCount,R.maxVertexCount=this._maxVertexCount,R.maxIndexCount=this._maxIndexCount,R.geometryInitialized=this._geometryInitialized,R.matricesTexture=this._matricesTexture.toJSON(n),R.indirectTexture=this._indirectTexture.toJSON(n),this._colorsTexture!==null&&(R.colorsTexture=this._colorsTexture.toJSON(n)),this.boundingSphere!==null&&(R.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(R.boundingBox=this.boundingBox.toJSON()));function I(E,i){return E[i.uuid]===void 0&&(E[i.uuid]=i.toJSON(n)),i.uuid}if(this.isScene)this.background&&(this.background.isColor?R.background=this.background.toJSON():this.background.isTexture&&(R.background=this.background.toJSON(n).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(R.environment=this.environment.toJSON(n).uuid);else if(this.isMesh||this.isLine||this.isPoints){R.geometry=I(n.geometries,this.geometry);const E=this.geometry.parameters;if(E!==void 0&&E.shapes!==void 0){const i=E.shapes;if(Array.isArray(i))for(let d=0,S=i.length;d<S;d++){const u=i[d];I(n.shapes,u)}else I(n.shapes,i)}}if(this.isSkinnedMesh&&(R.bindMode=this.bindMode,R.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(I(n.skeletons,this.skeleton),R.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const E=[];for(let i=0,d=this.material.length;i<d;i++)E.push(I(n.materials,this.material[i]));R.material=E}else R.material=I(n.materials,this.material);if(this.children.length>0){R.children=[];for(let E=0;E<this.children.length;E++)R.children.push(this.children[E].toJSON(n).object)}if(this.animations.length>0){R.animations=[];for(let E=0;E<this.animations.length;E++){const i=this.animations[E];R.animations.push(I(n.animations,i))}}if(c){const E=m(n.geometries),i=m(n.materials),d=m(n.textures),S=m(n.images),u=m(n.shapes),l=m(n.skeletons),h=m(n.animations),r=m(n.nodes);E.length>0&&(M.geometries=E),i.length>0&&(M.materials=i),d.length>0&&(M.textures=d),S.length>0&&(M.images=S),u.length>0&&(M.shapes=u),l.length>0&&(M.skeletons=l),h.length>0&&(M.animations=h),r.length>0&&(M.nodes=r)}return M.object=R,M;function m(E){const i=[];for(const d in E){const S=E[d];delete S.metadata,i.push(S)}return i}}clone(n){return new this.constructor().copy(this,n)}copy(n,c=!0){if(this.name=n.name,this.up.copy(n.up),this.position.copy(n.position),this.rotation.order=n.rotation.order,this.quaternion.copy(n.quaternion),this.scale.copy(n.scale),this.matrix.copy(n.matrix),this.matrixWorld.copy(n.matrixWorld),this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrixWorldAutoUpdate=n.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=n.matrixWorldNeedsUpdate,this.layers.mask=n.layers.mask,this.visible=n.visible,this.castShadow=n.castShadow,this.receiveShadow=n.receiveShadow,this.frustumCulled=n.frustumCulled,this.renderOrder=n.renderOrder,this.animations=n.animations.slice(),this.userData=JSON.parse(JSON.stringify(n.userData)),c===!0)for(let M=0;M<n.children.length;M++){const R=n.children[M];this.add(R.clone())}return this}}Vi.DEFAULT_UP=new wt(0,1,0);Vi.DEFAULT_MATRIX_AUTO_UPDATE=!0;Vi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const fr=new wt,Ea=new wt,bS=new wt,Pa=new wt,tu=new wt,eu=new wt,zR=new wt,AS=new wt,RS=new wt,LS=new wt,OS=new si,FS=new si,DS=new si;class pr{constructor(n=new wt,c=new wt,M=new wt){this.a=n,this.b=c,this.c=M}static getNormal(n,c,M,R){R.subVectors(M,c),fr.subVectors(n,c),R.cross(fr);const I=R.lengthSq();return I>0?R.multiplyScalar(1/Math.sqrt(I)):R.set(0,0,0)}static getBarycoord(n,c,M,R,I){fr.subVectors(R,c),Ea.subVectors(M,c),bS.subVectors(n,c);const m=fr.dot(fr),E=fr.dot(Ea),i=fr.dot(bS),d=Ea.dot(Ea),S=Ea.dot(bS),u=m*d-E*E;if(u===0)return I.set(0,0,0),null;const l=1/u,h=(d*i-E*S)*l,r=(m*S-E*i)*l;return I.set(1-h-r,r,h)}static containsPoint(n,c,M,R){return this.getBarycoord(n,c,M,R,Pa)===null?!1:Pa.x>=0&&Pa.y>=0&&Pa.x+Pa.y<=1}static getInterpolation(n,c,M,R,I,m,E,i){return this.getBarycoord(n,c,M,R,Pa)===null?(i.x=0,i.y=0,"z"in i&&(i.z=0),"w"in i&&(i.w=0),null):(i.setScalar(0),i.addScaledVector(I,Pa.x),i.addScaledVector(m,Pa.y),i.addScaledVector(E,Pa.z),i)}static getInterpolatedAttribute(n,c,M,R,I,m){return OS.setScalar(0),FS.setScalar(0),DS.setScalar(0),OS.fromBufferAttribute(n,c),FS.fromBufferAttribute(n,M),DS.fromBufferAttribute(n,R),m.setScalar(0),m.addScaledVector(OS,I.x),m.addScaledVector(FS,I.y),m.addScaledVector(DS,I.z),m}static isFrontFacing(n,c,M,R){return fr.subVectors(M,c),Ea.subVectors(n,c),fr.cross(Ea).dot(R)<0}set(n,c,M){return this.a.copy(n),this.b.copy(c),this.c.copy(M),this}setFromPointsAndIndices(n,c,M,R){return this.a.copy(n[c]),this.b.copy(n[M]),this.c.copy(n[R]),this}setFromAttributeAndIndices(n,c,M,R){return this.a.fromBufferAttribute(n,c),this.b.fromBufferAttribute(n,M),this.c.fromBufferAttribute(n,R),this}clone(){return new this.constructor().copy(this)}copy(n){return this.a.copy(n.a),this.b.copy(n.b),this.c.copy(n.c),this}getArea(){return fr.subVectors(this.c,this.b),Ea.subVectors(this.a,this.b),fr.cross(Ea).length()*.5}getMidpoint(n){return n.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(n){return pr.getNormal(this.a,this.b,this.c,n)}getPlane(n){return n.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(n,c){return pr.getBarycoord(n,this.a,this.b,this.c,c)}getInterpolation(n,c,M,R,I){return pr.getInterpolation(n,this.a,this.b,this.c,c,M,R,I)}containsPoint(n){return pr.containsPoint(n,this.a,this.b,this.c)}isFrontFacing(n){return pr.isFrontFacing(this.a,this.b,this.c,n)}intersectsBox(n){return n.intersectsTriangle(this)}closestPointToPoint(n,c){const M=this.a,R=this.b,I=this.c;let m,E;tu.subVectors(R,M),eu.subVectors(I,M),AS.subVectors(n,M);const i=tu.dot(AS),d=eu.dot(AS);if(i<=0&&d<=0)return c.copy(M);RS.subVectors(n,R);const S=tu.dot(RS),u=eu.dot(RS);if(S>=0&&u<=S)return c.copy(R);const l=i*u-S*d;if(l<=0&&i>=0&&S<=0)return m=i/(i-S),c.copy(M).addScaledVector(tu,m);LS.subVectors(n,I);const h=tu.dot(LS),r=eu.dot(LS);if(r>=0&&h<=r)return c.copy(I);const o=h*d-i*r;if(o<=0&&d>=0&&r<=0)return E=d/(d-r),c.copy(M).addScaledVector(eu,E);const p=S*r-h*u;if(p<=0&&u-S>=0&&h-r>=0)return zR.subVectors(I,R),E=(u-S)/(u-S+(h-r)),c.copy(R).addScaledVector(zR,E);const a=1/(p+o+l);return m=o*a,E=l*a,c.copy(M).addScaledVector(tu,m).addScaledVector(eu,E)}equals(n){return n.a.equals(this.a)&&n.b.equals(this.b)&&n.c.equals(this.c)}}const UO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},So={h:0,s:0,l:0},Jv={h:0,s:0,l:0};function IS(L,n,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?L+(n-L)*6*c:c<1/2?n:c<2/3?L+(n-L)*6*(2/3-c):L}let Ae=class{constructor(n,c,M){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(n,c,M)}set(n,c,M){if(c===void 0&&M===void 0){const R=n;R&&R.isColor?this.copy(R):typeof R=="number"?this.setHex(R):typeof R=="string"&&this.setStyle(R)}else this.setRGB(n,c,M);return this}setScalar(n){return this.r=n,this.g=n,this.b=n,this}setHex(n,c=xs){return n=Math.floor(n),this.r=(n>>16&255)/255,this.g=(n>>8&255)/255,this.b=(n&255)/255,We.colorSpaceToWorking(this,c),this}setRGB(n,c,M,R=We.workingColorSpace){return this.r=n,this.g=c,this.b=M,We.colorSpaceToWorking(this,R),this}setHSL(n,c,M,R=We.workingColorSpace){if(n=qet(n,1),c=Xe(c,0,1),M=Xe(M,0,1),c===0)this.r=this.g=this.b=M;else{const I=M<=.5?M*(1+c):M+c-M*c,m=2*M-I;this.r=IS(m,I,n+1/3),this.g=IS(m,I,n),this.b=IS(m,I,n-1/3)}return We.colorSpaceToWorking(this,R),this}setStyle(n,c=xs){function M(I){I!==void 0&&parseFloat(I)<1&&console.warn("THREE.Color: Alpha component of "+n+" will be ignored.")}let R;if(R=/^(\w+)\(([^\)]*)\)/.exec(n)){let I;const m=R[1],E=R[2];switch(m){case"rgb":case"rgba":if(I=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(E))return M(I[4]),this.setRGB(Math.min(255,parseInt(I[1],10))/255,Math.min(255,parseInt(I[2],10))/255,Math.min(255,parseInt(I[3],10))/255,c);if(I=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(E))return M(I[4]),this.setRGB(Math.min(100,parseInt(I[1],10))/100,Math.min(100,parseInt(I[2],10))/100,Math.min(100,parseInt(I[3],10))/100,c);break;case"hsl":case"hsla":if(I=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(E))return M(I[4]),this.setHSL(parseFloat(I[1])/360,parseFloat(I[2])/100,parseFloat(I[3])/100,c);break;default:console.warn("THREE.Color: Unknown color model "+n)}}else if(R=/^\#([A-Fa-f\d]+)$/.exec(n)){const I=R[1],m=I.length;if(m===3)return this.setRGB(parseInt(I.charAt(0),16)/15,parseInt(I.charAt(1),16)/15,parseInt(I.charAt(2),16)/15,c);if(m===6)return this.setHex(parseInt(I,16),c);console.warn("THREE.Color: Invalid hex color "+n)}else if(n&&n.length>0)return this.setColorName(n,c);return this}setColorName(n,c=xs){const M=UO[n.toLowerCase()];return M!==void 0?this.setHex(M,c):console.warn("THREE.Color: Unknown color "+n),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(n){return this.r=n.r,this.g=n.g,this.b=n.b,this}copySRGBToLinear(n){return this.r=Fa(n.r),this.g=Fa(n.g),this.b=Fa(n.b),this}copyLinearToSRGB(n){return this.r=gu(n.r),this.g=gu(n.g),this.b=gu(n.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(n=xs){return We.workingToColorSpace(Rs.copy(this),n),Math.round(Xe(Rs.r*255,0,255))*65536+Math.round(Xe(Rs.g*255,0,255))*256+Math.round(Xe(Rs.b*255,0,255))}getHexString(n=xs){return("000000"+this.getHex(n).toString(16)).slice(-6)}getHSL(n,c=We.workingColorSpace){We.workingToColorSpace(Rs.copy(this),c);const M=Rs.r,R=Rs.g,I=Rs.b,m=Math.max(M,R,I),E=Math.min(M,R,I);let i,d;const S=(E+m)/2;if(E===m)i=0,d=0;else{const u=m-E;switch(d=S<=.5?u/(m+E):u/(2-m-E),m){case M:i=(R-I)/u+(R<I?6:0);break;case R:i=(I-M)/u+2;break;case I:i=(M-R)/u+4;break}i/=6}return n.h=i,n.s=d,n.l=S,n}getRGB(n,c=We.workingColorSpace){return We.workingToColorSpace(Rs.copy(this),c),n.r=Rs.r,n.g=Rs.g,n.b=Rs.b,n}getStyle(n=xs){We.workingToColorSpace(Rs.copy(this),n);const c=Rs.r,M=Rs.g,R=Rs.b;return n!==xs?`color(${n} ${c.toFixed(3)} ${M.toFixed(3)} ${R.toFixed(3)})`:`rgb(${Math.round(c*255)},${Math.round(M*255)},${Math.round(R*255)})`}offsetHSL(n,c,M){return this.getHSL(So),this.setHSL(So.h+n,So.s+c,So.l+M)}add(n){return this.r+=n.r,this.g+=n.g,this.b+=n.b,this}addColors(n,c){return this.r=n.r+c.r,this.g=n.g+c.g,this.b=n.b+c.b,this}addScalar(n){return this.r+=n,this.g+=n,this.b+=n,this}sub(n){return this.r=Math.max(0,this.r-n.r),this.g=Math.max(0,this.g-n.g),this.b=Math.max(0,this.b-n.b),this}multiply(n){return this.r*=n.r,this.g*=n.g,this.b*=n.b,this}multiplyScalar(n){return this.r*=n,this.g*=n,this.b*=n,this}lerp(n,c){return this.r+=(n.r-this.r)*c,this.g+=(n.g-this.g)*c,this.b+=(n.b-this.b)*c,this}lerpColors(n,c,M){return this.r=n.r+(c.r-n.r)*M,this.g=n.g+(c.g-n.g)*M,this.b=n.b+(c.b-n.b)*M,this}lerpHSL(n,c){this.getHSL(So),n.getHSL(Jv);const M=mS(So.h,Jv.h,c),R=mS(So.s,Jv.s,c),I=mS(So.l,Jv.l,c);return this.setHSL(M,R,I),this}setFromVector3(n){return this.r=n.x,this.g=n.y,this.b=n.z,this}applyMatrix3(n){const c=this.r,M=this.g,R=this.b,I=n.elements;return this.r=I[0]*c+I[3]*M+I[6]*R,this.g=I[1]*c+I[4]*M+I[7]*R,this.b=I[2]*c+I[5]*M+I[8]*R,this}equals(n){return n.r===this.r&&n.g===this.g&&n.b===this.b}fromArray(n,c=0){return this.r=n[c],this.g=n[c+1],this.b=n[c+2],this}toArray(n=[],c=0){return n[c]=this.r,n[c+1]=this.g,n[c+2]=this.b,n}fromBufferAttribute(n,c){return this.r=n.getX(c),this.g=n.getY(c),this.b=n.getZ(c),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Rs=new Ae;Ae.NAMES=UO;let git=0;class _r extends Bu{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:git++}),this.uuid=Yf(),this.name="",this.type="Material",this.blending=vu,this.side=Ia,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=eT,this.blendDst=iT,this.blendEquation=Dh,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ae(0,0,0),this.blendAlpha=0,this.depthFunc=Su,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=bR,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=$l,this.stencilZFail=$l,this.stencilZPass=$l,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(n){this._alphaTest>0!=n>0&&this.version++,this._alphaTest=n}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(n){if(n!==void 0)for(const c in n){const M=n[c];if(M===void 0){console.warn(`THREE.Material: parameter '${c}' has value of undefined.`);continue}const R=this[c];if(R===void 0){console.warn(`THREE.Material: '${c}' is not a property of THREE.${this.type}.`);continue}R&&R.isColor?R.set(M):R&&R.isVector3&&M&&M.isVector3?R.copy(M):this[c]=M}}toJSON(n){const c=n===void 0||typeof n=="string";c&&(n={textures:{},images:{}});const M={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};M.uuid=this.uuid,M.type=this.type,this.name!==""&&(M.name=this.name),this.color&&this.color.isColor&&(M.color=this.color.getHex()),this.roughness!==void 0&&(M.roughness=this.roughness),this.metalness!==void 0&&(M.metalness=this.metalness),this.sheen!==void 0&&(M.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(M.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(M.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(M.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(M.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(M.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(M.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(M.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(M.shininess=this.shininess),this.clearcoat!==void 0&&(M.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(M.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(M.clearcoatMap=this.clearcoatMap.toJSON(n).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(M.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(n).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(M.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(n).uuid,M.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(M.dispersion=this.dispersion),this.iridescence!==void 0&&(M.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(M.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(M.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(M.iridescenceMap=this.iridescenceMap.toJSON(n).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(M.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(n).uuid),this.anisotropy!==void 0&&(M.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(M.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(M.anisotropyMap=this.anisotropyMap.toJSON(n).uuid),this.map&&this.map.isTexture&&(M.map=this.map.toJSON(n).uuid),this.matcap&&this.matcap.isTexture&&(M.matcap=this.matcap.toJSON(n).uuid),this.alphaMap&&this.alphaMap.isTexture&&(M.alphaMap=this.alphaMap.toJSON(n).uuid),this.lightMap&&this.lightMap.isTexture&&(M.lightMap=this.lightMap.toJSON(n).uuid,M.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(M.aoMap=this.aoMap.toJSON(n).uuid,M.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(M.bumpMap=this.bumpMap.toJSON(n).uuid,M.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(M.normalMap=this.normalMap.toJSON(n).uuid,M.normalMapType=this.normalMapType,M.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(M.displacementMap=this.displacementMap.toJSON(n).uuid,M.displacementScale=this.displacementScale,M.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(M.roughnessMap=this.roughnessMap.toJSON(n).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(M.metalnessMap=this.metalnessMap.toJSON(n).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(M.emissiveMap=this.emissiveMap.toJSON(n).uuid),this.specularMap&&this.specularMap.isTexture&&(M.specularMap=this.specularMap.toJSON(n).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(M.specularIntensityMap=this.specularIntensityMap.toJSON(n).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(M.specularColorMap=this.specularColorMap.toJSON(n).uuid),this.envMap&&this.envMap.isTexture&&(M.envMap=this.envMap.toJSON(n).uuid,this.combine!==void 0&&(M.combine=this.combine)),this.envMapRotation!==void 0&&(M.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(M.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(M.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(M.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(M.gradientMap=this.gradientMap.toJSON(n).uuid),this.transmission!==void 0&&(M.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(M.transmissionMap=this.transmissionMap.toJSON(n).uuid),this.thickness!==void 0&&(M.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(M.thicknessMap=this.thicknessMap.toJSON(n).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(M.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(M.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(M.size=this.size),this.shadowSide!==null&&(M.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(M.sizeAttenuation=this.sizeAttenuation),this.blending!==vu&&(M.blending=this.blending),this.side!==Ia&&(M.side=this.side),this.vertexColors===!0&&(M.vertexColors=!0),this.opacity<1&&(M.opacity=this.opacity),this.transparent===!0&&(M.transparent=!0),this.blendSrc!==eT&&(M.blendSrc=this.blendSrc),this.blendDst!==iT&&(M.blendDst=this.blendDst),this.blendEquation!==Dh&&(M.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(M.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(M.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(M.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(M.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(M.blendAlpha=this.blendAlpha),this.depthFunc!==Su&&(M.depthFunc=this.depthFunc),this.depthTest===!1&&(M.depthTest=this.depthTest),this.depthWrite===!1&&(M.depthWrite=this.depthWrite),this.colorWrite===!1&&(M.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(M.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==bR&&(M.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(M.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(M.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==$l&&(M.stencilFail=this.stencilFail),this.stencilZFail!==$l&&(M.stencilZFail=this.stencilZFail),this.stencilZPass!==$l&&(M.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(M.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(M.rotation=this.rotation),this.polygonOffset===!0&&(M.polygonOffset=!0),this.polygonOffsetFactor!==0&&(M.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(M.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(M.linewidth=this.linewidth),this.dashSize!==void 0&&(M.dashSize=this.dashSize),this.gapSize!==void 0&&(M.gapSize=this.gapSize),this.scale!==void 0&&(M.scale=this.scale),this.dithering===!0&&(M.dithering=!0),this.alphaTest>0&&(M.alphaTest=this.alphaTest),this.alphaHash===!0&&(M.alphaHash=!0),this.alphaToCoverage===!0&&(M.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(M.premultipliedAlpha=!0),this.forceSinglePass===!0&&(M.forceSinglePass=!0),this.wireframe===!0&&(M.wireframe=!0),this.wireframeLinewidth>1&&(M.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(M.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(M.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(M.flatShading=!0),this.visible===!1&&(M.visible=!1),this.toneMapped===!1&&(M.toneMapped=!1),this.fog===!1&&(M.fog=!1),Object.keys(this.userData).length>0&&(M.userData=this.userData);function R(I){const m=[];for(const E in I){const i=I[E];delete i.metadata,m.push(i)}return m}if(c){const I=R(n.textures),m=R(n.images);I.length>0&&(M.textures=I),m.length>0&&(M.images=m)}return M}clone(){return new this.constructor().copy(this)}copy(n){this.name=n.name,this.blending=n.blending,this.side=n.side,this.vertexColors=n.vertexColors,this.opacity=n.opacity,this.transparent=n.transparent,this.blendSrc=n.blendSrc,this.blendDst=n.blendDst,this.blendEquation=n.blendEquation,this.blendSrcAlpha=n.blendSrcAlpha,this.blendDstAlpha=n.blendDstAlpha,this.blendEquationAlpha=n.blendEquationAlpha,this.blendColor.copy(n.blendColor),this.blendAlpha=n.blendAlpha,this.depthFunc=n.depthFunc,this.depthTest=n.depthTest,this.depthWrite=n.depthWrite,this.stencilWriteMask=n.stencilWriteMask,this.stencilFunc=n.stencilFunc,this.stencilRef=n.stencilRef,this.stencilFuncMask=n.stencilFuncMask,this.stencilFail=n.stencilFail,this.stencilZFail=n.stencilZFail,this.stencilZPass=n.stencilZPass,this.stencilWrite=n.stencilWrite;const c=n.clippingPlanes;let M=null;if(c!==null){const R=c.length;M=new Array(R);for(let I=0;I!==R;++I)M[I]=c[I].clone()}return this.clippingPlanes=M,this.clipIntersection=n.clipIntersection,this.clipShadows=n.clipShadows,this.shadowSide=n.shadowSide,this.colorWrite=n.colorWrite,this.precision=n.precision,this.polygonOffset=n.polygonOffset,this.polygonOffsetFactor=n.polygonOffsetFactor,this.polygonOffsetUnits=n.polygonOffsetUnits,this.dithering=n.dithering,this.alphaTest=n.alphaTest,this.alphaHash=n.alphaHash,this.alphaToCoverage=n.alphaToCoverage,this.premultipliedAlpha=n.premultipliedAlpha,this.forceSinglePass=n.forceSinglePass,this.visible=n.visible,this.toneMapped=n.toneMapped,this.userData=JSON.parse(JSON.stringify(n.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(n){n===!0&&this.version++}}class Hr extends _r{constructor(n){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ae(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Yn,this.combine=jm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.envMapRotation.copy(n.envMapRotation),this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.fog=n.fog,this}}const Yi=new wt,Qv=new Ve;let xit=0;class $r{constructor(n,c,M=!1){if(Array.isArray(n))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:xit++}),this.name="",this.array=n,this.itemSize=c,this.count=n!==void 0?n.length/c:0,this.normalized=M,this.usage=AR,this.updateRanges=[],this.gpuType=La,this.version=0}onUploadCallback(){}set needsUpdate(n){n===!0&&this.version++}setUsage(n){return this.usage=n,this}addUpdateRange(n,c){this.updateRanges.push({start:n,count:c})}clearUpdateRanges(){this.updateRanges.length=0}copy(n){return this.name=n.name,this.array=new n.array.constructor(n.array),this.itemSize=n.itemSize,this.count=n.count,this.normalized=n.normalized,this.usage=n.usage,this.gpuType=n.gpuType,this}copyAt(n,c,M){n*=this.itemSize,M*=c.itemSize;for(let R=0,I=this.itemSize;R<I;R++)this.array[n+R]=c.array[M+R];return this}copyArray(n){return this.array.set(n),this}applyMatrix3(n){if(this.itemSize===2)for(let c=0,M=this.count;c<M;c++)Qv.fromBufferAttribute(this,c),Qv.applyMatrix3(n),this.setXY(c,Qv.x,Qv.y);else if(this.itemSize===3)for(let c=0,M=this.count;c<M;c++)Yi.fromBufferAttribute(this,c),Yi.applyMatrix3(n),this.setXYZ(c,Yi.x,Yi.y,Yi.z);return this}applyMatrix4(n){for(let c=0,M=this.count;c<M;c++)Yi.fromBufferAttribute(this,c),Yi.applyMatrix4(n),this.setXYZ(c,Yi.x,Yi.y,Yi.z);return this}applyNormalMatrix(n){for(let c=0,M=this.count;c<M;c++)Yi.fromBufferAttribute(this,c),Yi.applyNormalMatrix(n),this.setXYZ(c,Yi.x,Yi.y,Yi.z);return this}transformDirection(n){for(let c=0,M=this.count;c<M;c++)Yi.fromBufferAttribute(this,c),Yi.transformDirection(n),this.setXYZ(c,Yi.x,Yi.y,Yi.z);return this}set(n,c=0){return this.array.set(n,c),this}getComponent(n,c){let M=this.array[n*this.itemSize+c];return this.normalized&&(M=mf(M,this.array)),M}setComponent(n,c,M){return this.normalized&&(M=tn(M,this.array)),this.array[n*this.itemSize+c]=M,this}getX(n){let c=this.array[n*this.itemSize];return this.normalized&&(c=mf(c,this.array)),c}setX(n,c){return this.normalized&&(c=tn(c,this.array)),this.array[n*this.itemSize]=c,this}getY(n){let c=this.array[n*this.itemSize+1];return this.normalized&&(c=mf(c,this.array)),c}setY(n,c){return this.normalized&&(c=tn(c,this.array)),this.array[n*this.itemSize+1]=c,this}getZ(n){let c=this.array[n*this.itemSize+2];return this.normalized&&(c=mf(c,this.array)),c}setZ(n,c){return this.normalized&&(c=tn(c,this.array)),this.array[n*this.itemSize+2]=c,this}getW(n){let c=this.array[n*this.itemSize+3];return this.normalized&&(c=mf(c,this.array)),c}setW(n,c){return this.normalized&&(c=tn(c,this.array)),this.array[n*this.itemSize+3]=c,this}setXY(n,c,M){return n*=this.itemSize,this.normalized&&(c=tn(c,this.array),M=tn(M,this.array)),this.array[n+0]=c,this.array[n+1]=M,this}setXYZ(n,c,M,R){return n*=this.itemSize,this.normalized&&(c=tn(c,this.array),M=tn(M,this.array),R=tn(R,this.array)),this.array[n+0]=c,this.array[n+1]=M,this.array[n+2]=R,this}setXYZW(n,c,M,R,I){return n*=this.itemSize,this.normalized&&(c=tn(c,this.array),M=tn(M,this.array),R=tn(R,this.array),I=tn(I,this.array)),this.array[n+0]=c,this.array[n+1]=M,this.array[n+2]=R,this.array[n+3]=I,this}onUpload(n){return this.onUploadCallback=n,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const n={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(n.name=this.name),this.usage!==AR&&(n.usage=this.usage),n}}class kO extends $r{constructor(n,c,M){super(new Uint16Array(n),c,M)}}class VO extends $r{constructor(n,c,M){super(new Uint32Array(n),c,M)}}class hs extends $r{constructor(n,c,M){super(new Float32Array(n),c,M)}}let yit=0;const Un=new ei,BS=new Vi,iu=new wt,yn=new _h,Sf=new _h,os=new wt;class $n extends Bu{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:yit++}),this.uuid=Yf(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(n){return Array.isArray(n)?this.index=new(NO(n)?VO:kO)(n,1):this.index=n,this}setIndirect(n){return this.indirect=n,this}getIndirect(){return this.indirect}getAttribute(n){return this.attributes[n]}setAttribute(n,c){return this.attributes[n]=c,this}deleteAttribute(n){return delete this.attributes[n],this}hasAttribute(n){return this.attributes[n]!==void 0}addGroup(n,c,M=0){this.groups.push({start:n,count:c,materialIndex:M})}clearGroups(){this.groups=[]}setDrawRange(n,c){this.drawRange.start=n,this.drawRange.count=c}applyMatrix4(n){const c=this.attributes.position;c!==void 0&&(c.applyMatrix4(n),c.needsUpdate=!0);const M=this.attributes.normal;if(M!==void 0){const I=new Oe().getNormalMatrix(n);M.applyNormalMatrix(I),M.needsUpdate=!0}const R=this.attributes.tangent;return R!==void 0&&(R.transformDirection(n),R.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(n){return Un.makeRotationFromQuaternion(n),this.applyMatrix4(Un),this}rotateX(n){return Un.makeRotationX(n),this.applyMatrix4(Un),this}rotateY(n){return Un.makeRotationY(n),this.applyMatrix4(Un),this}rotateZ(n){return Un.makeRotationZ(n),this.applyMatrix4(Un),this}translate(n,c,M){return Un.makeTranslation(n,c,M),this.applyMatrix4(Un),this}scale(n,c,M){return Un.makeScale(n,c,M),this.applyMatrix4(Un),this}lookAt(n){return BS.lookAt(n),BS.updateMatrix(),this.applyMatrix4(BS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(iu).negate(),this.translate(iu.x,iu.y,iu.z),this}setFromPoints(n){const c=this.getAttribute("position");if(c===void 0){const M=[];for(let R=0,I=n.length;R<I;R++){const m=n[R];M.push(m.x,m.y,m.z||0)}this.setAttribute("position",new hs(M,3))}else{const M=Math.min(n.length,c.count);for(let R=0;R<M;R++){const I=n[R];c.setXYZ(R,I.x,I.y,I.z||0)}n.length>c.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),c.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new _h);const n=this.attributes.position,c=this.morphAttributes.position;if(n&&n.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new wt(-1/0,-1/0,-1/0),new wt(1/0,1/0,1/0));return}if(n!==void 0){if(this.boundingBox.setFromBufferAttribute(n),c)for(let M=0,R=c.length;M<R;M++){const I=c[M];yn.setFromBufferAttribute(I),this.morphTargetsRelative?(os.addVectors(this.boundingBox.min,yn.min),this.boundingBox.expandByPoint(os),os.addVectors(this.boundingBox.max,yn.max),this.boundingBox.expandByPoint(os)):(this.boundingBox.expandByPoint(yn.min),this.boundingBox.expandByPoint(yn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new _f);const n=this.attributes.position,c=this.morphAttributes.position;if(n&&n.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new wt,1/0);return}if(n){const M=this.boundingSphere.center;if(yn.setFromBufferAttribute(n),c)for(let I=0,m=c.length;I<m;I++){const E=c[I];Sf.setFromBufferAttribute(E),this.morphTargetsRelative?(os.addVectors(yn.min,Sf.min),yn.expandByPoint(os),os.addVectors(yn.max,Sf.max),yn.expandByPoint(os)):(yn.expandByPoint(Sf.min),yn.expandByPoint(Sf.max))}yn.getCenter(M);let R=0;for(let I=0,m=n.count;I<m;I++)os.fromBufferAttribute(n,I),R=Math.max(R,M.distanceToSquared(os));if(c)for(let I=0,m=c.length;I<m;I++){const E=c[I],i=this.morphTargetsRelative;for(let d=0,S=E.count;d<S;d++)os.fromBufferAttribute(E,d),i&&(iu.fromBufferAttribute(n,d),os.add(iu)),R=Math.max(R,M.distanceToSquared(os))}this.boundingSphere.radius=Math.sqrt(R),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const n=this.index,c=this.attributes;if(n===null||c.position===void 0||c.normal===void 0||c.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const M=c.position,R=c.normal,I=c.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new $r(new Float32Array(4*M.count),4));const m=this.getAttribute("tangent"),E=[],i=[];for(let A=0;A<M.count;A++)E[A]=new wt,i[A]=new wt;const d=new wt,S=new wt,u=new wt,l=new Ve,h=new Ve,r=new Ve,o=new wt,p=new wt;function a(A,b,O){d.fromBufferAttribute(M,A),S.fromBufferAttribute(M,b),u.fromBufferAttribute(M,O),l.fromBufferAttribute(I,A),h.fromBufferAttribute(I,b),r.fromBufferAttribute(I,O),S.sub(d),u.sub(d),h.sub(l),r.sub(l);const D=1/(h.x*r.y-r.x*h.y);isFinite(D)&&(o.copy(S).multiplyScalar(r.y).addScaledVector(u,-h.y).multiplyScalar(D),p.copy(u).multiplyScalar(h.x).addScaledVector(S,-r.x).multiplyScalar(D),E[A].add(o),E[b].add(o),E[O].add(o),i[A].add(p),i[b].add(p),i[O].add(p))}let v=this.groups;v.length===0&&(v=[{start:0,count:n.count}]);for(let A=0,b=v.length;A<b;++A){const O=v[A],D=O.start,B=O.count;for(let G=D,V=D+B;G<V;G+=3)a(n.getX(G+0),n.getX(G+1),n.getX(G+2))}const x=new wt,g=new wt,y=new wt,T=new wt;function P(A){y.fromBufferAttribute(R,A),T.copy(y);const b=E[A];x.copy(b),x.sub(y.multiplyScalar(y.dot(b))).normalize(),g.crossVectors(T,b);const D=g.dot(i[A])<0?-1:1;m.setXYZW(A,x.x,x.y,x.z,D)}for(let A=0,b=v.length;A<b;++A){const O=v[A],D=O.start,B=O.count;for(let G=D,V=D+B;G<V;G+=3)P(n.getX(G+0)),P(n.getX(G+1)),P(n.getX(G+2))}}computeVertexNormals(){const n=this.index,c=this.getAttribute("position");if(c!==void 0){let M=this.getAttribute("normal");if(M===void 0)M=new $r(new Float32Array(c.count*3),3),this.setAttribute("normal",M);else for(let l=0,h=M.count;l<h;l++)M.setXYZ(l,0,0,0);const R=new wt,I=new wt,m=new wt,E=new wt,i=new wt,d=new wt,S=new wt,u=new wt;if(n)for(let l=0,h=n.count;l<h;l+=3){const r=n.getX(l+0),o=n.getX(l+1),p=n.getX(l+2);R.fromBufferAttribute(c,r),I.fromBufferAttribute(c,o),m.fromBufferAttribute(c,p),S.subVectors(m,I),u.subVectors(R,I),S.cross(u),E.fromBufferAttribute(M,r),i.fromBufferAttribute(M,o),d.fromBufferAttribute(M,p),E.add(S),i.add(S),d.add(S),M.setXYZ(r,E.x,E.y,E.z),M.setXYZ(o,i.x,i.y,i.z),M.setXYZ(p,d.x,d.y,d.z)}else for(let l=0,h=c.count;l<h;l+=3)R.fromBufferAttribute(c,l+0),I.fromBufferAttribute(c,l+1),m.fromBufferAttribute(c,l+2),S.subVectors(m,I),u.subVectors(R,I),S.cross(u),M.setXYZ(l+0,S.x,S.y,S.z),M.setXYZ(l+1,S.x,S.y,S.z),M.setXYZ(l+2,S.x,S.y,S.z);this.normalizeNormals(),M.needsUpdate=!0}}normalizeNormals(){const n=this.attributes.normal;for(let c=0,M=n.count;c<M;c++)os.fromBufferAttribute(n,c),os.normalize(),n.setXYZ(c,os.x,os.y,os.z)}toNonIndexed(){function n(E,i){const d=E.array,S=E.itemSize,u=E.normalized,l=new d.constructor(i.length*S);let h=0,r=0;for(let o=0,p=i.length;o<p;o++){E.isInterleavedBufferAttribute?h=i[o]*E.data.stride+E.offset:h=i[o]*S;for(let a=0;a<S;a++)l[r++]=d[h++]}return new $r(l,S,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const c=new $n,M=this.index.array,R=this.attributes;for(const E in R){const i=R[E],d=n(i,M);c.setAttribute(E,d)}const I=this.morphAttributes;for(const E in I){const i=[],d=I[E];for(let S=0,u=d.length;S<u;S++){const l=d[S],h=n(l,M);i.push(h)}c.morphAttributes[E]=i}c.morphTargetsRelative=this.morphTargetsRelative;const m=this.groups;for(let E=0,i=m.length;E<i;E++){const d=m[E];c.addGroup(d.start,d.count,d.materialIndex)}return c}toJSON(){const n={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),Object.keys(this.userData).length>0&&(n.userData=this.userData),this.parameters!==void 0){const i=this.parameters;for(const d in i)i[d]!==void 0&&(n[d]=i[d]);return n}n.data={attributes:{}};const c=this.index;c!==null&&(n.data.index={type:c.array.constructor.name,array:Array.prototype.slice.call(c.array)});const M=this.attributes;for(const i in M){const d=M[i];n.data.attributes[i]=d.toJSON(n.data)}const R={};let I=!1;for(const i in this.morphAttributes){const d=this.morphAttributes[i],S=[];for(let u=0,l=d.length;u<l;u++){const h=d[u];S.push(h.toJSON(n.data))}S.length>0&&(R[i]=S,I=!0)}I&&(n.data.morphAttributes=R,n.data.morphTargetsRelative=this.morphTargetsRelative);const m=this.groups;m.length>0&&(n.data.groups=JSON.parse(JSON.stringify(m)));const E=this.boundingSphere;return E!==null&&(n.data.boundingSphere=E.toJSON()),n}clone(){return new this.constructor().copy(this)}copy(n){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const c={};this.name=n.name;const M=n.index;M!==null&&this.setIndex(M.clone());const R=n.attributes;for(const d in R){const S=R[d];this.setAttribute(d,S.clone(c))}const I=n.morphAttributes;for(const d in I){const S=[],u=I[d];for(let l=0,h=u.length;l<h;l++)S.push(u[l].clone(c));this.morphAttributes[d]=S}this.morphTargetsRelative=n.morphTargetsRelative;const m=n.groups;for(let d=0,S=m.length;d<S;d++){const u=m[d];this.addGroup(u.start,u.count,u.materialIndex)}const E=n.boundingBox;E!==null&&(this.boundingBox=E.clone());const i=n.boundingSphere;return i!==null&&(this.boundingSphere=i.clone()),this.drawRange.start=n.drawRange.start,this.drawRange.count=n.drawRange.count,this.userData=n.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const WR=new ei,Eh=new tg,jv=new _f,XR=new wt,qv=new wt,tm=new wt,em=new wt,NS=new wt,im=new wt,HR=new wt,sm=new wt;class fi extends Vi{constructor(n=new $n,c=new Hr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=n,this.material=c,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(n,c){return super.copy(n,c),n.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=n.morphTargetInfluences.slice()),n.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},n.morphTargetDictionary)),this.material=Array.isArray(n.material)?n.material.slice():n.material,this.geometry=n.geometry,this}updateMorphTargets(){const c=this.geometry.morphAttributes,M=Object.keys(c);if(M.length>0){const R=c[M[0]];if(R!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let I=0,m=R.length;I<m;I++){const E=R[I].name||String(I);this.morphTargetInfluences.push(0),this.morphTargetDictionary[E]=I}}}}getVertexPosition(n,c){const M=this.geometry,R=M.attributes.position,I=M.morphAttributes.position,m=M.morphTargetsRelative;c.fromBufferAttribute(R,n);const E=this.morphTargetInfluences;if(I&&E){im.set(0,0,0);for(let i=0,d=I.length;i<d;i++){const S=E[i],u=I[i];S!==0&&(NS.fromBufferAttribute(u,n),m?im.addScaledVector(NS,S):im.addScaledVector(NS.sub(c),S))}c.add(im)}return c}raycast(n,c){const M=this.geometry,R=this.material,I=this.matrixWorld;R!==void 0&&(M.boundingSphere===null&&M.computeBoundingSphere(),jv.copy(M.boundingSphere),jv.applyMatrix4(I),Eh.copy(n.ray).recast(n.near),!(jv.containsPoint(Eh.origin)===!1&&(Eh.intersectSphere(jv,XR)===null||Eh.origin.distanceToSquared(XR)>(n.far-n.near)**2))&&(WR.copy(I).invert(),Eh.copy(n.ray).applyMatrix4(WR),!(M.boundingBox!==null&&Eh.intersectsBox(M.boundingBox)===!1)&&this._computeIntersections(n,c,Eh)))}_computeIntersections(n,c,M){let R;const I=this.geometry,m=this.material,E=I.index,i=I.attributes.position,d=I.attributes.uv,S=I.attributes.uv1,u=I.attributes.normal,l=I.groups,h=I.drawRange;if(E!==null)if(Array.isArray(m))for(let r=0,o=l.length;r<o;r++){const p=l[r],a=m[p.materialIndex],v=Math.max(p.start,h.start),x=Math.min(E.count,Math.min(p.start+p.count,h.start+h.count));for(let g=v,y=x;g<y;g+=3){const T=E.getX(g),P=E.getX(g+1),A=E.getX(g+2);R=nm(this,a,n,M,d,S,u,T,P,A),R&&(R.faceIndex=Math.floor(g/3),R.face.materialIndex=p.materialIndex,c.push(R))}}else{const r=Math.max(0,h.start),o=Math.min(E.count,h.start+h.count);for(let p=r,a=o;p<a;p+=3){const v=E.getX(p),x=E.getX(p+1),g=E.getX(p+2);R=nm(this,m,n,M,d,S,u,v,x,g),R&&(R.faceIndex=Math.floor(p/3),c.push(R))}}else if(i!==void 0)if(Array.isArray(m))for(let r=0,o=l.length;r<o;r++){const p=l[r],a=m[p.materialIndex],v=Math.max(p.start,h.start),x=Math.min(i.count,Math.min(p.start+p.count,h.start+h.count));for(let g=v,y=x;g<y;g+=3){const T=g,P=g+1,A=g+2;R=nm(this,a,n,M,d,S,u,T,P,A),R&&(R.faceIndex=Math.floor(g/3),R.face.materialIndex=p.materialIndex,c.push(R))}}else{const r=Math.max(0,h.start),o=Math.min(i.count,h.start+h.count);for(let p=r,a=o;p<a;p+=3){const v=p,x=p+1,g=p+2;R=nm(this,m,n,M,d,S,u,v,x,g),R&&(R.faceIndex=Math.floor(p/3),c.push(R))}}}}function Sit(L,n,c,M,R,I,m,E){let i;if(n.side===nn?i=M.intersectTriangle(m,I,R,!0,E):i=M.intersectTriangle(R,I,m,n.side===Ia,E),i===null)return null;sm.copy(E),sm.applyMatrix4(L.matrixWorld);const d=c.ray.origin.distanceTo(sm);return d<c.near||d>c.far?null:{distance:d,point:sm.clone(),object:L}}function nm(L,n,c,M,R,I,m,E,i,d){L.getVertexPosition(E,qv),L.getVertexPosition(i,tm),L.getVertexPosition(d,em);const S=Sit(L,n,c,M,qv,tm,em,HR);if(S){const u=new wt;pr.getBarycoord(HR,qv,tm,em,u),R&&(S.uv=pr.getInterpolatedAttribute(R,E,i,d,u,new Ve)),I&&(S.uv1=pr.getInterpolatedAttribute(I,E,i,d,u,new Ve)),m&&(S.normal=pr.getInterpolatedAttribute(m,E,i,d,u,new wt),S.normal.dot(M.direction)>0&&S.normal.multiplyScalar(-1));const l={a:E,b:i,c:d,normal:new wt,materialIndex:0};pr.getNormal(qv,tm,em,l.normal),S.face=l,S.barycoord=u}return S}class Zf extends $n{constructor(n=1,c=1,M=1,R=1,I=1,m=1){super(),this.type="BoxGeometry",this.parameters={width:n,height:c,depth:M,widthSegments:R,heightSegments:I,depthSegments:m};const E=this;R=Math.floor(R),I=Math.floor(I),m=Math.floor(m);const i=[],d=[],S=[],u=[];let l=0,h=0;r("z","y","x",-1,-1,M,c,n,m,I,0),r("z","y","x",1,-1,M,c,-n,m,I,1),r("x","z","y",1,1,n,M,c,R,m,2),r("x","z","y",1,-1,n,M,-c,R,m,3),r("x","y","z",1,-1,n,c,M,R,I,4),r("x","y","z",-1,-1,n,c,-M,R,I,5),this.setIndex(i),this.setAttribute("position",new hs(d,3)),this.setAttribute("normal",new hs(S,3)),this.setAttribute("uv",new hs(u,2));function r(o,p,a,v,x,g,y,T,P,A,b){const O=g/P,D=y/A,B=g/2,G=y/2,V=T/2,k=P+1,U=A+1;let W=0,X=0;const _=new wt;for(let Q=0;Q<U;Q++){const j=Q*D-G;for(let it=0;it<k;it++){const K=it*O-B;_[o]=K*v,_[p]=j*x,_[a]=V,d.push(_.x,_.y,_.z),_[o]=0,_[p]=0,_[a]=T>0?1:-1,S.push(_.x,_.y,_.z),u.push(it/P),u.push(1-Q/A),W+=1}}for(let Q=0;Q<A;Q++)for(let j=0;j<P;j++){const it=l+j+k*Q,K=l+j+k*(Q+1),J=l+(j+1)+k*(Q+1),Y=l+(j+1)+k*Q;i.push(it,K,Y),i.push(K,J,Y),X+=6}E.addGroup(h,X,b),h+=X,l+=W}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new Zf(n.width,n.height,n.depth,n.widthSegments,n.heightSegments,n.depthSegments)}}function Eu(L){const n={};for(const c in L){n[c]={};for(const M in L[c]){const R=L[c][M];R&&(R.isColor||R.isMatrix3||R.isMatrix4||R.isVector2||R.isVector3||R.isVector4||R.isTexture||R.isQuaternion)?R.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),n[c][M]=null):n[c][M]=R.clone():Array.isArray(R)?n[c][M]=R.slice():n[c][M]=R}}return n}function Vs(L){const n={};for(let c=0;c<L.length;c++){const M=Eu(L[c]);for(const R in M)n[R]=M[R]}return n}function Tit(L){const n=[];for(let c=0;c<L.length;c++)n.push(L[c].clone());return n}function zO(L){const n=L.getRenderTarget();return n===null?L.outputColorSpace:n.isXRRenderTarget===!0?n.texture.colorSpace:We.workingColorSpace}const Cit={clone:Eu,merge:Vs};var Mit=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Eit=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Zr extends _r{constructor(n){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Mit,this.fragmentShader=Eit,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,n!==void 0&&this.setValues(n)}copy(n){return super.copy(n),this.fragmentShader=n.fragmentShader,this.vertexShader=n.vertexShader,this.uniforms=Eu(n.uniforms),this.uniformsGroups=Tit(n.uniformsGroups),this.defines=Object.assign({},n.defines),this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.fog=n.fog,this.lights=n.lights,this.clipping=n.clipping,this.extensions=Object.assign({},n.extensions),this.glslVersion=n.glslVersion,this}toJSON(n){const c=super.toJSON(n);c.glslVersion=this.glslVersion,c.uniforms={};for(const R in this.uniforms){const m=this.uniforms[R].value;m&&m.isTexture?c.uniforms[R]={type:"t",value:m.toJSON(n).uuid}:m&&m.isColor?c.uniforms[R]={type:"c",value:m.getHex()}:m&&m.isVector2?c.uniforms[R]={type:"v2",value:m.toArray()}:m&&m.isVector3?c.uniforms[R]={type:"v3",value:m.toArray()}:m&&m.isVector4?c.uniforms[R]={type:"v4",value:m.toArray()}:m&&m.isMatrix3?c.uniforms[R]={type:"m3",value:m.toArray()}:m&&m.isMatrix4?c.uniforms[R]={type:"m4",value:m.toArray()}:c.uniforms[R]={value:m}}Object.keys(this.defines).length>0&&(c.defines=this.defines),c.vertexShader=this.vertexShader,c.fragmentShader=this.fragmentShader,c.lights=this.lights,c.clipping=this.clipping;const M={};for(const R in this.extensions)this.extensions[R]===!0&&(M[R]=!0);return Object.keys(M).length>0&&(c.extensions=M),c}}class WO extends Vi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ei,this.projectionMatrix=new ei,this.projectionMatrixInverse=new ei,this.coordinateSystem=Oa}copy(n,c){return super.copy(n,c),this.matrixWorldInverse.copy(n.matrixWorldInverse),this.projectionMatrix.copy(n.projectionMatrix),this.projectionMatrixInverse.copy(n.projectionMatrixInverse),this.coordinateSystem=n.coordinateSystem,this}getWorldDirection(n){return super.getWorldDirection(n).negate()}updateMatrixWorld(n){super.updateMatrixWorld(n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(n,c){super.updateWorldMatrix(n,c),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const To=new wt,YR=new Ve,$R=new Ve;class zs extends WO{constructor(n=50,c=1,M=.1,R=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=n,this.zoom=1,this.near=M,this.far=R,this.focus=10,this.aspect=c,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(n,c){return super.copy(n,c),this.fov=n.fov,this.zoom=n.zoom,this.near=n.near,this.far=n.far,this.focus=n.focus,this.aspect=n.aspect,this.view=n.view===null?null:Object.assign({},n.view),this.filmGauge=n.filmGauge,this.filmOffset=n.filmOffset,this}setFocalLength(n){const c=.5*this.getFilmHeight()/n;this.fov=Im*2*Math.atan(c),this.updateProjectionMatrix()}getFocalLength(){const n=Math.tan(vS*.5*this.fov);return .5*this.getFilmHeight()/n}getEffectiveFOV(){return Im*2*Math.atan(Math.tan(vS*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(n,c,M){To.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),c.set(To.x,To.y).multiplyScalar(-n/To.z),To.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),M.set(To.x,To.y).multiplyScalar(-n/To.z)}getViewSize(n,c){return this.getViewBounds(n,YR,$R),c.subVectors($R,YR)}setViewOffset(n,c,M,R,I,m){this.aspect=n/c,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=c,this.view.offsetX=M,this.view.offsetY=R,this.view.width=I,this.view.height=m,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const n=this.near;let c=n*Math.tan(vS*.5*this.fov)/this.zoom,M=2*c,R=this.aspect*M,I=-.5*R;const m=this.view;if(this.view!==null&&this.view.enabled){const i=m.fullWidth,d=m.fullHeight;I+=m.offsetX*R/i,c-=m.offsetY*M/d,R*=m.width/i,M*=m.height/d}const E=this.filmOffset;E!==0&&(I+=n*E/this.getFilmWidth()),this.projectionMatrix.makePerspective(I,I+R,c,c-M,n,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(n){const c=super.toJSON(n);return c.object.fov=this.fov,c.object.zoom=this.zoom,c.object.near=this.near,c.object.far=this.far,c.object.focus=this.focus,c.object.aspect=this.aspect,this.view!==null&&(c.object.view=Object.assign({},this.view)),c.object.filmGauge=this.filmGauge,c.object.filmOffset=this.filmOffset,c}}const su=-90,nu=1;class Pit extends Vi{constructor(n,c,M){super(),this.type="CubeCamera",this.renderTarget=M,this.coordinateSystem=null,this.activeMipmapLevel=0;const R=new zs(su,nu,n,c);R.layers=this.layers,this.add(R);const I=new zs(su,nu,n,c);I.layers=this.layers,this.add(I);const m=new zs(su,nu,n,c);m.layers=this.layers,this.add(m);const E=new zs(su,nu,n,c);E.layers=this.layers,this.add(E);const i=new zs(su,nu,n,c);i.layers=this.layers,this.add(i);const d=new zs(su,nu,n,c);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){const n=this.coordinateSystem,c=this.children.concat(),[M,R,I,m,E,i]=c;for(const d of c)this.remove(d);if(n===Oa)M.up.set(0,1,0),M.lookAt(1,0,0),R.up.set(0,1,0),R.lookAt(-1,0,0),I.up.set(0,0,-1),I.lookAt(0,1,0),m.up.set(0,0,1),m.lookAt(0,-1,0),E.up.set(0,1,0),E.lookAt(0,0,1),i.up.set(0,1,0),i.lookAt(0,0,-1);else if(n===Dm)M.up.set(0,-1,0),M.lookAt(-1,0,0),R.up.set(0,-1,0),R.lookAt(1,0,0),I.up.set(0,0,1),I.lookAt(0,1,0),m.up.set(0,0,-1),m.lookAt(0,-1,0),E.up.set(0,-1,0),E.lookAt(0,0,1),i.up.set(0,-1,0),i.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+n);for(const d of c)this.add(d),d.updateMatrixWorld()}update(n,c){this.parent===null&&this.updateMatrixWorld();const{renderTarget:M,activeMipmapLevel:R}=this;this.coordinateSystem!==n.coordinateSystem&&(this.coordinateSystem=n.coordinateSystem,this.updateCoordinateSystem());const[I,m,E,i,d,S]=this.children,u=n.getRenderTarget(),l=n.getActiveCubeFace(),h=n.getActiveMipmapLevel(),r=n.xr.enabled;n.xr.enabled=!1;const o=M.texture.generateMipmaps;M.texture.generateMipmaps=!1,n.setRenderTarget(M,0,R),n.render(c,I),n.setRenderTarget(M,1,R),n.render(c,m),n.setRenderTarget(M,2,R),n.render(c,E),n.setRenderTarget(M,3,R),n.render(c,i),n.setRenderTarget(M,4,R),n.render(c,d),M.texture.generateMipmaps=o,n.setRenderTarget(M,5,R),n.render(c,S),n.setRenderTarget(u,l,h),n.xr.enabled=r,M.texture.needsPMREMUpdate=!0}}class XO extends $s{constructor(n=[],c=Tu,M,R,I,m,E,i,d,S){super(n,c,M,R,I,m,E,i,d,S),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(n){this.image=n}}class wit extends Ba{constructor(n=1,c={}){super(n,n,c),this.isWebGLCubeRenderTarget=!0;const M={width:n,height:n,depth:1},R=[M,M,M,M,M,M];this.texture=new XO(R),this._setTextureOptions(c),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(n,c){this.texture.type=c.type,this.texture.colorSpace=c.colorSpace,this.texture.generateMipmaps=c.generateMipmaps,this.texture.minFilter=c.minFilter,this.texture.magFilter=c.magFilter;const M={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},R=new Zf(5,5,5),I=new Zr({name:"CubemapFromEquirect",uniforms:Eu(M.uniforms),vertexShader:M.vertexShader,fragmentShader:M.fragmentShader,side:nn,blending:Ao});I.uniforms.tEquirect.value=c;const m=new fi(R,I),E=c.minFilter;return c.minFilter===Nh&&(c.minFilter=Yr),new Pit(1,10,this).update(n,m),c.minFilter=E,m.geometry.dispose(),m.material.dispose(),this}clear(n,c=!0,M=!0,R=!0){const I=n.getRenderTarget();for(let m=0;m<6;m++)n.setRenderTarget(this,m),n.clear(c,M,R);n.setRenderTarget(I)}}class Gh extends Vi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const bit={type:"move"};class GS{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Gh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Gh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new wt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new wt),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Gh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new wt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new wt),this._grip}dispatchEvent(n){return this._targetRay!==null&&this._targetRay.dispatchEvent(n),this._grip!==null&&this._grip.dispatchEvent(n),this._hand!==null&&this._hand.dispatchEvent(n),this}connect(n){if(n&&n.hand){const c=this._hand;if(c)for(const M of n.hand.values())this._getHandJoint(c,M)}return this.dispatchEvent({type:"connected",data:n}),this}disconnect(n){return this.dispatchEvent({type:"disconnected",data:n}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(n,c,M){let R=null,I=null,m=null;const E=this._targetRay,i=this._grip,d=this._hand;if(n&&c.session.visibilityState!=="visible-blurred"){if(d&&n.hand){m=!0;for(const o of n.hand.values()){const p=c.getJointPose(o,M),a=this._getHandJoint(d,o);p!==null&&(a.matrix.fromArray(p.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,a.jointRadius=p.radius),a.visible=p!==null}const S=d.joints["index-finger-tip"],u=d.joints["thumb-tip"],l=S.position.distanceTo(u.position),h=.02,r=.005;d.inputState.pinching&&l>h+r?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:n.handedness,target:this})):!d.inputState.pinching&&l<=h-r&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:n.handedness,target:this}))}else i!==null&&n.gripSpace&&(I=c.getPose(n.gripSpace,M),I!==null&&(i.matrix.fromArray(I.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,I.linearVelocity?(i.hasLinearVelocity=!0,i.linearVelocity.copy(I.linearVelocity)):i.hasLinearVelocity=!1,I.angularVelocity?(i.hasAngularVelocity=!0,i.angularVelocity.copy(I.angularVelocity)):i.hasAngularVelocity=!1));E!==null&&(R=c.getPose(n.targetRaySpace,M),R===null&&I!==null&&(R=I),R!==null&&(E.matrix.fromArray(R.transform.matrix),E.matrix.decompose(E.position,E.rotation,E.scale),E.matrixWorldNeedsUpdate=!0,R.linearVelocity?(E.hasLinearVelocity=!0,E.linearVelocity.copy(R.linearVelocity)):E.hasLinearVelocity=!1,R.angularVelocity?(E.hasAngularVelocity=!0,E.angularVelocity.copy(R.angularVelocity)):E.hasAngularVelocity=!1,this.dispatchEvent(bit)))}return E!==null&&(E.visible=R!==null),i!==null&&(i.visible=I!==null),d!==null&&(d.visible=m!==null),this}_getHandJoint(n,c){if(n.joints[c.jointName]===void 0){const M=new Gh;M.matrixAutoUpdate=!1,M.visible=!1,n.joints[c.jointName]=M,n.add(M)}return n.joints[c.jointName]}}class vC{constructor(n,c=1,M=1e3){this.isFog=!0,this.name="",this.color=new Ae(n),this.near=c,this.far=M}clone(){return new vC(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class HO extends Vi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Yn,this.environmentIntensity=1,this.environmentRotation=new Yn,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(n,c){return super.copy(n,c),n.background!==null&&(this.background=n.background.clone()),n.environment!==null&&(this.environment=n.environment.clone()),n.fog!==null&&(this.fog=n.fog.clone()),this.backgroundBlurriness=n.backgroundBlurriness,this.backgroundIntensity=n.backgroundIntensity,this.backgroundRotation.copy(n.backgroundRotation),this.environmentIntensity=n.environmentIntensity,this.environmentRotation.copy(n.environmentRotation),n.overrideMaterial!==null&&(this.overrideMaterial=n.overrideMaterial.clone()),this.matrixAutoUpdate=n.matrixAutoUpdate,this}toJSON(n){const c=super.toJSON(n);return this.fog!==null&&(c.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(c.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(c.object.backgroundIntensity=this.backgroundIntensity),c.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(c.object.environmentIntensity=this.environmentIntensity),c.object.environmentRotation=this.environmentRotation.toArray(),c}}const US=new wt,Ait=new wt,Rit=new Oe;class Lh{constructor(n=new wt(1,0,0),c=0){this.isPlane=!0,this.normal=n,this.constant=c}set(n,c){return this.normal.copy(n),this.constant=c,this}setComponents(n,c,M,R){return this.normal.set(n,c,M),this.constant=R,this}setFromNormalAndCoplanarPoint(n,c){return this.normal.copy(n),this.constant=-c.dot(this.normal),this}setFromCoplanarPoints(n,c,M){const R=US.subVectors(M,c).cross(Ait.subVectors(n,c)).normalize();return this.setFromNormalAndCoplanarPoint(R,n),this}copy(n){return this.normal.copy(n.normal),this.constant=n.constant,this}normalize(){const n=1/this.normal.length();return this.normal.multiplyScalar(n),this.constant*=n,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(n){return this.normal.dot(n)+this.constant}distanceToSphere(n){return this.distanceToPoint(n.center)-n.radius}projectPoint(n,c){return c.copy(n).addScaledVector(this.normal,-this.distanceToPoint(n))}intersectLine(n,c){const M=n.delta(US),R=this.normal.dot(M);if(R===0)return this.distanceToPoint(n.start)===0?c.copy(n.start):null;const I=-(n.start.dot(this.normal)+this.constant)/R;return I<0||I>1?null:c.copy(n.start).addScaledVector(M,I)}intersectsLine(n){const c=this.distanceToPoint(n.start),M=this.distanceToPoint(n.end);return c<0&&M>0||M<0&&c>0}intersectsBox(n){return n.intersectsPlane(this)}intersectsSphere(n){return n.intersectsPlane(this)}coplanarPoint(n){return n.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(n,c){const M=c||Rit.getNormalMatrix(n),R=this.coplanarPoint(US).applyMatrix4(n),I=this.normal.applyMatrix3(M).normalize();return this.constant=-R.dot(I),this}translate(n){return this.constant-=n.dot(this.normal),this}equals(n){return n.normal.equals(this.normal)&&n.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ph=new _f,Lit=new Ve(.5,.5),rm=new wt;class mC{constructor(n=new Lh,c=new Lh,M=new Lh,R=new Lh,I=new Lh,m=new Lh){this.planes=[n,c,M,R,I,m]}set(n,c,M,R,I,m){const E=this.planes;return E[0].copy(n),E[1].copy(c),E[2].copy(M),E[3].copy(R),E[4].copy(I),E[5].copy(m),this}copy(n){const c=this.planes;for(let M=0;M<6;M++)c[M].copy(n.planes[M]);return this}setFromProjectionMatrix(n,c=Oa){const M=this.planes,R=n.elements,I=R[0],m=R[1],E=R[2],i=R[3],d=R[4],S=R[5],u=R[6],l=R[7],h=R[8],r=R[9],o=R[10],p=R[11],a=R[12],v=R[13],x=R[14],g=R[15];if(M[0].setComponents(i-I,l-d,p-h,g-a).normalize(),M[1].setComponents(i+I,l+d,p+h,g+a).normalize(),M[2].setComponents(i+m,l+S,p+r,g+v).normalize(),M[3].setComponents(i-m,l-S,p-r,g-v).normalize(),M[4].setComponents(i-E,l-u,p-o,g-x).normalize(),c===Oa)M[5].setComponents(i+E,l+u,p+o,g+x).normalize();else if(c===Dm)M[5].setComponents(E,u,o,x).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+c);return this}intersectsObject(n){if(n.boundingSphere!==void 0)n.boundingSphere===null&&n.computeBoundingSphere(),Ph.copy(n.boundingSphere).applyMatrix4(n.matrixWorld);else{const c=n.geometry;c.boundingSphere===null&&c.computeBoundingSphere(),Ph.copy(c.boundingSphere).applyMatrix4(n.matrixWorld)}return this.intersectsSphere(Ph)}intersectsSprite(n){Ph.center.set(0,0,0);const c=Lit.distanceTo(n.center);return Ph.radius=.7071067811865476+c,Ph.applyMatrix4(n.matrixWorld),this.intersectsSphere(Ph)}intersectsSphere(n){const c=this.planes,M=n.center,R=-n.radius;for(let I=0;I<6;I++)if(c[I].distanceToPoint(M)<R)return!1;return!0}intersectsBox(n){const c=this.planes;for(let M=0;M<6;M++){const R=c[M];if(rm.x=R.normal.x>0?n.max.x:n.min.x,rm.y=R.normal.y>0?n.max.y:n.min.y,rm.z=R.normal.z>0?n.max.z:n.min.z,R.distanceToPoint(rm)<0)return!1}return!0}containsPoint(n){const c=this.planes;for(let M=0;M<6;M++)if(c[M].distanceToPoint(n)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class bm extends _r{constructor(n){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ae(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.linewidth=n.linewidth,this.linecap=n.linecap,this.linejoin=n.linejoin,this.fog=n.fog,this}}const Bm=new wt,Nm=new wt,_R=new ei,Tf=new tg,am=new _f,kS=new wt,ZR=new wt;class Oit extends Vi{constructor(n=new $n,c=new bm){super(),this.isLine=!0,this.type="Line",this.geometry=n,this.material=c,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(n,c){return super.copy(n,c),this.material=Array.isArray(n.material)?n.material.slice():n.material,this.geometry=n.geometry,this}computeLineDistances(){const n=this.geometry;if(n.index===null){const c=n.attributes.position,M=[0];for(let R=1,I=c.count;R<I;R++)Bm.fromBufferAttribute(c,R-1),Nm.fromBufferAttribute(c,R),M[R]=M[R-1],M[R]+=Bm.distanceTo(Nm);n.setAttribute("lineDistance",new hs(M,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(n,c){const M=this.geometry,R=this.matrixWorld,I=n.params.Line.threshold,m=M.drawRange;if(M.boundingSphere===null&&M.computeBoundingSphere(),am.copy(M.boundingSphere),am.applyMatrix4(R),am.radius+=I,n.ray.intersectsSphere(am)===!1)return;_R.copy(R).invert(),Tf.copy(n.ray).applyMatrix4(_R);const E=I/((this.scale.x+this.scale.y+this.scale.z)/3),i=E*E,d=this.isLineSegments?2:1,S=M.index,l=M.attributes.position;if(S!==null){const h=Math.max(0,m.start),r=Math.min(S.count,m.start+m.count);for(let o=h,p=r-1;o<p;o+=d){const a=S.getX(o),v=S.getX(o+1),x=om(this,n,Tf,i,a,v,o);x&&c.push(x)}if(this.isLineLoop){const o=S.getX(r-1),p=S.getX(h),a=om(this,n,Tf,i,o,p,r-1);a&&c.push(a)}}else{const h=Math.max(0,m.start),r=Math.min(l.count,m.start+m.count);for(let o=h,p=r-1;o<p;o+=d){const a=om(this,n,Tf,i,o,o+1,o);a&&c.push(a)}if(this.isLineLoop){const o=om(this,n,Tf,i,r-1,h,r-1);o&&c.push(o)}}}updateMorphTargets(){const c=this.geometry.morphAttributes,M=Object.keys(c);if(M.length>0){const R=c[M[0]];if(R!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let I=0,m=R.length;I<m;I++){const E=R[I].name||String(I);this.morphTargetInfluences.push(0),this.morphTargetDictionary[E]=I}}}}}function om(L,n,c,M,R,I,m){const E=L.geometry.attributes.position;if(Bm.fromBufferAttribute(E,R),Nm.fromBufferAttribute(E,I),c.distanceSqToSegment(Bm,Nm,kS,ZR)>M)return;kS.applyMatrix4(L.matrixWorld);const d=n.ray.origin.distanceTo(kS);if(!(d<n.near||d>n.far))return{distance:d,point:ZR.clone().applyMatrix4(L.matrixWorld),index:m,face:null,faceIndex:null,barycoord:null,object:L}}const KR=new wt,JR=new wt;class QR extends Oit{constructor(n,c){super(n,c),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const n=this.geometry;if(n.index===null){const c=n.attributes.position,M=[];for(let R=0,I=c.count;R<I;R+=2)KR.fromBufferAttribute(c,R),JR.fromBufferAttribute(c,R+1),M[R]=R===0?0:M[R-1],M[R+1]=M[R]+KR.distanceTo(JR);n.setAttribute("lineDistance",new hs(M,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class wf extends _r{constructor(n){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ae(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.alphaMap=n.alphaMap,this.size=n.size,this.sizeAttenuation=n.sizeAttenuation,this.fog=n.fog,this}}const jR=new ei,kT=new tg,hm=new _f,lm=new wt;class VS extends Vi{constructor(n=new $n,c=new wf){super(),this.isPoints=!0,this.type="Points",this.geometry=n,this.material=c,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(n,c){return super.copy(n,c),this.material=Array.isArray(n.material)?n.material.slice():n.material,this.geometry=n.geometry,this}raycast(n,c){const M=this.geometry,R=this.matrixWorld,I=n.params.Points.threshold,m=M.drawRange;if(M.boundingSphere===null&&M.computeBoundingSphere(),hm.copy(M.boundingSphere),hm.applyMatrix4(R),hm.radius+=I,n.ray.intersectsSphere(hm)===!1)return;jR.copy(R).invert(),kT.copy(n.ray).applyMatrix4(jR);const E=I/((this.scale.x+this.scale.y+this.scale.z)/3),i=E*E,d=M.index,u=M.attributes.position;if(d!==null){const l=Math.max(0,m.start),h=Math.min(d.count,m.start+m.count);for(let r=l,o=h;r<o;r++){const p=d.getX(r);lm.fromBufferAttribute(u,p),qR(lm,p,i,R,n,c,this)}}else{const l=Math.max(0,m.start),h=Math.min(u.count,m.start+m.count);for(let r=l,o=h;r<o;r++)lm.fromBufferAttribute(u,r),qR(lm,r,i,R,n,c,this)}}updateMorphTargets(){const c=this.geometry.morphAttributes,M=Object.keys(c);if(M.length>0){const R=c[M[0]];if(R!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let I=0,m=R.length;I<m;I++){const E=R[I].name||String(I);this.morphTargetInfluences.push(0),this.morphTargetDictionary[E]=I}}}}}function qR(L,n,c,M,R,I,m){const E=kT.distanceSqToPoint(L);if(E<c){const i=new wt;kT.closestPointToPoint(L,i),i.applyMatrix4(M);const d=R.ray.origin.distanceTo(i);if(d<R.near||d>R.far)return;I.push({distance:d,distanceToRay:Math.sqrt(E),point:i,index:n,face:null,faceIndex:null,barycoord:null,object:m})}}class YO extends $s{constructor(n,c,M=Xh,R,I,m,E=Xs,i=Xs,d,S=Gf,u=1){if(S!==Gf&&S!==Uf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const l={width:n,height:c,depth:u};super(l,R,I,m,E,i,S,M,d),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(n){return super.copy(n),this.source=new cC(Object.assign({},n.image)),this.compareFunction=n.compareFunction,this}toJSON(n){const c=super.toJSON(n);return this.compareFunction!==null&&(c.compareFunction=this.compareFunction),c}}class Kf extends $n{constructor(n=1,c=1,M=1,R=1){super(),this.type="PlaneGeometry",this.parameters={width:n,height:c,widthSegments:M,heightSegments:R};const I=n/2,m=c/2,E=Math.floor(M),i=Math.floor(R),d=E+1,S=i+1,u=n/E,l=c/i,h=[],r=[],o=[],p=[];for(let a=0;a<S;a++){const v=a*l-m;for(let x=0;x<d;x++){const g=x*u-I;r.push(g,-v,0),o.push(0,0,1),p.push(x/E),p.push(1-a/i)}}for(let a=0;a<i;a++)for(let v=0;v<E;v++){const x=v+d*a,g=v+d*(a+1),y=v+1+d*(a+1),T=v+1+d*a;h.push(x,g,T),h.push(g,y,T)}this.setIndex(h),this.setAttribute("position",new hs(r,3)),this.setAttribute("normal",new hs(o,3)),this.setAttribute("uv",new hs(p,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new Kf(n.width,n.height,n.widthSegments,n.heightSegments)}}class eg extends $n{constructor(n=1,c=32,M=16,R=0,I=Math.PI*2,m=0,E=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:n,widthSegments:c,heightSegments:M,phiStart:R,phiLength:I,thetaStart:m,thetaLength:E},c=Math.max(3,Math.floor(c)),M=Math.max(2,Math.floor(M));const i=Math.min(m+E,Math.PI);let d=0;const S=[],u=new wt,l=new wt,h=[],r=[],o=[],p=[];for(let a=0;a<=M;a++){const v=[],x=a/M;let g=0;a===0&&m===0?g=.5/c:a===M&&i===Math.PI&&(g=-.5/c);for(let y=0;y<=c;y++){const T=y/c;u.x=-n*Math.cos(R+T*I)*Math.sin(m+x*E),u.y=n*Math.cos(m+x*E),u.z=n*Math.sin(R+T*I)*Math.sin(m+x*E),r.push(u.x,u.y,u.z),l.copy(u).normalize(),o.push(l.x,l.y,l.z),p.push(T+g,1-x),v.push(d++)}S.push(v)}for(let a=0;a<M;a++)for(let v=0;v<c;v++){const x=S[a][v+1],g=S[a][v],y=S[a+1][v],T=S[a+1][v+1];(a!==0||m>0)&&h.push(x,g,T),(a!==M-1||i<Math.PI)&&h.push(g,y,T)}this.setIndex(h),this.setAttribute("position",new hs(r,3)),this.setAttribute("normal",new hs(o,3)),this.setAttribute("uv",new hs(p,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new eg(n.radius,n.widthSegments,n.heightSegments,n.phiStart,n.phiLength,n.thetaStart,n.thetaLength)}}class wo extends _r{constructor(n){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ae(16777215),this.specular=new Ae(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fC,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Yn,this.combine=jm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.specular.copy(n.specular),this.shininess=n.shininess,this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.envMapRotation.copy(n.envMapRotation),this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.flatShading=n.flatShading,this.fog=n.fog,this}}class Fit extends _r{constructor(n){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ae(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fC,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Yn,this.combine=jm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.envMapRotation.copy(n.envMapRotation),this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.flatShading=n.flatShading,this.fog=n.fog,this}}class Dit extends _r{constructor(n){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Xet,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(n)}copy(n){return super.copy(n),this.depthPacking=n.depthPacking,this.map=n.map,this.alphaMap=n.alphaMap,this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this}}class Iit extends _r{constructor(n){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(n)}copy(n){return super.copy(n),this.map=n.map,this.alphaMap=n.alphaMap,this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this}}const Of={enabled:!1,files:{},add:function(L,n){this.enabled!==!1&&(this.files[L]=n)},get:function(L){if(this.enabled!==!1)return this.files[L]},remove:function(L){delete this.files[L]},clear:function(){this.files={}}};class $O{constructor(n,c,M){const R=this;let I=!1,m=0,E=0,i;const d=[];this.onStart=void 0,this.onLoad=n,this.onProgress=c,this.onError=M,this.itemStart=function(S){E++,I===!1&&R.onStart!==void 0&&R.onStart(S,m,E),I=!0},this.itemEnd=function(S){m++,R.onProgress!==void 0&&R.onProgress(S,m,E),m===E&&(I=!1,R.onLoad!==void 0&&R.onLoad())},this.itemError=function(S){R.onError!==void 0&&R.onError(S)},this.resolveURL=function(S){return i?i(S):S},this.setURLModifier=function(S){return i=S,this},this.addHandler=function(S,u){return d.push(S,u),this},this.removeHandler=function(S){const u=d.indexOf(S);return u!==-1&&d.splice(u,2),this},this.getHandler=function(S){for(let u=0,l=d.length;u<l;u+=2){const h=d[u],r=d[u+1];if(h.global&&(h.lastIndex=0),h.test(S))return r}return null}}}const _O=new $O;class Nu{constructor(n){this.manager=n!==void 0?n:_O,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(n,c){const M=this;return new Promise(function(R,I){M.load(n,R,c,I)})}parse(){}setCrossOrigin(n){return this.crossOrigin=n,this}setWithCredentials(n){return this.withCredentials=n,this}setPath(n){return this.path=n,this}setResourcePath(n){return this.resourcePath=n,this}setRequestHeader(n){return this.requestHeader=n,this}}Nu.DEFAULT_MATERIAL_NAME="__DEFAULT";const wa={};class Bit extends Error{constructor(n,c){super(n),this.response=c}}class ZO extends Nu{constructor(n){super(n),this.mimeType="",this.responseType=""}load(n,c,M,R){n===void 0&&(n=""),this.path!==void 0&&(n=this.path+n),n=this.manager.resolveURL(n);const I=Of.get(`file:${n}`);if(I!==void 0)return this.manager.itemStart(n),setTimeout(()=>{c&&c(I),this.manager.itemEnd(n)},0),I;if(wa[n]!==void 0){wa[n].push({onLoad:c,onProgress:M,onError:R});return}wa[n]=[],wa[n].push({onLoad:c,onProgress:M,onError:R});const m=new Request(n,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),E=this.mimeType,i=this.responseType;fetch(m).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const S=wa[n],u=d.body.getReader(),l=d.headers.get("X-File-Size")||d.headers.get("Content-Length"),h=l?parseInt(l):0,r=h!==0;let o=0;const p=new ReadableStream({start(a){v();function v(){u.read().then(({done:x,value:g})=>{if(x)a.close();else{o+=g.byteLength;const y=new ProgressEvent("progress",{lengthComputable:r,loaded:o,total:h});for(let T=0,P=S.length;T<P;T++){const A=S[T];A.onProgress&&A.onProgress(y)}a.enqueue(g),v()}},x=>{a.error(x)})}}});return new Response(p)}else throw new Bit(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(i){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(S=>new DOMParser().parseFromString(S,E));case"json":return d.json();default:if(E==="")return d.text();{const u=/charset="?([^;"\s]*)"?/i.exec(E),l=u&&u[1]?u[1].toLowerCase():void 0,h=new TextDecoder(l);return d.arrayBuffer().then(r=>h.decode(r))}}}).then(d=>{Of.add(`file:${n}`,d);const S=wa[n];delete wa[n];for(let u=0,l=S.length;u<l;u++){const h=S[u];h.onLoad&&h.onLoad(d)}}).catch(d=>{const S=wa[n];if(S===void 0)throw this.manager.itemError(n),d;delete wa[n];for(let u=0,l=S.length;u<l;u++){const h=S[u];h.onError&&h.onError(d)}this.manager.itemError(n)}).finally(()=>{this.manager.itemEnd(n)}),this.manager.itemStart(n)}setResponseType(n){return this.responseType=n,this}setMimeType(n){return this.mimeType=n,this}}const ru=new WeakMap;class Nit extends Nu{constructor(n){super(n)}load(n,c,M,R){this.path!==void 0&&(n=this.path+n),n=this.manager.resolveURL(n);const I=this,m=Of.get(`image:${n}`);if(m!==void 0){if(m.complete===!0)I.manager.itemStart(n),setTimeout(function(){c&&c(m),I.manager.itemEnd(n)},0);else{let u=ru.get(m);u===void 0&&(u=[],ru.set(m,u)),u.push({onLoad:c,onError:R})}return m}const E=kf("img");function i(){S(),c&&c(this);const u=ru.get(this)||[];for(let l=0;l<u.length;l++){const h=u[l];h.onLoad&&h.onLoad(this)}ru.delete(this),I.manager.itemEnd(n)}function d(u){S(),R&&R(u),Of.remove(`image:${n}`);const l=ru.get(this)||[];for(let h=0;h<l.length;h++){const r=l[h];r.onError&&r.onError(u)}ru.delete(this),I.manager.itemError(n),I.manager.itemEnd(n)}function S(){E.removeEventListener("load",i,!1),E.removeEventListener("error",d,!1)}return E.addEventListener("load",i,!1),E.addEventListener("error",d,!1),n.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(E.crossOrigin=this.crossOrigin),Of.add(`image:${n}`,E),I.manager.itemStart(n),E.src=n,E}}class Git extends Nu{constructor(n){super(n)}load(n,c,M,R){const I=new $s,m=new Nit(this.manager);return m.setCrossOrigin(this.crossOrigin),m.setPath(this.path),m.load(n,function(E){I.image=E,I.needsUpdate=!0,c!==void 0&&c(I)},M,R),I}}class Oo extends Vi{constructor(n,c=1){super(),this.isLight=!0,this.type="Light",this.color=new Ae(n),this.intensity=c}dispose(){}copy(n,c){return super.copy(n,c),this.color.copy(n.color),this.intensity=n.intensity,this}toJSON(n){const c=super.toJSON(n);return c.object.color=this.color.getHex(),c.object.intensity=this.intensity,this.groundColor!==void 0&&(c.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(c.object.distance=this.distance),this.angle!==void 0&&(c.object.angle=this.angle),this.decay!==void 0&&(c.object.decay=this.decay),this.penumbra!==void 0&&(c.object.penumbra=this.penumbra),this.shadow!==void 0&&(c.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(c.object.target=this.target.uuid),c}}class Uit extends Oo{constructor(n,c,M){super(n,M),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Vi.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ae(c)}copy(n,c){return super.copy(n,c),this.groundColor.copy(n.groundColor),this}}const zS=new ei,tL=new wt,eL=new wt;class gC{constructor(n){this.camera=n,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ve(512,512),this.mapType=Hn,this.map=null,this.mapPass=null,this.matrix=new ei,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new mC,this._frameExtents=new Ve(1,1),this._viewportCount=1,this._viewports=[new si(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(n){const c=this.camera,M=this.matrix;tL.setFromMatrixPosition(n.matrixWorld),c.position.copy(tL),eL.setFromMatrixPosition(n.target.matrixWorld),c.lookAt(eL),c.updateMatrixWorld(),zS.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse),this._frustum.setFromProjectionMatrix(zS),M.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),M.multiply(zS)}getViewport(n){return this._viewports[n]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(n){return this.camera=n.camera.clone(),this.intensity=n.intensity,this.bias=n.bias,this.radius=n.radius,this.autoUpdate=n.autoUpdate,this.needsUpdate=n.needsUpdate,this.normalBias=n.normalBias,this.blurSamples=n.blurSamples,this.mapSize.copy(n.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const n={};return this.intensity!==1&&(n.intensity=this.intensity),this.bias!==0&&(n.bias=this.bias),this.normalBias!==0&&(n.normalBias=this.normalBias),this.radius!==1&&(n.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(n.mapSize=this.mapSize.toArray()),n.camera=this.camera.toJSON(!1).object,delete n.camera.matrix,n}}class kit extends gC{constructor(){super(new zs(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(n){const c=this.camera,M=Im*2*n.angle*this.focus,R=this.mapSize.width/this.mapSize.height*this.aspect,I=n.distance||c.far;(M!==c.fov||R!==c.aspect||I!==c.far)&&(c.fov=M,c.aspect=R,c.far=I,c.updateProjectionMatrix()),super.updateMatrices(n)}copy(n){return super.copy(n),this.focus=n.focus,this}}class wh extends Oo{constructor(n,c,M=0,R=Math.PI/3,I=0,m=2){super(n,c),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Vi.DEFAULT_UP),this.updateMatrix(),this.target=new Vi,this.distance=M,this.angle=R,this.penumbra=I,this.decay=m,this.map=null,this.shadow=new kit}get power(){return this.intensity*Math.PI}set power(n){this.intensity=n/Math.PI}dispose(){this.shadow.dispose()}copy(n,c){return super.copy(n,c),this.distance=n.distance,this.angle=n.angle,this.penumbra=n.penumbra,this.decay=n.decay,this.target=n.target.clone(),this.shadow=n.shadow.clone(),this}}const iL=new ei,Cf=new wt,WS=new wt;class Vit extends gC{constructor(){super(new zs(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ve(4,2),this._viewportCount=6,this._viewports=[new si(2,1,1,1),new si(0,1,1,1),new si(3,1,1,1),new si(1,1,1,1),new si(3,0,1,1),new si(1,0,1,1)],this._cubeDirections=[new wt(1,0,0),new wt(-1,0,0),new wt(0,0,1),new wt(0,0,-1),new wt(0,1,0),new wt(0,-1,0)],this._cubeUps=[new wt(0,1,0),new wt(0,1,0),new wt(0,1,0),new wt(0,1,0),new wt(0,0,1),new wt(0,0,-1)]}updateMatrices(n,c=0){const M=this.camera,R=this.matrix,I=n.distance||M.far;I!==M.far&&(M.far=I,M.updateProjectionMatrix()),Cf.setFromMatrixPosition(n.matrixWorld),M.position.copy(Cf),WS.copy(M.position),WS.add(this._cubeDirections[c]),M.up.copy(this._cubeUps[c]),M.lookAt(WS),M.updateMatrixWorld(),R.makeTranslation(-Cf.x,-Cf.y,-Cf.z),iL.multiplyMatrices(M.projectionMatrix,M.matrixWorldInverse),this._frustum.setFromProjectionMatrix(iL)}}class Mo extends Oo{constructor(n,c,M=0,R=2){super(n,c),this.isPointLight=!0,this.type="PointLight",this.distance=M,this.decay=R,this.shadow=new Vit}get power(){return this.intensity*4*Math.PI}set power(n){this.intensity=n/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(n,c){return super.copy(n,c),this.distance=n.distance,this.decay=n.decay,this.shadow=n.shadow.clone(),this}}class Gm extends WO{constructor(n=-1,c=1,M=1,R=-1,I=.1,m=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=n,this.right=c,this.top=M,this.bottom=R,this.near=I,this.far=m,this.updateProjectionMatrix()}copy(n,c){return super.copy(n,c),this.left=n.left,this.right=n.right,this.top=n.top,this.bottom=n.bottom,this.near=n.near,this.far=n.far,this.zoom=n.zoom,this.view=n.view===null?null:Object.assign({},n.view),this}setViewOffset(n,c,M,R,I,m){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=c,this.view.offsetX=M,this.view.offsetY=R,this.view.width=I,this.view.height=m,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const n=(this.right-this.left)/(2*this.zoom),c=(this.top-this.bottom)/(2*this.zoom),M=(this.right+this.left)/2,R=(this.top+this.bottom)/2;let I=M-n,m=M+n,E=R+c,i=R-c;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,S=(this.top-this.bottom)/this.view.fullHeight/this.zoom;I+=d*this.view.offsetX,m=I+d*this.view.width,E-=S*this.view.offsetY,i=E-S*this.view.height}this.projectionMatrix.makeOrthographic(I,m,E,i,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(n){const c=super.toJSON(n);return c.object.zoom=this.zoom,c.object.left=this.left,c.object.right=this.right,c.object.top=this.top,c.object.bottom=this.bottom,c.object.near=this.near,c.object.far=this.far,this.view!==null&&(c.object.view=Object.assign({},this.view)),c}}class zit extends gC{constructor(){super(new Gm(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class bf extends Oo{constructor(n,c){super(n,c),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Vi.DEFAULT_UP),this.updateMatrix(),this.target=new Vi,this.shadow=new zit}dispose(){this.shadow.dispose()}copy(n){return super.copy(n),this.target=n.target.clone(),this.shadow=n.shadow.clone(),this}}class KO extends Oo{constructor(n,c){super(n,c),this.isAmbientLight=!0,this.type="AmbientLight"}}class Wit{static extractUrlBase(n){const c=n.lastIndexOf("/");return c===-1?"./":n.slice(0,c+1)}static resolveURL(n,c){return typeof n!="string"||n===""?"":(/^https?:\/\//i.test(c)&&/^\//.test(n)&&(c=c.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(n)||/^data:.*,.*$/i.test(n)||/^blob:.*$/i.test(n)?n:c+n)}}class Xit extends zs{constructor(n=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=n}}let Hit=class{constructor(n=!0){this.autoStart=n,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let n=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const c=performance.now();n=(c-this.oldTime)/1e3,this.oldTime=c,this.elapsedTime+=n}return n}};const sL=new ei;class Yit{constructor(n,c,M=0,R=1/0){this.ray=new tg(n,c),this.near=M,this.far=R,this.camera=null,this.layers=new pC,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(n,c){this.ray.set(n,c)}setFromCamera(n,c){c.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(c.matrixWorld),this.ray.direction.set(n.x,n.y,.5).unproject(c).sub(this.ray.origin).normalize(),this.camera=c):c.isOrthographicCamera?(this.ray.origin.set(n.x,n.y,(c.near+c.far)/(c.near-c.far)).unproject(c),this.ray.direction.set(0,0,-1).transformDirection(c.matrixWorld),this.camera=c):console.error("THREE.Raycaster: Unsupported camera type: "+c.type)}setFromXRController(n){return sL.identity().extractRotation(n.matrixWorld),this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(sL),this}intersectObject(n,c=!0,M=[]){return VT(n,this,M,c),M.sort(nL),M}intersectObjects(n,c=!0,M=[]){for(let R=0,I=n.length;R<I;R++)VT(n[R],this,M,c);return M.sort(nL),M}}function nL(L,n){return L.distance-n.distance}function VT(L,n,c,M){let R=!0;if(L.layers.test(n.layers)&&L.raycast(n,c)===!1&&(R=!1),R===!0&&M===!0){const I=L.children;for(let m=0,E=I.length;m<E;m++)VT(I[m],n,c,!0)}}function rL(L,n,c,M){const R=$it(M);switch(c){case LO:return L*n;case FO:return L*n/R.components*R.byteLength;case lC:return L*n/R.components*R.byteLength;case DO:return L*n*2/R.components*R.byteLength;case uC:return L*n*2/R.components*R.byteLength;case OO:return L*n*3/R.components*R.byteLength;case Tn:return L*n*4/R.components*R.byteLength;case dC:return L*n*4/R.components*R.byteLength;case Cm:case Mm:return Math.floor((L+3)/4)*Math.floor((n+3)/4)*8;case Em:case Pm:return Math.floor((L+3)/4)*Math.floor((n+3)/4)*16;case pT:case mT:return Math.max(L,16)*Math.max(n,8)/4;case cT:case vT:return Math.max(L,8)*Math.max(n,8)/2;case gT:case xT:return Math.floor((L+3)/4)*Math.floor((n+3)/4)*8;case yT:return Math.floor((L+3)/4)*Math.floor((n+3)/4)*16;case ST:return Math.floor((L+3)/4)*Math.floor((n+3)/4)*16;case TT:return Math.floor((L+4)/5)*Math.floor((n+3)/4)*16;case CT:return Math.floor((L+4)/5)*Math.floor((n+4)/5)*16;case MT:return Math.floor((L+5)/6)*Math.floor((n+4)/5)*16;case ET:return Math.floor((L+5)/6)*Math.floor((n+5)/6)*16;case PT:return Math.floor((L+7)/8)*Math.floor((n+4)/5)*16;case wT:return Math.floor((L+7)/8)*Math.floor((n+5)/6)*16;case bT:return Math.floor((L+7)/8)*Math.floor((n+7)/8)*16;case AT:return Math.floor((L+9)/10)*Math.floor((n+4)/5)*16;case RT:return Math.floor((L+9)/10)*Math.floor((n+5)/6)*16;case LT:return Math.floor((L+9)/10)*Math.floor((n+7)/8)*16;case OT:return Math.floor((L+9)/10)*Math.floor((n+9)/10)*16;case FT:return Math.floor((L+11)/12)*Math.floor((n+9)/10)*16;case DT:return Math.floor((L+11)/12)*Math.floor((n+11)/12)*16;case wm:case IT:case BT:return Math.ceil(L/4)*Math.ceil(n/4)*16;case IO:case NT:return Math.ceil(L/4)*Math.ceil(n/4)*8;case GT:case UT:return Math.ceil(L/4)*Math.ceil(n/4)*16}throw new Error(`Unable to determine texture byte length for ${c} format.`)}function $it(L){switch(L){case Hn:case bO:return{byteLength:1,components:1};case Bf:case AO:case Hf:return{byteLength:2,components:1};case oC:case hC:return{byteLength:2,components:4};case Xh:case aC:case La:return{byteLength:4,components:1};case RO:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${L}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:rC}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=rC);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function JO(){let L=null,n=!1,c=null,M=null;function R(I,m){c(I,m),M=L.requestAnimationFrame(R)}return{start:function(){n!==!0&&c!==null&&(M=L.requestAnimationFrame(R),n=!0)},stop:function(){L.cancelAnimationFrame(M),n=!1},setAnimationLoop:function(I){c=I},setContext:function(I){L=I}}}function _it(L){const n=new WeakMap;function c(E,i){const d=E.array,S=E.usage,u=d.byteLength,l=L.createBuffer();L.bindBuffer(i,l),L.bufferData(i,d,S),E.onUploadCallback();let h;if(d instanceof Float32Array)h=L.FLOAT;else if(typeof Float16Array<"u"&&d instanceof Float16Array)h=L.HALF_FLOAT;else if(d instanceof Uint16Array)E.isFloat16BufferAttribute?h=L.HALF_FLOAT:h=L.UNSIGNED_SHORT;else if(d instanceof Int16Array)h=L.SHORT;else if(d instanceof Uint32Array)h=L.UNSIGNED_INT;else if(d instanceof Int32Array)h=L.INT;else if(d instanceof Int8Array)h=L.BYTE;else if(d instanceof Uint8Array)h=L.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)h=L.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:l,type:h,bytesPerElement:d.BYTES_PER_ELEMENT,version:E.version,size:u}}function M(E,i,d){const S=i.array,u=i.updateRanges;if(L.bindBuffer(d,E),u.length===0)L.bufferSubData(d,0,S);else{u.sort((h,r)=>h.start-r.start);let l=0;for(let h=1;h<u.length;h++){const r=u[l],o=u[h];o.start<=r.start+r.count+1?r.count=Math.max(r.count,o.start+o.count-r.start):(++l,u[l]=o)}u.length=l+1;for(let h=0,r=u.length;h<r;h++){const o=u[h];L.bufferSubData(d,o.start*S.BYTES_PER_ELEMENT,S,o.start,o.count)}i.clearUpdateRanges()}i.onUploadCallback()}function R(E){return E.isInterleavedBufferAttribute&&(E=E.data),n.get(E)}function I(E){E.isInterleavedBufferAttribute&&(E=E.data);const i=n.get(E);i&&(L.deleteBuffer(i.buffer),n.delete(E))}function m(E,i){if(E.isInterleavedBufferAttribute&&(E=E.data),E.isGLBufferAttribute){const S=n.get(E);(!S||S.version<E.version)&&n.set(E,{buffer:E.buffer,type:E.type,bytesPerElement:E.elementSize,version:E.version});return}const d=n.get(E);if(d===void 0)n.set(E,c(E,i));else if(d.version<E.version){if(d.size!==E.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");M(d.buffer,E,i),d.version=E.version}}return{get:R,remove:I,update:m}}var Zit=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Kit=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Jit=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Qit=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,jit=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,qit=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,tst=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,est=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,ist=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,sst=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,nst=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,rst=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,ast=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,ost=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,hst=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,lst=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,ust=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,dst=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,fst=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,cst=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,pst=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,vst=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,mst=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,gst=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,xst=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,yst=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Sst=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Tst=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Cst=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Mst=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Est="gl_FragColor = linearToOutputTexel( gl_FragColor );",Pst=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,wst=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,bst=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Ast=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Rst=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Lst=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Ost=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Fst=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Dst=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Ist=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Bst=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Nst=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Gst=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Ust=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,kst=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Vst=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,zst=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Wst=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Xst=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Hst=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Yst=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,$st=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,_st=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Zst=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Kst=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Jst=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Qst=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,jst=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,qst=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,tnt=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,ent=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,int=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,snt=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,nnt=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,rnt=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,ant=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,ont=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,hnt=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,lnt=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,unt=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,dnt=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,fnt=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,cnt=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,pnt=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,vnt=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,mnt=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,gnt=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,xnt=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,ynt=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Snt=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Tnt=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Cnt=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Mnt=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Ent=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Pnt=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,wnt=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,bnt=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Ant=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Rnt=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Lnt=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Ont=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Fnt=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Dnt=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Int=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Bnt=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Nnt=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Gnt=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Unt=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,knt=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Vnt=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,znt=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Wnt=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Xnt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Hnt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Ynt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,$nt=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const _nt=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Znt=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Knt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Jnt=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Qnt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,jnt=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,qnt=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,trt=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,ert=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,irt=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,srt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,nrt=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,rrt=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,art=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ort=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,hrt=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lrt=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,urt=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,drt=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,frt=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,crt=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,prt=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vrt=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mrt=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,grt=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,xrt=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yrt=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Srt=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Trt=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Crt=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Mrt=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ert=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Prt=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,wrt=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,De={alphahash_fragment:Zit,alphahash_pars_fragment:Kit,alphamap_fragment:Jit,alphamap_pars_fragment:Qit,alphatest_fragment:jit,alphatest_pars_fragment:qit,aomap_fragment:tst,aomap_pars_fragment:est,batching_pars_vertex:ist,batching_vertex:sst,begin_vertex:nst,beginnormal_vertex:rst,bsdfs:ast,iridescence_fragment:ost,bumpmap_pars_fragment:hst,clipping_planes_fragment:lst,clipping_planes_pars_fragment:ust,clipping_planes_pars_vertex:dst,clipping_planes_vertex:fst,color_fragment:cst,color_pars_fragment:pst,color_pars_vertex:vst,color_vertex:mst,common:gst,cube_uv_reflection_fragment:xst,defaultnormal_vertex:yst,displacementmap_pars_vertex:Sst,displacementmap_vertex:Tst,emissivemap_fragment:Cst,emissivemap_pars_fragment:Mst,colorspace_fragment:Est,colorspace_pars_fragment:Pst,envmap_fragment:wst,envmap_common_pars_fragment:bst,envmap_pars_fragment:Ast,envmap_pars_vertex:Rst,envmap_physical_pars_fragment:Vst,envmap_vertex:Lst,fog_vertex:Ost,fog_pars_vertex:Fst,fog_fragment:Dst,fog_pars_fragment:Ist,gradientmap_pars_fragment:Bst,lightmap_pars_fragment:Nst,lights_lambert_fragment:Gst,lights_lambert_pars_fragment:Ust,lights_pars_begin:kst,lights_toon_fragment:zst,lights_toon_pars_fragment:Wst,lights_phong_fragment:Xst,lights_phong_pars_fragment:Hst,lights_physical_fragment:Yst,lights_physical_pars_fragment:$st,lights_fragment_begin:_st,lights_fragment_maps:Zst,lights_fragment_end:Kst,logdepthbuf_fragment:Jst,logdepthbuf_pars_fragment:Qst,logdepthbuf_pars_vertex:jst,logdepthbuf_vertex:qst,map_fragment:tnt,map_pars_fragment:ent,map_particle_fragment:int,map_particle_pars_fragment:snt,metalnessmap_fragment:nnt,metalnessmap_pars_fragment:rnt,morphinstance_vertex:ant,morphcolor_vertex:ont,morphnormal_vertex:hnt,morphtarget_pars_vertex:lnt,morphtarget_vertex:unt,normal_fragment_begin:dnt,normal_fragment_maps:fnt,normal_pars_fragment:cnt,normal_pars_vertex:pnt,normal_vertex:vnt,normalmap_pars_fragment:mnt,clearcoat_normal_fragment_begin:gnt,clearcoat_normal_fragment_maps:xnt,clearcoat_pars_fragment:ynt,iridescence_pars_fragment:Snt,opaque_fragment:Tnt,packing:Cnt,premultiplied_alpha_fragment:Mnt,project_vertex:Ent,dithering_fragment:Pnt,dithering_pars_fragment:wnt,roughnessmap_fragment:bnt,roughnessmap_pars_fragment:Ant,shadowmap_pars_fragment:Rnt,shadowmap_pars_vertex:Lnt,shadowmap_vertex:Ont,shadowmask_pars_fragment:Fnt,skinbase_vertex:Dnt,skinning_pars_vertex:Int,skinning_vertex:Bnt,skinnormal_vertex:Nnt,specularmap_fragment:Gnt,specularmap_pars_fragment:Unt,tonemapping_fragment:knt,tonemapping_pars_fragment:Vnt,transmission_fragment:znt,transmission_pars_fragment:Wnt,uv_pars_fragment:Xnt,uv_pars_vertex:Hnt,uv_vertex:Ynt,worldpos_vertex:$nt,background_vert:_nt,background_frag:Znt,backgroundCube_vert:Knt,backgroundCube_frag:Jnt,cube_vert:Qnt,cube_frag:jnt,depth_vert:qnt,depth_frag:trt,distanceRGBA_vert:ert,distanceRGBA_frag:irt,equirect_vert:srt,equirect_frag:nrt,linedashed_vert:rrt,linedashed_frag:art,meshbasic_vert:ort,meshbasic_frag:hrt,meshlambert_vert:lrt,meshlambert_frag:urt,meshmatcap_vert:drt,meshmatcap_frag:frt,meshnormal_vert:crt,meshnormal_frag:prt,meshphong_vert:vrt,meshphong_frag:mrt,meshphysical_vert:grt,meshphysical_frag:xrt,meshtoon_vert:yrt,meshtoon_frag:Srt,points_vert:Trt,points_frag:Crt,shadow_vert:Mrt,shadow_frag:Ert,sprite_vert:Prt,sprite_frag:wrt},se={common:{diffuse:{value:new Ae(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Oe},alphaMap:{value:null},alphaMapTransform:{value:new Oe},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Oe}},envmap:{envMap:{value:null},envMapRotation:{value:new Oe},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Oe}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Oe}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Oe},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Oe},normalScale:{value:new Ve(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Oe},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Oe}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Oe}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Oe}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ae(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ae(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Oe},alphaTest:{value:0},uvTransform:{value:new Oe}},sprite:{diffuse:{value:new Ae(16777215)},opacity:{value:1},center:{value:new Ve(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Oe},alphaMap:{value:null},alphaMapTransform:{value:new Oe},alphaTest:{value:0}}},Xr={basic:{uniforms:Vs([se.common,se.specularmap,se.envmap,se.aomap,se.lightmap,se.fog]),vertexShader:De.meshbasic_vert,fragmentShader:De.meshbasic_frag},lambert:{uniforms:Vs([se.common,se.specularmap,se.envmap,se.aomap,se.lightmap,se.emissivemap,se.bumpmap,se.normalmap,se.displacementmap,se.fog,se.lights,{emissive:{value:new Ae(0)}}]),vertexShader:De.meshlambert_vert,fragmentShader:De.meshlambert_frag},phong:{uniforms:Vs([se.common,se.specularmap,se.envmap,se.aomap,se.lightmap,se.emissivemap,se.bumpmap,se.normalmap,se.displacementmap,se.fog,se.lights,{emissive:{value:new Ae(0)},specular:{value:new Ae(1118481)},shininess:{value:30}}]),vertexShader:De.meshphong_vert,fragmentShader:De.meshphong_frag},standard:{uniforms:Vs([se.common,se.envmap,se.aomap,se.lightmap,se.emissivemap,se.bumpmap,se.normalmap,se.displacementmap,se.roughnessmap,se.metalnessmap,se.fog,se.lights,{emissive:{value:new Ae(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:De.meshphysical_vert,fragmentShader:De.meshphysical_frag},toon:{uniforms:Vs([se.common,se.aomap,se.lightmap,se.emissivemap,se.bumpmap,se.normalmap,se.displacementmap,se.gradientmap,se.fog,se.lights,{emissive:{value:new Ae(0)}}]),vertexShader:De.meshtoon_vert,fragmentShader:De.meshtoon_frag},matcap:{uniforms:Vs([se.common,se.bumpmap,se.normalmap,se.displacementmap,se.fog,{matcap:{value:null}}]),vertexShader:De.meshmatcap_vert,fragmentShader:De.meshmatcap_frag},points:{uniforms:Vs([se.points,se.fog]),vertexShader:De.points_vert,fragmentShader:De.points_frag},dashed:{uniforms:Vs([se.common,se.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:De.linedashed_vert,fragmentShader:De.linedashed_frag},depth:{uniforms:Vs([se.common,se.displacementmap]),vertexShader:De.depth_vert,fragmentShader:De.depth_frag},normal:{uniforms:Vs([se.common,se.bumpmap,se.normalmap,se.displacementmap,{opacity:{value:1}}]),vertexShader:De.meshnormal_vert,fragmentShader:De.meshnormal_frag},sprite:{uniforms:Vs([se.sprite,se.fog]),vertexShader:De.sprite_vert,fragmentShader:De.sprite_frag},background:{uniforms:{uvTransform:{value:new Oe},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:De.background_vert,fragmentShader:De.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Oe}},vertexShader:De.backgroundCube_vert,fragmentShader:De.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:De.cube_vert,fragmentShader:De.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:De.equirect_vert,fragmentShader:De.equirect_frag},distanceRGBA:{uniforms:Vs([se.common,se.displacementmap,{referencePosition:{value:new wt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:De.distanceRGBA_vert,fragmentShader:De.distanceRGBA_frag},shadow:{uniforms:Vs([se.lights,se.fog,{color:{value:new Ae(0)},opacity:{value:1}}]),vertexShader:De.shadow_vert,fragmentShader:De.shadow_frag}};Xr.physical={uniforms:Vs([Xr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Oe},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Oe},clearcoatNormalScale:{value:new Ve(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Oe},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Oe},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Oe},sheen:{value:0},sheenColor:{value:new Ae(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Oe},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Oe},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Oe},transmissionSamplerSize:{value:new Ve},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Oe},attenuationDistance:{value:0},attenuationColor:{value:new Ae(0)},specularColor:{value:new Ae(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Oe},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Oe},anisotropyVector:{value:new Ve},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Oe}}]),vertexShader:De.meshphysical_vert,fragmentShader:De.meshphysical_frag};const um={r:0,b:0,g:0},bh=new Yn,brt=new ei;function Art(L,n,c,M,R,I,m){const E=new Ae(0);let i=I===!0?0:1,d,S,u=null,l=0,h=null;function r(x){let g=x.isScene===!0?x.background:null;return g&&g.isTexture&&(g=(x.backgroundBlurriness>0?c:n).get(g)),g}function o(x){let g=!1;const y=r(x);y===null?a(E,i):y&&y.isColor&&(a(y,1),g=!0);const T=L.xr.getEnvironmentBlendMode();T==="additive"?M.buffers.color.setClear(0,0,0,1,m):T==="alpha-blend"&&M.buffers.color.setClear(0,0,0,0,m),(L.autoClear||g)&&(M.buffers.depth.setTest(!0),M.buffers.depth.setMask(!0),M.buffers.color.setMask(!0),L.clear(L.autoClearColor,L.autoClearDepth,L.autoClearStencil))}function p(x,g){const y=r(g);y&&(y.isCubeTexture||y.mapping===qm)?(S===void 0&&(S=new fi(new Zf(1,1,1),new Zr({name:"BackgroundCubeMaterial",uniforms:Eu(Xr.backgroundCube.uniforms),vertexShader:Xr.backgroundCube.vertexShader,fragmentShader:Xr.backgroundCube.fragmentShader,side:nn,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),S.geometry.deleteAttribute("normal"),S.geometry.deleteAttribute("uv"),S.onBeforeRender=function(T,P,A){this.matrixWorld.copyPosition(A.matrixWorld)},Object.defineProperty(S.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),R.update(S)),bh.copy(g.backgroundRotation),bh.x*=-1,bh.y*=-1,bh.z*=-1,y.isCubeTexture&&y.isRenderTargetTexture===!1&&(bh.y*=-1,bh.z*=-1),S.material.uniforms.envMap.value=y,S.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,S.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,S.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,S.material.uniforms.backgroundRotation.value.setFromMatrix4(brt.makeRotationFromEuler(bh)),S.material.toneMapped=We.getTransfer(y.colorSpace)!==ii,(u!==y||l!==y.version||h!==L.toneMapping)&&(S.material.needsUpdate=!0,u=y,l=y.version,h=L.toneMapping),S.layers.enableAll(),x.unshift(S,S.geometry,S.material,0,0,null)):y&&y.isTexture&&(d===void 0&&(d=new fi(new Kf(2,2),new Zr({name:"BackgroundMaterial",uniforms:Eu(Xr.background.uniforms),vertexShader:Xr.background.vertexShader,fragmentShader:Xr.background.fragmentShader,side:Ia,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),R.update(d)),d.material.uniforms.t2D.value=y,d.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,d.material.toneMapped=We.getTransfer(y.colorSpace)!==ii,y.matrixAutoUpdate===!0&&y.updateMatrix(),d.material.uniforms.uvTransform.value.copy(y.matrix),(u!==y||l!==y.version||h!==L.toneMapping)&&(d.material.needsUpdate=!0,u=y,l=y.version,h=L.toneMapping),d.layers.enableAll(),x.unshift(d,d.geometry,d.material,0,0,null))}function a(x,g){x.getRGB(um,zO(L)),M.buffers.color.setClear(um.r,um.g,um.b,g,m)}function v(){S!==void 0&&(S.geometry.dispose(),S.material.dispose(),S=void 0),d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0)}return{getClearColor:function(){return E},setClearColor:function(x,g=1){E.set(x),i=g,a(E,i)},getClearAlpha:function(){return i},setClearAlpha:function(x){i=x,a(E,i)},render:o,addToRenderList:p,dispose:v}}function Rrt(L,n){const c=L.getParameter(L.MAX_VERTEX_ATTRIBS),M={},R=l(null);let I=R,m=!1;function E(O,D,B,G,V){let k=!1;const U=u(G,B,D);I!==U&&(I=U,d(I.object)),k=h(O,G,B,V),k&&r(O,G,B,V),V!==null&&n.update(V,L.ELEMENT_ARRAY_BUFFER),(k||m)&&(m=!1,g(O,D,B,G),V!==null&&L.bindBuffer(L.ELEMENT_ARRAY_BUFFER,n.get(V).buffer))}function i(){return L.createVertexArray()}function d(O){return L.bindVertexArray(O)}function S(O){return L.deleteVertexArray(O)}function u(O,D,B){const G=B.wireframe===!0;let V=M[O.id];V===void 0&&(V={},M[O.id]=V);let k=V[D.id];k===void 0&&(k={},V[D.id]=k);let U=k[G];return U===void 0&&(U=l(i()),k[G]=U),U}function l(O){const D=[],B=[],G=[];for(let V=0;V<c;V++)D[V]=0,B[V]=0,G[V]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:D,enabledAttributes:B,attributeDivisors:G,object:O,attributes:{},index:null}}function h(O,D,B,G){const V=I.attributes,k=D.attributes;let U=0;const W=B.getAttributes();for(const X in W)if(W[X].location>=0){const Q=V[X];let j=k[X];if(j===void 0&&(X==="instanceMatrix"&&O.instanceMatrix&&(j=O.instanceMatrix),X==="instanceColor"&&O.instanceColor&&(j=O.instanceColor)),Q===void 0||Q.attribute!==j||j&&Q.data!==j.data)return!0;U++}return I.attributesNum!==U||I.index!==G}function r(O,D,B,G){const V={},k=D.attributes;let U=0;const W=B.getAttributes();for(const X in W)if(W[X].location>=0){let Q=k[X];Q===void 0&&(X==="instanceMatrix"&&O.instanceMatrix&&(Q=O.instanceMatrix),X==="instanceColor"&&O.instanceColor&&(Q=O.instanceColor));const j={};j.attribute=Q,Q&&Q.data&&(j.data=Q.data),V[X]=j,U++}I.attributes=V,I.attributesNum=U,I.index=G}function o(){const O=I.newAttributes;for(let D=0,B=O.length;D<B;D++)O[D]=0}function p(O){a(O,0)}function a(O,D){const B=I.newAttributes,G=I.enabledAttributes,V=I.attributeDivisors;B[O]=1,G[O]===0&&(L.enableVertexAttribArray(O),G[O]=1),V[O]!==D&&(L.vertexAttribDivisor(O,D),V[O]=D)}function v(){const O=I.newAttributes,D=I.enabledAttributes;for(let B=0,G=D.length;B<G;B++)D[B]!==O[B]&&(L.disableVertexAttribArray(B),D[B]=0)}function x(O,D,B,G,V,k,U){U===!0?L.vertexAttribIPointer(O,D,B,V,k):L.vertexAttribPointer(O,D,B,G,V,k)}function g(O,D,B,G){o();const V=G.attributes,k=B.getAttributes(),U=D.defaultAttributeValues;for(const W in k){const X=k[W];if(X.location>=0){let _=V[W];if(_===void 0&&(W==="instanceMatrix"&&O.instanceMatrix&&(_=O.instanceMatrix),W==="instanceColor"&&O.instanceColor&&(_=O.instanceColor)),_!==void 0){const Q=_.normalized,j=_.itemSize,it=n.get(_);if(it===void 0)continue;const K=it.buffer,J=it.type,Y=it.bytesPerElement,q=J===L.INT||J===L.UNSIGNED_INT||_.gpuType===aC;if(_.isInterleavedBufferAttribute){const $=_.data,et=$.stride,rt=_.offset;if($.isInstancedInterleavedBuffer){for(let at=0;at<X.locationSize;at++)a(X.location+at,$.meshPerAttribute);O.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=$.meshPerAttribute*$.count)}else for(let at=0;at<X.locationSize;at++)p(X.location+at);L.bindBuffer(L.ARRAY_BUFFER,K);for(let at=0;at<X.locationSize;at++)x(X.location+at,j/X.locationSize,J,Q,et*Y,(rt+j/X.locationSize*at)*Y,q)}else{if(_.isInstancedBufferAttribute){for(let $=0;$<X.locationSize;$++)a(X.location+$,_.meshPerAttribute);O.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=_.meshPerAttribute*_.count)}else for(let $=0;$<X.locationSize;$++)p(X.location+$);L.bindBuffer(L.ARRAY_BUFFER,K);for(let $=0;$<X.locationSize;$++)x(X.location+$,j/X.locationSize,J,Q,j*Y,j/X.locationSize*$*Y,q)}}else if(U!==void 0){const Q=U[W];if(Q!==void 0)switch(Q.length){case 2:L.vertexAttrib2fv(X.location,Q);break;case 3:L.vertexAttrib3fv(X.location,Q);break;case 4:L.vertexAttrib4fv(X.location,Q);break;default:L.vertexAttrib1fv(X.location,Q)}}}}v()}function y(){A();for(const O in M){const D=M[O];for(const B in D){const G=D[B];for(const V in G)S(G[V].object),delete G[V];delete D[B]}delete M[O]}}function T(O){if(M[O.id]===void 0)return;const D=M[O.id];for(const B in D){const G=D[B];for(const V in G)S(G[V].object),delete G[V];delete D[B]}delete M[O.id]}function P(O){for(const D in M){const B=M[D];if(B[O.id]===void 0)continue;const G=B[O.id];for(const V in G)S(G[V].object),delete G[V];delete B[O.id]}}function A(){b(),m=!0,I!==R&&(I=R,d(I.object))}function b(){R.geometry=null,R.program=null,R.wireframe=!1}return{setup:E,reset:A,resetDefaultState:b,dispose:y,releaseStatesOfGeometry:T,releaseStatesOfProgram:P,initAttributes:o,enableAttribute:p,disableUnusedAttributes:v}}function Lrt(L,n,c){let M;function R(d){M=d}function I(d,S){L.drawArrays(M,d,S),c.update(S,M,1)}function m(d,S,u){u!==0&&(L.drawArraysInstanced(M,d,S,u),c.update(S,M,u))}function E(d,S,u){if(u===0)return;n.get("WEBGL_multi_draw").multiDrawArraysWEBGL(M,d,0,S,0,u);let h=0;for(let r=0;r<u;r++)h+=S[r];c.update(h,M,1)}function i(d,S,u,l){if(u===0)return;const h=n.get("WEBGL_multi_draw");if(h===null)for(let r=0;r<d.length;r++)m(d[r],S[r],l[r]);else{h.multiDrawArraysInstancedWEBGL(M,d,0,S,0,l,0,u);let r=0;for(let o=0;o<u;o++)r+=S[o]*l[o];c.update(r,M,1)}}this.setMode=R,this.render=I,this.renderInstances=m,this.renderMultiDraw=E,this.renderMultiDrawInstances=i}function Ort(L,n,c,M){let R;function I(){if(R!==void 0)return R;if(n.has("EXT_texture_filter_anisotropic")===!0){const P=n.get("EXT_texture_filter_anisotropic");R=L.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else R=0;return R}function m(P){return!(P!==Tn&&M.convert(P)!==L.getParameter(L.IMPLEMENTATION_COLOR_READ_FORMAT))}function E(P){const A=P===Hf&&(n.has("EXT_color_buffer_half_float")||n.has("EXT_color_buffer_float"));return!(P!==Hn&&M.convert(P)!==L.getParameter(L.IMPLEMENTATION_COLOR_READ_TYPE)&&P!==La&&!A)}function i(P){if(P==="highp"){if(L.getShaderPrecisionFormat(L.VERTEX_SHADER,L.HIGH_FLOAT).precision>0&&L.getShaderPrecisionFormat(L.FRAGMENT_SHADER,L.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&L.getShaderPrecisionFormat(L.VERTEX_SHADER,L.MEDIUM_FLOAT).precision>0&&L.getShaderPrecisionFormat(L.FRAGMENT_SHADER,L.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let d=c.precision!==void 0?c.precision:"highp";const S=i(d);S!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",S,"instead."),d=S);const u=c.logarithmicDepthBuffer===!0,l=c.reverseDepthBuffer===!0&&n.has("EXT_clip_control"),h=L.getParameter(L.MAX_TEXTURE_IMAGE_UNITS),r=L.getParameter(L.MAX_VERTEX_TEXTURE_IMAGE_UNITS),o=L.getParameter(L.MAX_TEXTURE_SIZE),p=L.getParameter(L.MAX_CUBE_MAP_TEXTURE_SIZE),a=L.getParameter(L.MAX_VERTEX_ATTRIBS),v=L.getParameter(L.MAX_VERTEX_UNIFORM_VECTORS),x=L.getParameter(L.MAX_VARYING_VECTORS),g=L.getParameter(L.MAX_FRAGMENT_UNIFORM_VECTORS),y=r>0,T=L.getParameter(L.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:I,getMaxPrecision:i,textureFormatReadable:m,textureTypeReadable:E,precision:d,logarithmicDepthBuffer:u,reverseDepthBuffer:l,maxTextures:h,maxVertexTextures:r,maxTextureSize:o,maxCubemapSize:p,maxAttributes:a,maxVertexUniforms:v,maxVaryings:x,maxFragmentUniforms:g,vertexTextures:y,maxSamples:T}}function Frt(L){const n=this;let c=null,M=0,R=!1,I=!1;const m=new Lh,E=new Oe,i={value:null,needsUpdate:!1};this.uniform=i,this.numPlanes=0,this.numIntersection=0,this.init=function(u,l){const h=u.length!==0||l||M!==0||R;return R=l,M=u.length,h},this.beginShadows=function(){I=!0,S(null)},this.endShadows=function(){I=!1},this.setGlobalState=function(u,l){c=S(u,l,0)},this.setState=function(u,l,h){const r=u.clippingPlanes,o=u.clipIntersection,p=u.clipShadows,a=L.get(u);if(!R||r===null||r.length===0||I&&!p)I?S(null):d();else{const v=I?0:M,x=v*4;let g=a.clippingState||null;i.value=g,g=S(r,l,x,h);for(let y=0;y!==x;++y)g[y]=c[y];a.clippingState=g,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=v}};function d(){i.value!==c&&(i.value=c,i.needsUpdate=M>0),n.numPlanes=M,n.numIntersection=0}function S(u,l,h,r){const o=u!==null?u.length:0;let p=null;if(o!==0){if(p=i.value,r!==!0||p===null){const a=h+o*4,v=l.matrixWorldInverse;E.getNormalMatrix(v),(p===null||p.length<a)&&(p=new Float32Array(a));for(let x=0,g=h;x!==o;++x,g+=4)m.copy(u[x]).applyMatrix4(v,E),m.normal.toArray(p,g),p[g+3]=m.constant}i.value=p,i.needsUpdate=!0}return n.numPlanes=o,n.numIntersection=0,p}}function Drt(L){let n=new WeakMap;function c(m,E){return E===uT?m.mapping=Tu:E===dT&&(m.mapping=Cu),m}function M(m){if(m&&m.isTexture){const E=m.mapping;if(E===uT||E===dT)if(n.has(m)){const i=n.get(m).texture;return c(i,m.mapping)}else{const i=m.image;if(i&&i.height>0){const d=new wit(i.height);return d.fromEquirectangularTexture(L,m),n.set(m,d),m.addEventListener("dispose",R),c(d.texture,m.mapping)}else return null}}return m}function R(m){const E=m.target;E.removeEventListener("dispose",R);const i=n.get(E);i!==void 0&&(n.delete(E),i.dispose())}function I(){n=new WeakMap}return{get:M,dispose:I}}const uu=4,aL=[.125,.215,.35,.446,.526,.582],Ih=20,XS=new Gm,oL=new Ae;let HS=null,YS=0,$S=0,_S=!1;const Oh=(1+Math.sqrt(5))/2,au=1/Oh,hL=[new wt(-Oh,au,0),new wt(Oh,au,0),new wt(-au,0,Oh),new wt(au,0,Oh),new wt(0,Oh,-au),new wt(0,Oh,au),new wt(-1,1,-1),new wt(1,1,-1),new wt(-1,1,1),new wt(1,1,1)],Irt=new wt;class lL{constructor(n){this._renderer=n,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(n,c=0,M=.1,R=100,I={}){const{size:m=256,position:E=Irt}=I;HS=this._renderer.getRenderTarget(),YS=this._renderer.getActiveCubeFace(),$S=this._renderer.getActiveMipmapLevel(),_S=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(m);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(n,M,R,i,E),c>0&&this._blur(i,0,0,c),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(n,c=null){return this._fromTexture(n,c)}fromCubemap(n,c=null){return this._fromTexture(n,c)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=fL(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=dL(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(n){this._lodMax=Math.floor(Math.log2(n)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let n=0;n<this._lodPlanes.length;n++)this._lodPlanes[n].dispose()}_cleanup(n){this._renderer.setRenderTarget(HS,YS,$S),this._renderer.xr.enabled=_S,n.scissorTest=!1,dm(n,0,0,n.width,n.height)}_fromTexture(n,c){n.mapping===Tu||n.mapping===Cu?this._setSize(n.image.length===0?16:n.image[0].width||n.image[0].image.width):this._setSize(n.image.width/4),HS=this._renderer.getRenderTarget(),YS=this._renderer.getActiveCubeFace(),$S=this._renderer.getActiveMipmapLevel(),_S=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const M=c||this._allocateTargets();return this._textureToCubeUV(n,M),this._applyPMREM(M),this._cleanup(M),M}_allocateTargets(){const n=3*Math.max(this._cubeSize,112),c=4*this._cubeSize,M={magFilter:Yr,minFilter:Yr,generateMipmaps:!1,type:Hf,format:Tn,colorSpace:Mu,depthBuffer:!1},R=uL(n,c,M);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==n||this._pingPongRenderTarget.height!==c){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=uL(n,c,M);const{_lodMax:I}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Brt(I)),this._blurMaterial=Nrt(I,n,c)}return R}_compileMaterial(n){const c=new fi(this._lodPlanes[0],n);this._renderer.compile(c,XS)}_sceneToCubeUV(n,c,M,R,I){const i=new zs(90,1,c,M),d=[1,-1,1,1,1,1],S=[1,1,1,-1,-1,-1],u=this._renderer,l=u.autoClear,h=u.toneMapping;u.getClearColor(oL),u.toneMapping=Ro,u.autoClear=!1;const r=new Hr({name:"PMREM.Background",side:nn,depthWrite:!1,depthTest:!1}),o=new fi(new Zf,r);let p=!1;const a=n.background;a?a.isColor&&(r.color.copy(a),n.background=null,p=!0):(r.color.copy(oL),p=!0);for(let v=0;v<6;v++){const x=v%3;x===0?(i.up.set(0,d[v],0),i.position.set(I.x,I.y,I.z),i.lookAt(I.x+S[v],I.y,I.z)):x===1?(i.up.set(0,0,d[v]),i.position.set(I.x,I.y,I.z),i.lookAt(I.x,I.y+S[v],I.z)):(i.up.set(0,d[v],0),i.position.set(I.x,I.y,I.z),i.lookAt(I.x,I.y,I.z+S[v]));const g=this._cubeSize;dm(R,x*g,v>2?g:0,g,g),u.setRenderTarget(R),p&&u.render(o,i),u.render(n,i)}o.geometry.dispose(),o.material.dispose(),u.toneMapping=h,u.autoClear=l,n.background=a}_textureToCubeUV(n,c){const M=this._renderer,R=n.mapping===Tu||n.mapping===Cu;R?(this._cubemapMaterial===null&&(this._cubemapMaterial=fL()),this._cubemapMaterial.uniforms.flipEnvMap.value=n.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=dL());const I=R?this._cubemapMaterial:this._equirectMaterial,m=new fi(this._lodPlanes[0],I),E=I.uniforms;E.envMap.value=n;const i=this._cubeSize;dm(c,0,0,3*i,2*i),M.setRenderTarget(c),M.render(m,XS)}_applyPMREM(n){const c=this._renderer,M=c.autoClear;c.autoClear=!1;const R=this._lodPlanes.length;for(let I=1;I<R;I++){const m=Math.sqrt(this._sigmas[I]*this._sigmas[I]-this._sigmas[I-1]*this._sigmas[I-1]),E=hL[(R-I-1)%hL.length];this._blur(n,I-1,I,m,E)}c.autoClear=M}_blur(n,c,M,R,I){const m=this._pingPongRenderTarget;this._halfBlur(n,m,c,M,R,"latitudinal",I),this._halfBlur(m,n,M,M,R,"longitudinal",I)}_halfBlur(n,c,M,R,I,m,E){const i=this._renderer,d=this._blurMaterial;m!=="latitudinal"&&m!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const S=3,u=new fi(this._lodPlanes[R],d),l=d.uniforms,h=this._sizeLods[M]-1,r=isFinite(I)?Math.PI/(2*h):2*Math.PI/(2*Ih-1),o=I/r,p=isFinite(I)?1+Math.floor(S*o):Ih;p>Ih&&console.warn(`sigmaRadians, ${I}, is too large and will clip, as it requested ${p} samples when the maximum is set to ${Ih}`);const a=[];let v=0;for(let P=0;P<Ih;++P){const A=P/o,b=Math.exp(-A*A/2);a.push(b),P===0?v+=b:P<p&&(v+=2*b)}for(let P=0;P<a.length;P++)a[P]=a[P]/v;l.envMap.value=n.texture,l.samples.value=p,l.weights.value=a,l.latitudinal.value=m==="latitudinal",E&&(l.poleAxis.value=E);const{_lodMax:x}=this;l.dTheta.value=r,l.mipInt.value=x-M;const g=this._sizeLods[R],y=3*g*(R>x-uu?R-x+uu:0),T=4*(this._cubeSize-g);dm(c,y,T,3*g,2*g),i.setRenderTarget(c),i.render(u,XS)}}function Brt(L){const n=[],c=[],M=[];let R=L;const I=L-uu+1+aL.length;for(let m=0;m<I;m++){const E=Math.pow(2,R);c.push(E);let i=1/E;m>L-uu?i=aL[m-L+uu-1]:m===0&&(i=0),M.push(i);const d=1/(E-2),S=-d,u=1+d,l=[S,S,u,S,u,u,S,S,u,u,S,u],h=6,r=6,o=3,p=2,a=1,v=new Float32Array(o*r*h),x=new Float32Array(p*r*h),g=new Float32Array(a*r*h);for(let T=0;T<h;T++){const P=T%3*2/3-1,A=T>2?0:-1,b=[P,A,0,P+2/3,A,0,P+2/3,A+1,0,P,A,0,P+2/3,A+1,0,P,A+1,0];v.set(b,o*r*T),x.set(l,p*r*T);const O=[T,T,T,T,T,T];g.set(O,a*r*T)}const y=new $n;y.setAttribute("position",new $r(v,o)),y.setAttribute("uv",new $r(x,p)),y.setAttribute("faceIndex",new $r(g,a)),n.push(y),R>uu&&R--}return{lodPlanes:n,sizeLods:c,sigmas:M}}function uL(L,n,c){const M=new Ba(L,n,c);return M.texture.mapping=qm,M.texture.name="PMREM.cubeUv",M.scissorTest=!0,M}function dm(L,n,c,M,R){L.viewport.set(n,c,M,R),L.scissor.set(n,c,M,R)}function Nrt(L,n,c){const M=new Float32Array(Ih),R=new wt(0,1,0);return new Zr({name:"SphericalGaussianBlur",defines:{n:Ih,CUBEUV_TEXEL_WIDTH:1/n,CUBEUV_TEXEL_HEIGHT:1/c,CUBEUV_MAX_MIP:`${L}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:M},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:R}},vertexShader:xC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ao,depthTest:!1,depthWrite:!1})}function dL(){return new Zr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:xC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ao,depthTest:!1,depthWrite:!1})}function fL(){return new Zr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:xC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ao,depthTest:!1,depthWrite:!1})}function xC(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Grt(L){let n=new WeakMap,c=null;function M(E){if(E&&E.isTexture){const i=E.mapping,d=i===uT||i===dT,S=i===Tu||i===Cu;if(d||S){let u=n.get(E);const l=u!==void 0?u.texture.pmremVersion:0;if(E.isRenderTargetTexture&&E.pmremVersion!==l)return c===null&&(c=new lL(L)),u=d?c.fromEquirectangular(E,u):c.fromCubemap(E,u),u.texture.pmremVersion=E.pmremVersion,n.set(E,u),u.texture;if(u!==void 0)return u.texture;{const h=E.image;return d&&h&&h.height>0||S&&h&&R(h)?(c===null&&(c=new lL(L)),u=d?c.fromEquirectangular(E):c.fromCubemap(E),u.texture.pmremVersion=E.pmremVersion,n.set(E,u),E.addEventListener("dispose",I),u.texture):null}}}return E}function R(E){let i=0;const d=6;for(let S=0;S<d;S++)E[S]!==void 0&&i++;return i===d}function I(E){const i=E.target;i.removeEventListener("dispose",I);const d=n.get(i);d!==void 0&&(n.delete(i),d.dispose())}function m(){n=new WeakMap,c!==null&&(c.dispose(),c=null)}return{get:M,dispose:m}}function Urt(L){const n={};function c(M){if(n[M]!==void 0)return n[M];let R;switch(M){case"WEBGL_depth_texture":R=L.getExtension("WEBGL_depth_texture")||L.getExtension("MOZ_WEBGL_depth_texture")||L.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":R=L.getExtension("EXT_texture_filter_anisotropic")||L.getExtension("MOZ_EXT_texture_filter_anisotropic")||L.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":R=L.getExtension("WEBGL_compressed_texture_s3tc")||L.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||L.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":R=L.getExtension("WEBGL_compressed_texture_pvrtc")||L.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:R=L.getExtension(M)}return n[M]=R,R}return{has:function(M){return c(M)!==null},init:function(){c("EXT_color_buffer_float"),c("WEBGL_clip_cull_distance"),c("OES_texture_float_linear"),c("EXT_color_buffer_half_float"),c("WEBGL_multisampled_render_to_texture"),c("WEBGL_render_shared_exponent")},get:function(M){const R=c(M);return R===null&&mu("THREE.WebGLRenderer: "+M+" extension not supported."),R}}}function krt(L,n,c,M){const R={},I=new WeakMap;function m(u){const l=u.target;l.index!==null&&n.remove(l.index);for(const r in l.attributes)n.remove(l.attributes[r]);l.removeEventListener("dispose",m),delete R[l.id];const h=I.get(l);h&&(n.remove(h),I.delete(l)),M.releaseStatesOfGeometry(l),l.isInstancedBufferGeometry===!0&&delete l._maxInstanceCount,c.memory.geometries--}function E(u,l){return R[l.id]===!0||(l.addEventListener("dispose",m),R[l.id]=!0,c.memory.geometries++),l}function i(u){const l=u.attributes;for(const h in l)n.update(l[h],L.ARRAY_BUFFER)}function d(u){const l=[],h=u.index,r=u.attributes.position;let o=0;if(h!==null){const v=h.array;o=h.version;for(let x=0,g=v.length;x<g;x+=3){const y=v[x+0],T=v[x+1],P=v[x+2];l.push(y,T,T,P,P,y)}}else if(r!==void 0){const v=r.array;o=r.version;for(let x=0,g=v.length/3-1;x<g;x+=3){const y=x+0,T=x+1,P=x+2;l.push(y,T,T,P,P,y)}}else return;const p=new(NO(l)?VO:kO)(l,1);p.version=o;const a=I.get(u);a&&n.remove(a),I.set(u,p)}function S(u){const l=I.get(u);if(l){const h=u.index;h!==null&&l.version<h.version&&d(u)}else d(u);return I.get(u)}return{get:E,update:i,getWireframeAttribute:S}}function Vrt(L,n,c){let M;function R(l){M=l}let I,m;function E(l){I=l.type,m=l.bytesPerElement}function i(l,h){L.drawElements(M,h,I,l*m),c.update(h,M,1)}function d(l,h,r){r!==0&&(L.drawElementsInstanced(M,h,I,l*m,r),c.update(h,M,r))}function S(l,h,r){if(r===0)return;n.get("WEBGL_multi_draw").multiDrawElementsWEBGL(M,h,0,I,l,0,r);let p=0;for(let a=0;a<r;a++)p+=h[a];c.update(p,M,1)}function u(l,h,r,o){if(r===0)return;const p=n.get("WEBGL_multi_draw");if(p===null)for(let a=0;a<l.length;a++)d(l[a]/m,h[a],o[a]);else{p.multiDrawElementsInstancedWEBGL(M,h,0,I,l,0,o,0,r);let a=0;for(let v=0;v<r;v++)a+=h[v]*o[v];c.update(a,M,1)}}this.setMode=R,this.setIndex=E,this.render=i,this.renderInstances=d,this.renderMultiDraw=S,this.renderMultiDrawInstances=u}function zrt(L){const n={geometries:0,textures:0},c={frame:0,calls:0,triangles:0,points:0,lines:0};function M(I,m,E){switch(c.calls++,m){case L.TRIANGLES:c.triangles+=E*(I/3);break;case L.LINES:c.lines+=E*(I/2);break;case L.LINE_STRIP:c.lines+=E*(I-1);break;case L.LINE_LOOP:c.lines+=E*I;break;case L.POINTS:c.points+=E*I;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",m);break}}function R(){c.calls=0,c.triangles=0,c.points=0,c.lines=0}return{memory:n,render:c,programs:null,autoReset:!0,reset:R,update:M}}function Wrt(L,n,c){const M=new WeakMap,R=new si;function I(m,E,i){const d=m.morphTargetInfluences,S=E.morphAttributes.position||E.morphAttributes.normal||E.morphAttributes.color,u=S!==void 0?S.length:0;let l=M.get(E);if(l===void 0||l.count!==u){let O=function(){A.dispose(),M.delete(E),E.removeEventListener("dispose",O)};var h=O;l!==void 0&&l.texture.dispose();const r=E.morphAttributes.position!==void 0,o=E.morphAttributes.normal!==void 0,p=E.morphAttributes.color!==void 0,a=E.morphAttributes.position||[],v=E.morphAttributes.normal||[],x=E.morphAttributes.color||[];let g=0;r===!0&&(g=1),o===!0&&(g=2),p===!0&&(g=3);let y=E.attributes.position.count*g,T=1;y>n.maxTextureSize&&(T=Math.ceil(y/n.maxTextureSize),y=n.maxTextureSize);const P=new Float32Array(y*T*4*u),A=new GO(P,y,T,u);A.type=La,A.needsUpdate=!0;const b=g*4;for(let D=0;D<u;D++){const B=a[D],G=v[D],V=x[D],k=y*T*4*D;for(let U=0;U<B.count;U++){const W=U*b;r===!0&&(R.fromBufferAttribute(B,U),P[k+W+0]=R.x,P[k+W+1]=R.y,P[k+W+2]=R.z,P[k+W+3]=0),o===!0&&(R.fromBufferAttribute(G,U),P[k+W+4]=R.x,P[k+W+5]=R.y,P[k+W+6]=R.z,P[k+W+7]=0),p===!0&&(R.fromBufferAttribute(V,U),P[k+W+8]=R.x,P[k+W+9]=R.y,P[k+W+10]=R.z,P[k+W+11]=V.itemSize===4?R.w:1)}}l={count:u,texture:A,size:new Ve(y,T)},M.set(E,l),E.addEventListener("dispose",O)}if(m.isInstancedMesh===!0&&m.morphTexture!==null)i.getUniforms().setValue(L,"morphTexture",m.morphTexture,c);else{let r=0;for(let p=0;p<d.length;p++)r+=d[p];const o=E.morphTargetsRelative?1:1-r;i.getUniforms().setValue(L,"morphTargetBaseInfluence",o),i.getUniforms().setValue(L,"morphTargetInfluences",d)}i.getUniforms().setValue(L,"morphTargetsTexture",l.texture,c),i.getUniforms().setValue(L,"morphTargetsTextureSize",l.size)}return{update:I}}function Xrt(L,n,c,M){let R=new WeakMap;function I(i){const d=M.render.frame,S=i.geometry,u=n.get(i,S);if(R.get(u)!==d&&(n.update(u),R.set(u,d)),i.isInstancedMesh&&(i.hasEventListener("dispose",E)===!1&&i.addEventListener("dispose",E),R.get(i)!==d&&(c.update(i.instanceMatrix,L.ARRAY_BUFFER),i.instanceColor!==null&&c.update(i.instanceColor,L.ARRAY_BUFFER),R.set(i,d))),i.isSkinnedMesh){const l=i.skeleton;R.get(l)!==d&&(l.update(),R.set(l,d))}return u}function m(){R=new WeakMap}function E(i){const d=i.target;d.removeEventListener("dispose",E),c.remove(d.instanceMatrix),d.instanceColor!==null&&c.remove(d.instanceColor)}return{update:I,dispose:m}}const QO=new $s,cL=new YO(1,1),jO=new GO,qO=new lit,tF=new XO,pL=[],vL=[],mL=new Float32Array(16),gL=new Float32Array(9),xL=new Float32Array(4);function Gu(L,n,c){const M=L[0];if(M<=0||M>0)return L;const R=n*c;let I=pL[R];if(I===void 0&&(I=new Float32Array(R),pL[R]=I),n!==0){M.toArray(I,0);for(let m=1,E=0;m!==n;++m)E+=c,L[m].toArray(I,E)}return I}function es(L,n){if(L.length!==n.length)return!1;for(let c=0,M=L.length;c<M;c++)if(L[c]!==n[c])return!1;return!0}function is(L,n){for(let c=0,M=n.length;c<M;c++)L[c]=n[c]}function ig(L,n){let c=vL[n];c===void 0&&(c=new Int32Array(n),vL[n]=c);for(let M=0;M!==n;++M)c[M]=L.allocateTextureUnit();return c}function Hrt(L,n){const c=this.cache;c[0]!==n&&(L.uniform1f(this.addr,n),c[0]=n)}function Yrt(L,n){const c=this.cache;if(n.x!==void 0)(c[0]!==n.x||c[1]!==n.y)&&(L.uniform2f(this.addr,n.x,n.y),c[0]=n.x,c[1]=n.y);else{if(es(c,n))return;L.uniform2fv(this.addr,n),is(c,n)}}function $rt(L,n){const c=this.cache;if(n.x!==void 0)(c[0]!==n.x||c[1]!==n.y||c[2]!==n.z)&&(L.uniform3f(this.addr,n.x,n.y,n.z),c[0]=n.x,c[1]=n.y,c[2]=n.z);else if(n.r!==void 0)(c[0]!==n.r||c[1]!==n.g||c[2]!==n.b)&&(L.uniform3f(this.addr,n.r,n.g,n.b),c[0]=n.r,c[1]=n.g,c[2]=n.b);else{if(es(c,n))return;L.uniform3fv(this.addr,n),is(c,n)}}function _rt(L,n){const c=this.cache;if(n.x!==void 0)(c[0]!==n.x||c[1]!==n.y||c[2]!==n.z||c[3]!==n.w)&&(L.uniform4f(this.addr,n.x,n.y,n.z,n.w),c[0]=n.x,c[1]=n.y,c[2]=n.z,c[3]=n.w);else{if(es(c,n))return;L.uniform4fv(this.addr,n),is(c,n)}}function Zrt(L,n){const c=this.cache,M=n.elements;if(M===void 0){if(es(c,n))return;L.uniformMatrix2fv(this.addr,!1,n),is(c,n)}else{if(es(c,M))return;xL.set(M),L.uniformMatrix2fv(this.addr,!1,xL),is(c,M)}}function Krt(L,n){const c=this.cache,M=n.elements;if(M===void 0){if(es(c,n))return;L.uniformMatrix3fv(this.addr,!1,n),is(c,n)}else{if(es(c,M))return;gL.set(M),L.uniformMatrix3fv(this.addr,!1,gL),is(c,M)}}function Jrt(L,n){const c=this.cache,M=n.elements;if(M===void 0){if(es(c,n))return;L.uniformMatrix4fv(this.addr,!1,n),is(c,n)}else{if(es(c,M))return;mL.set(M),L.uniformMatrix4fv(this.addr,!1,mL),is(c,M)}}function Qrt(L,n){const c=this.cache;c[0]!==n&&(L.uniform1i(this.addr,n),c[0]=n)}function jrt(L,n){const c=this.cache;if(n.x!==void 0)(c[0]!==n.x||c[1]!==n.y)&&(L.uniform2i(this.addr,n.x,n.y),c[0]=n.x,c[1]=n.y);else{if(es(c,n))return;L.uniform2iv(this.addr,n),is(c,n)}}function qrt(L,n){const c=this.cache;if(n.x!==void 0)(c[0]!==n.x||c[1]!==n.y||c[2]!==n.z)&&(L.uniform3i(this.addr,n.x,n.y,n.z),c[0]=n.x,c[1]=n.y,c[2]=n.z);else{if(es(c,n))return;L.uniform3iv(this.addr,n),is(c,n)}}function tat(L,n){const c=this.cache;if(n.x!==void 0)(c[0]!==n.x||c[1]!==n.y||c[2]!==n.z||c[3]!==n.w)&&(L.uniform4i(this.addr,n.x,n.y,n.z,n.w),c[0]=n.x,c[1]=n.y,c[2]=n.z,c[3]=n.w);else{if(es(c,n))return;L.uniform4iv(this.addr,n),is(c,n)}}function eat(L,n){const c=this.cache;c[0]!==n&&(L.uniform1ui(this.addr,n),c[0]=n)}function iat(L,n){const c=this.cache;if(n.x!==void 0)(c[0]!==n.x||c[1]!==n.y)&&(L.uniform2ui(this.addr,n.x,n.y),c[0]=n.x,c[1]=n.y);else{if(es(c,n))return;L.uniform2uiv(this.addr,n),is(c,n)}}function sat(L,n){const c=this.cache;if(n.x!==void 0)(c[0]!==n.x||c[1]!==n.y||c[2]!==n.z)&&(L.uniform3ui(this.addr,n.x,n.y,n.z),c[0]=n.x,c[1]=n.y,c[2]=n.z);else{if(es(c,n))return;L.uniform3uiv(this.addr,n),is(c,n)}}function nat(L,n){const c=this.cache;if(n.x!==void 0)(c[0]!==n.x||c[1]!==n.y||c[2]!==n.z||c[3]!==n.w)&&(L.uniform4ui(this.addr,n.x,n.y,n.z,n.w),c[0]=n.x,c[1]=n.y,c[2]=n.z,c[3]=n.w);else{if(es(c,n))return;L.uniform4uiv(this.addr,n),is(c,n)}}function rat(L,n,c){const M=this.cache,R=c.allocateTextureUnit();M[0]!==R&&(L.uniform1i(this.addr,R),M[0]=R);let I;this.type===L.SAMPLER_2D_SHADOW?(cL.compareFunction=BO,I=cL):I=QO,c.setTexture2D(n||I,R)}function aat(L,n,c){const M=this.cache,R=c.allocateTextureUnit();M[0]!==R&&(L.uniform1i(this.addr,R),M[0]=R),c.setTexture3D(n||qO,R)}function oat(L,n,c){const M=this.cache,R=c.allocateTextureUnit();M[0]!==R&&(L.uniform1i(this.addr,R),M[0]=R),c.setTextureCube(n||tF,R)}function hat(L,n,c){const M=this.cache,R=c.allocateTextureUnit();M[0]!==R&&(L.uniform1i(this.addr,R),M[0]=R),c.setTexture2DArray(n||jO,R)}function lat(L){switch(L){case 5126:return Hrt;case 35664:return Yrt;case 35665:return $rt;case 35666:return _rt;case 35674:return Zrt;case 35675:return Krt;case 35676:return Jrt;case 5124:case 35670:return Qrt;case 35667:case 35671:return jrt;case 35668:case 35672:return qrt;case 35669:case 35673:return tat;case 5125:return eat;case 36294:return iat;case 36295:return sat;case 36296:return nat;case 35678:case 36198:case 36298:case 36306:case 35682:return rat;case 35679:case 36299:case 36307:return aat;case 35680:case 36300:case 36308:case 36293:return oat;case 36289:case 36303:case 36311:case 36292:return hat}}function uat(L,n){L.uniform1fv(this.addr,n)}function dat(L,n){const c=Gu(n,this.size,2);L.uniform2fv(this.addr,c)}function fat(L,n){const c=Gu(n,this.size,3);L.uniform3fv(this.addr,c)}function cat(L,n){const c=Gu(n,this.size,4);L.uniform4fv(this.addr,c)}function pat(L,n){const c=Gu(n,this.size,4);L.uniformMatrix2fv(this.addr,!1,c)}function vat(L,n){const c=Gu(n,this.size,9);L.uniformMatrix3fv(this.addr,!1,c)}function mat(L,n){const c=Gu(n,this.size,16);L.uniformMatrix4fv(this.addr,!1,c)}function gat(L,n){L.uniform1iv(this.addr,n)}function xat(L,n){L.uniform2iv(this.addr,n)}function yat(L,n){L.uniform3iv(this.addr,n)}function Sat(L,n){L.uniform4iv(this.addr,n)}function Tat(L,n){L.uniform1uiv(this.addr,n)}function Cat(L,n){L.uniform2uiv(this.addr,n)}function Mat(L,n){L.uniform3uiv(this.addr,n)}function Eat(L,n){L.uniform4uiv(this.addr,n)}function Pat(L,n,c){const M=this.cache,R=n.length,I=ig(c,R);es(M,I)||(L.uniform1iv(this.addr,I),is(M,I));for(let m=0;m!==R;++m)c.setTexture2D(n[m]||QO,I[m])}function wat(L,n,c){const M=this.cache,R=n.length,I=ig(c,R);es(M,I)||(L.uniform1iv(this.addr,I),is(M,I));for(let m=0;m!==R;++m)c.setTexture3D(n[m]||qO,I[m])}function bat(L,n,c){const M=this.cache,R=n.length,I=ig(c,R);es(M,I)||(L.uniform1iv(this.addr,I),is(M,I));for(let m=0;m!==R;++m)c.setTextureCube(n[m]||tF,I[m])}function Aat(L,n,c){const M=this.cache,R=n.length,I=ig(c,R);es(M,I)||(L.uniform1iv(this.addr,I),is(M,I));for(let m=0;m!==R;++m)c.setTexture2DArray(n[m]||jO,I[m])}function Rat(L){switch(L){case 5126:return uat;case 35664:return dat;case 35665:return fat;case 35666:return cat;case 35674:return pat;case 35675:return vat;case 35676:return mat;case 5124:case 35670:return gat;case 35667:case 35671:return xat;case 35668:case 35672:return yat;case 35669:case 35673:return Sat;case 5125:return Tat;case 36294:return Cat;case 36295:return Mat;case 36296:return Eat;case 35678:case 36198:case 36298:case 36306:case 35682:return Pat;case 35679:case 36299:case 36307:return wat;case 35680:case 36300:case 36308:case 36293:return bat;case 36289:case 36303:case 36311:case 36292:return Aat}}class Lat{constructor(n,c,M){this.id=n,this.addr=M,this.cache=[],this.type=c.type,this.setValue=lat(c.type)}}class Oat{constructor(n,c,M){this.id=n,this.addr=M,this.cache=[],this.type=c.type,this.size=c.size,this.setValue=Rat(c.type)}}class Fat{constructor(n){this.id=n,this.seq=[],this.map={}}setValue(n,c,M){const R=this.seq;for(let I=0,m=R.length;I!==m;++I){const E=R[I];E.setValue(n,c[E.id],M)}}}const ZS=/(\w+)(\])?(\[|\.)?/g;function yL(L,n){L.seq.push(n),L.map[n.id]=n}function Dat(L,n,c){const M=L.name,R=M.length;for(ZS.lastIndex=0;;){const I=ZS.exec(M),m=ZS.lastIndex;let E=I[1];const i=I[2]==="]",d=I[3];if(i&&(E=E|0),d===void 0||d==="["&&m+2===R){yL(c,d===void 0?new Lat(E,L,n):new Oat(E,L,n));break}else{let u=c.map[E];u===void 0&&(u=new Fat(E),yL(c,u)),c=u}}}class Am{constructor(n,c){this.seq=[],this.map={};const M=n.getProgramParameter(c,n.ACTIVE_UNIFORMS);for(let R=0;R<M;++R){const I=n.getActiveUniform(c,R),m=n.getUniformLocation(c,I.name);Dat(I,m,this)}}setValue(n,c,M,R){const I=this.map[c];I!==void 0&&I.setValue(n,M,R)}setOptional(n,c,M){const R=c[M];R!==void 0&&this.setValue(n,M,R)}static upload(n,c,M,R){for(let I=0,m=c.length;I!==m;++I){const E=c[I],i=M[E.id];i.needsUpdate!==!1&&E.setValue(n,i.value,R)}}static seqWithValue(n,c){const M=[];for(let R=0,I=n.length;R!==I;++R){const m=n[R];m.id in c&&M.push(m)}return M}}function SL(L,n,c){const M=L.createShader(n);return L.shaderSource(M,c),L.compileShader(M),M}const Iat=37297;let Bat=0;function Nat(L,n){const c=L.split(`
`),M=[],R=Math.max(n-6,0),I=Math.min(n+6,c.length);for(let m=R;m<I;m++){const E=m+1;M.push(`${E===n?">":" "} ${E}: ${c[m]}`)}return M.join(`
`)}const TL=new Oe;function Gat(L){We._getMatrix(TL,We.workingColorSpace,L);const n=`mat3( ${TL.elements.map(c=>c.toFixed(4))} )`;switch(We.getTransfer(L)){case Fm:return[n,"LinearTransferOETF"];case ii:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",L),[n,"LinearTransferOETF"]}}function CL(L,n,c){const M=L.getShaderParameter(n,L.COMPILE_STATUS),R=L.getShaderInfoLog(n).trim();if(M&&R==="")return"";const I=/ERROR: 0:(\d+)/.exec(R);if(I){const m=parseInt(I[1]);return c.toUpperCase()+`

`+R+`

`+Nat(L.getShaderSource(n),m)}else return R}function Uat(L,n){const c=Gat(n);return[`vec4 ${L}( vec4 value ) {`,`	return ${c[1]}( vec4( value.rgb * ${c[0]}, value.a ) );`,"}"].join(`
`)}function kat(L,n){let c;switch(n){case Bet:c="Linear";break;case Net:c="Reinhard";break;case Get:c="Cineon";break;case Uet:c="ACESFilmic";break;case Vet:c="AgX";break;case zet:c="Neutral";break;case ket:c="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",n),c="Linear"}return"vec3 "+L+"( vec3 color ) { return "+c+"ToneMapping( color ); }"}const fm=new wt;function Vat(){We.getLuminanceCoefficients(fm);const L=fm.x.toFixed(4),n=fm.y.toFixed(4),c=fm.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${L}, ${n}, ${c} );`,"	return dot( weights, rgb );","}"].join(`
`)}function zat(L){return[L.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",L.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Af).join(`
`)}function Wat(L){const n=[];for(const c in L){const M=L[c];M!==!1&&n.push("#define "+c+" "+M)}return n.join(`
`)}function Xat(L,n){const c={},M=L.getProgramParameter(n,L.ACTIVE_ATTRIBUTES);for(let R=0;R<M;R++){const I=L.getActiveAttrib(n,R),m=I.name;let E=1;I.type===L.FLOAT_MAT2&&(E=2),I.type===L.FLOAT_MAT3&&(E=3),I.type===L.FLOAT_MAT4&&(E=4),c[m]={type:I.type,location:L.getAttribLocation(n,m),locationSize:E}}return c}function Af(L){return L!==""}function ML(L,n){const c=n.numSpotLightShadows+n.numSpotLightMaps-n.numSpotLightShadowsWithMaps;return L.replace(/NUM_DIR_LIGHTS/g,n.numDirLights).replace(/NUM_SPOT_LIGHTS/g,n.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,n.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,c).replace(/NUM_RECT_AREA_LIGHTS/g,n.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,n.numPointLights).replace(/NUM_HEMI_LIGHTS/g,n.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,n.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,n.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,n.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,n.numPointLightShadows)}function EL(L,n){return L.replace(/NUM_CLIPPING_PLANES/g,n.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,n.numClippingPlanes-n.numClipIntersection)}const Hat=/^[ \t]*#include +<([\w\d./]+)>/gm;function zT(L){return L.replace(Hat,$at)}const Yat=new Map;function $at(L,n){let c=De[n];if(c===void 0){const M=Yat.get(n);if(M!==void 0)c=De[M],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',n,M);else throw new Error("Can not resolve #include <"+n+">")}return zT(c)}const _at=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function PL(L){return L.replace(_at,Zat)}function Zat(L,n,c,M){let R="";for(let I=parseInt(n);I<parseInt(c);I++)R+=M.replace(/\[\s*i\s*\]/g,"[ "+I+" ]").replace(/UNROLLED_LOOP_INDEX/g,I);return R}function wL(L){let n=`precision ${L.precision} float;
	precision ${L.precision} int;
	precision ${L.precision} sampler2D;
	precision ${L.precision} samplerCube;
	precision ${L.precision} sampler3D;
	precision ${L.precision} sampler2DArray;
	precision ${L.precision} sampler2DShadow;
	precision ${L.precision} samplerCubeShadow;
	precision ${L.precision} sampler2DArrayShadow;
	precision ${L.precision} isampler2D;
	precision ${L.precision} isampler3D;
	precision ${L.precision} isamplerCube;
	precision ${L.precision} isampler2DArray;
	precision ${L.precision} usampler2D;
	precision ${L.precision} usampler3D;
	precision ${L.precision} usamplerCube;
	precision ${L.precision} usampler2DArray;
	`;return L.precision==="highp"?n+=`
#define HIGH_PRECISION`:L.precision==="mediump"?n+=`
#define MEDIUM_PRECISION`:L.precision==="lowp"&&(n+=`
#define LOW_PRECISION`),n}function Kat(L){let n="SHADOWMAP_TYPE_BASIC";return L.shadowMapType===PO?n="SHADOWMAP_TYPE_PCF":L.shadowMapType===cet?n="SHADOWMAP_TYPE_PCF_SOFT":L.shadowMapType===ba&&(n="SHADOWMAP_TYPE_VSM"),n}function Jat(L){let n="ENVMAP_TYPE_CUBE";if(L.envMap)switch(L.envMapMode){case Tu:case Cu:n="ENVMAP_TYPE_CUBE";break;case qm:n="ENVMAP_TYPE_CUBE_UV";break}return n}function Qat(L){let n="ENVMAP_MODE_REFLECTION";if(L.envMap)switch(L.envMapMode){case Cu:n="ENVMAP_MODE_REFRACTION";break}return n}function jat(L){let n="ENVMAP_BLENDING_NONE";if(L.envMap)switch(L.combine){case jm:n="ENVMAP_BLENDING_MULTIPLY";break;case Det:n="ENVMAP_BLENDING_MIX";break;case Iet:n="ENVMAP_BLENDING_ADD";break}return n}function qat(L){const n=L.envMapCubeUVHeight;if(n===null)return null;const c=Math.log2(n)-2,M=1/n;return{texelWidth:1/(3*Math.max(Math.pow(2,c),7*16)),texelHeight:M,maxMip:c}}function tot(L,n,c,M){const R=L.getContext(),I=c.defines;let m=c.vertexShader,E=c.fragmentShader;const i=Kat(c),d=Jat(c),S=Qat(c),u=jat(c),l=qat(c),h=zat(c),r=Wat(I),o=R.createProgram();let p,a,v=c.glslVersion?"#version "+c.glslVersion+`
`:"";c.isRawShaderMaterial?(p=["#define SHADER_TYPE "+c.shaderType,"#define SHADER_NAME "+c.shaderName,r].filter(Af).join(`
`),p.length>0&&(p+=`
`),a=["#define SHADER_TYPE "+c.shaderType,"#define SHADER_NAME "+c.shaderName,r].filter(Af).join(`
`),a.length>0&&(a+=`
`)):(p=[wL(c),"#define SHADER_TYPE "+c.shaderType,"#define SHADER_NAME "+c.shaderName,r,c.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",c.batching?"#define USE_BATCHING":"",c.batchingColor?"#define USE_BATCHING_COLOR":"",c.instancing?"#define USE_INSTANCING":"",c.instancingColor?"#define USE_INSTANCING_COLOR":"",c.instancingMorph?"#define USE_INSTANCING_MORPH":"",c.useFog&&c.fog?"#define USE_FOG":"",c.useFog&&c.fogExp2?"#define FOG_EXP2":"",c.map?"#define USE_MAP":"",c.envMap?"#define USE_ENVMAP":"",c.envMap?"#define "+S:"",c.lightMap?"#define USE_LIGHTMAP":"",c.aoMap?"#define USE_AOMAP":"",c.bumpMap?"#define USE_BUMPMAP":"",c.normalMap?"#define USE_NORMALMAP":"",c.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",c.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",c.displacementMap?"#define USE_DISPLACEMENTMAP":"",c.emissiveMap?"#define USE_EMISSIVEMAP":"",c.anisotropy?"#define USE_ANISOTROPY":"",c.anisotropyMap?"#define USE_ANISOTROPYMAP":"",c.clearcoatMap?"#define USE_CLEARCOATMAP":"",c.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",c.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",c.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",c.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",c.specularMap?"#define USE_SPECULARMAP":"",c.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",c.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",c.roughnessMap?"#define USE_ROUGHNESSMAP":"",c.metalnessMap?"#define USE_METALNESSMAP":"",c.alphaMap?"#define USE_ALPHAMAP":"",c.alphaHash?"#define USE_ALPHAHASH":"",c.transmission?"#define USE_TRANSMISSION":"",c.transmissionMap?"#define USE_TRANSMISSIONMAP":"",c.thicknessMap?"#define USE_THICKNESSMAP":"",c.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",c.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",c.mapUv?"#define MAP_UV "+c.mapUv:"",c.alphaMapUv?"#define ALPHAMAP_UV "+c.alphaMapUv:"",c.lightMapUv?"#define LIGHTMAP_UV "+c.lightMapUv:"",c.aoMapUv?"#define AOMAP_UV "+c.aoMapUv:"",c.emissiveMapUv?"#define EMISSIVEMAP_UV "+c.emissiveMapUv:"",c.bumpMapUv?"#define BUMPMAP_UV "+c.bumpMapUv:"",c.normalMapUv?"#define NORMALMAP_UV "+c.normalMapUv:"",c.displacementMapUv?"#define DISPLACEMENTMAP_UV "+c.displacementMapUv:"",c.metalnessMapUv?"#define METALNESSMAP_UV "+c.metalnessMapUv:"",c.roughnessMapUv?"#define ROUGHNESSMAP_UV "+c.roughnessMapUv:"",c.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+c.anisotropyMapUv:"",c.clearcoatMapUv?"#define CLEARCOATMAP_UV "+c.clearcoatMapUv:"",c.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+c.clearcoatNormalMapUv:"",c.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+c.clearcoatRoughnessMapUv:"",c.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+c.iridescenceMapUv:"",c.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+c.iridescenceThicknessMapUv:"",c.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+c.sheenColorMapUv:"",c.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+c.sheenRoughnessMapUv:"",c.specularMapUv?"#define SPECULARMAP_UV "+c.specularMapUv:"",c.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+c.specularColorMapUv:"",c.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+c.specularIntensityMapUv:"",c.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+c.transmissionMapUv:"",c.thicknessMapUv?"#define THICKNESSMAP_UV "+c.thicknessMapUv:"",c.vertexTangents&&c.flatShading===!1?"#define USE_TANGENT":"",c.vertexColors?"#define USE_COLOR":"",c.vertexAlphas?"#define USE_COLOR_ALPHA":"",c.vertexUv1s?"#define USE_UV1":"",c.vertexUv2s?"#define USE_UV2":"",c.vertexUv3s?"#define USE_UV3":"",c.pointsUvs?"#define USE_POINTS_UV":"",c.flatShading?"#define FLAT_SHADED":"",c.skinning?"#define USE_SKINNING":"",c.morphTargets?"#define USE_MORPHTARGETS":"",c.morphNormals&&c.flatShading===!1?"#define USE_MORPHNORMALS":"",c.morphColors?"#define USE_MORPHCOLORS":"",c.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+c.morphTextureStride:"",c.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+c.morphTargetsCount:"",c.doubleSided?"#define DOUBLE_SIDED":"",c.flipSided?"#define FLIP_SIDED":"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapEnabled?"#define "+i:"",c.sizeAttenuation?"#define USE_SIZEATTENUATION":"",c.numLightProbes>0?"#define USE_LIGHT_PROBES":"",c.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",c.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Af).join(`
`),a=[wL(c),"#define SHADER_TYPE "+c.shaderType,"#define SHADER_NAME "+c.shaderName,r,c.useFog&&c.fog?"#define USE_FOG":"",c.useFog&&c.fogExp2?"#define FOG_EXP2":"",c.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",c.map?"#define USE_MAP":"",c.matcap?"#define USE_MATCAP":"",c.envMap?"#define USE_ENVMAP":"",c.envMap?"#define "+d:"",c.envMap?"#define "+S:"",c.envMap?"#define "+u:"",l?"#define CUBEUV_TEXEL_WIDTH "+l.texelWidth:"",l?"#define CUBEUV_TEXEL_HEIGHT "+l.texelHeight:"",l?"#define CUBEUV_MAX_MIP "+l.maxMip+".0":"",c.lightMap?"#define USE_LIGHTMAP":"",c.aoMap?"#define USE_AOMAP":"",c.bumpMap?"#define USE_BUMPMAP":"",c.normalMap?"#define USE_NORMALMAP":"",c.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",c.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",c.emissiveMap?"#define USE_EMISSIVEMAP":"",c.anisotropy?"#define USE_ANISOTROPY":"",c.anisotropyMap?"#define USE_ANISOTROPYMAP":"",c.clearcoat?"#define USE_CLEARCOAT":"",c.clearcoatMap?"#define USE_CLEARCOATMAP":"",c.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",c.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",c.dispersion?"#define USE_DISPERSION":"",c.iridescence?"#define USE_IRIDESCENCE":"",c.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",c.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",c.specularMap?"#define USE_SPECULARMAP":"",c.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",c.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",c.roughnessMap?"#define USE_ROUGHNESSMAP":"",c.metalnessMap?"#define USE_METALNESSMAP":"",c.alphaMap?"#define USE_ALPHAMAP":"",c.alphaTest?"#define USE_ALPHATEST":"",c.alphaHash?"#define USE_ALPHAHASH":"",c.sheen?"#define USE_SHEEN":"",c.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",c.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",c.transmission?"#define USE_TRANSMISSION":"",c.transmissionMap?"#define USE_TRANSMISSIONMAP":"",c.thicknessMap?"#define USE_THICKNESSMAP":"",c.vertexTangents&&c.flatShading===!1?"#define USE_TANGENT":"",c.vertexColors||c.instancingColor||c.batchingColor?"#define USE_COLOR":"",c.vertexAlphas?"#define USE_COLOR_ALPHA":"",c.vertexUv1s?"#define USE_UV1":"",c.vertexUv2s?"#define USE_UV2":"",c.vertexUv3s?"#define USE_UV3":"",c.pointsUvs?"#define USE_POINTS_UV":"",c.gradientMap?"#define USE_GRADIENTMAP":"",c.flatShading?"#define FLAT_SHADED":"",c.doubleSided?"#define DOUBLE_SIDED":"",c.flipSided?"#define FLIP_SIDED":"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapEnabled?"#define "+i:"",c.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",c.numLightProbes>0?"#define USE_LIGHT_PROBES":"",c.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",c.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",c.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",c.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",c.toneMapping!==Ro?"#define TONE_MAPPING":"",c.toneMapping!==Ro?De.tonemapping_pars_fragment:"",c.toneMapping!==Ro?kat("toneMapping",c.toneMapping):"",c.dithering?"#define DITHERING":"",c.opaque?"#define OPAQUE":"",De.colorspace_pars_fragment,Uat("linearToOutputTexel",c.outputColorSpace),Vat(),c.useDepthPacking?"#define DEPTH_PACKING "+c.depthPacking:"",`
`].filter(Af).join(`
`)),m=zT(m),m=ML(m,c),m=EL(m,c),E=zT(E),E=ML(E,c),E=EL(E,c),m=PL(m),E=PL(E),c.isRawShaderMaterial!==!0&&(v=`#version 300 es
`,p=[h,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+p,a=["#define varying in",c.glslVersion===RR?"":"layout(location = 0) out highp vec4 pc_fragColor;",c.glslVersion===RR?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+a);const x=v+p+m,g=v+a+E,y=SL(R,R.VERTEX_SHADER,x),T=SL(R,R.FRAGMENT_SHADER,g);R.attachShader(o,y),R.attachShader(o,T),c.index0AttributeName!==void 0?R.bindAttribLocation(o,0,c.index0AttributeName):c.morphTargets===!0&&R.bindAttribLocation(o,0,"position"),R.linkProgram(o);function P(D){if(L.debug.checkShaderErrors){const B=R.getProgramInfoLog(o).trim(),G=R.getShaderInfoLog(y).trim(),V=R.getShaderInfoLog(T).trim();let k=!0,U=!0;if(R.getProgramParameter(o,R.LINK_STATUS)===!1)if(k=!1,typeof L.debug.onShaderError=="function")L.debug.onShaderError(R,o,y,T);else{const W=CL(R,y,"vertex"),X=CL(R,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+R.getError()+" - VALIDATE_STATUS "+R.getProgramParameter(o,R.VALIDATE_STATUS)+`

Material Name: `+D.name+`
Material Type: `+D.type+`

Program Info Log: `+B+`
`+W+`
`+X)}else B!==""?console.warn("THREE.WebGLProgram: Program Info Log:",B):(G===""||V==="")&&(U=!1);U&&(D.diagnostics={runnable:k,programLog:B,vertexShader:{log:G,prefix:p},fragmentShader:{log:V,prefix:a}})}R.deleteShader(y),R.deleteShader(T),A=new Am(R,o),b=Xat(R,o)}let A;this.getUniforms=function(){return A===void 0&&P(this),A};let b;this.getAttributes=function(){return b===void 0&&P(this),b};let O=c.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return O===!1&&(O=R.getProgramParameter(o,Iat)),O},this.destroy=function(){M.releaseStatesOfProgram(this),R.deleteProgram(o),this.program=void 0},this.type=c.shaderType,this.name=c.shaderName,this.id=Bat++,this.cacheKey=n,this.usedTimes=1,this.program=o,this.vertexShader=y,this.fragmentShader=T,this}let eot=0;class iot{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(n){const c=n.vertexShader,M=n.fragmentShader,R=this._getShaderStage(c),I=this._getShaderStage(M),m=this._getShaderCacheForMaterial(n);return m.has(R)===!1&&(m.add(R),R.usedTimes++),m.has(I)===!1&&(m.add(I),I.usedTimes++),this}remove(n){const c=this.materialCache.get(n);for(const M of c)M.usedTimes--,M.usedTimes===0&&this.shaderCache.delete(M.code);return this.materialCache.delete(n),this}getVertexShaderID(n){return this._getShaderStage(n.vertexShader).id}getFragmentShaderID(n){return this._getShaderStage(n.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(n){const c=this.materialCache;let M=c.get(n);return M===void 0&&(M=new Set,c.set(n,M)),M}_getShaderStage(n){const c=this.shaderCache;let M=c.get(n);return M===void 0&&(M=new sot(n),c.set(n,M)),M}}class sot{constructor(n){this.id=eot++,this.code=n,this.usedTimes=0}}function not(L,n,c,M,R,I,m){const E=new pC,i=new iot,d=new Set,S=[],u=R.logarithmicDepthBuffer,l=R.vertexTextures;let h=R.precision;const r={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function o(b){return d.add(b),b===0?"uv":`uv${b}`}function p(b,O,D,B,G){const V=B.fog,k=G.geometry,U=b.isMeshStandardMaterial?B.environment:null,W=(b.isMeshStandardMaterial?c:n).get(b.envMap||U),X=W&&W.mapping===qm?W.image.height:null,_=r[b.type];b.precision!==null&&(h=R.getMaxPrecision(b.precision),h!==b.precision&&console.warn("THREE.WebGLProgram.getParameters:",b.precision,"not supported, using",h,"instead."));const Q=k.morphAttributes.position||k.morphAttributes.normal||k.morphAttributes.color,j=Q!==void 0?Q.length:0;let it=0;k.morphAttributes.position!==void 0&&(it=1),k.morphAttributes.normal!==void 0&&(it=2),k.morphAttributes.color!==void 0&&(it=3);let K,J,Y,q;if(_){const Je=Xr[_];K=Je.vertexShader,J=Je.fragmentShader}else K=b.vertexShader,J=b.fragmentShader,i.update(b),Y=i.getVertexShaderID(b),q=i.getFragmentShaderID(b);const $=L.getRenderTarget(),et=L.state.buffers.depth.getReversed(),rt=G.isInstancedMesh===!0,at=G.isBatchedMesh===!0,lt=!!b.map,vt=!!b.matcap,xt=!!W,ut=!!b.aoMap,mt=!!b.lightMap,Tt=!!b.bumpMap,bt=!!b.normalMap,St=!!b.displacementMap,Gt=!!b.emissiveMap,Nt=!!b.metalnessMap,zt=!!b.roughnessMap,Lt=b.anisotropy>0,ct=b.clearcoat>0,ot=b.dispersion>0,Mt=b.iridescence>0,Ot=b.sheen>0,Ut=b.transmission>0,Rt=Lt&&!!b.anisotropyMap,_t=ct&&!!b.clearcoatMap,Yt=ct&&!!b.clearcoatNormalMap,ee=ct&&!!b.clearcoatRoughnessMap,$t=Mt&&!!b.iridescenceMap,kt=Mt&&!!b.iridescenceThicknessMap,Vt=Ot&&!!b.sheenColorMap,ne=Ot&&!!b.sheenRoughnessMap,le=!!b.specularMap,te=!!b.specularColorMap,xe=!!b.specularIntensityMap,Ct=Ut&&!!b.transmissionMap,jt=Ut&&!!b.thicknessMap,Zt=!!b.gradientMap,oe=!!b.alphaMap,Jt=b.alphaTest>0,Xt=!!b.alphaHash,ue=!!b.extensions;let Pe=Ro;b.toneMapped&&($===null||$.isXRRenderTarget===!0)&&(Pe=L.toneMapping);const ai={shaderID:_,shaderType:b.type,shaderName:b.name,vertexShader:K,fragmentShader:J,defines:b.defines,customVertexShaderID:Y,customFragmentShaderID:q,isRawShaderMaterial:b.isRawShaderMaterial===!0,glslVersion:b.glslVersion,precision:h,batching:at,batchingColor:at&&G._colorsTexture!==null,instancing:rt,instancingColor:rt&&G.instanceColor!==null,instancingMorph:rt&&G.morphTexture!==null,supportsVertexTextures:l,outputColorSpace:$===null?L.outputColorSpace:$.isXRRenderTarget===!0?$.texture.colorSpace:Mu,alphaToCoverage:!!b.alphaToCoverage,map:lt,matcap:vt,envMap:xt,envMapMode:xt&&W.mapping,envMapCubeUVHeight:X,aoMap:ut,lightMap:mt,bumpMap:Tt,normalMap:bt,displacementMap:l&&St,emissiveMap:Gt,normalMapObjectSpace:bt&&b.normalMapType===Yet,normalMapTangentSpace:bt&&b.normalMapType===fC,metalnessMap:Nt,roughnessMap:zt,anisotropy:Lt,anisotropyMap:Rt,clearcoat:ct,clearcoatMap:_t,clearcoatNormalMap:Yt,clearcoatRoughnessMap:ee,dispersion:ot,iridescence:Mt,iridescenceMap:$t,iridescenceThicknessMap:kt,sheen:Ot,sheenColorMap:Vt,sheenRoughnessMap:ne,specularMap:le,specularColorMap:te,specularIntensityMap:xe,transmission:Ut,transmissionMap:Ct,thicknessMap:jt,gradientMap:Zt,opaque:b.transparent===!1&&b.blending===vu&&b.alphaToCoverage===!1,alphaMap:oe,alphaTest:Jt,alphaHash:Xt,combine:b.combine,mapUv:lt&&o(b.map.channel),aoMapUv:ut&&o(b.aoMap.channel),lightMapUv:mt&&o(b.lightMap.channel),bumpMapUv:Tt&&o(b.bumpMap.channel),normalMapUv:bt&&o(b.normalMap.channel),displacementMapUv:St&&o(b.displacementMap.channel),emissiveMapUv:Gt&&o(b.emissiveMap.channel),metalnessMapUv:Nt&&o(b.metalnessMap.channel),roughnessMapUv:zt&&o(b.roughnessMap.channel),anisotropyMapUv:Rt&&o(b.anisotropyMap.channel),clearcoatMapUv:_t&&o(b.clearcoatMap.channel),clearcoatNormalMapUv:Yt&&o(b.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ee&&o(b.clearcoatRoughnessMap.channel),iridescenceMapUv:$t&&o(b.iridescenceMap.channel),iridescenceThicknessMapUv:kt&&o(b.iridescenceThicknessMap.channel),sheenColorMapUv:Vt&&o(b.sheenColorMap.channel),sheenRoughnessMapUv:ne&&o(b.sheenRoughnessMap.channel),specularMapUv:le&&o(b.specularMap.channel),specularColorMapUv:te&&o(b.specularColorMap.channel),specularIntensityMapUv:xe&&o(b.specularIntensityMap.channel),transmissionMapUv:Ct&&o(b.transmissionMap.channel),thicknessMapUv:jt&&o(b.thicknessMap.channel),alphaMapUv:oe&&o(b.alphaMap.channel),vertexTangents:!!k.attributes.tangent&&(bt||Lt),vertexColors:b.vertexColors,vertexAlphas:b.vertexColors===!0&&!!k.attributes.color&&k.attributes.color.itemSize===4,pointsUvs:G.isPoints===!0&&!!k.attributes.uv&&(lt||oe),fog:!!V,useFog:b.fog===!0,fogExp2:!!V&&V.isFogExp2,flatShading:b.flatShading===!0&&b.wireframe===!1,sizeAttenuation:b.sizeAttenuation===!0,logarithmicDepthBuffer:u,reverseDepthBuffer:et,skinning:G.isSkinnedMesh===!0,morphTargets:k.morphAttributes.position!==void 0,morphNormals:k.morphAttributes.normal!==void 0,morphColors:k.morphAttributes.color!==void 0,morphTargetsCount:j,morphTextureStride:it,numDirLights:O.directional.length,numPointLights:O.point.length,numSpotLights:O.spot.length,numSpotLightMaps:O.spotLightMap.length,numRectAreaLights:O.rectArea.length,numHemiLights:O.hemi.length,numDirLightShadows:O.directionalShadowMap.length,numPointLightShadows:O.pointShadowMap.length,numSpotLightShadows:O.spotShadowMap.length,numSpotLightShadowsWithMaps:O.numSpotLightShadowsWithMaps,numLightProbes:O.numLightProbes,numClippingPlanes:m.numPlanes,numClipIntersection:m.numIntersection,dithering:b.dithering,shadowMapEnabled:L.shadowMap.enabled&&D.length>0,shadowMapType:L.shadowMap.type,toneMapping:Pe,decodeVideoTexture:lt&&b.map.isVideoTexture===!0&&We.getTransfer(b.map.colorSpace)===ii,decodeVideoTextureEmissive:Gt&&b.emissiveMap.isVideoTexture===!0&&We.getTransfer(b.emissiveMap.colorSpace)===ii,premultipliedAlpha:b.premultipliedAlpha,doubleSided:b.side===sn,flipSided:b.side===nn,useDepthPacking:b.depthPacking>=0,depthPacking:b.depthPacking||0,index0AttributeName:b.index0AttributeName,extensionClipCullDistance:ue&&b.extensions.clipCullDistance===!0&&M.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ue&&b.extensions.multiDraw===!0||at)&&M.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:M.has("KHR_parallel_shader_compile"),customProgramCacheKey:b.customProgramCacheKey()};return ai.vertexUv1s=d.has(1),ai.vertexUv2s=d.has(2),ai.vertexUv3s=d.has(3),d.clear(),ai}function a(b){const O=[];if(b.shaderID?O.push(b.shaderID):(O.push(b.customVertexShaderID),O.push(b.customFragmentShaderID)),b.defines!==void 0)for(const D in b.defines)O.push(D),O.push(b.defines[D]);return b.isRawShaderMaterial===!1&&(v(O,b),x(O,b),O.push(L.outputColorSpace)),O.push(b.customProgramCacheKey),O.join()}function v(b,O){b.push(O.precision),b.push(O.outputColorSpace),b.push(O.envMapMode),b.push(O.envMapCubeUVHeight),b.push(O.mapUv),b.push(O.alphaMapUv),b.push(O.lightMapUv),b.push(O.aoMapUv),b.push(O.bumpMapUv),b.push(O.normalMapUv),b.push(O.displacementMapUv),b.push(O.emissiveMapUv),b.push(O.metalnessMapUv),b.push(O.roughnessMapUv),b.push(O.anisotropyMapUv),b.push(O.clearcoatMapUv),b.push(O.clearcoatNormalMapUv),b.push(O.clearcoatRoughnessMapUv),b.push(O.iridescenceMapUv),b.push(O.iridescenceThicknessMapUv),b.push(O.sheenColorMapUv),b.push(O.sheenRoughnessMapUv),b.push(O.specularMapUv),b.push(O.specularColorMapUv),b.push(O.specularIntensityMapUv),b.push(O.transmissionMapUv),b.push(O.thicknessMapUv),b.push(O.combine),b.push(O.fogExp2),b.push(O.sizeAttenuation),b.push(O.morphTargetsCount),b.push(O.morphAttributeCount),b.push(O.numDirLights),b.push(O.numPointLights),b.push(O.numSpotLights),b.push(O.numSpotLightMaps),b.push(O.numHemiLights),b.push(O.numRectAreaLights),b.push(O.numDirLightShadows),b.push(O.numPointLightShadows),b.push(O.numSpotLightShadows),b.push(O.numSpotLightShadowsWithMaps),b.push(O.numLightProbes),b.push(O.shadowMapType),b.push(O.toneMapping),b.push(O.numClippingPlanes),b.push(O.numClipIntersection),b.push(O.depthPacking)}function x(b,O){E.disableAll(),O.supportsVertexTextures&&E.enable(0),O.instancing&&E.enable(1),O.instancingColor&&E.enable(2),O.instancingMorph&&E.enable(3),O.matcap&&E.enable(4),O.envMap&&E.enable(5),O.normalMapObjectSpace&&E.enable(6),O.normalMapTangentSpace&&E.enable(7),O.clearcoat&&E.enable(8),O.iridescence&&E.enable(9),O.alphaTest&&E.enable(10),O.vertexColors&&E.enable(11),O.vertexAlphas&&E.enable(12),O.vertexUv1s&&E.enable(13),O.vertexUv2s&&E.enable(14),O.vertexUv3s&&E.enable(15),O.vertexTangents&&E.enable(16),O.anisotropy&&E.enable(17),O.alphaHash&&E.enable(18),O.batching&&E.enable(19),O.dispersion&&E.enable(20),O.batchingColor&&E.enable(21),O.gradientMap&&E.enable(22),b.push(E.mask),E.disableAll(),O.fog&&E.enable(0),O.useFog&&E.enable(1),O.flatShading&&E.enable(2),O.logarithmicDepthBuffer&&E.enable(3),O.reverseDepthBuffer&&E.enable(4),O.skinning&&E.enable(5),O.morphTargets&&E.enable(6),O.morphNormals&&E.enable(7),O.morphColors&&E.enable(8),O.premultipliedAlpha&&E.enable(9),O.shadowMapEnabled&&E.enable(10),O.doubleSided&&E.enable(11),O.flipSided&&E.enable(12),O.useDepthPacking&&E.enable(13),O.dithering&&E.enable(14),O.transmission&&E.enable(15),O.sheen&&E.enable(16),O.opaque&&E.enable(17),O.pointsUvs&&E.enable(18),O.decodeVideoTexture&&E.enable(19),O.decodeVideoTextureEmissive&&E.enable(20),O.alphaToCoverage&&E.enable(21),b.push(E.mask)}function g(b){const O=r[b.type];let D;if(O){const B=Xr[O];D=Cit.clone(B.uniforms)}else D=b.uniforms;return D}function y(b,O){let D;for(let B=0,G=S.length;B<G;B++){const V=S[B];if(V.cacheKey===O){D=V,++D.usedTimes;break}}return D===void 0&&(D=new tot(L,O,b,I),S.push(D)),D}function T(b){if(--b.usedTimes===0){const O=S.indexOf(b);S[O]=S[S.length-1],S.pop(),b.destroy()}}function P(b){i.remove(b)}function A(){i.dispose()}return{getParameters:p,getProgramCacheKey:a,getUniforms:g,acquireProgram:y,releaseProgram:T,releaseShaderCache:P,programs:S,dispose:A}}function rot(){let L=new WeakMap;function n(m){return L.has(m)}function c(m){let E=L.get(m);return E===void 0&&(E={},L.set(m,E)),E}function M(m){L.delete(m)}function R(m,E,i){L.get(m)[E]=i}function I(){L=new WeakMap}return{has:n,get:c,remove:M,update:R,dispose:I}}function aot(L,n){return L.groupOrder!==n.groupOrder?L.groupOrder-n.groupOrder:L.renderOrder!==n.renderOrder?L.renderOrder-n.renderOrder:L.material.id!==n.material.id?L.material.id-n.material.id:L.z!==n.z?L.z-n.z:L.id-n.id}function bL(L,n){return L.groupOrder!==n.groupOrder?L.groupOrder-n.groupOrder:L.renderOrder!==n.renderOrder?L.renderOrder-n.renderOrder:L.z!==n.z?n.z-L.z:L.id-n.id}function AL(){const L=[];let n=0;const c=[],M=[],R=[];function I(){n=0,c.length=0,M.length=0,R.length=0}function m(u,l,h,r,o,p){let a=L[n];return a===void 0?(a={id:u.id,object:u,geometry:l,material:h,groupOrder:r,renderOrder:u.renderOrder,z:o,group:p},L[n]=a):(a.id=u.id,a.object=u,a.geometry=l,a.material=h,a.groupOrder=r,a.renderOrder=u.renderOrder,a.z=o,a.group=p),n++,a}function E(u,l,h,r,o,p){const a=m(u,l,h,r,o,p);h.transmission>0?M.push(a):h.transparent===!0?R.push(a):c.push(a)}function i(u,l,h,r,o,p){const a=m(u,l,h,r,o,p);h.transmission>0?M.unshift(a):h.transparent===!0?R.unshift(a):c.unshift(a)}function d(u,l){c.length>1&&c.sort(u||aot),M.length>1&&M.sort(l||bL),R.length>1&&R.sort(l||bL)}function S(){for(let u=n,l=L.length;u<l;u++){const h=L[u];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}}return{opaque:c,transmissive:M,transparent:R,init:I,push:E,unshift:i,finish:S,sort:d}}function oot(){let L=new WeakMap;function n(M,R){const I=L.get(M);let m;return I===void 0?(m=new AL,L.set(M,[m])):R>=I.length?(m=new AL,I.push(m)):m=I[R],m}function c(){L=new WeakMap}return{get:n,dispose:c}}function hot(){const L={};return{get:function(n){if(L[n.id]!==void 0)return L[n.id];let c;switch(n.type){case"DirectionalLight":c={direction:new wt,color:new Ae};break;case"SpotLight":c={position:new wt,direction:new wt,color:new Ae,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":c={position:new wt,color:new Ae,distance:0,decay:0};break;case"HemisphereLight":c={direction:new wt,skyColor:new Ae,groundColor:new Ae};break;case"RectAreaLight":c={color:new Ae,position:new wt,halfWidth:new wt,halfHeight:new wt};break}return L[n.id]=c,c}}}function lot(){const L={};return{get:function(n){if(L[n.id]!==void 0)return L[n.id];let c;switch(n.type){case"DirectionalLight":c={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve};break;case"SpotLight":c={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve};break;case"PointLight":c={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve,shadowCameraNear:1,shadowCameraFar:1e3};break}return L[n.id]=c,c}}}let uot=0;function dot(L,n){return(n.castShadow?2:0)-(L.castShadow?2:0)+(n.map?1:0)-(L.map?1:0)}function fot(L){const n=new hot,c=lot(),M={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)M.probe.push(new wt);const R=new wt,I=new ei,m=new ei;function E(d){let S=0,u=0,l=0;for(let b=0;b<9;b++)M.probe[b].set(0,0,0);let h=0,r=0,o=0,p=0,a=0,v=0,x=0,g=0,y=0,T=0,P=0;d.sort(dot);for(let b=0,O=d.length;b<O;b++){const D=d[b],B=D.color,G=D.intensity,V=D.distance,k=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)S+=B.r*G,u+=B.g*G,l+=B.b*G;else if(D.isLightProbe){for(let U=0;U<9;U++)M.probe[U].addScaledVector(D.sh.coefficients[U],G);P++}else if(D.isDirectionalLight){const U=n.get(D);if(U.color.copy(D.color).multiplyScalar(D.intensity),D.castShadow){const W=D.shadow,X=c.get(D);X.shadowIntensity=W.intensity,X.shadowBias=W.bias,X.shadowNormalBias=W.normalBias,X.shadowRadius=W.radius,X.shadowMapSize=W.mapSize,M.directionalShadow[h]=X,M.directionalShadowMap[h]=k,M.directionalShadowMatrix[h]=D.shadow.matrix,v++}M.directional[h]=U,h++}else if(D.isSpotLight){const U=n.get(D);U.position.setFromMatrixPosition(D.matrixWorld),U.color.copy(B).multiplyScalar(G),U.distance=V,U.coneCos=Math.cos(D.angle),U.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),U.decay=D.decay,M.spot[o]=U;const W=D.shadow;if(D.map&&(M.spotLightMap[y]=D.map,y++,W.updateMatrices(D),D.castShadow&&T++),M.spotLightMatrix[o]=W.matrix,D.castShadow){const X=c.get(D);X.shadowIntensity=W.intensity,X.shadowBias=W.bias,X.shadowNormalBias=W.normalBias,X.shadowRadius=W.radius,X.shadowMapSize=W.mapSize,M.spotShadow[o]=X,M.spotShadowMap[o]=k,g++}o++}else if(D.isRectAreaLight){const U=n.get(D);U.color.copy(B).multiplyScalar(G),U.halfWidth.set(D.width*.5,0,0),U.halfHeight.set(0,D.height*.5,0),M.rectArea[p]=U,p++}else if(D.isPointLight){const U=n.get(D);if(U.color.copy(D.color).multiplyScalar(D.intensity),U.distance=D.distance,U.decay=D.decay,D.castShadow){const W=D.shadow,X=c.get(D);X.shadowIntensity=W.intensity,X.shadowBias=W.bias,X.shadowNormalBias=W.normalBias,X.shadowRadius=W.radius,X.shadowMapSize=W.mapSize,X.shadowCameraNear=W.camera.near,X.shadowCameraFar=W.camera.far,M.pointShadow[r]=X,M.pointShadowMap[r]=k,M.pointShadowMatrix[r]=D.shadow.matrix,x++}M.point[r]=U,r++}else if(D.isHemisphereLight){const U=n.get(D);U.skyColor.copy(D.color).multiplyScalar(G),U.groundColor.copy(D.groundColor).multiplyScalar(G),M.hemi[a]=U,a++}}p>0&&(L.has("OES_texture_float_linear")===!0?(M.rectAreaLTC1=se.LTC_FLOAT_1,M.rectAreaLTC2=se.LTC_FLOAT_2):(M.rectAreaLTC1=se.LTC_HALF_1,M.rectAreaLTC2=se.LTC_HALF_2)),M.ambient[0]=S,M.ambient[1]=u,M.ambient[2]=l;const A=M.hash;(A.directionalLength!==h||A.pointLength!==r||A.spotLength!==o||A.rectAreaLength!==p||A.hemiLength!==a||A.numDirectionalShadows!==v||A.numPointShadows!==x||A.numSpotShadows!==g||A.numSpotMaps!==y||A.numLightProbes!==P)&&(M.directional.length=h,M.spot.length=o,M.rectArea.length=p,M.point.length=r,M.hemi.length=a,M.directionalShadow.length=v,M.directionalShadowMap.length=v,M.pointShadow.length=x,M.pointShadowMap.length=x,M.spotShadow.length=g,M.spotShadowMap.length=g,M.directionalShadowMatrix.length=v,M.pointShadowMatrix.length=x,M.spotLightMatrix.length=g+y-T,M.spotLightMap.length=y,M.numSpotLightShadowsWithMaps=T,M.numLightProbes=P,A.directionalLength=h,A.pointLength=r,A.spotLength=o,A.rectAreaLength=p,A.hemiLength=a,A.numDirectionalShadows=v,A.numPointShadows=x,A.numSpotShadows=g,A.numSpotMaps=y,A.numLightProbes=P,M.version=uot++)}function i(d,S){let u=0,l=0,h=0,r=0,o=0;const p=S.matrixWorldInverse;for(let a=0,v=d.length;a<v;a++){const x=d[a];if(x.isDirectionalLight){const g=M.directional[u];g.direction.setFromMatrixPosition(x.matrixWorld),R.setFromMatrixPosition(x.target.matrixWorld),g.direction.sub(R),g.direction.transformDirection(p),u++}else if(x.isSpotLight){const g=M.spot[h];g.position.setFromMatrixPosition(x.matrixWorld),g.position.applyMatrix4(p),g.direction.setFromMatrixPosition(x.matrixWorld),R.setFromMatrixPosition(x.target.matrixWorld),g.direction.sub(R),g.direction.transformDirection(p),h++}else if(x.isRectAreaLight){const g=M.rectArea[r];g.position.setFromMatrixPosition(x.matrixWorld),g.position.applyMatrix4(p),m.identity(),I.copy(x.matrixWorld),I.premultiply(p),m.extractRotation(I),g.halfWidth.set(x.width*.5,0,0),g.halfHeight.set(0,x.height*.5,0),g.halfWidth.applyMatrix4(m),g.halfHeight.applyMatrix4(m),r++}else if(x.isPointLight){const g=M.point[l];g.position.setFromMatrixPosition(x.matrixWorld),g.position.applyMatrix4(p),l++}else if(x.isHemisphereLight){const g=M.hemi[o];g.direction.setFromMatrixPosition(x.matrixWorld),g.direction.transformDirection(p),o++}}}return{setup:E,setupView:i,state:M}}function RL(L){const n=new fot(L),c=[],M=[];function R(S){d.camera=S,c.length=0,M.length=0}function I(S){c.push(S)}function m(S){M.push(S)}function E(){n.setup(c)}function i(S){n.setupView(c,S)}const d={lightsArray:c,shadowsArray:M,camera:null,lights:n,transmissionRenderTarget:{}};return{init:R,state:d,setupLights:E,setupLightsView:i,pushLight:I,pushShadow:m}}function cot(L){let n=new WeakMap;function c(R,I=0){const m=n.get(R);let E;return m===void 0?(E=new RL(L),n.set(R,[E])):I>=m.length?(E=new RL(L),m.push(E)):E=m[I],E}function M(){n=new WeakMap}return{get:c,dispose:M}}const pot=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,vot=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function mot(L,n,c){let M=new mC;const R=new Ve,I=new Ve,m=new si,E=new Dit({depthPacking:Het}),i=new Iit,d={},S=c.maxTextureSize,u={[Ia]:nn,[nn]:Ia,[sn]:sn},l=new Zr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ve},radius:{value:4}},vertexShader:pot,fragmentShader:vot}),h=l.clone();h.defines.HORIZONTAL_PASS=1;const r=new $n;r.setAttribute("position",new $r(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const o=new fi(r,l),p=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PO;let a=this.type;this.render=function(T,P,A){if(p.enabled===!1||p.autoUpdate===!1&&p.needsUpdate===!1||T.length===0)return;const b=L.getRenderTarget(),O=L.getActiveCubeFace(),D=L.getActiveMipmapLevel(),B=L.state;B.setBlending(Ao),B.buffers.color.setClear(1,1,1,1),B.buffers.depth.setTest(!0),B.setScissorTest(!1);const G=a!==ba&&this.type===ba,V=a===ba&&this.type!==ba;for(let k=0,U=T.length;k<U;k++){const W=T[k],X=W.shadow;if(X===void 0){console.warn("THREE.WebGLShadowMap:",W,"has no shadow.");continue}if(X.autoUpdate===!1&&X.needsUpdate===!1)continue;R.copy(X.mapSize);const _=X.getFrameExtents();if(R.multiply(_),I.copy(X.mapSize),(R.x>S||R.y>S)&&(R.x>S&&(I.x=Math.floor(S/_.x),R.x=I.x*_.x,X.mapSize.x=I.x),R.y>S&&(I.y=Math.floor(S/_.y),R.y=I.y*_.y,X.mapSize.y=I.y)),X.map===null||G===!0||V===!0){const j=this.type!==ba?{minFilter:Xs,magFilter:Xs}:{};X.map!==null&&X.map.dispose(),X.map=new Ba(R.x,R.y,j),X.map.texture.name=W.name+".shadowMap",X.camera.updateProjectionMatrix()}L.setRenderTarget(X.map),L.clear();const Q=X.getViewportCount();for(let j=0;j<Q;j++){const it=X.getViewport(j);m.set(I.x*it.x,I.y*it.y,I.x*it.z,I.y*it.w),B.viewport(m),X.updateMatrices(W,j),M=X.getFrustum(),g(P,A,X.camera,W,this.type)}X.isPointLightShadow!==!0&&this.type===ba&&v(X,A),X.needsUpdate=!1}a=this.type,p.needsUpdate=!1,L.setRenderTarget(b,O,D)};function v(T,P){const A=n.update(o);l.defines.VSM_SAMPLES!==T.blurSamples&&(l.defines.VSM_SAMPLES=T.blurSamples,h.defines.VSM_SAMPLES=T.blurSamples,l.needsUpdate=!0,h.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new Ba(R.x,R.y)),l.uniforms.shadow_pass.value=T.map.texture,l.uniforms.resolution.value=T.mapSize,l.uniforms.radius.value=T.radius,L.setRenderTarget(T.mapPass),L.clear(),L.renderBufferDirect(P,null,A,l,o,null),h.uniforms.shadow_pass.value=T.mapPass.texture,h.uniforms.resolution.value=T.mapSize,h.uniforms.radius.value=T.radius,L.setRenderTarget(T.map),L.clear(),L.renderBufferDirect(P,null,A,h,o,null)}function x(T,P,A,b){let O=null;const D=A.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(D!==void 0)O=D;else if(O=A.isPointLight===!0?i:E,L.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0||P.alphaToCoverage===!0){const B=O.uuid,G=P.uuid;let V=d[B];V===void 0&&(V={},d[B]=V);let k=V[G];k===void 0&&(k=O.clone(),V[G]=k,P.addEventListener("dispose",y)),O=k}if(O.visible=P.visible,O.wireframe=P.wireframe,b===ba?O.side=P.shadowSide!==null?P.shadowSide:P.side:O.side=P.shadowSide!==null?P.shadowSide:u[P.side],O.alphaMap=P.alphaMap,O.alphaTest=P.alphaToCoverage===!0?.5:P.alphaTest,O.map=P.map,O.clipShadows=P.clipShadows,O.clippingPlanes=P.clippingPlanes,O.clipIntersection=P.clipIntersection,O.displacementMap=P.displacementMap,O.displacementScale=P.displacementScale,O.displacementBias=P.displacementBias,O.wireframeLinewidth=P.wireframeLinewidth,O.linewidth=P.linewidth,A.isPointLight===!0&&O.isMeshDistanceMaterial===!0){const B=L.properties.get(O);B.light=A}return O}function g(T,P,A,b,O){if(T.visible===!1)return;if(T.layers.test(P.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&O===ba)&&(!T.frustumCulled||M.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,T.matrixWorld);const G=n.update(T),V=T.material;if(Array.isArray(V)){const k=G.groups;for(let U=0,W=k.length;U<W;U++){const X=k[U],_=V[X.materialIndex];if(_&&_.visible){const Q=x(T,_,b,O);T.onBeforeShadow(L,T,P,A,G,Q,X),L.renderBufferDirect(A,null,G,Q,T,X),T.onAfterShadow(L,T,P,A,G,Q,X)}}}else if(V.visible){const k=x(T,V,b,O);T.onBeforeShadow(L,T,P,A,G,k,null),L.renderBufferDirect(A,null,G,k,T,null),T.onAfterShadow(L,T,P,A,G,k,null)}}const B=T.children;for(let G=0,V=B.length;G<V;G++)g(B[G],P,A,b,O)}function y(T){T.target.removeEventListener("dispose",y);for(const A in d){const b=d[A],O=T.target.uuid;O in b&&(b[O].dispose(),delete b[O])}}}const got={[sT]:nT,[rT]:hT,[aT]:lT,[Su]:oT,[nT]:sT,[hT]:rT,[lT]:aT,[oT]:Su};function xot(L,n){function c(){let Ct=!1;const jt=new si;let Zt=null;const oe=new si(0,0,0,0);return{setMask:function(Jt){Zt!==Jt&&!Ct&&(L.colorMask(Jt,Jt,Jt,Jt),Zt=Jt)},setLocked:function(Jt){Ct=Jt},setClear:function(Jt,Xt,ue,Pe,ai){ai===!0&&(Jt*=Pe,Xt*=Pe,ue*=Pe),jt.set(Jt,Xt,ue,Pe),oe.equals(jt)===!1&&(L.clearColor(Jt,Xt,ue,Pe),oe.copy(jt))},reset:function(){Ct=!1,Zt=null,oe.set(-1,0,0,0)}}}function M(){let Ct=!1,jt=!1,Zt=null,oe=null,Jt=null;return{setReversed:function(Xt){if(jt!==Xt){const ue=n.get("EXT_clip_control");Xt?ue.clipControlEXT(ue.LOWER_LEFT_EXT,ue.ZERO_TO_ONE_EXT):ue.clipControlEXT(ue.LOWER_LEFT_EXT,ue.NEGATIVE_ONE_TO_ONE_EXT),jt=Xt;const Pe=Jt;Jt=null,this.setClear(Pe)}},getReversed:function(){return jt},setTest:function(Xt){Xt?$(L.DEPTH_TEST):et(L.DEPTH_TEST)},setMask:function(Xt){Zt!==Xt&&!Ct&&(L.depthMask(Xt),Zt=Xt)},setFunc:function(Xt){if(jt&&(Xt=got[Xt]),oe!==Xt){switch(Xt){case sT:L.depthFunc(L.NEVER);break;case nT:L.depthFunc(L.ALWAYS);break;case rT:L.depthFunc(L.LESS);break;case Su:L.depthFunc(L.LEQUAL);break;case aT:L.depthFunc(L.EQUAL);break;case oT:L.depthFunc(L.GEQUAL);break;case hT:L.depthFunc(L.GREATER);break;case lT:L.depthFunc(L.NOTEQUAL);break;default:L.depthFunc(L.LEQUAL)}oe=Xt}},setLocked:function(Xt){Ct=Xt},setClear:function(Xt){Jt!==Xt&&(jt&&(Xt=1-Xt),L.clearDepth(Xt),Jt=Xt)},reset:function(){Ct=!1,Zt=null,oe=null,Jt=null,jt=!1}}}function R(){let Ct=!1,jt=null,Zt=null,oe=null,Jt=null,Xt=null,ue=null,Pe=null,ai=null;return{setTest:function(Je){Ct||(Je?$(L.STENCIL_TEST):et(L.STENCIL_TEST))},setMask:function(Je){jt!==Je&&!Ct&&(L.stencilMask(Je),jt=Je)},setFunc:function(Je,on,_n){(Zt!==Je||oe!==on||Jt!==_n)&&(L.stencilFunc(Je,on,_n),Zt=Je,oe=on,Jt=_n)},setOp:function(Je,on,_n){(Xt!==Je||ue!==on||Pe!==_n)&&(L.stencilOp(Je,on,_n),Xt=Je,ue=on,Pe=_n)},setLocked:function(Je){Ct=Je},setClear:function(Je){ai!==Je&&(L.clearStencil(Je),ai=Je)},reset:function(){Ct=!1,jt=null,Zt=null,oe=null,Jt=null,Xt=null,ue=null,Pe=null,ai=null}}}const I=new c,m=new M,E=new R,i=new WeakMap,d=new WeakMap;let S={},u={},l=new WeakMap,h=[],r=null,o=!1,p=null,a=null,v=null,x=null,g=null,y=null,T=null,P=new Ae(0,0,0),A=0,b=!1,O=null,D=null,B=null,G=null,V=null;const k=L.getParameter(L.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let U=!1,W=0;const X=L.getParameter(L.VERSION);X.indexOf("WebGL")!==-1?(W=parseFloat(/^WebGL (\d)/.exec(X)[1]),U=W>=1):X.indexOf("OpenGL ES")!==-1&&(W=parseFloat(/^OpenGL ES (\d)/.exec(X)[1]),U=W>=2);let _=null,Q={};const j=L.getParameter(L.SCISSOR_BOX),it=L.getParameter(L.VIEWPORT),K=new si().fromArray(j),J=new si().fromArray(it);function Y(Ct,jt,Zt,oe){const Jt=new Uint8Array(4),Xt=L.createTexture();L.bindTexture(Ct,Xt),L.texParameteri(Ct,L.TEXTURE_MIN_FILTER,L.NEAREST),L.texParameteri(Ct,L.TEXTURE_MAG_FILTER,L.NEAREST);for(let ue=0;ue<Zt;ue++)Ct===L.TEXTURE_3D||Ct===L.TEXTURE_2D_ARRAY?L.texImage3D(jt,0,L.RGBA,1,1,oe,0,L.RGBA,L.UNSIGNED_BYTE,Jt):L.texImage2D(jt+ue,0,L.RGBA,1,1,0,L.RGBA,L.UNSIGNED_BYTE,Jt);return Xt}const q={};q[L.TEXTURE_2D]=Y(L.TEXTURE_2D,L.TEXTURE_2D,1),q[L.TEXTURE_CUBE_MAP]=Y(L.TEXTURE_CUBE_MAP,L.TEXTURE_CUBE_MAP_POSITIVE_X,6),q[L.TEXTURE_2D_ARRAY]=Y(L.TEXTURE_2D_ARRAY,L.TEXTURE_2D_ARRAY,1,1),q[L.TEXTURE_3D]=Y(L.TEXTURE_3D,L.TEXTURE_3D,1,1),I.setClear(0,0,0,1),m.setClear(1),E.setClear(0),$(L.DEPTH_TEST),m.setFunc(Su),Tt(!1),bt(MR),$(L.CULL_FACE),ut(Ao);function $(Ct){S[Ct]!==!0&&(L.enable(Ct),S[Ct]=!0)}function et(Ct){S[Ct]!==!1&&(L.disable(Ct),S[Ct]=!1)}function rt(Ct,jt){return u[Ct]!==jt?(L.bindFramebuffer(Ct,jt),u[Ct]=jt,Ct===L.DRAW_FRAMEBUFFER&&(u[L.FRAMEBUFFER]=jt),Ct===L.FRAMEBUFFER&&(u[L.DRAW_FRAMEBUFFER]=jt),!0):!1}function at(Ct,jt){let Zt=h,oe=!1;if(Ct){Zt=l.get(jt),Zt===void 0&&(Zt=[],l.set(jt,Zt));const Jt=Ct.textures;if(Zt.length!==Jt.length||Zt[0]!==L.COLOR_ATTACHMENT0){for(let Xt=0,ue=Jt.length;Xt<ue;Xt++)Zt[Xt]=L.COLOR_ATTACHMENT0+Xt;Zt.length=Jt.length,oe=!0}}else Zt[0]!==L.BACK&&(Zt[0]=L.BACK,oe=!0);oe&&L.drawBuffers(Zt)}function lt(Ct){return r!==Ct?(L.useProgram(Ct),r=Ct,!0):!1}const vt={[Dh]:L.FUNC_ADD,[vet]:L.FUNC_SUBTRACT,[met]:L.FUNC_REVERSE_SUBTRACT};vt[get]=L.MIN,vt[xet]=L.MAX;const xt={[yet]:L.ZERO,[Tet]:L.ONE,[Cet]:L.SRC_COLOR,[eT]:L.SRC_ALPHA,[Aet]:L.SRC_ALPHA_SATURATE,[wet]:L.DST_COLOR,[Eet]:L.DST_ALPHA,[Met]:L.ONE_MINUS_SRC_COLOR,[iT]:L.ONE_MINUS_SRC_ALPHA,[bet]:L.ONE_MINUS_DST_COLOR,[Pet]:L.ONE_MINUS_DST_ALPHA,[Ret]:L.CONSTANT_COLOR,[Let]:L.ONE_MINUS_CONSTANT_COLOR,[Oet]:L.CONSTANT_ALPHA,[Fet]:L.ONE_MINUS_CONSTANT_ALPHA};function ut(Ct,jt,Zt,oe,Jt,Xt,ue,Pe,ai,Je){if(Ct===Ao){o===!0&&(et(L.BLEND),o=!1);return}if(o===!1&&($(L.BLEND),o=!0),Ct!==pet){if(Ct!==p||Je!==b){if((a!==Dh||g!==Dh)&&(L.blendEquation(L.FUNC_ADD),a=Dh,g=Dh),Je)switch(Ct){case vu:L.blendFuncSeparate(L.ONE,L.ONE_MINUS_SRC_ALPHA,L.ONE,L.ONE_MINUS_SRC_ALPHA);break;case ER:L.blendFunc(L.ONE,L.ONE);break;case PR:L.blendFuncSeparate(L.ZERO,L.ONE_MINUS_SRC_COLOR,L.ZERO,L.ONE);break;case wR:L.blendFuncSeparate(L.DST_COLOR,L.ONE_MINUS_SRC_ALPHA,L.ZERO,L.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ct);break}else switch(Ct){case vu:L.blendFuncSeparate(L.SRC_ALPHA,L.ONE_MINUS_SRC_ALPHA,L.ONE,L.ONE_MINUS_SRC_ALPHA);break;case ER:L.blendFuncSeparate(L.SRC_ALPHA,L.ONE,L.ONE,L.ONE);break;case PR:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case wR:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",Ct);break}v=null,x=null,y=null,T=null,P.set(0,0,0),A=0,p=Ct,b=Je}return}Jt=Jt||jt,Xt=Xt||Zt,ue=ue||oe,(jt!==a||Jt!==g)&&(L.blendEquationSeparate(vt[jt],vt[Jt]),a=jt,g=Jt),(Zt!==v||oe!==x||Xt!==y||ue!==T)&&(L.blendFuncSeparate(xt[Zt],xt[oe],xt[Xt],xt[ue]),v=Zt,x=oe,y=Xt,T=ue),(Pe.equals(P)===!1||ai!==A)&&(L.blendColor(Pe.r,Pe.g,Pe.b,ai),P.copy(Pe),A=ai),p=Ct,b=!1}function mt(Ct,jt){Ct.side===sn?et(L.CULL_FACE):$(L.CULL_FACE);let Zt=Ct.side===nn;jt&&(Zt=!Zt),Tt(Zt),Ct.blending===vu&&Ct.transparent===!1?ut(Ao):ut(Ct.blending,Ct.blendEquation,Ct.blendSrc,Ct.blendDst,Ct.blendEquationAlpha,Ct.blendSrcAlpha,Ct.blendDstAlpha,Ct.blendColor,Ct.blendAlpha,Ct.premultipliedAlpha),m.setFunc(Ct.depthFunc),m.setTest(Ct.depthTest),m.setMask(Ct.depthWrite),I.setMask(Ct.colorWrite);const oe=Ct.stencilWrite;E.setTest(oe),oe&&(E.setMask(Ct.stencilWriteMask),E.setFunc(Ct.stencilFunc,Ct.stencilRef,Ct.stencilFuncMask),E.setOp(Ct.stencilFail,Ct.stencilZFail,Ct.stencilZPass)),Gt(Ct.polygonOffset,Ct.polygonOffsetFactor,Ct.polygonOffsetUnits),Ct.alphaToCoverage===!0?$(L.SAMPLE_ALPHA_TO_COVERAGE):et(L.SAMPLE_ALPHA_TO_COVERAGE)}function Tt(Ct){O!==Ct&&(Ct?L.frontFace(L.CW):L.frontFace(L.CCW),O=Ct)}function bt(Ct){Ct!==uet?($(L.CULL_FACE),Ct!==D&&(Ct===MR?L.cullFace(L.BACK):Ct===det?L.cullFace(L.FRONT):L.cullFace(L.FRONT_AND_BACK))):et(L.CULL_FACE),D=Ct}function St(Ct){Ct!==B&&(U&&L.lineWidth(Ct),B=Ct)}function Gt(Ct,jt,Zt){Ct?($(L.POLYGON_OFFSET_FILL),(G!==jt||V!==Zt)&&(L.polygonOffset(jt,Zt),G=jt,V=Zt)):et(L.POLYGON_OFFSET_FILL)}function Nt(Ct){Ct?$(L.SCISSOR_TEST):et(L.SCISSOR_TEST)}function zt(Ct){Ct===void 0&&(Ct=L.TEXTURE0+k-1),_!==Ct&&(L.activeTexture(Ct),_=Ct)}function Lt(Ct,jt,Zt){Zt===void 0&&(_===null?Zt=L.TEXTURE0+k-1:Zt=_);let oe=Q[Zt];oe===void 0&&(oe={type:void 0,texture:void 0},Q[Zt]=oe),(oe.type!==Ct||oe.texture!==jt)&&(_!==Zt&&(L.activeTexture(Zt),_=Zt),L.bindTexture(Ct,jt||q[Ct]),oe.type=Ct,oe.texture=jt)}function ct(){const Ct=Q[_];Ct!==void 0&&Ct.type!==void 0&&(L.bindTexture(Ct.type,null),Ct.type=void 0,Ct.texture=void 0)}function ot(){try{L.compressedTexImage2D(...arguments)}catch(Ct){console.error("THREE.WebGLState:",Ct)}}function Mt(){try{L.compressedTexImage3D(...arguments)}catch(Ct){console.error("THREE.WebGLState:",Ct)}}function Ot(){try{L.texSubImage2D(...arguments)}catch(Ct){console.error("THREE.WebGLState:",Ct)}}function Ut(){try{L.texSubImage3D(...arguments)}catch(Ct){console.error("THREE.WebGLState:",Ct)}}function Rt(){try{L.compressedTexSubImage2D(...arguments)}catch(Ct){console.error("THREE.WebGLState:",Ct)}}function _t(){try{L.compressedTexSubImage3D(...arguments)}catch(Ct){console.error("THREE.WebGLState:",Ct)}}function Yt(){try{L.texStorage2D(...arguments)}catch(Ct){console.error("THREE.WebGLState:",Ct)}}function ee(){try{L.texStorage3D(...arguments)}catch(Ct){console.error("THREE.WebGLState:",Ct)}}function $t(){try{L.texImage2D(...arguments)}catch(Ct){console.error("THREE.WebGLState:",Ct)}}function kt(){try{L.texImage3D(...arguments)}catch(Ct){console.error("THREE.WebGLState:",Ct)}}function Vt(Ct){K.equals(Ct)===!1&&(L.scissor(Ct.x,Ct.y,Ct.z,Ct.w),K.copy(Ct))}function ne(Ct){J.equals(Ct)===!1&&(L.viewport(Ct.x,Ct.y,Ct.z,Ct.w),J.copy(Ct))}function le(Ct,jt){let Zt=d.get(jt);Zt===void 0&&(Zt=new WeakMap,d.set(jt,Zt));let oe=Zt.get(Ct);oe===void 0&&(oe=L.getUniformBlockIndex(jt,Ct.name),Zt.set(Ct,oe))}function te(Ct,jt){const oe=d.get(jt).get(Ct);i.get(jt)!==oe&&(L.uniformBlockBinding(jt,oe,Ct.__bindingPointIndex),i.set(jt,oe))}function xe(){L.disable(L.BLEND),L.disable(L.CULL_FACE),L.disable(L.DEPTH_TEST),L.disable(L.POLYGON_OFFSET_FILL),L.disable(L.SCISSOR_TEST),L.disable(L.STENCIL_TEST),L.disable(L.SAMPLE_ALPHA_TO_COVERAGE),L.blendEquation(L.FUNC_ADD),L.blendFunc(L.ONE,L.ZERO),L.blendFuncSeparate(L.ONE,L.ZERO,L.ONE,L.ZERO),L.blendColor(0,0,0,0),L.colorMask(!0,!0,!0,!0),L.clearColor(0,0,0,0),L.depthMask(!0),L.depthFunc(L.LESS),m.setReversed(!1),L.clearDepth(1),L.stencilMask(4294967295),L.stencilFunc(L.ALWAYS,0,4294967295),L.stencilOp(L.KEEP,L.KEEP,L.KEEP),L.clearStencil(0),L.cullFace(L.BACK),L.frontFace(L.CCW),L.polygonOffset(0,0),L.activeTexture(L.TEXTURE0),L.bindFramebuffer(L.FRAMEBUFFER,null),L.bindFramebuffer(L.DRAW_FRAMEBUFFER,null),L.bindFramebuffer(L.READ_FRAMEBUFFER,null),L.useProgram(null),L.lineWidth(1),L.scissor(0,0,L.canvas.width,L.canvas.height),L.viewport(0,0,L.canvas.width,L.canvas.height),S={},_=null,Q={},u={},l=new WeakMap,h=[],r=null,o=!1,p=null,a=null,v=null,x=null,g=null,y=null,T=null,P=new Ae(0,0,0),A=0,b=!1,O=null,D=null,B=null,G=null,V=null,K.set(0,0,L.canvas.width,L.canvas.height),J.set(0,0,L.canvas.width,L.canvas.height),I.reset(),m.reset(),E.reset()}return{buffers:{color:I,depth:m,stencil:E},enable:$,disable:et,bindFramebuffer:rt,drawBuffers:at,useProgram:lt,setBlending:ut,setMaterial:mt,setFlipSided:Tt,setCullFace:bt,setLineWidth:St,setPolygonOffset:Gt,setScissorTest:Nt,activeTexture:zt,bindTexture:Lt,unbindTexture:ct,compressedTexImage2D:ot,compressedTexImage3D:Mt,texImage2D:$t,texImage3D:kt,updateUBOMapping:le,uniformBlockBinding:te,texStorage2D:Yt,texStorage3D:ee,texSubImage2D:Ot,texSubImage3D:Ut,compressedTexSubImage2D:Rt,compressedTexSubImage3D:_t,scissor:Vt,viewport:ne,reset:xe}}function yot(L,n,c,M,R,I,m){const E=n.has("WEBGL_multisampled_render_to_texture")?n.get("WEBGL_multisampled_render_to_texture"):null,i=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),d=new Ve,S=new WeakMap;let u;const l=new WeakMap;let h=!1;try{h=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function r(ct,ot){return h?new OffscreenCanvas(ct,ot):kf("canvas")}function o(ct,ot,Mt){let Ot=1;const Ut=Lt(ct);if((Ut.width>Mt||Ut.height>Mt)&&(Ot=Mt/Math.max(Ut.width,Ut.height)),Ot<1)if(typeof HTMLImageElement<"u"&&ct instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ct instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ct instanceof ImageBitmap||typeof VideoFrame<"u"&&ct instanceof VideoFrame){const Rt=Math.floor(Ot*Ut.width),_t=Math.floor(Ot*Ut.height);u===void 0&&(u=r(Rt,_t));const Yt=ot?r(Rt,_t):u;return Yt.width=Rt,Yt.height=_t,Yt.getContext("2d").drawImage(ct,0,0,Rt,_t),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ut.width+"x"+Ut.height+") to ("+Rt+"x"+_t+")."),Yt}else return"data"in ct&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ut.width+"x"+Ut.height+")."),ct;return ct}function p(ct){return ct.generateMipmaps}function a(ct){L.generateMipmap(ct)}function v(ct){return ct.isWebGLCubeRenderTarget?L.TEXTURE_CUBE_MAP:ct.isWebGL3DRenderTarget?L.TEXTURE_3D:ct.isWebGLArrayRenderTarget||ct.isCompressedArrayTexture?L.TEXTURE_2D_ARRAY:L.TEXTURE_2D}function x(ct,ot,Mt,Ot,Ut=!1){if(ct!==null){if(L[ct]!==void 0)return L[ct];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ct+"'")}let Rt=ot;if(ot===L.RED&&(Mt===L.FLOAT&&(Rt=L.R32F),Mt===L.HALF_FLOAT&&(Rt=L.R16F),Mt===L.UNSIGNED_BYTE&&(Rt=L.R8)),ot===L.RED_INTEGER&&(Mt===L.UNSIGNED_BYTE&&(Rt=L.R8UI),Mt===L.UNSIGNED_SHORT&&(Rt=L.R16UI),Mt===L.UNSIGNED_INT&&(Rt=L.R32UI),Mt===L.BYTE&&(Rt=L.R8I),Mt===L.SHORT&&(Rt=L.R16I),Mt===L.INT&&(Rt=L.R32I)),ot===L.RG&&(Mt===L.FLOAT&&(Rt=L.RG32F),Mt===L.HALF_FLOAT&&(Rt=L.RG16F),Mt===L.UNSIGNED_BYTE&&(Rt=L.RG8)),ot===L.RG_INTEGER&&(Mt===L.UNSIGNED_BYTE&&(Rt=L.RG8UI),Mt===L.UNSIGNED_SHORT&&(Rt=L.RG16UI),Mt===L.UNSIGNED_INT&&(Rt=L.RG32UI),Mt===L.BYTE&&(Rt=L.RG8I),Mt===L.SHORT&&(Rt=L.RG16I),Mt===L.INT&&(Rt=L.RG32I)),ot===L.RGB_INTEGER&&(Mt===L.UNSIGNED_BYTE&&(Rt=L.RGB8UI),Mt===L.UNSIGNED_SHORT&&(Rt=L.RGB16UI),Mt===L.UNSIGNED_INT&&(Rt=L.RGB32UI),Mt===L.BYTE&&(Rt=L.RGB8I),Mt===L.SHORT&&(Rt=L.RGB16I),Mt===L.INT&&(Rt=L.RGB32I)),ot===L.RGBA_INTEGER&&(Mt===L.UNSIGNED_BYTE&&(Rt=L.RGBA8UI),Mt===L.UNSIGNED_SHORT&&(Rt=L.RGBA16UI),Mt===L.UNSIGNED_INT&&(Rt=L.RGBA32UI),Mt===L.BYTE&&(Rt=L.RGBA8I),Mt===L.SHORT&&(Rt=L.RGBA16I),Mt===L.INT&&(Rt=L.RGBA32I)),ot===L.RGB&&Mt===L.UNSIGNED_INT_5_9_9_9_REV&&(Rt=L.RGB9_E5),ot===L.RGBA){const _t=Ut?Fm:We.getTransfer(Ot);Mt===L.FLOAT&&(Rt=L.RGBA32F),Mt===L.HALF_FLOAT&&(Rt=L.RGBA16F),Mt===L.UNSIGNED_BYTE&&(Rt=_t===ii?L.SRGB8_ALPHA8:L.RGBA8),Mt===L.UNSIGNED_SHORT_4_4_4_4&&(Rt=L.RGBA4),Mt===L.UNSIGNED_SHORT_5_5_5_1&&(Rt=L.RGB5_A1)}return(Rt===L.R16F||Rt===L.R32F||Rt===L.RG16F||Rt===L.RG32F||Rt===L.RGBA16F||Rt===L.RGBA32F)&&n.get("EXT_color_buffer_float"),Rt}function g(ct,ot){let Mt;return ct?ot===null||ot===Xh||ot===Nf?Mt=L.DEPTH24_STENCIL8:ot===La?Mt=L.DEPTH32F_STENCIL8:ot===Bf&&(Mt=L.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):ot===null||ot===Xh||ot===Nf?Mt=L.DEPTH_COMPONENT24:ot===La?Mt=L.DEPTH_COMPONENT32F:ot===Bf&&(Mt=L.DEPTH_COMPONENT16),Mt}function y(ct,ot){return p(ct)===!0||ct.isFramebufferTexture&&ct.minFilter!==Xs&&ct.minFilter!==Yr?Math.log2(Math.max(ot.width,ot.height))+1:ct.mipmaps!==void 0&&ct.mipmaps.length>0?ct.mipmaps.length:ct.isCompressedTexture&&Array.isArray(ct.image)?ot.mipmaps.length:1}function T(ct){const ot=ct.target;ot.removeEventListener("dispose",T),A(ot),ot.isVideoTexture&&S.delete(ot)}function P(ct){const ot=ct.target;ot.removeEventListener("dispose",P),O(ot)}function A(ct){const ot=M.get(ct);if(ot.__webglInit===void 0)return;const Mt=ct.source,Ot=l.get(Mt);if(Ot){const Ut=Ot[ot.__cacheKey];Ut.usedTimes--,Ut.usedTimes===0&&b(ct),Object.keys(Ot).length===0&&l.delete(Mt)}M.remove(ct)}function b(ct){const ot=M.get(ct);L.deleteTexture(ot.__webglTexture);const Mt=ct.source,Ot=l.get(Mt);delete Ot[ot.__cacheKey],m.memory.textures--}function O(ct){const ot=M.get(ct);if(ct.depthTexture&&(ct.depthTexture.dispose(),M.remove(ct.depthTexture)),ct.isWebGLCubeRenderTarget)for(let Ot=0;Ot<6;Ot++){if(Array.isArray(ot.__webglFramebuffer[Ot]))for(let Ut=0;Ut<ot.__webglFramebuffer[Ot].length;Ut++)L.deleteFramebuffer(ot.__webglFramebuffer[Ot][Ut]);else L.deleteFramebuffer(ot.__webglFramebuffer[Ot]);ot.__webglDepthbuffer&&L.deleteRenderbuffer(ot.__webglDepthbuffer[Ot])}else{if(Array.isArray(ot.__webglFramebuffer))for(let Ot=0;Ot<ot.__webglFramebuffer.length;Ot++)L.deleteFramebuffer(ot.__webglFramebuffer[Ot]);else L.deleteFramebuffer(ot.__webglFramebuffer);if(ot.__webglDepthbuffer&&L.deleteRenderbuffer(ot.__webglDepthbuffer),ot.__webglMultisampledFramebuffer&&L.deleteFramebuffer(ot.__webglMultisampledFramebuffer),ot.__webglColorRenderbuffer)for(let Ot=0;Ot<ot.__webglColorRenderbuffer.length;Ot++)ot.__webglColorRenderbuffer[Ot]&&L.deleteRenderbuffer(ot.__webglColorRenderbuffer[Ot]);ot.__webglDepthRenderbuffer&&L.deleteRenderbuffer(ot.__webglDepthRenderbuffer)}const Mt=ct.textures;for(let Ot=0,Ut=Mt.length;Ot<Ut;Ot++){const Rt=M.get(Mt[Ot]);Rt.__webglTexture&&(L.deleteTexture(Rt.__webglTexture),m.memory.textures--),M.remove(Mt[Ot])}M.remove(ct)}let D=0;function B(){D=0}function G(){const ct=D;return ct>=R.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ct+" texture units while this GPU supports only "+R.maxTextures),D+=1,ct}function V(ct){const ot=[];return ot.push(ct.wrapS),ot.push(ct.wrapT),ot.push(ct.wrapR||0),ot.push(ct.magFilter),ot.push(ct.minFilter),ot.push(ct.anisotropy),ot.push(ct.internalFormat),ot.push(ct.format),ot.push(ct.type),ot.push(ct.generateMipmaps),ot.push(ct.premultiplyAlpha),ot.push(ct.flipY),ot.push(ct.unpackAlignment),ot.push(ct.colorSpace),ot.join()}function k(ct,ot){const Mt=M.get(ct);if(ct.isVideoTexture&&Nt(ct),ct.isRenderTargetTexture===!1&&ct.version>0&&Mt.__version!==ct.version){const Ot=ct.image;if(Ot===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ot.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{q(Mt,ct,ot);return}}c.bindTexture(L.TEXTURE_2D,Mt.__webglTexture,L.TEXTURE0+ot)}function U(ct,ot){const Mt=M.get(ct);if(ct.version>0&&Mt.__version!==ct.version){q(Mt,ct,ot);return}c.bindTexture(L.TEXTURE_2D_ARRAY,Mt.__webglTexture,L.TEXTURE0+ot)}function W(ct,ot){const Mt=M.get(ct);if(ct.version>0&&Mt.__version!==ct.version){q(Mt,ct,ot);return}c.bindTexture(L.TEXTURE_3D,Mt.__webglTexture,L.TEXTURE0+ot)}function X(ct,ot){const Mt=M.get(ct);if(ct.version>0&&Mt.__version!==ct.version){$(Mt,ct,ot);return}c.bindTexture(L.TEXTURE_CUBE_MAP,Mt.__webglTexture,L.TEXTURE0+ot)}const _={[Om]:L.REPEAT,[Bh]:L.CLAMP_TO_EDGE,[fT]:L.MIRRORED_REPEAT},Q={[Xs]:L.NEAREST,[Wet]:L.NEAREST_MIPMAP_NEAREST,[Wv]:L.NEAREST_MIPMAP_LINEAR,[Yr]:L.LINEAR,[pS]:L.LINEAR_MIPMAP_NEAREST,[Nh]:L.LINEAR_MIPMAP_LINEAR},j={[$et]:L.NEVER,[jet]:L.ALWAYS,[_et]:L.LESS,[BO]:L.LEQUAL,[Zet]:L.EQUAL,[Qet]:L.GEQUAL,[Ket]:L.GREATER,[Jet]:L.NOTEQUAL};function it(ct,ot){if(ot.type===La&&n.has("OES_texture_float_linear")===!1&&(ot.magFilter===Yr||ot.magFilter===pS||ot.magFilter===Wv||ot.magFilter===Nh||ot.minFilter===Yr||ot.minFilter===pS||ot.minFilter===Wv||ot.minFilter===Nh)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),L.texParameteri(ct,L.TEXTURE_WRAP_S,_[ot.wrapS]),L.texParameteri(ct,L.TEXTURE_WRAP_T,_[ot.wrapT]),(ct===L.TEXTURE_3D||ct===L.TEXTURE_2D_ARRAY)&&L.texParameteri(ct,L.TEXTURE_WRAP_R,_[ot.wrapR]),L.texParameteri(ct,L.TEXTURE_MAG_FILTER,Q[ot.magFilter]),L.texParameteri(ct,L.TEXTURE_MIN_FILTER,Q[ot.minFilter]),ot.compareFunction&&(L.texParameteri(ct,L.TEXTURE_COMPARE_MODE,L.COMPARE_REF_TO_TEXTURE),L.texParameteri(ct,L.TEXTURE_COMPARE_FUNC,j[ot.compareFunction])),n.has("EXT_texture_filter_anisotropic")===!0){if(ot.magFilter===Xs||ot.minFilter!==Wv&&ot.minFilter!==Nh||ot.type===La&&n.has("OES_texture_float_linear")===!1)return;if(ot.anisotropy>1||M.get(ot).__currentAnisotropy){const Mt=n.get("EXT_texture_filter_anisotropic");L.texParameterf(ct,Mt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ot.anisotropy,R.getMaxAnisotropy())),M.get(ot).__currentAnisotropy=ot.anisotropy}}}function K(ct,ot){let Mt=!1;ct.__webglInit===void 0&&(ct.__webglInit=!0,ot.addEventListener("dispose",T));const Ot=ot.source;let Ut=l.get(Ot);Ut===void 0&&(Ut={},l.set(Ot,Ut));const Rt=V(ot);if(Rt!==ct.__cacheKey){Ut[Rt]===void 0&&(Ut[Rt]={texture:L.createTexture(),usedTimes:0},m.memory.textures++,Mt=!0),Ut[Rt].usedTimes++;const _t=Ut[ct.__cacheKey];_t!==void 0&&(Ut[ct.__cacheKey].usedTimes--,_t.usedTimes===0&&b(ot)),ct.__cacheKey=Rt,ct.__webglTexture=Ut[Rt].texture}return Mt}function J(ct,ot,Mt){return Math.floor(Math.floor(ct/Mt)/ot)}function Y(ct,ot,Mt,Ot){const Rt=ct.updateRanges;if(Rt.length===0)c.texSubImage2D(L.TEXTURE_2D,0,0,0,ot.width,ot.height,Mt,Ot,ot.data);else{Rt.sort((kt,Vt)=>kt.start-Vt.start);let _t=0;for(let kt=1;kt<Rt.length;kt++){const Vt=Rt[_t],ne=Rt[kt],le=Vt.start+Vt.count,te=J(ne.start,ot.width,4),xe=J(Vt.start,ot.width,4);ne.start<=le+1&&te===xe&&J(ne.start+ne.count-1,ot.width,4)===te?Vt.count=Math.max(Vt.count,ne.start+ne.count-Vt.start):(++_t,Rt[_t]=ne)}Rt.length=_t+1;const Yt=L.getParameter(L.UNPACK_ROW_LENGTH),ee=L.getParameter(L.UNPACK_SKIP_PIXELS),$t=L.getParameter(L.UNPACK_SKIP_ROWS);L.pixelStorei(L.UNPACK_ROW_LENGTH,ot.width);for(let kt=0,Vt=Rt.length;kt<Vt;kt++){const ne=Rt[kt],le=Math.floor(ne.start/4),te=Math.ceil(ne.count/4),xe=le%ot.width,Ct=Math.floor(le/ot.width),jt=te,Zt=1;L.pixelStorei(L.UNPACK_SKIP_PIXELS,xe),L.pixelStorei(L.UNPACK_SKIP_ROWS,Ct),c.texSubImage2D(L.TEXTURE_2D,0,xe,Ct,jt,Zt,Mt,Ot,ot.data)}ct.clearUpdateRanges(),L.pixelStorei(L.UNPACK_ROW_LENGTH,Yt),L.pixelStorei(L.UNPACK_SKIP_PIXELS,ee),L.pixelStorei(L.UNPACK_SKIP_ROWS,$t)}}function q(ct,ot,Mt){let Ot=L.TEXTURE_2D;(ot.isDataArrayTexture||ot.isCompressedArrayTexture)&&(Ot=L.TEXTURE_2D_ARRAY),ot.isData3DTexture&&(Ot=L.TEXTURE_3D);const Ut=K(ct,ot),Rt=ot.source;c.bindTexture(Ot,ct.__webglTexture,L.TEXTURE0+Mt);const _t=M.get(Rt);if(Rt.version!==_t.__version||Ut===!0){c.activeTexture(L.TEXTURE0+Mt);const Yt=We.getPrimaries(We.workingColorSpace),ee=ot.colorSpace===Po?null:We.getPrimaries(ot.colorSpace),$t=ot.colorSpace===Po||Yt===ee?L.NONE:L.BROWSER_DEFAULT_WEBGL;L.pixelStorei(L.UNPACK_FLIP_Y_WEBGL,ot.flipY),L.pixelStorei(L.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ot.premultiplyAlpha),L.pixelStorei(L.UNPACK_ALIGNMENT,ot.unpackAlignment),L.pixelStorei(L.UNPACK_COLORSPACE_CONVERSION_WEBGL,$t);let kt=o(ot.image,!1,R.maxTextureSize);kt=zt(ot,kt);const Vt=I.convert(ot.format,ot.colorSpace),ne=I.convert(ot.type);let le=x(ot.internalFormat,Vt,ne,ot.colorSpace,ot.isVideoTexture);it(Ot,ot);let te;const xe=ot.mipmaps,Ct=ot.isVideoTexture!==!0,jt=_t.__version===void 0||Ut===!0,Zt=Rt.dataReady,oe=y(ot,kt);if(ot.isDepthTexture)le=g(ot.format===Uf,ot.type),jt&&(Ct?c.texStorage2D(L.TEXTURE_2D,1,le,kt.width,kt.height):c.texImage2D(L.TEXTURE_2D,0,le,kt.width,kt.height,0,Vt,ne,null));else if(ot.isDataTexture)if(xe.length>0){Ct&&jt&&c.texStorage2D(L.TEXTURE_2D,oe,le,xe[0].width,xe[0].height);for(let Jt=0,Xt=xe.length;Jt<Xt;Jt++)te=xe[Jt],Ct?Zt&&c.texSubImage2D(L.TEXTURE_2D,Jt,0,0,te.width,te.height,Vt,ne,te.data):c.texImage2D(L.TEXTURE_2D,Jt,le,te.width,te.height,0,Vt,ne,te.data);ot.generateMipmaps=!1}else Ct?(jt&&c.texStorage2D(L.TEXTURE_2D,oe,le,kt.width,kt.height),Zt&&Y(ot,kt,Vt,ne)):c.texImage2D(L.TEXTURE_2D,0,le,kt.width,kt.height,0,Vt,ne,kt.data);else if(ot.isCompressedTexture)if(ot.isCompressedArrayTexture){Ct&&jt&&c.texStorage3D(L.TEXTURE_2D_ARRAY,oe,le,xe[0].width,xe[0].height,kt.depth);for(let Jt=0,Xt=xe.length;Jt<Xt;Jt++)if(te=xe[Jt],ot.format!==Tn)if(Vt!==null)if(Ct){if(Zt)if(ot.layerUpdates.size>0){const ue=rL(te.width,te.height,ot.format,ot.type);for(const Pe of ot.layerUpdates){const ai=te.data.subarray(Pe*ue/te.data.BYTES_PER_ELEMENT,(Pe+1)*ue/te.data.BYTES_PER_ELEMENT);c.compressedTexSubImage3D(L.TEXTURE_2D_ARRAY,Jt,0,0,Pe,te.width,te.height,1,Vt,ai)}ot.clearLayerUpdates()}else c.compressedTexSubImage3D(L.TEXTURE_2D_ARRAY,Jt,0,0,0,te.width,te.height,kt.depth,Vt,te.data)}else c.compressedTexImage3D(L.TEXTURE_2D_ARRAY,Jt,le,te.width,te.height,kt.depth,0,te.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ct?Zt&&c.texSubImage3D(L.TEXTURE_2D_ARRAY,Jt,0,0,0,te.width,te.height,kt.depth,Vt,ne,te.data):c.texImage3D(L.TEXTURE_2D_ARRAY,Jt,le,te.width,te.height,kt.depth,0,Vt,ne,te.data)}else{Ct&&jt&&c.texStorage2D(L.TEXTURE_2D,oe,le,xe[0].width,xe[0].height);for(let Jt=0,Xt=xe.length;Jt<Xt;Jt++)te=xe[Jt],ot.format!==Tn?Vt!==null?Ct?Zt&&c.compressedTexSubImage2D(L.TEXTURE_2D,Jt,0,0,te.width,te.height,Vt,te.data):c.compressedTexImage2D(L.TEXTURE_2D,Jt,le,te.width,te.height,0,te.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ct?Zt&&c.texSubImage2D(L.TEXTURE_2D,Jt,0,0,te.width,te.height,Vt,ne,te.data):c.texImage2D(L.TEXTURE_2D,Jt,le,te.width,te.height,0,Vt,ne,te.data)}else if(ot.isDataArrayTexture)if(Ct){if(jt&&c.texStorage3D(L.TEXTURE_2D_ARRAY,oe,le,kt.width,kt.height,kt.depth),Zt)if(ot.layerUpdates.size>0){const Jt=rL(kt.width,kt.height,ot.format,ot.type);for(const Xt of ot.layerUpdates){const ue=kt.data.subarray(Xt*Jt/kt.data.BYTES_PER_ELEMENT,(Xt+1)*Jt/kt.data.BYTES_PER_ELEMENT);c.texSubImage3D(L.TEXTURE_2D_ARRAY,0,0,0,Xt,kt.width,kt.height,1,Vt,ne,ue)}ot.clearLayerUpdates()}else c.texSubImage3D(L.TEXTURE_2D_ARRAY,0,0,0,0,kt.width,kt.height,kt.depth,Vt,ne,kt.data)}else c.texImage3D(L.TEXTURE_2D_ARRAY,0,le,kt.width,kt.height,kt.depth,0,Vt,ne,kt.data);else if(ot.isData3DTexture)Ct?(jt&&c.texStorage3D(L.TEXTURE_3D,oe,le,kt.width,kt.height,kt.depth),Zt&&c.texSubImage3D(L.TEXTURE_3D,0,0,0,0,kt.width,kt.height,kt.depth,Vt,ne,kt.data)):c.texImage3D(L.TEXTURE_3D,0,le,kt.width,kt.height,kt.depth,0,Vt,ne,kt.data);else if(ot.isFramebufferTexture){if(jt)if(Ct)c.texStorage2D(L.TEXTURE_2D,oe,le,kt.width,kt.height);else{let Jt=kt.width,Xt=kt.height;for(let ue=0;ue<oe;ue++)c.texImage2D(L.TEXTURE_2D,ue,le,Jt,Xt,0,Vt,ne,null),Jt>>=1,Xt>>=1}}else if(xe.length>0){if(Ct&&jt){const Jt=Lt(xe[0]);c.texStorage2D(L.TEXTURE_2D,oe,le,Jt.width,Jt.height)}for(let Jt=0,Xt=xe.length;Jt<Xt;Jt++)te=xe[Jt],Ct?Zt&&c.texSubImage2D(L.TEXTURE_2D,Jt,0,0,Vt,ne,te):c.texImage2D(L.TEXTURE_2D,Jt,le,Vt,ne,te);ot.generateMipmaps=!1}else if(Ct){if(jt){const Jt=Lt(kt);c.texStorage2D(L.TEXTURE_2D,oe,le,Jt.width,Jt.height)}Zt&&c.texSubImage2D(L.TEXTURE_2D,0,0,0,Vt,ne,kt)}else c.texImage2D(L.TEXTURE_2D,0,le,Vt,ne,kt);p(ot)&&a(Ot),_t.__version=Rt.version,ot.onUpdate&&ot.onUpdate(ot)}ct.__version=ot.version}function $(ct,ot,Mt){if(ot.image.length!==6)return;const Ot=K(ct,ot),Ut=ot.source;c.bindTexture(L.TEXTURE_CUBE_MAP,ct.__webglTexture,L.TEXTURE0+Mt);const Rt=M.get(Ut);if(Ut.version!==Rt.__version||Ot===!0){c.activeTexture(L.TEXTURE0+Mt);const _t=We.getPrimaries(We.workingColorSpace),Yt=ot.colorSpace===Po?null:We.getPrimaries(ot.colorSpace),ee=ot.colorSpace===Po||_t===Yt?L.NONE:L.BROWSER_DEFAULT_WEBGL;L.pixelStorei(L.UNPACK_FLIP_Y_WEBGL,ot.flipY),L.pixelStorei(L.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ot.premultiplyAlpha),L.pixelStorei(L.UNPACK_ALIGNMENT,ot.unpackAlignment),L.pixelStorei(L.UNPACK_COLORSPACE_CONVERSION_WEBGL,ee);const $t=ot.isCompressedTexture||ot.image[0].isCompressedTexture,kt=ot.image[0]&&ot.image[0].isDataTexture,Vt=[];for(let Xt=0;Xt<6;Xt++)!$t&&!kt?Vt[Xt]=o(ot.image[Xt],!0,R.maxCubemapSize):Vt[Xt]=kt?ot.image[Xt].image:ot.image[Xt],Vt[Xt]=zt(ot,Vt[Xt]);const ne=Vt[0],le=I.convert(ot.format,ot.colorSpace),te=I.convert(ot.type),xe=x(ot.internalFormat,le,te,ot.colorSpace),Ct=ot.isVideoTexture!==!0,jt=Rt.__version===void 0||Ot===!0,Zt=Ut.dataReady;let oe=y(ot,ne);it(L.TEXTURE_CUBE_MAP,ot);let Jt;if($t){Ct&&jt&&c.texStorage2D(L.TEXTURE_CUBE_MAP,oe,xe,ne.width,ne.height);for(let Xt=0;Xt<6;Xt++){Jt=Vt[Xt].mipmaps;for(let ue=0;ue<Jt.length;ue++){const Pe=Jt[ue];ot.format!==Tn?le!==null?Ct?Zt&&c.compressedTexSubImage2D(L.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,ue,0,0,Pe.width,Pe.height,le,Pe.data):c.compressedTexImage2D(L.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,ue,xe,Pe.width,Pe.height,0,Pe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ct?Zt&&c.texSubImage2D(L.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,ue,0,0,Pe.width,Pe.height,le,te,Pe.data):c.texImage2D(L.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,ue,xe,Pe.width,Pe.height,0,le,te,Pe.data)}}}else{if(Jt=ot.mipmaps,Ct&&jt){Jt.length>0&&oe++;const Xt=Lt(Vt[0]);c.texStorage2D(L.TEXTURE_CUBE_MAP,oe,xe,Xt.width,Xt.height)}for(let Xt=0;Xt<6;Xt++)if(kt){Ct?Zt&&c.texSubImage2D(L.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,0,0,0,Vt[Xt].width,Vt[Xt].height,le,te,Vt[Xt].data):c.texImage2D(L.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,0,xe,Vt[Xt].width,Vt[Xt].height,0,le,te,Vt[Xt].data);for(let ue=0;ue<Jt.length;ue++){const ai=Jt[ue].image[Xt].image;Ct?Zt&&c.texSubImage2D(L.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,ue+1,0,0,ai.width,ai.height,le,te,ai.data):c.texImage2D(L.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,ue+1,xe,ai.width,ai.height,0,le,te,ai.data)}}else{Ct?Zt&&c.texSubImage2D(L.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,0,0,0,le,te,Vt[Xt]):c.texImage2D(L.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,0,xe,le,te,Vt[Xt]);for(let ue=0;ue<Jt.length;ue++){const Pe=Jt[ue];Ct?Zt&&c.texSubImage2D(L.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,ue+1,0,0,le,te,Pe.image[Xt]):c.texImage2D(L.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,ue+1,xe,le,te,Pe.image[Xt])}}}p(ot)&&a(L.TEXTURE_CUBE_MAP),Rt.__version=Ut.version,ot.onUpdate&&ot.onUpdate(ot)}ct.__version=ot.version}function et(ct,ot,Mt,Ot,Ut,Rt){const _t=I.convert(Mt.format,Mt.colorSpace),Yt=I.convert(Mt.type),ee=x(Mt.internalFormat,_t,Yt,Mt.colorSpace),$t=M.get(ot),kt=M.get(Mt);if(kt.__renderTarget=ot,!$t.__hasExternalTextures){const Vt=Math.max(1,ot.width>>Rt),ne=Math.max(1,ot.height>>Rt);Ut===L.TEXTURE_3D||Ut===L.TEXTURE_2D_ARRAY?c.texImage3D(Ut,Rt,ee,Vt,ne,ot.depth,0,_t,Yt,null):c.texImage2D(Ut,Rt,ee,Vt,ne,0,_t,Yt,null)}c.bindFramebuffer(L.FRAMEBUFFER,ct),Gt(ot)?E.framebufferTexture2DMultisampleEXT(L.FRAMEBUFFER,Ot,Ut,kt.__webglTexture,0,St(ot)):(Ut===L.TEXTURE_2D||Ut>=L.TEXTURE_CUBE_MAP_POSITIVE_X&&Ut<=L.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&L.framebufferTexture2D(L.FRAMEBUFFER,Ot,Ut,kt.__webglTexture,Rt),c.bindFramebuffer(L.FRAMEBUFFER,null)}function rt(ct,ot,Mt){if(L.bindRenderbuffer(L.RENDERBUFFER,ct),ot.depthBuffer){const Ot=ot.depthTexture,Ut=Ot&&Ot.isDepthTexture?Ot.type:null,Rt=g(ot.stencilBuffer,Ut),_t=ot.stencilBuffer?L.DEPTH_STENCIL_ATTACHMENT:L.DEPTH_ATTACHMENT,Yt=St(ot);Gt(ot)?E.renderbufferStorageMultisampleEXT(L.RENDERBUFFER,Yt,Rt,ot.width,ot.height):Mt?L.renderbufferStorageMultisample(L.RENDERBUFFER,Yt,Rt,ot.width,ot.height):L.renderbufferStorage(L.RENDERBUFFER,Rt,ot.width,ot.height),L.framebufferRenderbuffer(L.FRAMEBUFFER,_t,L.RENDERBUFFER,ct)}else{const Ot=ot.textures;for(let Ut=0;Ut<Ot.length;Ut++){const Rt=Ot[Ut],_t=I.convert(Rt.format,Rt.colorSpace),Yt=I.convert(Rt.type),ee=x(Rt.internalFormat,_t,Yt,Rt.colorSpace),$t=St(ot);Mt&&Gt(ot)===!1?L.renderbufferStorageMultisample(L.RENDERBUFFER,$t,ee,ot.width,ot.height):Gt(ot)?E.renderbufferStorageMultisampleEXT(L.RENDERBUFFER,$t,ee,ot.width,ot.height):L.renderbufferStorage(L.RENDERBUFFER,ee,ot.width,ot.height)}}L.bindRenderbuffer(L.RENDERBUFFER,null)}function at(ct,ot){if(ot&&ot.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(c.bindFramebuffer(L.FRAMEBUFFER,ct),!(ot.depthTexture&&ot.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ot=M.get(ot.depthTexture);Ot.__renderTarget=ot,(!Ot.__webglTexture||ot.depthTexture.image.width!==ot.width||ot.depthTexture.image.height!==ot.height)&&(ot.depthTexture.image.width=ot.width,ot.depthTexture.image.height=ot.height,ot.depthTexture.needsUpdate=!0),k(ot.depthTexture,0);const Ut=Ot.__webglTexture,Rt=St(ot);if(ot.depthTexture.format===Gf)Gt(ot)?E.framebufferTexture2DMultisampleEXT(L.FRAMEBUFFER,L.DEPTH_ATTACHMENT,L.TEXTURE_2D,Ut,0,Rt):L.framebufferTexture2D(L.FRAMEBUFFER,L.DEPTH_ATTACHMENT,L.TEXTURE_2D,Ut,0);else if(ot.depthTexture.format===Uf)Gt(ot)?E.framebufferTexture2DMultisampleEXT(L.FRAMEBUFFER,L.DEPTH_STENCIL_ATTACHMENT,L.TEXTURE_2D,Ut,0,Rt):L.framebufferTexture2D(L.FRAMEBUFFER,L.DEPTH_STENCIL_ATTACHMENT,L.TEXTURE_2D,Ut,0);else throw new Error("Unknown depthTexture format")}function lt(ct){const ot=M.get(ct),Mt=ct.isWebGLCubeRenderTarget===!0;if(ot.__boundDepthTexture!==ct.depthTexture){const Ot=ct.depthTexture;if(ot.__depthDisposeCallback&&ot.__depthDisposeCallback(),Ot){const Ut=()=>{delete ot.__boundDepthTexture,delete ot.__depthDisposeCallback,Ot.removeEventListener("dispose",Ut)};Ot.addEventListener("dispose",Ut),ot.__depthDisposeCallback=Ut}ot.__boundDepthTexture=Ot}if(ct.depthTexture&&!ot.__autoAllocateDepthBuffer){if(Mt)throw new Error("target.depthTexture not supported in Cube render targets");const Ot=ct.texture.mipmaps;Ot&&Ot.length>0?at(ot.__webglFramebuffer[0],ct):at(ot.__webglFramebuffer,ct)}else if(Mt){ot.__webglDepthbuffer=[];for(let Ot=0;Ot<6;Ot++)if(c.bindFramebuffer(L.FRAMEBUFFER,ot.__webglFramebuffer[Ot]),ot.__webglDepthbuffer[Ot]===void 0)ot.__webglDepthbuffer[Ot]=L.createRenderbuffer(),rt(ot.__webglDepthbuffer[Ot],ct,!1);else{const Ut=ct.stencilBuffer?L.DEPTH_STENCIL_ATTACHMENT:L.DEPTH_ATTACHMENT,Rt=ot.__webglDepthbuffer[Ot];L.bindRenderbuffer(L.RENDERBUFFER,Rt),L.framebufferRenderbuffer(L.FRAMEBUFFER,Ut,L.RENDERBUFFER,Rt)}}else{const Ot=ct.texture.mipmaps;if(Ot&&Ot.length>0?c.bindFramebuffer(L.FRAMEBUFFER,ot.__webglFramebuffer[0]):c.bindFramebuffer(L.FRAMEBUFFER,ot.__webglFramebuffer),ot.__webglDepthbuffer===void 0)ot.__webglDepthbuffer=L.createRenderbuffer(),rt(ot.__webglDepthbuffer,ct,!1);else{const Ut=ct.stencilBuffer?L.DEPTH_STENCIL_ATTACHMENT:L.DEPTH_ATTACHMENT,Rt=ot.__webglDepthbuffer;L.bindRenderbuffer(L.RENDERBUFFER,Rt),L.framebufferRenderbuffer(L.FRAMEBUFFER,Ut,L.RENDERBUFFER,Rt)}}c.bindFramebuffer(L.FRAMEBUFFER,null)}function vt(ct,ot,Mt){const Ot=M.get(ct);ot!==void 0&&et(Ot.__webglFramebuffer,ct,ct.texture,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,0),Mt!==void 0&&lt(ct)}function xt(ct){const ot=ct.texture,Mt=M.get(ct),Ot=M.get(ot);ct.addEventListener("dispose",P);const Ut=ct.textures,Rt=ct.isWebGLCubeRenderTarget===!0,_t=Ut.length>1;if(_t||(Ot.__webglTexture===void 0&&(Ot.__webglTexture=L.createTexture()),Ot.__version=ot.version,m.memory.textures++),Rt){Mt.__webglFramebuffer=[];for(let Yt=0;Yt<6;Yt++)if(ot.mipmaps&&ot.mipmaps.length>0){Mt.__webglFramebuffer[Yt]=[];for(let ee=0;ee<ot.mipmaps.length;ee++)Mt.__webglFramebuffer[Yt][ee]=L.createFramebuffer()}else Mt.__webglFramebuffer[Yt]=L.createFramebuffer()}else{if(ot.mipmaps&&ot.mipmaps.length>0){Mt.__webglFramebuffer=[];for(let Yt=0;Yt<ot.mipmaps.length;Yt++)Mt.__webglFramebuffer[Yt]=L.createFramebuffer()}else Mt.__webglFramebuffer=L.createFramebuffer();if(_t)for(let Yt=0,ee=Ut.length;Yt<ee;Yt++){const $t=M.get(Ut[Yt]);$t.__webglTexture===void 0&&($t.__webglTexture=L.createTexture(),m.memory.textures++)}if(ct.samples>0&&Gt(ct)===!1){Mt.__webglMultisampledFramebuffer=L.createFramebuffer(),Mt.__webglColorRenderbuffer=[],c.bindFramebuffer(L.FRAMEBUFFER,Mt.__webglMultisampledFramebuffer);for(let Yt=0;Yt<Ut.length;Yt++){const ee=Ut[Yt];Mt.__webglColorRenderbuffer[Yt]=L.createRenderbuffer(),L.bindRenderbuffer(L.RENDERBUFFER,Mt.__webglColorRenderbuffer[Yt]);const $t=I.convert(ee.format,ee.colorSpace),kt=I.convert(ee.type),Vt=x(ee.internalFormat,$t,kt,ee.colorSpace,ct.isXRRenderTarget===!0),ne=St(ct);L.renderbufferStorageMultisample(L.RENDERBUFFER,ne,Vt,ct.width,ct.height),L.framebufferRenderbuffer(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0+Yt,L.RENDERBUFFER,Mt.__webglColorRenderbuffer[Yt])}L.bindRenderbuffer(L.RENDERBUFFER,null),ct.depthBuffer&&(Mt.__webglDepthRenderbuffer=L.createRenderbuffer(),rt(Mt.__webglDepthRenderbuffer,ct,!0)),c.bindFramebuffer(L.FRAMEBUFFER,null)}}if(Rt){c.bindTexture(L.TEXTURE_CUBE_MAP,Ot.__webglTexture),it(L.TEXTURE_CUBE_MAP,ot);for(let Yt=0;Yt<6;Yt++)if(ot.mipmaps&&ot.mipmaps.length>0)for(let ee=0;ee<ot.mipmaps.length;ee++)et(Mt.__webglFramebuffer[Yt][ee],ct,ot,L.COLOR_ATTACHMENT0,L.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,ee);else et(Mt.__webglFramebuffer[Yt],ct,ot,L.COLOR_ATTACHMENT0,L.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,0);p(ot)&&a(L.TEXTURE_CUBE_MAP),c.unbindTexture()}else if(_t){for(let Yt=0,ee=Ut.length;Yt<ee;Yt++){const $t=Ut[Yt],kt=M.get($t);c.bindTexture(L.TEXTURE_2D,kt.__webglTexture),it(L.TEXTURE_2D,$t),et(Mt.__webglFramebuffer,ct,$t,L.COLOR_ATTACHMENT0+Yt,L.TEXTURE_2D,0),p($t)&&a(L.TEXTURE_2D)}c.unbindTexture()}else{let Yt=L.TEXTURE_2D;if((ct.isWebGL3DRenderTarget||ct.isWebGLArrayRenderTarget)&&(Yt=ct.isWebGL3DRenderTarget?L.TEXTURE_3D:L.TEXTURE_2D_ARRAY),c.bindTexture(Yt,Ot.__webglTexture),it(Yt,ot),ot.mipmaps&&ot.mipmaps.length>0)for(let ee=0;ee<ot.mipmaps.length;ee++)et(Mt.__webglFramebuffer[ee],ct,ot,L.COLOR_ATTACHMENT0,Yt,ee);else et(Mt.__webglFramebuffer,ct,ot,L.COLOR_ATTACHMENT0,Yt,0);p(ot)&&a(Yt),c.unbindTexture()}ct.depthBuffer&&lt(ct)}function ut(ct){const ot=ct.textures;for(let Mt=0,Ot=ot.length;Mt<Ot;Mt++){const Ut=ot[Mt];if(p(Ut)){const Rt=v(ct),_t=M.get(Ut).__webglTexture;c.bindTexture(Rt,_t),a(Rt),c.unbindTexture()}}}const mt=[],Tt=[];function bt(ct){if(ct.samples>0){if(Gt(ct)===!1){const ot=ct.textures,Mt=ct.width,Ot=ct.height;let Ut=L.COLOR_BUFFER_BIT;const Rt=ct.stencilBuffer?L.DEPTH_STENCIL_ATTACHMENT:L.DEPTH_ATTACHMENT,_t=M.get(ct),Yt=ot.length>1;if(Yt)for(let $t=0;$t<ot.length;$t++)c.bindFramebuffer(L.FRAMEBUFFER,_t.__webglMultisampledFramebuffer),L.framebufferRenderbuffer(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0+$t,L.RENDERBUFFER,null),c.bindFramebuffer(L.FRAMEBUFFER,_t.__webglFramebuffer),L.framebufferTexture2D(L.DRAW_FRAMEBUFFER,L.COLOR_ATTACHMENT0+$t,L.TEXTURE_2D,null,0);c.bindFramebuffer(L.READ_FRAMEBUFFER,_t.__webglMultisampledFramebuffer);const ee=ct.texture.mipmaps;ee&&ee.length>0?c.bindFramebuffer(L.DRAW_FRAMEBUFFER,_t.__webglFramebuffer[0]):c.bindFramebuffer(L.DRAW_FRAMEBUFFER,_t.__webglFramebuffer);for(let $t=0;$t<ot.length;$t++){if(ct.resolveDepthBuffer&&(ct.depthBuffer&&(Ut|=L.DEPTH_BUFFER_BIT),ct.stencilBuffer&&ct.resolveStencilBuffer&&(Ut|=L.STENCIL_BUFFER_BIT)),Yt){L.framebufferRenderbuffer(L.READ_FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.RENDERBUFFER,_t.__webglColorRenderbuffer[$t]);const kt=M.get(ot[$t]).__webglTexture;L.framebufferTexture2D(L.DRAW_FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,kt,0)}L.blitFramebuffer(0,0,Mt,Ot,0,0,Mt,Ot,Ut,L.NEAREST),i===!0&&(mt.length=0,Tt.length=0,mt.push(L.COLOR_ATTACHMENT0+$t),ct.depthBuffer&&ct.resolveDepthBuffer===!1&&(mt.push(Rt),Tt.push(Rt),L.invalidateFramebuffer(L.DRAW_FRAMEBUFFER,Tt)),L.invalidateFramebuffer(L.READ_FRAMEBUFFER,mt))}if(c.bindFramebuffer(L.READ_FRAMEBUFFER,null),c.bindFramebuffer(L.DRAW_FRAMEBUFFER,null),Yt)for(let $t=0;$t<ot.length;$t++){c.bindFramebuffer(L.FRAMEBUFFER,_t.__webglMultisampledFramebuffer),L.framebufferRenderbuffer(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0+$t,L.RENDERBUFFER,_t.__webglColorRenderbuffer[$t]);const kt=M.get(ot[$t]).__webglTexture;c.bindFramebuffer(L.FRAMEBUFFER,_t.__webglFramebuffer),L.framebufferTexture2D(L.DRAW_FRAMEBUFFER,L.COLOR_ATTACHMENT0+$t,L.TEXTURE_2D,kt,0)}c.bindFramebuffer(L.DRAW_FRAMEBUFFER,_t.__webglMultisampledFramebuffer)}else if(ct.depthBuffer&&ct.resolveDepthBuffer===!1&&i){const ot=ct.stencilBuffer?L.DEPTH_STENCIL_ATTACHMENT:L.DEPTH_ATTACHMENT;L.invalidateFramebuffer(L.DRAW_FRAMEBUFFER,[ot])}}}function St(ct){return Math.min(R.maxSamples,ct.samples)}function Gt(ct){const ot=M.get(ct);return ct.samples>0&&n.has("WEBGL_multisampled_render_to_texture")===!0&&ot.__useRenderToTexture!==!1}function Nt(ct){const ot=m.render.frame;S.get(ct)!==ot&&(S.set(ct,ot),ct.update())}function zt(ct,ot){const Mt=ct.colorSpace,Ot=ct.format,Ut=ct.type;return ct.isCompressedTexture===!0||ct.isVideoTexture===!0||Mt!==Mu&&Mt!==Po&&(We.getTransfer(Mt)===ii?(Ot!==Tn||Ut!==Hn)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Mt)),ot}function Lt(ct){return typeof HTMLImageElement<"u"&&ct instanceof HTMLImageElement?(d.width=ct.naturalWidth||ct.width,d.height=ct.naturalHeight||ct.height):typeof VideoFrame<"u"&&ct instanceof VideoFrame?(d.width=ct.displayWidth,d.height=ct.displayHeight):(d.width=ct.width,d.height=ct.height),d}this.allocateTextureUnit=G,this.resetTextureUnits=B,this.setTexture2D=k,this.setTexture2DArray=U,this.setTexture3D=W,this.setTextureCube=X,this.rebindTextures=vt,this.setupRenderTarget=xt,this.updateRenderTargetMipmap=ut,this.updateMultisampleRenderTarget=bt,this.setupDepthRenderbuffer=lt,this.setupFrameBufferTexture=et,this.useMultisampledRTT=Gt}function Sot(L,n){function c(M,R=Po){let I;const m=We.getTransfer(R);if(M===Hn)return L.UNSIGNED_BYTE;if(M===oC)return L.UNSIGNED_SHORT_4_4_4_4;if(M===hC)return L.UNSIGNED_SHORT_5_5_5_1;if(M===RO)return L.UNSIGNED_INT_5_9_9_9_REV;if(M===bO)return L.BYTE;if(M===AO)return L.SHORT;if(M===Bf)return L.UNSIGNED_SHORT;if(M===aC)return L.INT;if(M===Xh)return L.UNSIGNED_INT;if(M===La)return L.FLOAT;if(M===Hf)return L.HALF_FLOAT;if(M===LO)return L.ALPHA;if(M===OO)return L.RGB;if(M===Tn)return L.RGBA;if(M===Gf)return L.DEPTH_COMPONENT;if(M===Uf)return L.DEPTH_STENCIL;if(M===FO)return L.RED;if(M===lC)return L.RED_INTEGER;if(M===DO)return L.RG;if(M===uC)return L.RG_INTEGER;if(M===dC)return L.RGBA_INTEGER;if(M===Cm||M===Mm||M===Em||M===Pm)if(m===ii)if(I=n.get("WEBGL_compressed_texture_s3tc_srgb"),I!==null){if(M===Cm)return I.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(M===Mm)return I.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(M===Em)return I.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(M===Pm)return I.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(I=n.get("WEBGL_compressed_texture_s3tc"),I!==null){if(M===Cm)return I.COMPRESSED_RGB_S3TC_DXT1_EXT;if(M===Mm)return I.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(M===Em)return I.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(M===Pm)return I.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(M===cT||M===pT||M===vT||M===mT)if(I=n.get("WEBGL_compressed_texture_pvrtc"),I!==null){if(M===cT)return I.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(M===pT)return I.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(M===vT)return I.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(M===mT)return I.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(M===gT||M===xT||M===yT)if(I=n.get("WEBGL_compressed_texture_etc"),I!==null){if(M===gT||M===xT)return m===ii?I.COMPRESSED_SRGB8_ETC2:I.COMPRESSED_RGB8_ETC2;if(M===yT)return m===ii?I.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:I.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(M===ST||M===TT||M===CT||M===MT||M===ET||M===PT||M===wT||M===bT||M===AT||M===RT||M===LT||M===OT||M===FT||M===DT)if(I=n.get("WEBGL_compressed_texture_astc"),I!==null){if(M===ST)return m===ii?I.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:I.COMPRESSED_RGBA_ASTC_4x4_KHR;if(M===TT)return m===ii?I.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:I.COMPRESSED_RGBA_ASTC_5x4_KHR;if(M===CT)return m===ii?I.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:I.COMPRESSED_RGBA_ASTC_5x5_KHR;if(M===MT)return m===ii?I.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:I.COMPRESSED_RGBA_ASTC_6x5_KHR;if(M===ET)return m===ii?I.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:I.COMPRESSED_RGBA_ASTC_6x6_KHR;if(M===PT)return m===ii?I.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:I.COMPRESSED_RGBA_ASTC_8x5_KHR;if(M===wT)return m===ii?I.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:I.COMPRESSED_RGBA_ASTC_8x6_KHR;if(M===bT)return m===ii?I.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:I.COMPRESSED_RGBA_ASTC_8x8_KHR;if(M===AT)return m===ii?I.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:I.COMPRESSED_RGBA_ASTC_10x5_KHR;if(M===RT)return m===ii?I.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:I.COMPRESSED_RGBA_ASTC_10x6_KHR;if(M===LT)return m===ii?I.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:I.COMPRESSED_RGBA_ASTC_10x8_KHR;if(M===OT)return m===ii?I.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:I.COMPRESSED_RGBA_ASTC_10x10_KHR;if(M===FT)return m===ii?I.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:I.COMPRESSED_RGBA_ASTC_12x10_KHR;if(M===DT)return m===ii?I.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:I.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(M===wm||M===IT||M===BT)if(I=n.get("EXT_texture_compression_bptc"),I!==null){if(M===wm)return m===ii?I.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:I.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(M===IT)return I.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(M===BT)return I.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(M===IO||M===NT||M===GT||M===UT)if(I=n.get("EXT_texture_compression_rgtc"),I!==null){if(M===wm)return I.COMPRESSED_RED_RGTC1_EXT;if(M===NT)return I.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(M===GT)return I.COMPRESSED_RED_GREEN_RGTC2_EXT;if(M===UT)return I.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return M===Nf?L.UNSIGNED_INT_24_8:L[M]!==void 0?L[M]:null}return{convert:c}}const Tot=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Cot=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Mot{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(n,c,M){if(this.texture===null){const R=new $s,I=n.properties.get(R);I.__webglTexture=c.texture,(c.depthNear!==M.depthNear||c.depthFar!==M.depthFar)&&(this.depthNear=c.depthNear,this.depthFar=c.depthFar),this.texture=R}}getMesh(n){if(this.texture!==null&&this.mesh===null){const c=n.cameras[0].viewport,M=new Zr({vertexShader:Tot,fragmentShader:Cot,uniforms:{depthColor:{value:this.texture},depthWidth:{value:c.z},depthHeight:{value:c.w}}});this.mesh=new fi(new Kf(20,20),M)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Eot extends Bu{constructor(n,c){super();const M=this;let R=null,I=1,m=null,E="local-floor",i=1,d=null,S=null,u=null,l=null,h=null,r=null;const o=new Mot,p=c.getContextAttributes();let a=null,v=null;const x=[],g=[],y=new Ve;let T=null;const P=new zs;P.viewport=new si;const A=new zs;A.viewport=new si;const b=[P,A],O=new Xit;let D=null,B=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(J){let Y=x[J];return Y===void 0&&(Y=new GS,x[J]=Y),Y.getTargetRaySpace()},this.getControllerGrip=function(J){let Y=x[J];return Y===void 0&&(Y=new GS,x[J]=Y),Y.getGripSpace()},this.getHand=function(J){let Y=x[J];return Y===void 0&&(Y=new GS,x[J]=Y),Y.getHandSpace()};function G(J){const Y=g.indexOf(J.inputSource);if(Y===-1)return;const q=x[Y];q!==void 0&&(q.update(J.inputSource,J.frame,d||m),q.dispatchEvent({type:J.type,data:J.inputSource}))}function V(){R.removeEventListener("select",G),R.removeEventListener("selectstart",G),R.removeEventListener("selectend",G),R.removeEventListener("squeeze",G),R.removeEventListener("squeezestart",G),R.removeEventListener("squeezeend",G),R.removeEventListener("end",V),R.removeEventListener("inputsourceschange",k);for(let J=0;J<x.length;J++){const Y=g[J];Y!==null&&(g[J]=null,x[J].disconnect(Y))}D=null,B=null,o.reset(),n.setRenderTarget(a),h=null,l=null,u=null,R=null,v=null,K.stop(),M.isPresenting=!1,n.setPixelRatio(T),n.setSize(y.width,y.height,!1),M.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(J){I=J,M.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(J){E=J,M.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||m},this.setReferenceSpace=function(J){d=J},this.getBaseLayer=function(){return l!==null?l:h},this.getBinding=function(){return u},this.getFrame=function(){return r},this.getSession=function(){return R},this.setSession=async function(J){if(R=J,R!==null){if(a=n.getRenderTarget(),R.addEventListener("select",G),R.addEventListener("selectstart",G),R.addEventListener("selectend",G),R.addEventListener("squeeze",G),R.addEventListener("squeezestart",G),R.addEventListener("squeezeend",G),R.addEventListener("end",V),R.addEventListener("inputsourceschange",k),p.xrCompatible!==!0&&await c.makeXRCompatible(),T=n.getPixelRatio(),n.getSize(y),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let q=null,$=null,et=null;p.depth&&(et=p.stencil?c.DEPTH24_STENCIL8:c.DEPTH_COMPONENT24,q=p.stencil?Uf:Gf,$=p.stencil?Nf:Xh);const rt={colorFormat:c.RGBA8,depthFormat:et,scaleFactor:I};u=new XRWebGLBinding(R,c),l=u.createProjectionLayer(rt),R.updateRenderState({layers:[l]}),n.setPixelRatio(1),n.setSize(l.textureWidth,l.textureHeight,!1),v=new Ba(l.textureWidth,l.textureHeight,{format:Tn,type:Hn,depthTexture:new YO(l.textureWidth,l.textureHeight,$,void 0,void 0,void 0,void 0,void 0,void 0,q),stencilBuffer:p.stencil,colorSpace:n.outputColorSpace,samples:p.antialias?4:0,resolveDepthBuffer:l.ignoreDepthValues===!1,resolveStencilBuffer:l.ignoreDepthValues===!1})}else{const q={antialias:p.antialias,alpha:!0,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:I};h=new XRWebGLLayer(R,c,q),R.updateRenderState({baseLayer:h}),n.setPixelRatio(1),n.setSize(h.framebufferWidth,h.framebufferHeight,!1),v=new Ba(h.framebufferWidth,h.framebufferHeight,{format:Tn,type:Hn,colorSpace:n.outputColorSpace,stencilBuffer:p.stencil,resolveDepthBuffer:h.ignoreDepthValues===!1,resolveStencilBuffer:h.ignoreDepthValues===!1})}v.isXRRenderTarget=!0,this.setFoveation(i),d=null,m=await R.requestReferenceSpace(E),K.setContext(R),K.start(),M.isPresenting=!0,M.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(R!==null)return R.environmentBlendMode},this.getDepthTexture=function(){return o.getDepthTexture()};function k(J){for(let Y=0;Y<J.removed.length;Y++){const q=J.removed[Y],$=g.indexOf(q);$>=0&&(g[$]=null,x[$].disconnect(q))}for(let Y=0;Y<J.added.length;Y++){const q=J.added[Y];let $=g.indexOf(q);if($===-1){for(let rt=0;rt<x.length;rt++)if(rt>=g.length){g.push(q),$=rt;break}else if(g[rt]===null){g[rt]=q,$=rt;break}if($===-1)break}const et=x[$];et&&et.connect(q)}}const U=new wt,W=new wt;function X(J,Y,q){U.setFromMatrixPosition(Y.matrixWorld),W.setFromMatrixPosition(q.matrixWorld);const $=U.distanceTo(W),et=Y.projectionMatrix.elements,rt=q.projectionMatrix.elements,at=et[14]/(et[10]-1),lt=et[14]/(et[10]+1),vt=(et[9]+1)/et[5],xt=(et[9]-1)/et[5],ut=(et[8]-1)/et[0],mt=(rt[8]+1)/rt[0],Tt=at*ut,bt=at*mt,St=$/(-ut+mt),Gt=St*-ut;if(Y.matrixWorld.decompose(J.position,J.quaternion,J.scale),J.translateX(Gt),J.translateZ(St),J.matrixWorld.compose(J.position,J.quaternion,J.scale),J.matrixWorldInverse.copy(J.matrixWorld).invert(),et[10]===-1)J.projectionMatrix.copy(Y.projectionMatrix),J.projectionMatrixInverse.copy(Y.projectionMatrixInverse);else{const Nt=at+St,zt=lt+St,Lt=Tt-Gt,ct=bt+($-Gt),ot=vt*lt/zt*Nt,Mt=xt*lt/zt*Nt;J.projectionMatrix.makePerspective(Lt,ct,ot,Mt,Nt,zt),J.projectionMatrixInverse.copy(J.projectionMatrix).invert()}}function _(J,Y){Y===null?J.matrixWorld.copy(J.matrix):J.matrixWorld.multiplyMatrices(Y.matrixWorld,J.matrix),J.matrixWorldInverse.copy(J.matrixWorld).invert()}this.updateCamera=function(J){if(R===null)return;let Y=J.near,q=J.far;o.texture!==null&&(o.depthNear>0&&(Y=o.depthNear),o.depthFar>0&&(q=o.depthFar)),O.near=A.near=P.near=Y,O.far=A.far=P.far=q,(D!==O.near||B!==O.far)&&(R.updateRenderState({depthNear:O.near,depthFar:O.far}),D=O.near,B=O.far),P.layers.mask=J.layers.mask|2,A.layers.mask=J.layers.mask|4,O.layers.mask=P.layers.mask|A.layers.mask;const $=J.parent,et=O.cameras;_(O,$);for(let rt=0;rt<et.length;rt++)_(et[rt],$);et.length===2?X(O,P,A):O.projectionMatrix.copy(P.projectionMatrix),Q(J,O,$)};function Q(J,Y,q){q===null?J.matrix.copy(Y.matrixWorld):(J.matrix.copy(q.matrixWorld),J.matrix.invert(),J.matrix.multiply(Y.matrixWorld)),J.matrix.decompose(J.position,J.quaternion,J.scale),J.updateMatrixWorld(!0),J.projectionMatrix.copy(Y.projectionMatrix),J.projectionMatrixInverse.copy(Y.projectionMatrixInverse),J.isPerspectiveCamera&&(J.fov=Im*2*Math.atan(1/J.projectionMatrix.elements[5]),J.zoom=1)}this.getCamera=function(){return O},this.getFoveation=function(){if(!(l===null&&h===null))return i},this.setFoveation=function(J){i=J,l!==null&&(l.fixedFoveation=J),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=J)},this.hasDepthSensing=function(){return o.texture!==null},this.getDepthSensingMesh=function(){return o.getMesh(O)};let j=null;function it(J,Y){if(S=Y.getViewerPose(d||m),r=Y,S!==null){const q=S.views;h!==null&&(n.setRenderTargetFramebuffer(v,h.framebuffer),n.setRenderTarget(v));let $=!1;q.length!==O.cameras.length&&(O.cameras.length=0,$=!0);for(let at=0;at<q.length;at++){const lt=q[at];let vt=null;if(h!==null)vt=h.getViewport(lt);else{const ut=u.getViewSubImage(l,lt);vt=ut.viewport,at===0&&(n.setRenderTargetTextures(v,ut.colorTexture,ut.depthStencilTexture),n.setRenderTarget(v))}let xt=b[at];xt===void 0&&(xt=new zs,xt.layers.enable(at),xt.viewport=new si,b[at]=xt),xt.matrix.fromArray(lt.transform.matrix),xt.matrix.decompose(xt.position,xt.quaternion,xt.scale),xt.projectionMatrix.fromArray(lt.projectionMatrix),xt.projectionMatrixInverse.copy(xt.projectionMatrix).invert(),xt.viewport.set(vt.x,vt.y,vt.width,vt.height),at===0&&(O.matrix.copy(xt.matrix),O.matrix.decompose(O.position,O.quaternion,O.scale)),$===!0&&O.cameras.push(xt)}const et=R.enabledFeatures;if(et&&et.includes("depth-sensing")&&R.depthUsage=="gpu-optimized"&&u){const at=u.getDepthInformation(q[0]);at&&at.isValid&&at.texture&&o.init(n,at,R.renderState)}}for(let q=0;q<x.length;q++){const $=g[q],et=x[q];$!==null&&et!==void 0&&et.update($,Y,d||m)}j&&j(J,Y),Y.detectedPlanes&&M.dispatchEvent({type:"planesdetected",data:Y}),r=null}const K=new JO;K.setAnimationLoop(it),this.setAnimationLoop=function(J){j=J},this.dispose=function(){}}}const Ah=new Yn,Pot=new ei;function wot(L,n){function c(p,a){p.matrixAutoUpdate===!0&&p.updateMatrix(),a.value.copy(p.matrix)}function M(p,a){a.color.getRGB(p.fogColor.value,zO(L)),a.isFog?(p.fogNear.value=a.near,p.fogFar.value=a.far):a.isFogExp2&&(p.fogDensity.value=a.density)}function R(p,a,v,x,g){a.isMeshBasicMaterial||a.isMeshLambertMaterial?I(p,a):a.isMeshToonMaterial?(I(p,a),u(p,a)):a.isMeshPhongMaterial?(I(p,a),S(p,a)):a.isMeshStandardMaterial?(I(p,a),l(p,a),a.isMeshPhysicalMaterial&&h(p,a,g)):a.isMeshMatcapMaterial?(I(p,a),r(p,a)):a.isMeshDepthMaterial?I(p,a):a.isMeshDistanceMaterial?(I(p,a),o(p,a)):a.isMeshNormalMaterial?I(p,a):a.isLineBasicMaterial?(m(p,a),a.isLineDashedMaterial&&E(p,a)):a.isPointsMaterial?i(p,a,v,x):a.isSpriteMaterial?d(p,a):a.isShadowMaterial?(p.color.value.copy(a.color),p.opacity.value=a.opacity):a.isShaderMaterial&&(a.uniformsNeedUpdate=!1)}function I(p,a){p.opacity.value=a.opacity,a.color&&p.diffuse.value.copy(a.color),a.emissive&&p.emissive.value.copy(a.emissive).multiplyScalar(a.emissiveIntensity),a.map&&(p.map.value=a.map,c(a.map,p.mapTransform)),a.alphaMap&&(p.alphaMap.value=a.alphaMap,c(a.alphaMap,p.alphaMapTransform)),a.bumpMap&&(p.bumpMap.value=a.bumpMap,c(a.bumpMap,p.bumpMapTransform),p.bumpScale.value=a.bumpScale,a.side===nn&&(p.bumpScale.value*=-1)),a.normalMap&&(p.normalMap.value=a.normalMap,c(a.normalMap,p.normalMapTransform),p.normalScale.value.copy(a.normalScale),a.side===nn&&p.normalScale.value.negate()),a.displacementMap&&(p.displacementMap.value=a.displacementMap,c(a.displacementMap,p.displacementMapTransform),p.displacementScale.value=a.displacementScale,p.displacementBias.value=a.displacementBias),a.emissiveMap&&(p.emissiveMap.value=a.emissiveMap,c(a.emissiveMap,p.emissiveMapTransform)),a.specularMap&&(p.specularMap.value=a.specularMap,c(a.specularMap,p.specularMapTransform)),a.alphaTest>0&&(p.alphaTest.value=a.alphaTest);const v=n.get(a),x=v.envMap,g=v.envMapRotation;x&&(p.envMap.value=x,Ah.copy(g),Ah.x*=-1,Ah.y*=-1,Ah.z*=-1,x.isCubeTexture&&x.isRenderTargetTexture===!1&&(Ah.y*=-1,Ah.z*=-1),p.envMapRotation.value.setFromMatrix4(Pot.makeRotationFromEuler(Ah)),p.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,p.reflectivity.value=a.reflectivity,p.ior.value=a.ior,p.refractionRatio.value=a.refractionRatio),a.lightMap&&(p.lightMap.value=a.lightMap,p.lightMapIntensity.value=a.lightMapIntensity,c(a.lightMap,p.lightMapTransform)),a.aoMap&&(p.aoMap.value=a.aoMap,p.aoMapIntensity.value=a.aoMapIntensity,c(a.aoMap,p.aoMapTransform))}function m(p,a){p.diffuse.value.copy(a.color),p.opacity.value=a.opacity,a.map&&(p.map.value=a.map,c(a.map,p.mapTransform))}function E(p,a){p.dashSize.value=a.dashSize,p.totalSize.value=a.dashSize+a.gapSize,p.scale.value=a.scale}function i(p,a,v,x){p.diffuse.value.copy(a.color),p.opacity.value=a.opacity,p.size.value=a.size*v,p.scale.value=x*.5,a.map&&(p.map.value=a.map,c(a.map,p.uvTransform)),a.alphaMap&&(p.alphaMap.value=a.alphaMap,c(a.alphaMap,p.alphaMapTransform)),a.alphaTest>0&&(p.alphaTest.value=a.alphaTest)}function d(p,a){p.diffuse.value.copy(a.color),p.opacity.value=a.opacity,p.rotation.value=a.rotation,a.map&&(p.map.value=a.map,c(a.map,p.mapTransform)),a.alphaMap&&(p.alphaMap.value=a.alphaMap,c(a.alphaMap,p.alphaMapTransform)),a.alphaTest>0&&(p.alphaTest.value=a.alphaTest)}function S(p,a){p.specular.value.copy(a.specular),p.shininess.value=Math.max(a.shininess,1e-4)}function u(p,a){a.gradientMap&&(p.gradientMap.value=a.gradientMap)}function l(p,a){p.metalness.value=a.metalness,a.metalnessMap&&(p.metalnessMap.value=a.metalnessMap,c(a.metalnessMap,p.metalnessMapTransform)),p.roughness.value=a.roughness,a.roughnessMap&&(p.roughnessMap.value=a.roughnessMap,c(a.roughnessMap,p.roughnessMapTransform)),a.envMap&&(p.envMapIntensity.value=a.envMapIntensity)}function h(p,a,v){p.ior.value=a.ior,a.sheen>0&&(p.sheenColor.value.copy(a.sheenColor).multiplyScalar(a.sheen),p.sheenRoughness.value=a.sheenRoughness,a.sheenColorMap&&(p.sheenColorMap.value=a.sheenColorMap,c(a.sheenColorMap,p.sheenColorMapTransform)),a.sheenRoughnessMap&&(p.sheenRoughnessMap.value=a.sheenRoughnessMap,c(a.sheenRoughnessMap,p.sheenRoughnessMapTransform))),a.clearcoat>0&&(p.clearcoat.value=a.clearcoat,p.clearcoatRoughness.value=a.clearcoatRoughness,a.clearcoatMap&&(p.clearcoatMap.value=a.clearcoatMap,c(a.clearcoatMap,p.clearcoatMapTransform)),a.clearcoatRoughnessMap&&(p.clearcoatRoughnessMap.value=a.clearcoatRoughnessMap,c(a.clearcoatRoughnessMap,p.clearcoatRoughnessMapTransform)),a.clearcoatNormalMap&&(p.clearcoatNormalMap.value=a.clearcoatNormalMap,c(a.clearcoatNormalMap,p.clearcoatNormalMapTransform),p.clearcoatNormalScale.value.copy(a.clearcoatNormalScale),a.side===nn&&p.clearcoatNormalScale.value.negate())),a.dispersion>0&&(p.dispersion.value=a.dispersion),a.iridescence>0&&(p.iridescence.value=a.iridescence,p.iridescenceIOR.value=a.iridescenceIOR,p.iridescenceThicknessMinimum.value=a.iridescenceThicknessRange[0],p.iridescenceThicknessMaximum.value=a.iridescenceThicknessRange[1],a.iridescenceMap&&(p.iridescenceMap.value=a.iridescenceMap,c(a.iridescenceMap,p.iridescenceMapTransform)),a.iridescenceThicknessMap&&(p.iridescenceThicknessMap.value=a.iridescenceThicknessMap,c(a.iridescenceThicknessMap,p.iridescenceThicknessMapTransform))),a.transmission>0&&(p.transmission.value=a.transmission,p.transmissionSamplerMap.value=v.texture,p.transmissionSamplerSize.value.set(v.width,v.height),a.transmissionMap&&(p.transmissionMap.value=a.transmissionMap,c(a.transmissionMap,p.transmissionMapTransform)),p.thickness.value=a.thickness,a.thicknessMap&&(p.thicknessMap.value=a.thicknessMap,c(a.thicknessMap,p.thicknessMapTransform)),p.attenuationDistance.value=a.attenuationDistance,p.attenuationColor.value.copy(a.attenuationColor)),a.anisotropy>0&&(p.anisotropyVector.value.set(a.anisotropy*Math.cos(a.anisotropyRotation),a.anisotropy*Math.sin(a.anisotropyRotation)),a.anisotropyMap&&(p.anisotropyMap.value=a.anisotropyMap,c(a.anisotropyMap,p.anisotropyMapTransform))),p.specularIntensity.value=a.specularIntensity,p.specularColor.value.copy(a.specularColor),a.specularColorMap&&(p.specularColorMap.value=a.specularColorMap,c(a.specularColorMap,p.specularColorMapTransform)),a.specularIntensityMap&&(p.specularIntensityMap.value=a.specularIntensityMap,c(a.specularIntensityMap,p.specularIntensityMapTransform))}function r(p,a){a.matcap&&(p.matcap.value=a.matcap)}function o(p,a){const v=n.get(a).light;p.referencePosition.value.setFromMatrixPosition(v.matrixWorld),p.nearDistance.value=v.shadow.camera.near,p.farDistance.value=v.shadow.camera.far}return{refreshFogUniforms:M,refreshMaterialUniforms:R}}function bot(L,n,c,M){let R={},I={},m=[];const E=L.getParameter(L.MAX_UNIFORM_BUFFER_BINDINGS);function i(v,x){const g=x.program;M.uniformBlockBinding(v,g)}function d(v,x){let g=R[v.id];g===void 0&&(r(v),g=S(v),R[v.id]=g,v.addEventListener("dispose",p));const y=x.program;M.updateUBOMapping(v,y);const T=n.render.frame;I[v.id]!==T&&(l(v),I[v.id]=T)}function S(v){const x=u();v.__bindingPointIndex=x;const g=L.createBuffer(),y=v.__size,T=v.usage;return L.bindBuffer(L.UNIFORM_BUFFER,g),L.bufferData(L.UNIFORM_BUFFER,y,T),L.bindBuffer(L.UNIFORM_BUFFER,null),L.bindBufferBase(L.UNIFORM_BUFFER,x,g),g}function u(){for(let v=0;v<E;v++)if(m.indexOf(v)===-1)return m.push(v),v;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function l(v){const x=R[v.id],g=v.uniforms,y=v.__cache;L.bindBuffer(L.UNIFORM_BUFFER,x);for(let T=0,P=g.length;T<P;T++){const A=Array.isArray(g[T])?g[T]:[g[T]];for(let b=0,O=A.length;b<O;b++){const D=A[b];if(h(D,T,b,y)===!0){const B=D.__offset,G=Array.isArray(D.value)?D.value:[D.value];let V=0;for(let k=0;k<G.length;k++){const U=G[k],W=o(U);typeof U=="number"||typeof U=="boolean"?(D.__data[0]=U,L.bufferSubData(L.UNIFORM_BUFFER,B+V,D.__data)):U.isMatrix3?(D.__data[0]=U.elements[0],D.__data[1]=U.elements[1],D.__data[2]=U.elements[2],D.__data[3]=0,D.__data[4]=U.elements[3],D.__data[5]=U.elements[4],D.__data[6]=U.elements[5],D.__data[7]=0,D.__data[8]=U.elements[6],D.__data[9]=U.elements[7],D.__data[10]=U.elements[8],D.__data[11]=0):(U.toArray(D.__data,V),V+=W.storage/Float32Array.BYTES_PER_ELEMENT)}L.bufferSubData(L.UNIFORM_BUFFER,B,D.__data)}}}L.bindBuffer(L.UNIFORM_BUFFER,null)}function h(v,x,g,y){const T=v.value,P=x+"_"+g;if(y[P]===void 0)return typeof T=="number"||typeof T=="boolean"?y[P]=T:y[P]=T.clone(),!0;{const A=y[P];if(typeof T=="number"||typeof T=="boolean"){if(A!==T)return y[P]=T,!0}else if(A.equals(T)===!1)return A.copy(T),!0}return!1}function r(v){const x=v.uniforms;let g=0;const y=16;for(let P=0,A=x.length;P<A;P++){const b=Array.isArray(x[P])?x[P]:[x[P]];for(let O=0,D=b.length;O<D;O++){const B=b[O],G=Array.isArray(B.value)?B.value:[B.value];for(let V=0,k=G.length;V<k;V++){const U=G[V],W=o(U),X=g%y,_=X%W.boundary,Q=X+_;g+=_,Q!==0&&y-Q<W.storage&&(g+=y-Q),B.__data=new Float32Array(W.storage/Float32Array.BYTES_PER_ELEMENT),B.__offset=g,g+=W.storage}}}const T=g%y;return T>0&&(g+=y-T),v.__size=g,v.__cache={},this}function o(v){const x={boundary:0,storage:0};return typeof v=="number"||typeof v=="boolean"?(x.boundary=4,x.storage=4):v.isVector2?(x.boundary=8,x.storage=8):v.isVector3||v.isColor?(x.boundary=16,x.storage=12):v.isVector4?(x.boundary=16,x.storage=16):v.isMatrix3?(x.boundary=48,x.storage=48):v.isMatrix4?(x.boundary=64,x.storage=64):v.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",v),x}function p(v){const x=v.target;x.removeEventListener("dispose",p);const g=m.indexOf(x.__bindingPointIndex);m.splice(g,1),L.deleteBuffer(R[x.id]),delete R[x.id],delete I[x.id]}function a(){for(const v in R)L.deleteBuffer(R[v]);m=[],R={},I={}}return{bind:i,update:d,dispose:a}}class eF{constructor(n={}){const{canvas:c=tit(),context:M=null,depth:R=!0,stencil:I=!1,alpha:m=!1,antialias:E=!1,premultipliedAlpha:i=!0,preserveDrawingBuffer:d=!1,powerPreference:S="default",failIfMajorPerformanceCaveat:u=!1,reverseDepthBuffer:l=!1}=n;this.isWebGLRenderer=!0;let h;if(M!==null){if(typeof WebGLRenderingContext<"u"&&M instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=M.getContextAttributes().alpha}else h=m;const r=new Uint32Array(4),o=new Int32Array(4);let p=null,a=null;const v=[],x=[];this.domElement=c,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Ro,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const g=this;let y=!1;this._outputColorSpace=xs;let T=0,P=0,A=null,b=-1,O=null;const D=new si,B=new si;let G=null;const V=new Ae(0);let k=0,U=c.width,W=c.height,X=1,_=null,Q=null;const j=new si(0,0,U,W),it=new si(0,0,U,W);let K=!1;const J=new mC;let Y=!1,q=!1;const $=new ei,et=new ei,rt=new wt,at=new si,lt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let vt=!1;function xt(){return A===null?X:1}let ut=M;function mt(pt,Pt){return c.getContext(pt,Pt)}try{const pt={alpha:!0,depth:R,stencil:I,antialias:E,premultipliedAlpha:i,preserveDrawingBuffer:d,powerPreference:S,failIfMajorPerformanceCaveat:u};if("setAttribute"in c&&c.setAttribute("data-engine",`three.js r${rC}`),c.addEventListener("webglcontextlost",oe,!1),c.addEventListener("webglcontextrestored",Jt,!1),c.addEventListener("webglcontextcreationerror",Xt,!1),ut===null){const Pt="webgl2";if(ut=mt(Pt,pt),ut===null)throw mt(Pt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(pt){throw console.error("THREE.WebGLRenderer: "+pt.message),pt}let Tt,bt,St,Gt,Nt,zt,Lt,ct,ot,Mt,Ot,Ut,Rt,_t,Yt,ee,$t,kt,Vt,ne,le,te,xe,Ct;function jt(){Tt=new Urt(ut),Tt.init(),te=new Sot(ut,Tt),bt=new Ort(ut,Tt,n,te),St=new xot(ut,Tt),bt.reverseDepthBuffer&&l&&St.buffers.depth.setReversed(!0),Gt=new zrt(ut),Nt=new rot,zt=new yot(ut,Tt,St,Nt,bt,te,Gt),Lt=new Drt(g),ct=new Grt(g),ot=new _it(ut),xe=new Rrt(ut,ot),Mt=new krt(ut,ot,Gt,xe),Ot=new Xrt(ut,Mt,ot,Gt),Vt=new Wrt(ut,bt,zt),ee=new Frt(Nt),Ut=new not(g,Lt,ct,Tt,bt,xe,ee),Rt=new wot(g,Nt),_t=new oot,Yt=new cot(Tt),kt=new Art(g,Lt,ct,St,Ot,h,i),$t=new mot(g,Ot,bt),Ct=new bot(ut,Gt,bt,St),ne=new Lrt(ut,Tt,Gt),le=new Vrt(ut,Tt,Gt),Gt.programs=Ut.programs,g.capabilities=bt,g.extensions=Tt,g.properties=Nt,g.renderLists=_t,g.shadowMap=$t,g.state=St,g.info=Gt}jt();const Zt=new Eot(g,ut);this.xr=Zt,this.getContext=function(){return ut},this.getContextAttributes=function(){return ut.getContextAttributes()},this.forceContextLoss=function(){const pt=Tt.get("WEBGL_lose_context");pt&&pt.loseContext()},this.forceContextRestore=function(){const pt=Tt.get("WEBGL_lose_context");pt&&pt.restoreContext()},this.getPixelRatio=function(){return X},this.setPixelRatio=function(pt){pt!==void 0&&(X=pt,this.setSize(U,W,!1))},this.getSize=function(pt){return pt.set(U,W)},this.setSize=function(pt,Pt,Ft=!0){if(Zt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}U=pt,W=Pt,c.width=Math.floor(pt*X),c.height=Math.floor(Pt*X),Ft===!0&&(c.style.width=pt+"px",c.style.height=Pt+"px"),this.setViewport(0,0,pt,Pt)},this.getDrawingBufferSize=function(pt){return pt.set(U*X,W*X).floor()},this.setDrawingBufferSize=function(pt,Pt,Ft){U=pt,W=Pt,X=Ft,c.width=Math.floor(pt*Ft),c.height=Math.floor(Pt*Ft),this.setViewport(0,0,pt,Pt)},this.getCurrentViewport=function(pt){return pt.copy(D)},this.getViewport=function(pt){return pt.copy(j)},this.setViewport=function(pt,Pt,Ft,Bt){pt.isVector4?j.set(pt.x,pt.y,pt.z,pt.w):j.set(pt,Pt,Ft,Bt),St.viewport(D.copy(j).multiplyScalar(X).round())},this.getScissor=function(pt){return pt.copy(it)},this.setScissor=function(pt,Pt,Ft,Bt){pt.isVector4?it.set(pt.x,pt.y,pt.z,pt.w):it.set(pt,Pt,Ft,Bt),St.scissor(B.copy(it).multiplyScalar(X).round())},this.getScissorTest=function(){return K},this.setScissorTest=function(pt){St.setScissorTest(K=pt)},this.setOpaqueSort=function(pt){_=pt},this.setTransparentSort=function(pt){Q=pt},this.getClearColor=function(pt){return pt.copy(kt.getClearColor())},this.setClearColor=function(){kt.setClearColor(...arguments)},this.getClearAlpha=function(){return kt.getClearAlpha()},this.setClearAlpha=function(){kt.setClearAlpha(...arguments)},this.clear=function(pt=!0,Pt=!0,Ft=!0){let Bt=0;if(pt){let At=!1;if(A!==null){const Qt=A.texture.format;At=Qt===dC||Qt===uC||Qt===lC}if(At){const Qt=A.texture.type,Kt=Qt===Hn||Qt===Xh||Qt===Bf||Qt===Nf||Qt===oC||Qt===hC,ie=kt.getClearColor(),ae=kt.getClearAlpha(),he=ie.r,Ee=ie.g,pe=ie.b;Kt?(r[0]=he,r[1]=Ee,r[2]=pe,r[3]=ae,ut.clearBufferuiv(ut.COLOR,0,r)):(o[0]=he,o[1]=Ee,o[2]=pe,o[3]=ae,ut.clearBufferiv(ut.COLOR,0,o))}else Bt|=ut.COLOR_BUFFER_BIT}Pt&&(Bt|=ut.DEPTH_BUFFER_BIT),Ft&&(Bt|=ut.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ut.clear(Bt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){c.removeEventListener("webglcontextlost",oe,!1),c.removeEventListener("webglcontextrestored",Jt,!1),c.removeEventListener("webglcontextcreationerror",Xt,!1),kt.dispose(),_t.dispose(),Yt.dispose(),Nt.dispose(),Lt.dispose(),ct.dispose(),Ot.dispose(),xe.dispose(),Ct.dispose(),Ut.dispose(),Zt.dispose(),Zt.removeEventListener("sessionstart",Yu),Zt.removeEventListener("sessionend",hc),qr.stop()};function oe(pt){pt.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function Jt(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const pt=Gt.autoReset,Pt=$t.enabled,Ft=$t.autoUpdate,Bt=$t.needsUpdate,At=$t.type;jt(),Gt.autoReset=pt,$t.enabled=Pt,$t.autoUpdate=Ft,$t.needsUpdate=Bt,$t.type=At}function Xt(pt){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",pt.statusMessage)}function ue(pt){const Pt=pt.target;Pt.removeEventListener("dispose",ue),Pe(Pt)}function Pe(pt){ai(pt),Nt.remove(pt)}function ai(pt){const Pt=Nt.get(pt).programs;Pt!==void 0&&(Pt.forEach(function(Ft){Ut.releaseProgram(Ft)}),pt.isShaderMaterial&&Ut.releaseShaderCache(pt))}this.renderBufferDirect=function(pt,Pt,Ft,Bt,At,Qt){Pt===null&&(Pt=lt);const Kt=At.isMesh&&At.matrixWorld.determinant()<0,ie=zo(pt,Pt,Ft,Bt,At);St.setMaterial(Bt,Kt);let ae=Ft.index,he=1;if(Bt.wireframe===!0){if(ae=Mt.getWireframeAttribute(Ft),ae===void 0)return;he=2}const Ee=Ft.drawRange,pe=Ft.attributes.position;let Be=Ee.start*he,Ge=(Ee.start+Ee.count)*he;Qt!==null&&(Be=Math.max(Be,Qt.start*he),Ge=Math.min(Ge,(Qt.start+Qt.count)*he)),ae!==null?(Be=Math.max(Be,0),Ge=Math.min(Ge,ae.count)):pe!=null&&(Be=Math.max(Be,0),Ge=Math.min(Ge,pe.count));const xi=Ge-Be;if(xi<0||xi===1/0)return;xe.setup(At,Bt,ie,Ft,ae);let oi,qe=ne;if(ae!==null&&(oi=ot.get(ae),qe=le,qe.setIndex(oi)),At.isMesh)Bt.wireframe===!0?(St.setLineWidth(Bt.wireframeLinewidth*xt()),qe.setMode(ut.LINES)):qe.setMode(ut.TRIANGLES);else if(At.isLine){let Se=Bt.linewidth;Se===void 0&&(Se=1),St.setLineWidth(Se*xt()),At.isLineSegments?qe.setMode(ut.LINES):At.isLineLoop?qe.setMode(ut.LINE_LOOP):qe.setMode(ut.LINE_STRIP)}else At.isPoints?qe.setMode(ut.POINTS):At.isSprite&&qe.setMode(ut.TRIANGLES);if(At.isBatchedMesh)if(At._multiDrawInstances!==null)mu("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),qe.renderMultiDrawInstances(At._multiDrawStarts,At._multiDrawCounts,At._multiDrawCount,At._multiDrawInstances);else if(Tt.get("WEBGL_multi_draw"))qe.renderMultiDraw(At._multiDrawStarts,At._multiDrawCounts,At._multiDrawCount);else{const Se=At._multiDrawStarts,vi=At._multiDrawCounts,He=At._multiDrawCount,Fs=ae?ot.get(ae).bytesPerElement:1,ea=Nt.get(Bt).currentProgram.getUniforms();for(let Ds=0;Ds<He;Ds++)ea.setValue(ut,"_gl_DrawID",Ds),qe.render(Se[Ds]/Fs,vi[Ds])}else if(At.isInstancedMesh)qe.renderInstances(Be,xi,At.count);else if(Ft.isInstancedBufferGeometry){const Se=Ft._maxInstanceCount!==void 0?Ft._maxInstanceCount:1/0,vi=Math.min(Ft.instanceCount,Se);qe.renderInstances(Be,xi,vi)}else qe.render(Be,xi)};function Je(pt,Pt,Ft){pt.transparent===!0&&pt.side===sn&&pt.forceSinglePass===!1?(pt.side=nn,pt.needsUpdate=!0,ta(pt,Pt,Ft),pt.side=Ia,pt.needsUpdate=!0,ta(pt,Pt,Ft),pt.side=sn):ta(pt,Pt,Ft)}this.compile=function(pt,Pt,Ft=null){Ft===null&&(Ft=pt),a=Yt.get(Ft),a.init(Pt),x.push(a),Ft.traverseVisible(function(At){At.isLight&&At.layers.test(Pt.layers)&&(a.pushLight(At),At.castShadow&&a.pushShadow(At))}),pt!==Ft&&pt.traverseVisible(function(At){At.isLight&&At.layers.test(Pt.layers)&&(a.pushLight(At),At.castShadow&&a.pushShadow(At))}),a.setupLights();const Bt=new Set;return pt.traverse(function(At){if(!(At.isMesh||At.isPoints||At.isLine||At.isSprite))return;const Qt=At.material;if(Qt)if(Array.isArray(Qt))for(let Kt=0;Kt<Qt.length;Kt++){const ie=Qt[Kt];Je(ie,Ft,At),Bt.add(ie)}else Je(Qt,Ft,At),Bt.add(Qt)}),a=x.pop(),Bt},this.compileAsync=function(pt,Pt,Ft=null){const Bt=this.compile(pt,Pt,Ft);return new Promise(At=>{function Qt(){if(Bt.forEach(function(Kt){Nt.get(Kt).currentProgram.isReady()&&Bt.delete(Kt)}),Bt.size===0){At(pt);return}setTimeout(Qt,10)}Tt.get("KHR_parallel_shader_compile")!==null?Qt():setTimeout(Qt,10)})};let on=null;function _n(pt){on&&on(pt)}function Yu(){qr.stop()}function hc(){qr.start()}const qr=new JO;qr.setAnimationLoop(_n),typeof self<"u"&&qr.setContext(self),this.setAnimationLoop=function(pt){on=pt,Zt.setAnimationLoop(pt),pt===null?qr.stop():qr.start()},Zt.addEventListener("sessionstart",Yu),Zt.addEventListener("sessionend",hc),this.render=function(pt,Pt){if(Pt!==void 0&&Pt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(y===!0)return;if(pt.matrixWorldAutoUpdate===!0&&pt.updateMatrixWorld(),Pt.parent===null&&Pt.matrixWorldAutoUpdate===!0&&Pt.updateMatrixWorld(),Zt.enabled===!0&&Zt.isPresenting===!0&&(Zt.cameraAutoUpdate===!0&&Zt.updateCamera(Pt),Pt=Zt.getCamera()),pt.isScene===!0&&pt.onBeforeRender(g,pt,Pt,A),a=Yt.get(pt,x.length),a.init(Pt),x.push(a),et.multiplyMatrices(Pt.projectionMatrix,Pt.matrixWorldInverse),J.setFromProjectionMatrix(et),q=this.localClippingEnabled,Y=ee.init(this.clippingPlanes,q),p=_t.get(pt,v.length),p.init(),v.push(p),Zt.enabled===!0&&Zt.isPresenting===!0){const Qt=g.xr.getDepthSensingMesh();Qt!==null&&$u(Qt,Pt,-1/0,g.sortObjects)}$u(pt,Pt,0,g.sortObjects),p.finish(),g.sortObjects===!0&&p.sort(_,Q),vt=Zt.enabled===!1||Zt.isPresenting===!1||Zt.hasDepthSensing()===!1,vt&&kt.addToRenderList(p,pt),this.info.render.frame++,Y===!0&&ee.beginShadows();const Ft=a.state.shadowsArray;$t.render(Ft,pt,Pt),Y===!0&&ee.endShadows(),this.info.autoReset===!0&&this.info.reset();const Bt=p.opaque,At=p.transmissive;if(a.setupLights(),Pt.isArrayCamera){const Qt=Pt.cameras;if(At.length>0)for(let Kt=0,ie=Qt.length;Kt<ie;Kt++){const ae=Qt[Kt];lc(Bt,At,pt,ae)}vt&&kt.render(pt);for(let Kt=0,ie=Qt.length;Kt<ie;Kt++){const ae=Qt[Kt];jh(p,pt,ae,ae.viewport)}}else At.length>0&&lc(Bt,At,pt,Pt),vt&&kt.render(pt),jh(p,pt,Pt);A!==null&&P===0&&(zt.updateMultisampleRenderTarget(A),zt.updateRenderTargetMipmap(A)),pt.isScene===!0&&pt.onAfterRender(g,pt,Pt),xe.resetDefaultState(),b=-1,O=null,x.pop(),x.length>0?(a=x[x.length-1],Y===!0&&ee.setGlobalState(g.clippingPlanes,a.state.camera)):a=null,v.pop(),v.length>0?p=v[v.length-1]:p=null};function $u(pt,Pt,Ft,Bt){if(pt.visible===!1)return;if(pt.layers.test(Pt.layers)){if(pt.isGroup)Ft=pt.renderOrder;else if(pt.isLOD)pt.autoUpdate===!0&&pt.update(Pt);else if(pt.isLight)a.pushLight(pt),pt.castShadow&&a.pushShadow(pt);else if(pt.isSprite){if(!pt.frustumCulled||J.intersectsSprite(pt)){Bt&&at.setFromMatrixPosition(pt.matrixWorld).applyMatrix4(et);const Kt=Ot.update(pt),ie=pt.material;ie.visible&&p.push(pt,Kt,ie,Ft,at.z,null)}}else if((pt.isMesh||pt.isLine||pt.isPoints)&&(!pt.frustumCulled||J.intersectsObject(pt))){const Kt=Ot.update(pt),ie=pt.material;if(Bt&&(pt.boundingSphere!==void 0?(pt.boundingSphere===null&&pt.computeBoundingSphere(),at.copy(pt.boundingSphere.center)):(Kt.boundingSphere===null&&Kt.computeBoundingSphere(),at.copy(Kt.boundingSphere.center)),at.applyMatrix4(pt.matrixWorld).applyMatrix4(et)),Array.isArray(ie)){const ae=Kt.groups;for(let he=0,Ee=ae.length;he<Ee;he++){const pe=ae[he],Be=ie[pe.materialIndex];Be&&Be.visible&&p.push(pt,Kt,Be,Ft,at.z,pe)}}else ie.visible&&p.push(pt,Kt,ie,Ft,at.z,null)}}const Qt=pt.children;for(let Kt=0,ie=Qt.length;Kt<ie;Kt++)$u(Qt[Kt],Pt,Ft,Bt)}function jh(pt,Pt,Ft,Bt){const At=pt.opaque,Qt=pt.transmissive,Kt=pt.transparent;a.setupLightsView(Ft),Y===!0&&ee.setGlobalState(g.clippingPlanes,Ft),Bt&&St.viewport(D.copy(Bt)),At.length>0&&Vo(At,Pt,Ft),Qt.length>0&&Vo(Qt,Pt,Ft),Kt.length>0&&Vo(Kt,Pt,Ft),St.buffers.depth.setTest(!0),St.buffers.depth.setMask(!0),St.buffers.color.setMask(!0),St.setPolygonOffset(!1)}function lc(pt,Pt,Ft,Bt){if((Ft.isScene===!0?Ft.overrideMaterial:null)!==null)return;a.state.transmissionRenderTarget[Bt.id]===void 0&&(a.state.transmissionRenderTarget[Bt.id]=new Ba(1,1,{generateMipmaps:!0,type:Tt.has("EXT_color_buffer_half_float")||Tt.has("EXT_color_buffer_float")?Hf:Hn,minFilter:Nh,samples:4,stencilBuffer:I,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:We.workingColorSpace}));const Qt=a.state.transmissionRenderTarget[Bt.id],Kt=Bt.viewport||D;Qt.setSize(Kt.z*g.transmissionResolutionScale,Kt.w*g.transmissionResolutionScale);const ie=g.getRenderTarget(),ae=g.getActiveCubeFace(),he=g.getActiveMipmapLevel();g.setRenderTarget(Qt),g.getClearColor(V),k=g.getClearAlpha(),k<1&&g.setClearColor(16777215,.5),g.clear(),vt&&kt.render(Ft);const Ee=g.toneMapping;g.toneMapping=Ro;const pe=Bt.viewport;if(Bt.viewport!==void 0&&(Bt.viewport=void 0),a.setupLightsView(Bt),Y===!0&&ee.setGlobalState(g.clippingPlanes,Bt),Vo(pt,Ft,Bt),zt.updateMultisampleRenderTarget(Qt),zt.updateRenderTargetMipmap(Qt),Tt.has("WEBGL_multisampled_render_to_texture")===!1){let Be=!1;for(let Ge=0,xi=Pt.length;Ge<xi;Ge++){const oi=Pt[Ge],qe=oi.object,Se=oi.geometry,vi=oi.material,He=oi.group;if(vi.side===sn&&qe.layers.test(Bt.layers)){const Fs=vi.side;vi.side=nn,vi.needsUpdate=!0,uc(qe,Ft,Bt,Se,vi,He),vi.side=Fs,vi.needsUpdate=!0,Be=!0}}Be===!0&&(zt.updateMultisampleRenderTarget(Qt),zt.updateRenderTargetMipmap(Qt))}g.setRenderTarget(ie,ae,he),g.setClearColor(V,k),pe!==void 0&&(Bt.viewport=pe),g.toneMapping=Ee}function Vo(pt,Pt,Ft){const Bt=Pt.isScene===!0?Pt.overrideMaterial:null;for(let At=0,Qt=pt.length;At<Qt;At++){const Kt=pt[At],ie=Kt.object,ae=Kt.geometry,he=Kt.group;let Ee=Kt.material;Ee.allowOverride===!0&&Bt!==null&&(Ee=Bt),ie.layers.test(Ft.layers)&&uc(ie,Pt,Ft,ae,Ee,he)}}function uc(pt,Pt,Ft,Bt,At,Qt){pt.onBeforeRender(g,Pt,Ft,Bt,At,Qt),pt.modelViewMatrix.multiplyMatrices(Ft.matrixWorldInverse,pt.matrixWorld),pt.normalMatrix.getNormalMatrix(pt.modelViewMatrix),At.onBeforeRender(g,Pt,Ft,Bt,pt,Qt),At.transparent===!0&&At.side===sn&&At.forceSinglePass===!1?(At.side=nn,At.needsUpdate=!0,g.renderBufferDirect(Ft,Pt,Bt,At,pt,Qt),At.side=Ia,At.needsUpdate=!0,g.renderBufferDirect(Ft,Pt,Bt,At,pt,Qt),At.side=sn):g.renderBufferDirect(Ft,Pt,Bt,At,pt,Qt),pt.onAfterRender(g,Pt,Ft,Bt,At,Qt)}function ta(pt,Pt,Ft){Pt.isScene!==!0&&(Pt=lt);const Bt=Nt.get(pt),At=a.state.lights,Qt=a.state.shadowsArray,Kt=At.state.version,ie=Ut.getParameters(pt,At.state,Qt,Pt,Ft),ae=Ut.getProgramCacheKey(ie);let he=Bt.programs;Bt.environment=pt.isMeshStandardMaterial?Pt.environment:null,Bt.fog=Pt.fog,Bt.envMap=(pt.isMeshStandardMaterial?ct:Lt).get(pt.envMap||Bt.environment),Bt.envMapRotation=Bt.environment!==null&&pt.envMap===null?Pt.environmentRotation:pt.envMapRotation,he===void 0&&(pt.addEventListener("dispose",ue),he=new Map,Bt.programs=he);let Ee=he.get(ae);if(Ee!==void 0){if(Bt.currentProgram===Ee&&Bt.lightsStateVersion===Kt)return fc(pt,ie),Ee}else ie.uniforms=Ut.getUniforms(pt),pt.onBeforeCompile(ie,g),Ee=Ut.acquireProgram(ie,ae),he.set(ae,Ee),Bt.uniforms=ie.uniforms;const pe=Bt.uniforms;return(!pt.isShaderMaterial&&!pt.isRawShaderMaterial||pt.clipping===!0)&&(pe.clippingPlanes=ee.uniform),fc(pt,ie),Bt.needsLights=Sg(pt),Bt.lightsStateVersion=Kt,Bt.needsLights&&(pe.ambientLightColor.value=At.state.ambient,pe.lightProbe.value=At.state.probe,pe.directionalLights.value=At.state.directional,pe.directionalLightShadows.value=At.state.directionalShadow,pe.spotLights.value=At.state.spot,pe.spotLightShadows.value=At.state.spotShadow,pe.rectAreaLights.value=At.state.rectArea,pe.ltc_1.value=At.state.rectAreaLTC1,pe.ltc_2.value=At.state.rectAreaLTC2,pe.pointLights.value=At.state.point,pe.pointLightShadows.value=At.state.pointShadow,pe.hemisphereLights.value=At.state.hemi,pe.directionalShadowMap.value=At.state.directionalShadowMap,pe.directionalShadowMatrix.value=At.state.directionalShadowMatrix,pe.spotShadowMap.value=At.state.spotShadowMap,pe.spotLightMatrix.value=At.state.spotLightMatrix,pe.spotLightMap.value=At.state.spotLightMap,pe.pointShadowMap.value=At.state.pointShadowMap,pe.pointShadowMatrix.value=At.state.pointShadowMatrix),Bt.currentProgram=Ee,Bt.uniformsList=null,Ee}function dc(pt){if(pt.uniformsList===null){const Pt=pt.currentProgram.getUniforms();pt.uniformsList=Am.seqWithValue(Pt.seq,pt.uniforms)}return pt.uniformsList}function fc(pt,Pt){const Ft=Nt.get(pt);Ft.outputColorSpace=Pt.outputColorSpace,Ft.batching=Pt.batching,Ft.batchingColor=Pt.batchingColor,Ft.instancing=Pt.instancing,Ft.instancingColor=Pt.instancingColor,Ft.instancingMorph=Pt.instancingMorph,Ft.skinning=Pt.skinning,Ft.morphTargets=Pt.morphTargets,Ft.morphNormals=Pt.morphNormals,Ft.morphColors=Pt.morphColors,Ft.morphTargetsCount=Pt.morphTargetsCount,Ft.numClippingPlanes=Pt.numClippingPlanes,Ft.numIntersection=Pt.numClipIntersection,Ft.vertexAlphas=Pt.vertexAlphas,Ft.vertexTangents=Pt.vertexTangents,Ft.toneMapping=Pt.toneMapping}function zo(pt,Pt,Ft,Bt,At){Pt.isScene!==!0&&(Pt=lt),zt.resetTextureUnits();const Qt=Pt.fog,Kt=Bt.isMeshStandardMaterial?Pt.environment:null,ie=A===null?g.outputColorSpace:A.isXRRenderTarget===!0?A.texture.colorSpace:Mu,ae=(Bt.isMeshStandardMaterial?ct:Lt).get(Bt.envMap||Kt),he=Bt.vertexColors===!0&&!!Ft.attributes.color&&Ft.attributes.color.itemSize===4,Ee=!!Ft.attributes.tangent&&(!!Bt.normalMap||Bt.anisotropy>0),pe=!!Ft.morphAttributes.position,Be=!!Ft.morphAttributes.normal,Ge=!!Ft.morphAttributes.color;let xi=Ro;Bt.toneMapped&&(A===null||A.isXRRenderTarget===!0)&&(xi=g.toneMapping);const oi=Ft.morphAttributes.position||Ft.morphAttributes.normal||Ft.morphAttributes.color,qe=oi!==void 0?oi.length:0,Se=Nt.get(Bt),vi=a.state.lights;if(Y===!0&&(q===!0||pt!==O)){const je=pt===O&&Bt.id===b;ee.setState(Bt,pt,je)}let He=!1;Bt.version===Se.__version?(Se.needsLights&&Se.lightsStateVersion!==vi.state.version||Se.outputColorSpace!==ie||At.isBatchedMesh&&Se.batching===!1||!At.isBatchedMesh&&Se.batching===!0||At.isBatchedMesh&&Se.batchingColor===!0&&At.colorTexture===null||At.isBatchedMesh&&Se.batchingColor===!1&&At.colorTexture!==null||At.isInstancedMesh&&Se.instancing===!1||!At.isInstancedMesh&&Se.instancing===!0||At.isSkinnedMesh&&Se.skinning===!1||!At.isSkinnedMesh&&Se.skinning===!0||At.isInstancedMesh&&Se.instancingColor===!0&&At.instanceColor===null||At.isInstancedMesh&&Se.instancingColor===!1&&At.instanceColor!==null||At.isInstancedMesh&&Se.instancingMorph===!0&&At.morphTexture===null||At.isInstancedMesh&&Se.instancingMorph===!1&&At.morphTexture!==null||Se.envMap!==ae||Bt.fog===!0&&Se.fog!==Qt||Se.numClippingPlanes!==void 0&&(Se.numClippingPlanes!==ee.numPlanes||Se.numIntersection!==ee.numIntersection)||Se.vertexAlphas!==he||Se.vertexTangents!==Ee||Se.morphTargets!==pe||Se.morphNormals!==Be||Se.morphColors!==Ge||Se.toneMapping!==xi||Se.morphTargetsCount!==qe)&&(He=!0):(He=!0,Se.__version=Bt.version);let Fs=Se.currentProgram;He===!0&&(Fs=ta(Bt,Pt,At));let ea=!1,Ds=!1,Va=!1;const ui=Fs.getUniforms(),Zs=Se.uniforms;if(St.useProgram(Fs.program)&&(ea=!0,Ds=!0,Va=!0),Bt.id!==b&&(b=Bt.id,Ds=!0),ea||O!==pt){St.buffers.depth.getReversed()?($.copy(pt.projectionMatrix),iit($),sit($),ui.setValue(ut,"projectionMatrix",$)):ui.setValue(ut,"projectionMatrix",pt.projectionMatrix),ui.setValue(ut,"viewMatrix",pt.matrixWorldInverse);const Ts=ui.map.cameraPosition;Ts!==void 0&&Ts.setValue(ut,rt.setFromMatrixPosition(pt.matrixWorld)),bt.logarithmicDepthBuffer&&ui.setValue(ut,"logDepthBufFC",2/(Math.log(pt.far+1)/Math.LN2)),(Bt.isMeshPhongMaterial||Bt.isMeshToonMaterial||Bt.isMeshLambertMaterial||Bt.isMeshBasicMaterial||Bt.isMeshStandardMaterial||Bt.isShaderMaterial)&&ui.setValue(ut,"isOrthographic",pt.isOrthographicCamera===!0),O!==pt&&(O=pt,Ds=!0,Va=!0)}if(At.isSkinnedMesh){ui.setOptional(ut,At,"bindMatrix"),ui.setOptional(ut,At,"bindMatrixInverse");const je=At.skeleton;je&&(je.boneTexture===null&&je.computeBoneTexture(),ui.setValue(ut,"boneTexture",je.boneTexture,zt))}At.isBatchedMesh&&(ui.setOptional(ut,At,"batchingTexture"),ui.setValue(ut,"batchingTexture",At._matricesTexture,zt),ui.setOptional(ut,At,"batchingIdTexture"),ui.setValue(ut,"batchingIdTexture",At._indirectTexture,zt),ui.setOptional(ut,At,"batchingColorTexture"),At._colorsTexture!==null&&ui.setValue(ut,"batchingColorTexture",At._colorsTexture,zt));const Ni=Ft.morphAttributes;if((Ni.position!==void 0||Ni.normal!==void 0||Ni.color!==void 0)&&Vt.update(At,Ft,Fs),(Ds||Se.receiveShadow!==At.receiveShadow)&&(Se.receiveShadow=At.receiveShadow,ui.setValue(ut,"receiveShadow",At.receiveShadow)),Bt.isMeshGouraudMaterial&&Bt.envMap!==null&&(Zs.envMap.value=ae,Zs.flipEnvMap.value=ae.isCubeTexture&&ae.isRenderTargetTexture===!1?-1:1),Bt.isMeshStandardMaterial&&Bt.envMap===null&&Pt.environment!==null&&(Zs.envMapIntensity.value=Pt.environmentIntensity),Ds&&(ui.setValue(ut,"toneMappingExposure",g.toneMappingExposure),Se.needsLights&&Wo(Zs,Va),Qt&&Bt.fog===!0&&Rt.refreshFogUniforms(Zs,Qt),Rt.refreshMaterialUniforms(Zs,Bt,X,W,a.state.transmissionRenderTarget[pt.id]),Am.upload(ut,dc(Se),Zs,zt)),Bt.isShaderMaterial&&Bt.uniformsNeedUpdate===!0&&(Am.upload(ut,dc(Se),Zs,zt),Bt.uniformsNeedUpdate=!1),Bt.isSpriteMaterial&&ui.setValue(ut,"center",At.center),ui.setValue(ut,"modelViewMatrix",At.modelViewMatrix),ui.setValue(ut,"normalMatrix",At.normalMatrix),ui.setValue(ut,"modelMatrix",At.matrixWorld),Bt.isShaderMaterial||Bt.isRawShaderMaterial){const je=Bt.uniformsGroups;for(let Ts=0,Ce=je.length;Ts<Ce;Ts++){const Mr=je[Ts];Ct.update(Mr,Fs),Ct.bind(Mr,Fs)}}return Fs}function Wo(pt,Pt){pt.ambientLightColor.needsUpdate=Pt,pt.lightProbe.needsUpdate=Pt,pt.directionalLights.needsUpdate=Pt,pt.directionalLightShadows.needsUpdate=Pt,pt.pointLights.needsUpdate=Pt,pt.pointLightShadows.needsUpdate=Pt,pt.spotLights.needsUpdate=Pt,pt.spotLightShadows.needsUpdate=Pt,pt.rectAreaLights.needsUpdate=Pt,pt.hemisphereLights.needsUpdate=Pt}function Sg(pt){return pt.isMeshLambertMaterial||pt.isMeshToonMaterial||pt.isMeshPhongMaterial||pt.isMeshStandardMaterial||pt.isShadowMaterial||pt.isShaderMaterial&&pt.lights===!0}this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return A},this.setRenderTargetTextures=function(pt,Pt,Ft){const Bt=Nt.get(pt);Bt.__autoAllocateDepthBuffer=pt.resolveDepthBuffer===!1,Bt.__autoAllocateDepthBuffer===!1&&(Bt.__useRenderToTexture=!1),Nt.get(pt.texture).__webglTexture=Pt,Nt.get(pt.depthTexture).__webglTexture=Bt.__autoAllocateDepthBuffer?void 0:Ft,Bt.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(pt,Pt){const Ft=Nt.get(pt);Ft.__webglFramebuffer=Pt,Ft.__useDefaultFramebuffer=Pt===void 0};const Tg=ut.createFramebuffer();this.setRenderTarget=function(pt,Pt=0,Ft=0){A=pt,T=Pt,P=Ft;let Bt=!0,At=null,Qt=!1,Kt=!1;if(pt){const ae=Nt.get(pt);if(ae.__useDefaultFramebuffer!==void 0)St.bindFramebuffer(ut.FRAMEBUFFER,null),Bt=!1;else if(ae.__webglFramebuffer===void 0)zt.setupRenderTarget(pt);else if(ae.__hasExternalTextures)zt.rebindTextures(pt,Nt.get(pt.texture).__webglTexture,Nt.get(pt.depthTexture).__webglTexture);else if(pt.depthBuffer){const pe=pt.depthTexture;if(ae.__boundDepthTexture!==pe){if(pe!==null&&Nt.has(pe)&&(pt.width!==pe.image.width||pt.height!==pe.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");zt.setupDepthRenderbuffer(pt)}}const he=pt.texture;(he.isData3DTexture||he.isDataArrayTexture||he.isCompressedArrayTexture)&&(Kt=!0);const Ee=Nt.get(pt).__webglFramebuffer;pt.isWebGLCubeRenderTarget?(Array.isArray(Ee[Pt])?At=Ee[Pt][Ft]:At=Ee[Pt],Qt=!0):pt.samples>0&&zt.useMultisampledRTT(pt)===!1?At=Nt.get(pt).__webglMultisampledFramebuffer:Array.isArray(Ee)?At=Ee[Ft]:At=Ee,D.copy(pt.viewport),B.copy(pt.scissor),G=pt.scissorTest}else D.copy(j).multiplyScalar(X).floor(),B.copy(it).multiplyScalar(X).floor(),G=K;if(Ft!==0&&(At=Tg),St.bindFramebuffer(ut.FRAMEBUFFER,At)&&Bt&&St.drawBuffers(pt,At),St.viewport(D),St.scissor(B),St.setScissorTest(G),Qt){const ae=Nt.get(pt.texture);ut.framebufferTexture2D(ut.FRAMEBUFFER,ut.COLOR_ATTACHMENT0,ut.TEXTURE_CUBE_MAP_POSITIVE_X+Pt,ae.__webglTexture,Ft)}else if(Kt){const ae=Nt.get(pt.texture),he=Pt;ut.framebufferTextureLayer(ut.FRAMEBUFFER,ut.COLOR_ATTACHMENT0,ae.__webglTexture,Ft,he)}else if(pt!==null&&Ft!==0){const ae=Nt.get(pt.texture);ut.framebufferTexture2D(ut.FRAMEBUFFER,ut.COLOR_ATTACHMENT0,ut.TEXTURE_2D,ae.__webglTexture,Ft)}b=-1},this.readRenderTargetPixels=function(pt,Pt,Ft,Bt,At,Qt,Kt,ie=0){if(!(pt&&pt.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ae=Nt.get(pt).__webglFramebuffer;if(pt.isWebGLCubeRenderTarget&&Kt!==void 0&&(ae=ae[Kt]),ae){St.bindFramebuffer(ut.FRAMEBUFFER,ae);try{const he=pt.textures[ie],Ee=he.format,pe=he.type;if(!bt.textureFormatReadable(Ee)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!bt.textureTypeReadable(pe)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Pt>=0&&Pt<=pt.width-Bt&&Ft>=0&&Ft<=pt.height-At&&(pt.textures.length>1&&ut.readBuffer(ut.COLOR_ATTACHMENT0+ie),ut.readPixels(Pt,Ft,Bt,At,te.convert(Ee),te.convert(pe),Qt))}finally{const he=A!==null?Nt.get(A).__webglFramebuffer:null;St.bindFramebuffer(ut.FRAMEBUFFER,he)}}},this.readRenderTargetPixelsAsync=async function(pt,Pt,Ft,Bt,At,Qt,Kt,ie=0){if(!(pt&&pt.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ae=Nt.get(pt).__webglFramebuffer;if(pt.isWebGLCubeRenderTarget&&Kt!==void 0&&(ae=ae[Kt]),ae)if(Pt>=0&&Pt<=pt.width-Bt&&Ft>=0&&Ft<=pt.height-At){St.bindFramebuffer(ut.FRAMEBUFFER,ae);const he=pt.textures[ie],Ee=he.format,pe=he.type;if(!bt.textureFormatReadable(Ee))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!bt.textureTypeReadable(pe))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Be=ut.createBuffer();ut.bindBuffer(ut.PIXEL_PACK_BUFFER,Be),ut.bufferData(ut.PIXEL_PACK_BUFFER,Qt.byteLength,ut.STREAM_READ),pt.textures.length>1&&ut.readBuffer(ut.COLOR_ATTACHMENT0+ie),ut.readPixels(Pt,Ft,Bt,At,te.convert(Ee),te.convert(pe),0);const Ge=A!==null?Nt.get(A).__webglFramebuffer:null;St.bindFramebuffer(ut.FRAMEBUFFER,Ge);const xi=ut.fenceSync(ut.SYNC_GPU_COMMANDS_COMPLETE,0);return ut.flush(),await eit(ut,xi,4),ut.bindBuffer(ut.PIXEL_PACK_BUFFER,Be),ut.getBufferSubData(ut.PIXEL_PACK_BUFFER,0,Qt),ut.deleteBuffer(Be),ut.deleteSync(xi),Qt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(pt,Pt=null,Ft=0){const Bt=Math.pow(2,-Ft),At=Math.floor(pt.image.width*Bt),Qt=Math.floor(pt.image.height*Bt),Kt=Pt!==null?Pt.x:0,ie=Pt!==null?Pt.y:0;zt.setTexture2D(pt,0),ut.copyTexSubImage2D(ut.TEXTURE_2D,Ft,0,0,Kt,ie,At,Qt),St.unbindTexture()};const Cg=ut.createFramebuffer(),Mg=ut.createFramebuffer();this.copyTextureToTexture=function(pt,Pt,Ft=null,Bt=null,At=0,Qt=null){Qt===null&&(At!==0?(mu("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Qt=At,At=0):Qt=0);let Kt,ie,ae,he,Ee,pe,Be,Ge,xi;const oi=pt.isCompressedTexture?pt.mipmaps[Qt]:pt.image;if(Ft!==null)Kt=Ft.max.x-Ft.min.x,ie=Ft.max.y-Ft.min.y,ae=Ft.isBox3?Ft.max.z-Ft.min.z:1,he=Ft.min.x,Ee=Ft.min.y,pe=Ft.isBox3?Ft.min.z:0;else{const Ni=Math.pow(2,-At);Kt=Math.floor(oi.width*Ni),ie=Math.floor(oi.height*Ni),pt.isDataArrayTexture?ae=oi.depth:pt.isData3DTexture?ae=Math.floor(oi.depth*Ni):ae=1,he=0,Ee=0,pe=0}Bt!==null?(Be=Bt.x,Ge=Bt.y,xi=Bt.z):(Be=0,Ge=0,xi=0);const qe=te.convert(Pt.format),Se=te.convert(Pt.type);let vi;Pt.isData3DTexture?(zt.setTexture3D(Pt,0),vi=ut.TEXTURE_3D):Pt.isDataArrayTexture||Pt.isCompressedArrayTexture?(zt.setTexture2DArray(Pt,0),vi=ut.TEXTURE_2D_ARRAY):(zt.setTexture2D(Pt,0),vi=ut.TEXTURE_2D),ut.pixelStorei(ut.UNPACK_FLIP_Y_WEBGL,Pt.flipY),ut.pixelStorei(ut.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Pt.premultiplyAlpha),ut.pixelStorei(ut.UNPACK_ALIGNMENT,Pt.unpackAlignment);const He=ut.getParameter(ut.UNPACK_ROW_LENGTH),Fs=ut.getParameter(ut.UNPACK_IMAGE_HEIGHT),ea=ut.getParameter(ut.UNPACK_SKIP_PIXELS),Ds=ut.getParameter(ut.UNPACK_SKIP_ROWS),Va=ut.getParameter(ut.UNPACK_SKIP_IMAGES);ut.pixelStorei(ut.UNPACK_ROW_LENGTH,oi.width),ut.pixelStorei(ut.UNPACK_IMAGE_HEIGHT,oi.height),ut.pixelStorei(ut.UNPACK_SKIP_PIXELS,he),ut.pixelStorei(ut.UNPACK_SKIP_ROWS,Ee),ut.pixelStorei(ut.UNPACK_SKIP_IMAGES,pe);const ui=pt.isDataArrayTexture||pt.isData3DTexture,Zs=Pt.isDataArrayTexture||Pt.isData3DTexture;if(pt.isDepthTexture){const Ni=Nt.get(pt),je=Nt.get(Pt),Ts=Nt.get(Ni.__renderTarget),Ce=Nt.get(je.__renderTarget);St.bindFramebuffer(ut.READ_FRAMEBUFFER,Ts.__webglFramebuffer),St.bindFramebuffer(ut.DRAW_FRAMEBUFFER,Ce.__webglFramebuffer);for(let Mr=0;Mr<ae;Mr++)ui&&(ut.framebufferTextureLayer(ut.READ_FRAMEBUFFER,ut.COLOR_ATTACHMENT0,Nt.get(pt).__webglTexture,At,pe+Mr),ut.framebufferTextureLayer(ut.DRAW_FRAMEBUFFER,ut.COLOR_ATTACHMENT0,Nt.get(Pt).__webglTexture,Qt,xi+Mr)),ut.blitFramebuffer(he,Ee,Kt,ie,Be,Ge,Kt,ie,ut.DEPTH_BUFFER_BIT,ut.NEAREST);St.bindFramebuffer(ut.READ_FRAMEBUFFER,null),St.bindFramebuffer(ut.DRAW_FRAMEBUFFER,null)}else if(At!==0||pt.isRenderTargetTexture||Nt.has(pt)){const Ni=Nt.get(pt),je=Nt.get(Pt);St.bindFramebuffer(ut.READ_FRAMEBUFFER,Cg),St.bindFramebuffer(ut.DRAW_FRAMEBUFFER,Mg);for(let Ts=0;Ts<ae;Ts++)ui?ut.framebufferTextureLayer(ut.READ_FRAMEBUFFER,ut.COLOR_ATTACHMENT0,Ni.__webglTexture,At,pe+Ts):ut.framebufferTexture2D(ut.READ_FRAMEBUFFER,ut.COLOR_ATTACHMENT0,ut.TEXTURE_2D,Ni.__webglTexture,At),Zs?ut.framebufferTextureLayer(ut.DRAW_FRAMEBUFFER,ut.COLOR_ATTACHMENT0,je.__webglTexture,Qt,xi+Ts):ut.framebufferTexture2D(ut.DRAW_FRAMEBUFFER,ut.COLOR_ATTACHMENT0,ut.TEXTURE_2D,je.__webglTexture,Qt),At!==0?ut.blitFramebuffer(he,Ee,Kt,ie,Be,Ge,Kt,ie,ut.COLOR_BUFFER_BIT,ut.NEAREST):Zs?ut.copyTexSubImage3D(vi,Qt,Be,Ge,xi+Ts,he,Ee,Kt,ie):ut.copyTexSubImage2D(vi,Qt,Be,Ge,he,Ee,Kt,ie);St.bindFramebuffer(ut.READ_FRAMEBUFFER,null),St.bindFramebuffer(ut.DRAW_FRAMEBUFFER,null)}else Zs?pt.isDataTexture||pt.isData3DTexture?ut.texSubImage3D(vi,Qt,Be,Ge,xi,Kt,ie,ae,qe,Se,oi.data):Pt.isCompressedArrayTexture?ut.compressedTexSubImage3D(vi,Qt,Be,Ge,xi,Kt,ie,ae,qe,oi.data):ut.texSubImage3D(vi,Qt,Be,Ge,xi,Kt,ie,ae,qe,Se,oi):pt.isDataTexture?ut.texSubImage2D(ut.TEXTURE_2D,Qt,Be,Ge,Kt,ie,qe,Se,oi.data):pt.isCompressedTexture?ut.compressedTexSubImage2D(ut.TEXTURE_2D,Qt,Be,Ge,oi.width,oi.height,qe,oi.data):ut.texSubImage2D(ut.TEXTURE_2D,Qt,Be,Ge,Kt,ie,qe,Se,oi);ut.pixelStorei(ut.UNPACK_ROW_LENGTH,He),ut.pixelStorei(ut.UNPACK_IMAGE_HEIGHT,Fs),ut.pixelStorei(ut.UNPACK_SKIP_PIXELS,ea),ut.pixelStorei(ut.UNPACK_SKIP_ROWS,Ds),ut.pixelStorei(ut.UNPACK_SKIP_IMAGES,Va),Qt===0&&Pt.generateMipmaps&&ut.generateMipmap(vi),St.unbindTexture()},this.copyTextureToTexture3D=function(pt,Pt,Ft=null,Bt=null,At=0){return mu('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(pt,Pt,Ft,Bt,At)},this.initRenderTarget=function(pt){Nt.get(pt).__webglFramebuffer===void 0&&zt.setupRenderTarget(pt)},this.initTexture=function(pt){pt.isCubeTexture?zt.setTextureCube(pt,0):pt.isData3DTexture?zt.setTexture3D(pt,0):pt.isDataArrayTexture||pt.isCompressedArrayTexture?zt.setTexture2DArray(pt,0):zt.setTexture2D(pt,0),St.unbindTexture()},this.resetState=function(){T=0,P=0,A=null,St.reset(),xe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Oa}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n;const c=this.getContext();c.drawingBufferColorSpace=We._getDrawingBufferColorSpace(n),c.unpackColorSpace=We._getUnpackColorSpace()}}const Aot=/^[og]\s*(.+)?/,Rot=/^mtllib /,Lot=/^usemtl /,Oot=/^usemap /,LL=/\s+/,OL=new wt,KS=new wt,FL=new wt,DL=new wt,kn=new wt,cm=new Ae;function Fot(){const L={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(n,c){if(this.object&&this.object.fromDeclaration===!1){this.object.name=n,this.object.fromDeclaration=c!==!1;return}const M=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:n||"",fromDeclaration:c!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(R,I){const m=this._finalize(!1);m&&(m.inherited||m.groupCount<=0)&&this.materials.splice(m.index,1);const E={index:this.materials.length,name:R||"",mtllib:Array.isArray(I)&&I.length>0?I[I.length-1]:"",smooth:m!==void 0?m.smooth:this.smooth,groupStart:m!==void 0?m.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(i){const d={index:typeof i=="number"?i:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return d.clone=this.clone.bind(d),d}};return this.materials.push(E),E},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(R){const I=this.currentMaterial();if(I&&I.groupEnd===-1&&(I.groupEnd=this.geometry.vertices.length/3,I.groupCount=I.groupEnd-I.groupStart,I.inherited=!1),R&&this.materials.length>1)for(let m=this.materials.length-1;m>=0;m--)this.materials[m].groupCount<=0&&this.materials.splice(m,1);return R&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),I}},M&&M.name&&typeof M.clone=="function"){const R=M.clone(0);R.inherited=!0,this.object.materials.push(R)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(n,c){const M=parseInt(n,10);return(M>=0?M-1:M+c/3)*3},parseNormalIndex:function(n,c){const M=parseInt(n,10);return(M>=0?M-1:M+c/3)*3},parseUVIndex:function(n,c){const M=parseInt(n,10);return(M>=0?M-1:M+c/2)*2},addVertex:function(n,c,M){const R=this.vertices,I=this.object.geometry.vertices;I.push(R[n+0],R[n+1],R[n+2]),I.push(R[c+0],R[c+1],R[c+2]),I.push(R[M+0],R[M+1],R[M+2])},addVertexPoint:function(n){const c=this.vertices;this.object.geometry.vertices.push(c[n+0],c[n+1],c[n+2])},addVertexLine:function(n){const c=this.vertices;this.object.geometry.vertices.push(c[n+0],c[n+1],c[n+2])},addNormal:function(n,c,M){const R=this.normals,I=this.object.geometry.normals;I.push(R[n+0],R[n+1],R[n+2]),I.push(R[c+0],R[c+1],R[c+2]),I.push(R[M+0],R[M+1],R[M+2])},addFaceNormal:function(n,c,M){const R=this.vertices,I=this.object.geometry.normals;OL.fromArray(R,n),KS.fromArray(R,c),FL.fromArray(R,M),kn.subVectors(FL,KS),DL.subVectors(OL,KS),kn.cross(DL),kn.normalize(),I.push(kn.x,kn.y,kn.z),I.push(kn.x,kn.y,kn.z),I.push(kn.x,kn.y,kn.z)},addColor:function(n,c,M){const R=this.colors,I=this.object.geometry.colors;R[n]!==void 0&&I.push(R[n+0],R[n+1],R[n+2]),R[c]!==void 0&&I.push(R[c+0],R[c+1],R[c+2]),R[M]!==void 0&&I.push(R[M+0],R[M+1],R[M+2])},addUV:function(n,c,M){const R=this.uvs,I=this.object.geometry.uvs;I.push(R[n+0],R[n+1]),I.push(R[c+0],R[c+1]),I.push(R[M+0],R[M+1])},addDefaultUV:function(){const n=this.object.geometry.uvs;n.push(0,0),n.push(0,0),n.push(0,0)},addUVLine:function(n){const c=this.uvs;this.object.geometry.uvs.push(c[n+0],c[n+1])},addFace:function(n,c,M,R,I,m,E,i,d){const S=this.vertices.length;let u=this.parseVertexIndex(n,S),l=this.parseVertexIndex(c,S),h=this.parseVertexIndex(M,S);if(this.addVertex(u,l,h),this.addColor(u,l,h),E!==void 0&&E!==""){const r=this.normals.length;u=this.parseNormalIndex(E,r),l=this.parseNormalIndex(i,r),h=this.parseNormalIndex(d,r),this.addNormal(u,l,h)}else this.addFaceNormal(u,l,h);if(R!==void 0&&R!==""){const r=this.uvs.length;u=this.parseUVIndex(R,r),l=this.parseUVIndex(I,r),h=this.parseUVIndex(m,r),this.addUV(u,l,h),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(n){this.object.geometry.type="Points";const c=this.vertices.length;for(let M=0,R=n.length;M<R;M++){const I=this.parseVertexIndex(n[M],c);this.addVertexPoint(I),this.addColor(I)}},addLineGeometry:function(n,c){this.object.geometry.type="Line";const M=this.vertices.length,R=this.uvs.length;for(let I=0,m=n.length;I<m;I++)this.addVertexLine(this.parseVertexIndex(n[I],M));for(let I=0,m=c.length;I<m;I++)this.addUVLine(this.parseUVIndex(c[I],R))}};return L.startObject("",!1),L}class IL extends Nu{constructor(n){super(n),this.materials=null}load(n,c,M,R){const I=this,m=new ZO(this.manager);m.setPath(this.path),m.setRequestHeader(this.requestHeader),m.setWithCredentials(this.withCredentials),m.load(n,function(E){try{c(I.parse(E))}catch(i){R?R(i):console.error(i),I.manager.itemError(n)}},M,R)}setMaterials(n){return this.materials=n,this}parse(n){const c=new Fot;n.indexOf(`\r
`)!==-1&&(n=n.replace(/\r\n/g,`
`)),n.indexOf(`\\
`)!==-1&&(n=n.replace(/\\\n/g,""));const M=n.split(`
`);let R=[];for(let E=0,i=M.length;E<i;E++){const d=M[E].trimStart();if(d.length===0)continue;const S=d.charAt(0);if(S!=="#")if(S==="v"){const u=d.split(LL);switch(u[0]){case"v":c.vertices.push(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3])),u.length>=7?(cm.setRGB(parseFloat(u[4]),parseFloat(u[5]),parseFloat(u[6]),xs),c.colors.push(cm.r,cm.g,cm.b)):c.colors.push(void 0,void 0,void 0);break;case"vn":c.normals.push(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3]));break;case"vt":c.uvs.push(parseFloat(u[1]),parseFloat(u[2]));break}}else if(S==="f"){const l=d.slice(1).trim().split(LL),h=[];for(let o=0,p=l.length;o<p;o++){const a=l[o];if(a.length>0){const v=a.split("/");h.push(v)}}const r=h[0];for(let o=1,p=h.length-1;o<p;o++){const a=h[o],v=h[o+1];c.addFace(r[0],a[0],v[0],r[1],a[1],v[1],r[2],a[2],v[2])}}else if(S==="l"){const u=d.substring(1).trim().split(" ");let l=[];const h=[];if(d.indexOf("/")===-1)l=u;else for(let r=0,o=u.length;r<o;r++){const p=u[r].split("/");p[0]!==""&&l.push(p[0]),p[1]!==""&&h.push(p[1])}c.addLineGeometry(l,h)}else if(S==="p"){const l=d.slice(1).trim().split(" ");c.addPointGeometry(l)}else if((R=Aot.exec(d))!==null){const u=(" "+R[0].slice(1).trim()).slice(1);c.startObject(u)}else if(Lot.test(d))c.object.startMaterial(d.substring(7).trim(),c.materialLibraries);else if(Rot.test(d))c.materialLibraries.push(d.substring(7).trim());else if(Oot.test(d))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(S==="s"){if(R=d.split(" "),R.length>1){const l=R[1].trim().toLowerCase();c.object.smooth=l!=="0"&&l!=="off"}else c.object.smooth=!0;const u=c.object.currentMaterial();u&&(u.smooth=c.object.smooth)}else{if(d==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+d+'"')}}c.finalize();const I=new Gh;if(I.materialLibraries=[].concat(c.materialLibraries),!(c.objects.length===1&&c.objects[0].geometry.vertices.length===0)===!0)for(let E=0,i=c.objects.length;E<i;E++){const d=c.objects[E],S=d.geometry,u=d.materials,l=S.type==="Line",h=S.type==="Points";let r=!1;if(S.vertices.length===0)continue;const o=new $n;o.setAttribute("position",new hs(S.vertices,3)),S.normals.length>0&&o.setAttribute("normal",new hs(S.normals,3)),S.colors.length>0&&(r=!0,o.setAttribute("color",new hs(S.colors,3))),S.hasUVIndices===!0&&o.setAttribute("uv",new hs(S.uvs,2));const p=[];for(let v=0,x=u.length;v<x;v++){const g=u[v],y=g.name+"_"+g.smooth+"_"+r;let T=c.materials[y];if(this.materials!==null){if(T=this.materials.create(g.name),l&&T&&!(T instanceof bm)){const P=new bm;_r.prototype.copy.call(P,T),P.color.copy(T.color),T=P}else if(h&&T&&!(T instanceof wf)){const P=new wf({size:10,sizeAttenuation:!1});_r.prototype.copy.call(P,T),P.color.copy(T.color),P.map=T.map,T=P}}T===void 0&&(l?T=new bm:h?T=new wf({size:1,sizeAttenuation:!1}):T=new wo,T.name=g.name,T.flatShading=!g.smooth,T.vertexColors=r,c.materials[y]=T),p.push(T)}let a;if(p.length>1){for(let v=0,x=u.length;v<x;v++){const g=u[v];o.addGroup(g.groupStart,g.groupCount,v)}l?a=new QR(o,p):h?a=new VS(o,p):a=new fi(o,p)}else l?a=new QR(o,p[0]):h?a=new VS(o,p[0]):a=new fi(o,p[0]);a.name=d.name,I.add(a)}else if(c.vertices.length>0){const E=new wf({size:1,sizeAttenuation:!1}),i=new $n;i.setAttribute("position",new hs(c.vertices,3)),c.colors.length>0&&c.colors[0]!==void 0&&(i.setAttribute("color",new hs(c.colors,3)),E.vertexColors=!0);const d=new VS(i,E);I.add(d)}return I}}class Dot extends Nu{constructor(n){super(n)}load(n,c,M,R){const I=this,m=this.path===""?Wit.extractUrlBase(n):this.path,E=new ZO(this.manager);E.setPath(this.path),E.setRequestHeader(this.requestHeader),E.setWithCredentials(this.withCredentials),E.load(n,function(i){try{c(I.parse(i,m))}catch(d){R?R(d):console.error(d),I.manager.itemError(n)}},M,R)}setMaterialOptions(n){return this.materialOptions=n,this}parse(n,c){const M=n.split(`
`);let R={};const I=/\s+/,m={};for(let i=0;i<M.length;i++){let d=M[i];if(d=d.trim(),d.length===0||d.charAt(0)==="#")continue;const S=d.indexOf(" ");let u=S>=0?d.substring(0,S):d;u=u.toLowerCase();let l=S>=0?d.substring(S+1):"";if(l=l.trim(),u==="newmtl")R={name:l},m[l]=R;else if(u==="ka"||u==="kd"||u==="ks"||u==="ke"){const h=l.split(I,3);R[u]=[parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2])]}else R[u]=l}const E=new Iot(this.resourcePath||c,this.materialOptions);return E.setCrossOrigin(this.crossOrigin),E.setManager(this.manager),E.setMaterials(m),E}}class Iot{constructor(n="",c={}){this.baseUrl=n,this.options=c,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:Ia,this.wrap=this.options.wrap!==void 0?this.options.wrap:Om}setCrossOrigin(n){return this.crossOrigin=n,this}setManager(n){this.manager=n}setMaterials(n){this.materialsInfo=this.convert(n),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(n){if(!this.options)return n;const c={};for(const M in n){const R=n[M],I={};c[M]=I;for(const m in R){let E=!0,i=R[m];const d=m.toLowerCase();switch(d){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(i=[i[0]/255,i[1]/255,i[2]/255]),this.options&&this.options.ignoreZeroRGBs&&i[0]===0&&i[1]===0&&i[2]===0&&(E=!1);break}E&&(I[d]=i)}}return c}preload(){for(const n in this.materialsInfo)this.create(n)}getIndex(n){return this.nameLookup[n]}getAsArray(){let n=0;for(const c in this.materialsInfo)this.materialsArray[n]=this.create(c),this.nameLookup[c]=n,n++;return this.materialsArray}create(n){return this.materials[n]===void 0&&this.createMaterial_(n),this.materials[n]}createMaterial_(n){const c=this,M=this.materialsInfo[n],R={name:n,side:this.side};function I(E,i){return typeof i!="string"||i===""?"":/^https?:\/\//i.test(i)?i:E+i}function m(E,i){if(R[E])return;const d=c.getTextureParams(i,R),S=c.loadTexture(I(c.baseUrl,d.url));S.repeat.copy(d.scale),S.offset.copy(d.offset),S.wrapS=c.wrap,S.wrapT=c.wrap,(E==="map"||E==="emissiveMap")&&(S.colorSpace=xs),R[E]=S}for(const E in M){const i=M[E];let d;if(i!=="")switch(E.toLowerCase()){case"kd":R.color=We.colorSpaceToWorking(new Ae().fromArray(i),xs);break;case"ks":R.specular=We.colorSpaceToWorking(new Ae().fromArray(i),xs);break;case"ke":R.emissive=We.colorSpaceToWorking(new Ae().fromArray(i),xs);break;case"map_kd":m("map",i);break;case"map_ks":m("specularMap",i);break;case"map_ke":m("emissiveMap",i);break;case"norm":m("normalMap",i);break;case"map_bump":case"bump":m("bumpMap",i);break;case"disp":m("displacementMap",i);break;case"map_d":m("alphaMap",i),R.transparent=!0;break;case"ns":R.shininess=parseFloat(i);break;case"d":d=parseFloat(i),d<1&&(R.opacity=d,R.transparent=!0);break;case"tr":d=parseFloat(i),this.options&&this.options.invertTrProperty&&(d=1-d),d>0&&(R.opacity=1-d,R.transparent=!0);break}}return this.materials[n]=new wo(R),this.materials[n]}getTextureParams(n,c){const M={scale:new Ve(1,1),offset:new Ve(0,0)},R=n.split(/\s+/);let I;return I=R.indexOf("-bm"),I>=0&&(c.bumpScale=parseFloat(R[I+1]),R.splice(I,2)),I=R.indexOf("-mm"),I>=0&&(c.displacementBias=parseFloat(R[I+1]),c.displacementScale=parseFloat(R[I+2]),R.splice(I,3)),I=R.indexOf("-s"),I>=0&&(M.scale.set(parseFloat(R[I+1]),parseFloat(R[I+2])),R.splice(I,4)),I=R.indexOf("-o"),I>=0&&(M.offset.set(parseFloat(R[I+1]),parseFloat(R[I+2])),R.splice(I,4)),M.url=R.join(" ").trim(),M}loadTexture(n,c,M,R,I){const m=this.manager!==void 0?this.manager:_O;let E=m.getHandler(n);E===null&&(E=new Git(m)),E.setCrossOrigin&&E.setCrossOrigin(this.crossOrigin);const i=E.load(n,M,R,I);return c!==void 0&&(i.mapping=c),i}}class Uh{constructor(){this.models=new Map,this.loadPromises=new Map,this.loadingManager=new $O,this.setupLoadingManager()}static getInstance(){return Uh.instance||(Uh.instance=new Uh),Uh.instance}setupLoadingManager(){this.loadingManager.onProgress=(n,c,M)=>{},this.loadingManager.onError=n=>{console.error(`Error loading: ${n}`)}}async loadOBJModel(n,c,M,R){if(this.models.has(n))return this.models.get(n);if(this.loadPromises.has(n))return this.loadPromises.get(n);const I=new Promise((m,E)=>{try{const d=setTimeout(()=>{console.error(`Timeout loading OBJ: ${c}`),E(new Error("OBJ loading timeout"))},45e3);M?new Dot(this.loadingManager).load(M,u=>{u.preload();const l=new IL(this.loadingManager);l.setMaterials(u),l.load(c,h=>{clearTimeout(d),h.traverse(o=>{o instanceof fi&&(this.isWindowMesh(o)?o.visible=!1:o.material&&(Array.isArray(o.material)?o.material.forEach((p,a)=>{this.isWindowMaterial(p)?o.material[a]=new Hr({transparent:!0,opacity:0,side:sn}):p instanceof wo&&(p.needsUpdate=!0)}):this.isWindowMaterial(o.material)?o.material=new Hr({transparent:!0,opacity:0,side:sn}):o.material instanceof wo&&(o.material.needsUpdate=!0)))});const r={object:h,materials:u.materials?Object.values(u.materials):void 0};this.models.set(n,r),m(r)},h=>{R&&R(h.loaded/h.total)},h=>{clearTimeout(d),console.error(`Error loading OBJ: ${h}`),E(h)})},u=>{R&&R(u.loaded/u.total*.5)},u=>{clearTimeout(d),console.error(`Error loading MTL: ${u}`),E(u)}):new IL(this.loadingManager).load(c,u=>{clearTimeout(d),u.traverse(h=>{h instanceof fi&&(this.isWindowMesh(h)?h.visible=!1:h.material?Array.isArray(h.material)?h.material.forEach((r,o)=>{this.isWindowMaterial(r)?h.material[o]=new Hr({transparent:!0,opacity:0,side:sn}):r instanceof wo&&(r.needsUpdate=!0)}):this.isWindowMaterial(h.material)?h.material=new Hr({transparent:!0,opacity:0,side:sn}):h.material instanceof wo&&(h.material.needsUpdate=!0):h.material=new Hr({color:8947848,side:sn}))});const l={object:u};this.models.set(n,l),m(l)},u=>{R&&R(u.loaded/u.total)},u=>{clearTimeout(d),console.error(`Error loading OBJ: ${u}`),E(u)})}catch(i){E(i)}});return this.loadPromises.set(n,I),I}getModel(n){return this.models.get(n)}cloneModel(n){const c=this.models.get(n);if(c)return c.object.clone()}disposeModel(n){const c=this.models.get(n);c&&(c.materials&&c.materials.forEach(M=>{M.dispose&&M.dispose()}),c.object.traverse(M=>{M instanceof fi&&M.geometry&&M.geometry.dispose()}),this.models.delete(n))}disposeAll(){for(const n of this.models.keys())this.disposeModel(n);this.models.clear(),this.loadPromises.clear()}getLoadingProgress(){return this.loadPromises.size===0?1:.5}isModelLoaded(n){return this.models.has(n)}getLoadedModelCount(){return this.models.size}isWindowMesh(n){const c=n.name.toLowerCase();return c.includes("window")||c.includes("wiindows")||c.includes("windshield")}isWindowMaterial(n){if(!n.name)return!1;const c=n.name.toLowerCase();return c.includes("darkglass")||c.includes("windowglass")}}class Bot extends ys.Scene{constructor(){super("PreloadScene"),this.totalAssets=0,this.loadedAssets=0,this.handleResize=()=>{var u,l,h,r,o;const{width:n,height:c}=this.scale.gameSize,{targetWidth:M,targetHeight:R}=Ys(n,c),I=(n-M)/2,m=(c-R)/2,E=400,i=20,d=I+(M-E)/2,S=m+R/2;(u=this.loadingBar)==null||u.clear(),(l=this.loadingBar)==null||l.fillStyle(65280),(h=this.loadingBar)==null||h.fillRect(d,S,E,i),(r=this.loadingText)==null||r.setPosition(d+E/2,S-50),(o=this.progressText)==null||o.setPosition(d+E/2,S+30)},this.threeJSAssetManager=Uh.getInstance()}getAssetPath(n){const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname.includes("localhost"),M=window.location.pathname.includes("making-it-worse-deploy");let R;return c?R=`/assets/${n}`:M?R=`/making-it-worse-deploy/${n}`:R=`/${n}`,R}preload(){const{width:n,height:c}=this.scale.gameSize,{targetWidth:M,targetHeight:R}=Ys(n,c),I=(n-M)/2,m=(c-R)/2,E=400,i=20,d=I+(M-E)/2,S=m+R/2;this.add.graphics().fillStyle(3355443).fillRect(d,S,E,i),this.loadingBar=this.add.graphics(),this.loadingText=this.add.text(d+E/2,S-50,"Loading...",{color:"#ffffff",fontSize:"24px",fontStyle:"bold",backgroundColor:"#000",padding:{x:10,y:5}}).setOrigin(.5),this.progressText=this.add.text(d+E/2,S+30,"0%",{color:"#ffffff",fontSize:"18px",backgroundColor:"#000",padding:{x:8,y:4}}).setOrigin(.5),this.load.on("progress",u=>{this.updateLoadingProgress(u*.5)}),this.load.on("complete",()=>{console.log("PreloadScene: Phaser assets loaded, starting 3D model loading..."),this.start3DModelLoading()}),this.loadAssets()}loadAssets(){this.load.audio("80s-noclick-166",this.getAssetPath("music/80s-noclick-166.m4a")),this.load.audio("stressful-click-166",this.getAssetPath("music/stressful-click-166.m4a")),this.load.audio("regular-click-166",this.getAssetPath("music/regular-click-166.m4a")),this.load.audio("regular-noclick-166",this.getAssetPath("music/regular-noclick-166.m4a")),this.load.audio("stressful-noclick-166",this.getAssetPath("music/stressful-noclick-166.m4a"))}async load3DModels(){try{console.log("PreloadScene: Starting 3D model loading...");const n=3e4,c=new Promise((R,I)=>{this.loadingTimeout=window.setTimeout(()=>{I(new Error("3D model loading timeout"))},n)}),M=this.load3DModelsInternal();await Promise.race([M,c]),this.loadingTimeout&&(clearTimeout(this.loadingTimeout),this.loadingTimeout=void 0),console.log("PreloadScene: 3D models loaded successfully")}catch(n){console.error("Error loading 3D models:",n),this.loadingTimeout&&(clearTimeout(this.loadingTimeout),this.loadingTimeout=void 0),console.log("PreloadScene: Continuing without 3D models")}}async load3DModelsInternal(){console.log("PreloadScene: Using robust 3D model loading strategy...");const n=performance.memory;if(n&&n.usedJSHeapSize>50*1024*1024){console.log("PreloadScene: Low memory detected, skipping 3D models");return}try{console.log("PreloadScene: Loading 3D model without materials to reduce file size...");const c=this.threeJSAssetManager.loadOBJModel("marge",this.getAssetPath("3d/marge-2/honda_odyssey_mk2.obj"),void 0,R=>{this.updateLoadingProgress(.5+R*.5)}),M=new Promise((R,I)=>{setTimeout(()=>{I(new Error("3D model loading timeout"))},45e3)});await Promise.race([c,M]),console.log("PreloadScene: 3D model loaded successfully")}catch(c){console.error("PreloadScene: Error loading 3D models:",c),console.log("PreloadScene: Continuing without 3D models...")}}updateLoadingProgress(n){var h,r,o,p;const{width:c,height:M}=this.scale.gameSize,{targetWidth:R,targetHeight:I}=Ys(c,M),m=(c-R)/2,E=(M-I)/2,i=400,d=20,S=m+(R-i)/2,u=E+I/2;(h=this.loadingBar)==null||h.clear(),(r=this.loadingBar)==null||r.fillStyle(65280),(o=this.loadingBar)==null||o.fillRect(S,u,i*n,d);const l=Math.round(n*100);(p=this.progressText)==null||p.setText(`${l}%`)}completeLoading(){var c,M;(c=this.progressText)==null||c.setText("100%"),(M=this.loadingText)==null||M.setText("Complete!");const n=setTimeout(()=>{console.error("PreloadScene: Game transition timeout, forcing UIScene...");try{this.scene.start("UIScene")}catch(R){console.error("PreloadScene: Timeout fallback failed:",R),setTimeout(()=>{try{this.scene.start("UIScene")}catch(I){console.error("PreloadScene: Final fallback failed:",I),window.location.reload()}},2e3)}},15e3);this.time.delayedCall(1e3,()=>{try{clearTimeout(n);const R=this.game.gameInstance;R?(console.log("PreloadScene: Starting game with Marge screen..."),R.startGame()):(console.log("PreloadScene: Starting UIScene as fallback..."),this.scene.start("UIScene"))}catch(R){console.error("PreloadScene: Error during game transition:",R),clearTimeout(n);try{this.scene.start("UIScene")}catch(I){console.error("PreloadScene: Fallback also failed:",I),setTimeout(()=>{window.location.reload()},3e3)}}})}start3DModelLoading(){var n;(n=this.loadingText)==null||n.setText("Loading 3D Models..."),this.load3DModels().then(()=>{console.log("PreloadScene: All assets loaded, completing..."),this.completeLoading()}).catch(c=>{console.error("PreloadScene: Error loading 3D models:",c),this.completeLoading()})}create(){this.scale.on("resize",this.handleResize,this),window.addEventListener("orientationchange",()=>this.handleResize())}destroy(){this.loadingTimeout&&(clearTimeout(this.loadingTimeout),this.loadingTimeout=void 0),this.scale.off("resize",this.handleResize,this),window.removeEventListener("orientationchange",()=>this.handleResize())}}class Not extends ys.Scene{constructor(){super("MenuScene")}create(){this.add.text(100,200,"Menu Scene (Overlay)",{color:"#ff0",fontSize:"32px"})}}class Got{constructor(n){this.scene=n;const{width:c,height:M}=n.scale.gameSize;this.overlay=n.add.rectangle(0,0,c,M,0,.4).setOrigin(0).setInteractive({useHandCursor:!1}).setDepth(1e4),this.overlay.on("pointerdown",()=>this.destroy());const R=n.rexUI;if(!R){console.warn("AnchoredUIWindow: rexUI plugin is not available in this scene."),this.windowSizer=void 0;return}this.windowSizer=R.add.sizer({x:c/2,y:M/2,width:400,height:250,orientation:1,space:{left:0,right:0,top:0,bottom:0,item:10}}).addBackground(n.add.rectangle(0,0,400,250,16777215,1).setOrigin(.5)).add(n.add.text(0,0,"Settings",{color:"#000",fontSize:"32px",fontStyle:"bold",align:"center"}).setOrigin(.5),1,"center",0,!0).layout(),this.windowSizer.setDepth(10001),this.closeBtn=n.add.text(0,0,"X",{color:"#000",fontSize:"28px",fontStyle:"bold",backgroundColor:"#fff",padding:{left:8,right:8,top:2,bottom:2}}).setOrigin(0,0).setInteractive({useHandCursor:!0}).setDepth(1002).on("pointerdown",()=>this.destroy()),this.closeBtn.x=c/2-200+8,this.closeBtn.y=M/2-125+8}show(){this.overlay.setVisible(!0),this.overlay.setInteractive({useHandCursor:!1}),this.windowSizer&&(this.windowSizer.setVisible(!0),this.windowSizer.setPosition(this.scene.scale.gameSize.width/2,this.scene.scale.gameSize.height/2))}destroy(){this.overlay.destroy(),this.windowSizer&&this.windowSizer.destroy(),this.closeBtn&&this.closeBtn.destroy()}}class Uot{constructor(n,c,M="Interrupt"){this.handleResize=()=>{if(!this.overlay.active||!this.windowSizer.active)return;const{width:i,height:d}=this.scene.scale.gameSize;this.overlay&&this.overlay.setSize&&this.overlay.setSize(i,d),this.windowSizer&&this.windowSizer.setPosition&&this.windowSizer.setPosition(i/2,d/2)},this.scene=n;const{width:R,height:I}=n.scale.gameSize;this.overlay=n.add.rectangle(0,0,R,I,0,.55).setOrigin(0).setInteractive({useHandCursor:!1}).setDepth(1e6),this.windowSizer=n.add.container(R/2,I/2).setDepth(1000001);const m=n.add.rectangle(0,0,400,250,16777215,1).setOrigin(.5);this.windowSizer.add(m);const E=n.add.text(0,-90,M,{color:"#222",fontSize:"28px",fontStyle:"bold",align:"center"}).setOrigin(.5);this.windowSizer.add(E),this.content=c(n),this.windowSizer.add(this.content),n.scale.on("resize",this.handleResize,this),window.addEventListener("orientationchange",()=>this.handleResize()),this.handleResize()}destroy(){var n;this.scene.scale.off("resize",this.handleResize,this),window.removeEventListener("orientationchange",()=>this.handleResize()),this.overlay.destroy(),this.windowSizer.destroy(),(n=this.content)==null||n.destroy()}}class pm{constructor(n,c){this.scene=n,this.options=c;const M=c.width||90,R=c.height||30,I=c.fontSize||"18px";this.container=n.add.container(0,0),this.border=n.add.rectangle(0,0,M+4,R+4,0).setOrigin(.5),this.background=n.add.rectangle(0,0,M,R,16777215).setOrigin(.5),this.text=n.add.text(0,0,c.text,{color:"#000",fontSize:I,align:"center"}).setOrigin(.5),this.container.add([this.border,this.background,this.text]),this.container.setSize(M+4,R+4).setInteractive({useHandCursor:!0}).on("pointerdown",()=>{c.onClick&&c.onClick()}),this.container.on("pointerover",()=>{this.background.setFillStyle(15790320)}).on("pointerout",()=>{this.background.setFillStyle(16777215)})}setPosition(n,c){this.container.setPosition(n,c)}setVisible(n){this.container.setVisible(n)}destroy(){this.container.destroy()}setText(n){this.text.setText(n)}setInteractive(n){n?this.container.setInteractive({useHandCursor:!0}):this.container.disableInteractive()}getContainer(){return this.container}}const vm=()=>window.app;class kot extends ys.Scene{constructor(){super({key:"UIScene",plugins:{scene:[]}})}create(){this.interrupt=new Uot(this,M=>new pm(M,{text:"Start Game",width:220,height:50,fontSize:"32px",onClick:async()=>{var m;(m=this.interrupt)==null||m.destroy(),this.interrupt=void 0;const I=vm();I&&await I.startGame()}}).getContainer(),"Start Game"),this.settingsButton=new pm(this,{text:"Settings",width:90,height:30,fontSize:"18px",onClick:()=>{if(this.children.getByName("settingsWindow"))return;const M=new Got(this);M.windowSizer&&M.windowSizer.setName("settingsWindow"),M.show()}}),this.pauseButton=new pm(this,{text:"Pause",width:90,height:30,fontSize:"18px",onClick:()=>{const M=vm();M&&M.game&&(M.game.state==="Paused"?M.game.resumeGame():M.game.pauseGame())}}),this.muteButton=new pm(this,{text:"Mute",width:90,height:30,fontSize:"18px",onClick:()=>{const M=vm();M&&M.toggleMute&&M.toggleMute()}});const n=()=>{var S,u,l;const{width:M,height:R}=this.scale.gameSize,{targetWidth:I,targetHeight:m}=Ys(M,R),E=(M-I)/2,i=(R-m)/2,d=E+60;(S=this.settingsButton)==null||S.setPosition(d,i+40),(u=this.pauseButton)==null||u.setPosition(d,i+80),(l=this.muteButton)==null||l.setPosition(d,i+120)};n(),this.scale.on("resize",n),window.addEventListener("orientationchange",n);const c=()=>{if(!this.pauseButton)return;const M=vm();if(!(!M||!M.game)){if(M.game.state==="NotStarted"){this.pauseButton.setVisible(!1),this.pauseButton.setInteractive(!1);return}else this.pauseButton.setVisible(!0),this.pauseButton.setInteractive(!0);M.game.state==="Paused"?this.pauseButton.setText("Resume"):this.pauseButton.setText("Pause")}};c(),this.time.addEvent({delay:200,loop:!0,callback:c})}}class Vot{constructor(n){this.cameras=new Map,this.cameraScenes=new Map,this.game=n}addCamera(n,c,M={}){if(this.cameras.has(n))throw new Error(`Camera with name '${n}' already exists.`);const R=c.cameras.add(M.x??0,M.y??0,M.width??c.scale.width,M.height??c.scale.height);return this.cameras.set(n,R),this.cameraScenes.set(n,c),R}removeCamera(n){const c=this.cameras.get(n),M=this.cameraScenes.get(n);c&&M&&(M.cameras.remove(c),this.cameras.delete(n),this.cameraScenes.delete(n))}getCamera(n){return this.cameras.get(n)}switchCameraToScene(n,c){const M=this.cameras.get(n),R=this.cameraScenes.get(n);if(!M)throw new Error(`Camera '${n}' does not exist.`);R&&R.cameras.remove(M),c.cameras.addExisting(M),this.cameraScenes.set(n,c)}setCameraEffect(n,c,M={}){const R=this.cameras.get(n);if(!R)throw new Error(`Camera '${n}' does not exist.`);switch(c){case"fade":R.fade(M.duration??500,M.r??0,M.g??0,M.b??0);break;case"flash":R.flash(M.duration??250,M.r??255,M.g??255,M.b??255);break;case"shake":R.shake(M.duration??250,M.intensity??.05);break;default:throw new Error(`Unknown camera effect: ${c}`)}}listCameras(){return Array.from(this.cameras.keys())}}class zot extends ys.Scene{constructor(){super("RoadScene")}create(){const{width:n,height:c}=this.scale.gameSize,{targetWidth:M,targetHeight:R}=Ys(n,c),I=(n-M)/2,m=(c-R)/2,E=this.add.text(0,0,"RoadScene",{color:"#fff",fontSize:"16px",backgroundColor:"#000"}).setOrigin(.5,1).setPosition(I+M/2,m+R-40);this.scale.on("resize",()=>{const{width:i,height:d}=this.scale.gameSize,{targetWidth:S,targetHeight:u}=Ys(i,d),l=(i-S)/2,h=(d-u)/2;E.setPosition(l+S/2,h+u-40)})}}class kh{constructor(){this.scenes=new Map,this.lights=new Map,this.animationMixers=new Map,this.assetManager=Uh.getInstance(),this.clock=new Hit}static getInstance(){return kh.instance||(kh.instance=new kh),kh.instance}initialize(n){this.scene=new HO,n.backgroundColor!==void 0?this.scene.background=new Ae(n.backgroundColor):this.scene.background=null,this.camera=new zs(75,n.width/n.height,.1,1e3),this.renderer=new eF({antialias:!1,alpha:!0,preserveDrawingBuffer:!1,premultipliedAlpha:!1,powerPreference:"low-power",stencil:!1,depth:!0}),this.renderer.setSize(n.width,n.height),this.renderer.setPixelRatio(.35),n.enableShadows&&(this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=fet),n.enableFog&&(this.scene.fog=new vC(13421772,10,100)),this.setupDefaultLighting(),this.setupOutlineAndDithering()}setupOutlineAndDithering(){if(!this.renderer)return;this.renderTarget=new Ba(this.renderer.domElement.width,this.renderer.domElement.height,{format:Tn,type:Hn,minFilter:Xs,magFilter:Xs}),this.outlineMaterial=new Zr({uniforms:{tDiffuse:{value:null},outlineThreshold:{value:.422},outlineStrength:{value:1.5},outlineWidth:{value:.2},customCameraPosition:{value:new wt},customViewMatrix:{value:new ei},customProjectionMatrix:{value:new ei}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        }
      `,fragmentShader:`
        uniform sampler2D tDiffuse;
        uniform float outlineThreshold;
        uniform float outlineStrength;
        uniform float outlineWidth; // New outline width control
        uniform vec3 customCameraPosition;
        uniform mat4 customViewMatrix;
        uniform mat4 customProjectionMatrix;
        varying vec2 vUv;
        
        // Function to sample texture with offset
        vec4 sampleTexture(vec2 offset) {
          return texture2D(tDiffuse, vUv + offset);
        }
        
        // Function to get grayscale from color
        float getGrayscale(vec4 color) {
          return dot(color.rgb, vec3(0.299, 0.587, 0.114));
        }
        
        void main() {
          vec4 color = texture2D(tDiffuse, vUv);
          
          // Convert to grayscale
          float gray = getGrayscale(color);
          
          // Calculate camera-aware pixel offset for 2D-style outlines
          // Use custom view matrix to get camera orientation and scale offset accordingly
          vec3 cameraForward = normalize(vec3(customViewMatrix[0][2], customViewMatrix[1][2], customViewMatrix[2][2]));
          vec3 cameraRight = normalize(vec3(customViewMatrix[0][0], customViewMatrix[1][0], customViewMatrix[2][0]));
          vec3 cameraUp = normalize(vec3(customViewMatrix[0][1], customViewMatrix[1][1], customViewMatrix[2][1]));
          
          // Calculate screen-space offset that adapts to camera angle for 2D look
          float depthFactor = 1.0; // Uniform outline width regardless of depth
          float baseOffset = 2.0 / 512.0; // Base pixel offset
          
          // Adjust offset based on camera orientation for consistent 2D appearance
          float cameraAlignment = abs(dot(cameraForward, vec3(0.0, 0.0, 1.0))); // How aligned camera is with Z axis
          float offsetScale = mix(1.0, 0.5, cameraAlignment); // Reduce offset when camera is more aligned
          float pixelOffset = baseOffset * offsetScale * depthFactor * outlineWidth; // Apply outline width multiplier
          
          // Sample neighboring pixels with camera-adjusted offset
          vec4 left = sampleTexture(vec2(-pixelOffset, 0.0));
          vec4 right = sampleTexture(vec2(pixelOffset, 0.0));
          vec4 top = sampleTexture(vec2(0.0, pixelOffset));
          vec4 bottom = sampleTexture(vec2(0.0, -pixelOffset));
          
          // Calculate gradient magnitude for outline detection
          float leftGray = getGrayscale(left);
          float rightGray = getGrayscale(right);
          float topGray = getGrayscale(top);
          float bottomGray = getGrayscale(bottom);
          
          // Enhanced Sobel edge detection with diagonal samples
          vec4 topLeft = sampleTexture(vec2(-pixelOffset, pixelOffset));
          vec4 topRight = sampleTexture(vec2(pixelOffset, pixelOffset));
          vec4 bottomLeft = sampleTexture(vec2(-pixelOffset, -pixelOffset));
          vec4 bottomRight = sampleTexture(vec2(pixelOffset, -pixelOffset));
          
          float topLeftGray = getGrayscale(topLeft);
          float topRightGray = getGrayscale(topRight);
          float bottomLeftGray = getGrayscale(bottomLeft);
          float bottomRightGray = getGrayscale(bottomRight);
          
          // Enhanced gradient calculation
          float gradX = (rightGray - leftGray + (topRightGray - topLeftGray + bottomRightGray - bottomLeftGray) * 0.5) * 0.5;
          float gradY = (topGray - bottomGray + (topRightGray - bottomRightGray + topLeftGray - bottomLeftGray) * 0.5) * 0.5;
          float gradientMagnitude = sqrt(gradX * gradX + gradY * gradY);
          
          // Apply outline effect with much more sensitive threshold
          float outline = step(outlineThreshold * 0.1, gradientMagnitude) * outlineStrength;
          
          // Combine original grayscale with BLACK outline (subtract instead of add)
          float combinedGray = gray * (1.0 - outline); // Black outline: multiply by (1 - outline)
          
          gl_FragColor = vec4(vec3(combinedGray), color.a);
        }
      `,transparent:!1}),this.ditherMaterial=new Zr({uniforms:{tDiffuse:{value:null},pixelSize:{value:1}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        }
      `,fragmentShader:`
        uniform sampler2D tDiffuse;
        uniform float pixelSize;
        varying vec2 vUv;
        
        // Simple 4x4 Bayer dithering matrix
        float bayer4x4[16] = float[16](
          0.0,  8.0,  2.0,  10.0,
          12.0, 4.0,  14.0, 6.0,
          3.0,  11.0, 1.0,  9.0,
          15.0, 7.0,  13.0, 5.0
        );
        
        void main() {
          vec4 color = texture2D(tDiffuse, vUv);
          
          // Convert to grayscale
          float gray = dot(color.rgb, vec3(0.299, 0.587, 0.114));
          
          // Get pixel coordinates for dithering with pixel size scaling
          vec2 pixel = gl_FragCoord.xy / pixelSize;
          int x = int(mod(pixel.x, 4.0));
          int y = int(mod(pixel.y, 4.0));
          int index = x + y * 4;
          float dither = bayer4x4[index] / 16.0;
          
          // Apply dithering to create final black/white output
          float dithered = step(dither, gray);
          
          gl_FragColor = vec4(vec3(dithered), color.a);
        }
      `,transparent:!1});const n=new Kf(2,2);this.outlineQuad=new fi(n,this.outlineMaterial),this.ditherQuad=new fi(n,this.ditherMaterial)}setupDefaultLighting(){if(!this.scene)return;const n=new KO(16777215,.3);this.scene.add(n),this.lights.set("ambient",n);const c=new bf(16777215,3.2);c.position.set(20,20,15),c.castShadow=!0,c.shadow.mapSize.width=128,c.shadow.mapSize.height=128,c.shadow.camera.near=.5,c.shadow.camera.far=50,c.shadow.bias=-.001,this.scene.add(c),this.lights.set("directional",c);const M=new bf(16777215,1.2);M.position.set(-20,15,-15),this.scene.add(M),this.lights.set("directional2",M);const R=new bf(16777215,.4);R.position.set(0,-10,0),this.scene.add(R),this.lights.set("fill",R);const I=new Mo(16777215,1.5,50);I.position.set(0,8,0),this.scene.add(I),this.lights.set("point",I);const m=new bf(16777215,2);m.position.set(0,0,-20),this.scene.add(m),this.lights.set("rim",m)}getRenderer(){return this.renderer}getScene(){return this.scene}getCamera(){return this.camera}addModelToScene(n,c,M,R,I){const m=this.assetManager.cloneModel(n);return!m||!this.scene?!1:(M&&m.position.copy(M),R&&m.rotation.copy(R),I&&m.scale.copy(I),this.centerModel(m),m.traverse(E=>{E instanceof fi&&E.material&&(Array.isArray(E.material)?E.material.forEach(i=>{i instanceof wo&&(i.needsUpdate=!0,i.shininess=Math.max(i.shininess||0,10))}):E.material instanceof wo&&(E.material.needsUpdate=!0,E.material.shininess=Math.max(E.material.shininess||0,10)))}),this.scene.add(m),this.scenes.set(c,m),!0)}removeModelFromScene(n){const c=this.scenes.get(n);c&&this.scene&&(this.scene.remove(c),this.scenes.delete(n))}centerModel(n){const M=new _h().setFromObject(n).getCenter(new wt);n.position.sub(M)}setCameraPosition(n){this.camera&&this.camera.position.copy(n)}setCameraTarget(n){this.camera&&this.camera.lookAt(n)}addLight(n,c){this.scene&&(this.scene.add(c),this.lights.set(n,c))}removeLight(n){const c=this.lights.get(n);c&&this.scene&&(this.scene.remove(c),this.lights.delete(n))}isMobileDevice(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768&&window.innerHeight<=1024}render(){if(this.renderer&&this.scene&&this.camera){const n=this.clock.getDelta();if(this.animationMixers.forEach(c=>{c.update(n)}),this.renderer.setClearColor(0,0),this.renderer.setClearAlpha(0),this.renderTarget){this.renderer.setRenderTarget(this.renderTarget),this.renderer.render(this.scene,this.camera);const c=new Ba(this.renderer.domElement.width,this.renderer.domElement.height,{format:Tn,type:Hn,minFilter:Xs,magFilter:Xs});this.renderer.setRenderTarget(c),this.outlineMaterial&&this.outlineQuad&&(this.outlineMaterial.uniforms.tDiffuse.value=this.renderTarget.texture,this.outlineMaterial.uniforms.customCameraPosition.value.copy(this.camera.position),this.outlineMaterial.uniforms.customViewMatrix.value.copy(this.camera.matrixWorldInverse),this.outlineMaterial.uniforms.customProjectionMatrix.value.copy(this.camera.projectionMatrix),this.renderer.render(this.outlineQuad,new Gm(-1,1,1,-1,0,1))),this.renderer.setRenderTarget(null),this.ditherMaterial&&this.ditherQuad&&(this.ditherMaterial.uniforms.tDiffuse.value=c.texture,this.renderer.render(this.ditherQuad,new Gm(-1,1,1,-1,0,1))),c.dispose()}else this.renderer.render(this.scene,this.camera)}}resize(n,c){this.renderer&&this.camera&&(this.renderer.setSize(n,c),this.camera.aspect=n/c,this.camera.updateProjectionMatrix(),this.renderTarget&&this.renderTarget.setSize(n,c))}dispose(){this.renderer&&this.renderer.dispose(),this.scenes.forEach(n=>{n.traverse(c=>{c instanceof fi&&(c.geometry&&c.geometry.dispose(),c.material&&(Array.isArray(c.material)?c.material.forEach(M=>M.dispose()):c.material.dispose()))})}),this.scenes.clear(),this.lights.clear(),this.animationMixers.clear()}getModelInScene(n){return this.scenes.get(n)}getAllModels(){return new Map(this.scenes)}getDitheringMode(){return"pixel"}getDitherMaterial(){return this.ditherMaterial}getOutlineThreshold(){var n,c;return((c=(n=this.outlineMaterial)==null?void 0:n.uniforms.outlineThreshold)==null?void 0:c.value)||.01}setOutlineThreshold(n){this.outlineMaterial&&(this.outlineMaterial.uniforms.outlineThreshold.value=n)}getOutlineStrength(){var n,c;return((c=(n=this.outlineMaterial)==null?void 0:n.uniforms.outlineStrength)==null?void 0:c.value)||1}setOutlineStrength(n){this.outlineMaterial&&(this.outlineMaterial.uniforms.outlineStrength.value=n)}getOutlineWidth(){var n,c;return((c=(n=this.outlineMaterial)==null?void 0:n.uniforms.outlineWidth)==null?void 0:c.value)||1}setOutlineWidth(n){this.outlineMaterial&&(this.outlineMaterial.uniforms.outlineWidth.value=n)}}class JS{constructor(n,c){this.isDragging=!1,this.isPressed=!1,this.initialPointerAngle=0,this.initialSpriteRotation=0,this.scene=n,this.config=c,this.centerX=c.x,this.centerY=c.y,this.radius=c.radius||60,this.snapPositions=c.snapPositions||[],this.rotation=c.startPosition||0,this.allowFreeRotation=c.allowFreeRotation!==!1,this.clampRange=c.clampRange,this.returnToCenter=c.returnToCenter||!1,this.returnToCenterSpeed=c.returnToCenterSpeed||.1,this.create()}create(){this.createVisualElements(),this.setupDragInteraction(),this.setupPointerEvents(),this.setupUpdateLoop()}createVisualElements(){this.sprite=this.scene.add.sprite(this.centerX,this.centerY,"x"),this.sprite.setDisplaySize(this.radius*2,this.radius*2),this.sprite.setDepth(1),this.graphics=this.scene.add.graphics(),this.graphics.setDepth(2),this.graphics.setScrollFactor(0),this.sprite.setScrollFactor(0),this.draw()}setupDragInteraction(){var c,M,R;const n=this.scene.plugins.get("rexDragRotate");n&&(this.dragRotate=n.add(this.scene,{x:this.centerX,y:this.centerY,maxRadius:this.radius,origin:{x:.5,y:.5}}),(c=this.dragRotate)==null||c.on("dragstart",()=>{this.isDragging=!0},this),(M=this.dragRotate)==null||M.on("drag",I=>{this.isPressed&&(this.rotation+=I.deltaRotation,this.applyClamping(),this.draw())},this),(R=this.dragRotate)==null||R.on("dragend",()=>{this.isDragging=!1,this.isPressed=!1,this.handleDragEnd()},this))}setupPointerEvents(){this.sprite&&(this.sprite.setInteractive(),this.sprite.on("pointerdown",n=>{this.isPressed=!0,this.isDragging=!0,this.initialPointerAngle=ys.Math.Angle.Between(this.sprite.x,this.sprite.y,n.worldX,n.worldY),this.initialSpriteRotation=this.rotation}),this.sprite.on("pointerup",()=>{this.isPressed=!1,this.isDragging=!1,this.handleDragEnd()}),this.scene.input.on("pointerup",()=>{this.isPressed&&(this.isPressed=!1,this.isDragging=!1,this.handleDragEnd())}))}setupUpdateLoop(){this.scene.events.on("update",()=>{this.handlePointerTracking(),this.handleReturnToCenter()})}handleDragEnd(){this.snapPositions.length>0&&this.snapToNearestPosition()}applyClamping(){!this.allowFreeRotation&&this.clampRange&&(this.rotation=Math.max(this.clampRange.min,Math.min(this.clampRange.max,this.rotation)))}handleReturnToCenter(){this.returnToCenter&&!this.isDragging&&!this.isPressed&&Math.abs(this.rotation)>.001&&this.returnToCenterLogic()}draw(){if(!this.graphics)return;this.graphics.clear();const n=this.config.visualStyle||{};this.graphics.fillStyle(n.outerColor||3355443,.2),this.graphics.fillCircle(this.centerX,this.centerY,this.radius),this.graphics.fillStyle(n.innerColor||16777215,.2),this.graphics.fillCircle(this.centerX,this.centerY,this.radius-this.radius*.15),this.graphics.fillStyle(n.hubColor||0,.2),this.graphics.fillCircle(this.centerX,this.centerY,this.radius*.15),this.graphics.lineStyle(n.lineWidth||3,n.lineColor||0,.2);const c=this.centerX+Math.cos(this.rotation)*(this.radius-this.radius*.2),M=this.centerY+Math.sin(this.rotation)*(this.radius-this.radius*.2);if(this.graphics.lineBetween(this.centerX,this.centerY,c,M),n.showSnapMarks!==!1&&this.snapPositions.length>0){this.graphics.lineStyle(2,6710886,.2);for(const R of this.snapPositions){const I=this.centerX+Math.cos(R)*(this.radius-5),m=this.centerY+Math.sin(R)*(this.radius-5),E=this.centerX+Math.cos(R)*(this.radius+5),i=this.centerY+Math.sin(R)*(this.radius+5);this.graphics.lineBetween(I,m,E,i)}}}handlePointerTracking(){if(this.isPressed&&this.scene.input.activePointer&&this.sprite){const n=this.scene.input.activePointer,M=ys.Math.Angle.Between(this.sprite.x,this.sprite.y,n.worldX,n.worldY)-this.initialPointerAngle;this.rotation=this.initialSpriteRotation+M,this.applyClamping(),this.draw()}}snapToNearestPosition(){if(this.snapPositions.length===0)return;let n=this.rotation;for(;n<0;)n+=2*Math.PI;for(;n>=2*Math.PI;)n-=2*Math.PI;let c=this.snapPositions[0],M=Math.abs(ys.Math.Angle.ShortestBetween(n,this.snapPositions[0]));for(const R of this.snapPositions){const I=Math.abs(ys.Math.Angle.ShortestBetween(n,R));I<M&&(M=I,c=R)}this.rotation=c,this.draw()}returnToCenterLogic(){const c=ys.Math.Angle.ShortestBetween(this.rotation,0);if(Math.abs(c)<.001){this.rotation=0,this.draw();return}this.rotation=this.rotation+c*this.returnToCenterSpeed,this.draw()}getRotation(){return this.rotation}setRotation(n){this.rotation=n,this.draw()}updatePosition(n,c){this.centerX=n,this.centerY=c,this.sprite&&this.sprite.setPosition(n,c),this.dragRotate&&(this.dragRotate.x=n,this.dragRotate.y=c),this.draw()}destroy(){this.sprite&&this.sprite.destroy(),this.graphics&&this.graphics.destroy(),this.dragRotate&&this.dragRotate.destroy()}}const iF="15.1.22",BL=(L,n,c)=>({endTime:n,insertTime:c,type:"exponentialRampToValue",value:L}),NL=(L,n,c)=>({endTime:n,insertTime:c,type:"linearRampToValue",value:L}),WT=(L,n)=>({startTime:n,type:"setValue",value:L}),sF=(L,n,c)=>({duration:c,startTime:n,type:"setValueCurve",values:L}),nF=(L,n,{startTime:c,target:M,timeConstant:R})=>M+(n-M)*Math.exp((c-L)/R),du=L=>L.type==="exponentialRampToValue",Um=L=>L.type==="linearRampToValue",Eo=L=>du(L)||Um(L),yC=L=>L.type==="setValue",Ra=L=>L.type==="setValueCurve",km=(L,n,c,M)=>{const R=L[n];return R===void 0?M:Eo(R)||yC(R)?R.value:Ra(R)?R.values[R.values.length-1]:nF(c,km(L,n-1,R.startTime,M),R)},GL=(L,n,c,M,R)=>c===void 0?[M.insertTime,R]:Eo(c)?[c.endTime,c.value]:yC(c)?[c.startTime,c.value]:Ra(c)?[c.startTime+c.duration,c.values[c.values.length-1]]:[c.startTime,km(L,n-1,c.startTime,R)],XT=L=>L.type==="cancelAndHold",HT=L=>L.type==="cancelScheduledValues",Co=L=>XT(L)||HT(L)?L.cancelTime:du(L)||Um(L)?L.endTime:L.startTime,UL=(L,n,c,{endTime:M,value:R})=>c===R?R:0<c&&0<R||c<0&&R<0?c*(R/c)**((L-n)/(M-n)):0,kL=(L,n,c,{endTime:M,value:R})=>c+(L-n)/(M-n)*(R-c),Wot=(L,n)=>{const c=Math.floor(n),M=Math.ceil(n);return c===M?L[c]:(1-(n-c))*L[c]+(1-(M-n))*L[M]},Xot=(L,{duration:n,startTime:c,values:M})=>{const R=(L-c)/n*(M.length-1);return Wot(M,R)},mm=L=>L.type==="setTarget";class Hot{constructor(n){this._automationEvents=[],this._currenTime=0,this._defaultValue=n}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(n){const c=Co(n);if(XT(n)||HT(n)){const M=this._automationEvents.findIndex(I=>HT(n)&&Ra(I)?I.startTime+I.duration>=c:Co(I)>=c),R=this._automationEvents[M];if(M!==-1&&(this._automationEvents=this._automationEvents.slice(0,M)),XT(n)){const I=this._automationEvents[this._automationEvents.length-1];if(R!==void 0&&Eo(R)){if(I!==void 0&&mm(I))throw new Error("The internal list is malformed.");const m=I===void 0?R.insertTime:Ra(I)?I.startTime+I.duration:Co(I),E=I===void 0?this._defaultValue:Ra(I)?I.values[I.values.length-1]:I.value,i=du(R)?UL(c,m,E,R):kL(c,m,E,R),d=du(R)?BL(i,c,this._currenTime):NL(i,c,this._currenTime);this._automationEvents.push(d)}if(I!==void 0&&mm(I)&&this._automationEvents.push(WT(this.getValue(c),c)),I!==void 0&&Ra(I)&&I.startTime+I.duration>c){const m=c-I.startTime,E=(I.values.length-1)/I.duration,i=Math.max(2,1+Math.ceil(m*E)),d=m/(i-1)*E,S=I.values.slice(0,i);if(d<1)for(let u=1;u<i;u+=1){const l=d*u%1;S[u]=I.values[u-1]*(1-l)+I.values[u]*l}this._automationEvents[this._automationEvents.length-1]=sF(S,I.startTime,m)}}}else{const M=this._automationEvents.findIndex(m=>Co(m)>c),R=M===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[M-1];if(R!==void 0&&Ra(R)&&Co(R)+R.duration>c)return!1;const I=du(n)?BL(n.value,n.endTime,this._currenTime):Um(n)?NL(n.value,c,this._currenTime):n;if(M===-1)this._automationEvents.push(I);else{if(Ra(n)&&c+n.duration>Co(this._automationEvents[M]))return!1;this._automationEvents.splice(M,0,I)}}return!0}flush(n){const c=this._automationEvents.findIndex(M=>Co(M)>n);if(c>1){const M=this._automationEvents.slice(c-1),R=M[0];mm(R)&&M.unshift(WT(km(this._automationEvents,c-2,R.startTime,this._defaultValue),R.startTime)),this._automationEvents=M}}getValue(n){if(this._automationEvents.length===0)return this._defaultValue;const c=this._automationEvents.findIndex(m=>Co(m)>n),M=this._automationEvents[c],R=(c===-1?this._automationEvents.length:c)-1,I=this._automationEvents[R];if(I!==void 0&&mm(I)&&(M===void 0||!Eo(M)||M.insertTime>n))return nF(n,km(this._automationEvents,R-1,I.startTime,this._defaultValue),I);if(I!==void 0&&yC(I)&&(M===void 0||!Eo(M)))return I.value;if(I!==void 0&&Ra(I)&&(M===void 0||!Eo(M)||I.startTime+I.duration>n))return n<I.startTime+I.duration?Xot(n,I):I.values[I.values.length-1];if(I!==void 0&&Eo(I)&&(M===void 0||!Eo(M)))return I.value;if(M!==void 0&&du(M)){const[m,E]=GL(this._automationEvents,R,I,M,this._defaultValue);return UL(n,m,E,M)}if(M!==void 0&&Um(M)){const[m,E]=GL(this._automationEvents,R,I,M,this._defaultValue);return kL(n,m,E,M)}return this._defaultValue}}const Yot=L=>({cancelTime:L,type:"cancelAndHold"}),$ot=L=>({cancelTime:L,type:"cancelScheduledValues"}),_ot=(L,n)=>({endTime:n,type:"exponentialRampToValue",value:L}),Zot=(L,n)=>({endTime:n,type:"linearRampToValue",value:L}),Kot=(L,n,c)=>({startTime:n,target:L,timeConstant:c,type:"setTarget"}),Jot=()=>new DOMException("","AbortError"),Qot=L=>(n,c,[M,R,I],m)=>{L(n[R],[c,M,I],E=>E[0]===c&&E[1]===M,m)},jot=L=>(n,c,M)=>{const R=[];for(let I=0;I<M.numberOfInputs;I+=1)R.push(new Set);L.set(n,{activeInputs:R,outputs:new Set,passiveInputs:new WeakMap,renderer:c})},qot=L=>(n,c)=>{L.set(n,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:c})},Pu=new WeakSet,rF=new WeakMap,SC=new WeakMap,aF=new WeakMap,TC=new WeakMap,sg=new WeakMap,oF=new WeakMap,YT=new WeakMap,$T=new WeakMap,_T=new WeakMap,hF={construct(){return hF}},tht=L=>{try{const n=new Proxy(L,hF);new n}catch{return!1}return!0},VL=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,zL=(L,n)=>{const c=[];let M=L.replace(/^[\s]+/,""),R=M.match(VL);for(;R!==null;){const I=R[1].slice(1,-1),m=R[0].replace(/([\s]+)?;?$/,"").replace(I,new URL(I,n).toString());c.push(m),M=M.slice(R[0].length).replace(/^[\s]+/,""),R=M.match(VL)}return[c.join(";"),M]},WL=L=>{if(L!==void 0&&!Array.isArray(L))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},XL=L=>{if(!tht(L))throw new TypeError("The given value for processorCtor should be a constructor.");if(L.prototype===null||typeof L.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},eht=(L,n,c,M,R,I,m,E,i,d,S,u,l)=>{let h=0;return(r,o,p={credentials:"omit"})=>{const a=S.get(r);if(a!==void 0&&a.has(o))return Promise.resolve();const v=d.get(r);if(v!==void 0){const y=v.get(o);if(y!==void 0)return y}const x=I(r),g=x.audioWorklet===void 0?R(o).then(([y,T])=>{const[P,A]=zL(y,T),b=`${P};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${A}
})})(window,'_AWGS')`;return c(b)}).then(()=>{const y=l._AWGS.pop();if(y===void 0)throw new SyntaxError;M(x.currentTime,x.sampleRate,()=>y(class{},void 0,(T,P)=>{if(T.trim()==="")throw n();const A=$T.get(x);if(A!==void 0){if(A.has(T))throw n();XL(P),WL(P.parameterDescriptors),A.set(T,P)}else XL(P),WL(P.parameterDescriptors),$T.set(x,new Map([[T,P]]))},x.sampleRate,void 0,void 0))}):Promise.all([R(o),Promise.resolve(L(u,u))]).then(([[y,T],P])=>{const A=h+1;h=A;const[b,O]=zL(y,T),V=`${b};((AudioWorkletProcessor,registerProcessor)=>{${O}
})(${P?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${P?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${P?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${A}',class extends AudioWorkletProcessor{process(){return !1}})`,k=new Blob([V],{type:"application/javascript; charset=utf-8"}),U=URL.createObjectURL(k);return x.audioWorklet.addModule(U,p).then(()=>{if(E(x))return x;const W=m(x);return W.audioWorklet.addModule(U,p).then(()=>W)}).then(W=>{if(i===null)throw new SyntaxError;try{new i(W,`__sac${A}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(U))});return v===void 0?d.set(r,new Map([[o,g]])):v.set(o,g),g.then(()=>{const y=S.get(r);y===void 0?S.set(r,new Set([o])):y.add(o)}).finally(()=>{const y=d.get(r);y!==void 0&&y.delete(o)}),g}},gr=(L,n)=>{const c=L.get(n);if(c===void 0)throw new Error("A value with the given key could not be found.");return c},ng=(L,n)=>{const c=Array.from(L).filter(n);if(c.length>1)throw Error("More than one element was found.");if(c.length===0)throw Error("No element was found.");const[M]=c;return L.delete(M),M},lF=(L,n,c,M)=>{const R=gr(L,n),I=ng(R,m=>m[0]===c&&m[1]===M);return R.size===0&&L.delete(n),I},Jf=L=>gr(oF,L),wu=L=>{if(Pu.has(L))throw new Error("The AudioNode is already stored.");Pu.add(L),Jf(L).forEach(n=>n(!0))},uF=L=>"port"in L,Qf=L=>{if(!Pu.has(L))throw new Error("The AudioNode is not stored.");Pu.delete(L),Jf(L).forEach(n=>n(!1))},ZT=(L,n)=>{!uF(L)&&n.every(c=>c.size===0)&&Qf(L)},iht=(L,n,c,M,R,I,m,E,i,d,S,u,l)=>{const h=new WeakMap;return(r,o,p,a,v)=>{const{activeInputs:x,passiveInputs:g}=I(o),{outputs:y}=I(r),T=E(r),P=A=>{const b=i(o),O=i(r);if(A){const D=lF(g,r,p,a);L(x,r,D,!1),!v&&!u(r)&&c(O,b,p,a),l(o)&&wu(o)}else{const D=M(x,r,p,a);n(g,a,D,!1),!v&&!u(r)&&R(O,b,p,a);const B=m(o);if(B===0)S(o)&&ZT(o,x);else{const G=h.get(o);G!==void 0&&clearTimeout(G),h.set(o,setTimeout(()=>{S(o)&&ZT(o,x)},B*1e3))}}};return d(y,[o,p,a],A=>A[0]===o&&A[1]===p&&A[2]===a,!0)?(T.add(P),S(r)?L(x,r,[p,a,P],!0):n(g,a,[r,p,P],!0),!0):!1}},sht=L=>(n,c,[M,R,I],m)=>{const E=n.get(M);E===void 0?n.set(M,new Set([[R,c,I]])):L(E,[R,c,I],i=>i[0]===R&&i[1]===c,m)},nht=L=>(n,c)=>{const M=L(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});c.connect(M).connect(n.destination);const R=()=>{c.removeEventListener("ended",R),c.disconnect(M),M.disconnect()};c.addEventListener("ended",R)},rht=L=>(n,c)=>{L(n).add(c)},aht={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},oht=(L,n,c,M,R,I)=>class extends L{constructor(E,i){const d=R(E),S={...aht,...i},u=M(d,S),l=I(d)?n():null;super(E,!1,u,l),this._nativeAnalyserNode=u}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(E){this._nativeAnalyserNode.fftSize=E}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(E){const i=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=E,!(E>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=i,c()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(E){const i=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=E,!(this._nativeAnalyserNode.maxDecibels>E))throw this._nativeAnalyserNode.minDecibels=i,c()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(E){this._nativeAnalyserNode.smoothingTimeConstant=E}getByteFrequencyData(E){this._nativeAnalyserNode.getByteFrequencyData(E)}getByteTimeDomainData(E){this._nativeAnalyserNode.getByteTimeDomainData(E)}getFloatFrequencyData(E){this._nativeAnalyserNode.getFloatFrequencyData(E)}getFloatTimeDomainData(E){this._nativeAnalyserNode.getFloatTimeDomainData(E)}},Os=(L,n)=>L.context===n,hht=(L,n,c)=>()=>{const M=new WeakMap,R=async(I,m)=>{let E=n(I);if(!Os(E,m)){const d={channelCount:E.channelCount,channelCountMode:E.channelCountMode,channelInterpretation:E.channelInterpretation,fftSize:E.fftSize,maxDecibels:E.maxDecibels,minDecibels:E.minDecibels,smoothingTimeConstant:E.smoothingTimeConstant};E=L(m,d)}return M.set(m,E),await c(I,m,E),E};return{render(I,m){const E=M.get(m);return E!==void 0?Promise.resolve(E):R(I,m)}}},Vm=L=>{try{L.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Jr=()=>new DOMException("","IndexSizeError"),CC=L=>{L.getChannelData=(n=>c=>{try{return n.call(L,c)}catch(M){throw M.code===12?Jr():M}})(L.getChannelData)},lht={numberOfChannels:1},uht=(L,n,c,M,R,I,m,E)=>{let i=null;return class dF{constructor(S){if(R===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:u,numberOfChannels:l,sampleRate:h}={...lht,...S};i===null&&(i=new R(1,1,44100));const r=M!==null&&n(I,I)?new M({length:u,numberOfChannels:l,sampleRate:h}):i.createBuffer(l,u,h);if(r.numberOfChannels===0)throw c();return typeof r.copyFromChannel!="function"?(m(r),CC(r)):n(Vm,()=>Vm(r))||E(r),L.add(r),r}static[Symbol.hasInstance](S){return S!==null&&typeof S=="object"&&Object.getPrototypeOf(S)===dF.prototype||L.has(S)}}},en=-34028234663852886e22,Ws=-en,Da=L=>Pu.has(L),dht={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},fht=(L,n,c,M,R,I,m,E)=>class extends L{constructor(d,S){const u=I(d),l={...dht,...S},h=R(u,l),r=m(u),o=r?n():null;super(d,!1,h,o),this._audioBufferSourceNodeRenderer=o,this._isBufferNullified=!1,this._isBufferSet=l.buffer!==null,this._nativeAudioBufferSourceNode=h,this._onended=null,this._playbackRate=c(this,r,h.playbackRate,Ws,en)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(d){if(this._nativeAudioBufferSourceNode.buffer=d,d!==null){if(this._isBufferSet)throw M();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(d){this._nativeAudioBufferSourceNode.loop=d}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(d){this._nativeAudioBufferSourceNode.loopEnd=d}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(d){this._nativeAudioBufferSourceNode.loopStart=d}get onended(){return this._onended}set onended(d){const S=typeof d=="function"?E(this,d):null;this._nativeAudioBufferSourceNode.onended=S;const u=this._nativeAudioBufferSourceNode.onended;this._onended=u!==null&&u===S?d:u}get playbackRate(){return this._playbackRate}start(d=0,S=0,u){if(this._nativeAudioBufferSourceNode.start(d,S,u),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=u===void 0?[d,S]:[d,S,u]),this.context.state!=="closed"){wu(this);const l=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",l),Da(this)&&Qf(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",l)}}stop(d=0){this._nativeAudioBufferSourceNode.stop(d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=d)}},cht=(L,n,c,M,R)=>()=>{const I=new WeakMap;let m=null,E=null;const i=async(d,S)=>{let u=c(d);const l=Os(u,S);if(!l){const h={buffer:u.buffer,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,loop:u.loop,loopEnd:u.loopEnd,loopStart:u.loopStart,playbackRate:u.playbackRate.value};u=n(S,h),m!==null&&u.start(...m),E!==null&&u.stop(E)}return I.set(S,u),l?await L(S,d.playbackRate,u.playbackRate):await M(S,d.playbackRate,u.playbackRate),await R(d,S,u),u};return{set start(d){m=d},set stop(d){E=d},render(d,S){const u=I.get(S);return u!==void 0?Promise.resolve(u):i(d,S)}}},pht=L=>"playbackRate"in L,vht=L=>"frequency"in L&&"gain"in L,mht=L=>"offset"in L,ght=L=>!("frequency"in L)&&"gain"in L,xht=L=>"detune"in L&&"frequency"in L&&!("gain"in L),yht=L=>"pan"in L,Hs=L=>gr(rF,L),jf=L=>gr(aF,L),KT=(L,n)=>{const{activeInputs:c}=Hs(L);c.forEach(R=>R.forEach(([I])=>{n.includes(L)||KT(I,[...n,L])}));const M=pht(L)?[L.playbackRate]:uF(L)?Array.from(L.parameters.values()):vht(L)?[L.Q,L.detune,L.frequency,L.gain]:mht(L)?[L.offset]:ght(L)?[L.gain]:xht(L)?[L.detune,L.frequency]:yht(L)?[L.pan]:[];for(const R of M){const I=jf(R);I!==void 0&&I.activeInputs.forEach(([m])=>KT(m,n))}Da(L)&&Qf(L)},fF=L=>{KT(L.destination,[])},Sht=L=>L===void 0||typeof L=="number"||typeof L=="string"&&(L==="balanced"||L==="interactive"||L==="playback"),Tht=(L,n,c,M,R,I,m,E,i)=>class extends L{constructor(S={}){if(i===null)throw new Error("Missing the native AudioContext constructor.");let u;try{u=new i(S)}catch(r){throw r.code===12&&r.message==="sampleRate is not in range"?c():r}if(u===null)throw M();if(!Sht(S.latencyHint))throw new TypeError(`The provided value '${S.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(S.sampleRate!==void 0&&u.sampleRate!==S.sampleRate)throw c();super(u,2);const{latencyHint:l}=S,{sampleRate:h}=u;if(this._baseLatency=typeof u.baseLatency=="number"?u.baseLatency:l==="balanced"?512/h:l==="interactive"||l===void 0?256/h:l==="playback"?1024/h:Math.max(2,Math.min(128,Math.round(l*h/128)))*128/h,this._nativeAudioContext=u,i.name==="webkitAudioContext"?(this._nativeGainNode=u.createGain(),this._nativeOscillatorNode=u.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(u.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,u.state==="running"){this._state="suspended";const r=()=>{this._state==="suspended"&&(this._state=null),u.removeEventListener("statechange",r)};u.addEventListener("statechange",r)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw n()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),fF(this)}))}createMediaElementSource(S){return new R(this,{mediaElement:S})}createMediaStreamDestination(){return new I(this)}createMediaStreamSource(S){return new m(this,{mediaStream:S})}createMediaStreamTrackSource(S){return new E(this,{mediaStreamTrack:S})}resume(){return this._state==="suspended"?new Promise((S,u)=>{const l=()=>{this._nativeAudioContext.removeEventListener("statechange",l),this._nativeAudioContext.state==="running"?S():this.resume().then(S,u)};this._nativeAudioContext.addEventListener("statechange",l)}):this._nativeAudioContext.resume().catch(S=>{throw S===void 0||S.code===15?n():S})}suspend(){return this._nativeAudioContext.suspend().catch(S=>{throw S===void 0?n():S})}},Cht=(L,n,c,M,R,I,m,E)=>class extends L{constructor(d,S){const u=I(d),l=m(u),h=R(u,S,l),r=l?n(E):null;super(d,!1,h,r),this._isNodeOfNativeOfflineAudioContext=l,this._nativeAudioDestinationNode=h}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(d){if(this._isNodeOfNativeOfflineAudioContext)throw M();if(d>this._nativeAudioDestinationNode.maxChannelCount)throw c();this._nativeAudioDestinationNode.channelCount=d}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(d){if(this._isNodeOfNativeOfflineAudioContext)throw M();this._nativeAudioDestinationNode.channelCountMode=d}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},Mht=L=>{const n=new WeakMap,c=async(M,R)=>{const I=R.destination;return n.set(R,I),await L(M,R,I),I};return{render(M,R){const I=n.get(R);return I!==void 0?Promise.resolve(I):c(M,R)}}},Eht=(L,n,c,M,R,I,m,E)=>(i,d)=>{const S=d.listener,u=()=>{const y=new Float32Array(1),T=n(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),P=m(d);let A=!1,b=[0,0,-1,0,1,0],O=[0,0,0];const D=()=>{if(A)return;A=!0;const k=M(d,256,9,0);k.onaudioprocess=({inputBuffer:U})=>{const W=[I(U,y,0),I(U,y,1),I(U,y,2),I(U,y,3),I(U,y,4),I(U,y,5)];W.some((_,Q)=>_!==b[Q])&&(S.setOrientation(...W),b=W);const X=[I(U,y,6),I(U,y,7),I(U,y,8)];X.some((_,Q)=>_!==O[Q])&&(S.setPosition(...X),O=X)},T.connect(k)},B=k=>U=>{U!==b[k]&&(b[k]=U,S.setOrientation(...b))},G=k=>U=>{U!==O[k]&&(O[k]=U,S.setPosition(...O))},V=(k,U,W)=>{const X=c(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:U});X.connect(T,0,k),X.start(),Object.defineProperty(X.offset,"defaultValue",{get(){return U}});const _=L({context:i},P,X.offset,Ws,en);return E(_,"value",Q=>()=>Q.call(_),Q=>j=>{try{Q.call(_,j)}catch(it){if(it.code!==9)throw it}D(),P&&W(j)}),_.cancelAndHoldAtTime=(Q=>P?()=>{throw R()}:(...j)=>{const it=Q.apply(_,j);return D(),it})(_.cancelAndHoldAtTime),_.cancelScheduledValues=(Q=>P?()=>{throw R()}:(...j)=>{const it=Q.apply(_,j);return D(),it})(_.cancelScheduledValues),_.exponentialRampToValueAtTime=(Q=>P?()=>{throw R()}:(...j)=>{const it=Q.apply(_,j);return D(),it})(_.exponentialRampToValueAtTime),_.linearRampToValueAtTime=(Q=>P?()=>{throw R()}:(...j)=>{const it=Q.apply(_,j);return D(),it})(_.linearRampToValueAtTime),_.setTargetAtTime=(Q=>P?()=>{throw R()}:(...j)=>{const it=Q.apply(_,j);return D(),it})(_.setTargetAtTime),_.setValueAtTime=(Q=>P?()=>{throw R()}:(...j)=>{const it=Q.apply(_,j);return D(),it})(_.setValueAtTime),_.setValueCurveAtTime=(Q=>P?()=>{throw R()}:(...j)=>{const it=Q.apply(_,j);return D(),it})(_.setValueCurveAtTime),_};return{forwardX:V(0,0,B(0)),forwardY:V(1,0,B(1)),forwardZ:V(2,-1,B(2)),positionX:V(6,0,G(0)),positionY:V(7,0,G(1)),positionZ:V(8,0,G(2)),upX:V(3,0,B(3)),upY:V(4,1,B(4)),upZ:V(5,0,B(5))}},{forwardX:l,forwardY:h,forwardZ:r,positionX:o,positionY:p,positionZ:a,upX:v,upY:x,upZ:g}=S.forwardX===void 0?u():S;return{get forwardX(){return l},get forwardY(){return h},get forwardZ(){return r},get positionX(){return o},get positionY(){return p},get positionZ(){return a},get upX(){return v},get upY(){return x},get upZ(){return g}}},zm=L=>"context"in L,qf=L=>zm(L[0]),Zh=(L,n,c,M)=>{for(const R of L)if(c(R)){if(M)return!1;throw Error("The set contains at least one similar element.")}return L.add(n),!0},HL=(L,n,[c,M],R)=>{Zh(L,[n,c,M],I=>I[0]===n&&I[1]===c,R)},YL=(L,[n,c,M],R)=>{const I=L.get(n);I===void 0?L.set(n,new Set([[c,M]])):Zh(I,[c,M],m=>m[0]===c,R)},Uu=L=>"inputs"in L,Wm=(L,n,c,M)=>{if(Uu(n)){const R=n.inputs[M];return L.connect(R,c,0),[R,c,0]}return L.connect(n,c,M),[n,c,M]},cF=(L,n,c)=>{for(const M of L)if(M[0]===n&&M[1]===c)return L.delete(M),M;return null},Pht=(L,n,c)=>ng(L,M=>M[0]===n&&M[1]===c),pF=(L,n)=>{if(!Jf(L).delete(n))throw new Error("Missing the expected event listener.")},vF=(L,n,c)=>{const M=gr(L,n),R=ng(M,I=>I[0]===c);return M.size===0&&L.delete(n),R},Xm=(L,n,c,M)=>{Uu(n)?L.disconnect(n.inputs[M],c,0):L.disconnect(n,c,M)},gi=L=>gr(SC,L),Vf=L=>gr(TC,L),Hh=L=>YT.has(L),Rm=L=>!Pu.has(L),$L=(L,n)=>new Promise(c=>{if(n!==null)c(!0);else{const M=L.createScriptProcessor(256,1,1),R=L.createGain(),I=L.createBuffer(1,2,44100),m=I.getChannelData(0);m[0]=1,m[1]=1;const E=L.createBufferSource();E.buffer=I,E.loop=!0,E.connect(M).connect(L.destination),E.connect(R),E.disconnect(R),M.onaudioprocess=i=>{const d=i.inputBuffer.getChannelData(0);Array.prototype.some.call(d,S=>S===1)?c(!0):c(!1),E.stop(),M.onaudioprocess=null,E.disconnect(M),M.disconnect(L.destination)},E.start()}}),QS=(L,n)=>{const c=new Map;for(const M of L)for(const R of M){const I=c.get(R);c.set(R,I===void 0?1:I+1)}c.forEach((M,R)=>n(R,M))},Hm=L=>"context"in L,wht=L=>{const n=new Map;L.connect=(c=>(M,R=0,I=0)=>{const m=Hm(M)?c(M,R,I):c(M,R),E=n.get(M);return E===void 0?n.set(M,[{input:I,output:R}]):E.every(i=>i.input!==I||i.output!==R)&&E.push({input:I,output:R}),m})(L.connect.bind(L)),L.disconnect=(c=>(M,R,I)=>{if(c.apply(L),M===void 0)n.clear();else if(typeof M=="number")for(const[m,E]of n){const i=E.filter(d=>d.output!==M);i.length===0?n.delete(m):n.set(m,i)}else if(n.has(M))if(R===void 0)n.delete(M);else{const m=n.get(M);if(m!==void 0){const E=m.filter(i=>i.output!==R&&(i.input!==I||I===void 0));E.length===0?n.delete(M):n.set(M,E)}}for(const[m,E]of n)E.forEach(i=>{Hm(m)?L.connect(m,i.output,i.input):L.connect(m,i.output)})})(L.disconnect)},bht=(L,n,c,M)=>{const{activeInputs:R,passiveInputs:I}=jf(n),{outputs:m}=Hs(L),E=Jf(L),i=d=>{const S=gi(L),u=Vf(n);if(d){const l=vF(I,L,c);HL(R,L,l,!1),!M&&!Hh(L)&&S.connect(u,c)}else{const l=Pht(R,L,c);YL(I,l,!1),!M&&!Hh(L)&&S.disconnect(u,c)}};return Zh(m,[n,c],d=>d[0]===n&&d[1]===c,!0)?(E.add(i),Da(L)?HL(R,L,[c,i],!0):YL(I,[L,c,i],!0),!0):!1},Aht=(L,n,c,M)=>{const{activeInputs:R,passiveInputs:I}=Hs(n),m=cF(R[M],L,c);return m===null?[lF(I,L,c,M)[2],!1]:[m[2],!0]},Rht=(L,n,c)=>{const{activeInputs:M,passiveInputs:R}=jf(n),I=cF(M,L,c);return I===null?[vF(R,L,c)[1],!1]:[I[2],!0]},MC=(L,n,c,M,R)=>{const[I,m]=Aht(L,c,M,R);if(I!==null&&(pF(L,I),m&&!n&&!Hh(L)&&Xm(gi(L),gi(c),M,R)),Da(c)){const{activeInputs:E}=Hs(c);ZT(c,E)}},EC=(L,n,c,M)=>{const[R,I]=Rht(L,c,M);R!==null&&(pF(L,R),I&&!n&&!Hh(L)&&gi(L).disconnect(Vf(c),M))},Lht=(L,n)=>{const c=Hs(L),M=[];for(const R of c.outputs)qf(R)?MC(L,n,...R):EC(L,n,...R),M.push(R[0]);return c.outputs.clear(),M},Oht=(L,n,c)=>{const M=Hs(L),R=[];for(const I of M.outputs)I[1]===c&&(qf(I)?MC(L,n,...I):EC(L,n,...I),R.push(I[0]),M.outputs.delete(I));return R},Fht=(L,n,c,M,R)=>{const I=Hs(L);return Array.from(I.outputs).filter(m=>m[0]===c&&(M===void 0||m[1]===M)&&(R===void 0||m[2]===R)).map(m=>(qf(m)?MC(L,n,...m):EC(L,n,...m),I.outputs.delete(m),m[0]))},Dht=(L,n,c,M,R,I,m,E,i,d,S,u,l,h,r,o)=>class extends d{constructor(a,v,x,g){super(x),this._context=a,this._nativeAudioNode=x;const y=S(a);u(y)&&c($L,()=>$L(y,o))!==!0&&wht(x),SC.set(this,x),oF.set(this,new Set),a.state!=="closed"&&v&&wu(this),L(this,g,x)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(a){this._nativeAudioNode.channelCount=a}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(a){this._nativeAudioNode.channelCountMode=a}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(a){this._nativeAudioNode.channelInterpretation=a}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(a,v=0,x=0){if(v<0||v>=this._nativeAudioNode.numberOfOutputs)throw R();const g=S(this._context),y=r(g);if(l(a)||h(a))throw I();if(zm(a)){const A=gi(a);try{const O=Wm(this._nativeAudioNode,A,v,x),D=Rm(this);(y||D)&&this._nativeAudioNode.disconnect(...O),this.context.state!=="closed"&&!D&&Rm(a)&&wu(a)}catch(O){throw O.code===12?I():O}if(n(this,a,v,x,y)){const O=i([this],a);QS(O,M(y))}return a}const T=Vf(a);if(T.name==="playbackRate"&&T.maxValue===1024)throw m();try{this._nativeAudioNode.connect(T,v),(y||Rm(this))&&this._nativeAudioNode.disconnect(T,v)}catch(A){throw A.code===12?I():A}if(bht(this,a,v,y)){const A=i([this],a);QS(A,M(y))}}disconnect(a,v,x){let g;const y=S(this._context),T=r(y);if(a===void 0)g=Lht(this,T);else if(typeof a=="number"){if(a<0||a>=this.numberOfOutputs)throw R();g=Oht(this,T,a)}else{if(v!==void 0&&(v<0||v>=this.numberOfOutputs)||zm(a)&&x!==void 0&&(x<0||x>=a.numberOfInputs))throw R();if(g=Fht(this,T,a,v,x),g.length===0)throw I()}for(const P of g){const A=i([this],P);QS(A,E)}}},Iht=(L,n,c,M,R,I,m,E,i,d,S,u,l)=>(h,r,o,p=null,a=null)=>{const v=o.value,x=new Hot(v),g=r?M(x):null,y={get defaultValue(){return v},get maxValue(){return p===null?o.maxValue:p},get minValue(){return a===null?o.minValue:a},get value(){return o.value},set value(T){o.value=T,y.setValueAtTime(T,h.context.currentTime)},cancelAndHoldAtTime(T){if(typeof o.cancelAndHoldAtTime=="function")g===null&&x.flush(h.context.currentTime),x.add(R(T)),o.cancelAndHoldAtTime(T);else{const P=Array.from(x).pop();g===null&&x.flush(h.context.currentTime),x.add(R(T));const A=Array.from(x).pop();o.cancelScheduledValues(T),P!==A&&A!==void 0&&(A.type==="exponentialRampToValue"?o.exponentialRampToValueAtTime(A.value,A.endTime):A.type==="linearRampToValue"?o.linearRampToValueAtTime(A.value,A.endTime):A.type==="setValue"?o.setValueAtTime(A.value,A.startTime):A.type==="setValueCurve"&&o.setValueCurveAtTime(A.values,A.startTime,A.duration))}return y},cancelScheduledValues(T){return g===null&&x.flush(h.context.currentTime),x.add(I(T)),o.cancelScheduledValues(T),y},exponentialRampToValueAtTime(T,P){if(T===0)throw new RangeError;if(!Number.isFinite(P)||P<0)throw new RangeError;const A=h.context.currentTime;return g===null&&x.flush(A),Array.from(x).length===0&&(x.add(d(v,A)),o.setValueAtTime(v,A)),x.add(m(T,P)),o.exponentialRampToValueAtTime(T,P),y},linearRampToValueAtTime(T,P){const A=h.context.currentTime;return g===null&&x.flush(A),Array.from(x).length===0&&(x.add(d(v,A)),o.setValueAtTime(v,A)),x.add(E(T,P)),o.linearRampToValueAtTime(T,P),y},setTargetAtTime(T,P,A){return g===null&&x.flush(h.context.currentTime),x.add(i(T,P,A)),o.setTargetAtTime(T,P,A),y},setValueAtTime(T,P){return g===null&&x.flush(h.context.currentTime),x.add(d(T,P)),o.setValueAtTime(T,P),y},setValueCurveAtTime(T,P,A){const b=T instanceof Float32Array?T:new Float32Array(T);if(u!==null&&u.name==="webkitAudioContext"){const O=P+A,D=h.context.sampleRate,B=Math.ceil(P*D),G=Math.floor(O*D),V=G-B,k=new Float32Array(V);for(let W=0;W<V;W+=1){const X=(b.length-1)/A*((B+W)/D-P),_=Math.floor(X),Q=Math.ceil(X);k[W]=_===Q?b[_]:(1-(X-_))*b[_]+(1-(Q-X))*b[Q]}g===null&&x.flush(h.context.currentTime),x.add(S(k,P,A)),o.setValueCurveAtTime(k,P,A);const U=G/D;U<O&&l(y,k[k.length-1],U),l(y,b[b.length-1],O)}else g===null&&x.flush(h.context.currentTime),x.add(S(b,P,A)),o.setValueCurveAtTime(b,P,A);return y}};return c.set(y,o),n.set(y,h),L(y,g),y},Bht=L=>({replay(n){for(const c of L)if(c.type==="exponentialRampToValue"){const{endTime:M,value:R}=c;n.exponentialRampToValueAtTime(R,M)}else if(c.type==="linearRampToValue"){const{endTime:M,value:R}=c;n.linearRampToValueAtTime(R,M)}else if(c.type==="setTarget"){const{startTime:M,target:R,timeConstant:I}=c;n.setTargetAtTime(R,M,I)}else if(c.type==="setValue"){const{startTime:M,value:R}=c;n.setValueAtTime(R,M)}else if(c.type==="setValueCurve"){const{duration:M,startTime:R,values:I}=c;n.setValueCurveAtTime(I,R,M)}else throw new Error("Can't apply an unknown automation.")}});class mF{constructor(n){this._map=new Map(n)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(n,c=null){return this._map.forEach((M,R)=>n.call(c,M,R,this))}get(n){return this._map.get(n)}has(n){return this._map.has(n)}keys(){return this._map.keys()}values(){return this._map.values()}}const Nht={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},Ght=(L,n,c,M,R,I,m,E,i,d,S,u,l,h)=>class extends n{constructor(o,p,a){var v;const x=E(o),g=i(x),y=S({...Nht,...a});l(y);const T=$T.get(x),P=T==null?void 0:T.get(p),A=g||x.state!=="closed"?x:(v=m(x))!==null&&v!==void 0?v:x,b=R(A,g?null:o.baseLatency,d,p,P,y),O=g?M(p,y,P):null;super(o,!0,b,O);const D=[];b.parameters.forEach((G,V)=>{const k=c(this,g,G);D.push([V,k])}),this._nativeAudioWorkletNode=b,this._onprocessorerror=null,this._parameters=new mF(D),g&&L(x,this);const{activeInputs:B}=I(this);u(b,B)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(o){const p=typeof o=="function"?h(this,o):null;this._nativeAudioWorkletNode.onprocessorerror=p;const a=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=a!==null&&a===p?o:a}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Ym(L,n,c,M,R){if(typeof L.copyFromChannel=="function")n[c].byteLength===0&&(n[c]=new Float32Array(128)),L.copyFromChannel(n[c],M,R);else{const I=L.getChannelData(M);if(n[c].byteLength===0)n[c]=I.slice(R,R+128);else{const m=new Float32Array(I.buffer,R*Float32Array.BYTES_PER_ELEMENT,128);n[c].set(m)}}}const gF=(L,n,c,M,R)=>{typeof L.copyToChannel=="function"?n[c].byteLength!==0&&L.copyToChannel(n[c],M,R):n[c].byteLength!==0&&L.getChannelData(M).set(n[c],R)},$m=(L,n)=>{const c=[];for(let M=0;M<L;M+=1){const R=[],I=typeof n=="number"?n:n[M];for(let m=0;m<I;m+=1)R.push(new Float32Array(128));c.push(R)}return c},Uht=(L,n)=>{const c=gr(_T,L),M=gi(n);return gr(c,M)},kht=async(L,n,c,M,R,I,m)=>{const E=n===null?Math.ceil(L.context.length/128)*128:n.length,i=M.channelCount*M.numberOfInputs,d=R.reduce((p,a)=>p+a,0),S=d===0?null:c.createBuffer(d,E,c.sampleRate);if(I===void 0)throw new Error("Missing the processor constructor.");const u=Hs(L),l=await Uht(c,L),h=$m(M.numberOfInputs,M.channelCount),r=$m(M.numberOfOutputs,R),o=Array.from(L.parameters.keys()).reduce((p,a)=>({...p,[a]:new Float32Array(128)}),{});for(let p=0;p<E;p+=128){if(M.numberOfInputs>0&&n!==null)for(let a=0;a<M.numberOfInputs;a+=1)for(let v=0;v<M.channelCount;v+=1)Ym(n,h[a],v,v,p);I.parameterDescriptors!==void 0&&n!==null&&I.parameterDescriptors.forEach(({name:a},v)=>{Ym(n,o,a,i+v,p)});for(let a=0;a<M.numberOfInputs;a+=1)for(let v=0;v<R[a];v+=1)r[a][v].byteLength===0&&(r[a][v]=new Float32Array(128));try{const a=h.map((x,g)=>u.activeInputs[g].size===0?[]:x),v=m(p/c.sampleRate,c.sampleRate,()=>l.process(a,r,o));if(S!==null)for(let x=0,g=0;x<M.numberOfOutputs;x+=1){for(let y=0;y<R[x];y+=1)gF(S,r[x],y,g+y,p);g+=R[x]}if(!v)break}catch(a){L.dispatchEvent(new ErrorEvent("processorerror",{colno:a.colno,filename:a.filename,lineno:a.lineno,message:a.message}));break}}return S},Vht=(L,n,c,M,R,I,m,E,i,d,S,u,l,h,r,o)=>(p,a,v)=>{const x=new WeakMap;let g=null;const y=async(T,P)=>{let A=S(T),b=null;const O=Os(A,P),D=Array.isArray(a.outputChannelCount)?a.outputChannelCount:Array.from(a.outputChannelCount);if(u===null){const B=D.reduce((U,W)=>U+W,0),G=R(P,{channelCount:Math.max(1,B),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,B)}),V=[];for(let U=0;U<T.numberOfOutputs;U+=1)V.push(M(P,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:D[U]}));const k=m(P,{channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,gain:1});k.connect=n.bind(null,V),k.disconnect=i.bind(null,V),b=[G,V,k]}else O||(A=new u(P,p));if(x.set(P,b===null?A:b[2]),b!==null){if(g===null){if(v===void 0)throw new Error("Missing the processor constructor.");if(l===null)throw new Error("Missing the native OfflineAudioContext constructor.");const W=T.channelCount*T.numberOfInputs,X=v.parameterDescriptors===void 0?0:v.parameterDescriptors.length,_=W+X;g=kht(T,_===0?null:await(async()=>{const j=new l(_,Math.ceil(T.context.length/128)*128,P.sampleRate),it=[],K=[];for(let q=0;q<a.numberOfInputs;q+=1)it.push(m(j,{channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,gain:1})),K.push(R(j,{channelCount:a.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:a.channelCount}));const J=await Promise.all(Array.from(T.parameters.values()).map(async q=>{const $=I(j,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:q.value});return await h(j,q,$.offset),$})),Y=M(j,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,W+X)});for(let q=0;q<a.numberOfInputs;q+=1){it[q].connect(K[q]);for(let $=0;$<a.channelCount;$+=1)K[q].connect(Y,$,q*a.channelCount+$)}for(const[q,$]of J.entries())$.connect(Y,0,W+q),$.start(0);return Y.connect(j.destination),await Promise.all(it.map(q=>r(T,j,q))),o(j)})(),P,a,D,v,d)}const B=await g,G=c(P,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[V,k,U]=b;B!==null&&(G.buffer=B,G.start(0)),G.connect(V);for(let W=0,X=0;W<T.numberOfOutputs;W+=1){const _=k[W];for(let Q=0;Q<D[W];Q+=1)V.connect(_,X+Q,Q);X+=D[W]}return U}if(O)for(const[B,G]of T.parameters.entries())await L(P,G,A.parameters.get(B));else for(const[B,G]of T.parameters.entries())await h(P,G,A.parameters.get(B));return await r(T,P,A),A};return{render(T,P){E(P,T);const A=x.get(P);return A!==void 0?Promise.resolve(A):y(T,P)}}},zht=(L,n,c,M,R,I,m,E,i,d,S,u,l,h,r,o,p,a,v,x)=>class extends r{constructor(y,T){super(y,T),this._nativeContext=y,this._audioWorklet=L===void 0?void 0:{addModule:(P,A)=>L(this,P,A)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new n(this)}createBiquadFilter(){return new R(this)}createBuffer(y,T,P){return new c({length:T,numberOfChannels:y,sampleRate:P})}createBufferSource(){return new M(this)}createChannelMerger(y=6){return new I(this,{numberOfInputs:y})}createChannelSplitter(y=6){return new m(this,{numberOfOutputs:y})}createConstantSource(){return new E(this)}createConvolver(){return new i(this)}createDelay(y=1){return new S(this,{maxDelayTime:y})}createDynamicsCompressor(){return new u(this)}createGain(){return new l(this)}createIIRFilter(y,T){return new h(this,{feedback:T,feedforward:y})}createOscillator(){return new o(this)}createPanner(){return new p(this)}createPeriodicWave(y,T,P={disableNormalization:!1}){return new a(this,{...P,imag:T,real:y})}createStereoPanner(){return new v(this)}createWaveShaper(){return new x(this)}decodeAudioData(y,T,P){return d(this._nativeContext,y).then(A=>(typeof T=="function"&&T(A),A),A=>{throw typeof P=="function"&&P(A),A})}},Wht={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Xht=(L,n,c,M,R,I,m,E)=>class extends L{constructor(d,S){const u=I(d),l={...Wht,...S},h=R(u,l),r=m(u),o=r?c():null;super(d,!1,h,o),this._Q=n(this,r,h.Q,Ws,en),this._detune=n(this,r,h.detune,1200*Math.log2(Ws),-1200*Math.log2(Ws)),this._frequency=n(this,r,h.frequency,d.sampleRate/2,0),this._gain=n(this,r,h.gain,40*Math.log10(Ws),en),this._nativeBiquadFilterNode=h,E(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(d){this._nativeBiquadFilterNode.type=d}getFrequencyResponse(d,S,u){try{this._nativeBiquadFilterNode.getFrequencyResponse(d,S,u)}catch(l){throw l.code===11?M():l}if(d.length!==S.length||S.length!==u.length)throw M()}},Hht=(L,n,c,M,R)=>()=>{const I=new WeakMap,m=async(E,i)=>{let d=c(E);const S=Os(d,i);if(!S){const u={Q:d.Q.value,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,gain:d.gain.value,type:d.type};d=n(i,u)}return I.set(i,d),S?(await L(i,E.Q,d.Q),await L(i,E.detune,d.detune),await L(i,E.frequency,d.frequency),await L(i,E.gain,d.gain)):(await M(i,E.Q,d.Q),await M(i,E.detune,d.detune),await M(i,E.frequency,d.frequency),await M(i,E.gain,d.gain)),await R(E,i,d),d};return{render(E,i){const d=I.get(i);return d!==void 0?Promise.resolve(d):m(E,i)}}},Yht=(L,n)=>(c,M)=>{const R=n.get(c);if(R!==void 0)return R;const I=L.get(c);if(I!==void 0)return I;try{const m=M();return m instanceof Promise?(L.set(c,m),m.catch(()=>!1).then(E=>(L.delete(c),n.set(c,E),E))):(n.set(c,m),m)}catch{return n.set(c,!1),!1}},$ht={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},_ht=(L,n,c,M,R)=>class extends L{constructor(m,E){const i=M(m),d={...$ht,...E},S=c(i,d),u=R(i)?n():null;super(m,!1,S,u)}},Zht=(L,n,c)=>()=>{const M=new WeakMap,R=async(I,m)=>{let E=n(I);if(!Os(E,m)){const d={channelCount:E.channelCount,channelCountMode:E.channelCountMode,channelInterpretation:E.channelInterpretation,numberOfInputs:E.numberOfInputs};E=L(m,d)}return M.set(m,E),await c(I,m,E),E};return{render(I,m){const E=M.get(m);return E!==void 0?Promise.resolve(E):R(I,m)}}},Kht={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Jht=(L,n,c,M,R,I)=>class extends L{constructor(E,i){const d=M(E),S=I({...Kht,...i}),u=c(d,S),l=R(d)?n():null;super(E,!1,u,l)}},Qht=(L,n,c)=>()=>{const M=new WeakMap,R=async(I,m)=>{let E=n(I);if(!Os(E,m)){const d={channelCount:E.channelCount,channelCountMode:E.channelCountMode,channelInterpretation:E.channelInterpretation,numberOfOutputs:E.numberOfOutputs};E=L(m,d)}return M.set(m,E),await c(I,m,E),E};return{render(I,m){const E=M.get(m);return E!==void 0?Promise.resolve(E):R(I,m)}}},jht=L=>(n,c,M)=>L(c,n,M),qht=L=>(n,c,M=0,R=0)=>{const I=n[M];if(I===void 0)throw L();return Hm(c)?I.connect(c,0,R):I.connect(c,0)},tlt=L=>(n,c)=>{const M=L(n,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),R=n.createBuffer(1,2,44100);return M.buffer=R,M.loop=!0,M.connect(c),M.start(),()=>{M.stop(),M.disconnect(c)}},elt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},ilt=(L,n,c,M,R,I,m)=>class extends L{constructor(i,d){const S=R(i),u={...elt,...d},l=M(S,u),h=I(S),r=h?c():null;super(i,!1,l,r),this._constantSourceNodeRenderer=r,this._nativeConstantSourceNode=l,this._offset=n(this,h,l.offset,Ws,en),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(i){const d=typeof i=="function"?m(this,i):null;this._nativeConstantSourceNode.onended=d;const S=this._nativeConstantSourceNode.onended;this._onended=S!==null&&S===d?i:S}start(i=0){if(this._nativeConstantSourceNode.start(i),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=i),this.context.state!=="closed"){wu(this);const d=()=>{this._nativeConstantSourceNode.removeEventListener("ended",d),Da(this)&&Qf(this)};this._nativeConstantSourceNode.addEventListener("ended",d)}}stop(i=0){this._nativeConstantSourceNode.stop(i),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=i)}},slt=(L,n,c,M,R)=>()=>{const I=new WeakMap;let m=null,E=null;const i=async(d,S)=>{let u=c(d);const l=Os(u,S);if(!l){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,offset:u.offset.value};u=n(S,h),m!==null&&u.start(m),E!==null&&u.stop(E)}return I.set(S,u),l?await L(S,d.offset,u.offset):await M(S,d.offset,u.offset),await R(d,S,u),u};return{set start(d){m=d},set stop(d){E=d},render(d,S){const u=I.get(S);return u!==void 0?Promise.resolve(u):i(d,S)}}},nlt=L=>n=>(L[0]=n,L[0]),rlt={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},alt=(L,n,c,M,R,I)=>class extends L{constructor(E,i){const d=M(E),S={...rlt,...i},u=c(d,S),h=R(d)?n():null;super(E,!1,u,h),this._isBufferNullified=!1,this._nativeConvolverNode=u,S.buffer!==null&&I(this,S.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(E){if(this._nativeConvolverNode.buffer=E,E===null&&this._nativeConvolverNode.buffer!==null){const i=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=i.createBuffer(1,1,i.sampleRate),this._isBufferNullified=!0,I(this,0)}else this._isBufferNullified=!1,I(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(E){this._nativeConvolverNode.normalize=E}},olt=(L,n,c)=>()=>{const M=new WeakMap,R=async(I,m)=>{let E=n(I);if(!Os(E,m)){const d={buffer:E.buffer,channelCount:E.channelCount,channelCountMode:E.channelCountMode,channelInterpretation:E.channelInterpretation,disableNormalization:!E.normalize};E=L(m,d)}return M.set(m,E),Uu(E)?await c(I,m,E.inputs[0]):await c(I,m,E),E};return{render(I,m){const E=M.get(m);return E!==void 0?Promise.resolve(E):R(I,m)}}},hlt=(L,n)=>(c,M,R)=>{if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new n(c,M,R)}catch(I){throw I.name==="SyntaxError"?L():I}},llt=()=>new DOMException("","DataCloneError"),_L=L=>{const{port1:n,port2:c}=new MessageChannel;return new Promise(M=>{const R=()=>{c.onmessage=null,n.close(),c.close(),M()};c.onmessage=()=>R();try{n.postMessage(L,[L])}catch{}finally{R()}})},ult=(L,n,c,M,R,I,m,E,i,d,S)=>(u,l)=>{const h=m(u)?u:I(u);if(R.has(l)){const r=c();return Promise.reject(r)}try{R.add(l)}catch{}return n(i,()=>i(h))?h.decodeAudioData(l).then(r=>(_L(l).catch(()=>{}),n(E,()=>E(r))||S(r),L.add(r),r)):new Promise((r,o)=>{const p=async()=>{try{await _L(l)}catch{}},a=v=>{o(v),p()};try{h.decodeAudioData(l,v=>{typeof v.copyFromChannel!="function"&&(d(v),CC(v)),L.add(v),p().then(()=>r(v))},v=>{a(v===null?M():v)})}catch(v){a(v)}})},dlt=(L,n,c,M,R,I,m,E)=>(i,d)=>{const S=n.get(i);if(S===void 0)throw new Error("Missing the expected cycle count.");const u=I(i.context),l=E(u);if(S===d){if(n.delete(i),!l&&m(i)){const h=M(i),{outputs:r}=c(i);for(const o of r)if(qf(o)){const p=M(o[0]);L(h,p,o[1],o[2])}else{const p=R(o[0]);h.connect(p,o[1])}}}else n.set(i,S-d)},flt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},clt=(L,n,c,M,R,I,m)=>class extends L{constructor(i,d){const S=R(i),u={...flt,...d},l=M(S,u),h=I(S),r=h?c(u.maxDelayTime):null;super(i,!1,l,r),this._delayTime=n(this,h,l.delayTime),m(this,u.maxDelayTime)}get delayTime(){return this._delayTime}},plt=(L,n,c,M,R)=>I=>{const m=new WeakMap,E=async(i,d)=>{let S=c(i);const u=Os(S,d);if(!u){const l={channelCount:S.channelCount,channelCountMode:S.channelCountMode,channelInterpretation:S.channelInterpretation,delayTime:S.delayTime.value,maxDelayTime:I};S=n(d,l)}return m.set(d,S),u?await L(d,i.delayTime,S.delayTime):await M(d,i.delayTime,S.delayTime),await R(i,d,S),S};return{render(i,d){const S=m.get(d);return S!==void 0?Promise.resolve(S):E(i,d)}}},vlt=L=>(n,c,M,R)=>L(n[R],I=>I[0]===c&&I[1]===M),mlt=L=>(n,c)=>{L(n).delete(c)},glt=L=>"delayTime"in L,xlt=(L,n,c)=>function M(R,I){const m=zm(I)?I:c(L,I);if(glt(m))return[];if(R[0]===m)return[R];if(R.includes(m))return[];const{outputs:E}=n(m);return Array.from(E).map(i=>M([...R,m],i[0])).reduce((i,d)=>i.concat(d),[])},gm=(L,n,c)=>{const M=n[c];if(M===void 0)throw L();return M},ylt=L=>(n,c=void 0,M=void 0,R=0)=>c===void 0?n.forEach(I=>I.disconnect()):typeof c=="number"?gm(L,n,c).disconnect():Hm(c)?M===void 0?n.forEach(I=>I.disconnect(c)):R===void 0?gm(L,n,M).disconnect(c,0):gm(L,n,M).disconnect(c,0,R):M===void 0?n.forEach(I=>I.disconnect(c)):gm(L,n,M).disconnect(c,0),Slt={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Tlt=(L,n,c,M,R,I,m,E)=>class extends L{constructor(d,S){const u=I(d),l={...Slt,...S},h=M(u,l),r=m(u),o=r?c():null;super(d,!1,h,o),this._attack=n(this,r,h.attack),this._knee=n(this,r,h.knee),this._nativeDynamicsCompressorNode=h,this._ratio=n(this,r,h.ratio),this._release=n(this,r,h.release),this._threshold=n(this,r,h.threshold),E(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(d){const S=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=d,d>2)throw this._nativeDynamicsCompressorNode.channelCount=S,R()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(d){const S=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=d,d==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=S,R()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},Clt=(L,n,c,M,R)=>()=>{const I=new WeakMap,m=async(E,i)=>{let d=c(E);const S=Os(d,i);if(!S){const u={attack:d.attack.value,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,knee:d.knee.value,ratio:d.ratio.value,release:d.release.value,threshold:d.threshold.value};d=n(i,u)}return I.set(i,d),S?(await L(i,E.attack,d.attack),await L(i,E.knee,d.knee),await L(i,E.ratio,d.ratio),await L(i,E.release,d.release),await L(i,E.threshold,d.threshold)):(await M(i,E.attack,d.attack),await M(i,E.knee,d.knee),await M(i,E.ratio,d.ratio),await M(i,E.release,d.release),await M(i,E.threshold,d.threshold)),await R(E,i,d),d};return{render(E,i){const d=I.get(i);return d!==void 0?Promise.resolve(d):m(E,i)}}},Mlt=()=>new DOMException("","EncodingError"),Elt=L=>n=>new Promise((c,M)=>{if(L===null){M(new SyntaxError);return}const R=L.document.head;if(R===null)M(new SyntaxError);else{const I=L.document.createElement("script"),m=new Blob([n],{type:"application/javascript"}),E=URL.createObjectURL(m),i=L.onerror,d=()=>{L.onerror=i,URL.revokeObjectURL(E)};L.onerror=(S,u,l,h,r)=>{if(u===E||u===L.location.href&&l===1&&h===1)return d(),M(r),!1;if(i!==null)return i(S,u,l,h,r)},I.onerror=()=>{d(),M(new SyntaxError)},I.onload=()=>{d(),c()},I.src=E,I.type="module",R.appendChild(I)}}),Plt=L=>class{constructor(c){this._nativeEventTarget=c,this._listeners=new WeakMap}addEventListener(c,M,R){if(M!==null){let I=this._listeners.get(M);I===void 0&&(I=L(this,M),typeof M=="function"&&this._listeners.set(M,I)),this._nativeEventTarget.addEventListener(c,I,R)}}dispatchEvent(c){return this._nativeEventTarget.dispatchEvent(c)}removeEventListener(c,M,R){const I=M===null?void 0:this._listeners.get(M);this._nativeEventTarget.removeEventListener(c,I===void 0?null:I,R)}},wlt=L=>(n,c,M)=>{Object.defineProperties(L,{currentFrame:{configurable:!0,get(){return Math.round(n*c)}},currentTime:{configurable:!0,get(){return n}}});try{return M()}finally{L!==null&&(delete L.currentFrame,delete L.currentTime)}},blt=L=>async n=>{try{const c=await fetch(n);if(c.ok)return[await c.text(),c.url]}catch{}throw L()},Alt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Rlt=(L,n,c,M,R,I)=>class extends L{constructor(E,i){const d=R(E),S={...Alt,...i},u=M(d,S),l=I(d),h=l?c():null;super(E,!1,u,h),this._gain=n(this,l,u.gain,Ws,en)}get gain(){return this._gain}},Llt=(L,n,c,M,R)=>()=>{const I=new WeakMap,m=async(E,i)=>{let d=c(E);const S=Os(d,i);if(!S){const u={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,gain:d.gain.value};d=n(i,u)}return I.set(i,d),S?await L(i,E.gain,d.gain):await M(i,E.gain,d.gain),await R(E,i,d),d};return{render(E,i){const d=I.get(i);return d!==void 0?Promise.resolve(d):m(E,i)}}},Olt=(L,n)=>c=>n(L,c),Flt=L=>n=>{const c=L(n);if(c.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return c.renderer},Dlt=L=>n=>{var c;return(c=L.get(n))!==null&&c!==void 0?c:0},Ilt=L=>n=>{const c=L(n);if(c.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return c.renderer},Blt=L=>n=>L.get(n),ls=()=>new DOMException("","InvalidStateError"),Nlt=L=>n=>{const c=L.get(n);if(c===void 0)throw ls();return c},Glt=(L,n)=>c=>{let M=L.get(c);if(M!==void 0)return M;if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");return M=new n(1,1,44100),L.set(c,M),M},Ult=L=>n=>{const c=L.get(n);if(c===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return c},rg=()=>new DOMException("","InvalidAccessError"),klt=L=>{L.getFrequencyResponse=(n=>(c,M,R)=>{if(c.length!==M.length||M.length!==R.length)throw rg();return n.call(L,c,M,R)})(L.getFrequencyResponse)},Vlt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},zlt=(L,n,c,M,R,I)=>class extends L{constructor(E,i){const d=M(E),S=R(d),u={...Vlt,...i},l=n(d,S?null:E.baseLatency,u),h=S?c(u.feedback,u.feedforward):null;super(E,!1,l,h),klt(l),this._nativeIIRFilterNode=l,I(this,1)}getFrequencyResponse(E,i,d){return this._nativeIIRFilterNode.getFrequencyResponse(E,i,d)}},xF=(L,n,c,M,R,I,m,E,i,d,S)=>{const u=d.length;let l=E;for(let h=0;h<u;h+=1){let r=c[0]*d[h];for(let o=1;o<R;o+=1){const p=l-o&i-1;r+=c[o]*I[p],r-=L[o]*m[p]}for(let o=R;o<M;o+=1)r+=c[o]*I[l-o&i-1];for(let o=R;o<n;o+=1)r-=L[o]*m[l-o&i-1];I[l]=d[h],m[l]=r,l=l+1&i-1,S[h]=r}return l},Wlt=(L,n,c,M)=>{const R=c instanceof Float64Array?c:new Float64Array(c),I=M instanceof Float64Array?M:new Float64Array(M),m=R.length,E=I.length,i=Math.min(m,E);if(R[0]!==1){for(let r=0;r<m;r+=1)I[r]/=R[0];for(let r=1;r<E;r+=1)R[r]/=R[0]}const d=32,S=new Float32Array(d),u=new Float32Array(d),l=n.createBuffer(L.numberOfChannels,L.length,L.sampleRate),h=L.numberOfChannels;for(let r=0;r<h;r+=1){const o=L.getChannelData(r),p=l.getChannelData(r);S.fill(0),u.fill(0),xF(R,m,I,E,i,S,u,0,d,o,p)}return l},Xlt=(L,n,c,M,R)=>(I,m)=>{const E=new WeakMap;let i=null;const d=async(S,u)=>{let l=null,h=n(S);const r=Os(h,u);if(u.createIIRFilter===void 0?l=L(u,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):r||(h=u.createIIRFilter(m,I)),E.set(u,l===null?h:l),l!==null){if(i===null){if(c===null)throw new Error("Missing the native OfflineAudioContext constructor.");const p=new c(S.context.destination.channelCount,S.context.length,u.sampleRate);i=(async()=>{await M(S,p,p.destination);const a=await R(p);return Wlt(a,u,I,m)})()}const o=await i;return l.buffer=o,l.start(0),l}return await M(S,u,h),h};return{render(S,u){const l=E.get(u);return l!==void 0?Promise.resolve(l):d(S,u)}}},Hlt=(L,n,c,M,R,I)=>m=>(E,i)=>{const d=L.get(E);if(d===void 0){if(!m&&I(E)){const S=M(E),{outputs:u}=c(E);for(const l of u)if(qf(l)){const h=M(l[0]);n(S,h,l[1],l[2])}else{const h=R(l[0]);S.disconnect(h,l[1])}}L.set(E,i)}else L.set(E,d+i)},Ylt=(L,n)=>c=>{const M=L.get(c);return n(M)||n(c)},$lt=(L,n)=>c=>L.has(c)||n(c),_lt=(L,n)=>c=>L.has(c)||n(c),Zlt=(L,n)=>c=>{const M=L.get(c);return n(M)||n(c)},Klt=L=>n=>L!==null&&n instanceof L,Jlt=L=>n=>L!==null&&typeof L.AudioNode=="function"&&n instanceof L.AudioNode,Qlt=L=>n=>L!==null&&typeof L.AudioParam=="function"&&n instanceof L.AudioParam,jlt=(L,n)=>c=>L(c)||n(c),qlt=L=>n=>L!==null&&n instanceof L,tut=L=>L!==null&&L.isSecureContext,eut=(L,n,c,M)=>class extends L{constructor(I,m){const E=c(I),i=n(E,m);if(M(E))throw TypeError();super(I,!0,i,null),this._nativeMediaElementAudioSourceNode=i}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},iut={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},sut=(L,n,c,M)=>class extends L{constructor(I,m){const E=c(I);if(M(E))throw new TypeError;const i={...iut,...m},d=n(E,i);super(I,!1,d,null),this._nativeMediaStreamAudioDestinationNode=d}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},nut=(L,n,c,M)=>class extends L{constructor(I,m){const E=c(I),i=n(E,m);if(M(E))throw new TypeError;super(I,!0,i,null),this._nativeMediaStreamAudioSourceNode=i}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},rut=(L,n,c)=>class extends L{constructor(R,I){const m=c(R),E=n(m,I);super(R,!0,E,null)}},aut=(L,n,c,M,R,I)=>class extends c{constructor(E,i){super(E),this._nativeContext=E,sg.set(this,E),M(E)&&R.set(E,new Set),this._destination=new L(this,i),this._listener=n(this,E),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(E){const i=typeof E=="function"?I(this,E):null;this._nativeContext.onstatechange=i;const d=this._nativeContext.onstatechange;this._onstatechange=d!==null&&d===i?E:d}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},zf=L=>{const n=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const c=L.decodeAudioData(n.buffer,()=>{});return c===void 0?!1:(c.catch(()=>{}),!0)}catch{}return!1},out=(L,n)=>(c,M,R)=>{const I=new Set;return c.connect=(m=>(E,i=0,d=0)=>{const S=I.size===0;if(n(E))return m.call(c,E,i,d),L(I,[E,i,d],u=>u[0]===E&&u[1]===i&&u[2]===d,!0),S&&M(),E;m.call(c,E,i),L(I,[E,i],u=>u[0]===E&&u[1]===i,!0),S&&M()})(c.connect),c.disconnect=(m=>(E,i,d)=>{const S=I.size>0;if(E===void 0)m.apply(c),I.clear();else if(typeof E=="number"){m.call(c,E);for(const l of I)l[1]===E&&I.delete(l)}else{n(E)?m.call(c,E,i,d):m.call(c,E,i);for(const l of I)l[0]===E&&(i===void 0||l[1]===i)&&(d===void 0||l[2]===d)&&I.delete(l)}const u=I.size===0;S&&u&&R()})(c.disconnect),c},Ci=(L,n,c)=>{const M=n[c];M!==void 0&&M!==L[c]&&(L[c]=M)},ss=(L,n)=>{Ci(L,n,"channelCount"),Ci(L,n,"channelCountMode"),Ci(L,n,"channelInterpretation")},ZL=L=>typeof L.getFloatTimeDomainData=="function",hut=L=>{L.getFloatTimeDomainData=n=>{const c=new Uint8Array(n.length);L.getByteTimeDomainData(c);const M=Math.max(c.length,L.fftSize);for(let R=0;R<M;R+=1)n[R]=(c[R]-128)*.0078125;return n}},lut=(L,n)=>(c,M)=>{const R=c.createAnalyser();if(ss(R,M),!(M.maxDecibels>M.minDecibels))throw n();return Ci(R,M,"fftSize"),Ci(R,M,"maxDecibels"),Ci(R,M,"minDecibels"),Ci(R,M,"smoothingTimeConstant"),L(ZL,()=>ZL(R))||hut(R),R},uut=L=>L===null?null:L.hasOwnProperty("AudioBuffer")?L.AudioBuffer:null,Ii=(L,n,c)=>{const M=n[c];M!==void 0&&M!==L[c].value&&(L[c].value=M)},dut=L=>{L.start=(n=>{let c=!1;return(M=0,R=0,I)=>{if(c)throw ls();n.call(L,M,R,I),c=!0}})(L.start)},PC=L=>{L.start=(n=>(c=0,M=0,R)=>{if(typeof R=="number"&&R<0||M<0||c<0)throw new RangeError("The parameters can't be negative.");n.call(L,c,M,R)})(L.start)},wC=L=>{L.stop=(n=>(c=0)=>{if(c<0)throw new RangeError("The parameter can't be negative.");n.call(L,c)})(L.stop)},fut=(L,n,c,M,R,I,m,E,i,d,S)=>(u,l)=>{const h=u.createBufferSource();return ss(h,l),Ii(h,l,"playbackRate"),Ci(h,l,"buffer"),Ci(h,l,"loop"),Ci(h,l,"loopEnd"),Ci(h,l,"loopStart"),n(c,()=>c(u))||dut(h),n(M,()=>M(u))||i(h),n(R,()=>R(u))||d(h,u),n(I,()=>I(u))||PC(h),n(m,()=>m(u))||S(h,u),n(E,()=>E(u))||wC(h),L(u,h),h},cut=L=>L===null?null:L.hasOwnProperty("AudioContext")?L.AudioContext:L.hasOwnProperty("webkitAudioContext")?L.webkitAudioContext:null,put=(L,n)=>(c,M,R)=>{const I=c.destination;if(I.channelCount!==M)try{I.channelCount=M}catch{}R&&I.channelCountMode!=="explicit"&&(I.channelCountMode="explicit"),I.maxChannelCount===0&&Object.defineProperty(I,"maxChannelCount",{value:M});const m=L(c,{channelCount:M,channelCountMode:I.channelCountMode,channelInterpretation:I.channelInterpretation,gain:1});return n(m,"channelCount",E=>()=>E.call(m),E=>i=>{E.call(m,i);try{I.channelCount=i}catch(d){if(i>I.maxChannelCount)throw d}}),n(m,"channelCountMode",E=>()=>E.call(m),E=>i=>{E.call(m,i),I.channelCountMode=i}),n(m,"channelInterpretation",E=>()=>E.call(m),E=>i=>{E.call(m,i),I.channelInterpretation=i}),Object.defineProperty(m,"maxChannelCount",{get:()=>I.maxChannelCount}),m.connect(I),m},vut=L=>L===null?null:L.hasOwnProperty("AudioWorkletNode")?L.AudioWorkletNode:null,mut=L=>{const{port1:n}=new MessageChannel;try{n.postMessage(L)}finally{n.close()}},gut=(L,n,c,M,R)=>(I,m,E,i,d,S)=>{if(E!==null)try{const u=new E(I,i,S),l=new Map;let h=null;if(Object.defineProperties(u,{channelCount:{get:()=>S.channelCount,set:()=>{throw L()}},channelCountMode:{get:()=>"explicit",set:()=>{throw L()}},onprocessorerror:{get:()=>h,set:r=>{typeof h=="function"&&u.removeEventListener("processorerror",h),h=typeof r=="function"?r:null,typeof h=="function"&&u.addEventListener("processorerror",h)}}}),u.addEventListener=(r=>(...o)=>{if(o[0]==="processorerror"){const p=typeof o[1]=="function"?o[1]:typeof o[1]=="object"&&o[1]!==null&&typeof o[1].handleEvent=="function"?o[1].handleEvent:null;if(p!==null){const a=l.get(o[1]);a!==void 0?o[1]=a:(o[1]=v=>{v.type==="error"?(Object.defineProperties(v,{type:{value:"processorerror"}}),p(v)):p(new ErrorEvent(o[0],{...v}))},l.set(p,o[1]))}}return r.call(u,"error",o[1],o[2]),r.call(u,...o)})(u.addEventListener),u.removeEventListener=(r=>(...o)=>{if(o[0]==="processorerror"){const p=l.get(o[1]);p!==void 0&&(l.delete(o[1]),o[1]=p)}return r.call(u,"error",o[1],o[2]),r.call(u,o[0],o[1],o[2])})(u.removeEventListener),S.numberOfOutputs!==0){const r=c(I,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return u.connect(r).connect(I.destination),R(u,()=>r.disconnect(),()=>r.connect(I.destination))}return u}catch(u){throw u.code===11?M():u}if(d===void 0)throw M();return mut(S),n(I,m,d,S)},yF=(L,n)=>L===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(L*n))))),xut=L=>new Promise((n,c)=>{const{port1:M,port2:R}=new MessageChannel;M.onmessage=({data:I})=>{M.close(),R.close(),n(I)},M.onmessageerror=({data:I})=>{M.close(),R.close(),c(I)},R.postMessage(L)}),yut=async(L,n)=>{const c=await xut(n);return new L(c)},Sut=(L,n,c,M)=>{let R=_T.get(L);R===void 0&&(R=new WeakMap,_T.set(L,R));const I=yut(c,M);return R.set(n,I),I},Tut=(L,n,c,M,R,I,m,E,i,d,S,u,l)=>(h,r,o,p)=>{if(p.numberOfInputs===0&&p.numberOfOutputs===0)throw i();const a=Array.isArray(p.outputChannelCount)?p.outputChannelCount:Array.from(p.outputChannelCount);if(a.some(mt=>mt<1))throw i();if(a.length!==p.numberOfOutputs)throw n();if(p.channelCountMode!=="explicit")throw i();const v=p.channelCount*p.numberOfInputs,x=a.reduce((mt,Tt)=>mt+Tt,0),g=o.parameterDescriptors===void 0?0:o.parameterDescriptors.length;if(v+g>6||x>6)throw i();const y=new MessageChannel,T=[],P=[];for(let mt=0;mt<p.numberOfInputs;mt+=1)T.push(m(h,{channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,gain:1})),P.push(R(h,{channelCount:p.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:p.channelCount}));const A=[];if(o.parameterDescriptors!==void 0)for(const{defaultValue:mt,maxValue:Tt,minValue:bt,name:St}of o.parameterDescriptors){const Gt=I(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:p.parameterData[St]!==void 0?p.parameterData[St]:mt===void 0?0:mt});Object.defineProperties(Gt.offset,{defaultValue:{get:()=>mt===void 0?0:mt},maxValue:{get:()=>Tt===void 0?Ws:Tt},minValue:{get:()=>bt===void 0?en:bt}}),A.push(Gt)}const b=M(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,v+g)}),O=yF(r,h.sampleRate),D=E(h,O,v+g,Math.max(1,x)),B=R(h,{channelCount:Math.max(1,x),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,x)}),G=[];for(let mt=0;mt<p.numberOfOutputs;mt+=1)G.push(M(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:a[mt]}));for(let mt=0;mt<p.numberOfInputs;mt+=1){T[mt].connect(P[mt]);for(let Tt=0;Tt<p.channelCount;Tt+=1)P[mt].connect(b,Tt,mt*p.channelCount+Tt)}const V=new mF(o.parameterDescriptors===void 0?[]:o.parameterDescriptors.map(({name:mt},Tt)=>{const bt=A[Tt];return bt.connect(b,0,v+Tt),bt.start(0),[mt,bt.offset]}));b.connect(D);let k=p.channelInterpretation,U=null;const W=p.numberOfOutputs===0?[D]:G,X={get bufferSize(){return O},get channelCount(){return p.channelCount},set channelCount(mt){throw c()},get channelCountMode(){return p.channelCountMode},set channelCountMode(mt){throw c()},get channelInterpretation(){return k},set channelInterpretation(mt){for(const Tt of T)Tt.channelInterpretation=mt;k=mt},get context(){return D.context},get inputs(){return T},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get onprocessorerror(){return U},set onprocessorerror(mt){typeof U=="function"&&X.removeEventListener("processorerror",U),U=typeof mt=="function"?mt:null,typeof U=="function"&&X.addEventListener("processorerror",U)},get parameters(){return V},get port(){return y.port2},addEventListener(...mt){return D.addEventListener(mt[0],mt[1],mt[2])},connect:L.bind(null,W),disconnect:d.bind(null,W),dispatchEvent(...mt){return D.dispatchEvent(mt[0])},removeEventListener(...mt){return D.removeEventListener(mt[0],mt[1],mt[2])}},_=new Map;y.port1.addEventListener=(mt=>(...Tt)=>{if(Tt[0]==="message"){const bt=typeof Tt[1]=="function"?Tt[1]:typeof Tt[1]=="object"&&Tt[1]!==null&&typeof Tt[1].handleEvent=="function"?Tt[1].handleEvent:null;if(bt!==null){const St=_.get(Tt[1]);St!==void 0?Tt[1]=St:(Tt[1]=Gt=>{S(h.currentTime,h.sampleRate,()=>bt(Gt))},_.set(bt,Tt[1]))}}return mt.call(y.port1,Tt[0],Tt[1],Tt[2])})(y.port1.addEventListener),y.port1.removeEventListener=(mt=>(...Tt)=>{if(Tt[0]==="message"){const bt=_.get(Tt[1]);bt!==void 0&&(_.delete(Tt[1]),Tt[1]=bt)}return mt.call(y.port1,Tt[0],Tt[1],Tt[2])})(y.port1.removeEventListener);let Q=null;Object.defineProperty(y.port1,"onmessage",{get:()=>Q,set:mt=>{typeof Q=="function"&&y.port1.removeEventListener("message",Q),Q=typeof mt=="function"?mt:null,typeof Q=="function"&&(y.port1.addEventListener("message",Q),y.port1.start())}}),o.prototype.port=y.port1;let j=null;Sut(h,X,o,p).then(mt=>j=mt);const K=$m(p.numberOfInputs,p.channelCount),J=$m(p.numberOfOutputs,a),Y=o.parameterDescriptors===void 0?[]:o.parameterDescriptors.reduce((mt,{name:Tt})=>({...mt,[Tt]:new Float32Array(128)}),{});let q=!0;const $=()=>{p.numberOfOutputs>0&&D.disconnect(B);for(let mt=0,Tt=0;mt<p.numberOfOutputs;mt+=1){const bt=G[mt];for(let St=0;St<a[mt];St+=1)B.disconnect(bt,Tt+St,St);Tt+=a[mt]}},et=new Map;D.onaudioprocess=({inputBuffer:mt,outputBuffer:Tt})=>{if(j!==null){const bt=u(X);for(let St=0;St<O;St+=128){for(let Gt=0;Gt<p.numberOfInputs;Gt+=1)for(let Nt=0;Nt<p.channelCount;Nt+=1)Ym(mt,K[Gt],Nt,Nt,St);o.parameterDescriptors!==void 0&&o.parameterDescriptors.forEach(({name:Gt},Nt)=>{Ym(mt,Y,Gt,v+Nt,St)});for(let Gt=0;Gt<p.numberOfInputs;Gt+=1)for(let Nt=0;Nt<a[Gt];Nt+=1)J[Gt][Nt].byteLength===0&&(J[Gt][Nt]=new Float32Array(128));try{const Gt=K.map((zt,Lt)=>{if(bt[Lt].size>0)return et.set(Lt,O/128),zt;const ot=et.get(Lt);return ot===void 0?[]:(zt.every(Mt=>Mt.every(Ot=>Ot===0))&&(ot===1?et.delete(Lt):et.set(Lt,ot-1)),zt)});q=S(h.currentTime+St/h.sampleRate,h.sampleRate,()=>j.process(Gt,J,Y));for(let zt=0,Lt=0;zt<p.numberOfOutputs;zt+=1){for(let ct=0;ct<a[zt];ct+=1)gF(Tt,J[zt],ct,Lt+ct,St);Lt+=a[zt]}}catch(Gt){q=!1,X.dispatchEvent(new ErrorEvent("processorerror",{colno:Gt.colno,filename:Gt.filename,lineno:Gt.lineno,message:Gt.message}))}if(!q){for(let Gt=0;Gt<p.numberOfInputs;Gt+=1){T[Gt].disconnect(P[Gt]);for(let Nt=0;Nt<p.channelCount;Nt+=1)P[St].disconnect(b,Nt,Gt*p.channelCount+Nt)}if(o.parameterDescriptors!==void 0){const Gt=o.parameterDescriptors.length;for(let Nt=0;Nt<Gt;Nt+=1){const zt=A[Nt];zt.disconnect(b,0,v+Nt),zt.stop()}}b.disconnect(D),D.onaudioprocess=null,rt?$():vt();break}}}};let rt=!1;const at=m(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),lt=()=>D.connect(at).connect(h.destination),vt=()=>{D.disconnect(at),at.disconnect()},xt=()=>{if(q){vt(),p.numberOfOutputs>0&&D.connect(B);for(let mt=0,Tt=0;mt<p.numberOfOutputs;mt+=1){const bt=G[mt];for(let St=0;St<a[mt];St+=1)B.connect(bt,Tt+St,St);Tt+=a[mt]}}rt=!0},ut=()=>{q&&(lt(),$()),rt=!1};return lt(),l(X,xt,ut)},SF=(L,n)=>{const c=L.createBiquadFilter();return ss(c,n),Ii(c,n,"Q"),Ii(c,n,"detune"),Ii(c,n,"frequency"),Ii(c,n,"gain"),Ci(c,n,"type"),c},Cut=(L,n)=>(c,M)=>{const R=c.createChannelMerger(M.numberOfInputs);return L!==null&&L.name==="webkitAudioContext"&&n(c,R),ss(R,M),R},Mut=L=>{const n=L.numberOfOutputs;Object.defineProperty(L,"channelCount",{get:()=>n,set:c=>{if(c!==n)throw ls()}}),Object.defineProperty(L,"channelCountMode",{get:()=>"explicit",set:c=>{if(c!=="explicit")throw ls()}}),Object.defineProperty(L,"channelInterpretation",{get:()=>"discrete",set:c=>{if(c!=="discrete")throw ls()}})},tc=(L,n)=>{const c=L.createChannelSplitter(n.numberOfOutputs);return ss(c,n),Mut(c),c},Eut=(L,n,c,M,R)=>(I,m)=>{if(I.createConstantSource===void 0)return c(I,m);const E=I.createConstantSource();return ss(E,m),Ii(E,m,"offset"),n(M,()=>M(I))||PC(E),n(R,()=>R(I))||wC(E),L(I,E),E},ku=(L,n)=>(L.connect=n.connect.bind(n),L.disconnect=n.disconnect.bind(n),L),Put=(L,n,c,M)=>(R,{offset:I,...m})=>{const E=R.createBuffer(1,2,44100),i=n(R,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),d=c(R,{...m,gain:I}),S=E.getChannelData(0);S[0]=1,S[1]=1,i.buffer=E,i.loop=!0;const u={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(r){d.channelCount=r},get channelCountMode(){return d.channelCountMode},set channelCountMode(r){d.channelCountMode=r},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(r){d.channelInterpretation=r},get context(){return d.context},get inputs(){return[]},get numberOfInputs(){return i.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get offset(){return d.gain},get onended(){return i.onended},set onended(r){i.onended=r},addEventListener(...r){return i.addEventListener(r[0],r[1],r[2])},dispatchEvent(...r){return i.dispatchEvent(r[0])},removeEventListener(...r){return i.removeEventListener(r[0],r[1],r[2])},start(r=0){i.start.call(i,r)},stop(r=0){i.stop.call(i,r)}},l=()=>i.connect(d),h=()=>i.disconnect(d);return L(R,i),M(ku(u,d),l,h)},wut=(L,n)=>(c,M)=>{const R=c.createConvolver();if(ss(R,M),M.disableNormalization===R.normalize&&(R.normalize=!M.disableNormalization),Ci(R,M,"buffer"),M.channelCount>2||(n(R,"channelCount",I=>()=>I.call(R),I=>m=>{if(m>2)throw L();return I.call(R,m)}),M.channelCountMode==="max"))throw L();return n(R,"channelCountMode",I=>()=>I.call(R),I=>m=>{if(m==="max")throw L();return I.call(R,m)}),R},TF=(L,n)=>{const c=L.createDelay(n.maxDelayTime);return ss(c,n),Ii(c,n,"delayTime"),c},but=L=>(n,c)=>{const M=n.createDynamicsCompressor();if(ss(M,c),c.channelCount>2||c.channelCountMode==="max")throw L();return Ii(M,c,"attack"),Ii(M,c,"knee"),Ii(M,c,"ratio"),Ii(M,c,"release"),Ii(M,c,"threshold"),M},an=(L,n)=>{const c=L.createGain();return ss(c,n),Ii(c,n,"gain"),c},Aut=L=>(n,c,M)=>{if(n.createIIRFilter===void 0)return L(n,c,M);const R=n.createIIRFilter(M.feedforward,M.feedback);return ss(R,M),R};function Rut(L,n){const c=n[0]*n[0]+n[1]*n[1];return[(L[0]*n[0]+L[1]*n[1])/c,(L[1]*n[0]-L[0]*n[1])/c]}function Lut(L,n){return[L[0]*n[0]-L[1]*n[1],L[0]*n[1]+L[1]*n[0]]}function KL(L,n){let c=[0,0];for(let M=L.length-1;M>=0;M-=1)c=Lut(c,n),c[0]+=L[M];return c}const Out=(L,n,c,M)=>(R,I,{channelCount:m,channelCountMode:E,channelInterpretation:i,feedback:d,feedforward:S})=>{const u=yF(I,R.sampleRate),l=d instanceof Float64Array?d:new Float64Array(d),h=S instanceof Float64Array?S:new Float64Array(S),r=l.length,o=h.length,p=Math.min(r,o);if(r===0||r>20)throw M();if(l[0]===0)throw n();if(o===0||o>20)throw M();if(h[0]===0)throw n();if(l[0]!==1){for(let A=0;A<o;A+=1)h[A]/=l[0];for(let A=1;A<r;A+=1)l[A]/=l[0]}const a=c(R,u,m,m);a.channelCount=m,a.channelCountMode=E,a.channelInterpretation=i;const v=32,x=[],g=[],y=[];for(let A=0;A<m;A+=1){x.push(0);const b=new Float32Array(v),O=new Float32Array(v);b.fill(0),O.fill(0),g.push(b),y.push(O)}a.onaudioprocess=A=>{const b=A.inputBuffer,O=A.outputBuffer,D=b.numberOfChannels;for(let B=0;B<D;B+=1){const G=b.getChannelData(B),V=O.getChannelData(B);x[B]=xF(l,r,h,o,p,g[B],y[B],x[B],v,G,V)}};const T=R.sampleRate/2;return ku({get bufferSize(){return u},get channelCount(){return a.channelCount},set channelCount(A){a.channelCount=A},get channelCountMode(){return a.channelCountMode},set channelCountMode(A){a.channelCountMode=A},get channelInterpretation(){return a.channelInterpretation},set channelInterpretation(A){a.channelInterpretation=A},get context(){return a.context},get inputs(){return[a]},get numberOfInputs(){return a.numberOfInputs},get numberOfOutputs(){return a.numberOfOutputs},addEventListener(...A){return a.addEventListener(A[0],A[1],A[2])},dispatchEvent(...A){return a.dispatchEvent(A[0])},getFrequencyResponse(A,b,O){if(A.length!==b.length||b.length!==O.length)throw L();const D=A.length;for(let B=0;B<D;B+=1){const G=-Math.PI*(A[B]/T),V=[Math.cos(G),Math.sin(G)],k=KL(h,V),U=KL(l,V),W=Rut(k,U);b[B]=Math.sqrt(W[0]*W[0]+W[1]*W[1]),O[B]=Math.atan2(W[1],W[0])}},removeEventListener(...A){return a.removeEventListener(A[0],A[1],A[2])}},a)},Fut=(L,n)=>L.createMediaElementSource(n.mediaElement),Dut=(L,n)=>{const c=L.createMediaStreamDestination();return ss(c,n),c.numberOfOutputs===1&&Object.defineProperty(c,"numberOfOutputs",{get:()=>0}),c},Iut=(L,{mediaStream:n})=>{const c=n.getAudioTracks();c.sort((I,m)=>I.id<m.id?-1:I.id>m.id?1:0);const M=c.slice(0,1),R=L.createMediaStreamSource(new MediaStream(M));return Object.defineProperty(R,"mediaStream",{value:n}),R},But=(L,n)=>(c,{mediaStreamTrack:M})=>{if(typeof c.createMediaStreamTrackSource=="function")return c.createMediaStreamTrackSource(M);const R=new MediaStream([M]),I=c.createMediaStreamSource(R);if(M.kind!=="audio")throw L();if(n(c))throw new TypeError;return I},Nut=L=>L===null?null:L.hasOwnProperty("OfflineAudioContext")?L.OfflineAudioContext:L.hasOwnProperty("webkitOfflineAudioContext")?L.webkitOfflineAudioContext:null,Gut=(L,n,c,M,R,I)=>(m,E)=>{const i=m.createOscillator();return ss(i,E),Ii(i,E,"detune"),Ii(i,E,"frequency"),E.periodicWave!==void 0?i.setPeriodicWave(E.periodicWave):Ci(i,E,"type"),n(c,()=>c(m))||PC(i),n(M,()=>M(m))||I(i,m),n(R,()=>R(m))||wC(i),L(m,i),i},Uut=L=>(n,c)=>{const M=n.createPanner();return M.orientationX===void 0?L(n,c):(ss(M,c),Ii(M,c,"orientationX"),Ii(M,c,"orientationY"),Ii(M,c,"orientationZ"),Ii(M,c,"positionX"),Ii(M,c,"positionY"),Ii(M,c,"positionZ"),Ci(M,c,"coneInnerAngle"),Ci(M,c,"coneOuterAngle"),Ci(M,c,"coneOuterGain"),Ci(M,c,"distanceModel"),Ci(M,c,"maxDistance"),Ci(M,c,"panningModel"),Ci(M,c,"refDistance"),Ci(M,c,"rolloffFactor"),M)},kut=(L,n,c,M,R,I,m,E,i,d)=>(S,{coneInnerAngle:u,coneOuterAngle:l,coneOuterGain:h,distanceModel:r,maxDistance:o,orientationX:p,orientationY:a,orientationZ:v,panningModel:x,positionX:g,positionY:y,positionZ:T,refDistance:P,rolloffFactor:A,...b})=>{const O=S.createPanner();if(b.channelCount>2||b.channelCountMode==="max")throw m();ss(O,b);const D={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},B=c(S,{...D,channelInterpretation:"speakers",numberOfInputs:6}),G=M(S,{...b,gain:1}),V=M(S,{...D,gain:1}),k=M(S,{...D,gain:0}),U=M(S,{...D,gain:0}),W=M(S,{...D,gain:0}),X=M(S,{...D,gain:0}),_=M(S,{...D,gain:0}),Q=R(S,256,6,1),j=I(S,{...D,curve:new Float32Array([1,1]),oversample:"none"});let it=[p,a,v],K=[g,y,T];const J=new Float32Array(1);Q.onaudioprocess=({inputBuffer:et})=>{const rt=[i(et,J,0),i(et,J,1),i(et,J,2)];rt.some((lt,vt)=>lt!==it[vt])&&(O.setOrientation(...rt),it=rt);const at=[i(et,J,3),i(et,J,4),i(et,J,5)];at.some((lt,vt)=>lt!==K[vt])&&(O.setPosition(...at),K=at)},Object.defineProperty(k.gain,"defaultValue",{get:()=>0}),Object.defineProperty(U.gain,"defaultValue",{get:()=>0}),Object.defineProperty(W.gain,"defaultValue",{get:()=>0}),Object.defineProperty(X.gain,"defaultValue",{get:()=>0}),Object.defineProperty(_.gain,"defaultValue",{get:()=>0});const Y={get bufferSize(){},get channelCount(){return O.channelCount},set channelCount(et){if(et>2)throw m();G.channelCount=et,O.channelCount=et},get channelCountMode(){return O.channelCountMode},set channelCountMode(et){if(et==="max")throw m();G.channelCountMode=et,O.channelCountMode=et},get channelInterpretation(){return O.channelInterpretation},set channelInterpretation(et){G.channelInterpretation=et,O.channelInterpretation=et},get coneInnerAngle(){return O.coneInnerAngle},set coneInnerAngle(et){O.coneInnerAngle=et},get coneOuterAngle(){return O.coneOuterAngle},set coneOuterAngle(et){O.coneOuterAngle=et},get coneOuterGain(){return O.coneOuterGain},set coneOuterGain(et){if(et<0||et>1)throw n();O.coneOuterGain=et},get context(){return O.context},get distanceModel(){return O.distanceModel},set distanceModel(et){O.distanceModel=et},get inputs(){return[G]},get maxDistance(){return O.maxDistance},set maxDistance(et){if(et<0)throw new RangeError;O.maxDistance=et},get numberOfInputs(){return O.numberOfInputs},get numberOfOutputs(){return O.numberOfOutputs},get orientationX(){return V.gain},get orientationY(){return k.gain},get orientationZ(){return U.gain},get panningModel(){return O.panningModel},set panningModel(et){O.panningModel=et},get positionX(){return W.gain},get positionY(){return X.gain},get positionZ(){return _.gain},get refDistance(){return O.refDistance},set refDistance(et){if(et<0)throw new RangeError;O.refDistance=et},get rolloffFactor(){return O.rolloffFactor},set rolloffFactor(et){if(et<0)throw new RangeError;O.rolloffFactor=et},addEventListener(...et){return G.addEventListener(et[0],et[1],et[2])},dispatchEvent(...et){return G.dispatchEvent(et[0])},removeEventListener(...et){return G.removeEventListener(et[0],et[1],et[2])}};u!==Y.coneInnerAngle&&(Y.coneInnerAngle=u),l!==Y.coneOuterAngle&&(Y.coneOuterAngle=l),h!==Y.coneOuterGain&&(Y.coneOuterGain=h),r!==Y.distanceModel&&(Y.distanceModel=r),o!==Y.maxDistance&&(Y.maxDistance=o),p!==Y.orientationX.value&&(Y.orientationX.value=p),a!==Y.orientationY.value&&(Y.orientationY.value=a),v!==Y.orientationZ.value&&(Y.orientationZ.value=v),x!==Y.panningModel&&(Y.panningModel=x),g!==Y.positionX.value&&(Y.positionX.value=g),y!==Y.positionY.value&&(Y.positionY.value=y),T!==Y.positionZ.value&&(Y.positionZ.value=T),P!==Y.refDistance&&(Y.refDistance=P),A!==Y.rolloffFactor&&(Y.rolloffFactor=A),(it[0]!==1||it[1]!==0||it[2]!==0)&&O.setOrientation(...it),(K[0]!==0||K[1]!==0||K[2]!==0)&&O.setPosition(...K);const q=()=>{G.connect(O),L(G,j,0,0),j.connect(V).connect(B,0,0),j.connect(k).connect(B,0,1),j.connect(U).connect(B,0,2),j.connect(W).connect(B,0,3),j.connect(X).connect(B,0,4),j.connect(_).connect(B,0,5),B.connect(Q).connect(S.destination)},$=()=>{G.disconnect(O),E(G,j,0,0),j.disconnect(V),V.disconnect(B),j.disconnect(k),k.disconnect(B),j.disconnect(U),U.disconnect(B),j.disconnect(W),W.disconnect(B),j.disconnect(X),X.disconnect(B),j.disconnect(_),_.disconnect(B),B.disconnect(Q),Q.disconnect(S.destination)};return d(ku(Y,O),q,$)},Vut=L=>(n,{disableNormalization:c,imag:M,real:R})=>{const I=M instanceof Float32Array?M:new Float32Array(M),m=R instanceof Float32Array?R:new Float32Array(R),E=n.createPeriodicWave(m,I,{disableNormalization:c});if(Array.from(M).length<2)throw L();return E},ec=(L,n,c,M)=>L.createScriptProcessor(n,c,M),zut=(L,n)=>(c,M)=>{const R=M.channelCountMode;if(R==="clamped-max")throw n();if(c.createStereoPanner===void 0)return L(c,M);const I=c.createStereoPanner();return ss(I,M),Ii(I,M,"pan"),Object.defineProperty(I,"channelCountMode",{get:()=>R,set:m=>{if(m!==R)throw n()}}),I},Wut=(L,n,c,M,R,I)=>{const E=new Float32Array([1,1]),i=Math.PI/2,d={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},S={...d,oversample:"none"},u=(r,o,p,a)=>{const v=new Float32Array(16385),x=new Float32Array(16385);for(let b=0;b<16385;b+=1){const O=b/16384*i;v[b]=Math.cos(O),x[b]=Math.sin(O)}const g=c(r,{...d,gain:0}),y=M(r,{...S,curve:v}),T=M(r,{...S,curve:E}),P=c(r,{...d,gain:0}),A=M(r,{...S,curve:x});return{connectGraph(){o.connect(g),o.connect(T.inputs===void 0?T:T.inputs[0]),o.connect(P),T.connect(p),p.connect(y.inputs===void 0?y:y.inputs[0]),p.connect(A.inputs===void 0?A:A.inputs[0]),y.connect(g.gain),A.connect(P.gain),g.connect(a,0,0),P.connect(a,0,1)},disconnectGraph(){o.disconnect(g),o.disconnect(T.inputs===void 0?T:T.inputs[0]),o.disconnect(P),T.disconnect(p),p.disconnect(y.inputs===void 0?y:y.inputs[0]),p.disconnect(A.inputs===void 0?A:A.inputs[0]),y.disconnect(g.gain),A.disconnect(P.gain),g.disconnect(a,0,0),P.disconnect(a,0,1)}}},l=(r,o,p,a)=>{const v=new Float32Array(16385),x=new Float32Array(16385),g=new Float32Array(16385),y=new Float32Array(16385),T=Math.floor(16385/2);for(let W=0;W<16385;W+=1)if(W>T){const X=(W-T)/(16384-T)*i;v[W]=Math.cos(X),x[W]=Math.sin(X),g[W]=0,y[W]=1}else{const X=W/(16384-T)*i;v[W]=1,x[W]=0,g[W]=Math.cos(X),y[W]=Math.sin(X)}const P=n(r,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),A=c(r,{...d,gain:0}),b=M(r,{...S,curve:v}),O=c(r,{...d,gain:0}),D=M(r,{...S,curve:x}),B=M(r,{...S,curve:E}),G=c(r,{...d,gain:0}),V=M(r,{...S,curve:g}),k=c(r,{...d,gain:0}),U=M(r,{...S,curve:y});return{connectGraph(){o.connect(P),o.connect(B.inputs===void 0?B:B.inputs[0]),P.connect(A,0),P.connect(O,0),P.connect(G,1),P.connect(k,1),B.connect(p),p.connect(b.inputs===void 0?b:b.inputs[0]),p.connect(D.inputs===void 0?D:D.inputs[0]),p.connect(V.inputs===void 0?V:V.inputs[0]),p.connect(U.inputs===void 0?U:U.inputs[0]),b.connect(A.gain),D.connect(O.gain),V.connect(G.gain),U.connect(k.gain),A.connect(a,0,0),G.connect(a,0,0),O.connect(a,0,1),k.connect(a,0,1)},disconnectGraph(){o.disconnect(P),o.disconnect(B.inputs===void 0?B:B.inputs[0]),P.disconnect(A,0),P.disconnect(O,0),P.disconnect(G,1),P.disconnect(k,1),B.disconnect(p),p.disconnect(b.inputs===void 0?b:b.inputs[0]),p.disconnect(D.inputs===void 0?D:D.inputs[0]),p.disconnect(V.inputs===void 0?V:V.inputs[0]),p.disconnect(U.inputs===void 0?U:U.inputs[0]),b.disconnect(A.gain),D.disconnect(O.gain),V.disconnect(G.gain),U.disconnect(k.gain),A.disconnect(a,0,0),G.disconnect(a,0,0),O.disconnect(a,0,1),k.disconnect(a,0,1)}}},h=(r,o,p,a,v)=>{if(o===1)return u(r,p,a,v);if(o===2)return l(r,p,a,v);throw R()};return(r,{channelCount:o,channelCountMode:p,pan:a,...v})=>{if(p==="max")throw R();const x=L(r,{...v,channelCount:1,channelCountMode:p,numberOfInputs:2}),g=c(r,{...v,channelCount:o,channelCountMode:p,gain:1}),y=c(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:a});let{connectGraph:T,disconnectGraph:P}=h(r,o,g,y,x);Object.defineProperty(y.gain,"defaultValue",{get:()=>0}),Object.defineProperty(y.gain,"maxValue",{get:()=>1}),Object.defineProperty(y.gain,"minValue",{get:()=>-1});const A={get bufferSize(){},get channelCount(){return g.channelCount},set channelCount(B){g.channelCount!==B&&(b&&P(),{connectGraph:T,disconnectGraph:P}=h(r,B,g,y,x),b&&T()),g.channelCount=B},get channelCountMode(){return g.channelCountMode},set channelCountMode(B){if(B==="clamped-max"||B==="max")throw R();g.channelCountMode=B},get channelInterpretation(){return g.channelInterpretation},set channelInterpretation(B){g.channelInterpretation=B},get context(){return g.context},get inputs(){return[g]},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get pan(){return y.gain},addEventListener(...B){return g.addEventListener(B[0],B[1],B[2])},dispatchEvent(...B){return g.dispatchEvent(B[0])},removeEventListener(...B){return g.removeEventListener(B[0],B[1],B[2])}};let b=!1;const O=()=>{T(),b=!0},D=()=>{P(),b=!1};return I(ku(A,x),O,D)}},Xut=(L,n,c,M,R,I,m)=>(E,i)=>{const d=E.createWaveShaper();if(I!==null&&I.name==="webkitAudioContext"&&E.createGain().gain.automationRate===void 0)return c(E,i);ss(d,i);const S=i.curve===null||i.curve instanceof Float32Array?i.curve:new Float32Array(i.curve);if(S!==null&&S.length<2)throw n();Ci(d,{curve:S},"curve"),Ci(d,i,"oversample");let u=null,l=!1;return m(d,"curve",o=>()=>o.call(d),o=>p=>(o.call(d,p),l&&(M(p)&&u===null?u=L(E,d):!M(p)&&u!==null&&(u(),u=null)),p)),R(d,()=>{l=!0,M(d.curve)&&(u=L(E,d))},()=>{l=!1,u!==null&&(u(),u=null)})},Hut=(L,n,c,M,R)=>(I,{curve:m,oversample:E,...i})=>{const d=I.createWaveShaper(),S=I.createWaveShaper();ss(d,i),ss(S,i);const u=c(I,{...i,gain:1}),l=c(I,{...i,gain:-1}),h=c(I,{...i,gain:1}),r=c(I,{...i,gain:-1});let o=null,p=!1,a=null;const v={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(y){u.channelCount=y,l.channelCount=y,d.channelCount=y,h.channelCount=y,S.channelCount=y,r.channelCount=y},get channelCountMode(){return d.channelCountMode},set channelCountMode(y){u.channelCountMode=y,l.channelCountMode=y,d.channelCountMode=y,h.channelCountMode=y,S.channelCountMode=y,r.channelCountMode=y},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(y){u.channelInterpretation=y,l.channelInterpretation=y,d.channelInterpretation=y,h.channelInterpretation=y,S.channelInterpretation=y,r.channelInterpretation=y},get context(){return d.context},get curve(){return a},set curve(y){if(y!==null&&y.length<2)throw n();if(y===null)d.curve=y,S.curve=y;else{const T=y.length,P=new Float32Array(T+2-T%2),A=new Float32Array(T+2-T%2);P[0]=y[0],A[0]=-y[T-1];const b=Math.ceil((T+1)/2),O=(T+1)/2-1;for(let D=1;D<b;D+=1){const B=D/b*O,G=Math.floor(B),V=Math.ceil(B);P[D]=G===V?y[G]:(1-(B-G))*y[G]+(1-(V-B))*y[V],A[D]=G===V?-y[T-1-G]:-((1-(B-G))*y[T-1-G])-(1-(V-B))*y[T-1-V]}P[b]=T%2===1?y[b-1]:(y[b-2]+y[b-1])/2,d.curve=P,S.curve=A}a=y,p&&(M(a)&&o===null?o=L(I,u):o!==null&&(o(),o=null))},get inputs(){return[u]},get numberOfInputs(){return d.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get oversample(){return d.oversample},set oversample(y){d.oversample=y,S.oversample=y},addEventListener(...y){return u.addEventListener(y[0],y[1],y[2])},dispatchEvent(...y){return u.dispatchEvent(y[0])},removeEventListener(...y){return u.removeEventListener(y[0],y[1],y[2])}};m!==null&&(v.curve=m instanceof Float32Array?m:new Float32Array(m)),E!==v.oversample&&(v.oversample=E);const x=()=>{u.connect(d).connect(h),u.connect(l).connect(S).connect(r).connect(h),p=!0,M(a)&&(o=L(I,u))},g=()=>{u.disconnect(d),d.disconnect(h),u.disconnect(l),l.disconnect(S),S.disconnect(r),r.disconnect(h),p=!1,o!==null&&(o(),o=null)};return R(ku(v,h),x,g)},_s=()=>new DOMException("","NotSupportedError"),Yut={numberOfChannels:1},$ut=(L,n,c,M,R)=>class extends L{constructor(m,E,i){let d;if(typeof m=="number"&&E!==void 0&&i!==void 0)d={length:E,numberOfChannels:m,sampleRate:i};else if(typeof m=="object")d=m;else throw new Error("The given parameters are not valid.");const{length:S,numberOfChannels:u,sampleRate:l}={...Yut,...d},h=M(u,S,l);n(zf,()=>zf(h))||h.addEventListener("statechange",(()=>{let r=0;const o=p=>{this._state==="running"&&(r>0?(h.removeEventListener("statechange",o),p.stopImmediatePropagation(),this._waitForThePromiseToSettle(p)):r+=1)};return o})()),super(h,u),this._length=S,this._nativeOfflineAudioContext=h,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(c()):(this._state="running",R(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,fF(this)}))}_waitForThePromiseToSettle(m){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(m):setTimeout(()=>this._waitForThePromiseToSettle(m))}},_ut={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Zut=(L,n,c,M,R,I,m)=>class extends L{constructor(i,d){const S=R(i),u={..._ut,...d},l=c(S,u),h=I(S),r=h?M():null,o=i.sampleRate/2;super(i,!1,l,r),this._detune=n(this,h,l.detune,153600,-153600),this._frequency=n(this,h,l.frequency,o,-o),this._nativeOscillatorNode=l,this._onended=null,this._oscillatorNodeRenderer=r,this._oscillatorNodeRenderer!==null&&u.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=u.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(i){const d=typeof i=="function"?m(this,i):null;this._nativeOscillatorNode.onended=d;const S=this._nativeOscillatorNode.onended;this._onended=S!==null&&S===d?i:S}get type(){return this._nativeOscillatorNode.type}set type(i){this._nativeOscillatorNode.type=i,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(i){this._nativeOscillatorNode.setPeriodicWave(i),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=i)}start(i=0){if(this._nativeOscillatorNode.start(i),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=i),this.context.state!=="closed"){wu(this);const d=()=>{this._nativeOscillatorNode.removeEventListener("ended",d),Da(this)&&Qf(this)};this._nativeOscillatorNode.addEventListener("ended",d)}}stop(i=0){this._nativeOscillatorNode.stop(i),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=i)}},Kut=(L,n,c,M,R)=>()=>{const I=new WeakMap;let m=null,E=null,i=null;const d=async(S,u)=>{let l=c(S);const h=Os(l,u);if(!h){const r={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,periodicWave:m===null?void 0:m,type:l.type};l=n(u,r),E!==null&&l.start(E),i!==null&&l.stop(i)}return I.set(u,l),h?(await L(u,S.detune,l.detune),await L(u,S.frequency,l.frequency)):(await M(u,S.detune,l.detune),await M(u,S.frequency,l.frequency)),await R(S,u,l),l};return{set periodicWave(S){m=S},set start(S){E=S},set stop(S){i=S},render(S,u){const l=I.get(u);return l!==void 0?Promise.resolve(l):d(S,u)}}},Jut={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Qut=(L,n,c,M,R,I,m)=>class extends L{constructor(i,d){const S=R(i),u={...Jut,...d},l=c(S,u),h=I(S),r=h?M():null;super(i,!1,l,r),this._nativePannerNode=l,this._orientationX=n(this,h,l.orientationX,Ws,en),this._orientationY=n(this,h,l.orientationY,Ws,en),this._orientationZ=n(this,h,l.orientationZ,Ws,en),this._positionX=n(this,h,l.positionX,Ws,en),this._positionY=n(this,h,l.positionY,Ws,en),this._positionZ=n(this,h,l.positionZ,Ws,en),m(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(i){this._nativePannerNode.coneInnerAngle=i}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(i){this._nativePannerNode.coneOuterAngle=i}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(i){this._nativePannerNode.coneOuterGain=i}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(i){this._nativePannerNode.distanceModel=i}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(i){this._nativePannerNode.maxDistance=i}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(i){this._nativePannerNode.panningModel=i}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(i){this._nativePannerNode.refDistance=i}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(i){this._nativePannerNode.rolloffFactor=i}},jut=(L,n,c,M,R,I,m,E,i,d)=>()=>{const S=new WeakMap;let u=null;const l=async(h,r)=>{let o=null,p=I(h);const a={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation},v={...a,coneInnerAngle:p.coneInnerAngle,coneOuterAngle:p.coneOuterAngle,coneOuterGain:p.coneOuterGain,distanceModel:p.distanceModel,maxDistance:p.maxDistance,panningModel:p.panningModel,refDistance:p.refDistance,rolloffFactor:p.rolloffFactor},x=Os(p,r);if("bufferSize"in p)o=M(r,{...a,gain:1});else if(!x){const g={...v,orientationX:p.orientationX.value,orientationY:p.orientationY.value,orientationZ:p.orientationZ.value,positionX:p.positionX.value,positionY:p.positionY.value,positionZ:p.positionZ.value};p=R(r,g)}if(S.set(r,o===null?p:o),o!==null){if(u===null){if(m===null)throw new Error("Missing the native OfflineAudioContext constructor.");const D=new m(6,h.context.length,r.sampleRate),B=n(D,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});B.connect(D.destination),u=(async()=>{const G=await Promise.all([h.orientationX,h.orientationY,h.orientationZ,h.positionX,h.positionY,h.positionZ].map(async(V,k)=>{const U=c(D,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:k===0?1:0});return await E(D,V,U.offset),U}));for(let V=0;V<6;V+=1)G[V].connect(B,0,V),G[V].start(0);return d(D)})()}const g=await u,y=M(r,{...a,gain:1});await i(h,r,y);const T=[];for(let D=0;D<g.numberOfChannels;D+=1)T.push(g.getChannelData(D));let P=[T[0][0],T[1][0],T[2][0]],A=[T[3][0],T[4][0],T[5][0]],b=M(r,{...a,gain:1}),O=R(r,{...v,orientationX:P[0],orientationY:P[1],orientationZ:P[2],positionX:A[0],positionY:A[1],positionZ:A[2]});y.connect(b).connect(O.inputs[0]),O.connect(o);for(let D=128;D<g.length;D+=128){const B=[T[0][D],T[1][D],T[2][D]],G=[T[3][D],T[4][D],T[5][D]];if(B.some((V,k)=>V!==P[k])||G.some((V,k)=>V!==A[k])){P=B,A=G;const V=D/r.sampleRate;b.gain.setValueAtTime(0,V),b=M(r,{...a,gain:0}),O=R(r,{...v,orientationX:P[0],orientationY:P[1],orientationZ:P[2],positionX:A[0],positionY:A[1],positionZ:A[2]}),b.gain.setValueAtTime(1,V),y.connect(b).connect(O.inputs[0]),O.connect(o)}}return o}return x?(await L(r,h.orientationX,p.orientationX),await L(r,h.orientationY,p.orientationY),await L(r,h.orientationZ,p.orientationZ),await L(r,h.positionX,p.positionX),await L(r,h.positionY,p.positionY),await L(r,h.positionZ,p.positionZ)):(await E(r,h.orientationX,p.orientationX),await E(r,h.orientationY,p.orientationY),await E(r,h.orientationZ,p.orientationZ),await E(r,h.positionX,p.positionX),await E(r,h.positionY,p.positionY),await E(r,h.positionZ,p.positionZ)),Uu(p)?await i(h,r,p.inputs[0]):await i(h,r,p),p};return{render(h,r){const o=S.get(r);return o!==void 0?Promise.resolve(o):l(h,r)}}},qut={disableNormalization:!1},tdt=(L,n,c,M)=>class CF{constructor(I,m){const E=n(I),i=M({...qut,...m}),d=L(E,i);return c.add(d),d}static[Symbol.hasInstance](I){return I!==null&&typeof I=="object"&&Object.getPrototypeOf(I)===CF.prototype||c.has(I)}},edt=(L,n)=>(c,M,R)=>(L(M).replay(R),n(M,c,R)),idt=(L,n,c)=>async(M,R,I)=>{const m=L(M);await Promise.all(m.activeInputs.map((E,i)=>Array.from(E).map(async([d,S])=>{const l=await n(d).render(d,R),h=M.context.destination;!c(d)&&(M!==h||!c(M))&&l.connect(I,S,i)})).reduce((E,i)=>[...E,...i],[]))},sdt=(L,n,c)=>async(M,R,I)=>{const m=n(M);await Promise.all(Array.from(m.activeInputs).map(async([E,i])=>{const S=await L(E).render(E,R);c(E)||S.connect(I,i)}))},ndt=(L,n,c,M)=>R=>L(zf,()=>zf(R))?Promise.resolve(L(M,M)).then(I=>{if(!I){const m=c(R,512,0,1);R.oncomplete=()=>{m.onaudioprocess=null,m.disconnect()},m.onaudioprocess=()=>R.currentTime,m.connect(R.destination)}return R.startRendering()}):new Promise(I=>{const m=n(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});R.oncomplete=E=>{m.disconnect(),I(E.renderedBuffer)},m.connect(R.destination),R.startRendering()}),rdt=L=>(n,c)=>{L.set(n,c)},adt=L=>(n,c)=>L.set(n,c),odt=(L,n,c,M,R,I,m,E)=>(i,d)=>c(i).render(i,d).then(()=>Promise.all(Array.from(M(d)).map(S=>c(S).render(S,d)))).then(()=>R(d)).then(S=>(typeof S.copyFromChannel!="function"?(m(S),CC(S)):n(I,()=>I(S))||E(S),L.add(S),S)),hdt={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},ldt=(L,n,c,M,R,I)=>class extends L{constructor(E,i){const d=R(E),S={...hdt,...i},u=c(d,S),l=I(d),h=l?M():null;super(E,!1,u,h),this._pan=n(this,l,u.pan)}get pan(){return this._pan}},udt=(L,n,c,M,R)=>()=>{const I=new WeakMap,m=async(E,i)=>{let d=c(E);const S=Os(d,i);if(!S){const u={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,pan:d.pan.value};d=n(i,u)}return I.set(i,d),S?await L(i,E.pan,d.pan):await M(i,E.pan,d.pan),Uu(d)?await R(E,i,d.inputs[0]):await R(E,i,d),d};return{render(E,i){const d=I.get(i);return d!==void 0?Promise.resolve(d):m(E,i)}}},ddt=L=>()=>{if(L===null)return!1;try{new L({length:1,sampleRate:44100})}catch{return!1}return!0},fdt=(L,n)=>async()=>{if(L===null)return!0;if(n===null)return!1;const c=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),M=new n(1,128,44100),R=URL.createObjectURL(c);let I=!1,m=!1;try{await M.audioWorklet.addModule(R);const E=new L(M,"a",{numberOfOutputs:0}),i=M.createOscillator();E.port.onmessage=()=>I=!0,E.onprocessorerror=()=>m=!0,i.connect(E),i.start(0),await M.startRendering(),await new Promise(d=>setTimeout(d))}catch{}finally{URL.revokeObjectURL(R)}return I&&!m},cdt=(L,n)=>()=>{if(n===null)return Promise.resolve(!1);const c=new n(1,1,44100),M=L(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(R=>{c.oncomplete=()=>{M.disconnect(),R(c.currentTime!==0)},c.startRendering()})},pdt=()=>new DOMException("","UnknownError"),vdt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},mdt=(L,n,c,M,R,I,m)=>class extends L{constructor(i,d){const S=R(i),u={...vdt,...d},l=c(S,u),r=I(S)?M():null;super(i,!0,l,r),this._isCurveNullified=!1,this._nativeWaveShaperNode=l,m(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(i){if(i===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(i.length<2)throw n();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=i}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(i){this._nativeWaveShaperNode.oversample=i}},gdt=(L,n,c)=>()=>{const M=new WeakMap,R=async(I,m)=>{let E=n(I);if(!Os(E,m)){const d={channelCount:E.channelCount,channelCountMode:E.channelCountMode,channelInterpretation:E.channelInterpretation,curve:E.curve,oversample:E.oversample};E=L(m,d)}return M.set(m,E),Uu(E)?await c(I,m,E.inputs[0]):await c(I,m,E),E};return{render(I,m){const E=M.get(m);return E!==void 0?Promise.resolve(E):R(I,m)}}},xdt=()=>typeof window>"u"?null:window,ydt=(L,n)=>c=>{c.copyFromChannel=(M,R,I=0)=>{const m=L(I),E=L(R);if(E>=c.numberOfChannels)throw n();const i=c.length,d=c.getChannelData(E),S=M.length;for(let u=m<0?-m:0;u+m<i&&u<S;u+=1)M[u]=d[u+m]},c.copyToChannel=(M,R,I=0)=>{const m=L(I),E=L(R);if(E>=c.numberOfChannels)throw n();const i=c.length,d=c.getChannelData(E),S=M.length;for(let u=m<0?-m:0;u+m<i&&u<S;u+=1)d[u+m]=M[u]}},Sdt=L=>n=>{n.copyFromChannel=(c=>(M,R,I=0)=>{const m=L(I),E=L(R);if(m<n.length)return c.call(n,M,E,m)})(n.copyFromChannel),n.copyToChannel=(c=>(M,R,I=0)=>{const m=L(I),E=L(R);if(m<n.length)return c.call(n,M,E,m)})(n.copyToChannel)},Tdt=L=>(n,c)=>{const M=c.createBuffer(1,1,44100);n.buffer===null&&(n.buffer=M),L(n,"buffer",R=>()=>{const I=R.call(n);return I===M?null:I},R=>I=>R.call(n,I===null?M:I))},Cdt=(L,n)=>(c,M)=>{M.channelCount=1,M.channelCountMode="explicit",Object.defineProperty(M,"channelCount",{get:()=>1,set:()=>{throw L()}}),Object.defineProperty(M,"channelCountMode",{get:()=>"explicit",set:()=>{throw L()}});const R=c.createBufferSource();n(M,()=>{const E=M.numberOfInputs;for(let i=0;i<E;i+=1)R.connect(M,0,i)},()=>R.disconnect(M))},MF=(L,n,c)=>L.copyFromChannel===void 0?L.getChannelData(c)[0]:(L.copyFromChannel(n,c),n[0]),EF=L=>{if(L===null)return!1;const n=L.length;return n%2!==0?L[Math.floor(n/2)]!==0:L[n/2-1]+L[n/2]!==0},ic=(L,n,c,M)=>{let R=L;for(;!R.hasOwnProperty(n);)R=Object.getPrototypeOf(R);const{get:I,set:m}=Object.getOwnPropertyDescriptor(R,n);Object.defineProperty(L,n,{get:c(I),set:M(m)})},Mdt=L=>({...L,outputChannelCount:L.outputChannelCount!==void 0?L.outputChannelCount:L.numberOfInputs===1&&L.numberOfOutputs===1?[L.channelCount]:Array.from({length:L.numberOfOutputs},()=>1)}),Edt=L=>({...L,channelCount:L.numberOfOutputs}),Pdt=L=>{const{imag:n,real:c}=L;return n===void 0?c===void 0?{...L,imag:[0,0],real:[0,0]}:{...L,imag:Array.from(c,()=>0),real:c}:c===void 0?{...L,imag:n,real:Array.from(n,()=>0)}:{...L,imag:n,real:c}},PF=(L,n,c)=>{try{L.setValueAtTime(n,c)}catch(M){if(M.code!==9)throw M;PF(L,n,c+1e-7)}},wdt=L=>{const n=L.createBufferSource();n.start();try{n.start()}catch{return!0}return!1},bdt=L=>{const n=L.createBufferSource(),c=L.createBuffer(1,1,44100);n.buffer=c;try{n.start(0,1)}catch{return!1}return!0},Adt=L=>{const n=L.createBufferSource();n.start();try{n.stop()}catch{return!1}return!0},bC=L=>{const n=L.createOscillator();try{n.start(-1)}catch(c){return c instanceof RangeError}return!1},wF=L=>{const n=L.createBuffer(1,1,44100),c=L.createBufferSource();c.buffer=n,c.start(),c.stop();try{return c.stop(),!0}catch{return!1}},AC=L=>{const n=L.createOscillator();try{n.stop(-1)}catch(c){return c instanceof RangeError}return!1},Rdt=L=>{const{port1:n,port2:c}=new MessageChannel;try{n.postMessage(L)}finally{n.close(),c.close()}},Ldt=L=>{L.start=(n=>(c=0,M=0,R)=>{const I=L.buffer,m=I===null?M:Math.min(I.duration,M);I!==null&&m>I.duration-.5/L.context.sampleRate?n.call(L,c,0,0):n.call(L,c,m,R)})(L.start)},bF=(L,n)=>{const c=n.createGain();L.connect(c);const M=(R=>()=>{R.call(L,c),L.removeEventListener("ended",M)})(L.disconnect);L.addEventListener("ended",M),ku(L,c),L.stop=(R=>{let I=!1;return(m=0)=>{if(I)try{R.call(L,m)}catch{c.gain.setValueAtTime(0,m)}else R.call(L,m),I=!0}})(L.stop)},Vu=(L,n)=>c=>{const M={value:L};return Object.defineProperties(c,{currentTarget:M,target:M}),typeof n=="function"?n.call(L,c):n.handleEvent.call(L,c)},Odt=Qot(Zh),Fdt=sht(Zh),Ddt=vlt(ng),AF=new WeakMap,Idt=Dlt(AF),xr=Yht(new Map,new WeakMap),Kr=xdt(),RF=lut(xr,Jr),RC=Flt(Hs),Ss=idt(Hs,RC,Hh),Bdt=hht(RF,gi,Ss),pi=Nlt(sg),Ga=Nut(Kr),ri=qlt(Ga),LF=new WeakMap,OF=Plt(Vu),sc=cut(Kr),LC=Klt(sc),OC=Jlt(Kr),FF=Qlt(Kr),Wf=vut(Kr),zi=Dht(jot(rF),iht(Odt,Fdt,Wm,Ddt,Xm,Hs,Idt,Jf,gi,Zh,Da,Hh,Rm),xr,Hlt(YT,Xm,Hs,gi,Vf,Da),Jr,rg,_s,dlt(Wm,YT,Hs,gi,Vf,pi,Da,ri),xlt(LF,Hs,gr),OF,pi,LC,OC,FF,ri,Wf),Ndt=oht(zi,Bdt,Jr,RF,pi,ri),FC=new WeakSet,JL=uut(Kr),DF=nlt(new Uint32Array(1)),DC=ydt(DF,Jr),IC=Sdt(DF),IF=uht(FC,xr,_s,JL,Ga,ddt(JL),DC,IC),ag=nht(an),BF=sdt(RC,jf,Hh),Qr=jht(BF),zu=fut(ag,xr,wdt,bdt,Adt,bC,wF,AC,Ldt,Tdt(ic),bF),jr=edt(Ilt(jf),BF),Gdt=cht(Qr,zu,gi,jr,Ss),yr=Iht(qot(aF),LF,TC,Bht,Yot,$ot,_ot,Zot,Kot,WT,sF,sc,PF),Udt=fht(zi,Gdt,yr,ls,zu,pi,ri,Vu),kdt=Cht(zi,Mht,Jr,ls,put(an,ic),pi,ri,Ss),Vdt=Hht(Qr,SF,gi,jr,Ss),Kh=adt(AF),zdt=Xht(zi,yr,Vdt,rg,SF,pi,ri,Kh),Bo=out(Zh,OC),Wdt=Cdt(ls,Bo),No=Cut(sc,Wdt),Xdt=Zht(No,gi,Ss),Hdt=_ht(zi,Xdt,No,pi,ri),Ydt=Qht(tc,gi,Ss),$dt=Jht(zi,Ydt,tc,pi,ri,Edt),_dt=Put(ag,zu,an,Bo),Wu=Eut(ag,xr,_dt,bC,AC),Zdt=slt(Qr,Wu,gi,jr,Ss),Kdt=ilt(zi,yr,Zdt,Wu,pi,ri,Vu),NF=wut(_s,ic),Jdt=olt(NF,gi,Ss),Qdt=alt(zi,Jdt,NF,pi,ri,Kh),jdt=plt(Qr,TF,gi,jr,Ss),qdt=clt(zi,yr,jdt,TF,pi,ri,Kh),GF=but(_s),tft=Clt(Qr,GF,gi,jr,Ss),eft=Tlt(zi,yr,tft,GF,_s,pi,ri,Kh),ift=Llt(Qr,an,gi,jr,Ss),sft=Rlt(zi,yr,ift,an,pi,ri),nft=Out(rg,ls,ec,_s),og=ndt(xr,an,ec,cdt(an,Ga)),rft=Xlt(zu,gi,Ga,Ss,og),aft=Aut(nft),oft=zlt(zi,aft,rft,pi,ri,Kh),hft=Eht(yr,No,Wu,ec,_s,MF,ri,ic),UF=new WeakMap,lft=aut(kdt,hft,OF,ri,UF,Vu),kF=Gut(ag,xr,bC,wF,AC,bF),uft=Kut(Qr,kF,gi,jr,Ss),dft=Zut(zi,yr,kF,uft,pi,ri,Vu),VF=tlt(zu),fft=Hut(VF,ls,an,EF,Bo),hg=Xut(VF,ls,fft,EF,Bo,sc,ic),cft=kut(Wm,ls,No,an,ec,hg,_s,Xm,MF,Bo),zF=Uut(cft),pft=jut(Qr,No,Wu,an,zF,gi,Ga,jr,Ss,og),vft=Qut(zi,yr,zF,pft,pi,ri,Kh),mft=Vut(Jr),gft=tdt(mft,pi,new WeakSet,Pdt),xft=Wut(No,tc,an,hg,_s,Bo),WF=zut(xft,_s),yft=udt(Qr,WF,gi,jr,Ss),Sft=ldt(zi,yr,WF,yft,pi,ri),Tft=gdt(hg,gi,Ss),Cft=mdt(zi,ls,hg,Tft,pi,ri,Kh),XF=tut(Kr),BC=wlt(Kr),HF=new WeakMap,Mft=Glt(HF,Ga),Eft=XF?eht(xr,_s,Elt(Kr),BC,blt(Jot),pi,Mft,ri,Wf,new WeakMap,new WeakMap,fdt(Wf,Ga),Kr):void 0,Pft=jlt(LC,ri),wft=ult(FC,xr,llt,Mlt,new WeakSet,pi,Pft,Vm,zf,DC,IC),YF=zht(Eft,Ndt,IF,Udt,zdt,Hdt,$dt,Kdt,Qdt,wft,qdt,eft,sft,oft,lft,dft,vft,gft,Sft,Cft),bft=eut(zi,Fut,pi,ri),Aft=sut(zi,Dut,pi,ri),Rft=nut(zi,Iut,pi,ri),Lft=But(ls,ri),Oft=rut(zi,Lft,pi),Fft=Tht(YF,ls,_s,pdt,bft,Aft,Rft,Oft,sc),NC=Ult(UF),Dft=rht(NC),$F=qht(Jr),Ift=mlt(NC),_F=ylt(Jr),ZF=new WeakMap,Bft=Olt(ZF,gr),Nft=Tut($F,Jr,ls,No,tc,Wu,an,ec,_s,_F,BC,Bft,Bo),Gft=gut(ls,Nft,an,_s,Bo),Uft=Vht(Qr,$F,zu,No,tc,Wu,an,Ift,_F,BC,gi,Wf,Ga,jr,Ss,og),kft=Blt(HF),Vft=rdt(ZF),QL=XF?Ght(Dft,zi,yr,Uft,Gft,Hs,kft,pi,ri,Wf,Mdt,Vft,Rdt,Vu):void 0,zft=hlt(_s,Ga),Wft=odt(FC,xr,RC,NC,og,Vm,DC,IC),Xft=$ut(YF,xr,ls,zft,Wft),Hft=Ylt(sg,LC),Yft=$lt(SC,OC),$ft=_lt(TC,FF),_ft=Zlt(sg,ri);function Wn(L){return L===void 0}function ke(L){return L!==void 0}function Zft(L){return typeof L=="function"}function Yh(L){return typeof L=="number"}function Wh(L){return Object.prototype.toString.call(L)==="[object Object]"&&L.constructor===Object}function Kft(L){return typeof L=="boolean"}function mr(L){return Array.isArray(L)}function Na(L){return typeof L=="string"}function xm(L){return Na(L)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(L)}function Ie(L,n){if(!L)throw new Error(n)}function Fo(L,n,c=1/0){if(!(n<=L&&L<=c))throw new RangeError(`Value must be within [${n}, ${c}], got: ${L}`)}function KF(L){!L.isOffline&&L.state!=="running"&&GC('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let JF=!1,jL=!1;function qL(L){JF=L}function Jft(L){Wn(L)&&JF&&!jL&&(jL=!0,GC("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let QF=console;function Qft(...L){QF.log(...L)}function GC(...L){QF.warn(...L)}function jft(L){return new Fft(L)}function qft(L,n,c){return new Xft(L,n,c)}const Sn=typeof self=="object"?self:null,tct=Sn&&(Sn.hasOwnProperty("AudioContext")||Sn.hasOwnProperty("webkitAudioContext"));function ect(L,n,c){return Ie(ke(QL),"AudioWorkletNode only works in a secure context (https or localhost)"),new(L instanceof(Sn==null?void 0:Sn.BaseAudioContext)?Sn==null?void 0:Sn.AudioWorkletNode:QL)(L,n,c)}function Sr(L,n,c,M){var R=arguments.length,I=R<3?n:M===null?M=Object.getOwnPropertyDescriptor(n,c):M,m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(L,n,c,M);else for(var E=L.length-1;E>=0;E--)(m=L[E])&&(I=(R<3?m(I):R>3?m(n,c,I):m(n,c))||I);return R>3&&I&&Object.defineProperty(n,c,I),I}function Ki(L,n,c,M){function R(I){return I instanceof c?I:new c(function(m){m(I)})}return new(c||(c=Promise))(function(I,m){function E(S){try{d(M.next(S))}catch(u){m(u)}}function i(S){try{d(M.throw(S))}catch(u){m(u)}}function d(S){S.done?I(S.value):R(S.value).then(E,i)}d((M=M.apply(L,n||[])).next())})}class ict{constructor(n,c,M,R){this._callback=n,this._type=c,this._minimumUpdateInterval=Math.max(128/(R||44100),.001),this.updateInterval=M,this._createClock()}_createWorker(){const n=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),c=URL.createObjectURL(n),M=new Worker(c);M.onmessage=this._callback.bind(this),this._worker=M}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(n){var c;this._updateInterval=Math.max(n,this._minimumUpdateInterval),this._type==="worker"&&((c=this._worker)===null||c===void 0||c.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(n){this._disposeClock(),this._type=n,this._createClock()}dispose(){this._disposeClock()}}function $h(L){return $ft(L)}function Lo(L){return Yft(L)}function Lm(L){return _ft(L)}function ou(L){return Hft(L)}function sct(L){return L instanceof IF}function nct(L,n){return L==="value"||$h(n)||Lo(n)||sct(n)}function xu(L,...n){if(!n.length)return L;const c=n.shift();if(Wh(L)&&Wh(c))for(const M in c)nct(M,c[M])?L[M]=c[M]:Wh(c[M])?(L[M]||Object.assign(L,{[M]:{}}),xu(L[M],c[M])):Object.assign(L,{[M]:c[M]});return xu(L,...n)}function rct(L,n){return L.length===n.length&&L.every((c,M)=>n[M]===c)}function Fe(L,n,c=[],M){const R={},I=Array.from(n);if(Wh(I[0])&&M&&!Reflect.has(I[0],M)&&(Object.keys(I[0]).some(E=>Reflect.has(L,E))||(xu(R,{[M]:I[0]}),c.splice(c.indexOf(M),1),I.shift())),I.length===1&&Wh(I[0]))xu(R,I[0]);else for(let m=0;m<c.length;m++)ke(I[m])&&(R[c[m]]=I[m]);return xu(L,R)}function act(L){return L.constructor.getDefaults()}function yu(L,n){return Wn(L)?n:L}function tO(L,n){return n.forEach(c=>{Reflect.has(L,c)&&delete L[c]}),L}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class Ua{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...n){(this.debug||Sn&&this.toString()===Sn.TONE_DEBUG_CLASS)&&Qft(this,...n)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Ua.version=iF;const UC=1e-6;function bu(L,n){return L>n+UC}function JT(L,n){return bu(L,n)||cr(L,n)}function _m(L,n){return L+UC<n}function cr(L,n){return Math.abs(L-n)<UC}function oct(L,n,c){return Math.max(Math.min(L,c),n)}class Xn extends Ua{constructor(){super(),this.name="Timeline",this._timeline=[];const n=Fe(Xn.getDefaults(),arguments,["memory"]);this.memory=n.memory,this.increasing=n.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(n){if(Ie(Reflect.has(n,"time"),"Timeline: events must have a time attribute"),n.time=n.time.valueOf(),this.increasing&&this.length){const c=this._timeline[this.length-1];Ie(JT(n.time,c.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(n)}else{const c=this._search(n.time);this._timeline.splice(c+1,0,n)}if(this.length>this.memory){const c=this.length-this.memory;this._timeline.splice(0,c)}return this}remove(n){const c=this._timeline.indexOf(n);return c!==-1&&this._timeline.splice(c,1),this}get(n,c="time"){const M=this._search(n,c);return M!==-1?this._timeline[M]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(n,c="time"){const M=this._search(n,c);return M+1<this._timeline.length?this._timeline[M+1]:null}getBefore(n){const c=this._timeline.length;if(c>0&&this._timeline[c-1].time<n)return this._timeline[c-1];const M=this._search(n);return M-1>=0?this._timeline[M-1]:null}cancel(n){if(this._timeline.length>1){let c=this._search(n);if(c>=0)if(cr(this._timeline[c].time,n)){for(let M=c;M>=0&&cr(this._timeline[M].time,n);M--)c=M;this._timeline=this._timeline.slice(0,c)}else this._timeline=this._timeline.slice(0,c+1);else this._timeline=[]}else this._timeline.length===1&&JT(this._timeline[0].time,n)&&(this._timeline=[]);return this}cancelBefore(n){const c=this._search(n);return c>=0&&(this._timeline=this._timeline.slice(c+1)),this}previousEvent(n){const c=this._timeline.indexOf(n);return c>0?this._timeline[c-1]:null}_search(n,c="time"){if(this._timeline.length===0)return-1;let M=0;const R=this._timeline.length;let I=R;if(R>0&&this._timeline[R-1][c]<=n)return R-1;for(;M<I;){let m=Math.floor(M+(I-M)/2);const E=this._timeline[m],i=this._timeline[m+1];if(cr(E[c],n)){for(let d=m;d<this._timeline.length;d++){const S=this._timeline[d];if(cr(S[c],n))m=d;else break}return m}else{if(_m(E[c],n)&&bu(i[c],n))return m;bu(E[c],n)?I=m:M=m+1}}return-1}_iterate(n,c=0,M=this._timeline.length-1){this._timeline.slice(c,M+1).forEach(n)}forEach(n){return this._iterate(n),this}forEachBefore(n,c){const M=this._search(n);return M!==-1&&this._iterate(c,0,M),this}forEachAfter(n,c){const M=this._search(n);return this._iterate(c,M+1),this}forEachBetween(n,c,M){let R=this._search(n),I=this._search(c);return R!==-1&&I!==-1?(this._timeline[R].time!==n&&(R+=1),this._timeline[I].time===c&&(I-=1),this._iterate(M,R,I)):R===-1&&this._iterate(M,0,I),this}forEachFrom(n,c){let M=this._search(n);for(;M>=0&&this._timeline[M].time>=n;)M--;return this._iterate(c,M+1),this}forEachAtTime(n,c){const M=this._search(n);if(M!==-1&&cr(this._timeline[M].time,n)){let R=M;for(let I=M;I>=0&&cr(this._timeline[I].time,n);I--)R=I;this._iterate(I=>{c(I)},R,M)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const jF=[];function lg(L){jF.push(L)}function hct(L){jF.forEach(n=>n(L))}const qF=[];function ug(L){qF.push(L)}function lct(L){qF.forEach(n=>n(L))}class nc extends Ua{constructor(){super(...arguments),this.name="Emitter"}on(n,c){return n.split(/\W+/).forEach(R=>{Wn(this._events)&&(this._events={}),this._events.hasOwnProperty(R)||(this._events[R]=[]),this._events[R].push(c)}),this}once(n,c){const M=(...R)=>{c(...R),this.off(n,M)};return this.on(n,M),this}off(n,c){return n.split(/\W+/).forEach(R=>{if(Wn(this._events)&&(this._events={}),this._events.hasOwnProperty(R))if(Wn(c))this._events[R]=[];else{const I=this._events[R];for(let m=I.length-1;m>=0;m--)I[m]===c&&I.splice(m,1)}}),this}emit(n,...c){if(this._events&&this._events.hasOwnProperty(n)){const M=this._events[n].slice(0);for(let R=0,I=M.length;R<I;R++)M[R].apply(this,c)}return this}static mixin(n){["on","once","off","emit"].forEach(c=>{const M=Object.getOwnPropertyDescriptor(nc.prototype,c);Object.defineProperty(n.prototype,c,M)})}dispose(){return super.dispose(),this._events=void 0,this}}class tD extends nc{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class rc extends tD{constructor(){var n,c;super(),this.name="Context",this._constants=new Map,this._timeouts=new Xn,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const M=Fe(rc.getDefaults(),arguments,["context"]);M.context?(this._context=M.context,this._latencyHint=((n=arguments[0])===null||n===void 0?void 0:n.latencyHint)||""):(this._context=jft({latencyHint:M.latencyHint}),this._latencyHint=M.latencyHint),this._ticker=new ict(this.emit.bind(this,"tick"),M.clockSource,M.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((c=arguments[0])===null||c===void 0)&&c.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=M.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(hct(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(n,c,M){return this._context.createBuffer(n,c,M)}createChannelMerger(n){return this._context.createChannelMerger(n)}createChannelSplitter(n){return this._context.createChannelSplitter(n)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(n){return this._context.createDelay(n)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(n,c){return this._context.createIIRFilter(n,c)}createPanner(){return this._context.createPanner()}createPeriodicWave(n,c,M){return this._context.createPeriodicWave(n,c,M)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(n){return Ie(ou(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(n)}createMediaElementSource(n){return Ie(ou(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(n)}createMediaStreamDestination(){return Ie(ou(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(n){return this._context.decodeAudioData(n)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(n){Ie(!this._initialized,"The listener cannot be set after initialization."),this._listener=n}get transport(){return this.initialize(),this._transport}set transport(n){Ie(!this._initialized,"The transport cannot be set after initialization."),this._transport=n}get draw(){return this.initialize(),this._draw}set draw(n){Ie(!this._initialized,"Draw cannot be set after initialization."),this._draw=n}get destination(){return this.initialize(),this._destination}set destination(n){Ie(!this._initialized,"The destination cannot be set after initialization."),this._destination=n}createAudioWorkletNode(n,c){return ect(this.rawContext,n,c)}addAudioWorkletModule(n){return Ki(this,void 0,void 0,function*(){Ie(ke(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(n)),yield this._workletPromise})}workletsAreReady(){return Ki(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(n){this._ticker.updateInterval=n}get clockSource(){return this._ticker.type}set clockSource(n){this._ticker.type=n}get lookAhead(){return this._lookAhead}set lookAhead(n){this._lookAhead=n,this.updateInterval=n?n/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return ou(this._context)?this._context.resume():Promise.resolve()}close(){return Ki(this,void 0,void 0,function*(){ou(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&lct(this)})}getConstant(n){if(this._constants.has(n))return this._constants.get(n);{const c=this._context.createBuffer(1,128,this._context.sampleRate),M=c.getChannelData(0);for(let I=0;I<M.length;I++)M[I]=n;const R=this._context.createBufferSource();return R.channelCount=1,R.channelCountMode="explicit",R.buffer=c,R.loop=!0,R.start(0),this._constants.set(n,R),R}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(n=>this._constants[n].disconnect()),this.close(),this}_timeoutLoop(){const n=this.now();this._timeouts.forEachBefore(n,c=>{c.callback(),this._timeouts.remove(c)})}setTimeout(n,c){this._timeoutIds++;const M=this.now();return this._timeouts.add({callback:n,id:this._timeoutIds,time:M+c}),this._timeoutIds}clearTimeout(n){return this._timeouts.forEach(c=>{c.id===n&&this._timeouts.remove(c)}),this}clearInterval(n){return this.clearTimeout(n)}setInterval(n,c){const M=++this._timeoutIds,R=()=>{const I=this.now();this._timeouts.add({callback:()=>{n(),R()},id:M,time:I+c})};return R(),M}}class uct extends tD{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(n,c,M){return{}}createChannelMerger(n){return{}}createChannelSplitter(n){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(n){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(n,c){return{}}createPanner(){return{}}createPeriodicWave(n,c,M){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(n){return{}}createMediaElementSource(n){return{}}createMediaStreamDestination(){return{}}decodeAudioData(n){return Promise.resolve({})}createAudioWorkletNode(n,c){return{}}get rawContext(){return{}}addAudioWorkletModule(n){return Ki(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(n,c){return 0}clearTimeout(n){return this}setInterval(n,c){return 0}clearInterval(n){return this}getConstant(n){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(n){}get destination(){return{}}set destination(n){}now(){return 0}immediate(){return 0}}function Bi(L,n){mr(n)?n.forEach(c=>Bi(L,c)):Object.defineProperty(L,n,{enumerable:!0,writable:!1})}function eD(L,n){mr(n)?n.forEach(c=>eD(L,c)):Object.defineProperty(L,n,{writable:!0})}const ni=()=>{};class Ti extends Ua{constructor(){super(),this.name="ToneAudioBuffer",this.onload=ni;const n=Fe(Ti.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=n.reverse,this.onload=n.onload,Na(n.url)?this.load(n.url).catch(n.onerror):n.url&&this.set(n.url)}static getDefaults(){return{onerror:ni,onload:ni,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Vn().sampleRate}set(n){return n instanceof Ti?n.loaded?this._buffer=n.get():n.onload=()=>{this.set(n),this.onload(this)}:this._buffer=n,this._reversed&&this._reverse(),this}get(){return this._buffer}load(n){return Ki(this,void 0,void 0,function*(){const c=Ti.load(n).then(M=>{this.set(M),this.onload(this)});Ti.downloads.push(c);try{yield c}finally{const M=Ti.downloads.indexOf(c);Ti.downloads.splice(M,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(n){const c=mr(n)&&n[0].length>0,M=c?n.length:1,R=c?n[0].length:n.length,I=Vn(),m=I.createBuffer(M,R,I.sampleRate),E=!c&&M===1?[n]:n;for(let i=0;i<M;i++)m.copyToChannel(E[i],i);return this._buffer=m,this}toMono(n){if(Yh(n))this.fromArray(this.toArray(n));else{let c=new Float32Array(this.length);const M=this.numberOfChannels;for(let R=0;R<M;R++){const I=this.toArray(R);for(let m=0;m<I.length;m++)c[m]+=I[m]}c=c.map(R=>R/M),this.fromArray(c)}return this}toArray(n){if(Yh(n))return this.getChannelData(n);if(this.numberOfChannels===1)return this.toArray(0);{const c=[];for(let M=0;M<this.numberOfChannels;M++)c[M]=this.getChannelData(M);return c}}getChannelData(n){return this._buffer?this._buffer.getChannelData(n):new Float32Array(0)}slice(n,c=this.duration){Ie(this.loaded,"Buffer is not loaded");const M=Math.floor(n*this.sampleRate),R=Math.floor(c*this.sampleRate);Ie(M<R,"The start time must be less than the end time");const I=R-M,m=Vn().createBuffer(this.numberOfChannels,I,this.sampleRate);for(let E=0;E<this.numberOfChannels;E++)m.copyToChannel(this.getChannelData(E).subarray(M,R),E);return new Ti(m)}_reverse(){if(this.loaded)for(let n=0;n<this.numberOfChannels;n++)this.getChannelData(n).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(n){this._reversed!==n&&(this._reversed=n,this._reverse())}static fromArray(n){return new Ti().fromArray(n)}static fromUrl(n){return Ki(this,void 0,void 0,function*(){return yield new Ti().load(n)})}static load(n){return Ki(this,void 0,void 0,function*(){const c=Ti.baseUrl===""||Ti.baseUrl.endsWith("/")?Ti.baseUrl:Ti.baseUrl+"/",M=yield fetch(c+n);if(!M.ok)throw new Error(`could not load url: ${n}`);const R=yield M.arrayBuffer();return yield Vn().decodeAudioData(R)})}static supportsType(n){const c=n.split("."),M=c[c.length-1];return document.createElement("audio").canPlayType("audio/"+M)!==""}static loaded(){return Ki(this,void 0,void 0,function*(){for(yield Promise.resolve();Ti.downloads.length;)yield Ti.downloads[0]})}}Ti.baseUrl="";Ti.downloads=[];class kC extends rc{constructor(){super({clockSource:"offline",context:Lm(arguments[0])?arguments[0]:qft(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Lm(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Lm(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(n){return Ki(this,void 0,void 0,function*(){let c=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,c++;const M=Math.floor(this.sampleRate/128);n&&c%M===0&&(yield new Promise(R=>setTimeout(R,1)))}})}render(){return Ki(this,arguments,void 0,function*(n=!0){yield this.workletsAreReady(),yield this._renderClock(n);const c=yield this._context.startRendering();return new Ti(c)})}close(){return Promise.resolve()}}const iD=new uct;let Vh=iD;function Vn(){return Vh===iD&&tct&&dct(new rc),Vh}function dct(L,n=!1){n&&Vh.dispose(),ou(L)?Vh=new rc(L):Lm(L)?Vh=new kC(L):Vh=L}function eO(){return Vh.resume()}if(Sn&&!Sn.TONE_SILENCE_LOGGING){const n=` * Tone.js v${iF} * `;console.log(`%c${n}`,"background: #000; color: #fff")}function fct(L){return Math.pow(10,L/20)}function bo(L){return 20*(Math.log(L)/Math.LN10)}function sD(L){return Math.pow(2,L/12)}let dg=440;function cct(){return dg}function pct(L){dg=L}function QT(L){return Math.round(nD(L))}function nD(L){return 69+12*Math.log2(L/dg)}function vct(L){return dg*Math.pow(2,(L-69)/12)}class VC extends Ua{constructor(n,c,M){super(),this.defaultUnits="s",this._val=c,this._units=M,this.context=n,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:n=>this._frequencyToUnits(parseFloat(n)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:n=>this._ticksToUnits(parseInt(n,10)),regexp:/^(\d+)i$/i},m:{method:n=>this._beatsToUnits(parseInt(n,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(n,c)=>{const M=parseInt(n,10),R=c==="."?1.5:1;return M===1?this._beatsToUnits(this._getTimeSignature())*R:this._beatsToUnits(4/M)*R},regexp:/^(\d+)n(\.?)$/i},number:{method:n=>this._expressions[this.defaultUnits].method.call(this,n),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:n=>this._secondsToUnits(parseFloat(n)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:n=>parseInt(n,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:n=>{const c=parseInt(n,10);return this._beatsToUnits(8/(Math.floor(c)*3))},regexp:/^(\d+)t$/i},tr:{method:(n,c,M)=>{let R=0;return n&&n!=="0"&&(R+=this._beatsToUnits(this._getTimeSignature()*parseFloat(n))),c&&c!=="0"&&(R+=this._beatsToUnits(parseFloat(c))),M&&M!=="0"&&(R+=this._beatsToUnits(parseFloat(M)/4)),R},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof VC&&this.fromType(this._val),Wn(this._val))return this._noArg();if(Na(this._val)&&Wn(this._units)){for(const n in this._expressions)if(this._expressions[n].regexp.test(this._val.trim())){this._units=n;break}}else if(Wh(this._val)){let n=0;for(const c in this._val)if(ke(this._val[c])){const M=this._val[c],R=new this.constructor(this.context,c).valueOf()*M;n+=R}return n}if(ke(this._units)){const n=this._expressions[this._units],c=this._val.toString().trim().match(n.regexp);return c?n.method.apply(this,c.slice(1)):n.method.call(this,this._val)}else return Na(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(n){return 1/n}_beatsToUnits(n){return 60/this._getBpm()*n}_secondsToUnits(n){return n}_ticksToUnits(n){return n*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(n){switch(this._units=void 0,this.defaultUnits){case"s":this._val=n.toSeconds();break;case"i":this._val=n.toTicks();break;case"hz":this._val=n.toFrequency();break;case"midi":this._val=n.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class vr extends VC{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:n=>this._now()+new this.constructor(this.context,n).valueOf(),regexp:/^\+(.+)/},quantize:{method:n=>{const c=new vr(this.context,n).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(c))},regexp:/^@(.+)/}})}quantize(n,c=1){const M=new this.constructor(this.context,n).valueOf(),R=this.valueOf(),E=Math.round(R/M)*M-R;return R+E*c}toNotation(){const n=this.toSeconds(),c=["1m"];for(let I=1;I<9;I++){const m=Math.pow(2,I);c.push(m+"n."),c.push(m+"n"),c.push(m+"t")}c.push("0");let M=c[0],R=new vr(this.context,c[0]).toSeconds();return c.forEach(I=>{const m=new vr(this.context,I).toSeconds();Math.abs(m-n)<Math.abs(R-n)&&(M=I,R=m)}),M}toBarsBeatsSixteenths(){const n=this._beatsToUnits(1);let c=this.valueOf()/n;c=parseFloat(c.toFixed(4));const M=Math.floor(c/this._getTimeSignature());let R=c%1*4;c=Math.floor(c)%this._getTimeSignature();const I=R.toString();return I.length>3&&(R=parseFloat(parseFloat(I).toFixed(3))),[M,c,R].join(":")}toTicks(){const n=this._beatsToUnits(1);return this.valueOf()/n*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return QT(this.toFrequency())}_now(){return this.context.now()}}class zn extends vr{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return cct()}static set A4(n){pct(n)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(n){return this.defaultUnits==="midi"?n:zn.mtof(n)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(n,c){const R=mct[n.toLowerCase()]+(parseInt(c,10)+1)*12;return this.defaultUnits==="midi"?R:zn.mtof(R)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(n,c,M){let R=1;return n&&n!=="0"&&(R*=this._beatsToUnits(this._getTimeSignature()*parseFloat(n))),c&&c!=="0"&&(R*=this._beatsToUnits(parseFloat(c))),M&&M!=="0"&&(R*=this._beatsToUnits(parseFloat(M)/4)),R}}})}transpose(n){return new zn(this.context,this.valueOf()*sD(n))}harmonize(n){return n.map(c=>this.transpose(c))}toMidi(){return QT(this.valueOf())}toNote(){const n=this.toFrequency(),c=Math.log2(n/zn.A4);let M=Math.round(12*c)+57;const R=Math.floor(M/12);return R<0&&(M+=-12*R),gct[M%12]+R.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const n=this._beatsToUnits(1),c=this.valueOf()/n;return Math.floor(c*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(n){return n}_ticksToUnits(n){return 1/(n*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(n){return 1/super._beatsToUnits(n)}_secondsToUnits(n){return 1/n}static mtof(n){return vct(n)}static ftom(n){return QT(n)}}const mct={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},gct=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Ff extends vr{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class rn extends Ua{constructor(){super();const n=Fe(rn.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=n.context}static getDefaults(){return{context:Vn()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(n){return Jft(n),new vr(this.context,n).toSeconds()}toFrequency(n){return new zn(this.context,n).toFrequency()}toTicks(n){return new Ff(this.context,n).toTicks()}_getPartialProperties(n){const c=this.get();return Object.keys(c).forEach(M=>{Wn(n[M])&&delete c[M]}),c}get(){const n=act(this);return Object.keys(n).forEach(c=>{if(Reflect.has(this,c)){const M=this[c];ke(M)&&ke(M.value)&&ke(M.setValueAtTime)?n[c]=M.value:M instanceof rn?n[c]=M._getPartialProperties(n[c]):mr(M)||Yh(M)||Na(M)||Kft(M)?n[c]=M:delete n[c]}}),n}set(n){return Object.keys(n).forEach(c=>{Reflect.has(this,c)&&ke(this[c])&&(this[c]&&ke(this[c].value)&&ke(this[c].setValueAtTime)?this[c].value!==n[c]&&(this[c].value=n[c]):this[c]instanceof rn?this[c].set(n[c]):this[c]=n[c])}),this}}class zC extends Xn{constructor(n="stopped"){super(),this.name="StateTimeline",this._initial=n,this.setStateAtTime(this._initial,0)}getValueAtTime(n){const c=this.get(n);return c!==null?c.state:this._initial}setStateAtTime(n,c,M){return Fo(c,0),this.add(Object.assign({},M,{state:n,time:c})),this}getLastState(n,c){const M=this._search(c);for(let R=M;R>=0;R--){const I=this._timeline[R];if(I.state===n)return I}}getNextState(n,c){const M=this._search(c);if(M!==-1)for(let R=M;R<this._timeline.length;R++){const I=this._timeline[R];if(I.state===n)return I}}}class bi extends rn{constructor(){const n=Fe(bi.getDefaults(),arguments,["param","units","convert"]);for(super(n),this.name="Param",this.overridden=!1,this._minOutput=1e-7,Ie(ke(n.param)&&($h(n.param)||n.param instanceof bi),"param must be an AudioParam");!$h(n.param);)n.param=n.param._param;this._swappable=ke(n.swappable)?n.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=n.param,this.input.connect(this._param)):this._param=this.input=n.param,this._events=new Xn(1e3),this._initialValue=this._param.defaultValue,this.units=n.units,this.convert=n.convert,this._minValue=n.minValue,this._maxValue=n.maxValue,ke(n.value)&&n.value!==this._toType(this._initialValue)&&this.setValueAtTime(n.value,0)}static getDefaults(){return Object.assign(rn.getDefaults(),{convert:!0,units:"number"})}get value(){const n=this.now();return this.getValueAtTime(n)}set value(n){this.cancelScheduledValues(this.now()),this.setValueAtTime(n,this.now())}get minValue(){return ke(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return ke(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(n,c){return this.units===c}_assertRange(n){return ke(this.maxValue)&&ke(this.minValue)&&Fo(n,this._fromType(this.minValue),this._fromType(this.maxValue)),n}_fromType(n){return this.convert&&!this.overridden?this._is(n,"time")?this.toSeconds(n):this._is(n,"decibels")?fct(n):this._is(n,"frequency")?this.toFrequency(n):n:this.overridden?0:n}_toType(n){return this.convert&&this.units==="decibels"?bo(n):n}setValueAtTime(n,c){const M=this.toSeconds(c),R=this._fromType(n);return Ie(isFinite(R)&&isFinite(M),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(n)}, ${JSON.stringify(c)}`),this._assertRange(R),this.log(this.units,"setValueAtTime",n,M),this._events.add({time:M,type:"setValueAtTime",value:R}),this._param.setValueAtTime(R,M),this}getValueAtTime(n){const c=Math.max(this.toSeconds(n),0),M=this._events.getAfter(c),R=this._events.get(c);let I=this._initialValue;if(R===null)I=this._initialValue;else if(R.type==="setTargetAtTime"&&(M===null||M.type==="setValueAtTime")){const m=this._events.getBefore(R.time);let E;m===null?E=this._initialValue:E=m.value,R.type==="setTargetAtTime"&&(I=this._exponentialApproach(R.time,E,R.value,R.constant,c))}else if(M===null)I=R.value;else if(M.type==="linearRampToValueAtTime"||M.type==="exponentialRampToValueAtTime"){let m=R.value;if(R.type==="setTargetAtTime"){const E=this._events.getBefore(R.time);E===null?m=this._initialValue:m=E.value}M.type==="linearRampToValueAtTime"?I=this._linearInterpolate(R.time,m,M.time,M.value,c):I=this._exponentialInterpolate(R.time,m,M.time,M.value,c)}else I=R.value;return this._toType(I)}setRampPoint(n){n=this.toSeconds(n);let c=this.getValueAtTime(n);return this.cancelAndHoldAtTime(n),this._fromType(c)===0&&(c=this._toType(this._minOutput)),this.setValueAtTime(c,n),this}linearRampToValueAtTime(n,c){const M=this._fromType(n),R=this.toSeconds(c);return Ie(isFinite(M)&&isFinite(R),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(n)}, ${JSON.stringify(c)}`),this._assertRange(M),this._events.add({time:R,type:"linearRampToValueAtTime",value:M}),this.log(this.units,"linearRampToValueAtTime",n,R),this._param.linearRampToValueAtTime(M,R),this}exponentialRampToValueAtTime(n,c){let M=this._fromType(n);M=cr(M,0)?this._minOutput:M,this._assertRange(M);const R=this.toSeconds(c);return Ie(isFinite(M)&&isFinite(R),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(n)}, ${JSON.stringify(c)}`),this._events.add({time:R,type:"exponentialRampToValueAtTime",value:M}),this.log(this.units,"exponentialRampToValueAtTime",n,R),this._param.exponentialRampToValueAtTime(M,R),this}exponentialRampTo(n,c,M){return M=this.toSeconds(M),this.setRampPoint(M),this.exponentialRampToValueAtTime(n,M+this.toSeconds(c)),this}linearRampTo(n,c,M){return M=this.toSeconds(M),this.setRampPoint(M),this.linearRampToValueAtTime(n,M+this.toSeconds(c)),this}targetRampTo(n,c,M){return M=this.toSeconds(M),this.setRampPoint(M),this.exponentialApproachValueAtTime(n,M,c),this}exponentialApproachValueAtTime(n,c,M){c=this.toSeconds(c),M=this.toSeconds(M);const R=Math.log(M+1)/Math.log(200);return this.setTargetAtTime(n,c,R),this.cancelAndHoldAtTime(c+M*.9),this.linearRampToValueAtTime(n,c+M),this}setTargetAtTime(n,c,M){const R=this._fromType(n);Ie(isFinite(M)&&M>0,"timeConstant must be a number greater than 0");const I=this.toSeconds(c);return this._assertRange(R),Ie(isFinite(R)&&isFinite(I),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(n)}, ${JSON.stringify(c)}`),this._events.add({constant:M,time:I,type:"setTargetAtTime",value:R}),this.log(this.units,"setTargetAtTime",n,I,M),this._param.setTargetAtTime(R,I,M),this}setValueCurveAtTime(n,c,M,R=1){M=this.toSeconds(M),c=this.toSeconds(c);const I=this._fromType(n[0])*R;this.setValueAtTime(this._toType(I),c);const m=M/(n.length-1);for(let E=1;E<n.length;E++){const i=this._fromType(n[E])*R;this.linearRampToValueAtTime(this._toType(i),c+E*m)}return this}cancelScheduledValues(n){const c=this.toSeconds(n);return Ie(isFinite(c),`Invalid argument to cancelScheduledValues: ${JSON.stringify(n)}`),this._events.cancel(c),this._param.cancelScheduledValues(c),this.log(this.units,"cancelScheduledValues",c),this}cancelAndHoldAtTime(n){const c=this.toSeconds(n),M=this._fromType(this.getValueAtTime(c));Ie(isFinite(c),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(n)}`),this.log(this.units,"cancelAndHoldAtTime",c,"value="+M);const R=this._events.get(c),I=this._events.getAfter(c);return R&&cr(R.time,c)?I?(this._param.cancelScheduledValues(I.time),this._events.cancel(I.time)):(this._param.cancelAndHoldAtTime(c),this._events.cancel(c+this.sampleTime)):I&&(this._param.cancelScheduledValues(I.time),this._events.cancel(I.time),I.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(M),c):I.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(M),c)),this._events.add({time:c,type:"setValueAtTime",value:M}),this._param.setValueAtTime(M,c),this}rampTo(n,c=.1,M){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(n,c,M):this.linearRampTo(n,c,M),this}apply(n){const c=this.context.currentTime;n.setValueAtTime(this.getValueAtTime(c),c);const M=this._events.get(c);if(M&&M.type==="setTargetAtTime"){const R=this._events.getAfter(M.time),I=R?R.time:c+2,m=(I-c)/10;for(let E=c;E<I;E+=m)n.linearRampToValueAtTime(this.getValueAtTime(E),E)}return this._events.forEachAfter(this.context.currentTime,R=>{R.type==="cancelScheduledValues"?n.cancelScheduledValues(R.time):R.type==="setTargetAtTime"?n.setTargetAtTime(R.value,R.time,R.constant):n[R.type](R.value,R.time)}),this}setParam(n){Ie(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const c=this.input;return c.disconnect(this._param),this.apply(n),this._param=n,c.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(n,c,M,R,I){return M+(c-M)*Math.exp(-(I-n)/R)}_linearInterpolate(n,c,M,R,I){return c+(R-c)*((I-n)/(M-n))}_exponentialInterpolate(n,c,M,R,I){return c*Math.pow(R/c,(I-n)/(M-n))}}class Ne extends rn{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return ke(this.input)?$h(this.input)||this.input instanceof bi?1:this.input.numberOfInputs:0}get numberOfOutputs(){return ke(this.output)?this.output.numberOfOutputs:0}_isAudioNode(n){return ke(n)&&(n instanceof Ne||Lo(n))}_getInternalNodes(){const n=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&n.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&n.push(this.output),n}_setChannelProperties(n){this._getInternalNodes().forEach(M=>{M.channelCount=n.channelCount,M.channelCountMode=n.channelCountMode,M.channelInterpretation=n.channelInterpretation})}_getChannelProperties(){const n=this._getInternalNodes();Ie(n.length>0,"ToneAudioNode does not have any internal nodes");const c=n[0];return{channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(n){const c=this._getChannelProperties();this._setChannelProperties(Object.assign(c,{channelCount:n}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(n){const c=this._getChannelProperties();this._setChannelProperties(Object.assign(c,{channelCountMode:n}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(n){const c=this._getChannelProperties();this._setChannelProperties(Object.assign(c,{channelInterpretation:n}))}connect(n,c=0,M=0){return Xu(this,n,c,M),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return GC("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(n,c=0,M=0){return xct(this,n,c,M),this}chain(...n){return jT(this,...n),this}fan(...n){return n.forEach(c=>this.connect(c)),this}dispose(){return super.dispose(),ke(this.input)&&(this.input instanceof Ne?this.input.dispose():Lo(this.input)&&this.input.disconnect()),ke(this.output)&&(this.output instanceof Ne?this.output.dispose():Lo(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function jT(...L){const n=L.shift();L.reduce((c,M)=>(c instanceof Ne?c.connect(M):Lo(c)&&Xu(c,M),M),n)}function Xu(L,n,c=0,M=0){for(Ie(ke(L),"Cannot connect from undefined node"),Ie(ke(n),"Cannot connect to undefined node"),(n instanceof Ne||Lo(n))&&Ie(n.numberOfInputs>0,"Cannot connect to node with no inputs"),Ie(L.numberOfOutputs>0,"Cannot connect from node with no outputs");n instanceof Ne||n instanceof bi;)ke(n.input)&&(n=n.input);for(;L instanceof Ne;)ke(L.output)&&(L=L.output);$h(n)?L.connect(n,c):L.connect(n,c,M)}function xct(L,n,c=0,M=0){if(ke(n))for(;n instanceof Ne;)n=n.input;for(;!Lo(L);)ke(L.output)&&(L=L.output);$h(n)?L.disconnect(n,c):Lo(n)?L.disconnect(n,c,M):L.disconnect()}class Ls extends Ne{constructor(){const n=Fe(Ls.getDefaults(),arguments,["gain","units"]);super(n),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new bi({context:this.context,convert:n.convert,param:this._gainNode.gain,units:n.units,value:n.gain,minValue:n.minValue,maxValue:n.maxValue}),Bi(this,"gain")}static getDefaults(){return Object.assign(Ne.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Au extends Ne{constructor(n){super(n),this.onended=ni,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Ls({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(c){const M=this.toSeconds(c);return this._startTime!==-1&&M>=this._startTime&&(this._stopTime===-1||M<=this._stopTime)?"started":"stopped"},this._fadeIn=n.fadeIn,this._fadeOut=n.fadeOut,this._curve=n.curve,this.onended=n.onended}static getDefaults(){return Object.assign(Ne.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:ni})}_startGain(n,c=1){Ie(this._startTime===-1,"Source cannot be started more than once");const M=this.toSeconds(this._fadeIn);return this._startTime=n+M,this._startTime=Math.max(this._startTime,this.context.currentTime),M>0?(this._gainNode.gain.setValueAtTime(0,n),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(c,n+M):this._gainNode.gain.exponentialApproachValueAtTime(c,n,M)):this._gainNode.gain.setValueAtTime(c,n),this}stop(n){return this.log("stop",n),this._stopGain(this.toSeconds(n)),this}_stopGain(n){Ie(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const c=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(n)+c,this._stopTime=Math.max(this._stopTime,this.now()),c>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,c,n):this._gainNode.gain.targetRampTo(0,c,n):(this._gainNode.gain.cancelAndHoldAtTime(n),this._gainNode.gain.setValueAtTime(0,n)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const M=this._curve==="exponential"?c*2:0;this._stopSource(this.now()+M),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==ni&&(this.onended(this),this.onended=ni,!this.context.isOffline)){const n=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(n):setTimeout(n,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Ie(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=ni,this}}class WC extends Au{constructor(){const n=Fe(WC.getDefaults(),arguments,["offset"]);super(n),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),Xu(this._source,this._gainNode),this.offset=new bi({context:this.context,convert:n.convert,param:this._source.offset,units:n.units,value:n.offset,minValue:n.minValue,maxValue:n.maxValue})}static getDefaults(){return Object.assign(Au.getDefaults(),{convert:!0,offset:1,units:"number"})}start(n){const c=this.toSeconds(n);return this.log("start",c),this._startGain(c),this._source.start(c),this}_stopSource(n){this._source.stop(n)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class ds extends Ne{constructor(){const n=Fe(ds.getDefaults(),arguments,["value","units"]);super(n),this.name="Signal",this.override=!0,this.output=this._constantSource=new WC({context:this.context,convert:n.convert,offset:n.value,units:n.units,minValue:n.minValue,maxValue:n.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(Ne.getDefaults(),{convert:!0,units:"number",value:0})}connect(n,c=0,M=0){return XC(this,n,c,M),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(n,c){return this._param.setValueAtTime(n,c),this}getValueAtTime(n){return this._param.getValueAtTime(n)}setRampPoint(n){return this._param.setRampPoint(n),this}linearRampToValueAtTime(n,c){return this._param.linearRampToValueAtTime(n,c),this}exponentialRampToValueAtTime(n,c){return this._param.exponentialRampToValueAtTime(n,c),this}exponentialRampTo(n,c,M){return this._param.exponentialRampTo(n,c,M),this}linearRampTo(n,c,M){return this._param.linearRampTo(n,c,M),this}targetRampTo(n,c,M){return this._param.targetRampTo(n,c,M),this}exponentialApproachValueAtTime(n,c,M){return this._param.exponentialApproachValueAtTime(n,c,M),this}setTargetAtTime(n,c,M){return this._param.setTargetAtTime(n,c,M),this}setValueCurveAtTime(n,c,M,R){return this._param.setValueCurveAtTime(n,c,M,R),this}cancelScheduledValues(n){return this._param.cancelScheduledValues(n),this}cancelAndHoldAtTime(n){return this._param.cancelAndHoldAtTime(n),this}rampTo(n,c,M){return this._param.rampTo(n,c,M),this}get value(){return this._param.value}set value(n){this._param.value=n}get convert(){return this._param.convert}set convert(n){this._param.convert=n}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(n){this._param.overridden=n}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(n){return this._param.apply(n),this}}function XC(L,n,c,M){(n instanceof bi||$h(n)||n instanceof ds&&n.override)&&(n.cancelScheduledValues(0),n.setValueAtTime(0,0),n instanceof ds&&(n.overridden=!0)),Xu(L,n,c,M)}class HC extends bi{constructor(){const n=Fe(HC.getDefaults(),arguments,["value"]);super(n),this.name="TickParam",this._events=new Xn(1/0),this._multiplier=1,this._multiplier=n.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(n.value)}),this.setValueAtTime(n.value,0)}static getDefaults(){return Object.assign(bi.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(n,c,M){c=this.toSeconds(c),this.setRampPoint(c);const R=this._fromType(n),I=this._events.get(c),m=Math.round(Math.max(1/M,1));for(let E=0;E<=m;E++){const i=M*E+c,d=this._exponentialApproach(I.time,I.value,R,M,i);this.linearRampToValueAtTime(this._toType(d),i)}return this}setValueAtTime(n,c){const M=this.toSeconds(c);super.setValueAtTime(n,c);const R=this._events.get(M),I=this._events.previousEvent(R),m=this._getTicksUntilEvent(I,M);return R.ticks=Math.max(m,0),this}linearRampToValueAtTime(n,c){const M=this.toSeconds(c);super.linearRampToValueAtTime(n,c);const R=this._events.get(M),I=this._events.previousEvent(R),m=this._getTicksUntilEvent(I,M);return R.ticks=Math.max(m,0),this}exponentialRampToValueAtTime(n,c){c=this.toSeconds(c);const M=this._fromType(n),R=this._events.get(c),I=Math.round(Math.max((c-R.time)*10,1)),m=(c-R.time)/I;for(let E=0;E<=I;E++){const i=m*E+R.time,d=this._exponentialInterpolate(R.time,R.value,c,M,i);this.linearRampToValueAtTime(this._toType(d),i)}return this}_getTicksUntilEvent(n,c){if(n===null)n={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Wn(n.ticks)){const m=this._events.previousEvent(n);n.ticks=this._getTicksUntilEvent(m,n.time)}const M=this._fromType(this.getValueAtTime(n.time));let R=this._fromType(this.getValueAtTime(c));const I=this._events.get(c);return I&&I.time===c&&I.type==="setValueAtTime"&&(R=this._fromType(this.getValueAtTime(c-this.sampleTime))),.5*(c-n.time)*(M+R)+n.ticks}getTicksAtTime(n){const c=this.toSeconds(n),M=this._events.get(c);return Math.max(this._getTicksUntilEvent(M,c),0)}getDurationOfTicks(n,c){const M=this.toSeconds(c),R=this.getTicksAtTime(c);return this.getTimeOfTick(R+n)-M}getTimeOfTick(n){const c=this._events.get(n,"ticks"),M=this._events.getAfter(n,"ticks");if(c&&c.ticks===n)return c.time;if(c&&M&&M.type==="linearRampToValueAtTime"&&c.value!==M.value){const R=this._fromType(this.getValueAtTime(c.time)),m=(this._fromType(this.getValueAtTime(M.time))-R)/(M.time-c.time),E=Math.sqrt(Math.pow(R,2)-2*m*(c.ticks-n)),i=(-R+E)/m,d=(-R-E)/m;return(i>0?i:d)+c.time}else return c?c.value===0?1/0:c.time+(n-c.ticks)/c.value:n/this._initialValue}ticksToTime(n,c){return this.getDurationOfTicks(n,c)}timeToTicks(n,c){const M=this.toSeconds(c),R=this.toSeconds(n),I=this.getTicksAtTime(M);return this.getTicksAtTime(M+R)-I}_fromType(n){return this.units==="bpm"&&this.multiplier?1/(60/n/this.multiplier):super._fromType(n)}_toType(n){return this.units==="bpm"&&this.multiplier?n/this.multiplier*60:super._toType(n)}get multiplier(){return this._multiplier}set multiplier(n){const c=this.value;this._multiplier=n,this.cancelScheduledValues(0),this.setValueAtTime(c,0)}}class YC extends ds{constructor(){const n=Fe(YC.getDefaults(),arguments,["value"]);super(n),this.name="TickSignal",this.input=this._param=new HC({context:this.context,convert:n.convert,multiplier:n.multiplier,param:this._constantSource.offset,units:n.units,value:n.value})}static getDefaults(){return Object.assign(ds.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(n,c){return this._param.ticksToTime(n,c)}timeToTicks(n,c){return this._param.timeToTicks(n,c)}getTimeOfTick(n){return this._param.getTimeOfTick(n)}getDurationOfTicks(n,c){return this._param.getDurationOfTicks(n,c)}getTicksAtTime(n){return this._param.getTicksAtTime(n)}get multiplier(){return this._param.multiplier}set multiplier(n){this._param.multiplier=n}dispose(){return super.dispose(),this._param.dispose(),this}}class $C extends rn{constructor(){const n=Fe($C.getDefaults(),arguments,["frequency"]);super(n),this.name="TickSource",this._state=new zC,this._tickOffset=new Xn,this._ticksAtTime=new Xn,this._secondsAtTime=new Xn,this.frequency=new YC({context:this.context,units:n.units,value:n.frequency}),Bi(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},rn.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(n,c){const M=this.toSeconds(n);return this._state.getValueAtTime(M)!=="started"&&(this._state.setStateAtTime("started",M),ke(c)&&this.setTicksAtTime(c,M),this._ticksAtTime.cancel(M),this._secondsAtTime.cancel(M)),this}stop(n){const c=this.toSeconds(n);if(this._state.getValueAtTime(c)==="stopped"){const M=this._state.get(c);M&&M.time>0&&(this._tickOffset.cancel(M.time),this._state.cancel(M.time))}return this._state.cancel(c),this._state.setStateAtTime("stopped",c),this.setTicksAtTime(0,c),this._ticksAtTime.cancel(c),this._secondsAtTime.cancel(c),this}pause(n){const c=this.toSeconds(n);return this._state.getValueAtTime(c)==="started"&&(this._state.setStateAtTime("paused",c),this._ticksAtTime.cancel(c),this._secondsAtTime.cancel(c)),this}cancel(n){return n=this.toSeconds(n),this._state.cancel(n),this._tickOffset.cancel(n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}getTicksAtTime(n){const c=this.toSeconds(n),M=this._state.getLastState("stopped",c),R=this._ticksAtTime.get(c),I={state:"paused",time:c};this._state.add(I);let m=R||M,E=R?R.ticks:0,i=null;return this._state.forEachBetween(m.time,c+this.sampleTime,d=>{let S=m.time;const u=this._tickOffset.get(d.time);u&&u.time>=m.time&&(E=u.ticks,S=u.time),m.state==="started"&&d.state!=="started"&&(E+=this.frequency.getTicksAtTime(d.time)-this.frequency.getTicksAtTime(S),d.time!==I.time&&(i={state:d.state,time:d.time,ticks:E})),m=d}),this._state.remove(I),i&&this._ticksAtTime.add(i),E}get ticks(){return this.getTicksAtTime(this.now())}set ticks(n){this.setTicksAtTime(n,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(n){const c=this.now(),M=this.frequency.timeToTicks(n,c);this.setTicksAtTime(M,c)}getSecondsAtTime(n){n=this.toSeconds(n);const c=this._state.getLastState("stopped",n),M={state:"paused",time:n};this._state.add(M);const R=this._secondsAtTime.get(n);let I=R||c,m=R?R.seconds:0,E=null;return this._state.forEachBetween(I.time,n+this.sampleTime,i=>{let d=I.time;const S=this._tickOffset.get(i.time);S&&S.time>=I.time&&(m=S.seconds,d=S.time),I.state==="started"&&i.state!=="started"&&(m+=i.time-d,i.time!==M.time&&(E={state:i.state,time:i.time,seconds:m})),I=i}),this._state.remove(M),E&&this._secondsAtTime.add(E),m}setTicksAtTime(n,c){return c=this.toSeconds(c),this._tickOffset.cancel(c),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(n,c),ticks:n,time:c}),this._ticksAtTime.cancel(c),this._secondsAtTime.cancel(c),this}getStateAtTime(n){return n=this.toSeconds(n),this._state.getValueAtTime(n)}getTimeOfTick(n,c=this.now()){const M=this._tickOffset.get(c),R=this._state.get(c),I=Math.max(M.time,R.time),m=this.frequency.getTicksAtTime(I)+n-M.ticks;return this.frequency.getTimeOfTick(m)}forEachTickBetween(n,c,M){let R=this._state.get(n);this._state.forEachBetween(n,c,m=>{R&&R.state==="started"&&m.state!=="started"&&this.forEachTickBetween(Math.max(R.time,n),m.time-this.sampleTime,M),R=m});let I=null;if(R&&R.state==="started"){const m=Math.max(R.time,n),E=this.frequency.getTicksAtTime(m),i=this.frequency.getTicksAtTime(R.time),d=E-i;let S=Math.ceil(d)-d;S=cr(S,1)?0:S;let u=this.frequency.getTimeOfTick(E+S);for(;u<c;){try{M(u,Math.round(this.getTicksAtTime(u)))}catch(l){I=l;break}u+=this.frequency.getDurationOfTicks(1,u)}}if(I)throw I;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class fg extends rn{constructor(){const n=Fe(fg.getDefaults(),arguments,["callback","frequency"]);super(n),this.name="Clock",this.callback=ni,this._lastUpdate=0,this._state=new zC("stopped"),this._boundLoop=this._loop.bind(this),this.callback=n.callback,this._tickSource=new $C({context:this.context,frequency:n.frequency,units:n.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Bi(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(rn.getDefaults(),{callback:ni,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(n,c){KF(this.context);const M=this.toSeconds(n);return this.log("start",M),this._state.getValueAtTime(M)!=="started"&&(this._state.setStateAtTime("started",M),this._tickSource.start(M,c),M<this._lastUpdate&&this.emit("start",M,c)),this}stop(n){const c=this.toSeconds(n);return this.log("stop",c),this._state.cancel(c),this._state.setStateAtTime("stopped",c),this._tickSource.stop(c),c<this._lastUpdate&&this.emit("stop",c),this}pause(n){const c=this.toSeconds(n);return this._state.getValueAtTime(c)==="started"&&(this._state.setStateAtTime("paused",c),this._tickSource.pause(c),c<this._lastUpdate&&this.emit("pause",c)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(n){this._tickSource.ticks=n}get seconds(){return this._tickSource.seconds}set seconds(n){this._tickSource.seconds=n}getSecondsAtTime(n){return this._tickSource.getSecondsAtTime(n)}setTicksAtTime(n,c){return this._tickSource.setTicksAtTime(n,c),this}getTimeOfTick(n,c=this.now()){return this._tickSource.getTimeOfTick(n,c)}getTicksAtTime(n){return this._tickSource.getTicksAtTime(n)}nextTickTime(n,c){const M=this.toSeconds(c),R=this.getTicksAtTime(M);return this._tickSource.getTimeOfTick(R+n,M)}_loop(){const n=this._lastUpdate,c=this.now();this._lastUpdate=c,this.log("loop",n,c),n!==c&&(this._state.forEachBetween(n,c,M=>{switch(M.state){case"started":const R=this._tickSource.getTicksAtTime(M.time);this.emit("start",M.time,R);break;case"stopped":M.time!==0&&this.emit("stop",M.time);break;case"paused":this.emit("pause",M.time);break}}),this._tickSource.forEachTickBetween(n,c,(M,R)=>{this.callback(M,R)}))}getStateAtTime(n){const c=this.toSeconds(n);return this._state.getValueAtTime(c)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}nc.mixin(fg);class Hu extends Ne{constructor(){const n=Fe(Hu.getDefaults(),arguments,["volume"]);super(n),this.name="Volume",this.input=this.output=new Ls({context:this.context,gain:n.volume,units:"decibels"}),this.volume=this.output.gain,Bi(this,"volume"),this._unmutedVolume=n.volume,this.mute=n.mute}static getDefaults(){return Object.assign(Ne.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(n){!this.mute&&n?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!n&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class _C extends Ne{constructor(){const n=Fe(_C.getDefaults(),arguments);super(n),this.name="Destination",this.input=new Hu({context:this.context}),this.output=new Ls({context:this.context}),this.volume=this.input.volume,jT(this.input,this.output,this.context.rawContext.destination),this.mute=n.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(Ne.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(n){this.input.mute=n}chain(...n){return this.input.disconnect(),n.unshift(this.input),n.push(this.output),jT(...n),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}lg(L=>{L.destination=new _C({context:L})});ug(L=>{L.destination.dispose()});class yct extends Ne{constructor(){super(...arguments),this.name="Listener",this.positionX=new bi({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new bi({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new bi({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new bi({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new bi({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new bi({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new bi({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new bi({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new bi({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(Ne.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}lg(L=>{L.listener=new yct({context:L})});ug(L=>{L.listener.dispose()});class ZC extends Ua{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const n=Fe(ZC.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=n.baseUrl,Object.keys(n.urls).forEach(c=>{this._loadingCount++;const M=n.urls[c];this.add(c,M,this._bufferLoaded.bind(this,n.onload),n.onerror)})}static getDefaults(){return{baseUrl:"",onerror:ni,onload:ni,urls:{}}}has(n){return this._buffers.has(n.toString())}get(n){return Ie(this.has(n),`ToneAudioBuffers has no buffer named: ${n}`),this._buffers.get(n.toString())}_bufferLoaded(n){this._loadingCount--,this._loadingCount===0&&n&&n()}get loaded(){return Array.from(this._buffers).every(([n,c])=>c.loaded)}add(n,c,M=ni,R=ni){return Na(c)?(this.baseUrl&&c.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(n.toString(),new Ti(this.baseUrl+c,M,R))):this._buffers.set(n.toString(),new Ti(c,M,R)),this}dispose(){return super.dispose(),this._buffers.forEach(n=>n.dispose()),this._buffers.clear(),this}}class fu extends Ff{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(n){return this._getPPQ()*n}_secondsToUnits(n){return Math.floor(n/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(n){return n}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class Sct extends rn{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Xn,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(n,c){return this._events.add({callback:n,time:this.toSeconds(c)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(n){return this._events.cancel(this.toSeconds(n)),this}_drawLoop(){const n=this.context.currentTime;this._events.forEachBefore(n+this.anticipation,c=>{n-c.time<=this.expiration&&c.callback(),this._events.remove(c)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}lg(L=>{L.draw=new Sct({context:L})});ug(L=>{L.draw.dispose()});class Tct extends Ua{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(n){Ie(ke(n.time),"Events must have a time property"),Ie(ke(n.duration),"Events must have a duration parameter"),n.time=n.time.valueOf();let c=new Cct(n.time,n.time+n.duration,n);for(this._root===null?this._root=c:this._root.insert(c),this._length++;c!==null;)c.updateHeight(),c.updateMax(),this._rebalance(c),c=c.parent;return this}remove(n){if(this._root!==null){const c=[];this._root.search(n.time,c);for(const M of c)if(M.event===n){this._removeNode(M),this._length--;break}}return this}get length(){return this._length}cancel(n){return this.forEachFrom(n,c=>this.remove(c)),this}_setRoot(n){this._root=n,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(n,c){n.parent!==null?(n.isLeftChild()?n.parent.left=c:n.parent.right=c,this._rebalance(n.parent)):this._setRoot(c)}_removeNode(n){if(n.left===null&&n.right===null)this._replaceNodeInParent(n,null);else if(n.right===null)this._replaceNodeInParent(n,n.left);else if(n.left===null)this._replaceNodeInParent(n,n.right);else{const c=n.getBalance();let M,R=null;if(c>0)if(n.left.right===null)M=n.left,M.right=n.right,R=M;else{for(M=n.left.right;M.right!==null;)M=M.right;M.parent&&(M.parent.right=M.left,R=M.parent,M.left=n.left,M.right=n.right)}else if(n.right.left===null)M=n.right,M.left=n.left,R=M;else{for(M=n.right.left;M.left!==null;)M=M.left;M.parent&&(M.parent.left=M.right,R=M.parent,M.left=n.left,M.right=n.right)}n.parent!==null?n.isLeftChild()?n.parent.left=M:n.parent.right=M:this._setRoot(M),R&&this._rebalance(R)}n.dispose()}_rotateLeft(n){const c=n.parent,M=n.isLeftChild(),R=n.right;R&&(n.right=R.left,R.left=n),c!==null?M?c.left=R:c.right=R:this._setRoot(R)}_rotateRight(n){const c=n.parent,M=n.isLeftChild(),R=n.left;R&&(n.left=R.right,R.right=n),c!==null?M?c.left=R:c.right=R:this._setRoot(R)}_rebalance(n){const c=n.getBalance();c>1&&n.left?n.left.getBalance()<0?this._rotateLeft(n.left):this._rotateRight(n):c<-1&&n.right&&(n.right.getBalance()>0?this._rotateRight(n.right):this._rotateLeft(n))}get(n){if(this._root!==null){const c=[];if(this._root.search(n,c),c.length>0){let M=c[0];for(let R=1;R<c.length;R++)c[R].low>M.low&&(M=c[R]);return M.event}}return null}forEach(n){if(this._root!==null){const c=[];this._root.traverse(M=>c.push(M)),c.forEach(M=>{M.event&&n(M.event)})}return this}forEachAtTime(n,c){if(this._root!==null){const M=[];this._root.search(n,M),M.forEach(R=>{R.event&&c(R.event)})}return this}forEachFrom(n,c){if(this._root!==null){const M=[];this._root.searchAfter(n,M),M.forEach(R=>{R.event&&c(R.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(n=>n.dispose()),this._root=null,this}}class Cct{constructor(n,c,M){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=M,this.low=n,this.high=c,this.max=this.high}insert(n){n.low<=this.low?this.left===null?this.left=n:this.left.insert(n):this.right===null?this.right=n:this.right.insert(n)}search(n,c){n>this.max||(this.left!==null&&this.left.search(n,c),this.low<=n&&this.high>n&&c.push(this),!(this.low>n)&&this.right!==null&&this.right.search(n,c))}searchAfter(n,c){this.low>=n&&(c.push(this),this.left!==null&&this.left.searchAfter(n,c)),this.right!==null&&this.right.searchAfter(n,c)}traverse(n){n(this),this.left!==null&&this.left.traverse(n),this.right!==null&&this.right.traverse(n)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let n=0;return this.left!==null&&this.right!==null?n=this.left.height-this.right.height:this.left!==null?n=this.left.height+1:this.right!==null&&(n=-(this.right.height+1)),n}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(n){this._left=n,n!==null&&(n.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(n){this._right=n,n!==null&&(n.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Mct extends Ua{constructor(n){super(),this.name="TimelineValue",this._timeline=new Xn({memory:10}),this._initialValue=n}set(n,c){return this._timeline.add({value:n,time:c}),this}get(n){const c=this._timeline.get(n);return c?c.value:this._initialValue}}class Ru extends Ne{constructor(){super(Fe(Ru.getDefaults(),arguments,["context"]))}connect(n,c=0,M=0){return XC(this,n,c,M),this}}class ac extends Ru{constructor(){const n=Fe(ac.getDefaults(),arguments,["mapping","length"]);super(n),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,mr(n.mapping)||n.mapping instanceof Float32Array?this.curve=Float32Array.from(n.mapping):Zft(n.mapping)&&this.setMap(n.mapping,n.length)}static getDefaults(){return Object.assign(ds.getDefaults(),{length:1024})}setMap(n,c=1024){const M=new Float32Array(c);for(let R=0,I=c;R<I;R++){const m=R/(I-1)*2-1;M[R]=n(m,R)}return this.curve=M,this}get curve(){return this._shaper.curve}set curve(n){this._shaper.curve=n}get oversample(){return this._shaper.oversample}set oversample(n){const c=["none","2x","4x"].some(M=>M.includes(n));Ie(c,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=n}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class KC extends Ru{constructor(){const n=Fe(KC.getDefaults(),arguments,["value"]);super(n),this.name="Pow",this._exponentScaler=this.input=this.output=new ac({context:this.context,mapping:this._expFunc(n.value),length:8192}),this._exponent=n.value}static getDefaults(){return Object.assign(Ru.getDefaults(),{value:1})}_expFunc(n){return c=>Math.pow(Math.abs(c),n)}get value(){return this._exponent}set value(n){this._exponent=n,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Do{constructor(n,c){this.id=Do._eventId++,this._remainderTime=0;const M=Object.assign(Do.getDefaults(),c);this.transport=n,this.callback=M.callback,this._once=M.once,this.time=Math.floor(M.time),this._remainderTime=M.time-this.time}static getDefaults(){return{callback:ni,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(n){if(this.callback){const c=this.transport.bpm.getDurationOfTicks(1,n);this.callback(n+this._remainderTime*c),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}Do._eventId=0;class JC extends Do{constructor(n,c){super(n,c),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const M=Object.assign(JC.getDefaults(),c);this.duration=M.duration,this._interval=M.interval,this._nextTick=M.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Do.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(n){this._createEvents(n),super.invoke(n)}_createEvent(){return _m(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new fu(this.context,this._nextTick).toSeconds()):-1}_createEvents(n){_m(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new fu(this.context,this._nextTick).toSeconds()))}_restart(n){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const c=this.transport.getTicksAtTime(n);bu(c,this.time)&&(this._nextTick=this.floatTime+Math.ceil((c-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class cg extends rn{constructor(){const n=Fe(cg.getDefaults(),arguments);super(n),this.name="Transport",this._loop=new Mct(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Xn,this._repeatedEvents=new Tct,this._syncedSignals=[],this._swingAmount=0,this._ppq=n.ppq,this._clock=new fg({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=n.ppq,this.bpm.setValueAtTime(n.bpm,0),Bi(this,"bpm"),this._timeSignature=n.timeSignature,this._swingTicks=n.ppq/2}static getDefaults(){return Object.assign(rn.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(n,c){if(this._loop.get(n)&&c>=this._loopEnd&&(this.emit("loopEnd",n),this._clock.setTicksAtTime(this._loopStart,n),c=this._loopStart,this.emit("loopStart",n,this._clock.getSecondsAtTime(n)),this.emit("loop",n)),this._swingAmount>0&&c%this._ppq!==0&&c%(this._swingTicks*2)!==0){const M=c%(this._swingTicks*2)/(this._swingTicks*2),R=Math.sin(M*Math.PI)*this._swingAmount;n+=new fu(this.context,this._swingTicks*2/3).toSeconds()*R}qL(!0),this._timeline.forEachAtTime(c,M=>M.invoke(n)),qL(!1)}schedule(n,c){const M=new Do(this,{callback:n,time:new Ff(this.context,c).toTicks()});return this._addEvent(M,this._timeline)}scheduleRepeat(n,c,M,R=1/0){const I=new JC(this,{callback:n,duration:new vr(this.context,R).toTicks(),interval:new vr(this.context,c).toTicks(),time:new Ff(this.context,M).toTicks()});return this._addEvent(I,this._repeatedEvents)}scheduleOnce(n,c){const M=new Do(this,{callback:n,once:!0,time:new Ff(this.context,c).toTicks()});return this._addEvent(M,this._timeline)}clear(n){if(this._scheduledEvents.hasOwnProperty(n)){const c=this._scheduledEvents[n.toString()];c.timeline.remove(c.event),c.event.dispose(),delete this._scheduledEvents[n.toString()]}return this}_addEvent(n,c){return this._scheduledEvents[n.id.toString()]={event:n,timeline:c},c.add(n),n.id}cancel(n=0){const c=this.toTicks(n);return this._timeline.forEachFrom(c,M=>this.clear(M.id)),this._repeatedEvents.forEachFrom(c,M=>this.clear(M.id)),this}_bindClockEvents(){this._clock.on("start",(n,c)=>{c=new fu(this.context,c).toSeconds(),this.emit("start",n,c)}),this._clock.on("stop",n=>{this.emit("stop",n)}),this._clock.on("pause",n=>{this.emit("pause",n)})}get state(){return this._clock.getStateAtTime(this.now())}start(n,c){this.context.resume();let M;return ke(c)&&(M=this.toTicks(c)),this._clock.start(n,M),this}stop(n){return this._clock.stop(n),this}pause(n){return this._clock.pause(n),this}toggle(n){return n=this.toSeconds(n),this._clock.getStateAtTime(n)!=="started"?this.start(n):this.stop(n),this}get timeSignature(){return this._timeSignature}set timeSignature(n){mr(n)&&(n=n[0]/n[1]*4),this._timeSignature=n}get loopStart(){return new vr(this.context,this._loopStart,"i").toSeconds()}set loopStart(n){this._loopStart=this.toTicks(n)}get loopEnd(){return new vr(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(n){this._loopEnd=this.toTicks(n)}get loop(){return this._loop.get(this.now())}set loop(n){this._loop.set(n,this.now())}setLoopPoints(n,c){return this.loopStart=n,this.loopEnd=c,this}get swing(){return this._swingAmount}set swing(n){this._swingAmount=n}get swingSubdivision(){return new fu(this.context,this._swingTicks).toNotation()}set swingSubdivision(n){this._swingTicks=this.toTicks(n)}get position(){const n=this.now(),c=this._clock.getTicksAtTime(n);return new fu(this.context,c).toBarsBeatsSixteenths()}set position(n){const c=this.toTicks(n);this.ticks=c}get seconds(){return this._clock.seconds}set seconds(n){const c=this.now(),M=this._clock.frequency.timeToTicks(n,c);this.ticks=M}get progress(){if(this.loop){const n=this.now();return(this._clock.getTicksAtTime(n)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(n){if(this._clock.ticks!==n){const c=this.now();if(this.state==="started"){const M=this._clock.getTicksAtTime(c),R=this._clock.frequency.getDurationOfTicks(Math.ceil(M)-M,c),I=c+R;this.emit("stop",I),this._clock.setTicksAtTime(n,I),this.emit("start",I,this._clock.getSecondsAtTime(I))}else this.emit("ticks",c),this._clock.setTicksAtTime(n,c)}}getTicksAtTime(n){return this._clock.getTicksAtTime(n)}getSecondsAtTime(n){return this._clock.getSecondsAtTime(n)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(n){this._clock.frequency.multiplier=n}nextSubdivision(n){if(n=this.toTicks(n),this.state!=="started")return 0;{const c=this.now(),M=this.getTicksAtTime(c),R=n-M%n;return this._clock.nextTickTime(R,c)}}syncSignal(n,c){const M=this.now();let R=this.bpm,I=1/(60/R.getValueAtTime(M)/this.PPQ),m=[];if(n.units==="time"){const i=.015625/I,d=new Ls(i),S=new KC(-1),u=new Ls(i);R.chain(d,S,u),R=u,I=1/I,m=[d,S,u]}c||(n.getValueAtTime(M)!==0?c=n.getValueAtTime(M)/I:c=0);const E=new Ls(c);return R.connect(E),E.connect(n._param),m.push(E),this._syncedSignals.push({initial:n.value,nodes:m,signal:n}),n.value=0,this}unsyncSignal(n){for(let c=this._syncedSignals.length-1;c>=0;c--){const M=this._syncedSignals[c];M.signal===n&&(M.nodes.forEach(R=>R.dispose()),M.signal.value=M.initial,this._syncedSignals.splice(c,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),eD(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}nc.mixin(cg);lg(L=>{L.transport=new cg({context:L})});ug(L=>{L.transport.dispose()});class Cn extends Ne{constructor(n){super(n),this.input=void 0,this._state=new zC("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=ni,this._syncedStop=ni,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Hu({context:this.context,mute:n.mute,volume:n.volume}),this.volume=this._volume.volume,Bi(this,"volume"),this.onstop=n.onstop}static getDefaults(){return Object.assign(Ne.getDefaults(),{mute:!1,onstop:ni,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(n){this._volume.mute=n}_clampToCurrentTime(n){return this._synced?n:Math.max(n,this.context.currentTime)}start(n,c,M){let R=Wn(n)&&this._synced?this.context.transport.seconds:this.toSeconds(n);if(R=this._clampToCurrentTime(R),!this._synced&&this._state.getValueAtTime(R)==="started")Ie(bu(R,this._state.get(R).time),"Start time must be strictly greater than previous start time"),this._state.cancel(R),this._state.setStateAtTime("started",R),this.log("restart",R),this.restart(R,c,M);else if(this.log("start",R),this._state.setStateAtTime("started",R),this._synced){const I=this._state.get(R);I&&(I.offset=this.toSeconds(yu(c,0)),I.duration=M?this.toSeconds(M):void 0);const m=this.context.transport.schedule(E=>{this._start(E,c,M)},R);this._scheduled.push(m),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>R&&this._syncedStart(this.now(),this.context.transport.seconds)}else KF(this.context),this._start(R,c,M);return this}stop(n){let c=Wn(n)&&this._synced?this.context.transport.seconds:this.toSeconds(n);if(c=this._clampToCurrentTime(c),this._state.getValueAtTime(c)==="started"||ke(this._state.getNextState("started",c))){if(this.log("stop",c),!this._synced)this._stop(c);else{const M=this.context.transport.schedule(this._stop.bind(this),c);this._scheduled.push(M)}this._state.cancel(c),this._state.setStateAtTime("stopped",c)}return this}restart(n,c,M){return n=this.toSeconds(n),this._state.getValueAtTime(n)==="started"&&(this._state.cancel(n),this._restart(n,c,M)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(n,c)=>{if(bu(c,0)){const M=this._state.get(c);if(M&&M.state==="started"&&M.time!==c){const R=c-this.toSeconds(M.time);let I;M.duration&&(I=this.toSeconds(M.duration)-R),this._start(n,this.toSeconds(M.offset)+R,I)}}},this._syncedStop=n=>{const c=this.context.transport.getSecondsAtTime(Math.max(n-this.sampleTime,0));this._state.getValueAtTime(c)==="started"&&this._stop(n)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(n=>this.context.transport.clear(n)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=ni,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class pg extends Au{constructor(){const n=Fe(pg.getDefaults(),arguments,["url","onload"]);super(n),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,Xu(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new bi({context:this.context,param:this._source.playbackRate,units:"positive",value:n.playbackRate}),this.loop=n.loop,this.loopStart=n.loopStart,this.loopEnd=n.loopEnd,this._buffer=new Ti(n.url,n.onload,n.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Au.getDefaults(),{url:new Ti,loop:!1,loopEnd:0,loopStart:0,onload:ni,onerror:ni,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(n){this._fadeIn=n}get fadeOut(){return this._fadeOut}set fadeOut(n){this._fadeOut=n}get curve(){return this._curve}set curve(n){this._curve=n}start(n,c,M,R=1){Ie(this.buffer.loaded,"buffer is either not set or not loaded");const I=this.toSeconds(n);this._startGain(I,R),this.loop?c=yu(c,this.loopStart):c=yu(c,0);let m=Math.max(this.toSeconds(c),0);if(this.loop){const E=this.toSeconds(this.loopEnd)||this.buffer.duration,i=this.toSeconds(this.loopStart),d=E-i;JT(m,E)&&(m=(m-i)%d+i),cr(m,this.buffer.duration)&&(m=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,_m(m,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(I,m)),ke(M)){let E=this.toSeconds(M);E=Math.max(E,0),this.stop(I+E)}return this}_stopSource(n){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(n)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(n){this._source.loopStart=this.toSeconds(n)}get loopEnd(){return this._source.loopEnd}set loopEnd(n){this._source.loopEnd=this.toSeconds(n)}get buffer(){return this._buffer}set buffer(n){this._buffer.set(n)}get loop(){return this._source.loop}set loop(n){this._source.loop=n,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function Jh(L,n){return Ki(this,void 0,void 0,function*(){const c=n/L.context.sampleRate,M=new kC(1,c,L.context.sampleRate);return new L.constructor(Object.assign(L.get(),{frequency:2/c,detune:0,context:M})).toDestination().start(0),(yield M.render()).getChannelData(0)})}class QC extends Au{constructor(){const n=Fe(QC.getDefaults(),arguments,["frequency","type"]);super(n),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],Xu(this._oscillator,this._gainNode),this.type=n.type,this.frequency=new bi({context:this.context,param:this._oscillator.frequency,units:"frequency",value:n.frequency}),this.detune=new bi({context:this.context,param:this._oscillator.detune,units:"cents",value:n.detune}),Bi(this,["frequency","detune"])}static getDefaults(){return Object.assign(Au.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(n){const c=this.toSeconds(n);return this.log("start",c),this._startGain(c),this._oscillator.start(c),this}_stopSource(n){this._oscillator.stop(n)}setPeriodicWave(n){return this._oscillator.setPeriodicWave(n),this}get type(){return this._oscillator.type}set type(n){this._oscillator.type=n}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Zi extends Cn{constructor(){const n=Fe(Zi.getDefaults(),arguments,["frequency","type"]);super(n),this.name="Oscillator",this._oscillator=null,this.frequency=new ds({context:this.context,units:"frequency",value:n.frequency}),Bi(this,"frequency"),this.detune=new ds({context:this.context,units:"cents",value:n.detune}),Bi(this,"detune"),this._partials=n.partials,this._partialCount=n.partialCount,this._type=n.type,n.partialCount&&n.type!=="custom"&&(this._type=this.baseType+n.partialCount.toString()),this.phase=n.phase}static getDefaults(){return Object.assign(Cn.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(n){const c=this.toSeconds(n),M=new QC({context:this.context,onended:()=>this.onstop(this)});this._oscillator=M,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(c)}_stop(n){const c=this.toSeconds(n);this._oscillator&&this._oscillator.stop(c)}_restart(n){const c=this.toSeconds(n);return this.log("restart",c),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(c),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Zi._periodicWaveCache.find(c=>c.phase===this._phase&&rct(c.partials,this._partials));{const n=Zi._periodicWaveCache.find(c=>c.type===this._type&&c.phase===this._phase);return this._partialCount=n?n.partialCount:this._partialCount,n}}get type(){return this._type}set type(n){this._type=n;const c=["sine","square","sawtooth","triangle"].indexOf(n)!==-1;if(this._phase===0&&c)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=n);else{const M=this._getCachedPeriodicWave();if(ke(M)){const{partials:R,wave:I}=M;this._wave=I,this._partials=R,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[R,I]=this._getRealImaginary(n,this._phase),m=this.context.createPeriodicWave(R,I);this._wave=m,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Zi._periodicWaveCache.push({imag:I,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:R,type:this._type,wave:this._wave}),Zi._periodicWaveCache.length>100&&Zi._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(n){this.partialCount&&this._type!=="custom"&&n!=="custom"?this.type=n+this.partialCount:this.type=n}get partialCount(){return this._partialCount}set partialCount(n){Fo(n,0);let c=this._type;const M=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(M&&(c=M[1]),this._type!=="custom")n===0?this.type=c:this.type=c+n.toString();else{const R=new Float32Array(n);this._partials.forEach((I,m)=>R[m]=I),this._partials=Array.from(R),this.type=this._type}}_getRealImaginary(n,c){let R=2048;const I=new Float32Array(R),m=new Float32Array(R);let E=1;if(n==="custom"){if(E=this._partials.length+1,this._partialCount=this._partials.length,R=E,this._partials.length===0)return[I,m]}else{const i=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(n);i?(E=parseInt(i[2],10)+1,this._partialCount=parseInt(i[2],10),n=i[1],E=Math.max(E,2),R=E):this._partialCount=0,this._partials=[]}for(let i=1;i<R;++i){const d=2/(i*Math.PI);let S;switch(n){case"sine":S=i<=E?1:0,this._partials[i-1]=S;break;case"square":S=i&1?2*d:0,this._partials[i-1]=S;break;case"sawtooth":S=d*(i&1?1:-1),this._partials[i-1]=S;break;case"triangle":i&1?S=2*(d*d)*(i-1>>1&1?-1:1):S=0,this._partials[i-1]=S;break;case"custom":S=this._partials[i-1];break;default:throw new TypeError("Oscillator: invalid type: "+n)}S!==0?(I[i]=-S*Math.sin(c*i),m[i]=S*Math.cos(c*i)):(I[i]=0,m[i]=0)}return[I,m]}_inverseFFT(n,c,M){let R=0;const I=n.length;for(let m=0;m<I;m++)R+=n[m]*Math.cos(m*M)+c[m]*Math.sin(m*M);return R}getInitialValue(){const[n,c]=this._getRealImaginary(this._type,0);let M=0;const R=Math.PI*2,I=32;for(let m=0;m<I;m++)M=Math.max(this._inverseFFT(n,c,m/I*R),M);return oct(-this._inverseFFT(n,c,this._phase)/M,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(n){this._partials=n,this._partialCount=this._partials.length,n.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(n){this._phase=n*Math.PI/180,this.type=this._type}asArray(){return Ki(this,arguments,void 0,function*(n=1024){return Jh(this,n)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Zi._periodicWaveCache=[];class Ect extends Ru{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new ac({context:this.context,mapping:n=>(n+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Lu extends ds{constructor(){const n=Fe(Lu.getDefaults(),arguments,["value"]);super(n),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Ls({context:this.context,minValue:n.minValue,maxValue:n.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(n.value,0)}static getDefaults(){return Object.assign(ds.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class vg extends Cn{constructor(){const n=Fe(vg.getDefaults(),arguments,["frequency","type","modulationType"]);super(n),this.name="AMOscillator",this._modulationScale=new Ect({context:this.context}),this._modulationNode=new Ls({context:this.context}),this._carrier=new Zi({context:this.context,detune:n.detune,frequency:n.frequency,onstop:()=>this.onstop(this),phase:n.phase,type:n.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Zi({context:this.context,phase:n.phase,type:n.modulationType}),this.harmonicity=new Lu({context:this.context,units:"positive",value:n.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Bi(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Zi.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(n){this._modulator.start(n),this._carrier.start(n)}_stop(n){this._modulator.stop(n),this._carrier.stop(n)}_restart(n){this._modulator.restart(n),this._carrier.restart(n)}get type(){return this._carrier.type}set type(n){this._carrier.type=n}get baseType(){return this._carrier.baseType}set baseType(n){this._carrier.baseType=n}get partialCount(){return this._carrier.partialCount}set partialCount(n){this._carrier.partialCount=n}get modulationType(){return this._modulator.type}set modulationType(n){this._modulator.type=n}get phase(){return this._carrier.phase}set phase(n){this._carrier.phase=n,this._modulator.phase=n}get partials(){return this._carrier.partials}set partials(n){this._carrier.partials=n}asArray(){return Ki(this,arguments,void 0,function*(n=1024){return Jh(this,n)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class mg extends Cn{constructor(){const n=Fe(mg.getDefaults(),arguments,["frequency","type","modulationType"]);super(n),this.name="FMOscillator",this._modulationNode=new Ls({context:this.context,gain:0}),this._carrier=new Zi({context:this.context,detune:n.detune,frequency:0,onstop:()=>this.onstop(this),phase:n.phase,type:n.type}),this.detune=this._carrier.detune,this.frequency=new ds({context:this.context,units:"frequency",value:n.frequency}),this._modulator=new Zi({context:this.context,phase:n.phase,type:n.modulationType}),this.harmonicity=new Lu({context:this.context,units:"positive",value:n.harmonicity}),this.modulationIndex=new Lu({context:this.context,units:"positive",value:n.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Bi(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Zi.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(n){this._modulator.start(n),this._carrier.start(n)}_stop(n){this._modulator.stop(n),this._carrier.stop(n)}_restart(n){return this._modulator.restart(n),this._carrier.restart(n),this}get type(){return this._carrier.type}set type(n){this._carrier.type=n}get baseType(){return this._carrier.baseType}set baseType(n){this._carrier.baseType=n}get partialCount(){return this._carrier.partialCount}set partialCount(n){this._carrier.partialCount=n}get modulationType(){return this._modulator.type}set modulationType(n){this._modulator.type=n}get phase(){return this._carrier.phase}set phase(n){this._carrier.phase=n,this._modulator.phase=n}get partials(){return this._carrier.partials}set partials(n){this._carrier.partials=n}asArray(){return Ki(this,arguments,void 0,function*(n=1024){return Jh(this,n)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class oc extends Cn{constructor(){const n=Fe(oc.getDefaults(),arguments,["frequency","width"]);super(n),this.name="PulseOscillator",this._widthGate=new Ls({context:this.context,gain:0}),this._thresh=new ac({context:this.context,mapping:c=>c<=0?-1:1}),this.width=new ds({context:this.context,units:"audioRange",value:n.width}),this._triangle=new Zi({context:this.context,detune:n.detune,frequency:n.frequency,onstop:()=>this.onstop(this),phase:n.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Bi(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Cn.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(n){n=this.toSeconds(n),this._triangle.start(n),this._widthGate.gain.setValueAtTime(1,n)}_stop(n){n=this.toSeconds(n),this._triangle.stop(n),this._widthGate.gain.cancelScheduledValues(n),this._widthGate.gain.setValueAtTime(0,n)}_restart(n){this._triangle.restart(n),this._widthGate.gain.cancelScheduledValues(n),this._widthGate.gain.setValueAtTime(1,n)}get phase(){return this._triangle.phase}set phase(n){this._triangle.phase=n}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(n){this._triangle.type=n}asArray(){return Ki(this,arguments,void 0,function*(n=1024){return Jh(this,n)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class gg extends Cn{constructor(){const n=Fe(gg.getDefaults(),arguments,["frequency","type","spread"]);super(n),this.name="FatOscillator",this._oscillators=[],this.frequency=new ds({context:this.context,units:"frequency",value:n.frequency}),this.detune=new ds({context:this.context,units:"cents",value:n.detune}),this._spread=n.spread,this._type=n.type,this._phase=n.phase,this._partials=n.partials,this._partialCount=n.partialCount,this.count=n.count,Bi(this,["frequency","detune"])}static getDefaults(){return Object.assign(Zi.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(n){n=this.toSeconds(n),this._forEach(c=>c.start(n))}_stop(n){n=this.toSeconds(n),this._forEach(c=>c.stop(n))}_restart(n){this._forEach(c=>c.restart(n))}_forEach(n){for(let c=0;c<this._oscillators.length;c++)n(this._oscillators[c],c)}get type(){return this._type}set type(n){this._type=n,this._forEach(c=>c.type=n)}get spread(){return this._spread}set spread(n){if(this._spread=n,this._oscillators.length>1){const c=-n/2,M=n/(this._oscillators.length-1);this._forEach((R,I)=>R.detune.value=c+M*I)}}get count(){return this._oscillators.length}set count(n){if(Fo(n,1),this._oscillators.length!==n){this._forEach(c=>c.dispose()),this._oscillators=[];for(let c=0;c<n;c++){const M=new Zi({context:this.context,volume:-6-n*1.1,type:this._type,phase:this._phase+c/n*360,partialCount:this._partialCount,onstop:c===0?()=>this.onstop(this):ni});this.type==="custom"&&(M.partials=this._partials),this.frequency.connect(M.frequency),this.detune.connect(M.detune),M.detune.overridden=!1,M.connect(this.output),this._oscillators[c]=M}this.spread=this._spread,this.state==="started"&&this._forEach(c=>c.start())}}get phase(){return this._phase}set phase(n){this._phase=n,this._forEach((c,M)=>c.phase=this._phase+M/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(n){this._forEach(c=>c.baseType=n),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(n){this._partials=n,this._partialCount=this._partials.length,n.length&&(this._type="custom",this._forEach(c=>c.partials=n))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(n){this._partialCount=n,this._forEach(c=>c.partialCount=n),this._type=this._oscillators[0].type}asArray(){return Ki(this,arguments,void 0,function*(n=1024){return Jh(this,n)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(n=>n.dispose()),this}}class xg extends Cn{constructor(){const n=Fe(xg.getDefaults(),arguments,["frequency","modulationFrequency"]);super(n),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Lu({context:this.context,value:2}),this._pulse=new oc({context:this.context,frequency:n.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Zi({context:this.context,detune:n.detune,frequency:n.frequency,onstop:()=>this.onstop(this),phase:n.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Bi(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Cn.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(n){n=this.toSeconds(n),this._modulator.start(n),this._pulse.start(n)}_stop(n){n=this.toSeconds(n),this._modulator.stop(n),this._pulse.stop(n)}_restart(n){this._modulator.restart(n),this._pulse.restart(n)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(n){this._modulator.phase=n}asArray(){return Ki(this,arguments,void 0,function*(n=1024){return Jh(this,n)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const iO={am:vg,fat:gg,fm:mg,oscillator:Zi,pulse:oc,pwm:xg};class Zm extends Cn{constructor(){const n=Fe(Zm.getDefaults(),arguments,["frequency","type"]);super(n),this.name="OmniOscillator",this.frequency=new ds({context:this.context,units:"frequency",value:n.frequency}),this.detune=new ds({context:this.context,units:"cents",value:n.detune}),Bi(this,["frequency","detune"]),this.set(n)}static getDefaults(){return Object.assign(Zi.getDefaults(),mg.getDefaults(),vg.getDefaults(),gg.getDefaults(),oc.getDefaults(),xg.getDefaults())}_start(n){this._oscillator.start(n)}_stop(n){this._oscillator.stop(n)}_restart(n){return this._oscillator.restart(n),this}get type(){let n="";return["am","fm","fat"].some(c=>this._sourceType===c)&&(n=this._sourceType),n+this._oscillator.type}set type(n){n.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=n.substr(2)):n.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=n.substr(2)):n.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=n.substr(3)):n==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):n==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=n)}get partials(){return this._oscillator.partials}set partials(n){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=n)}get partialCount(){return this._oscillator.partialCount}set partialCount(n){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=n)}set(n){return Reflect.has(n,"type")&&n.type&&(this.type=n.type),super.set(n),this}_createNewOscillator(n){if(n!==this._sourceType){this._sourceType=n;const c=iO[n],M=this.now();if(this._oscillator){const R=this._oscillator;R.stop(M),this.context.setTimeout(()=>R.dispose(),this.blockTime)}this._oscillator=new c({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(M)}}get phase(){return this._oscillator.phase}set phase(n){this._oscillator.phase=n}get sourceType(){return this._sourceType}set sourceType(n){let c="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(c=this._oscillator.type),n==="fm"?this.type="fm"+c:n==="am"?this.type="am"+c:n==="fat"?this.type="fat"+c:n==="oscillator"?this.type=c:n==="pulse"?this.type="pulse":n==="pwm"&&(this.type="pwm")}_getOscType(n,c){return n instanceof iO[c]}get baseType(){return this._oscillator.baseType}set baseType(n){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&n!=="pulse"&&n!=="pwm"&&(this._oscillator.baseType=n)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(n){this._getOscType(this._oscillator,"fat")&&Yh(n)&&(this._oscillator.count=n)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(n){this._getOscType(this._oscillator,"fat")&&Yh(n)&&(this._oscillator.spread=n)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(n){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Na(n)&&(this._oscillator.modulationType=n)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return Ki(this,arguments,void 0,function*(n=1024){return Jh(this,n)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function rD(L,n=1/0){const c=new WeakMap;return function(M,R){Reflect.defineProperty(M,R,{configurable:!0,enumerable:!0,get:function(){return c.get(this)},set:function(I){Fo(I,L,n),c.set(this,I)}})}}function ka(L,n=1/0){const c=new WeakMap;return function(M,R){Reflect.defineProperty(M,R,{configurable:!0,enumerable:!0,get:function(){return c.get(this)},set:function(I){Fo(this.toSeconds(I),L,n),c.set(this,I)}})}}let jC=class aD extends Cn{constructor(){const n=Fe(aD.getDefaults(),arguments,["url","onload"]);super(n),this.name="Player",this._activeSources=new Set,this._buffer=new Ti({onload:this._onload.bind(this,n.onload),onerror:n.onerror,reverse:n.reverse,url:n.url}),this.autostart=n.autostart,this._loop=n.loop,this._loopStart=n.loopStart,this._loopEnd=n.loopEnd,this._playbackRate=n.playbackRate,this.fadeIn=n.fadeIn,this.fadeOut=n.fadeOut}static getDefaults(){return Object.assign(Cn.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:ni,onerror:ni,playbackRate:1,reverse:!1})}load(n){return Ki(this,void 0,void 0,function*(){return yield this._buffer.load(n),this._onload(),this})}_onload(n=ni){n(),this.autostart&&this.start()}_onSourceEnd(n){this.onstop(this),this._activeSources.delete(n),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(n,c,M){return super.start(n,c,M),this}_start(n,c,M){this._loop?c=yu(c,this._loopStart):c=yu(c,0);const R=this.toSeconds(c),I=M;M=yu(M,Math.max(this._buffer.duration-R,0));let m=this.toSeconds(M);m=m/this._playbackRate,n=this.toSeconds(n);const E=new pg({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(n+m),this._state.setStateAtTime("stopped",n+m,{implicitEnd:!0})),this._activeSources.add(E),this._loop&&Wn(I)?E.start(n,R):E.start(n,R,m-this.toSeconds(this.fadeOut))}_stop(n){const c=this.toSeconds(n);this._activeSources.forEach(M=>M.stop(c))}restart(n,c,M){return super.restart(n,c,M),this}_restart(n,c,M){var R;(R=[...this._activeSources].pop())===null||R===void 0||R.stop(n),this._start(n,c,M)}seek(n,c){const M=this.toSeconds(c);if(this._state.getValueAtTime(M)==="started"){const R=this.toSeconds(n);this._stop(M),this._start(M,R)}return this}setLoopPoints(n,c){return this.loopStart=n,this.loopEnd=c,this}get loopStart(){return this._loopStart}set loopStart(n){this._loopStart=n,this.buffer.loaded&&Fo(this.toSeconds(n),0,this.buffer.duration),this._activeSources.forEach(c=>{c.loopStart=n})}get loopEnd(){return this._loopEnd}set loopEnd(n){this._loopEnd=n,this.buffer.loaded&&Fo(this.toSeconds(n),0,this.buffer.duration),this._activeSources.forEach(c=>{c.loopEnd=n})}get buffer(){return this._buffer}set buffer(n){this._buffer.set(n)}get loop(){return this._loop}set loop(n){if(this._loop!==n&&(this._loop=n,this._activeSources.forEach(c=>{c.loop=n}),n)){const c=this._state.getNextState("stopped",this.now());c&&this._state.cancel(c.time)}}get playbackRate(){return this._playbackRate}set playbackRate(n){this._playbackRate=n;const c=this.now(),M=this._state.getNextState("stopped",c);M&&M.implicitEnd&&(this._state.cancel(M.time),this._activeSources.forEach(R=>R.cancelStop())),this._activeSources.forEach(R=>{R.playbackRate.setValueAtTime(n,c)})}get reverse(){return this._buffer.reverse}set reverse(n){this._buffer.reverse=n}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(n=>n.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}};Sr([ka(0)],jC.prototype,"fadeIn",void 0);Sr([ka(0)],jC.prototype,"fadeOut",void 0);class Go extends Ne{constructor(){const n=Fe(Go.getDefaults(),arguments,["attack","decay","sustain","release"]);super(n),this.name="Envelope",this._sig=new ds({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=n.attack,this.decay=n.decay,this.sustain=n.sustain,this.release=n.release,this.attackCurve=n.attackCurve,this.releaseCurve=n.releaseCurve,this.decayCurve=n.decayCurve}static getDefaults(){return Object.assign(Ne.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(n,c){if(Na(n))return n;{let M;for(M in ym)if(ym[M][c]===n)return M;return n}}_setCurve(n,c,M){if(Na(M)&&Reflect.has(ym,M)){const R=ym[M];Wh(R)?n!=="_decayCurve"&&(this[n]=R[c]):this[n]=R}else if(mr(M)&&n!=="_decayCurve")this[n]=M;else throw new Error("Envelope: invalid curve: "+M)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(n){this._setCurve("_attackCurve","In",n)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(n){this._setCurve("_releaseCurve","Out",n)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(n){this._setCurve("_decayCurve","Out",n)}triggerAttack(n,c=1){this.log("triggerAttack",n,c),n=this.toSeconds(n);let R=this.toSeconds(this.attack);const I=this.toSeconds(this.decay),m=this.getValueAtTime(n);if(m>0){const E=1/R;R=(1-m)/E}if(R<this.sampleTime)this._sig.cancelScheduledValues(n),this._sig.setValueAtTime(c,n);else if(this._attackCurve==="linear")this._sig.linearRampTo(c,R,n);else if(this._attackCurve==="exponential")this._sig.targetRampTo(c,R,n);else{this._sig.cancelAndHoldAtTime(n);let E=this._attackCurve;for(let i=1;i<E.length;i++)if(E[i-1]<=m&&m<=E[i]){E=this._attackCurve.slice(i),E[0]=m;break}this._sig.setValueCurveAtTime(E,n,R,c)}if(I&&this.sustain<1){const E=c*this.sustain,i=n+R;this.log("decay",i),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(E,I+i):this._sig.exponentialApproachValueAtTime(E,i,I)}return this}triggerRelease(n){this.log("triggerRelease",n),n=this.toSeconds(n);const c=this.getValueAtTime(n);if(c>0){const M=this.toSeconds(this.release);M<this.sampleTime?this._sig.setValueAtTime(0,n):this._releaseCurve==="linear"?this._sig.linearRampTo(0,M,n):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,M,n):(Ie(mr(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(n),this._sig.setValueCurveAtTime(this._releaseCurve,n,M,c))}return this}getValueAtTime(n){return this._sig.getValueAtTime(n)}triggerAttackRelease(n,c,M=1){return c=this.toSeconds(c),this.triggerAttack(c,M),this.triggerRelease(c+this.toSeconds(n)),this}cancel(n){return this._sig.cancelScheduledValues(this.toSeconds(n)),this}connect(n,c=0,M=0){return XC(this,n,c,M),this}asArray(){return Ki(this,arguments,void 0,function*(n=1024){const c=n/this.context.sampleRate,M=new kC(1,c,this.context.sampleRate),R=this.toSeconds(this.attack)+this.toSeconds(this.decay),I=R+this.toSeconds(this.release),m=I*.1,E=I+m,i=new this.constructor(Object.assign(this.get(),{attack:c*this.toSeconds(this.attack)/E,decay:c*this.toSeconds(this.decay)/E,release:c*this.toSeconds(this.release)/E,context:M}));return i._sig.toDestination(),i.triggerAttackRelease(c*(R+m)/E,0),(yield M.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}Sr([ka(0)],Go.prototype,"attack",void 0);Sr([ka(0)],Go.prototype,"decay",void 0);Sr([rD(0,1)],Go.prototype,"sustain",void 0);Sr([ka(0)],Go.prototype,"release",void 0);const ym=(()=>{let n,c;const M=[];for(n=0;n<128;n++)M[n]=Math.sin(n/127*(Math.PI/2));const R=[],I=6.4;for(n=0;n<127;n++){c=n/127;const l=Math.sin(c*(Math.PI*2)*I-Math.PI/2)+1;R[n]=l/10+c*.83}R[127]=1;const m=[],E=5;for(n=0;n<128;n++)m[n]=Math.ceil(n/127*E)/E;const i=[];for(n=0;n<128;n++)c=n/127,i[n]=.5*(1-Math.cos(Math.PI*c));const d=[];for(n=0;n<128;n++){c=n/127;const l=Math.pow(c,3)*4+.2,h=Math.cos(l*Math.PI*2*c);d[n]=Math.abs(h*(1-c))}function S(l){const h=new Array(l.length);for(let r=0;r<l.length;r++)h[r]=1-l[r];return h}function u(l){return l.slice(0).reverse()}return{bounce:{In:S(d),Out:d},cosine:{In:M,Out:u(M)},exponential:"exponential",linear:"linear",ripple:{In:R,Out:S(R)},sine:{In:i,Out:S(i)},step:{In:m,Out:S(m)}}})();class Ou extends Ne{constructor(){const n=Fe(Ou.getDefaults(),arguments);super(n),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=c=>this._original_triggerRelease(c),this._volume=this.output=new Hu({context:this.context,volume:n.volume}),this.volume=this._volume.volume,Bi(this,"volume")}static getDefaults(){return Object.assign(Ne.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let n=!1;return this._synced||(this._synced=!0,n=!0),n}_syncMethod(n,c){const M=this["_original_"+n]=this[n];this[n]=(...R)=>{const I=R[c],m=this.context.transport.schedule(E=>{R[c]=E,M.apply(this,R)},I);this._scheduledEvents.push(m)}}unsync(){return this._scheduledEvents.forEach(n=>this.context.transport.clear(n)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(n,c,M,R){const I=this.toSeconds(M),m=this.toSeconds(c);return this.triggerAttack(n,I,R),this.triggerRelease(I+m),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Fu extends Ou{constructor(){const n=Fe(Fu.getDefaults(),arguments);super(n),this.portamento=n.portamento,this.onsilence=n.onsilence}static getDefaults(){return Object.assign(Ou.getDefaults(),{detune:0,onsilence:ni,portamento:0})}triggerAttack(n,c,M=1){this.log("triggerAttack",n,c,M);const R=this.toSeconds(c);return this._triggerEnvelopeAttack(R,M),this.setNote(n,R),this}triggerRelease(n){this.log("triggerRelease",n);const c=this.toSeconds(n);return this._triggerEnvelopeRelease(c),this}setNote(n,c){const M=this.toSeconds(c),R=n instanceof zn?n.toFrequency():n;if(this.portamento>0&&this.getLevelAtTime(M)>.05){const I=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(R,I,M)}else this.frequency.setValueAtTime(R,M);return this}}Sr([ka(0)],Fu.prototype,"portamento",void 0);class qC extends Go{constructor(){super(Fe(qC.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Ls({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Km extends Fu{constructor(){const n=Fe(Km.getDefaults(),arguments);super(n),this.name="Synth",this.oscillator=new Zm(Object.assign({context:this.context,detune:n.detune,onstop:()=>this.onsilence(this)},n.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new qC(Object.assign({context:this.context},n.envelope)),this.oscillator.chain(this.envelope,this.output),Bi(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Fu.getDefaults(),{envelope:Object.assign(tO(Go.getDefaults(),Object.keys(Ne.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(tO(Zm.getDefaults(),[...Object.keys(Cn.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(n,c){if(this.envelope.triggerAttack(n,c),this.oscillator.start(n),this.envelope.sustain===0){const M=this.toSeconds(this.envelope.attack),R=this.toSeconds(this.envelope.decay);this.oscillator.stop(n+M+R)}}_triggerEnvelopeRelease(n){this.envelope.triggerRelease(n),this.oscillator.stop(n+this.toSeconds(this.envelope.release))}getLevelAtTime(n){return n=this.toSeconds(n),this.envelope.getValueAtTime(n)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Du extends Km{constructor(){const n=Fe(Du.getDefaults(),arguments);super(n),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=n.pitchDecay,this.octaves=n.octaves,Bi(this,["oscillator","envelope"])}static getDefaults(){return xu(Fu.getDefaults(),Km.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(n,c){const M=this.toSeconds(c),R=this.toFrequency(n instanceof zn?n.toFrequency():n),I=R*this.octaves;return this.oscillator.frequency.setValueAtTime(I,M),this.oscillator.frequency.exponentialRampToValueAtTime(R,M+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Sr([rD(0)],Du.prototype,"octaves",void 0);Sr([ka(0)],Du.prototype,"pitchDecay",void 0);const oD=new Set;function t1(L){oD.add(L)}function hD(L,n){const c=`registerProcessor("${L}", ${n})`;oD.add(c)}const Pct=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;t1(Pct);const wct=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;t1(wct);const bct=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;t1(bct);const Act="feedback-comb-filter",Rct=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;hD(Act,Rct);class yg extends Ou{constructor(){const n=Fe(yg.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(n),this.name="Sampler",this._activeSources=new Map;const c={};Object.keys(n.urls).forEach(M=>{const R=parseInt(M,10);if(Ie(xm(M)||Yh(R)&&isFinite(R),`url key is neither a note or midi pitch: ${M}`),xm(M)){const I=new zn(this.context,M).toMidi();c[I]=n.urls[M]}else Yh(R)&&isFinite(R)&&(c[R]=n.urls[R])}),this._buffers=new ZC({urls:c,onload:n.onload,baseUrl:n.baseUrl,onerror:n.onerror}),this.attack=n.attack,this.release=n.release,this.curve=n.curve,this._buffers.loaded&&Promise.resolve().then(n.onload)}static getDefaults(){return Object.assign(Ou.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:ni,onerror:ni,release:.1,urls:{}})}_findClosest(n){let M=0;for(;M<96;){if(this._buffers.has(n+M))return-M;if(this._buffers.has(n-M))return M;M++}throw new Error(`No available buffers for note: ${n}`)}triggerAttack(n,c,M=1){return this.log("triggerAttack",n,c,M),Array.isArray(n)||(n=[n]),n.forEach(R=>{const I=nD(new zn(this.context,R).toFrequency()),m=Math.round(I),E=I-m,i=this._findClosest(m),d=m-i,S=this._buffers.get(d),u=sD(i+E),l=new pg({url:S,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:u}).connect(this.output);l.start(c,0,S.duration/u,M),mr(this._activeSources.get(m))||this._activeSources.set(m,[]),this._activeSources.get(m).push(l),l.onended=()=>{if(this._activeSources&&this._activeSources.has(m)){const h=this._activeSources.get(m),r=h.indexOf(l);r!==-1&&h.splice(r,1)}}}),this}triggerRelease(n,c){return this.log("triggerRelease",n,c),Array.isArray(n)||(n=[n]),n.forEach(M=>{const R=new zn(this.context,M).toMidi();if(this._activeSources.has(R)&&this._activeSources.get(R).length){const I=this._activeSources.get(R);c=this.toSeconds(c),I.forEach(m=>{m.stop(c)}),this._activeSources.set(R,[])}}),this}releaseAll(n){const c=this.toSeconds(n);return this._activeSources.forEach(M=>{for(;M.length;)M.shift().stop(c)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(n,c,M,R=1){const I=this.toSeconds(M);return this.triggerAttack(n,I,R),mr(c)?(Ie(mr(n),"notes must be an array when duration is array"),n.forEach((m,E)=>{const i=c[Math.min(E,c.length-1)];this.triggerRelease(m,I+this.toSeconds(i))})):this.triggerRelease(n,I+this.toSeconds(c)),this}add(n,c,M){if(Ie(xm(n)||isFinite(n),`note must be a pitch or midi: ${n}`),xm(n)){const R=new zn(this.context,n).toMidi();this._buffers.add(R,c,M)}else this._buffers.add(n,c,M);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(n=>{n.forEach(c=>c.dispose())}),this._activeSources.clear(),this}}Sr([ka(0)],yg.prototype,"attack",void 0);Sr([ka(0)],yg.prototype,"release",void 0);class e1 extends Ne{constructor(){const n=Fe(e1.getDefaults(),arguments,["pan"]);super(n),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new bi({context:this.context,param:this._panner.pan,value:n.pan,minValue:-1,maxValue:1}),this._panner.channelCount=n.channelCount,this._panner.channelCountMode="explicit",Bi(this,"pan")}static getDefaults(){return Object.assign(Ne.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const Lct="bit-crusher",Oct=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;hD(Lct,Oct);class $i extends Ne{constructor(){const n=Fe($i.getDefaults(),arguments,["solo"]);super(n),this.name="Solo",this.input=this.output=new Ls({context:this.context}),$i._allSolos.has(this.context)||$i._allSolos.set(this.context,new Set),$i._allSolos.get(this.context).add(this),this.solo=n.solo}static getDefaults(){return Object.assign(Ne.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(n){n?this._addSolo():this._removeSolo(),$i._allSolos.get(this.context).forEach(c=>c._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){$i._soloed.has(this.context)||$i._soloed.set(this.context,new Set),$i._soloed.get(this.context).add(this)}_removeSolo(){$i._soloed.has(this.context)&&$i._soloed.get(this.context).delete(this)}_isSoloed(){return $i._soloed.has(this.context)&&$i._soloed.get(this.context).has(this)}_noSolos(){return!$i._soloed.has(this.context)||$i._soloed.has(this.context)&&$i._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),$i._allSolos.get(this.context).delete(this),this._removeSolo(),this}}$i._allSolos=new Map;$i._soloed=new Map;class i1 extends Ne{constructor(){const n=Fe(i1.getDefaults(),arguments,["pan","volume"]);super(n),this.name="PanVol",this._panner=this.input=new e1({context:this.context,pan:n.pan,channelCount:n.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Hu({context:this.context,volume:n.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=n.mute,Bi(this,["pan","volume"])}static getDefaults(){return Object.assign(Ne.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(n){this._volume.mute=n}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class cu extends Ne{constructor(){const n=Fe(cu.getDefaults(),arguments,["volume","pan"]);super(n),this.name="Channel",this._solo=this.input=new $i({solo:n.solo,context:this.context}),this._panVol=this.output=new i1({context:this.context,pan:n.pan,volume:n.volume,mute:n.mute,channelCount:n.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Bi(this,["pan","volume"])}static getDefaults(){return Object.assign(Ne.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(n){this._solo.solo=n}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(n){this._panVol.mute=n}_getBus(n){return cu.buses.has(n)||cu.buses.set(n,new Ls({context:this.context})),cu.buses.get(n)}send(n,c=0){const M=this._getBus(n),R=new Ls({context:this.context,units:"decibels",gain:c});return this.connect(R),R.connect(M),R}receive(n){return this._getBus(n).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}cu.buses=new Map;function Wr(){return Vn().now()}Vn().transport;const Rh=Vn().destination;Vn().destination;Vn().listener;Vn().draw;const Aa=Vn();class _i{constructor(){this.bpm=166,this.beatsPerMeasure=4,this.beatCount=0,this.measureCount=0,this.nextBeatTime=0,this.isRunning=!1,this.audioEnabled=!1,this.volume=.1,this.lastSoundTime=0,this.isReady=!1,this.hasStarted=!1}static getInstance(){return _i.instance||(_i.instance=new _i),_i.instance}signalReady(n){n==="threejs"?(console.log("MetronomeManager: ThreeJS ready"),this.isReady=!0):n==="audiocontext"&&(console.log("MetronomeManager: Audio context ready"),this.enableAudio()),this.isReady&&this.audioEnabled&&!this.isRunning?(console.log("MetronomeManager: Starting metronome..."),this.hasStarted=!0,this.start()):this.isReady&&this.audioEnabled&&this.isRunning?console.log("MetronomeManager: Already running, ignoring signalReady call"):console.log(`MetronomeManager: Not ready to start. ThreeJS: ${this.isReady}, Audio: ${this.audioEnabled}, Running: ${this.isRunning}`)}start(){if(this.isRunning)return;if(this.isRunning=!0,this.beatCount===0&&!this.hasStarted)this.nextBeatTime=Date.now(),console.log("MetronomeManager: First start - initializing timing");else{const c=60/this.bpm*1e3,M=Date.now();this.nextBeatTime=M+c,console.log(`MetronomeManager: Restart - preserving beat count ${this.beatCount} and timing`)}const n=60/this.bpm*1e3;this.intervalId=window.setTimeout(()=>{this.playBeat(),this.scheduleNextBeat()},n)}scheduleNextBeat(){if(!this.isRunning)return;const n=60/this.bpm*1e3;this.nextBeatTime+=n;const c=this.nextBeatTime-Date.now();c>0?this.intervalId=window.setTimeout(()=>{this.playBeat(),this.scheduleNextBeat()},c):(this.playBeat(),this.scheduleNextBeat())}playBeat(){const n=this.beatCount%this.beatsPerMeasure;if(this.audioEnabled){const c=n===0;this.playBeatSound(c)}n===3&&this.measureCount++,this.beatCount++}playBeatSound(n){try{const c=Wr();if(c-this.lastSoundTime<.05)return;this.lastSoundTime=c,n&&this.audioDownbeatSynth?this.audioDownbeatSynth.triggerAttackRelease("C4","8n",c):!n&&this.audioSynth&&this.audioSynth.triggerAttackRelease("C2","8n",c)}catch(c){console.warn("MetronomeManager: Failed to play beat sound:",c)}}enableAudio(){if(!this.audioEnabled)try{if(Aa.state!=="running"){console.warn("MetronomeManager: Audio context not running");return}this.audioSynth=new Du().toDestination(),this.audioDownbeatSynth=new Du().toDestination(),this.audioSynth.volume.value=bo(this.volume),this.audioDownbeatSynth.volume.value=bo(this.volume),this.audioEnabled=!0,console.log("MetronomeManager: Audio enabled")}catch(n){console.error("MetronomeManager: Failed to enable audio:",n)}}stop(){this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=void 0),this.isRunning=!1}pause(){this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=void 0),this.isRunning=!1}resume(){if(this.isReady&&this.audioEnabled&&!this.isRunning){this.isRunning=!0;const n=Date.now(),c=n-this.nextBeatTime,M=60/this.bpm*1e3,R=Math.floor(c/M);this.nextBeatTime+=R*M;const I=this.nextBeatTime-n;I>0?this.intervalId=window.setTimeout(()=>{this.playBeat(),this.scheduleNextBeat()},I):(this.playBeat(),this.scheduleNextBeat())}}setBpm(n){this.bpm=n,this.isRunning&&(this.stop(),this.start())}setVolume(n){this.volume=n,this.audioSynth&&(this.audioSynth.volume.value=bo(n)),this.audioDownbeatSynth&&(this.audioDownbeatSynth.volume.value=bo(n))}getBpm(){return this.bpm}getGlobalBeatCount(){return this.beatCount}getGlobalMeasureCount(){return this.measureCount}getBeatInMeasure(){return this.beatCount%this.beatsPerMeasure}isAudioEnabled(){return this.audioEnabled}}class Fct extends ys.Scene{constructor(){super("MargeScene"),this.keys={},this.mouseX=0,this.mouseY=0,this.isMouseDown=!1,this.isRightMouseDown=!1,this.originalCarY=0,this.originalCarX=0,this.originalCarZ=0,this.bobbingAmplitude=.2,this.bobbingSpeed=1,this.lastMeasureCount=-1,this.bumpStartTime=0,this.bumpDuration=.15,this.bumpAmplitude=.2,this.cameraParams={positionX:18.9,positionY:-27,positionZ:-22,rotationX:-99,rotationY:0,rotationZ:-91,fov:140,fisheye:1,resetCamera:()=>this.resetCamera()},this.miniMapObjects=new Map,this.miniMapMouseDown=!1,this.miniMapMouseX=0,this.miniMapMouseY=0,this.miniMapRotationX=45,this.miniMapRotationY=0,this.miniMapDistance=20,this.threeJSManager=kh.getInstance()}isVerticalOrientation(){return window.innerWidth/window.innerHeight<1.1}initializeCameraForOrientation(){this.isVerticalOrientation()?(this.cameraParams.positionX=21.3,this.cameraParams.positionY=-25.2,this.cameraParams.positionZ=-22.2,this.cameraParams.rotationX=-99,this.cameraParams.rotationY=0,this.cameraParams.rotationZ=-91,this.cameraParams.fov=140,this.cameraParams.fisheye=1):(this.cameraParams.positionX=21.3,this.cameraParams.positionY=-25.2,this.cameraParams.positionZ=-22.2,this.cameraParams.rotationX=-99,this.cameraParams.rotationY=0,this.cameraParams.rotationZ=-91,this.cameraParams.fov=140,this.cameraParams.fisheye=1)}create(){this.cameras.main.setScroll(0,0);const{width:n,height:c}=this.scale.gameSize,{targetWidth:M,targetHeight:R}=Ys(n,c),I=(n-M)/2,m=(c-R)/2;this.debugText=this.add.text(0,0,"MargeScene - Loading...",{color:"#fff",fontSize:"16px",backgroundColor:"#000",padding:{x:8,y:4}}).setOrigin(.5,0).setPosition(I+M/2,m+20).setAlpha(.2),this.cameraInfoText=this.add.text(0,0,"Marge: (0,0,0) Rot:(0°,0°,0°)",{color:"#fff",fontSize:"12px",backgroundColor:"#000",padding:{x:6,y:3}}).setOrigin(0,1).setPosition(I+10,m+R-10).setAlpha(.2),this.initializeThreeJS(M,R,I,m),this.initializeMiniMap(),this.handleResize(window.innerWidth,window.innerHeight,0,0),this.scale.on("resize",()=>{var r,o;const{width:i,height:d}=this.scale.gameSize,{targetWidth:S,targetHeight:u}=Ys(i,d),l=(i-S)/2,h=(d-u)/2;(r=this.debugText)==null||r.setPosition(l+S/2,h+20),(o=this.cameraInfoText)==null||o.setPosition(l+10,h+u-10),this.updateDialPositions(l,h,S,u),this.handleResize(window.innerWidth,window.innerHeight,0,0)}),window.addEventListener("orientationchange",()=>{console.log("MargeScene: orientationchange event triggered");const i=window.cameraAnimationSystem,d=i&&i.isAnimating&&i.isAnimating(),S=i&&i.hasAnimationRecentlyCompleted&&i.hasAnimationRecentlyCompleted();console.log("MargeScene: orientationchange - isAnimationRunning:",d),console.log("MargeScene: orientationchange - hasAnimationRecentlyCompleted:",S),!d&&!S?(console.log("MargeScene: orientationchange - applying camera changes"),this.initializeCameraForOrientation(),this.updateCameraFromGUI(),setTimeout(()=>{console.log("MargeScene: orientationchange - delayed camera reset (300ms)"),this.initializeCameraForOrientation(),this.updateCameraFromGUI()},300)):console.log("MargeScene: orientationchange - skipping camera reset due to animation")});let E=this.isVerticalOrientation();window.addEventListener("resize",()=>{const i=this.isVerticalOrientation();if(i!==E){console.log("MargeScene: resize event triggered - orientation changed");const d=window.cameraAnimationSystem,S=d&&d.isAnimating&&d.isAnimating(),u=d&&d.hasAnimationRecentlyCompleted&&d.hasAnimationRecentlyCompleted();console.log("MargeScene: resize - isAnimationRunning:",S),console.log("MargeScene: resize - hasAnimationRecentlyCompleted:",u),!S&&!u?(console.log("MargeScene: resize - applying camera changes"),E=i,this.initializeCameraForOrientation(),this.updateCameraFromGUI(),setTimeout(()=>{console.log("MargeScene: resize - delayed camera reset (50ms)"),this.initializeCameraForOrientation(),this.updateCameraFromGUI()},50)):console.log("MargeScene: resize - skipping camera reset due to animation")}}),this.initializeCameraForOrientation(),this.createSteeringWheel(I,m,M,R),this.createTurnSignal(I,m,M,R),this.createTransmission(I,m,M,R),this.setupCameraControls()}initializeThreeJS(n,c,M,R){this.threeJSManager.initialize({width:window.innerWidth,height:window.innerHeight,backgroundColor:void 0,enableShadows:!0,enableFog:!1}),this.threeRenderer=this.threeJSManager.getRenderer(),this.camera=this.threeJSManager.getCamera(),this.threeRenderer&&this.camera&&(this.threeRenderer.domElement.style.position="absolute",this.threeRenderer.domElement.style.left=`${M}px`,this.threeRenderer.domElement.style.top=`${R}px`,this.threeRenderer.domElement.style.width=`${n}px`,this.threeRenderer.domElement.style.height=`${c}px`,this.threeRenderer.domElement.style.zIndex="-1",this.threeRenderer.domElement.style.pointerEvents="auto",this.threeRenderer.domElement.style.userSelect="none",this.threeRenderer.domElement.style.webkitUserSelect="none",this.threeRenderer.domElement.draggable=!1,this.game.canvas.parentNode.appendChild(this.threeRenderer.domElement),this.threeJSManager.render(),this.addCarModel())}addCarModel(){const n=this.threeJSManager.assetManager;if(!n||!n.isModelLoaded("marge")){this.debugText&&(this.debugText.setText("MargeScene - Model not ready, retrying..."),this.debugText.setColor("#ff0000")),this.time.delayedCall(50,()=>{this.addCarModel()});return}if(this.threeJSManager.addModelToScene("marge","marge-car",new wt(0,0,0),new Yn(0,Math.PI/2,0),new wt(.5,.5,.5))){if(this.carModel=this.threeJSManager.getModelInScene("marge-car"),this.carModel&&(this.originalCarY=this.carModel.position.y,this.originalCarX=this.carModel.position.x,this.originalCarZ=this.carModel.position.z),this.carModel){const R=new Hr({transparent:!0,opacity:1,depthWrite:!1,depthTest:!0}),I=new Fit({color:16777215,transparent:!1,opacity:1}),m=[];this.carModel.traverse(E=>{E instanceof fi&&(E.name.toLowerCase().includes("window")||E.name.toLowerCase().includes("glass")||E.name.toLowerCase().includes("mirror")||E.name.toLowerCase().includes("lens")||E.name.toLowerCase().includes("light")?E.material=R.clone():E.material=I.clone(),Array.isArray(E.material)?E.material.forEach(d=>m.push(d)):m.push(E.material))}),m.forEach(E=>{E.needsUpdate=!0})}if(this.debugText){const R=this.threeJSManager.getDitheringMode();this.debugText.setText(`MargeScene - Ready (${R} dithering)`),this.debugText.setColor("#fff")}_i.getInstance().signalReady("threejs")}else this.debugText&&(this.debugText.setText("MargeScene - Failed to add model to scene"),this.debugText.setColor("#ff0000"))}setupCameraControls(){!this.camera||!this.threeRenderer||(this.camera.position.set(this.cameraParams.positionX,this.cameraParams.positionY,this.cameraParams.positionZ),this.camera.rotation.set(this.cameraParams.rotationX*Math.PI/180,this.cameraParams.rotationY*Math.PI/180,this.cameraParams.rotationZ*Math.PI/180),this.camera.fov=this.cameraParams.fov,this.camera.updateProjectionMatrix(),this.setupKeyboardControls(),this.setupMouseControls(),this.time.delayedCall(100,()=>{this.setupGUIControls()}),this.events.on("update",()=>{var d;const n=window.cameraGUI;n&&n.update&&n.update();const c=n&&n.isVisible&&n.isVisible(),M=window.cameraAnimationSystem,R=M&&M.isAnimating&&M.isAnimating(),I=M&&M.hasAnimationRecentlyCompleted&&M.hasAnimationRecentlyCompleted(),m=(d=this.threeJSManager)==null?void 0:d.getCamera(),E=m&&(Math.abs(m.position.x-18.9)>.1||Math.abs(m.position.x-21.3)>.1||Math.abs(m.position.y- -27)>.1||Math.abs(m.position.z- -22)>.1),i=this.scene.key==="MargeScene";if(!c&&!R&&!I&&!E&&i&&this.updateCameraFromGUI(),this.updateCameraMovement(),this.updateCarBobbing(),this.camera&&this.cameraInfoText){const S=this.camera.position,u=this.camera.rotation;this.cameraInfoText.setText(`Marge: (${S.x.toFixed(1)},${S.y.toFixed(1)},${S.z.toFixed(1)}) Rot:(${(u.x*180/Math.PI).toFixed(0)}°,${(u.y*180/Math.PI).toFixed(0)}°,${(u.z*180/Math.PI).toFixed(0)}°)`)}this.threeJSManager.render()}))}setupKeyboardControls(){document.addEventListener("keydown",n=>{if(this.keys[n.key.toLowerCase()]=!0,n.key.toLowerCase()==="o"){const M=this.threeJSManager.getOutlineStrength()>0?0:1;if(this.threeJSManager.setOutlineStrength(M),this.debugText){const R=M>0?"outline on":"outline off";this.debugText.setText(`MargeScene - Ready (${R})`)}}}),document.addEventListener("keyup",n=>{this.keys[n.key.toLowerCase()]=!1})}setupMouseControls(){this.threeRenderer&&(this.threeRenderer.domElement.addEventListener("mousemove",n=>{if(this.isMouseDown||this.isRightMouseDown){const c=n.movementX||0,M=n.movementY||0;this.camera&&(this.camera.rotation.y-=c*.005,this.camera.rotation.x-=M*.005,this.camera.rotation.x=Math.max(-Math.PI/2,Math.min(Math.PI/2,this.camera.rotation.x)))}}),this.threeRenderer.domElement.addEventListener("click",n=>{this.handleRaycast(n)}),this.threeRenderer.domElement.addEventListener("mousedown",n=>{n.button===0?(this.isMouseDown=!0,this.threeRenderer.domElement.style.cursor="grabbing"):n.button===2&&(this.isRightMouseDown=!0,this.threeRenderer.domElement.style.cursor="grabbing")}),this.threeRenderer.domElement.addEventListener("mouseup",n=>{n.button===0?(this.isMouseDown=!1,this.threeRenderer.domElement.style.cursor="grab"):n.button===2&&(this.isRightMouseDown=!1,this.threeRenderer.domElement.style.cursor="grab")}),this.threeRenderer.domElement.addEventListener("contextmenu",n=>{n.preventDefault()}),this.threeRenderer.domElement.addEventListener("wheel",n=>{if(this.camera){const M=n.deltaY>0?1.05:.95;this.camera.position.multiplyScalar(M)}}))}updateCameraMovement(){if(!this.camera)return;const n=window.app;if(n&&n.cameraGUI&&n.cameraGUI.isVisible&&n.cameraGUI.isVisible())return;const R=this.keys.shift?.2:.05,I=new wt(0,0,-1),m=new wt(1,0,0),E=new wt(0,1,0);I.applyQuaternion(this.camera.quaternion),m.applyQuaternion(this.camera.quaternion),E.applyQuaternion(this.camera.quaternion),this.keys.w&&this.camera.position.add(I.clone().multiplyScalar(R)),this.keys.s&&this.camera.position.sub(I.clone().multiplyScalar(R)),this.keys.a&&this.camera.position.sub(m.clone().multiplyScalar(R)),this.keys.d&&this.camera.position.add(m.clone().multiplyScalar(R)),this.keys.q&&this.camera.position.sub(E.clone().multiplyScalar(R)),this.keys.e&&this.camera.position.add(E.clone().multiplyScalar(R)),this.keys.arrowup&&(this.camera.position.z-=R),this.keys.arrowdown&&(this.camera.position.z+=R),this.keys.arrowleft&&(this.camera.position.x-=R),this.keys.arrowright&&(this.camera.position.x+=R),this.keys.pageup&&(this.camera.position.y+=R),this.keys.pagedown&&(this.camera.position.y-=R),this.keys.z&&(this.camera.rotation.z+=.02),this.keys.c&&(this.camera.rotation.z-=.02),this.keys.r&&this.resetCamera()}updateCarBobbing(){if(!this.carModel)return;const n=window.app;if(!n)return;const c=n.metronomeBeatsPerMeasure||4;n.metronomeBpm,n.metronomeMeasureCount;const M=n.metronomeBeatCount||0;n.metronomeBeatCount%c;const I=(n.metronomeBeatCount+1)%c===0;n.metronomeBeatCount!==this.lastMeasureCount&&(this.lastMeasureCount=n.metronomeBeatCount,I&&(this.bumpStartTime=this.time.now/1e3));const m=c*4,i=M%m/m,d=i,S=(i+.33)%1,u=(i+.67)%1,l=Math.sin(d*Math.PI*2)*this.bobbingAmplitude,h=Math.sin(S*Math.PI*2)*this.bobbingAmplitude,r=Math.sin(u*Math.PI*2)*this.bobbingAmplitude,p=this.time.now/1e3-this.bumpStartTime;let a=0;if(p<this.bumpDuration){const v=p/this.bumpDuration;a=this.bumpAmplitude*(1-Math.pow(v,2))}this.carModel.position.x=this.originalCarX+l,this.carModel.position.y=this.originalCarY+h,this.carModel.position.z=this.originalCarZ+r,this.carModel.position.x+=a}setupGUIControls(){}updateCameraFromGUI(){if(!this.camera)return;const n=Math.abs(this.camera.position.x-this.cameraParams.positionX)+Math.abs(this.camera.position.y-this.cameraParams.positionY)+Math.abs(this.camera.position.z-this.cameraParams.positionZ);n>.1&&(console.log("MargeScene: updateCameraFromGUI called - significant position change"),console.log("MargeScene: Current camera position:",this.camera.position),console.log("MargeScene: cameraParams position:",{x:this.cameraParams.positionX,y:this.cameraParams.positionY,z:this.cameraParams.positionZ})),this.camera.position.set(this.cameraParams.positionX,this.cameraParams.positionY,this.cameraParams.positionZ),this.camera.rotation.set(this.cameraParams.rotationX*Math.PI/180,this.cameraParams.rotationY*Math.PI/180,this.cameraParams.rotationZ*Math.PI/180),this.camera.fov=this.cameraParams.fov,this.camera.updateProjectionMatrix(),this.cameraParams.fisheye>0&&this.applyFisheyeEffect(),n>.1&&console.log("MargeScene: Camera updated to position:",this.camera.position)}applyFisheyeEffect(){if(!this.camera)return;const n=this.cameraParams.fisheye;this.camera.aspect,this.camera.fov*Math.PI/180,this.camera.updateProjectionMatrix();const c=this.camera.projectionMatrix.clone();c.elements[0]*=1+n*.5,c.elements[5]*=1+n*.5,this.camera.projectionMatrix=c}resetCamera(){this.isVerticalOrientation()?(this.cameraParams.positionX=21.3,this.cameraParams.positionY=-25.2,this.cameraParams.positionZ=-22.2,this.cameraParams.rotationX=-99,this.cameraParams.rotationY=0,this.cameraParams.rotationZ=-91,this.cameraParams.fov=140,this.cameraParams.fisheye=1):(this.cameraParams.positionX=21.3,this.cameraParams.positionY=-25.2,this.cameraParams.positionZ=-22.2,this.cameraParams.rotationX=-99,this.cameraParams.rotationY=0,this.cameraParams.rotationZ=-91,this.cameraParams.fov=140,this.cameraParams.fisheye=1)}createCameraControlsOverlay(){}handleResize(n,c,M,R){this.threeJSManager.resize(n,c),this.threeRenderer&&(this.threeRenderer.domElement.style.left="0px",this.threeRenderer.domElement.style.top="0px",this.threeRenderer.domElement.style.width=`${n}px`,this.threeRenderer.domElement.style.height=`${c}px`,this.threeRenderer.domElement.style.userSelect="none",this.threeRenderer.domElement.style.webkitUserSelect="none",this.threeRenderer.domElement.style.pointerEvents="auto",this.threeRenderer.domElement.style.zIndex="-1",this.threeRenderer.domElement.draggable=!1)}handleRaycast(n){if(!this.camera||!this.threeRenderer)return;const c=this.threeRenderer.domElement.getBoundingClientRect(),M=new Ve;M.x=(n.clientX-c.left)/c.width*2-1,M.y=-((n.clientY-c.top)/c.height)*2+1;const R=new Yit;R.setFromCamera(M,this.camera);const I=this.threeJSManager.getModelInScene("marge-car");if(!I)return;const m=R.intersectObjects(I.children,!0);m.length>0&&m[0].object instanceof fi}createSteeringWheel(n,c,M,R){const I=n+M/2,m=c+R*.7;this.steeringWheel=new JS(this,{x:I,y:m,radius:80,startPosition:0,allowFreeRotation:!1,returnToCenter:!0,returnToCenterSpeed:.1,visualStyle:{outerColor:3355443,innerColor:16777215,hubColor:0,lineColor:0,lineWidth:4,showSnapMarks:!1}})}createTurnSignal(n,c,M,R){const I=n+M*.3,m=c+R*.7;this.turnSignal=new JS(this,{x:I,y:m,radius:60,snapPositions:[Math.PI+Math.PI*.15,Math.PI-Math.PI*.15],startPosition:Math.PI-Math.PI*.15,allowFreeRotation:!0,visualStyle:{outerColor:3355443,innerColor:16777215,hubColor:0,lineColor:0,lineWidth:3,showSnapMarks:!0}})}createTransmission(n,c,M,R){const I=n+M*.7,m=c+R*.7,E=[Math.PI*5/3,Math.PI*11/6,0,Math.PI/6,Math.PI/3];this.transmission=new JS(this,{x:I,y:m,radius:60,snapPositions:E,startPosition:Math.PI/3,allowFreeRotation:!0,visualStyle:{outerColor:3355443,innerColor:16777215,hubColor:0,lineColor:0,lineWidth:3,showSnapMarks:!0}})}updateDialPositions(n,c,M,R){if(this.steeringWheel){const I=n+M/2,m=c+R*.7;this.steeringWheel.updatePosition(I,m)}if(this.turnSignal){const I=n+M*.3,m=c+R*.7;this.turnSignal.updatePosition(I,m)}if(this.transmission){const I=n+M*.7,m=c+R*.7;this.transmission.updatePosition(I,m)}}initializeMiniMap(){const n=window.innerWidth,c=window.innerHeight,M=n/c,R=1.1,I=16/9,m=9/16;let E=n,i=c,d;M>=R?(d=I,i=c,E=c*d,E>n&&(E=n,i=n/d)):(d=m,E=n,i=n/d,i>c&&(i=c,E=n/d));const S=(n-E)/2,u=(c-i)/2;this.miniMapContainer=document.createElement("div"),this.miniMapContainer.style.position="fixed",this.miniMapContainer.style.bottom=`${u+20}px`,this.miniMapContainer.style.left=`${S+20}px`,this.miniMapContainer.style.width="200px",this.miniMapContainer.style.height="150px",this.miniMapContainer.style.border="2px solid rgba(255, 255, 255, 0.8)",this.miniMapContainer.style.backgroundColor="rgba(0, 0, 0, 1)",this.miniMapContainer.style.zIndex="1000",this.miniMapContainer.style.pointerEvents="auto",document.body.appendChild(this.miniMapContainer),this.miniMapRenderer=new eF({antialias:!1,alpha:!1,preserveDrawingBuffer:!1}),this.miniMapRenderer.setSize(200,150),this.miniMapRenderer.setPixelRatio(.5),this.miniMapRenderer.setClearColor(0,1),this.miniMapContainer.appendChild(this.miniMapRenderer.domElement),this.miniMapScene=new HO,this.miniMapCamera=new zs(60,200/150,.1,1e3),this.miniMapCamera.position.set(20,20,20),this.miniMapCamera.lookAt(0,0,0),this.miniMapContainer.addEventListener("mousedown",l=>{this.miniMapMouseDown=!0,this.miniMapMouseX=l.clientX,this.miniMapMouseY=l.clientY}),this.miniMapContainer.addEventListener("mousemove",l=>{if(this.miniMapMouseDown){const h=l.clientX-this.miniMapMouseX,r=l.clientY-this.miniMapMouseY;this.miniMapRotationY+=h*.5,this.miniMapRotationX+=r*.5,this.miniMapRotationX=Math.max(-80,Math.min(80,this.miniMapRotationX)),this.updateMiniMapCamera(),this.miniMapMouseX=l.clientX,this.miniMapMouseY=l.clientY}}),this.miniMapContainer.addEventListener("mouseup",()=>{this.miniMapMouseDown=!1}),this.miniMapContainer.addEventListener("mouseleave",()=>{this.miniMapMouseDown=!1}),this.miniMapContainer.addEventListener("wheel",l=>{l.preventDefault();const h=.1;this.miniMapDistance+=l.deltaY*h,this.miniMapDistance=Math.max(5,Math.min(50,this.miniMapDistance)),this.updateMiniMapCamera()}),this.renderMiniMap()}updateMiniMapCamera(){if(!this.miniMapCamera)return;const n=this.miniMapDistance*Math.cos(this.miniMapRotationY*Math.PI/180)*Math.cos(this.miniMapRotationX*Math.PI/180),c=this.miniMapDistance*Math.sin(this.miniMapRotationX*Math.PI/180),M=this.miniMapDistance*Math.sin(this.miniMapRotationY*Math.PI/180)*Math.cos(this.miniMapRotationX*Math.PI/180);this.miniMapCamera.position.set(n,c,M),this.miniMapCamera.lookAt(0,0,0)}createMiniMapRepresentation(){if(!this.miniMapScene)return;this.miniMapObjects.forEach(c=>{this.miniMapScene.remove(c)}),this.miniMapObjects.clear();const n=this.threeJSManager.getScene();n&&n.traverse(c=>{c instanceof fi&&c.name?this.createMiniMapCarModel(c):c instanceof Oo&&this.createMiniMapLight(c)})}createMiniMapCarModel(n){if(!this.miniMapScene)return;const c=n.clone();c.scale.set(.1,.1,.1),c.position.copy(n.position);const M=new Gh;M.add(c),M.name=`minimap_car_${n.name}`,this.miniMapScene.add(M),this.miniMapObjects.set(n.name,M)}createMiniMapLight(n){if(!this.miniMapScene)return;const c=new eg(.5,8,8),M=new Hr({color:16776960,transparent:!0,opacity:.6}),R=new fi(c,M);R.position.copy(n.position),R.name=`minimap_light_${n.name||"unnamed"}`,this.miniMapScene.add(R),this.miniMapObjects.set(n.name||"unnamed_light",R)}updateMiniMapSelection(){this.miniMapObjects.forEach((n,c)=>{if(n instanceof Gh)n.traverse(M=>{if(M instanceof fi){const R=M.material;this.isObjectSelected(c)?(R.color.setHex(16711680),R.opacity=1):(R.color.setHex(16777215),R.opacity=.6)}});else if(n instanceof fi){const M=n.material;this.isObjectSelected(c)?(M.color.setHex(16711680),M.opacity=1):(M.color.setHex(16777215),M.opacity=.6)}})}isObjectSelected(n){const c=window.modelGUI;if(c&&c.selectedPart&&c.selectedPart.name===n||c&&c.selectedGroup&&c.selectedGroup.name===n)return!0;const M=window.lightGUI;return!!(M&&M.selectedLight&&M.selectedLight.name===n||n.includes("camera")||n.includes("Camera"))}renderMiniMap(){!this.miniMapRenderer||!this.miniMapCamera||!this.miniMapScene||(this.createMiniMapRepresentation(),this.updateMiniMapSelection(),this.miniMapRenderer.render(this.miniMapScene,this.miniMapCamera),requestAnimationFrame(()=>this.renderMiniMap()))}shutdown(){var n,c,M;this.threeJSManager.removeModelFromScene("marge-car"),this.threeRenderer&&this.threeRenderer.domElement.remove(),this.miniMapContainer&&this.miniMapContainer.remove(),this.miniMapRenderer&&this.miniMapRenderer.dispose(),(n=this.steeringWheel)==null||n.destroy(),(c=this.turnSignal)==null||c.destroy(),(M=this.transmission)==null||M.destroy()}}class Dct extends ys.Scene{constructor(){super("BackseatScene")}create(){const{width:n,height:c}=this.scale.gameSize,{targetWidth:M,targetHeight:R}=Ys(n,c),I=(n-M)/2,m=(c-R)/2,E=this.add.text(0,0,"BackseatScene",{color:"#fff",fontSize:"16px",backgroundColor:"#000"}).setOrigin(0,.5).setPosition(I+40,m+R/2);this.scale.on("resize",()=>{const{width:i,height:d}=this.scale.gameSize,{targetWidth:S,targetHeight:u}=Ys(i,d),l=(i-S)/2,h=(d-u)/2;E.setPosition(l+40,h+u/2)})}}class Ict extends ys.Scene{constructor(){super("InventoryScene")}create(){const{width:n,height:c}=this.scale.gameSize,{targetWidth:M,targetHeight:R}=Ys(n,c),I=(n-M)/2,m=(c-R)/2,E=this.add.text(0,0,"InventoryScene",{color:"#fff",fontSize:"16px",backgroundColor:"#000"}).setOrigin(1,.5).setPosition(I+M-40,m+R/2);this.scale.on("resize",()=>{const{width:i,height:d}=this.scale.gameSize,{targetWidth:S,targetHeight:u}=Ys(i,d),l=(i-S)/2,h=(d-u)/2;E.setPosition(l+S-40,h+u/2)})}}class Bct extends ys.Scene{constructor(){super("VenueScene")}create(){const{width:n,height:c}=this.scale.gameSize,{targetWidth:M,targetHeight:R}=Ys(n,c),I=(n-M)/2,m=(c-R)/2,E=this.add.text(0,0,"VenueScene",{color:"#fff",fontSize:"16px",backgroundColor:"#000"}).setOrigin(.5).setPosition(I+M/2,m+R/2);this.scale.on("resize",()=>{const{width:i,height:d}=this.scale.gameSize,{targetWidth:S,targetHeight:u}=Ys(i,d),l=(i-S)/2,h=(d-u)/2;E.setPosition(l+S/2,h+u/2)})}}const Nct="modulepreload",Gct=function(L){return"/making-it-worse-deploy/"+L},sO={},jS=function(n,c,M){let R=Promise.resolve();if(c&&c.length>0){document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),E=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));R=Promise.allSettled(c.map(i=>{if(i=Gct(i),i in sO)return;sO[i]=!0;const d=i.endsWith(".css"),S=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${S}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":Nct,d||(u.as="script"),u.crossOrigin="",u.href=i,E&&u.setAttribute("nonce",E),document.head.appendChild(u),d)return new Promise((l,h)=>{u.addEventListener("load",l),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})}))}function I(m){const E=new Event("vite:preloadError",{cancelable:!0});if(E.payload=m,window.dispatchEvent(E),!E.defaultPrevented)throw m}return R.then(m=>{for(const E of m||[])E.status==="rejected"&&I(E.reason);return n().catch(I)})};class Uct{constructor(n){this.screens=new Map,this.phaserGame=n}getAnimationPath(n){const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname.includes("localhost"),M=window.location.pathname.includes("making-it-worse-deploy");let R;return c?R=`/assets/${n}`:M?R=`/making-it-worse-deploy/${n}`:R=`/${n}`,R}addScreen(n){this.screens.set(n.name,n)}getScreen(n){return this.screens.get(n)}listScreens(){return Array.from(this.screens.keys())}getTransitionType(n){switch(n){case"Marge (Road behind)":return"slideLeft";case"Backseat (Inventory overlay)":return"slideRight";case"Venue":return"slideUp";default:return"none"}}switchTo(n){var R;const c=this.screens.get(n);if(!c)throw new Error(`Screen '${n}' does not exist.`);const M=this.getTransitionType(n);for(const I of c.sceneKeys){const m=this.phaserGame.scene.getScene(I);if(m&&m.cameras&&m.cameras.main){m.cameras.main.setVisible(!0),m.cameras.main.setScroll(0,0);const E=m.cameras.main,i=E.width,d=E.height;let S=0,u=0;M==="slideLeft"&&(S=-i),M==="slideRight"&&(S=i),M==="slideUp"&&(u=-d),M!=="none"&&(E.setScroll(S,u),m.tweens.add({targets:E,scrollX:0,scrollY:0,duration:500,ease:"Cubic.easeOut"}))}}c.activate(this.phaserGame),this.previousScreen=this.currentScreen,this.currentScreen=c,n==="Backseat (Inventory overlay)"?this.loadAndPlayAnimation(this.getAnimationPath("animations/turn_to_back_v.json")):n==="Marge (Road behind)"&&((R=this.previousScreen)==null?void 0:R.name)==="Backseat (Inventory overlay)"&&this.loadAndPlayAnimation(this.getAnimationPath("animations/turn_to_front_v.json"))}loadAndPlayAnimation(n){console.log("Loading animation from:",n),fetch(n).then(c=>c.json()).then(c=>{const M=window.app;console.log("App found:",!!M),console.log("App properties:",M?Object.keys(M):"No app");let R=M==null?void 0:M.cameraAnimationSystem;console.log("Camera animation system found:",!!R),console.log("Camera animation system from window:",window.cameraAnimationSystem),!R&&(M!=null&&M.threeJSManager)?(console.log("Camera animation system not available, attempting to initialize..."),jS(async()=>{const{CameraAnimationSystem:I}=await Promise.resolve().then(()=>mO);return{CameraAnimationSystem:I}},void 0).then(({CameraAnimationSystem:I})=>{R=I.getInstance(),R.initialize(M.threeJSManager),window.cameraAnimationSystem=R,M.cameraAnimationSystem=R,console.log("Camera animation system initialized successfully"),this.playAnimationWithSystem(R,c,n)}).catch(I=>{console.error("Failed to initialize camera animation system:",I)})):R?this.playAnimationWithSystem(R,c,n):console.warn("Camera animation system not available and cannot be initialized")}).catch(c=>{console.error("Error loading animation:",c)})}playAnimationWithSystem(n,c,M){var I;let R=window.cameraGUI;if(console.log("CameraGUI found:",!!R),n)!R&&((I=window.app)!=null&&I.threeJSManager)?(console.log("CameraGUI not available, attempting to initialize..."),jS(async()=>{const{CameraGUI:m}=await Promise.resolve().then(()=>hpt);return{CameraGUI:m}},void 0).then(({CameraGUI:m})=>{const E=window.app;R=new m(E.threeJSManager,n),window.cameraGUI=R,console.log("CameraGUI initialized successfully"),n.loadAndPlayAnimation(c),console.log("Playing animation:",M)}).catch(m=>{console.error("Failed to initialize CameraGUI:",m),n.loadAndPlayAnimation(c),console.log("Playing animation without CameraGUI:",M)})):(n.loadAndPlayAnimation(c),console.log("Playing animation:",M));else{console.warn("Camera animation system not available");const m=window.cameraAnimationSystem;m&&(console.log("Found camera animation system on window, using that instead"),m.loadAndPlayAnimation(c),console.log("Playing animation:",M))}}getCurrentScreen(){return this.currentScreen}testCameraAnimationSystem(){console.log("ScreenManager: Testing camera animation system...");const n=window.app;console.log("ScreenManager: App available:",!!n),console.log("ScreenManager: App threeJSManager available:",!!(n!=null&&n.threeJSManager));let c=n==null?void 0:n.cameraAnimationSystem;console.log("ScreenManager: Camera animation system available:",!!c),!c&&(n!=null&&n.threeJSManager)?(console.log("ScreenManager: Initializing camera animation system..."),jS(async()=>{const{CameraAnimationSystem:M}=await Promise.resolve().then(()=>mO);return{CameraAnimationSystem:M}},void 0).then(({CameraAnimationSystem:M})=>{c=M.getInstance(),c.initialize(n.threeJSManager),window.cameraAnimationSystem=c,n.cameraAnimationSystem=c,console.log("ScreenManager: Camera animation system initialized successfully"),console.log("ScreenManager: Animation system methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(c)))}).catch(M=>{console.error("ScreenManager: Failed to initialize camera animation system:",M)})):c&&(console.log("ScreenManager: Camera animation system already available"),console.log("ScreenManager: Animation system methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(c))))}}class qS{constructor(n,c){this.sharedContext={},this.name=n,this.sceneKeys=c}activate(n){for(const R of this.sceneKeys)!n.scene.isActive(R)&&!n.scene.isSleeping(R)&&n.scene.run(R);for(const R of this.sceneKeys)n.scene.bringToTop(R);n.scene.bringToTop("UIScene");const c=n.scene.getScene("MenuScene");c&&c.cameras.main.setVisible(!1);const M=n.scene.getScenes(!0).map(R=>R.scene.key);for(const R of M){const I=n.scene.getScene(R);this.sceneKeys.includes(R)||R==="UIScene"?I.cameras.main.setVisible(!0):I.cameras.main.setVisible(!1)}}broadcast(n,c,M){var R;for(const I of this.sceneKeys){const m=n.scene.getScene(I);(R=m==null?void 0:m.events)==null||R.emit(c,M)}}}class kct{constructor(n){this.currentScene="",this.state="NotStarted",this.app=n,this.threeJSManager=kh.getInstance();const c={type:ys.AUTO,parent:"game-container",backgroundColor:"transparent",render:{transparent:!0,antialias:!0,pixelArt:!1,roundPixels:!1},scale:{mode:ys.Scale.RESIZE,width:"100%",height:"100%",autoCenter:ys.Scale.CENTER_BOTH},scene:[Bot,Fct,zot,kot,Not,Dct,Ict,Bct],plugins:{global:[{key:"rexAnchor",plugin:net,start:!0}],scene:[{key:"rexUI",plugin:EO||ret,mapping:"rexUI"}]}};this.phaserGame=new ys.Game(c),this.phaserGame.gameInstance=this,this.cameraManager=new Vot(this.phaserGame),this.screenManager=new Uct(this.phaserGame),this.screenManager.addScreen(new qS("Marge (Road behind)",["RoadScene","MargeScene"])),this.screenManager.addScreen(new qS("Backseat (Inventory overlay)",["BackseatScene","InventoryScene"])),this.screenManager.addScreen(new qS("Venue",["VenueScene"])),this.phaserGame.scene.start("PreloadScene"),window.testCameraAnimation=()=>{this.screenManager.testCameraAnimationSystem()},this.state="NotStarted"}setMenuVisible(n){this.phaserGame.scene.getScene("MenuScene")&&(n?(this.phaserGame.scene.bringToTop("MenuScene"),this.phaserGame.scene.wake("MenuScene"),this.state="Menu"):(this.phaserGame.scene.sleep("MenuScene"),this.state="Playing"),this.app.updateMetronomeState())}switchScene(n){this.currentScene=n,this.phaserGame.scene.start(n),n==="MenuScene"&&(this.state="Menu"),this.app.updateMetronomeState()}startGame(){try{console.log("Game: Starting game..."),this.state="Started",console.log("Game: Using simplified scene loading..."),this.phaserGame.scene.isActive("UIScene")||this.phaserGame.scene.start("UIScene"),this.phaserGame.scene.bringToTop("UIScene"),this.waitForThreeJSReady().then(()=>{try{console.log("Game: Three.js is ready, switching to Marge screen..."),this.screenManager.switchTo("Marge (Road behind)")}catch(n){console.error("Game: Error switching to Marge screen:",n)}}).catch(n=>{console.error("Game: Error waiting for Three.js:",n),setTimeout(()=>{try{this.screenManager.switchTo("Marge (Road behind)")}catch(c){console.error("Game: Fallback scene switch also failed:",c)}},3e3)}),this.phaserGame.scene.isActive("MenuScene")||(this.phaserGame.scene.start("MenuScene"),this.phaserGame.scene.sleep("MenuScene")),this.app.updateMetronomeState(),console.log("Game: Game started successfully")}catch(n){console.error("Game: Error starting game:",n),this.phaserGame.scene.isActive("UIScene")||this.phaserGame.scene.start("UIScene"),this.app.updateMetronomeState()}}async waitForThreeJSReady(){return new Promise((n,c)=>{let I=0;const m=()=>{const E=this.threeJSManager.assetManager;if(E&&E.getLoadedModelCount()>0){console.log("Game: Three.js is ready with loaded models"),_i.getInstance().signalReady("threejs"),n();return}if(I+=100,I>=3e4){console.warn("Game: Three.js ready timeout, proceeding anyway"),_i.getInstance().signalReady("threejs"),n();return}setTimeout(m,100)};m()})}pauseGame(){this.state="Paused",this.phaserGame.scene.pause("MainScene"),this.app.pauseAudio(),this.app.updateMetronomeState()}resumeGame(){this.state="Playing",this.phaserGame.scene.resume("MainScene"),this.app.resumeAudio(),this.app.updateMetronomeState()}endGame(){this.state="Ending",this.app.updateMetronomeState()}}const nO="phaser_player_data";class Vct{constructor(){this.data={name:"Player1",progress:0},this.state="Waiting"}save(){localStorage.setItem(nO,JSON.stringify(this.data))}load(){const n=localStorage.getItem(nO);n&&(this.data=JSON.parse(n))}setState(n){this.state=n}}function zct(L){if(!(typeof window>"u")){var n=document.createElement("style");return n.setAttribute("type","text/css"),n.innerHTML=L,document.head.appendChild(n),L}}function pu(L,n){var c=L.__state.conversionName.toString(),M=Math.round(L.r),R=Math.round(L.g),I=Math.round(L.b),m=L.a,E=Math.round(L.h),i=L.s.toFixed(1),d=L.v.toFixed(1);if(n||c==="THREE_CHAR_HEX"||c==="SIX_CHAR_HEX"){for(var S=L.hex.toString(16);S.length<6;)S="0"+S;return"#"+S}else{if(c==="CSS_RGB")return"rgb("+M+","+R+","+I+")";if(c==="CSS_RGBA")return"rgba("+M+","+R+","+I+","+m+")";if(c==="HEX")return"0x"+L.hex.toString(16);if(c==="RGB_ARRAY")return"["+M+","+R+","+I+"]";if(c==="RGBA_ARRAY")return"["+M+","+R+","+I+","+m+"]";if(c==="RGB_OBJ")return"{r:"+M+",g:"+R+",b:"+I+"}";if(c==="RGBA_OBJ")return"{r:"+M+",g:"+R+",b:"+I+",a:"+m+"}";if(c==="HSV_OBJ")return"{h:"+E+",s:"+i+",v:"+d+"}";if(c==="HSVA_OBJ")return"{h:"+E+",s:"+i+",v:"+d+",a:"+m+"}"}return"unknown format"}var rO=Array.prototype.forEach,Mf=Array.prototype.slice,Ht={BREAK:{},extend:function(n){return this.each(Mf.call(arguments,1),function(c){var M=this.isObject(c)?Object.keys(c):[];M.forEach((function(R){this.isUndefined(c[R])||(n[R]=c[R])}).bind(this))},this),n},defaults:function(n){return this.each(Mf.call(arguments,1),function(c){var M=this.isObject(c)?Object.keys(c):[];M.forEach((function(R){this.isUndefined(n[R])&&(n[R]=c[R])}).bind(this))},this),n},compose:function(){var n=Mf.call(arguments);return function(){for(var c=Mf.call(arguments),M=n.length-1;M>=0;M--)c=[n[M].apply(this,c)];return c[0]}},each:function(n,c,M){if(n){if(rO&&n.forEach&&n.forEach===rO)n.forEach(c,M);else if(n.length===n.length+0){var R=void 0,I=void 0;for(R=0,I=n.length;R<I;R++)if(R in n&&c.call(M,n[R],R)===this.BREAK)return}else for(var m in n)if(c.call(M,n[m],m)===this.BREAK)return}},defer:function(n){setTimeout(n,0)},debounce:function(n,c,M){var R=void 0;return function(){var I=this,m=arguments;function E(){R=null,M||n.apply(I,m)}var i=M||!R;clearTimeout(R),R=setTimeout(E,c),i&&n.apply(I,m)}},toArray:function(n){return n.toArray?n.toArray():Mf.call(n)},isUndefined:function(n){return n===void 0},isNull:function(n){return n===null},isNaN:function(L){function n(c){return L.apply(this,arguments)}return n.toString=function(){return L.toString()},n}(function(L){return isNaN(L)}),isArray:Array.isArray||function(L){return L.constructor===Array},isObject:function(n){return n===Object(n)},isNumber:function(n){return n===n+0},isString:function(n){return n===n+""},isBoolean:function(n){return n===!1||n===!0},isFunction:function(n){return n instanceof Function}},Wct=[{litmus:Ht.isString,conversions:{THREE_CHAR_HEX:{read:function(n){var c=n.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return c===null?!1:{space:"HEX",hex:parseInt("0x"+c[1].toString()+c[1].toString()+c[2].toString()+c[2].toString()+c[3].toString()+c[3].toString(),0)}},write:pu},SIX_CHAR_HEX:{read:function(n){var c=n.match(/^#([A-F0-9]{6})$/i);return c===null?!1:{space:"HEX",hex:parseInt("0x"+c[1].toString(),0)}},write:pu},CSS_RGB:{read:function(n){var c=n.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return c===null?!1:{space:"RGB",r:parseFloat(c[1]),g:parseFloat(c[2]),b:parseFloat(c[3])}},write:pu},CSS_RGBA:{read:function(n){var c=n.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return c===null?!1:{space:"RGB",r:parseFloat(c[1]),g:parseFloat(c[2]),b:parseFloat(c[3]),a:parseFloat(c[4])}},write:pu}}},{litmus:Ht.isNumber,conversions:{HEX:{read:function(n){return{space:"HEX",hex:n,conversionName:"HEX"}},write:function(n){return n.hex}}}},{litmus:Ht.isArray,conversions:{RGB_ARRAY:{read:function(n){return n.length!==3?!1:{space:"RGB",r:n[0],g:n[1],b:n[2]}},write:function(n){return[n.r,n.g,n.b]}},RGBA_ARRAY:{read:function(n){return n.length!==4?!1:{space:"RGB",r:n[0],g:n[1],b:n[2],a:n[3]}},write:function(n){return[n.r,n.g,n.b,n.a]}}}},{litmus:Ht.isObject,conversions:{RGBA_OBJ:{read:function(n){return Ht.isNumber(n.r)&&Ht.isNumber(n.g)&&Ht.isNumber(n.b)&&Ht.isNumber(n.a)?{space:"RGB",r:n.r,g:n.g,b:n.b,a:n.a}:!1},write:function(n){return{r:n.r,g:n.g,b:n.b,a:n.a}}},RGB_OBJ:{read:function(n){return Ht.isNumber(n.r)&&Ht.isNumber(n.g)&&Ht.isNumber(n.b)?{space:"RGB",r:n.r,g:n.g,b:n.b}:!1},write:function(n){return{r:n.r,g:n.g,b:n.b}}},HSVA_OBJ:{read:function(n){return Ht.isNumber(n.h)&&Ht.isNumber(n.s)&&Ht.isNumber(n.v)&&Ht.isNumber(n.a)?{space:"HSV",h:n.h,s:n.s,v:n.v,a:n.a}:!1},write:function(n){return{h:n.h,s:n.s,v:n.v,a:n.a}}},HSV_OBJ:{read:function(n){return Ht.isNumber(n.h)&&Ht.isNumber(n.s)&&Ht.isNumber(n.v)?{space:"HSV",h:n.h,s:n.s,v:n.v}:!1},write:function(n){return{h:n.h,s:n.s,v:n.v}}}}}],Ef=void 0,Sm=void 0,qT=function(){Sm=!1;var n=arguments.length>1?Ht.toArray(arguments):arguments[0];return Ht.each(Wct,function(c){if(c.litmus(n))return Ht.each(c.conversions,function(M,R){if(Ef=M.read(n),Sm===!1&&Ef!==!1)return Sm=Ef,Ef.conversionName=R,Ef.conversion=M,Ht.BREAK}),Ht.BREAK}),Sm},aO=void 0,Jm={hsv_to_rgb:function(n,c,M){var R=Math.floor(n/60)%6,I=n/60-Math.floor(n/60),m=M*(1-c),E=M*(1-I*c),i=M*(1-(1-I)*c),d=[[M,i,m],[E,M,m],[m,M,i],[m,E,M],[i,m,M],[M,m,E]][R];return{r:d[0]*255,g:d[1]*255,b:d[2]*255}},rgb_to_hsv:function(n,c,M){var R=Math.min(n,c,M),I=Math.max(n,c,M),m=I-R,E=void 0,i=void 0;if(I!==0)i=m/I;else return{h:NaN,s:0,v:0};return n===I?E=(c-M)/m:c===I?E=2+(M-n)/m:E=4+(n-c)/m,E/=6,E<0&&(E+=1),{h:E*360,s:i,v:I/255}},rgb_to_hex:function(n,c,M){var R=this.hex_with_component(0,2,n);return R=this.hex_with_component(R,1,c),R=this.hex_with_component(R,0,M),R},component_from_hex:function(n,c){return n>>c*8&255},hex_with_component:function(n,c,M){return M<<(aO=c*8)|n&~(255<<aO)}},Xct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},Tr=function(L,n){if(!(L instanceof n))throw new TypeError("Cannot call a class as a function")},Cr=function(){function L(n,c){for(var M=0;M<c.length;M++){var R=c[M];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(n,R.key,R)}}return function(n,c,M){return c&&L(n.prototype,c),M&&L(n,M),n}}(),Io=function L(n,c,M){n===null&&(n=Function.prototype);var R=Object.getOwnPropertyDescriptor(n,c);if(R===void 0){var I=Object.getPrototypeOf(n);return I===null?void 0:L(I,c,M)}else{if("value"in R)return R.value;var m=R.get;return m===void 0?void 0:m.call(M)}},Uo=function(L,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);L.prototype=Object.create(n&&n.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(L,n):L.__proto__=n)},ko=function(L,n){if(!L)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:L},us=function(){function L(){if(Tr(this,L),this.__state=qT.apply(this,arguments),this.__state===!1)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return Cr(L,[{key:"toString",value:function(){return pu(this)}},{key:"toHexString",value:function(){return pu(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),L}();function s1(L,n,c){Object.defineProperty(L,n,{get:function(){return this.__state.space==="RGB"?this.__state[n]:(us.recalculateRGB(this,n,c),this.__state[n])},set:function(R){this.__state.space!=="RGB"&&(us.recalculateRGB(this,n,c),this.__state.space="RGB"),this.__state[n]=R}})}function n1(L,n){Object.defineProperty(L,n,{get:function(){return this.__state.space==="HSV"?this.__state[n]:(us.recalculateHSV(this),this.__state[n])},set:function(M){this.__state.space!=="HSV"&&(us.recalculateHSV(this),this.__state.space="HSV"),this.__state[n]=M}})}us.recalculateRGB=function(L,n,c){if(L.__state.space==="HEX")L.__state[n]=Jm.component_from_hex(L.__state.hex,c);else if(L.__state.space==="HSV")Ht.extend(L.__state,Jm.hsv_to_rgb(L.__state.h,L.__state.s,L.__state.v));else throw new Error("Corrupted color state")};us.recalculateHSV=function(L){var n=Jm.rgb_to_hsv(L.r,L.g,L.b);Ht.extend(L.__state,{s:n.s,v:n.v}),Ht.isNaN(n.h)?Ht.isUndefined(L.__state.h)&&(L.__state.h=0):L.__state.h=n.h};us.COMPONENTS=["r","g","b","h","s","v","hex","a"];s1(us.prototype,"r",2);s1(us.prototype,"g",1);s1(us.prototype,"b",0);n1(us.prototype,"h");n1(us.prototype,"s");n1(us.prototype,"v");Object.defineProperty(us.prototype,"a",{get:function(){return this.__state.a},set:function(n){this.__state.a=n}});Object.defineProperty(us.prototype,"hex",{get:function(){return this.__state.space!=="HEX"&&(this.__state.hex=Jm.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(n){this.__state.space="HEX",this.__state.hex=n}});var Qh=function(){function L(n,c){Tr(this,L),this.initialValue=n[c],this.domElement=document.createElement("div"),this.object=n,this.property=c,this.__onChange=void 0,this.__onFinishChange=void 0}return Cr(L,[{key:"onChange",value:function(c){return this.__onChange=c,this}},{key:"onFinishChange",value:function(c){return this.__onFinishChange=c,this}},{key:"setValue",value:function(c){return this.object[this.property]=c,this.__onChange&&this.__onChange.call(this,c),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),L}(),Hct={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},lD={};Ht.each(Hct,function(L,n){Ht.each(L,function(c){lD[c]=n})});var Yct=/(\d+(\.\d+)?)px/;function zr(L){if(L==="0"||Ht.isUndefined(L))return 0;var n=L.match(Yct);return Ht.isNull(n)?0:parseFloat(n[1])}var It={makeSelectable:function(n,c){n===void 0||n.style===void 0||(n.onselectstart=c?function(){return!1}:function(){},n.style.MozUserSelect=c?"auto":"none",n.style.KhtmlUserSelect=c?"auto":"none",n.unselectable=c?"on":"off")},makeFullscreen:function(n,c,M){var R=M,I=c;Ht.isUndefined(I)&&(I=!0),Ht.isUndefined(R)&&(R=!0),n.style.position="absolute",I&&(n.style.left=0,n.style.right=0),R&&(n.style.top=0,n.style.bottom=0)},fakeEvent:function(n,c,M,R){var I=M||{},m=lD[c];if(!m)throw new Error("Event type "+c+" not supported.");var E=document.createEvent(m);switch(m){case"MouseEvents":{var i=I.x||I.clientX||0,d=I.y||I.clientY||0;E.initMouseEvent(c,I.bubbles||!1,I.cancelable||!0,window,I.clickCount||1,0,0,i,d,!1,!1,!1,!1,0,null);break}case"KeyboardEvents":{var S=E.initKeyboardEvent||E.initKeyEvent;Ht.defaults(I,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),S(c,I.bubbles||!1,I.cancelable,window,I.ctrlKey,I.altKey,I.shiftKey,I.metaKey,I.keyCode,I.charCode);break}default:{E.initEvent(c,I.bubbles||!1,I.cancelable||!0);break}}Ht.defaults(E,R),n.dispatchEvent(E)},bind:function(n,c,M,R){var I=R||!1;return n.addEventListener?n.addEventListener(c,M,I):n.attachEvent&&n.attachEvent("on"+c,M),It},unbind:function(n,c,M,R){var I=R||!1;return n.removeEventListener?n.removeEventListener(c,M,I):n.detachEvent&&n.detachEvent("on"+c,M),It},addClass:function(n,c){if(n.className===void 0)n.className=c;else if(n.className!==c){var M=n.className.split(/ +/);M.indexOf(c)===-1&&(M.push(c),n.className=M.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return It},removeClass:function(n,c){if(c)if(n.className===c)n.removeAttribute("class");else{var M=n.className.split(/ +/),R=M.indexOf(c);R!==-1&&(M.splice(R,1),n.className=M.join(" "))}else n.className=void 0;return It},hasClass:function(n,c){return new RegExp("(?:^|\\s+)"+c+"(?:\\s+|$)").test(n.className)||!1},getWidth:function(n){var c=getComputedStyle(n);return zr(c["border-left-width"])+zr(c["border-right-width"])+zr(c["padding-left"])+zr(c["padding-right"])+zr(c.width)},getHeight:function(n){var c=getComputedStyle(n);return zr(c["border-top-width"])+zr(c["border-bottom-width"])+zr(c["padding-top"])+zr(c["padding-bottom"])+zr(c.height)},getOffset:function(n){var c=n,M={left:0,top:0};if(c.offsetParent)do M.left+=c.offsetLeft,M.top+=c.offsetTop,c=c.offsetParent;while(c);return M},isActive:function(n){return n===document.activeElement&&(n.type||n.href)}},uD=function(L){Uo(n,L);function n(c,M){Tr(this,n);var R=ko(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,c,M)),I=R;R.__prev=R.getValue(),R.__checkbox=document.createElement("input"),R.__checkbox.setAttribute("type","checkbox");function m(){I.setValue(!I.__prev)}return It.bind(R.__checkbox,"change",m,!1),R.domElement.appendChild(R.__checkbox),R.updateDisplay(),R}return Cr(n,[{key:"setValue",value:function(M){var R=Io(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"setValue",this).call(this,M);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),R}},{key:"updateDisplay",value:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),Io(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"updateDisplay",this).call(this)}}]),n}(Qh),$ct=function(L){Uo(n,L);function n(c,M,R){Tr(this,n);var I=ko(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,c,M)),m=R,E=I;if(I.__select=document.createElement("select"),Ht.isArray(m)){var i={};Ht.each(m,function(d){i[d]=d}),m=i}return Ht.each(m,function(d,S){var u=document.createElement("option");u.innerHTML=S,u.setAttribute("value",d),E.__select.appendChild(u)}),I.updateDisplay(),It.bind(I.__select,"change",function(){var d=this.options[this.selectedIndex].value;E.setValue(d)}),I.domElement.appendChild(I.__select),I}return Cr(n,[{key:"setValue",value:function(M){var R=Io(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"setValue",this).call(this,M);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),R}},{key:"updateDisplay",value:function(){return It.isActive(this.__select)?this:(this.__select.value=this.getValue(),Io(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"updateDisplay",this).call(this))}}]),n}(Qh),_ct=function(L){Uo(n,L);function n(c,M){Tr(this,n);var R=ko(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,c,M)),I=R;function m(){I.setValue(I.__input.value)}function E(){I.__onFinishChange&&I.__onFinishChange.call(I,I.getValue())}return R.__input=document.createElement("input"),R.__input.setAttribute("type","text"),It.bind(R.__input,"keyup",m),It.bind(R.__input,"change",m),It.bind(R.__input,"blur",E),It.bind(R.__input,"keydown",function(i){i.keyCode===13&&this.blur()}),R.updateDisplay(),R.domElement.appendChild(R.__input),R}return Cr(n,[{key:"updateDisplay",value:function(){return It.isActive(this.__input)||(this.__input.value=this.getValue()),Io(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"updateDisplay",this).call(this)}}]),n}(Qh);function oO(L){var n=L.toString();return n.indexOf(".")>-1?n.length-n.indexOf(".")-1:0}var dD=function(L){Uo(n,L);function n(c,M,R){Tr(this,n);var I=ko(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,c,M)),m=R||{};return I.__min=m.min,I.__max=m.max,I.__step=m.step,Ht.isUndefined(I.__step)?I.initialValue===0?I.__impliedStep=1:I.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(I.initialValue))/Math.LN10))/10:I.__impliedStep=I.__step,I.__precision=oO(I.__impliedStep),I}return Cr(n,[{key:"setValue",value:function(M){var R=M;return this.__min!==void 0&&R<this.__min?R=this.__min:this.__max!==void 0&&R>this.__max&&(R=this.__max),this.__step!==void 0&&R%this.__step!==0&&(R=Math.round(R/this.__step)*this.__step),Io(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"setValue",this).call(this,R)}},{key:"min",value:function(M){return this.__min=M,this}},{key:"max",value:function(M){return this.__max=M,this}},{key:"step",value:function(M){return this.__step=M,this.__impliedStep=M,this.__precision=oO(M),this}}]),n}(Qh);function Zct(L,n){var c=Math.pow(10,n);return Math.round(L*c)/c}var Qm=function(L){Uo(n,L);function n(c,M,R){Tr(this,n);var I=ko(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,c,M,R));I.__truncationSuspended=!1;var m=I,E=void 0;function i(){var r=parseFloat(m.__input.value);Ht.isNaN(r)||m.setValue(r)}function d(){m.__onFinishChange&&m.__onFinishChange.call(m,m.getValue())}function S(){d()}function u(r){var o=E-r.clientY;m.setValue(m.getValue()+o*m.__impliedStep),E=r.clientY}function l(){It.unbind(window,"mousemove",u),It.unbind(window,"mouseup",l),d()}function h(r){It.bind(window,"mousemove",u),It.bind(window,"mouseup",l),E=r.clientY}return I.__input=document.createElement("input"),I.__input.setAttribute("type","text"),It.bind(I.__input,"change",i),It.bind(I.__input,"blur",S),It.bind(I.__input,"mousedown",h),It.bind(I.__input,"keydown",function(r){r.keyCode===13&&(m.__truncationSuspended=!0,this.blur(),m.__truncationSuspended=!1,d())}),I.updateDisplay(),I.domElement.appendChild(I.__input),I}return Cr(n,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():Zct(this.getValue(),this.__precision),Io(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"updateDisplay",this).call(this)}}]),n}(dD);function hO(L,n,c,M,R){return M+(R-M)*((L-n)/(c-n))}var tC=function(L){Uo(n,L);function n(c,M,R,I,m){Tr(this,n);var E=ko(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,c,M,{min:R,max:I,step:m})),i=E;E.__background=document.createElement("div"),E.__foreground=document.createElement("div"),It.bind(E.__background,"mousedown",d),It.bind(E.__background,"touchstart",l),It.addClass(E.__background,"slider"),It.addClass(E.__foreground,"slider-fg");function d(o){document.activeElement.blur(),It.bind(window,"mousemove",S),It.bind(window,"mouseup",u),S(o)}function S(o){o.preventDefault();var p=i.__background.getBoundingClientRect();return i.setValue(hO(o.clientX,p.left,p.right,i.__min,i.__max)),!1}function u(){It.unbind(window,"mousemove",S),It.unbind(window,"mouseup",u),i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())}function l(o){o.touches.length===1&&(It.bind(window,"touchmove",h),It.bind(window,"touchend",r),h(o))}function h(o){var p=o.touches[0].clientX,a=i.__background.getBoundingClientRect();i.setValue(hO(p,a.left,a.right,i.__min,i.__max))}function r(){It.unbind(window,"touchmove",h),It.unbind(window,"touchend",r),i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())}return E.updateDisplay(),E.__background.appendChild(E.__foreground),E.domElement.appendChild(E.__background),E}return Cr(n,[{key:"updateDisplay",value:function(){var M=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=M*100+"%",Io(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"updateDisplay",this).call(this)}}]),n}(dD),fD=function(L){Uo(n,L);function n(c,M,R){Tr(this,n);var I=ko(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,c,M)),m=I;return I.__button=document.createElement("div"),I.__button.innerHTML=R===void 0?"Fire":R,It.bind(I.__button,"click",function(E){return E.preventDefault(),m.fire(),!1}),It.addClass(I.__button,"button"),I.domElement.appendChild(I.__button),I}return Cr(n,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),n}(Qh),eC=function(L){Uo(n,L);function n(c,M){Tr(this,n);var R=ko(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,c,M));R.__color=new us(R.getValue()),R.__temp=new us(0);var I=R;R.domElement=document.createElement("div"),It.makeSelectable(R.domElement,!1),R.__selector=document.createElement("div"),R.__selector.className="selector",R.__saturation_field=document.createElement("div"),R.__saturation_field.className="saturation-field",R.__field_knob=document.createElement("div"),R.__field_knob.className="field-knob",R.__field_knob_border="2px solid ",R.__hue_knob=document.createElement("div"),R.__hue_knob.className="hue-knob",R.__hue_field=document.createElement("div"),R.__hue_field.className="hue-field",R.__input=document.createElement("input"),R.__input.type="text",R.__input_textShadow="0 1px 1px ",It.bind(R.__input,"keydown",function(o){o.keyCode===13&&u.call(this)}),It.bind(R.__input,"blur",u),It.bind(R.__selector,"mousedown",function(){It.addClass(this,"drag").bind(window,"mouseup",function(){It.removeClass(I.__selector,"drag")})}),It.bind(R.__selector,"touchstart",function(){It.addClass(this,"drag").bind(window,"touchend",function(){It.removeClass(I.__selector,"drag")})});var m=document.createElement("div");Ht.extend(R.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),Ht.extend(R.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:R.__field_knob_border+(R.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),Ht.extend(R.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),Ht.extend(R.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),Ht.extend(m.style,{width:"100%",height:"100%",background:"none"}),lO(m,"top","rgba(0,0,0,0)","#000"),Ht.extend(R.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),Jct(R.__hue_field),Ht.extend(R.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:R.__input_textShadow+"rgba(0,0,0,0.7)"}),It.bind(R.__saturation_field,"mousedown",E),It.bind(R.__saturation_field,"touchstart",E),It.bind(R.__field_knob,"mousedown",E),It.bind(R.__field_knob,"touchstart",E),It.bind(R.__hue_field,"mousedown",i),It.bind(R.__hue_field,"touchstart",i);function E(o){h(o),It.bind(window,"mousemove",h),It.bind(window,"touchmove",h),It.bind(window,"mouseup",d),It.bind(window,"touchend",d)}function i(o){r(o),It.bind(window,"mousemove",r),It.bind(window,"touchmove",r),It.bind(window,"mouseup",S),It.bind(window,"touchend",S)}function d(){It.unbind(window,"mousemove",h),It.unbind(window,"touchmove",h),It.unbind(window,"mouseup",d),It.unbind(window,"touchend",d),l()}function S(){It.unbind(window,"mousemove",r),It.unbind(window,"touchmove",r),It.unbind(window,"mouseup",S),It.unbind(window,"touchend",S),l()}function u(){var o=qT(this.value);o!==!1?(I.__color.__state=o,I.setValue(I.__color.toOriginal())):this.value=I.__color.toString()}function l(){I.__onFinishChange&&I.__onFinishChange.call(I,I.__color.toOriginal())}R.__saturation_field.appendChild(m),R.__selector.appendChild(R.__field_knob),R.__selector.appendChild(R.__saturation_field),R.__selector.appendChild(R.__hue_field),R.__hue_field.appendChild(R.__hue_knob),R.domElement.appendChild(R.__input),R.domElement.appendChild(R.__selector),R.updateDisplay();function h(o){o.type.indexOf("touch")===-1&&o.preventDefault();var p=I.__saturation_field.getBoundingClientRect(),a=o.touches&&o.touches[0]||o,v=a.clientX,x=a.clientY,g=(v-p.left)/(p.right-p.left),y=1-(x-p.top)/(p.bottom-p.top);return y>1?y=1:y<0&&(y=0),g>1?g=1:g<0&&(g=0),I.__color.v=y,I.__color.s=g,I.setValue(I.__color.toOriginal()),!1}function r(o){o.type.indexOf("touch")===-1&&o.preventDefault();var p=I.__hue_field.getBoundingClientRect(),a=o.touches&&o.touches[0]||o,v=a.clientY,x=1-(v-p.top)/(p.bottom-p.top);return x>1?x=1:x<0&&(x=0),I.__color.h=x*360,I.setValue(I.__color.toOriginal()),!1}return R}return Cr(n,[{key:"updateDisplay",value:function(){var M=qT(this.getValue());if(M!==!1){var R=!1;Ht.each(us.COMPONENTS,function(E){if(!Ht.isUndefined(M[E])&&!Ht.isUndefined(this.__color.__state[E])&&M[E]!==this.__color.__state[E])return R=!0,{}},this),R&&Ht.extend(this.__color.__state,M)}Ht.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var I=this.__color.v<.5||this.__color.s>.5?255:0,m=255-I;Ht.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+I+","+I+","+I+")"}),this.__hue_knob.style.marginTop=(1-this.__color.h/360)*100+"px",this.__temp.s=1,this.__temp.v=1,lO(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),Ht.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+I+","+I+","+I+")",textShadow:this.__input_textShadow+"rgba("+m+","+m+","+m+",.7)"})}}]),n}(Qh),Kct=["-moz-","-o-","-webkit-","-ms-",""];function lO(L,n,c,M){L.style.background="",Ht.each(Kct,function(R){L.style.cssText+="background: "+R+"linear-gradient("+n+", "+c+" 0%, "+M+" 100%); "})}function Jct(L){L.style.background="",L.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",L.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",L.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",L.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",L.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var Qct={load:function(n,c){var M=c||document,R=M.createElement("link");R.type="text/css",R.rel="stylesheet",R.href=n,M.getElementsByTagName("head")[0].appendChild(R)},inject:function(n,c){var M=c||document,R=document.createElement("style");R.type="text/css",R.innerHTML=n;var I=M.getElementsByTagName("head")[0];try{I.appendChild(R)}catch{}}},jct=`<div id="dg-save" class="dg dialogue">

  Here's the new load parameter for your <code>GUI</code>'s constructor:

  <textarea id="dg-new-constructor"></textarea>

  <div id="dg-save-locally">

    <input id="dg-local-storage" type="checkbox"/> Automatically save
    values to <code>localStorage</code> on exit.

    <div id="dg-local-explain">The values saved to <code>localStorage</code> will
      override those passed to <code>dat.GUI</code>'s constructor. This makes it
      easier to work incrementally, but <code>localStorage</code> is fragile,
      and your friends may not see the same values you do.

    </div>

  </div>

</div>`,qct=function(n,c){var M=n[c];return Ht.isArray(arguments[2])||Ht.isObject(arguments[2])?new $ct(n,c,arguments[2]):Ht.isNumber(M)?Ht.isNumber(arguments[2])&&Ht.isNumber(arguments[3])?Ht.isNumber(arguments[4])?new tC(n,c,arguments[2],arguments[3],arguments[4]):new tC(n,c,arguments[2],arguments[3]):Ht.isNumber(arguments[4])?new Qm(n,c,{min:arguments[2],max:arguments[3],step:arguments[4]}):new Qm(n,c,{min:arguments[2],max:arguments[3]}):Ht.isString(M)?new _ct(n,c):Ht.isFunction(M)?new fD(n,c,""):Ht.isBoolean(M)?new uD(n,c):null};function tpt(L){setTimeout(L,1e3/60)}var ept=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||tpt,ipt=function(){function L(){Tr(this,L),this.backgroundElement=document.createElement("div"),Ht.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),It.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),Ht.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var n=this;It.bind(this.backgroundElement,"click",function(){n.hide()})}return Cr(L,[{key:"show",value:function(){var c=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),Ht.defer(function(){c.backgroundElement.style.opacity=1,c.domElement.style.opacity=1,c.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var c=this,M=function R(){c.domElement.style.display="none",c.backgroundElement.style.display="none",It.unbind(c.domElement,"webkitTransitionEnd",R),It.unbind(c.domElement,"transitionend",R),It.unbind(c.domElement,"oTransitionEnd",R)};It.bind(this.domElement,"webkitTransitionEnd",M),It.bind(this.domElement,"transitionend",M),It.bind(this.domElement,"oTransitionEnd",M),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-It.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-It.getHeight(this.domElement)/2+"px"}}]),L}(),spt=zct(`.dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}
`);Qct.inject(spt);var uO="dg",dO=72,fO=20,Xf="Default",Rf=function(){try{return!!window.localStorage}catch{return!1}}(),Df=void 0,cO=!0,hu=void 0,tT=!1,cD=[],ci=function L(n){var c=this,M=n||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),It.addClass(this.domElement,uO),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],M=Ht.defaults(M,{closeOnTop:!1,autoPlace:!0,width:L.DEFAULT_WIDTH}),M=Ht.defaults(M,{resizable:M.autoPlace,hideable:M.autoPlace}),Ht.isUndefined(M.load)?M.load={preset:Xf}:M.preset&&(M.load.preset=M.preset),Ht.isUndefined(M.parent)&&M.hideable&&cD.push(this),M.resizable=Ht.isUndefined(M.parent)&&M.resizable,M.autoPlace&&Ht.isUndefined(M.scrollable)&&(M.scrollable=!0);var R=Rf&&localStorage.getItem(lu(this,"isLocal"))==="true",I=void 0,m=void 0;if(Object.defineProperties(this,{parent:{get:function(){return M.parent}},scrollable:{get:function(){return M.scrollable}},autoPlace:{get:function(){return M.autoPlace}},closeOnTop:{get:function(){return M.closeOnTop}},preset:{get:function(){return c.parent?c.getRoot().preset:M.load.preset},set:function(l){c.parent?c.getRoot().preset=l:M.load.preset=l,opt(this),c.revert()}},width:{get:function(){return M.width},set:function(l){M.width=l,nC(c,l)}},name:{get:function(){return M.name},set:function(l){M.name=l,m&&(m.innerHTML=M.name)}},closed:{get:function(){return M.closed},set:function(l){M.closed=l,M.closed?It.addClass(c.__ul,L.CLASS_CLOSED):It.removeClass(c.__ul,L.CLASS_CLOSED),this.onResize(),c.__closeButton&&(c.__closeButton.innerHTML=l?L.TEXT_OPEN:L.TEXT_CLOSED)}},load:{get:function(){return M.load}},useLocalStorage:{get:function(){return R},set:function(l){Rf&&(R=l,l?It.bind(window,"unload",I):It.unbind(window,"unload",I),localStorage.setItem(lu(c,"isLocal"),l))}}}),Ht.isUndefined(M.parent)){if(this.closed=M.closed||!1,It.addClass(this.domElement,L.CLASS_MAIN),It.makeSelectable(this.domElement,!1),Rf&&R){c.useLocalStorage=!0;var E=localStorage.getItem(lu(this,"gui"));E&&(M.load=JSON.parse(E))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=L.TEXT_CLOSED,It.addClass(this.__closeButton,L.CLASS_CLOSE_BUTTON),M.closeOnTop?(It.addClass(this.__closeButton,L.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(It.addClass(this.__closeButton,L.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),It.bind(this.__closeButton,"click",function(){c.closed=!c.closed})}else{M.closed===void 0&&(M.closed=!0);var i=document.createTextNode(M.name);It.addClass(i,"controller-name"),m=r1(c,i);var d=function(l){return l.preventDefault(),c.closed=!c.closed,!1};It.addClass(this.__ul,L.CLASS_CLOSED),It.addClass(m,"title"),It.bind(m,"click",d),M.closed||(this.closed=!1)}M.autoPlace&&(Ht.isUndefined(M.parent)&&(cO&&(hu=document.createElement("div"),It.addClass(hu,uO),It.addClass(hu,L.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(hu),cO=!1),hu.appendChild(this.domElement),It.addClass(this.domElement,L.CLASS_AUTO_PLACE)),this.parent||nC(c,M.width)),this.__resizeHandler=function(){c.onResizeDebounced()},It.bind(window,"resize",this.__resizeHandler),It.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),It.bind(this.__ul,"transitionend",this.__resizeHandler),It.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),M.resizable&&apt(this),I=function(){Rf&&localStorage.getItem(lu(c,"isLocal"))==="true"&&localStorage.setItem(lu(c,"gui"),JSON.stringify(c.getSaveObject()))},this.saveToLocalStorageIfPossible=I;function S(){var u=c.getRoot();u.width+=1,Ht.defer(function(){u.width-=1})}M.parent||S()};ci.toggleHide=function(){tT=!tT,Ht.each(cD,function(L){L.domElement.style.display=tT?"none":""})};ci.CLASS_AUTO_PLACE="a";ci.CLASS_AUTO_PLACE_CONTAINER="ac";ci.CLASS_MAIN="main";ci.CLASS_CONTROLLER_ROW="cr";ci.CLASS_TOO_TALL="taller-than-window";ci.CLASS_CLOSED="closed";ci.CLASS_CLOSE_BUTTON="close-button";ci.CLASS_CLOSE_TOP="close-top";ci.CLASS_CLOSE_BOTTOM="close-bottom";ci.CLASS_DRAG="drag";ci.DEFAULT_WIDTH=245;ci.TEXT_CLOSED="Close Controls";ci.TEXT_OPEN="Open Controls";ci._keydownHandler=function(L){document.activeElement.type!=="text"&&(L.which===dO||L.keyCode===dO)&&ci.toggleHide()};It.bind(window,"keydown",ci._keydownHandler,!1);Ht.extend(ci.prototype,{add:function(n,c){return If(this,n,c,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(n,c){return If(this,n,c,{color:!0})},remove:function(n){this.__ul.removeChild(n.__li),this.__controllers.splice(this.__controllers.indexOf(n),1);var c=this;Ht.defer(function(){c.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&hu.removeChild(this.domElement);var n=this;Ht.each(this.__folders,function(c){n.removeFolder(c)}),It.unbind(window,"keydown",ci._keydownHandler,!1),pO(this)},addFolder:function(n){if(this.__folders[n]!==void 0)throw new Error('You already have a folder in this GUI by the name "'+n+'"');var c={name:n,parent:this};c.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[n]&&(c.closed=this.load.folders[n].closed,c.load=this.load.folders[n]);var M=new ci(c);this.__folders[n]=M;var R=r1(this,M.domElement);return It.addClass(R,"folder"),M},removeFolder:function(n){this.__ul.removeChild(n.domElement.parentElement),delete this.__folders[n.name],this.load&&this.load.folders&&this.load.folders[n.name]&&delete this.load.folders[n.name],pO(n);var c=this;Ht.each(n.__folders,function(M){n.removeFolder(M)}),Ht.defer(function(){c.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var n=this.getRoot();if(n.scrollable){var c=It.getOffset(n.__ul).top,M=0;Ht.each(n.__ul.childNodes,function(R){n.autoPlace&&R===n.__save_row||(M+=It.getHeight(R))}),window.innerHeight-c-fO<M?(It.addClass(n.domElement,ci.CLASS_TOO_TALL),n.__ul.style.height=window.innerHeight-c-fO+"px"):(It.removeClass(n.domElement,ci.CLASS_TOO_TALL),n.__ul.style.height="auto")}n.__resize_handle&&Ht.defer(function(){n.__resize_handle.style.height=n.__ul.offsetHeight+"px"}),n.__closeButton&&(n.__closeButton.style.width=n.width+"px")},onResizeDebounced:Ht.debounce(function(){this.onResize()},50),remember:function(){if(Ht.isUndefined(Df)&&(Df=new ipt,Df.domElement.innerHTML=jct),this.parent)throw new Error("You can only call remember on a top level GUI.");var n=this;Ht.each(Array.prototype.slice.call(arguments),function(c){n.__rememberedObjects.length===0&&rpt(n),n.__rememberedObjects.indexOf(c)===-1&&n.__rememberedObjects.push(c)}),this.autoPlace&&nC(this,this.width)},getRoot:function(){for(var n=this;n.parent;)n=n.parent;return n},getSaveObject:function(){var n=this.load;return n.closed=this.closed,this.__rememberedObjects.length>0&&(n.preset=this.preset,n.remembered||(n.remembered={}),n.remembered[this.preset]=Tm(this)),n.folders={},Ht.each(this.__folders,function(c,M){n.folders[M]=c.getSaveObject()}),n},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=Tm(this),iC(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(n){this.load.remembered||(this.load.remembered={},this.load.remembered[Xf]=Tm(this,!0)),this.load.remembered[n]=Tm(this),this.preset=n,sC(this,n,!0),this.saveToLocalStorageIfPossible()},revert:function(n){Ht.each(this.__controllers,function(c){this.getRoot().load.remembered?pD(n||this.getRoot(),c):c.setValue(c.initialValue),c.__onFinishChange&&c.__onFinishChange.call(c,c.getValue())},this),Ht.each(this.__folders,function(c){c.revert(c)}),n||iC(this.getRoot(),!1)},listen:function(n){var c=this.__listening.length===0;this.__listening.push(n),c&&vD(this.__listening)},updateDisplay:function(){Ht.each(this.__controllers,function(n){n.updateDisplay()}),Ht.each(this.__folders,function(n){n.updateDisplay()})}});function r1(L,n,c){var M=document.createElement("li");return n&&M.appendChild(n),c?L.__ul.insertBefore(M,c):L.__ul.appendChild(M),L.onResize(),M}function pO(L){It.unbind(window,"resize",L.__resizeHandler),L.saveToLocalStorageIfPossible&&It.unbind(window,"unload",L.saveToLocalStorageIfPossible)}function iC(L,n){var c=L.__preset_select[L.__preset_select.selectedIndex];n?c.innerHTML=c.value+"*":c.innerHTML=c.value}function npt(L,n,c){if(c.__li=n,c.__gui=L,Ht.extend(c,{options:function(m){if(arguments.length>1){var E=c.__li.nextElementSibling;return c.remove(),If(L,c.object,c.property,{before:E,factoryArgs:[Ht.toArray(arguments)]})}if(Ht.isArray(m)||Ht.isObject(m)){var i=c.__li.nextElementSibling;return c.remove(),If(L,c.object,c.property,{before:i,factoryArgs:[m]})}},name:function(m){return c.__li.firstElementChild.firstElementChild.innerHTML=m,c},listen:function(){return c.__gui.listen(c),c},remove:function(){return c.__gui.remove(c),c}}),c instanceof tC){var M=new Qm(c.object,c.property,{min:c.__min,max:c.__max,step:c.__step});Ht.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(I){var m=c[I],E=M[I];c[I]=M[I]=function(){var i=Array.prototype.slice.call(arguments);return E.apply(M,i),m.apply(c,i)}}),It.addClass(n,"has-slider"),c.domElement.insertBefore(M.domElement,c.domElement.firstElementChild)}else if(c instanceof Qm){var R=function(m){if(Ht.isNumber(c.__min)&&Ht.isNumber(c.__max)){var E=c.__li.firstElementChild.firstElementChild.innerHTML,i=c.__gui.__listening.indexOf(c)>-1;c.remove();var d=If(L,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[c.__min,c.__max,c.__step]});return d.name(E),i&&d.listen(),d}return m};c.min=Ht.compose(R,c.min),c.max=Ht.compose(R,c.max)}else c instanceof uD?(It.bind(n,"click",function(){It.fakeEvent(c.__checkbox,"click")}),It.bind(c.__checkbox,"click",function(I){I.stopPropagation()})):c instanceof fD?(It.bind(n,"click",function(){It.fakeEvent(c.__button,"click")}),It.bind(n,"mouseover",function(){It.addClass(c.__button,"hover")}),It.bind(n,"mouseout",function(){It.removeClass(c.__button,"hover")})):c instanceof eC&&(It.addClass(n,"color"),c.updateDisplay=Ht.compose(function(I){return n.style.borderLeftColor=c.__color.toString(),I},c.updateDisplay),c.updateDisplay());c.setValue=Ht.compose(function(I){return L.getRoot().__preset_select&&c.isModified()&&iC(L.getRoot(),!0),I},c.setValue)}function pD(L,n){var c=L.getRoot(),M=c.__rememberedObjects.indexOf(n.object);if(M!==-1){var R=c.__rememberedObjectIndecesToControllers[M];if(R===void 0&&(R={},c.__rememberedObjectIndecesToControllers[M]=R),R[n.property]=n,c.load&&c.load.remembered){var I=c.load.remembered,m=void 0;if(I[L.preset])m=I[L.preset];else if(I[Xf])m=I[Xf];else return;if(m[M]&&m[M][n.property]!==void 0){var E=m[M][n.property];n.initialValue=E,n.setValue(E)}}}}function If(L,n,c,M){if(n[c]===void 0)throw new Error('Object "'+n+'" has no property "'+c+'"');var R=void 0;if(M.color)R=new eC(n,c);else{var I=[n,c].concat(M.factoryArgs);R=qct.apply(L,I)}M.before instanceof Qh&&(M.before=M.before.__li),pD(L,R),It.addClass(R.domElement,"c");var m=document.createElement("span");It.addClass(m,"property-name"),m.innerHTML=R.property;var E=document.createElement("div");E.appendChild(m),E.appendChild(R.domElement);var i=r1(L,E,M.before);return It.addClass(i,ci.CLASS_CONTROLLER_ROW),R instanceof eC?It.addClass(i,"color"):It.addClass(i,Xct(R.getValue())),npt(L,i,R),L.__controllers.push(R),R}function lu(L,n){return document.location.href+"."+n}function sC(L,n,c){var M=document.createElement("option");M.innerHTML=n,M.value=n,L.__preset_select.appendChild(M),c&&(L.__preset_select.selectedIndex=L.__preset_select.length-1)}function vO(L,n){n.style.display=L.useLocalStorage?"block":"none"}function rpt(L){var n=L.__save_row=document.createElement("li");It.addClass(L.domElement,"has-save"),L.__ul.insertBefore(n,L.__ul.firstChild),It.addClass(n,"save-row");var c=document.createElement("span");c.innerHTML="&nbsp;",It.addClass(c,"button gears");var M=document.createElement("span");M.innerHTML="Save",It.addClass(M,"button"),It.addClass(M,"save");var R=document.createElement("span");R.innerHTML="New",It.addClass(R,"button"),It.addClass(R,"save-as");var I=document.createElement("span");I.innerHTML="Revert",It.addClass(I,"button"),It.addClass(I,"revert");var m=L.__preset_select=document.createElement("select");if(L.load&&L.load.remembered?Ht.each(L.load.remembered,function(u,l){sC(L,l,l===L.preset)}):sC(L,Xf,!1),It.bind(m,"change",function(){for(var u=0;u<L.__preset_select.length;u++)L.__preset_select[u].innerHTML=L.__preset_select[u].value;L.preset=this.value}),n.appendChild(m),n.appendChild(c),n.appendChild(M),n.appendChild(R),n.appendChild(I),Rf){var E=document.getElementById("dg-local-explain"),i=document.getElementById("dg-local-storage"),d=document.getElementById("dg-save-locally");d.style.display="block",localStorage.getItem(lu(L,"isLocal"))==="true"&&i.setAttribute("checked","checked"),vO(L,E),It.bind(i,"change",function(){L.useLocalStorage=!L.useLocalStorage,vO(L,E)})}var S=document.getElementById("dg-new-constructor");It.bind(S,"keydown",function(u){u.metaKey&&(u.which===67||u.keyCode===67)&&Df.hide()}),It.bind(c,"click",function(){S.innerHTML=JSON.stringify(L.getSaveObject(),void 0,2),Df.show(),S.focus(),S.select()}),It.bind(M,"click",function(){L.save()}),It.bind(R,"click",function(){var u=prompt("Enter a new preset name.");u&&L.saveAs(u)}),It.bind(I,"click",function(){L.revert()})}function apt(L){var n=void 0;L.__resize_handle=document.createElement("div"),Ht.extend(L.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});function c(I){return I.preventDefault(),L.width+=n-I.clientX,L.onResize(),n=I.clientX,!1}function M(){It.removeClass(L.__closeButton,ci.CLASS_DRAG),It.unbind(window,"mousemove",c),It.unbind(window,"mouseup",M)}function R(I){return I.preventDefault(),n=I.clientX,It.addClass(L.__closeButton,ci.CLASS_DRAG),It.bind(window,"mousemove",c),It.bind(window,"mouseup",M),!1}It.bind(L.__resize_handle,"mousedown",R),It.bind(L.__closeButton,"mousedown",R),L.domElement.insertBefore(L.__resize_handle,L.domElement.firstElementChild)}function nC(L,n){L.domElement.style.width=n+"px",L.__save_row&&L.autoPlace&&(L.__save_row.style.width=n+"px"),L.__closeButton&&(L.__closeButton.style.width=n+"px")}function Tm(L,n){var c={};return Ht.each(L.__rememberedObjects,function(M,R){var I={},m=L.__rememberedObjectIndecesToControllers[R];Ht.each(m,function(E,i){I[i]=n?E.initialValue:E.getValue()}),c[R]=I}),c}function opt(L){for(var n=0;n<L.__preset_select.length;n++)L.__preset_select[n].value===L.preset&&(L.__preset_select.selectedIndex=n)}function vD(L){L.length!==0&&ept.call(window,function(){vD(L)}),Ht.each(L,function(n){n.updateDisplay()})}var Iu=ci;class mD{constructor(n,c){this.isSyncing=!1,this.cameraRetryCount=0,this.isUserInteracting=!1,this.lastInteractionTime=0,this.INTERACTION_TIMEOUT=100,this.isResetting=!1,this.DEFAULT_POSITIONS={"Marge (Road behind)":{positionX:21.3,positionY:-25.2,positionZ:-22.2,rotationX:-99,rotationY:0,rotationZ:-91,fov:140},"Backseat (Inventory overlay)":{positionX:19.4,positionY:-13.1,positionZ:.8,rotationX:126,rotationY:42,rotationZ:-91,fov:152}},this.threeJSManager=n,this.cameraAnimationSystem=c,this.camera=n.getCamera(),console.log("CameraGUI constructor - camera:",this.camera),this.cameraParams={positionX:0,positionY:0,positionZ:0,rotationX:0,rotationY:0,rotationZ:0,fov:75,fisheye:0,animationData:{totalDuration:5,keyframes:[{id:"start",timePercent:0,positionX:0,positionY:0,positionZ:0,rotationX:0,rotationY:0,rotationZ:0,positionEasingX:{control1:.25,control2:.75},positionEasingY:{control1:.25,control2:.75},positionEasingZ:{control1:.25,control2:.75},rotationEasingX:{control1:.25,control2:.75},rotationEasingY:{control1:.25,control2:.75},rotationEasingZ:{control1:.25,control2:.75}},{id:"end",timePercent:100,positionX:5,positionY:-2,positionZ:-5,rotationX:-90,rotationY:0,rotationZ:-90,positionEasingX:{control1:.25,control2:.75},positionEasingY:{control1:.25,control2:.75},positionEasingZ:{control1:.25,control2:.75},rotationEasingX:{control1:.25,control2:.75},rotationEasingY:{control1:.25,control2:.75},rotationEasingZ:{control1:.25,control2:.75}}]},resetCamera:()=>this.resetCamera(),addKeyframe:()=>this.addKeyframe(),removeKeyframe:M=>this.removeKeyframe(M),saveAnimation:()=>this.saveAnimation(),loadAnimation:()=>this.loadAnimation()},this.gui=new Iu({width:350}),document.body.appendChild(this.gui.domElement),this.gui.domElement.style.setProperty("position","fixed","important"),this.gui.domElement.style.setProperty("top","50px","important"),this.gui.domElement.style.setProperty("left","50px","important"),this.gui.domElement.style.setProperty("z-index","999999","important"),this.gui.domElement.addEventListener("contextmenu",M=>(M.preventDefault(),M.stopPropagation(),!1)),this.gui.domElement.addEventListener("mousedown",M=>{if(M.button===2)return M.preventDefault(),M.stopPropagation(),!1}),setTimeout(()=>{this.gui.domElement.style.setProperty("background-color","rgba(0,0,0,0.5)","important"),this.gui.domElement.style.setProperty("border","2px solid #333","important"),this.gui.domElement.style.setProperty("border-radius","8px","important"),this.gui.domElement.style.setProperty("box-shadow","0 4px 20px rgba(0,0,0,0.5)","important")},100),this.waitForCameraAndSetup(),this.hide()}waitForCameraAndSetup(){if(this.getCamera())console.log("Camera available, setting up GUI..."),this.syncGUIWithCamera(),this.setupGUI();else{if(this.cameraRetryCount||(this.cameraRetryCount=0),this.cameraRetryCount++,this.cameraRetryCount>10){console.log("Camera not available after 10 retries, stopping attempts"),console.log("Attempting to setup GUI anyway..."),this.setupGUI();return}setTimeout(()=>this.waitForCameraAndSetup(),100)}}setupGUI(){if(console.log("Setting up GUI with camera params:",this.cameraParams),!this.gui){console.error("GUI is not initialized!");return}try{const n=this.gui.addFolder("Position");n.add(this.cameraParams,"positionX",-50,50).step(.1).name("X").onChange(m=>{this.isSyncing||(this.setUserInteracting(!0),console.log("Position X changed to:",m),this.updateCamera(),setTimeout(()=>this.setUserInteracting(!1),50))}),n.add(this.cameraParams,"positionY",-50,50).step(.1).name("Y").onChange(m=>{this.isSyncing||(this.setUserInteracting(!0),console.log("Position Y changed to:",m),this.updateCamera(),setTimeout(()=>this.setUserInteracting(!1),50))}),n.add(this.cameraParams,"positionZ",-50,50).step(.1).name("Z").onChange(m=>{this.isSyncing||(this.setUserInteracting(!0),console.log("Position Z changed to:",m),this.updateCamera(),setTimeout(()=>this.setUserInteracting(!1),50))});const c=this.gui.addFolder("Rotation (°)");c.add(this.cameraParams,"rotationX",-180,180).step(1).name("Pitch").onChange(m=>{this.isSyncing||(this.setUserInteracting(!0),console.log("Rotation X changed to:",m),this.updateCamera(),setTimeout(()=>this.setUserInteracting(!1),50))}),c.add(this.cameraParams,"rotationY",-180,180).step(1).name("Yaw").onChange(m=>{this.isSyncing||(this.setUserInteracting(!0),console.log("Rotation Y changed to:",m),this.updateCamera(),setTimeout(()=>this.setUserInteracting(!1),50))}),c.add(this.cameraParams,"rotationZ",-180,180).step(1).name("Roll").onChange(m=>{this.isSyncing||(this.setUserInteracting(!0),console.log("Rotation Z changed to:",m),this.updateCamera(),setTimeout(()=>this.setUserInteracting(!1),50))});const M=this.gui.addFolder("Settings");M.add(this.cameraParams,"fov",10,180).step(1).name("Field of View").onChange(m=>{this.isSyncing||(this.setUserInteracting(!0),console.log("FOV changed to:",m),this.updateCamera(),setTimeout(()=>this.setUserInteracting(!1),50))}),M.add(this.cameraParams,"fisheye",0,1).name("Fisheye Effect").onChange(m=>{this.isSyncing||(this.setUserInteracting(!0),console.log("Fisheye changed to:",m),this.updateCamera(),setTimeout(()=>this.setUserInteracting(!1),50))});const R=this.gui.addFolder("Animation");R.add(this.cameraParams.animationData,"totalDuration",.1,30).step(.1).name("Total Duration (s)");const I={play:()=>{console.log("Play animation clicked"),this.cameraParams.animationData.keyframes.length>0?(console.log("Playing loaded animation with keyframes:",this.cameraParams.animationData.keyframes.length),this.cameraAnimationSystem.loadAndPlayAnimation(this.cameraParams.animationData)):(console.log("No animation data loaded, starting default animation"),this.cameraAnimationSystem.startAnimation())},stop:()=>{console.log("Stop animation clicked"),this.cameraAnimationSystem.stopAnimation()},addKeyframe:()=>{console.log("Add keyframe clicked"),this.cameraParams.addKeyframe()},saveAnimation:()=>{console.log("Save animation clicked"),this.cameraParams.saveAnimation()},loadAnimation:()=>{console.log("Load animation clicked"),this.cameraParams.loadAnimation()},syncCamera:()=>{console.log("Sync camera clicked"),this.syncGUIWithCamera()},reset:()=>{console.log("Reset camera clicked"),this.resetCamera()},hide:()=>{console.log("Hide camera GUI clicked"),this.hide()}};R.add(I,"play").name("Play Animation"),R.add(I,"stop").name("Stop Animation"),R.add(I,"addKeyframe").name("Add Keyframe"),R.add(I,"saveAnimation").name("Save Animation"),R.add(I,"loadAnimation").name("Load Animation"),R.add(I,"syncCamera").name("Sync with Camera"),R.add(I,"reset").name("Reset Camera"),R.add(I,"hide").name("Hide GUI"),this.createKeyframeFolders(R),n.open(),c.open(),M.open(),R.open(),console.log("GUI setup completed successfully")}catch(n){console.error("Error setting up GUI:",n)}}createKeyframeFolders(n){this.cameraParams.animationData.keyframes.forEach((c,M)=>{const R=n.addFolder(`Keyframe ${M+1} (${c.timePercent.toFixed(1)}%)`);R.add(c,"timePercent",0,100).step(.1).name("Time %").onChange(()=>{this.cameraParams.animationData.keyframes.sort((u,l)=>u.timePercent-l.timePercent),this.refreshGUI()});const I=R.addFolder("Position");I.add(c,"positionX",-50,50).step(.1).name("X"),I.add(c,"positionY",-50,50).step(.1).name("Y"),I.add(c,"positionZ",-50,50).step(.1).name("Z");const m=R.addFolder("Rotation (°)");m.add(c,"rotationX",-180,180).step(1).name("X"),m.add(c,"rotationY",-180,180).step(1).name("Y"),m.add(c,"rotationZ",-180,180).step(1).name("Z");const E=R.addFolder("Easing Curves"),i=E.addFolder("Position Easing");i.add(c.positionEasingX,"control1",0,1).step(.01).name("X Control 1"),i.add(c.positionEasingX,"control2",0,1).step(.01).name("X Control 2"),i.add(c.positionEasingY,"control1",0,1).step(.01).name("Y Control 1"),i.add(c.positionEasingY,"control2",0,1).step(.01).name("Y Control 2"),i.add(c.positionEasingZ,"control1",0,1).step(.01).name("Z Control 1"),i.add(c.positionEasingZ,"control2",0,1).step(.01).name("Z Control 2");const d=E.addFolder("Rotation Easing");d.add(c.rotationEasingX,"control1",0,1).step(.01).name("X Control 1"),d.add(c.rotationEasingX,"control2",0,1).step(.01).name("X Control 2"),d.add(c.rotationEasingY,"control1",0,1).step(.01).name("Y Control 1"),d.add(c.rotationEasingY,"control2",0,1).step(.01).name("Y Control 2"),d.add(c.rotationEasingZ,"control1",0,1).step(.01).name("Z Control 1"),d.add(c.rotationEasingZ,"control2",0,1).step(.01).name("Z Control 2");const S=()=>{this.cameraParams.removeKeyframe(c.id),this.refreshGUI()};R.add({remove:S},"remove").name("Remove Keyframe"),I.open(),m.open(),E.open(),i.open(),d.open()})}refreshGUI(){this.gui&&(this.gui.destroy(),this.setupGUI())}syncGUIWithCamera(){const n=this.getCamera();if(n){if(this.isSyncing=!0,this.cameraParams.positionX=n.position.x,this.cameraParams.positionY=n.position.y,this.cameraParams.positionZ=n.position.z,this.cameraParams.rotationX=n.rotation.x*180/Math.PI,this.cameraParams.rotationY=n.rotation.y*180/Math.PI,this.cameraParams.rotationZ=n.rotation.z*180/Math.PI,this.cameraParams.fov=n.fov,this.gui){const c=this.gui.__folders;if(c){if(c.Position){const M=c.Position.__controllers;M&&M.forEach(R=>{const I=R.property;I==="positionX"&&R.setValue(this.cameraParams.positionX),I==="positionY"&&R.setValue(this.cameraParams.positionY),I==="positionZ"&&R.setValue(this.cameraParams.positionZ)})}if(c["Rotation (°)"]){const M=c["Rotation (°)"].__controllers;M&&M.forEach(R=>{const I=R.property;I==="rotationX"&&R.setValue(this.cameraParams.rotationX),I==="rotationY"&&R.setValue(this.cameraParams.rotationY),I==="rotationZ"&&R.setValue(this.cameraParams.rotationZ)})}if(c.Settings){const M=c.Settings.__controllers;M&&M.forEach(R=>{const I=R.property;I==="fov"&&R.setValue(this.cameraParams.fov),I==="fisheye"&&R.setValue(this.cameraParams.fisheye)})}}}setTimeout(()=>{this.isSyncing=!1},10)}}getCamera(){if(this.camera||(this.camera=this.threeJSManager.getCamera()),!!this.camera)return this.camera}updateCamera(){var M,R;const n=this.getCamera();if(!n){console.log("updateCamera: No camera available");return}if(this.isSyncing){console.log("updateCamera: Skipping update during sync");return}n.position.set(this.cameraParams.positionX,this.cameraParams.positionY,this.cameraParams.positionZ),n.rotation.set(this.cameraParams.rotationX*Math.PI/180,this.cameraParams.rotationY*Math.PI/180,this.cameraParams.rotationZ*Math.PI/180),n.fov=this.cameraParams.fov,n.updateProjectionMatrix(),this.cameraParams.fisheye>0&&this.applyFisheyeEffect(),console.log("Camera updated to:",{position:n.position,rotation:n.rotation,fov:n.fov}),this.threeJSManager.getRenderer()&&this.threeJSManager.render();const c=window.app;if(console.log("App found:",!!c),c&&c.game&&(console.log("Game found:",!!c.game),console.log("Scenes found:",(R=(M=c.game.scene)==null?void 0:M.scenes)==null?void 0:R.length),c.game.scene&&c.game.scene.scenes)){const I=c.game.scene.scenes;console.log("Available scenes:",I.map(E=>{var i;return(i=E.scene)==null?void 0:i.key}));const m=I.find(E=>{var i;return((i=E.scene)==null?void 0:i.key)==="MargeScene"});console.log("MargeScene found:",!!m),m&&(console.log("MargeScene camera:",!!m.camera),console.log("MargeScene cameraParams:",!!m.cameraParams)),m&&m.camera&&(m.camera.position.set(this.cameraParams.positionX,this.cameraParams.positionY,this.cameraParams.positionZ),m.camera.rotation.set(this.cameraParams.rotationX*Math.PI/180,this.cameraParams.rotationY*Math.PI/180,this.cameraParams.rotationZ*Math.PI/180),m.camera.fov=this.cameraParams.fov,m.camera.updateProjectionMatrix(),console.log("Directly updated MargeScene camera:",{position:m.camera.position,rotation:m.camera.rotation,fov:m.camera.fov}))}}applyFisheyeEffect(){if(!this.camera)return;const n=this.cameraParams.fisheye;this.camera.updateProjectionMatrix();const c=this.camera.projectionMatrix.clone();c.elements[0]*=1+n*.5,c.elements[5]*=1+n*.5,this.camera.projectionMatrix=c}resetCamera(){var R,I,m;this.isResetting=!0;const n=(I=(R=window.app)==null?void 0:R.game)==null?void 0:I.screenManager,c=(m=n==null?void 0:n.getCurrentScreen())==null?void 0:m.name,M=this.DEFAULT_POSITIONS[c];M?(this.cameraParams.positionX=M.positionX,this.cameraParams.positionY=M.positionY,this.cameraParams.positionZ=M.positionZ,this.cameraParams.rotationX=M.rotationX,this.cameraParams.rotationY=M.rotationY,this.cameraParams.rotationZ=M.rotationZ,this.cameraParams.fov=M.fov,this.cameraParams.fisheye=0):(this.cameraParams.positionX=5,this.cameraParams.positionY=-2,this.cameraParams.positionZ=-5,this.cameraParams.rotationX=-90,this.cameraParams.rotationY=0,this.cameraParams.rotationZ=-90,this.cameraParams.fov=75,this.cameraParams.fisheye=0),this.isSyncing=!1,this.updateCamera(),setTimeout(()=>{this.isResetting=!1},500)}show(){this.gui&&(this.gui.domElement.style.setProperty("display","block","important"),this.syncGUIWithCamera())}hide(){this.gui&&this.gui.domElement.style.setProperty("display","none","important"),this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=void 0)}isVisible(){return this.gui?this.gui.domElement.style.display!=="none":!1}dispose(){this.gui&&this.gui.destroy(),this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=void 0)}disableSync(){console.log("CameraGUI: Disabling sync during animation"),this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=void 0,console.log("CameraGUI: syncInterval cleared"))}enableSync(){console.log("CameraGUI: Re-enabling sync after animation"),this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=void 0),this.syncInterval=setInterval(()=>{this.isVisible()&&this.syncGUIWithCamera()},50),console.log("CameraGUI: Sync interval started with 50ms interval")}addKeyframe(){const n=this.getCamera(),c={id:`keyframe_${Date.now()}`,timePercent:50,positionX:(n==null?void 0:n.position.x)||0,positionY:(n==null?void 0:n.position.y)||0,positionZ:(n==null?void 0:n.position.z)||0,rotationX:n!=null&&n.rotation.x?n.rotation.x*180/Math.PI:0,rotationY:n!=null&&n.rotation.y?n.rotation.y*180/Math.PI:0,rotationZ:n!=null&&n.rotation.z?n.rotation.z*180/Math.PI:0,positionEasingX:{control1:.25,control2:.75},positionEasingY:{control1:.25,control2:.75},positionEasingZ:{control1:.25,control2:.75},rotationEasingX:{control1:.25,control2:.75},rotationEasingY:{control1:.25,control2:.75},rotationEasingZ:{control1:.25,control2:.75}};this.cameraParams.animationData.keyframes.push(c),this.cameraParams.animationData.keyframes.sort((M,R)=>M.timePercent-R.timePercent),console.log("Added new keyframe:",c)}removeKeyframe(n){this.cameraParams.animationData.keyframes=this.cameraParams.animationData.keyframes.filter(c=>c.id!==n),console.log("Removed keyframe:",n)}saveAnimation(){const n=JSON.stringify(this.cameraParams.animationData,null,2),c=new Blob([n],{type:"application/json"}),M=URL.createObjectURL(c),R=document.createElement("a");R.href=M,R.download="camera_animation.json",R.click(),URL.revokeObjectURL(M),console.log("Animation saved to camera_animation.json")}loadAnimation(){const n=document.createElement("input");n.type="file",n.accept=".json",n.onchange=c=>{var R;const M=(R=c.target.files)==null?void 0:R[0];if(M){const I=new FileReader;I.onload=m=>{var E;try{const i=JSON.parse((E=m.target)==null?void 0:E.result);this.cameraParams.animationData=i,console.log("Animation loaded:",i)}catch(i){console.error("Error loading animation:",i)}},I.readAsText(M)}},n.click()}update(){this.isVisible()&&!this.isUserInteracting&&!this.isResetting&&performance.now()-this.lastInteractionTime>this.INTERACTION_TIMEOUT&&this.syncGUIWithCamera()}setUserInteracting(n){this.isUserInteracting=n,n&&(this.lastInteractionTime=performance.now())}getCurrentCameraState(){const n=this.getCamera();return n?{position:{x:n.position.x,y:n.position.y,z:n.position.z},rotation:{x:n.rotation.x*180/Math.PI,y:n.rotation.y*180/Math.PI,z:n.rotation.z*180/Math.PI},fov:n.fov,guiParams:{positionX:this.cameraParams.positionX,positionY:this.cameraParams.positionY,positionZ:this.cameraParams.positionZ,rotationX:this.cameraParams.rotationX,rotationY:this.cameraParams.rotationY,rotationZ:this.cameraParams.rotationZ,fov:this.cameraParams.fov}}:{error:"No camera available"}}}const hpt=Object.freeze(Object.defineProperty({__proto__:null,CameraGUI:mD},Symbol.toStringTag,{value:"Module"}));class zh{constructor(){this.animationId=null,this.animationStartTime=0,this.animationCompletedTime=0,this.ANIMATION_SETTLE_TIME=5e3,this.isDragging=!1,this.dragPoint=null,this.settings={duration:2,isPlaying:!1,progress:0,triggerOnBackseat:!0,positionX:20,positionY:-10,positionZ:-15,rotationX:-90,rotationY:20,rotationZ:-90,easing:"easeInOut"}}static getInstance(){return zh.instance||(zh.instance=new zh),zh.instance}initialize(n){this.threeJSManager=n,this.setupKeyboardShortcuts(),window.cameraAnimationSettings=this.settings,window.startCameraAnimation=this.startAnimation.bind(this),window.stopCameraAnimation=this.stopAnimation.bind(this)}createAnimationGUI(){console.log("Camera animation GUI creation skipped - will use main GUI")}addVector3Controls(n,c,M){}createVisualCurveEditor(){}showCurveVisualizer(){console.log("Curve visualizer not available in simple mode")}hideCurveVisualizer(){console.log("Curve visualizer not available in simple mode")}updateCurveVisualization(){}drawGrid(n,c){}drawBezierCurve(n,c,M,R,I,m,E,i,d="xy"){}cubicBezier2D(n,c,M,R,I){return{x:0,y:0}}onMouseDown(n){}onMouseMove(n){}onMouseUp(n){}cubicBezier(n,c,M,R,I){return 0}lerp(n,c,M){return n+(c-n)*M}lerpRotation(n,c,M){const R=n*Math.PI/180;let m=c*Math.PI/180-R;for(;m>Math.PI;)m-=2*Math.PI;for(;m<-Math.PI;)m+=2*Math.PI;return(R+m*M)*180/Math.PI}applyEasing(n,c){switch(c){case"linear":return n;case"easeIn":return n*n;case"easeOut":return 1-(1-n)*(1-n);case"easeInOut":return n<.5?2*n*n:1-Math.pow(-2*n+2,2)/2;case"bounce":return this.bounceEasing(n);case"elastic":return this.elasticEasing(n);default:return n}}bounceEasing(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}elasticEasing(n){return Math.pow(2,-10*n)*Math.sin((n-.075)*(2*Math.PI)/.3)+1}startAnimation(){if(!this.threeJSManager)return;this.animationId!==null&&cancelAnimationFrame(this.animationId),this.settings.isPlaying=!0,this.animationStartTime=performance.now();const n=this.threeJSManager.getCamera();if(!n)return;this.startPosition=n.position.clone(),this.startRotation=n.rotation.clone();const c=window.cameraGUI;c&&c.disableSync?c.disableSync():console.warn("CameraGUI not available for disableSync - this might cause issues"),this.animate()}animate(){var I;let M=(performance.now()-this.animationStartTime)/1e3/this.settings.duration;if(M>=1){M=1,this.settings.isPlaying=!1,this.animationId=null,this.animationCompletedTime=performance.now();const m=(I=this.threeJSManager)==null?void 0:I.getCamera();m&&(console.log("Animation completed successfully"),console.log("Final camera position:",m.position),console.log("Final camera rotation:",m.rotation),this.updateMargeSceneCameraParams(m))}this.settings.progress=M;const R=this.currentAnimationData;if(R&&R.keyframes&&R.keyframes.length>0)this.animateKeyframes(M);else{console.log("No animation data loaded, stopping animation"),this.stopAnimation();return}this.settings.isPlaying&&(this.animationId=requestAnimationFrame(()=>this.animate()))}updateMargeSceneCameraParams(n){const c=window.app;if(c&&c.game&&c.game.scene){const R=c.game.scene.scenes.find(I=>{var m;return((m=I.scene)==null?void 0:m.key)==="MargeScene"});R&&R.cameraParams?(console.log("Updating MargeScene cameraParams with final animation position"),console.log("Before update - cameraParams:",R.cameraParams),R.cameraParams.positionX=n.position.x,R.cameraParams.positionY=n.position.y,R.cameraParams.positionZ=n.position.z,R.cameraParams.rotationX=n.rotation.x*180/Math.PI,R.cameraParams.rotationY=n.rotation.y*180/Math.PI,R.cameraParams.rotationZ=n.rotation.z*180/Math.PI,R.cameraParams.fov=n.fov,console.log("After update - cameraParams:",R.cameraParams),console.log("MargeScene cameraParams updated successfully")):console.warn("MargeScene or cameraParams not found")}else console.warn("App or game not available for updating MargeScene cameraParams")}animateKeyframes(n){var i;const M=this.currentAnimationData.keyframes;if(M.length===0)return;let R=M[0],I=M[M.length-1];for(let d=0;d<M.length-1;d++)if(n*100>=M[d].timePercent&&n*100<=M[d+1].timePercent){R=M[d],I=M[d+1];break}const m=(n*100-R.timePercent)/(I.timePercent-R.timePercent),E=(i=this.threeJSManager)==null?void 0:i.getCamera();if(E){const d=this.lerp(R.positionX,I.positionX,m),S=this.lerp(R.positionY,I.positionY,m),u=this.lerp(R.positionZ,I.positionZ,m);E.position.set(d,S,u)}if(E){const d=this.lerpRotation(R.rotationX,I.rotationX,m),S=this.lerpRotation(R.rotationY,I.rotationY,m),u=this.lerpRotation(R.rotationZ,I.rotationZ,m);E.rotation.set(d*Math.PI/180,S*Math.PI/180,u*Math.PI/180)}if(E&&R.fov!==void 0&&I.fov!==void 0){const d=this.lerp(R.fov,I.fov,m);E.fov=d,E.updateProjectionMatrix()}}animateSimple(n){var R;const c=this.applyEasing(n,this.settings.easing),M=(R=this.threeJSManager)==null?void 0:R.getCamera();if(M&&this.startPosition){const I=this.lerp(this.startPosition.x,this.settings.positionX,c),m=this.lerp(this.startPosition.y,this.settings.positionY,c),E=this.lerp(this.startPosition.z,this.settings.positionZ,c);M.position.set(I,m,E)}if(M&&this.startRotation){const I=this.startRotation.x*180/Math.PI,m=this.startRotation.y*180/Math.PI,E=this.startRotation.z*180/Math.PI,i=this.lerpRotation(I,this.settings.rotationX,c),d=this.lerpRotation(m,this.settings.rotationY,c),S=this.lerpRotation(E,this.settings.rotationZ,c);M.rotation.set(i*Math.PI/180,d*Math.PI/180,S*Math.PI/180)}}stopAnimation(){var M;this.animationId!==null&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.settings.isPlaying=!1,this.settings.progress=0,this.animationCompletedTime=performance.now();const n=(M=this.threeJSManager)==null?void 0:M.getCamera();n&&(console.log("Animation stopped, updating MargeScene cameraParams with current position"),this.updateMargeSceneCameraParams(n));const c=window.cameraGUI;c&&c.enableSync&&(console.log("Re-enabling CameraGUI sync for debugging after animation completion"),setTimeout(()=>{c&&c.enableSync&&c.enableSync()},1e3))}isAnimating(){return this.settings.isPlaying}hasAnimationRecentlyCompleted(){const n=performance.now()-this.animationCompletedTime,c=n<this.ANIMATION_SETTLE_TIME,M=new Error().stack;return M&&(M.includes("orientationchange")||M.includes("resize"))&&(console.log("CameraAnimationSystem: hasAnimationRecentlyCompleted called from:",M.split(`
`)[2]),console.log("CameraAnimationSystem: timeSinceCompletion:",n,"ms"),console.log("CameraAnimationSystem: isRecent:",c)),c}loadAndPlayAnimation(n){if(!this.threeJSManager){console.error("CameraAnimationSystem: threeJSManager not available");return}this.stopAnimation(),n.totalDuration&&(this.settings.duration=n.totalDuration),this.currentAnimationData=n,window.cameraGUI||console.warn("CameraAnimationSystem: CameraGUI not available when starting animation - this might cause sync issues"),this.startAnimation()}show(){console.log("Camera animation controls are now in the main GUI")}hide(){console.log("Camera animation controls are in the main GUI")}dispose(){this.stopAnimation(),this.gui&&this.gui.destroy()}setupKeyboardShortcuts(){document.addEventListener("keydown",n=>{if(!(!this.gui||this.gui.domElement.style.display==="none"))switch(n.key.toLowerCase()){case" ":n.preventDefault(),this.settings.isPlaying?this.stopAnimation():this.startAnimation();break;case"escape":n.preventDefault(),this.hide();break;case"c":n.preventDefault(),this.showCurveVisualizer();break;case"h":n.preventDefault(),this.hideCurveVisualizer();break;case"r":if(n.preventDefault(),this.threeJSManager){const c=this.threeJSManager.getCamera();c&&(c.position.set(18.9,-27,-22),c.rotation.set(-99*Math.PI/180,0,-91*Math.PI/180))}break}})}}const mO=Object.freeze(Object.defineProperty({__proto__:null,CameraAnimationSystem:zh},Symbol.toStringTag,{value:"Module"}));class lpt{constructor(n){this.modelParts=new Map,this.modelGroups=new Map,this.isSyncing=!1,this.isInitialized=!1,this.threeJSManager=n,this.modelParams={selectedPart:"None",availableParts:["None"],positionX:0,positionY:0,positionZ:0,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,scaleZ:1,anchorX:0,anchorY:0,anchorZ:0,resetPart:()=>this.resetPart(),resetAllParts:()=>this.resetAllParts()},this.gui=new Iu({width:350}),document.body.appendChild(this.gui.domElement),this.gui.domElement.style.setProperty("position","fixed","important"),this.gui.domElement.style.setProperty("top","50px","important"),this.gui.domElement.style.setProperty("left","10px","important"),this.gui.domElement.style.setProperty("z-index","999999","important"),setTimeout(()=>{this.gui.domElement.style.setProperty("background-color","rgba(0,0,0,0.5)","important"),this.gui.domElement.style.setProperty("border","2px solid #333","important"),this.gui.domElement.style.setProperty("border-radius","8px","important"),this.gui.domElement.style.setProperty("box-shadow","0 4px 20px rgba(0,0,0,0.5)","important")},100),this.waitForModelsAndSetup(),this.hide()}waitForModelsAndSetup(){if(this.hasLoadedModels()){this.scanModelHierarchy(),this.createGroups(),this.setupGUI(),this.anchorSphere=this.createAnchorSphere();const n=this.threeJSManager.getScene();n&&(n.add(this.anchorSphere),this.anchorSphere.position.set(0,0,0))}else setTimeout(()=>this.waitForModelsAndSetup(),100)}hasLoadedModels(){const n=this.threeJSManager.assetManager;return n?n.getLoadedModelCount()>0:!1}scanModelHierarchy(){if(this.modelParts.clear(),this.modelGroups.clear(),!this.threeJSManager.assetManager){console.log("ModelGUI: No asset manager available");return}const c=this.threeJSManager.getScene();if(!c){console.log("ModelGUI: No scene available");return}console.log("ModelGUI: Scanning scene for objects..."),c.traverse(I=>{I.type==="Scene"||I.type==="Camera"||I.type==="Light"||(I.children.length>0||I.type==="Group"||I.type==="Mesh")&&(console.log("ModelGUI: Found object:",I.name,"type:",I.type,"children:",I.children.length),this.scanObjectHierarchy(I,0,""))}),this.createGroups();const M=Array.from(this.modelParts.values()).map(I=>{const m=this.createHierarchicalDisplayName(I.name,I.depth);return{id:I.id,displayName:m}});M.sort((I,m)=>{const E=this.modelParts.get(I.id),i=this.modelParts.get(m.id);return E.depth!==i.depth?E.depth-i.depth:I.displayName.localeCompare(m.displayName)});const R=Array.from(this.modelGroups.values()).map(I=>({id:I.id,displayName:`📦 ${I.name} (${I.parts.length} parts)`}));this.modelParams.availableParts=["None",...R.map(I=>I.displayName),...M.map(I=>I.displayName)],console.log("Model hierarchy scanned:",this.modelParts.size,"parts found,",this.modelGroups.size,"groups created"),this.modelParts.size===0&&console.log("ModelGUI: No parts found. Scene objects:",c.children.map(I=>`${I.name} (${I.type})`))}createHierarchicalDisplayName(n,c){const M="  ".repeat(c),R=c>0?"├─ ":"";return`${M}${R}${n}`}scanObjectHierarchy(n,c,M){const R=M?`${M} > ${n.name}`:n.name,I={id:n.uuid,name:n.name||"Unnamed",object:n,depth:c,path:R,position:{x:n.position.x,y:n.position.y,z:n.position.z},rotation:{x:n.rotation.x*180/Math.PI,y:n.rotation.y*180/Math.PI,z:n.rotation.z*180/Math.PI},scale:{x:n.scale.x,y:n.scale.y,z:n.scale.z}};this.modelParts.set(I.id,I),n.children.forEach((m,E)=>{this.scanObjectHierarchy(m,c+1,R)})}createGroups(){const n=[];for(const c of this.modelParts.values())(c.name==="mirror_glass02"||c.name==="mirror02")&&n.push(c);if(n.length>0){const c={id:"rearview-group",name:"rearview",parts:n,position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},originalPositions:new Map,originalRotations:new Map,originalScales:new Map};if(n.length>0){const M={x:0,y:0,z:0},R={x:0,y:0,z:0},I={x:1,y:1,z:1};n.forEach(m=>{c.originalPositions.set(m.id,{x:m.position.x,y:m.position.y,z:m.position.z}),c.originalRotations.set(m.id,{x:m.rotation.x,y:m.rotation.y,z:m.rotation.z}),c.originalScales.set(m.id,{x:m.scale.x,y:m.scale.y,z:m.scale.z}),M.x+=m.position.x,M.y+=m.position.y,M.z+=m.position.z,R.x+=m.rotation.x,R.y+=m.rotation.y,R.z+=m.rotation.z,I.x+=m.scale.x,I.y+=m.scale.y,I.z+=m.scale.z}),c.position={x:M.x/n.length,y:M.y/n.length,z:M.z/n.length},c.rotation={x:R.x/n.length,y:R.y/n.length,z:R.z/n.length},c.scale={x:1,y:1,z:1}}this.modelGroups.set(c.id,c),console.log("Created rearview group with",n.length,"parts:",n.map(M=>M.name))}}setupGUI(){if(!this.gui){console.error("GUI is not initialized!");return}try{if(this.isInitialized){try{document.body.contains(this.gui.domElement)?this.gui.destroy():this.gui.domElement=null}catch(i){if(console.warn("Error destroying existing GUI:",i),this.gui.domElement&&this.gui.domElement.parentNode)try{this.gui.domElement.parentNode.removeChild(this.gui.domElement)}catch(d){console.warn("Error removing GUI from DOM:",d)}}this.gui=new Iu({width:350}),document.body.appendChild(this.gui.domElement),this.gui.domElement.style.setProperty("position","fixed","important"),this.gui.domElement.style.setProperty("top","50px","important"),this.gui.domElement.style.setProperty("left","50px","important"),this.gui.domElement.style.setProperty("z-index","999999","important"),this.gui.domElement.style.setProperty("background-color","rgba(0,0,0,0.9)","important"),this.gui.domElement.style.setProperty("border","2px solid #333","important"),this.gui.domElement.style.setProperty("border-radius","8px","important"),this.gui.domElement.style.setProperty("box-shadow","0 4px 20px rgba(0,0,0,0.5)","important"),this.gui.domElement.addEventListener("contextmenu",i=>(i.preventDefault(),i.stopPropagation(),!1)),this.gui.domElement.addEventListener("mousedown",i=>{if(i.button===2)return i.preventDefault(),i.stopPropagation(),!1})}const n=this.gui.addFolder("Part Selection"),c=n.add(this.modelParams,"selectedPart",this.modelParams.availableParts).name("Select Part").onChange(i=>{this.selectPart(i)}),M=this.gui.addFolder("Position");M.add(this.modelParams,"positionX",-200,200).step(.1).name("X").onChange(i=>{!this.isSyncing&&(this.selectedPart||this.selectedGroup)&&this.updatePartPosition("x",i)}),M.add(this.modelParams,"positionY",-200,200).step(.1).name("Y").onChange(i=>{!this.isSyncing&&(this.selectedPart||this.selectedGroup)&&this.updatePartPosition("y",i)}),M.add(this.modelParams,"positionZ",-200,200).step(.1).name("Z").onChange(i=>{!this.isSyncing&&(this.selectedPart||this.selectedGroup)&&this.updatePartPosition("z",i)});const R=this.gui.addFolder("Rotation (°)");R.add(this.modelParams,"rotationX",-180,180).step(1).name("X").onChange(i=>{!this.isSyncing&&(this.selectedPart||this.selectedGroup)&&this.updatePartRotation("x",i)}),R.add(this.modelParams,"rotationY",-180,180).step(1).name("Y").onChange(i=>{!this.isSyncing&&(this.selectedPart||this.selectedGroup)&&this.updatePartRotation("y",i)}),R.add(this.modelParams,"rotationZ",-180,180).step(1).name("Z").onChange(i=>{!this.isSyncing&&(this.selectedPart||this.selectedGroup)&&this.updatePartRotation("z",i)});const I=this.gui.addFolder("Scale");I.add(this.modelParams,"scaleX",.1,10).step(.1).name("X").onChange(i=>{!this.isSyncing&&(this.selectedPart||this.selectedGroup)&&this.updatePartScale("x",i)}),I.add(this.modelParams,"scaleY",.1,10).step(.1).name("Y").onChange(i=>{!this.isSyncing&&(this.selectedPart||this.selectedGroup)&&this.updatePartScale("y",i)}),I.add(this.modelParams,"scaleZ",.1,10).step(.1).name("Z").onChange(i=>{!this.isSyncing&&(this.selectedPart||this.selectedGroup)&&this.updatePartScale("z",i)});const m=this.gui.addFolder("Anchor Point");m.add(this.modelParams,"anchorX",-200,200).step(.1).name("X").onChange(i=>{!this.isSyncing&&(this.selectedPart||this.selectedGroup)&&this.updateAnchorPoint("x",i)}),m.add(this.modelParams,"anchorY",-200,200).step(.1).name("Y").onChange(i=>{!this.isSyncing&&(this.selectedPart||this.selectedGroup)&&this.updateAnchorPoint("y",i)}),m.add(this.modelParams,"anchorZ",-200,200).step(.1).name("Z").onChange(i=>{!this.isSyncing&&(this.selectedPart||this.selectedGroup)&&this.updateAnchorPoint("z",i)});const E=this.gui.addFolder("Actions");E.add(this.modelParams,"resetPart").name("Reset Part"),E.add(this.modelParams,"resetAllParts").name("Reset All Parts"),E.add({hide:()=>this.hide()},"hide").name("Hide GUI"),E.add({refresh:()=>this.refreshParts()},"refresh").name("Refresh Parts"),n.open(),M.open(),R.open(),I.open(),E.open(),this.isInitialized=!0,console.log("Model GUI setup completed successfully")}catch(n){console.error("Error setting up Model GUI:",n)}}selectPart(n){if(n==="None"){this.selectedPart=void 0,this.selectedGroup=void 0,this.clearPartValues();return}if(n.startsWith("📦 ")){const M=n.replace("📦 ","").replace(/ \(\d+ parts\)$/,""),R=Array.from(this.modelGroups.values()).find(I=>I.name===M);if(R){if(this.selectedGroup=R,this.selectedPart=void 0,this.anchorSphere){const I=this.calculateGroupCenter(R.parts);this.anchorSphere.position.copy(I)}this.syncGUIWithGroup();return}}const c=Array.from(this.modelParts.values()).find(M=>this.createHierarchicalDisplayName(M.name,M.depth)===n);if(c){if(this.selectedPart=c,this.selectedGroup=void 0,this.anchorSphere){const M=this.calculateMeshCenter(c.object);this.anchorSphere.position.copy(M)}this.syncGUIWithPart()}}syncGUIWithPart(){if(this.selectedPart){if(this.isSyncing=!0,this.modelParams.positionX=this.selectedPart.position.x,this.modelParams.positionY=this.selectedPart.position.y,this.modelParams.positionZ=this.selectedPart.position.z,this.modelParams.rotationX=this.selectedPart.rotation.x,this.modelParams.rotationY=this.selectedPart.rotation.y,this.modelParams.rotationZ=this.selectedPart.rotation.z,this.modelParams.scaleX=this.selectedPart.scale.x,this.modelParams.scaleY=this.selectedPart.scale.y,this.modelParams.scaleZ=this.selectedPart.scale.z,this.anchorSphere&&(this.modelParams.anchorX=this.anchorSphere.position.x,this.modelParams.anchorY=this.anchorSphere.position.y,this.modelParams.anchorZ=this.anchorSphere.position.z),this.gui){const n=this.gui.__folders;if(n){if(n.Position){const c=n.Position.__controllers;c&&c.forEach(M=>{const R=M.property;R==="positionX"&&M.setValue(this.modelParams.positionX),R==="positionY"&&M.setValue(this.modelParams.positionY),R==="positionZ"&&M.setValue(this.modelParams.positionZ)})}if(n["Rotation (°)"]){const c=n["Rotation (°)"].__controllers;c&&c.forEach(M=>{const R=M.property;R==="rotationX"&&M.setValue(this.modelParams.rotationX),R==="rotationY"&&M.setValue(this.modelParams.rotationY),R==="rotationZ"&&M.setValue(this.modelParams.rotationZ)})}if(n.Scale){const c=n.Scale.__controllers;c&&c.forEach(M=>{const R=M.property;R==="scaleX"&&M.setValue(this.modelParams.scaleX),R==="scaleY"&&M.setValue(this.modelParams.scaleY),R==="scaleZ"&&M.setValue(this.modelParams.scaleZ)})}if(n["Anchor Point"]){const c=n["Anchor Point"].__controllers;c&&c.forEach(M=>{const R=M.property;R==="anchorX"&&M.setValue(this.modelParams.anchorX),R==="anchorY"&&M.setValue(this.modelParams.anchorY),R==="anchorZ"&&M.setValue(this.modelParams.anchorZ)})}}}setTimeout(()=>{this.isSyncing=!1},10)}}syncGUIWithGroup(){if(this.selectedGroup){if(this.isSyncing=!0,this.modelParams.positionX=this.selectedGroup.position.x,this.modelParams.positionY=this.selectedGroup.position.y,this.modelParams.positionZ=this.selectedGroup.position.z,this.modelParams.rotationX=this.selectedGroup.rotation.x,this.modelParams.rotationY=this.selectedGroup.rotation.y,this.modelParams.rotationZ=this.selectedGroup.rotation.z,this.modelParams.scaleX=this.selectedGroup.scale.x,this.modelParams.scaleY=this.selectedGroup.scale.y,this.modelParams.scaleZ=this.selectedGroup.scale.z,this.anchorSphere&&(this.modelParams.anchorX=this.anchorSphere.position.x,this.modelParams.anchorY=this.anchorSphere.position.y,this.modelParams.anchorZ=this.anchorSphere.position.z),this.gui){const n=this.gui.__folders;if(n){if(n.Position){const c=n.Position.__controllers;c&&c.forEach(M=>{const R=M.property;R==="positionX"&&M.setValue(this.modelParams.positionX),R==="positionY"&&M.setValue(this.modelParams.positionY),R==="positionZ"&&M.setValue(this.modelParams.positionZ)})}if(n["Rotation (°)"]){const c=n["Rotation (°)"].__controllers;c&&c.forEach(M=>{const R=M.property;R==="rotationX"&&M.setValue(this.modelParams.rotationX),R==="rotationY"&&M.setValue(this.modelParams.rotationY),R==="rotationZ"&&M.setValue(this.modelParams.rotationZ)})}if(n.Scale){const c=n.Scale.__controllers;c&&c.forEach(M=>{const R=M.property;R==="scaleX"&&M.setValue(this.modelParams.scaleX),R==="scaleY"&&M.setValue(this.modelParams.scaleY),R==="scaleZ"&&M.setValue(this.modelParams.scaleZ)})}if(n["Anchor Point"]){const c=n["Anchor Point"].__controllers;c&&c.forEach(M=>{const R=M.property;R==="anchorX"&&M.setValue(this.modelParams.anchorX),R==="anchorY"&&M.setValue(this.modelParams.anchorY),R==="anchorZ"&&M.setValue(this.modelParams.anchorZ)})}}}setTimeout(()=>{this.isSyncing=!1},10)}}clearPartValues(){this.isSyncing=!0,this.modelParams.positionX=0,this.modelParams.positionY=0,this.modelParams.positionZ=0,this.modelParams.rotationX=0,this.modelParams.rotationY=0,this.modelParams.rotationZ=0,this.modelParams.scaleX=1,this.modelParams.scaleY=1,this.modelParams.scaleZ=1,setTimeout(()=>{this.isSyncing=!1},10)}updatePartPosition(n,c){if(this.selectedPart)this.selectedPart.object.position[n]=c,this.selectedPart.position[n]=c,this.threeJSManager.render();else if(this.selectedGroup){const M=this.selectedGroup.position[n],R=c-M;this.selectedGroup.parts.forEach(I=>{const m=I.position[n]+R;I.object.position[n]=m,I.position[n]=m}),this.selectedGroup.position[n]=c,this.threeJSManager.render()}}calculateMeshCenter(n){const c=new _h;return n instanceof fi&&n.geometry?c.setFromBufferAttribute(n.geometry.attributes.position):c.setFromObject(n),c.getCenter(new wt)}calculateGroupCenter(n){const c=new wt(0,0,0);return n.forEach(M=>{const R=this.calculateMeshCenter(M.object);c.add(R)}),c.divideScalar(n.length)}rotateAroundLocalCenter(n,c,M){const R=this.calculateMeshCenter(n);n.position.clone(),n.position.sub(R);const I=new ei,m=M*Math.PI/180;c==="x"?I.makeRotationX(m):c==="y"?I.makeRotationY(m):c==="z"&&I.makeRotationZ(m),n.applyMatrix4(I),n.position.add(R)}scaleAroundLocalCenter(n,c,M){const R=this.calculateMeshCenter(n);n.position.clone(),n.position.sub(R),n.scale[c]=M,n.position.add(R)}updatePartRotation(n,c){if(this.selectedPart)this.rotateAroundLocalCenter(this.selectedPart.object,n,c),this.selectedPart.rotation[n]=c,this.threeJSManager.render();else if(this.selectedGroup){const M=this.selectedGroup.rotation[n],R=c-M;this.selectedGroup.parts.forEach(I=>{const m=I.rotation[n]+R;this.rotateAroundLocalCenter(I.object,n,m),I.rotation[n]=m}),this.selectedGroup.rotation[n]=c,this.threeJSManager.render()}}updatePartScale(n,c){if(this.selectedPart)this.scaleAroundLocalCenter(this.selectedPart.object,n,c),this.selectedPart.scale[n]=c,this.threeJSManager.render();else if(this.selectedGroup){const M=this.selectedGroup.scale[n],R=c/M;this.selectedGroup.parts.forEach(I=>{const m=I.scale[n]*R;this.scaleAroundLocalCenter(I.object,n,m),I.scale[n]=m}),this.selectedGroup.scale[n]=c,this.threeJSManager.render()}}createAnchorSphere(){const n=new eg(.2,8,8),c=new Hr({color:16711680}),M=new fi(n,c);return M.name="anchorSphere",M}updateAnchorPoint(n,c){this.anchorSphere&&(this.anchorSphere.position[n]=c),n==="x"?this.modelParams.anchorX=c:n==="y"?this.modelParams.anchorY=c:n==="z"&&(this.modelParams.anchorZ=c),this.threeJSManager.render()}rotateAroundAnchor(n,c,M){if(!this.anchorSphere)return;const R=this.anchorSphere.position.clone();n.position.clone(),n.position.sub(R),n.rotation[c]=M*Math.PI/180,n.position.add(R)}resetPart(){if(this.selectedPart)this.selectedPart.object.position.set(0,0,0),this.selectedPart.position={x:0,y:0,z:0},this.selectedPart.object.rotation.set(0,0,0),this.selectedPart.rotation={x:0,y:0,z:0},this.selectedPart.object.scale.set(1,1,1),this.selectedPart.scale={x:1,y:1,z:1},this.syncGUIWithPart(),this.threeJSManager.render();else if(this.selectedGroup){this.selectedGroup.parts.forEach(I=>{const m=this.selectedGroup.originalPositions.get(I.id),E=this.selectedGroup.originalRotations.get(I.id),i=this.selectedGroup.originalScales.get(I.id);m&&(I.object.position.set(m.x,m.y,m.z),I.position={...m}),E&&(I.object.rotation.set(E.x*Math.PI/180,E.y*Math.PI/180,E.z*Math.PI/180),I.rotation={...E}),i&&(I.object.scale.set(i.x,i.y,i.z),I.scale={...i})});const n={x:0,y:0,z:0},c={x:0,y:0,z:0},M={x:1,y:1,z:1};this.selectedGroup.parts.forEach(I=>{const m=this.selectedGroup.originalPositions.get(I.id),E=this.selectedGroup.originalRotations.get(I.id),i=this.selectedGroup.originalScales.get(I.id);m&&(n.x+=m.x,n.y+=m.y,n.z+=m.z),E&&(c.x+=E.x,c.y+=E.y,c.z+=E.z),i&&(M.x+=i.x,M.y+=i.y,M.z+=i.z)});const R=this.selectedGroup.parts.length;this.selectedGroup.position={x:n.x/R,y:n.y/R,z:n.z/R},this.selectedGroup.rotation={x:c.x/R,y:c.y/R,z:c.z/R},this.selectedGroup.scale={x:M.x/R,y:M.y/R,z:M.z/R},this.syncGUIWithGroup(),this.threeJSManager.render()}}resetAllParts(){this.modelParts.forEach(n=>{n.object.position.set(0,0,0),n.position={x:0,y:0,z:0},n.object.rotation.set(0,0,0),n.rotation={x:0,y:0,z:0},n.object.scale.set(1,1,1),n.scale={x:1,y:1,z:1}}),this.modelGroups.forEach(n=>{n.position={x:0,y:0,z:0},n.rotation={x:0,y:0,z:0},n.scale={x:1,y:1,z:1}}),this.selectedPart?this.syncGUIWithPart():this.selectedGroup&&this.syncGUIWithGroup(),this.threeJSManager.render()}refreshParts(){this.scanModelHierarchy(),this.setupGUI()}show(){this.gui&&(this.gui.domElement.style.setProperty("display","block","important"),this.scanModelHierarchy(),this.modelParts.size===0&&setTimeout(()=>{this.scanModelHierarchy()},100))}hide(){this.gui&&this.gui.domElement.style.setProperty("display","none","important")}isVisible(){return this.gui?this.gui.domElement.style.display!=="none":!1}dispose(){this.gui&&this.gui.destroy()}update(){}}class upt{constructor(n){this.lights=new Map,this.isSyncing=!1,this.isInitialized=!1,this.threeJSManager=n,this.lightParams={selectedLight:"None",availableLights:["None"],positionX:0,positionY:0,positionZ:0,colorR:1,colorG:1,colorB:1,intensity:1,distance:50,decay:1,castShadow:!1,shadowBias:-.001,shadowMapSize:128,resetLight:()=>this.resetLight(),resetAllLights:()=>this.resetAllLights()},this.gui=new Iu({width:350}),document.body.appendChild(this.gui.domElement),this.gui.domElement.style.setProperty("position","fixed","important"),this.gui.domElement.style.setProperty("top","50px","important"),this.gui.domElement.style.setProperty("left","50px","important"),this.gui.domElement.style.setProperty("z-index","999999","important"),this.gui.domElement.addEventListener("contextmenu",c=>(c.preventDefault(),c.stopPropagation(),!1)),this.gui.domElement.addEventListener("mousedown",c=>{if(c.button===2)return c.preventDefault(),c.stopPropagation(),!1}),setTimeout(()=>{this.gui.domElement.style.setProperty("background-color","rgba(0,0,0,0.5)","important"),this.gui.domElement.style.setProperty("border","2px solid #333","important"),this.gui.domElement.style.setProperty("border-radius","8px","important"),this.gui.domElement.style.setProperty("box-shadow","0 4px 20px rgba(0,0,0,0.5)","important")},100),this.waitForLightsAndSetup(),this.hide()}waitForLightsAndSetup(){this.threeJSManager.getScene()&&this.hasLights()?(console.log("Lights available, setting up GUI..."),this.scanLights(),this.setupGUI()):setTimeout(()=>this.waitForLightsAndSetup(),100)}hasLights(){const n=this.threeJSManager.getScene();if(!n)return!1;let c=0;return n.traverse(M=>{M instanceof Oo&&c++}),c>0}scanLights(){this.lights.clear();const n=this.threeJSManager.getScene();n&&(n.traverse(c=>{c instanceof Oo&&this.addLightInfo(c)}),this.lightParams.availableLights=["None",...Array.from(this.lights.keys())],console.log("Lights scanned:",this.lightParams.availableLights.length-1,"lights found"))}addLightInfo(n){var M,R,I;const c={id:n.uuid,name:n.name||this.getLightTypeName(n),light:n,type:this.getLightTypeName(n),position:{x:n.position.x,y:n.position.y,z:n.position.z},color:{r:n.color.r,g:n.color.g,b:n.color.b},intensity:n.intensity,castShadow:n.castShadow||!1,shadowBias:((M=n.shadow)==null?void 0:M.bias)||-.001,shadowMapSize:((I=(R=n.shadow)==null?void 0:R.mapSize)==null?void 0:I.width)||128};(n instanceof Mo||n instanceof wh)&&(c.distance=n.distance,c.decay=n.decay),this.lights.set(c.name,c)}getLightTypeName(n){return n instanceof KO?"Ambient Light":n instanceof bf?"Directional Light":n instanceof Mo?"Point Light":n instanceof wh?"Spot Light":n instanceof Uit?"Hemisphere Light":"Light"}setupGUI(){if(!this.gui){console.error("GUI is not initialized!");return}try{if(this.isInitialized){try{document.body.contains(this.gui.domElement)?this.gui.destroy():this.gui.domElement=null}catch(d){if(console.warn("Error destroying existing GUI:",d),this.gui.domElement&&this.gui.domElement.parentNode)try{this.gui.domElement.parentNode.removeChild(this.gui.domElement)}catch(S){console.warn("Error removing GUI from DOM:",S)}}this.gui=new Iu({width:350}),document.body.appendChild(this.gui.domElement),this.gui.domElement.style.setProperty("position","fixed","important"),this.gui.domElement.style.setProperty("top","50px","important"),this.gui.domElement.style.setProperty("left","50px","important"),this.gui.domElement.style.setProperty("z-index","999999","important"),this.gui.domElement.style.setProperty("background-color","rgba(0,0,0,0.5)","important"),this.gui.domElement.style.setProperty("border","2px solid #333","important"),this.gui.domElement.style.setProperty("border-radius","8px","important"),this.gui.domElement.style.setProperty("box-shadow","0 4px 20px rgba(0,0,0,0.5)","important")}const n=this.gui.addFolder("Light Selection"),c=n.add(this.lightParams,"selectedLight",this.lightParams.availableLights).name("Select Light").onChange(d=>{this.selectLight(d)}),M=this.gui.addFolder("Position");M.add(this.lightParams,"positionX",-100,100).step(.1).name("X").onChange(d=>{!this.isSyncing&&this.selectedLight&&this.updateLightPosition("x",d)}),M.add(this.lightParams,"positionY",-100,100).step(.1).name("Y").onChange(d=>{!this.isSyncing&&this.selectedLight&&this.updateLightPosition("y",d)}),M.add(this.lightParams,"positionZ",-100,100).step(.1).name("Z").onChange(d=>{!this.isSyncing&&this.selectedLight&&this.updateLightPosition("z",d)});const R=this.gui.add(this.lightParams,"intensity",0,1).step(.01).name("Intensity").onChange(d=>{!this.isSyncing&&this.selectedLight&&this.updateLightIntensity(d)}),I=this.gui.add(this.lightParams,"distance",0,200).step(1).name("Distance").onChange(d=>{!this.isSyncing&&this.selectedLight&&this.updateLightDistance(d)});this.gui.distanceController=I,I.domElement.style.display="none";const m=this.gui.add(this.lightParams,"decay",0,5).step(.1).name("Decay").onChange(d=>{!this.isSyncing&&this.selectedLight&&this.updateLightDecay(d)});this.gui.decayController=m,m.domElement.style.display="none";const E=this.gui.addFolder("Shadows");E.add(this.lightParams,"castShadow").name("Cast Shadow").onChange(d=>{!this.isSyncing&&this.selectedLight&&this.updateLightCastShadow(d)}),E.add(this.lightParams,"shadowBias",-.01,.01).step(.001).name("Shadow Bias").onChange(d=>{!this.isSyncing&&this.selectedLight&&this.updateLightShadowBias(d)}),E.add(this.lightParams,"shadowMapSize",128,2048).step(128).name("Shadow Map Size").onChange(d=>{!this.isSyncing&&this.selectedLight&&this.updateLightShadowMapSize(d)});const i=this.gui.addFolder("Actions");i.add(this.lightParams,"resetLight").name("Reset Light"),i.add(this.lightParams,"resetAllLights").name("Reset All Lights"),i.add({hide:()=>this.hide()},"hide").name("Hide GUI"),i.add({refresh:()=>this.refreshLights()},"refresh").name("Refresh Lights"),n.open(),M.open(),E.open(),i.open(),this.isInitialized=!0,console.log("Light GUI setup completed successfully")}catch(n){console.error("Error setting up Light GUI:",n)}}selectLight(n){if(n==="None"){this.selectedLight=void 0,this.clearLightValues(),this.hideConditionalControls();return}const c=this.lights.get(n);c&&(this.selectedLight=c,this.syncGUIWithLight(),this.showConditionalControls())}showConditionalControls(){if(!this.selectedLight||!this.gui)return;const n=this.gui.distanceController,c=this.gui.decayController;this.selectedLight.light instanceof Mo||this.selectedLight.light instanceof wh?(n&&(n.domElement.style.display="block"),c&&(c.domElement.style.display="block")):(n&&(n.domElement.style.display="none"),c&&(c.domElement.style.display="none"))}hideConditionalControls(){if(!this.gui)return;const n=this.gui.distanceController,c=this.gui.decayController;n&&(n.domElement.style.display="none"),c&&(c.domElement.style.display="none")}syncGUIWithLight(){if(this.selectedLight){if(this.isSyncing=!0,this.lightParams.positionX=this.selectedLight.position.x,this.lightParams.positionY=this.selectedLight.position.y,this.lightParams.positionZ=this.selectedLight.position.z,this.lightParams.intensity=this.selectedLight.intensity,this.lightParams.castShadow=this.selectedLight.castShadow||!1,this.lightParams.shadowBias=this.selectedLight.shadowBias||-.001,this.lightParams.shadowMapSize=this.selectedLight.shadowMapSize||128,this.selectedLight.distance!==void 0&&(this.lightParams.distance=this.selectedLight.distance),this.selectedLight.decay!==void 0&&(this.lightParams.decay=this.selectedLight.decay),this.gui){const n=this.gui.__folders;if(n){if(n.Position){const M=n.Position.__controllers;M&&M.forEach(R=>{const I=R.property;I==="positionX"&&R.setValue(this.lightParams.positionX),I==="positionY"&&R.setValue(this.lightParams.positionY),I==="positionZ"&&R.setValue(this.lightParams.positionZ)})}if(n.Shadows){const M=n.Shadows.__controllers;M&&M.forEach(R=>{const I=R.property;I==="castShadow"&&R.setValue(this.lightParams.castShadow),I==="shadowBias"&&R.setValue(this.lightParams.shadowBias),I==="shadowMapSize"&&R.setValue(this.lightParams.shadowMapSize)})}}const c=this.gui.__controllers;c&&c.forEach(M=>{const R=M.property;R==="intensity"&&M.setValue(this.lightParams.intensity),R==="distance"&&M.setValue(this.lightParams.distance),R==="decay"&&M.setValue(this.lightParams.decay)})}this.showConditionalControls(),setTimeout(()=>{this.isSyncing=!1},10)}}clearLightValues(){if(this.isSyncing=!0,this.lightParams.positionX=0,this.lightParams.positionY=0,this.lightParams.positionZ=0,this.lightParams.intensity=1,this.lightParams.distance=50,this.lightParams.decay=1,this.lightParams.castShadow=!1,this.lightParams.shadowBias=-.001,this.lightParams.shadowMapSize=128,this.gui){const n=this.gui.__folders;if(n){if(n.Position){const M=n.Position.__controllers;M&&M.forEach(R=>{const I=R.property;I==="positionX"&&R.setValue(this.lightParams.positionX),I==="positionY"&&R.setValue(this.lightParams.positionY),I==="positionZ"&&R.setValue(this.lightParams.positionZ)})}if(n.Shadows){const M=n.Shadows.__controllers;M&&M.forEach(R=>{const I=R.property;I==="castShadow"&&R.setValue(this.lightParams.castShadow),I==="shadowBias"&&R.setValue(this.lightParams.shadowBias),I==="shadowMapSize"&&R.setValue(this.lightParams.shadowMapSize)})}}const c=this.gui.__controllers;c&&c.forEach(M=>{const R=M.property;R==="intensity"&&M.setValue(this.lightParams.intensity),R==="distance"&&M.setValue(this.lightParams.distance),R==="decay"&&M.setValue(this.lightParams.decay)})}setTimeout(()=>{this.isSyncing=!1},10)}updateLightPosition(n,c){this.selectedLight&&(this.selectedLight.light.position[n]=c,this.selectedLight.position[n]=c,this.threeJSManager.getRenderer()&&this.threeJSManager.render())}updateLightColor(n,c){this.selectedLight&&(this.selectedLight.light.color[n]=c,this.selectedLight.color[n]=c,this.threeJSManager.getRenderer()&&this.threeJSManager.render())}updateLightIntensity(n){this.selectedLight&&(this.selectedLight.light.intensity=n,this.selectedLight.intensity=n,this.threeJSManager.getRenderer()&&this.threeJSManager.render())}updateLightDistance(n){!this.selectedLight||!(this.selectedLight.light instanceof Mo||this.selectedLight.light instanceof wh)||(this.selectedLight.light.distance=n,this.selectedLight.distance=n,this.threeJSManager.getRenderer()&&this.threeJSManager.render())}updateLightDecay(n){!this.selectedLight||!(this.selectedLight.light instanceof Mo||this.selectedLight.light instanceof wh)||(this.selectedLight.light.decay=n,this.selectedLight.decay=n,this.threeJSManager.getRenderer()&&this.threeJSManager.render())}updateLightCastShadow(n){this.selectedLight&&(this.selectedLight.light.castShadow=n,this.selectedLight.castShadow=n,this.threeJSManager.getRenderer()&&this.threeJSManager.render())}updateLightShadowBias(n){!this.selectedLight||!this.selectedLight.light.shadow||(this.selectedLight.light.shadow.bias=n,this.selectedLight.shadowBias=n,this.threeJSManager.getRenderer()&&this.threeJSManager.render())}updateLightShadowMapSize(n){!this.selectedLight||!this.selectedLight.light.shadow||(this.selectedLight.light.shadow.mapSize.width=n,this.selectedLight.light.shadow.mapSize.height=n,this.selectedLight.shadowMapSize=n,this.threeJSManager.getRenderer()&&this.threeJSManager.render())}resetLight(){this.selectedLight&&(this.isSyncing=!0,this.selectedLight.light.position.set(0,0,0),this.selectedLight.position={x:0,y:0,z:0},this.selectedLight.light.color.setHex(16777215),this.selectedLight.color={r:1,g:1,b:1},this.selectedLight.light.intensity=1,this.selectedLight.intensity=1,(this.selectedLight.light instanceof Mo||this.selectedLight.light instanceof wh)&&(this.selectedLight.light.distance=50,this.selectedLight.light.decay=1,this.selectedLight.distance=50,this.selectedLight.decay=1),this.selectedLight.light.castShadow=!1,this.selectedLight.castShadow=!1,this.selectedLight.light.shadow&&(this.selectedLight.light.shadow.bias=-.001,this.selectedLight.shadowBias=-.001),this.syncGUIWithLight(),this.threeJSManager.getRenderer()&&this.threeJSManager.render(),setTimeout(()=>{this.isSyncing=!1},10))}resetAllLights(){this.isSyncing=!0,this.lights.forEach(n=>{n.light.position.set(0,0,0),n.position={x:0,y:0,z:0},n.light.color.setHex(16777215),n.color={r:1,g:1,b:1},n.light.intensity=1,n.intensity=1,(n.light instanceof Mo||n.light instanceof wh)&&(n.light.distance=50,n.light.decay=1,n.distance=50,n.decay=1),n.light.castShadow=!1,n.castShadow=!1,n.light.shadow&&(n.light.shadow.bias=-.001,n.shadowBias=-.001)}),this.selectedLight&&this.syncGUIWithLight(),this.threeJSManager.getRenderer()&&this.threeJSManager.render(),setTimeout(()=>{this.isSyncing=!1},10)}refreshLights(){this.scanLights(),this.setupGUI()}show(){this.gui&&(this.gui.domElement.style.setProperty("display","block","important"),this.scanLights(),this.lights.size===0&&setTimeout(()=>{this.scanLights()},100))}hide(){this.gui&&this.gui.domElement.style.setProperty("display","none","important")}isVisible(){return this.gui?this.gui.domElement.style.display!=="none":!1}dispose(){this.gui&&this.gui.destroy()}update(){this.isVisible()&&!this.isSyncing&&this.selectedLight&&this.syncGUIWithLight()}}const dpt=["Waiting","Driving","Choosing","Visiting","Concerting","Caring"];function fpt(L){var T,P;if(console.log("Setting up debug GUI with options:",L),!L.app||!L.game||!L.player){console.error("Required options are missing in DebugGUI");return}const n=new Iu;n.width=350,window.debugGUI=n,n.domElement.style.zIndex="999999",n.domElement.style.opacity="1",n.domElement.style.visibility="visible",n.domElement.style.position="fixed",n.domElement.style.top="10px",n.domElement.style.right="10px",n.domElement.style.pointerEvents="auto",n.domElement.style.transform="translateZ(0)",n.domElement.addEventListener("contextmenu",A=>(A.preventDefault(),A.stopPropagation(),!1)),n.domElement.addEventListener("mousedown",A=>{if(A.button===2)return A.preventDefault(),A.stopPropagation(),!1}),document.body.appendChild(n.domElement),setTimeout(()=>{n.domElement.style.setProperty("background-color","rgba(0,0,0,0.5)","important"),n.domElement.style.setProperty("border","2px solid #333","important"),n.domElement.style.setProperty("border-radius","8px","important"),n.domElement.style.setProperty("box-shadow","0 4px 20px rgba(0,0,0,0.5)","important")},100);const c=n.addFolder("App");c.close();const M=L.app.state||"Focused";c.add({state:M},"state").name("App State").listen();const R=L.app.showMenu!==void 0?L.app.showMenu:!1;c.add({showMenu:R},"showMenu").name("Show Menu").onChange(A=>{L.app&&L.app.toggleMenu&&L.app.toggleMenu(A)});const I=L.app.muted!==void 0?L.app.muted:!1;c.add({muted:I},"muted").name("Muted"),c.add(L.app,"toggleMute").name("Toggle Mute"),c.add(L.app,"toggleMenu").name("Toggle Menu");const m=n.addFolder("Game");m.close();const E=L.game.state||"NotStarted";m.add({gameState:E},"gameState").name("Game State").listen(),m.add({pause:()=>L.game.pauseGame()},"pause").name("Pause");const i=n.addFolder("Music Controls");i.open();const d=L.app.metronomeEnabled!==void 0?L.app.metronomeEnabled:!0;i.add({metronomeEnabled:d},"metronomeEnabled").name("Enabled").onChange(A=>{L.app&&L.app.setMetronomeEnabled&&L.app.setMetronomeEnabled(A)});const S=L.app.metronomeBpm!==void 0?L.app.metronomeBpm:166;i.add({metronomeBpm:S},"metronomeBpm",40,240).step(1).name("BPM").onChange(A=>{L.app&&L.app.setMetronomeBpm&&L.app.setMetronomeBpm(A)});const u={get scalingFactor(){return L.app.getBpmScalingFactor?L.app.getBpmScalingFactor():1}};i.add(u,"scalingFactor").name("BPM Scaling Factor").listen();const l=L.app.availableLoops||["No Loop"],h=L.app.currentLoop||"No Loop";i.add({loop:h},"loop",l).name("Loop").onChange(A=>{console.log("Loop changed to:",A),L.app&&L.app.setLoop&&L.app.setLoop(A)});const r={musicVolume:.5,metronomeVolume:.1,transitionSpeed:.3};i.add(r,"musicVolume",0,1,.1).name("Music Volume").onChange(A=>{L.app&&L.app.setMusicVolume&&L.app.setMusicVolume(A)}),i.add(r,"metronomeVolume",0,1,.1).name("Metronome Volume").onChange(A=>{L.app&&L.app.setMetronomeVolume&&L.app.setMetronomeVolume(A)});const o={transitionSpeed:.3,transitionType:"downbeat"};i.add(o,"transitionSpeed",.1,3,.1).name("Transition Speed").onChange(A=>{L.app&&(L.app.transitionSpeed=A)}),i.add(o,"transitionType",["time","downbeat"]).name("Transition Type").onChange(A=>{L.app&&(L.app.transitionType=A)});const p=n.addFolder("Player");p.close();const a=((T=L.player.data)==null?void 0:T.name)||"Player";p.add({playerName:a},"playerName").name("Player Name");const v=((P=L.player.data)==null?void 0:P.progress)!==void 0?L.player.data.progress:0;p.add({playerProgress:v},"playerProgress",0,100).step(1).name("Progress");const x=L.player.state||"Idle";p.add({playerState:x},"playerState").name("Player State").listen(),p.add(L.player,"setState",dpt).name("Set State"),p.add(L.player,"save").name("Save Progress"),p.add(L.player,"load").name("Load Progress");const g=L.game.screenManager.listScreens(),y=n.addFolder("Screen Stack");if(y.close(),y.add({screen:g[0]},"screen",g).name("Current Screen").onChange(A=>{L.game.screenManager.switchTo(A)}),L.threeJSManager){const A=n.addFolder("Shader Controls");A.close();const b={size:1};A.add(b,"size",1,4).step(1).name("Pixel Size").onChange(k=>{const U=L.threeJSManager.getDitherMaterial();U&&(U.uniforms.pixelSize.value=k)});const O={threshold:.422};A.add(O,"threshold",.001,2).step(.001).name("Outline Threshold").onChange(k=>{L.threeJSManager.setOutlineThreshold(k)});const D={strength:1.5};A.add(D,"strength",0,1.5).step(.01).name("Outline Strength").onChange(k=>{L.threeJSManager.setOutlineStrength(k)});const B={width:.2};A.add(B,"width",.1,3).step(.1).name("Outline Width").onChange(k=>{L.threeJSManager.setOutlineWidth(k)});const G={enabled:!0};A.add(G,"enabled").name("Outline Enabled").onChange(k=>{L.threeJSManager.setOutlineStrength(k?1.5:0)});const V={currentMode:L.threeJSManager.getDitheringMode()};A.add(V,"currentMode").name("Current Mode").listen()}if(L.threeJSManager){const A=n.addFolder("Camera Animation"),b=zh.getInstance();b.initialize(L.threeJSManager);const O=()=>{if(!L.threeJSManager){console.log("ThreeJS manager not available");return}if(L.threeJSManager.getCamera()){console.log("ThreeJS manager is initialized, creating CameraGUI...");const Q=new mD(L.threeJSManager,b);window.cameraGUI=Q;const j={showCameraGUI:()=>Q.show(),hideCameraGUI:()=>Q.hide(),syncCamera:()=>{console.log("Manual camera sync requested"),Q&&Q.syncGUIWithCamera&&Q.syncGUIWithCamera()},debugCamera:()=>{if(console.log("Debug camera state requested"),Q&&Q.getCurrentCameraState){const it=Q.getCurrentCameraState();console.log("Current camera state:",it)}}};A.add(j,"showCameraGUI").name("Show Camera GUI"),A.add(j,"hideCameraGUI").name("Hide Camera GUI"),A.add(j,"syncCamera").name("Manual Sync Camera"),A.add(j,"debugCamera").name("Debug Camera State"),console.log("CameraGUI created successfully")}else console.log("ThreeJS manager not yet initialized, retrying in 100ms..."),setTimeout(O,100)};O();const D=()=>{if(!L.threeJSManager){console.log("ThreeJS manager not available for ModelGUI");return}if(L.threeJSManager.getScene()){console.log("ThreeJS manager is initialized, creating ModelGUI...");const Q=new lpt(L.threeJSManager);window.modelGUI=Q,console.log("ModelGUI created successfully")}else console.log("ThreeJS manager not yet initialized for ModelGUI, retrying in 100ms..."),setTimeout(D,100)};D();const B=()=>{if(!L.threeJSManager){console.log("ThreeJS manager not available for LightGUI");return}if(L.threeJSManager.getScene()){console.log("ThreeJS manager is initialized, creating LightGUI...");const Q=new upt(L.threeJSManager);window.lightGUI=Q,console.log("LightGUI created successfully")}else console.log("ThreeJS manager not yet initialized for LightGUI, retrying in 100ms..."),setTimeout(B,100)};B();const G={showMainGUI:()=>{n.domElement.style.display="block"}},V=n.addFolder("Debug Tools");V.close();const k={showModelGUI:()=>{const _=window.modelGUI;_?_.show():console.log("Model GUI not available yet")},hideModelGUI:()=>{const _=window.modelGUI;_&&_.hide()},refreshModelParts:()=>{const _=window.modelGUI;_&&_.refreshParts&&_.refreshParts()}},U={showLightGUI:()=>{const _=window.lightGUI;_?_.show():console.log("Light GUI not available yet")},hideLightGUI:()=>{const _=window.lightGUI;_&&_.hide()},refreshLights:()=>{const _=window.lightGUI;_&&_.refreshLights&&_.refreshLights()}};V.add(k,"showModelGUI").name("Show 3D Model GUI"),V.add(k,"hideModelGUI").name("Hide 3D Model GUI"),V.add(k,"refreshModelParts").name("Refresh Model Parts"),V.add(U,"showLightGUI").name("Show Light GUI"),V.add(U,"hideLightGUI").name("Hide Light GUI"),V.add(U,"refreshLights").name("Refresh Lights");const W={beatCount:0,measureCount:0,beatInMeasure:0,bpm:166,isAudioEnabled:!1,updateMetronomeInfo:()=>{const _=window.metronomeManager||_i.getInstance();_&&(W.beatCount=_.getGlobalBeatCount(),W.measureCount=_.getGlobalMeasureCount(),W.beatInMeasure=_.getBeatInMeasure(),W.bpm=_.getBpm(),W.isAudioEnabled=_.isAudioEnabled())},logCurrentState:()=>{const _=window.metronomeManager||_i.getInstance();if(_){const Q=_.getGlobalBeatCount(),j=_.getGlobalMeasureCount(),it=_.getBeatInMeasure(),K=it===0,J=(Q+1)%4,Y=J===0;console.log("=== Metronome Debug State ==="),console.log(`Beat Count: ${Q}`),console.log(`Measure Count: ${j}`),console.log(`Beat in Measure: ${it}`),console.log(`Is Downbeat: ${K}`),console.log(`Next Beat in Measure: ${J}`),console.log(`Is Next Downbeat: ${Y}`),console.log("============================")}}},X=V.addFolder("Metronome Debug");X.add(W,"beatCount").name("Beat Count").listen(),X.add(W,"measureCount").name("Measure Count").listen(),X.add(W,"beatInMeasure").name("Beat in Measure").listen(),X.add(W,"bpm").name("BPM").listen(),X.add(W,"isAudioEnabled").name("Audio Enabled").listen(),X.add(W,"logCurrentState").name("Log Current State"),setInterval(()=>{W.updateMetronomeInfo()},100),window.showMainDebugGUI=G.showMainGUI,window.cameraAnimationSystem=b,L.app.cameraAnimationSystem=b}return n}class cpt{constructor(){this.showMenu=!1,this.state="Focused",this.metronomeEnabled=!0,this.metronomeBpm=166,this.metronomeBeatsPerMeasure=4,this._audioStarted=!1,this.muted=!1,this.musicPlayers=new Map,this.currentLoop="No Loop",this.availableLoops=["No Loop","80s-noclick-166","stressful-click-166","regular-click-166","regular-noclick-166","stressful-noclick-166"],this.crossfadeDuration=1.33,this.allLoopsStarted=!1,this.musicVolume=.7,this.metronomeVolume=.1,this.transitionSpeed=.3,this.transitionType="downbeat",this.loopsStartedOnDownbeat=!1,this.startedLoops=new Set,this.instanceId=Math.random().toString(36).substr(2,9),this.player=new Vct,this.game=new kct(this),this.setupGUI(),this.setupFocusDetection()}get metronomeBeatCount(){return _i.getInstance().getGlobalBeatCount()}get metronomeMeasureCount(){return _i.getInstance().getGlobalMeasureCount()}get audioStarted(){return this._audioStarted}areLoopsSynchronized(){if(!this.allLoopsStarted)return!1;for(const[n,c]of this.musicPlayers)if(!this.startedLoops.has(n))return console.warn(`Loop ${n} not in started set but allLoopsStarted is true`),!1;return!0}preventLoopRestart(n){if(this.startedLoops.has(n)){console.warn(`Attempted to restart ${n} - prevented to maintain synchronization`);return}}get threeJSManager(){return this.game.threeJSManager}toggleMute(){this.muted=!this.muted,Rh.mute=this.muted}toggleMenu(n){this.showMenu=n,this.game.setMenuVisible(n)}setMetronomeEnabled(n){this.metronomeEnabled=n,this.updateMetronomeState()}setMetronomeBpm(n){this.metronomeBpm=n,_i.getInstance().setBpm(n),this.scaleMusicPlayersToBpm(n)}scaleMusicPlayersToBpm(n){const M=n/166,R=Math.max(.25,Math.min(4,M));R!==M&&console.warn(`BPM scaling factor ${M} clamped to ${R} for stability`),this.musicPlayers.forEach((I,m)=>{try{I.playbackRate=R}catch(E){console.error(`Failed to scale ${m} playback rate:`,E)}})}getBpmScalingFactor(){const c=this.metronomeBpm/166;return Math.max(.25,Math.min(4,c))}setMusicVolume(n){if(this.musicVolume=n,this.currentLoop!=="No Loop"&&this.musicPlayers.has(this.currentLoop)){const c=this.musicPlayers.get(this.currentLoop);c.volume.value=bo(n)}}setMetronomeVolume(n){this.metronomeVolume=n,_i.getInstance().setVolume(n)}pauseAudio(){this.muted=!0,Rh.mute=!0,_i.getInstance().pause()}resumeAudio(){this.muted=!1,Rh.mute=!1,_i.getInstance().resume(),this.currentLoop!=="No Loop"&&this.allLoopsStarted&&this.restartMusic()}restartMusic(){this.musicPlayers.forEach((n,c)=>{c===this.currentLoop?n.volume.value=bo(this.musicVolume):n.volume.value=-1/0})}async loadMusicFiles(){if(this.audioStarted){const n=["80s-noclick-166","stressful-click-166","regular-click-166","regular-noclick-166","stressful-noclick-166"];for(const c of n)try{const M=this.game.phaserGame;if(M&&M.cache&&M.cache.audio){const R=M.cache.audio.get(c);if(R){const I=new jC({url:R,loop:!0,volume:-1/0}).toDestination(),E=this.metronomeBpm/166,i=Math.max(.25,Math.min(4,E));I.playbackRate=i,this.musicPlayers.set(c,I)}else console.warn(`Audio file not found in cache: ${c}`)}else console.warn("Game cache not available for audio loading")}catch(M){console.error(`Failed to load music file: ${c}`,M)}}}setLoop(n){if(!this.audioStarted){this.pendingLoopSelection=n;return}if(!this.allLoopsStarted&&n!=="No Loop"){this.startAllLoopsImmediately(),this.currentLoop=n,this.performCrossfade(n);return}this.performCrossfade(n)}startAllLoopsImmediately(){if(this.allLoopsStarted)return;const n=_i.getInstance(),R=(4-n.getBeatInMeasure())%4*60/n.getBpm();this.musicPlayers.forEach((I,m)=>{this.startedLoops.has(m)||(I.start(Wr()+R),this.startedLoops.add(m))}),this.allLoopsStarted=!0,this.loopsStartedOnDownbeat=!0}performCrossfade(n){this.areLoopsSynchronized()||console.warn("Loops not synchronized, attempting to fix...");const c=bo(this.musicVolume),M=this.currentLoop,R=M==="No Loop",I=n==="No Loop";this.transitionType==="downbeat"?this.performDownbeatTransition(n,c,R,I,M):this.performTimeBasedTransition(n,c,R,I,M),this.currentLoop=n}performTimeBasedTransition(n,c,M,R,I){const m=this.crossfadeDuration/this.transitionSpeed;this.musicPlayers.forEach((E,i)=>{i===n&&!R?(E.volume.setValueAtTime(E.volume.value,Wr()),E.volume.linearRampToValueAtTime(c,Wr()+m)):i===I&&!M&&i!==n?(E.volume.setValueAtTime(E.volume.value,Wr()),E.volume.linearRampToValueAtTime(-1/0,Wr()+m)):i!==n&&i!==I&&(E.volume.value=-1/0)})}performDownbeatTransition(n,c,M,R,I){const m=_i.getInstance(),d=(4-m.getBeatInMeasure())%4*60/m.getBpm();this.musicPlayers.forEach((S,u)=>{u===n&&!R?(S.volume.setValueAtTime(-1/0,Wr()),S.volume.setValueAtTime(c,Wr()+d)):u===I&&!M&&u!==n?(S.volume.setValueAtTime(S.volume.value,Wr()),S.volume.setValueAtTime(-1/0,Wr()+d)):u!==n&&u!==I&&(S.volume.value=-1/0)})}async startAudioContext(){if(!this.audioStarted)try{if(console.log("App: Starting audio context..."),Aa.state==="suspended"&&(console.log("App: Audio context suspended, resuming..."),await Aa.resume()),Aa.state!=="running"&&(console.log("App: Starting Tone.js audio context..."),await eO()),Aa.state==="running"){if(console.log("App: Audio context successfully started"),this._audioStarted=!0,this.updateMetronomeState(),_i.getInstance().signalReady("audiocontext"),await this.loadMusicFiles(),this.pendingLoopSelection){const c=this.pendingLoopSelection;this.pendingLoopSelection=void 0,this.startAllLoopsImmediately(),this.currentLoop=c,this.performCrossfade(c)}}else console.error("App: Audio context failed to start, state:",Aa.state),this._audioStarted=!1}catch(n){console.error("App: Failed to start audio context:",n),this._audioStarted=!1}}async retryAudioContext(){if(!this.audioStarted){console.log("App: Retrying audio context...");let n=0;const c=3;for(;n<c&&!this.audioStarted;){n++,console.log(`App: Audio context attempt ${n}/${c}...`);try{if(await this.startAudioContext(),this.audioStarted){console.log("App: Audio context started, enabling metronome audio..."),_i.getInstance().signalReady("audiocontext");break}else console.log(`App: Audio context attempt ${n} failed`),n<c&&await new Promise(M=>setTimeout(M,500))}catch(M){console.error(`App: Audio context attempt ${n} failed with error:`,M),n<c&&await new Promise(R=>setTimeout(R,500))}}this.audioStarted||console.log("App: All audio context attempts failed")}}async startGame(){this.audioStarted||(await eO(),this._audioStarted=!0),this.game.startGame(),this.updateMetronomeState()}destroy(){}setupGUI(){fpt({app:this,game:this.game,player:this.player,threeJSManager:this.game.threeJSManager})}setupFocusDetection(){window.addEventListener("focus",async()=>{this.state="Focused",console.log("App gained focus, checking audio context...");const n=Aa.state;n!=="running"||!this.audioStarted?(console.log("App: Audio context needs restart, current state:",n),await this.retryAudioContext()):console.log("App: Audio context already running and started"),console.log("Audio context check completed, updating metronome state..."),this.muted=!1,Rh.mute=!1,this.game&&this.game.state==="Paused"&&this.game.resumeGame(),this.updateMetronomeState()}),window.addEventListener("blur",()=>{this.state="NotFocused",console.log("App lost focus, pausing game and muting audio..."),this.game&&this.game.state!=="NotStarted"&&this.game.pauseGame(),this.muted=!0,Rh.mute=!0,this.updateMetronomeState()}),document.addEventListener("visibilitychange",async()=>{if(document.visibilityState==="visible"){console.log("App became visible, checking audio context..."),this.state="Focused";const n=Aa.state;n!=="running"||!this.audioStarted?(console.log("App: Audio context needs restart on visibility change, current state:",n),await this.retryAudioContext()):console.log("App: Audio context already running and started on visibility change"),this.muted=!1,Rh.mute=!1,this.game&&this.game.state==="Paused"&&this.game.resumeGame(),this.updateMetronomeState()}else console.log("App became hidden, pausing game and muting audio..."),this.state="NotFocused",this.game&&this.game.state!=="NotStarted"&&this.game.pauseGame(),this.muted=!0,Rh.mute=!0,this.updateMetronomeState()})}updateMetronomeState(){console.log("updateMetronomeState: Metronome state updated (handled by MetronomeManager)")}getAudioContextStatus(){const n={};return this.musicPlayers.forEach((c,M)=>{n[M]={volume:c.volume.value,state:c.state,loaded:c.loaded,currentLoop:M===this.currentLoop}}),{audioStarted:this.audioStarted,metronomeEnabled:this.metronomeEnabled,state:this.state,gameState:this.game.state,toneContextState:Aa.state,crossfadeStatus:{allLoopsStarted:this.allLoopsStarted,currentLoop:this.currentLoop,crossfadeDuration:this.crossfadeDuration,loadedLoops:Array.from(this.musicPlayers.keys()),playerStatuses:n}}}}class ppt{constructor(){this.animationId=null,this.vertices=[],this.gridSize=50,this.lastBeatCount=-1,this.lastMeasureCount=-1,this.animationStartTime=0,this.container=document.createElement("div"),this.container.style.cssText=`
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -2;
      background: transparent;
      pointer-events: none;
      overflow: hidden;
    `,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.container.appendChild(this.canvas);const n=document.getElementById("game-container");n?n.appendChild(this.container):document.body.appendChild(this.container),this.setupCanvas(),this.drawGrid(),this.startAnimation()}setupCanvas(){const n=()=>{const c=document.getElementById("game-container"),M=c==null?void 0:c.getBoundingClientRect(),R=(M==null?void 0:M.width)||window.innerWidth,I=(M==null?void 0:M.height)||window.innerHeight;this.canvas.width=R,this.canvas.height=I,this.canvas.style.width=`${R}px`,this.canvas.style.height=`${I}px`,this.canvas.style.position="absolute",this.canvas.style.left="0px",this.canvas.style.top="0px",this.drawGrid()};n(),window.addEventListener("resize",n),window.addEventListener("orientationchange",n)}drawGrid(){const{width:n,height:c}=this.canvas,M=50,R=120,I=Math.min(n,c)/15;this.gridSize=Math.max(M,Math.min(R,I)),this.ctx.clearRect(0,0,n,c),this.ctx.fillStyle="white",this.ctx.fillRect(0,0,n,c),this.generateVertices(n,c),this.drawGridWithVertices()}generateVertices(n,c){this.vertices=[];for(let M=0;M<=n;M+=this.gridSize){for(let R=0;R<=c;R+=this.gridSize)this.vertices.push({x:M,y:R,originalX:M,originalY:R,targetX:M,targetY:R});for(let R=this.gridSize/2;R<c;R+=this.gridSize)this.vertices.push({x:M,y:R,originalX:M,originalY:R,targetX:M,targetY:R})}for(let M=0;M<=c;M+=this.gridSize){for(let R=0;R<=n;R+=this.gridSize)this.vertices.push({x:R,y:M,originalX:R,originalY:M,targetX:R,targetY:M});for(let R=this.gridSize/2;R<n;R+=this.gridSize)this.vertices.push({x:R,y:M,originalX:R,originalY:M,targetX:R,targetY:M})}}drawGridWithVertices(){const{width:n,height:c}=this.canvas;this.ctx.strokeStyle="#000",this.ctx.lineWidth=1;for(let M=0;M<=n;M+=this.gridSize){this.ctx.beginPath(),this.ctx.moveTo(M,0);for(let R=this.gridSize;R<c;R+=this.gridSize){const I=this.vertices.find(m=>Math.abs(m.originalX-M)<1&&Math.abs(m.originalY-R)<1);I?this.ctx.lineTo(I.x,I.y):this.ctx.lineTo(M,R)}this.ctx.lineTo(M,c),this.ctx.stroke()}for(let M=0;M<=c;M+=this.gridSize){this.ctx.beginPath(),this.ctx.moveTo(0,M);for(let R=this.gridSize;R<n;R+=this.gridSize){const I=this.vertices.find(m=>Math.abs(m.originalX-R)<1&&Math.abs(m.originalY-M)<1);I?this.ctx.lineTo(I.x,I.y):this.ctx.lineTo(R,M)}this.ctx.lineTo(n,M),this.ctx.stroke()}}startAnimation(){const n=()=>{const c=window.app,M=(c==null?void 0:c.metronomeBeatCount)||0,R=(c==null?void 0:c.metronomeMeasureCount)||0,{width:I,height:m}=this.canvas;this.ctx.clearRect(0,0,I,m),this.ctx.fillStyle="white",this.ctx.fillRect(0,0,I,m),this.updateVertices(M,R),this.drawGridWithVertices(),this.animationId=requestAnimationFrame(n)};n()}updateVertices(n,c){const M=Date.now()*.001,R=10,I=3;let m=I;if(n!==this.lastBeatCount)this.lastBeatCount=n,this.animationStartTime=M,m=R;else{const i=M-this.animationStartTime,S=Math.min(i/.5,1),u=1-Math.pow(1-S,3),l=R;m=l-(l-I)*u}const E=(n+1)%4;E===0&&this.lastMeasureCount,n!==this.lastMeasureCount&&(this.lastMeasureCount=n,E===0&&(m=R*2)),this.vertices.forEach((i,d)=>{const S=Math.floor(M*60),u=i.originalX*73856093^i.originalY*19349663^S,l=this.seededRandom(u),h=this.seededRandom(u+1),r=(l*2-1)*m,o=(h*2-1)*m;i.x=i.originalX+r,i.y=i.originalY+o})}seededRandom(n){const c=Math.sin(n)*1e4;return c-Math.floor(c)}destroy(){this.animationId&&cancelAnimationFrame(this.animationId),this.container.parentNode&&this.container.parentNode.removeChild(this.container)}}let ts,gs;document.addEventListener("contextmenu",function(L){return L.preventDefault(),L.stopPropagation(),!1});document.addEventListener("mousedown",function(L){if(L.button===2)return L.preventDefault(),L.stopPropagation(),!1});document.addEventListener("mouseup",function(L){if(L.button===2)return L.preventDefault(),L.stopPropagation(),!1});function vpt(){const L=document.createElement("div");L.id="global-grey-borders",L.style.position="fixed",L.style.top="0",L.style.left="0",L.style.width="100vw",L.style.height="100vh",L.style.pointerEvents="none",L.style.zIndex="999998",document.body.appendChild(L),gs=document.createElement("div"),gs.id="global-focus-overlay",gs.style.position="fixed",gs.style.top="0",gs.style.left="0",gs.style.width="100vw",gs.style.height="100vh",gs.style.backgroundColor="rgba(0, 0, 0, 0.35)",gs.style.pointerEvents="none",gs.style.zIndex="999999",gs.style.display="none",gs.addEventListener("click",async()=>{if(ts&&!ts.audioStarted){console.log("Focus overlay clicked, starting audio context...");try{await ts.retryAudioContext(),Fh()}catch(c){console.error("Failed to start audio context on focus overlay click:",c)}}}),document.body.appendChild(gs);const n=document.createElement("canvas");n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.width="100%",n.style.height="100%",L.appendChild(n),Pf(),window.addEventListener("resize",Pf),window.addEventListener("orientationchange",()=>{setTimeout(Pf,100),setTimeout(Pf,300),setTimeout(Pf,500)})}function Pf(){const L=window.innerWidth,n=window.innerHeight,{targetWidth:c,targetHeight:M}=Ys(L,n),R=(L-c)/2,I=(n-M)/2,m=document.querySelector("#global-grey-borders canvas");if(m){m.width=L,m.height=n;const E=m.getContext("2d");E&&(E.clearRect(0,0,L,n),E.fillStyle="rgba(34, 34, 34, 0.7)",E.fillRect(0,0,L,I),E.fillRect(0,I+M,L,n-(I+M)),E.fillRect(0,I,R,M),E.fillRect(R+c,I,L-(R+c),M))}}function Fh(){if(!gs||!ts)return;const L=ts.state!=="Focused"||!ts.audioStarted,n=gs.style.display,c=L?"block":"none";n!==c&&(gs.style.display=c,gs.style.pointerEvents=L?"auto":"none",console.log("Focus overlay:",c,"state:",ts.state,"audioStarted:",ts.audioStarted,"shouldShow:",L))}window.addEventListener("DOMContentLoaded",()=>{vpt(),new ppt,ts=new cpt,window.app=ts,window.addEventListener("focus",Fh),window.addEventListener("blur",Fh),document.addEventListener("click",async()=>{if(ts&&!ts.audioStarted){console.log("User interaction detected, starting audio context...");try{await ts.retryAudioContext(),Fh()}catch(n){console.error("Failed to start audio context on user interaction:",n)}}},{once:!1}),document.addEventListener("touchstart",async()=>{if(ts&&!ts.audioStarted){console.log("Touch interaction detected, starting audio context...");try{await ts.retryAudioContext(),Fh()}catch(n){console.error("Failed to start audio context on touch interaction:",n)}}},{once:!1}),Fh(),setInterval(Fh,200);const L=document.getElementById("force-metronome-btn");L&&L.addEventListener("click",async()=>{await(ts==null?void 0:ts.startAudioContext())})});
